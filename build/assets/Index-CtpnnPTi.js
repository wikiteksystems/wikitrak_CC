import{r as s,K as be,i as H,j as e,a as k,u as Z,t as T,T as h,B as q,a6 as Y,h as Ae,a7 as Ee,_ as J,a8 as Ie,n as Re,o as ke}from"./index-NSaVhu1Q.js";import{A as ye,B as $,ao as Le,e as ee,a3 as me,ap as Ne,r as ze,aq as te,c as Ce,a0 as Pe,J as De,M as ve,an as Fe,d as Me,a as Be,aa as Ge,L as Te}from"./Close-DpjR4xt1.js";import{r as se}from"./createSvgIcon-CMu6ck8n.js";import{j as Ve,V as Xe}from"./VehicleMenu-CzAWwnhw.js";import{B as i}from"./CircularProgress-rkAC4pXE.js";import{C as _e}from"./Form-BeqrIXE5.js";import{u as Je,G as We,M as Ue}from"./esm-CggiB5SI.js";import{a as W}from"./Switch-DxfE7SIY.js";import{I as Ke}from"./TextField-CfQeRAHL.js";import{B as Qe,S as Ye}from"./button-gEgKdFR3.js";import"./createSvgIcon-NK_pmS8T.js";import"./OutlinedInput-CKZv5UBt.js";import"./IconButton-DDpnFjDT.js";import"./Paper-DRlMr72K.js";var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const He=qe;var Ze=function(l,o){return s.createElement(ye,be({},l,{ref:o,icon:He}))},$e=s.forwardRef(Ze);const et=$e;var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const st=tt;var nt=function(l,o){return s.createElement(ye,be({},l,{ref:o,icon:st}))},it=s.forwardRef(nt);const ot=it,at=t=>{const{getPrefixCls:l,direction:o}=s.useContext($),{prefixCls:r,className:a}=t,x=l("input-group",r),y=l("input"),[m,S]=Le(y),v=ee(x,{[`${x}-lg`]:t.size==="large",[`${x}-sm`]:t.size==="small",[`${x}-compact`]:t.compact,[`${x}-rtl`]:o==="rtl"},S,a),f=s.useContext(me),p=s.useMemo(()=>Object.assign(Object.assign({},f),{isFormItemInput:!1}),[f]);return m(s.createElement("span",{className:v,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},s.createElement(me.Provider,{value:p},t.children)))},rt=at;var lt=function(t,l){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&l.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)l.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(o[r[a]]=t[r[a]]);return o};const ct=t=>t?s.createElement(ot,null):s.createElement(et,null),dt={click:"onClick",hover:"onMouseOver"},xt=s.forwardRef((t,l)=>{const{visibilityToggle:o=!0}=t,r=typeof o=="object"&&o.visible!==void 0,[a,x]=s.useState(()=>r?o.visible:!1),y=s.useRef(null);s.useEffect(()=>{r&&x(o.visible)},[r,o]);const m=Ne(y),S=()=>{const{disabled:z}=t;z||(a&&m(),x(I=>{var b;const P=!I;return typeof o=="object"&&((b=o.onVisibleChange)===null||b===void 0||b.call(o,P)),P}))},v=z=>{const{action:I="click",iconRender:b=ct}=t,P=dt[I]||"",j=b(a),D={[P]:S,className:`${z}-icon`,key:"passwordIcon",onMouseDown:M=>{M.preventDefault()},onMouseUp:M=>{M.preventDefault()}};return s.cloneElement(s.isValidElement(j)?j:s.createElement("span",null,j),D)},{className:f,prefixCls:p,inputPrefixCls:w,size:g}=t,L=lt(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:c}=s.useContext($),A=c("input",w),R=c("input-password",p),N=o&&v(R),C=ee(R,f,{[`${R}-${g}`]:!!g}),E=Object.assign(Object.assign({},ze(L,["suffix","iconRender","visibilityToggle"])),{type:a?"text":"password",className:C,prefixCls:A,suffix:N});return g&&(E.size=g),s.createElement(te,Object.assign({ref:Ce(l,y)},E))}),ut=xt;var pt=function(t,l){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&l.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)l.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(o[r[a]]=t[r[a]]);return o};const ht=s.forwardRef((t,l)=>{const{prefixCls:o,inputPrefixCls:r,className:a,size:x,suffix:y,enterButton:m=!1,addonAfter:S,loading:v,disabled:f,onSearch:p,onChange:w,onCompositionStart:g,onCompositionEnd:L}=t,c=pt(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:A,direction:R}=s.useContext($),N=s.useRef(!1),C=A("input-search",o),E=A("input",r),{compactSize:z}=Pe(C,R),I=De(n=>{var d;return(d=x??z)!==null&&d!==void 0?d:n}),b=s.useRef(null),P=n=>{n&&n.target&&n.type==="click"&&p&&p(n.target.value,n,{source:"clear"}),w&&w(n)},j=n=>{var d;document.activeElement===((d=b.current)===null||d===void 0?void 0:d.input)&&n.preventDefault()},D=n=>{var d,O;p&&p((O=(d=b.current)===null||d===void 0?void 0:d.input)===null||O===void 0?void 0:O.value,n,{source:"input"})},M=n=>{N.current||v||D(n)},X=typeof m=="boolean"?s.createElement(Ye,null):null,B=`${C}-button`;let G;const F=m||{},_=F.type&&F.type.__ANT_BUTTON===!0;_||F.type==="button"?G=ve(F,Object.assign({onMouseDown:j,onClick:n=>{var d,O;(O=(d=F==null?void 0:F.props)===null||d===void 0?void 0:d.onClick)===null||O===void 0||O.call(d,n),D(n)},key:"enterButton"},_?{className:B,size:I}:{})):G=s.createElement(Qe,{className:B,type:m?"primary":void 0,size:I,disabled:f,key:"enterButton",onMouseDown:j,onClick:D,loading:v,icon:X},m),S&&(G=[G,ve(S,{key:"addonAfter"})]);const U=ee(C,{[`${C}-rtl`]:R==="rtl",[`${C}-${I}`]:!!I,[`${C}-with-button`]:!!m},a),K=n=>{N.current=!0,g==null||g(n)},Q=n=>{N.current=!1,L==null||L(n)};return s.createElement(te,Object.assign({ref:Ce(b,l),onPressEnter:M},c,{size:I,onCompositionStart:K,onCompositionEnd:Q,prefixCls:E,addonAfter:G,suffix:y,onChange:P,className:U,disabled:f}))}),ft=ht,V=te;V.Group=rt;V.Search=ft;V.TextArea=Fe;V.Password=ut;const je=V;var ne={},gt=H;Object.defineProperty(ne,"__esModule",{value:!0});var Se=ne.default=void 0,mt=gt(se()),vt=e;Se=ne.default=(0,mt.default)((0,vt.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var ie={},jt=H;Object.defineProperty(ie,"__esModule",{value:!0});var we=ie.default=void 0,bt=jt(se()),yt=e;we=ie.default=(0,bt.default)((0,yt.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Place");var oe={},Ct=H;Object.defineProperty(oe,"__esModule",{value:!0});var Oe=oe.default=void 0,St=Ct(se()),wt=e;Oe=oe.default=(0,St.default)((0,wt.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone");const Ot=({title:t,setShowContent:l,showContent:o,showMap:r,setShowMap:a,setShowGfBar:x,showGfBar:y,setShowGfAlert:m,showGfAlert:S})=>{const{collapsed:v}=k(c=>c.auth),{selectedVehicle:f}=k(c=>c.liveMap),{vehicleSideBar:p}=k(c=>c.geofence);s.useState(!1),JSON.parse(localStorage.getItem("w_userDetails"));const w=Z(),g=()=>{w(Ae(!v))},L=()=>{l({...o,vehicle:!o.vehicle}),x(!1),m(!1),w(Y({data:!p}))};return e.jsxs(i,{display:"flex",justifyContent:"space-between",p:1,sx:{bgcolor:T.bgColor,border:"1px solid white",borderRadius:"4px",height:"55px"},children:[e.jsxs(i,{display:"flex",children:[e.jsx(i,{sx:{color:"white",my:"20px"},children:v?e.jsx(Me,{style:{cursor:"pointer",width:"30px",height:"30px"},onClick:g}):e.jsx(Be,{style:{cursor:"pointer",width:"30px",height:"30px"},onClick:g})}),e.jsx(i,{sx:{my:"20px",mx:"10px"},children:e.jsx(h,{style:{fontSize:"20px",fontFamily:"ubuntu",fontWeight:"500",color:"#FFFFFF"},children:"WIKITRACK"})})]}),e.jsx(i,{children:e.jsx(h,{variant:"h6",color:"white",fontWeight:"bold",sx:{ml:"15px",mt:"15px"},children:Object.keys(f).length>0&&r?`${t} - Geofence (${f.reg_id})`:e.jsxs(e.Fragment,{children:[t," ",Object.keys(f).length>0&&f.reg_id]})})}),e.jsxs(i,{sx:{display:"flex"},children:[e.jsxs(q,{variant:"outlined",size:"small",sx:{color:o.vehicle?"white":"black",backgroundColor:o.vehicle?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:L,children:[e.jsx("img",{src:Ve,style:{marginRight:"5px"}}),Object.keys(f).length>0?f.reg_id:"Vehicles"]}),r&&e.jsx(i,{children:e.jsx(q,{variant:"outlined",size:"small",sx:{color:y?"white":"black",backgroundColor:y?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:()=>{m(!1),x(!y),w(Y({data:!1}))},children:"Geofence"})}),e.jsx(i,{sx:{color:"white",mr:"10px"},children:e.jsxs(i,{sx:{display:"flex",marginTop:"14px",gap:"10px"},children:[e.jsx(i,{onClick:()=>{x(!1),m(!S),w(Y({data:!1}))},children:e.jsx(Oe,{sx:{cursor:"pointer",width:"30px",height:"30px"}})}),e.jsx(i,{onClick:()=>{l({...o,user:!o.user}),a(!1)},children:o.user?e.jsx(we,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}}):e.jsx(Se,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}})})]})})]})]})},At=Ot,Et=({})=>{const{selectedVehicle:t,locationData:l}=k(o=>o.liveMap);return e.jsxs(i,{sx:{padding:"15px",display:"flex",flexDirection:"column",gap:"15px",color:"#686868",backgroundColor:"#FFFFFF",height:"95vh"},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h,{children:e.jsx("b",{children:"Geofence Alert"})}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{children:"14 Jan 2024"}),e.jsx("span",{style:{paddingLeft:"15px"},children:"12: 12PM: 12"})]})]}),e.jsxs(i,{sx:{display:"flex",border:"1px solid #686868",padding:"5px",borderRadius:"5px"},children:[e.jsx("img",{style:{width:"30px",height:"30px",borderRadius:"5px",marginRight:"15px",alignItems:"center",marginTop:"15px"},src:Ge,alt:"logo"}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[e.jsxs(h,{sx:{fontSize:"15px"},children:["Your Vehicle No."," ",Object.keys(t).length>0?t.reg_id:"XXX"]}),e.jsx(h,{children:"has gone at location xx km from it's center "})]})]})]})},It=()=>{const t=JSON.parse(localStorage.getItem("w_userDetails"));return e.jsxs(i,{children:[e.jsxs(i,{sx:{backgroundColor:T.bgShadow,m:"10px",borderRadius:"5px",height:"150px"},children:[e.jsx(i,{sx:{pl:"20px",pt:"10px",mb:"10px"},children:e.jsx("b",{children:"User Settings"})}),e.jsxs(i,{sx:{display:"flex"},children:[e.jsx(i,{sx:{ml:"23px",mt:"11px",height:"70px",width:"70px",backgroundColor:"white",borderRadius:"50%"}}),e.jsxs(i,{sx:{height:"80px",width:"200px",display:"flex",justifyContent:"center",flexDirection:"column",mx:"20px"},children:[e.jsx(i,{children:e.jsxs("b",{children:[" ",t&&t.first_name," ",t.last_name]})}),e.jsx(i,{children:t&&t.role})]})]})]}),e.jsx(i,{sx:{marginTop:"9%",alignContent:"center",textAlign:"center"},children:e.jsx(_e,{})})]})},Rt=It,kt="/assets/tractorIcon-zWRQE9nW.jpg",Lt="data:image/png;base64,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",Nt="http://139.59.37.47:3031",zt=({showGfBar:t,showGfAlert:l})=>{const{isLoaded:o,loadError:r}=Je({googleMapsApiKey:"AIzaSyA_S7GfAh6rJYWQ5X4n4X-3poo3vymuspU"}),{selectedVehicle:a,locationData:x,tractorIcon:y}=k(n=>n.liveMap),{geofence:m,vehicleSideBar:S}=k(n=>n.geofence),{collapsed:v}=k(n=>n.auth),f=s.useRef(null),[p,w]=s.useState(null),[g,L]=s.useState(null),[c,A]=s.useState(1e3),[R,N]=s.useState([]),[C,E]=s.useState(!0),[z,I]=s.useState(!0),[b,P]=s.useState(!1),[j,D]=s.useState({lat:18.516726,lng:73.856255}),[M,X]=s.useState(5),B=s.useRef(null);let G=Z();s.useEffect(()=>{F()},[a]),s.useEffect(()=>{if(x.length>0&&Object.keys(a).length>0){let n=x.filter(d=>{var O;return((O=d.latestDocument)==null?void 0:O.imei)===a.imei});N(n)}},[a]),s.useEffect(()=>{if(p&&j&&c){B.current&&B.current.setMap(null);const n=new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:p,center:j,radius:c,draggable:!0,editable:!0});n.addListener("center_changed",()=>{}),n.addListener("radius_changed",()=>{A(n.getRadius())}),n.addListener("dragend",()=>{D(n.getCenter().toJSON())}),B.current=n}},[p,j,c]),s.useEffect(()=>{p&&g&&p.fitBounds(g)},[p,g]);const F=async()=>{var n,d,O,ae,re,le,ce,de,xe,ue,pe,he,fe,ge;if(Object.keys(a).length>0)try{const u=await Ee.get(`${Nt}/api/get/geofance/${a==null?void 0:a.imei}`);if(u.data.geofenceData.lat)D({lat:(d=(n=u==null?void 0:u.data)==null?void 0:n.geofenceData)==null?void 0:d.lat,lng:(ae=(O=u==null?void 0:u.data)==null?void 0:O.geofenceData)==null?void 0:ae.long}),A((le=(re=u==null?void 0:u.data)==null?void 0:re.geofenceData)==null?void 0:le.radius),E((de=(ce=u==null?void 0:u.data)==null?void 0:ce.geofenceData)==null?void 0:de.isActive_Geofance),I(((ue=(xe=u==null?void 0:u.data)==null?void 0:xe.geofenceData)==null?void 0:ue.type)==="inward"),P((he=(pe=u==null?void 0:u.data)==null?void 0:pe.geofenceData)==null?void 0:he.isActive_Speed),X((ge=(fe=u==null?void 0:u.data)==null?void 0:fe.geofenceData)==null?void 0:ge.speed);else return J.success("No Geofence For Selected Vehicle",{id:"getting geofence"})}catch(u){console.log(u,"error while getting geofence"),J.error("Error while getting geofence",{id:"getting geofence"})}},_=n=>{w(n)},U=()=>{if(Object.keys(a).length>0){const n={imei:a.imei,area_type:"circular",type:z?"inward":"outward",lat:j.lat,long:j.lng,radius:c,isActive_Geofance:C,isActive_Speed:!!b,speed:b?M:5};G(Ie({data:n})),J.success("Successful Saved",{id:"geofence"})}else J.error("Please Select Vehicle",{id:"geofence"})},K=()=>{D(B.current.getCenter().toJSON()),A(B.current.getRadius())};if(r)return"Error loading maps";if(!o)return"Loading maps";const Q={width:"100%",height:"92vh"};return e.jsxs(i,{sx:{display:"flex",flexDirection:"row"},children:[e.jsx(We,{ref:f,mapContainerStyle:Q,zoom:15,center:j,onLoad:_,children:R&&R.length>0&&R.map((n,d)=>e.jsx(Ue,{position:{lat:n.latestDocument.lat,lng:n.latestDocument.lng},icon:{path:y.path1,fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},d))}),t&&!l&&!S&&j&&e.jsx(i,{sx:{width:v?"25%":"20%"},children:e.jsxs(i,{sx:{display:"flex",padding:"15px",flexDirection:"column",gap:"10px"},children:[e.jsx(h,{sx:{fontWeight:"bold",fontSize:"16px"},children:"Geofence Setting"}),e.jsx(h,{sx:{color:"#686868"},children:"Centered At "}),e.jsxs(h,{sx:{color:"#686868"},children:["Lat: ",j.lat.toFixed(2)]}),e.jsxs(h,{sx:{color:"#686868"},children:["Lng: ",j.lng.toFixed(2)]}),e.jsxs(h,{sx:{color:"#686868",border:"1px solid #686868",borderRadius:"4px",padding:"8px"},children:["Radius ( ",(c/1e3).toFixed(2)," in km)"]}),e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(h,{variant:"body1",component:"b",children:"Inactive"}),e.jsx(W,{defaultChecked:C,onChange:()=>{E(!C)},color:"primary",inputProps:{"aria-label":"toggle active state"}}),e.jsx(h,{variant:"body1",component:"b",children:"Active"})]}),e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(h,{variant:"body1",component:"b",children:"Inward"}),e.jsx(W,{checked:z,onChange:()=>{I(!z)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),e.jsx(h,{variant:"body1",component:"b",children:"Outward"})]}),e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(W,{checked:b,onChange:()=>{P(!b)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),e.jsx(h,{variant:"body1",component:"b",children:"Speed Limit"})]}),b&&e.jsx(i,{sx:{},children:e.jsx(Ke,{sx:{width:"100%",border:"none","&:focus":{outline:"none"}},value:M,placeholder:"Enter Speed Limit",type:"number",onChange:n=>{const d=Math.max(0,parseInt(n.target.value));X(d)}})}),e.jsx(q,{variant:"outlined",size:"small",sx:{color:"white",backgroundColor:T.bgColor,mt:"6px",mx:"5px",border:"1px solid white",height:"40px",width:"100%","&:hover":{color:"black",background:T.bgShadow,border:"1px solid black"},letterSpacing:"1.5px",fontSize:"16px"},onClick:()=>{K(),U()},children:"SUBMIT"})]})})]})},Pt=({showMap:t,setShowMap:l,showGfBar:o,showGfAlert:r})=>{const{selectedVehicle:a}=k(x=>x.liveMap);return e.jsx(e.Fragment,{children:t?e.jsx(zt,{showGfBar:o,showGfAlert:r}):e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",background:T.bgShadow,margin:"10px",padding:"10px",borderRadius:"8px"},children:[e.jsxs(i,{sx:{},children:[e.jsx(h,{sx:{fontWeight:"bold",fontSize:"16px",margin:"4px"},children:"Vehicle Settings"}),e.jsxs(i,{sx:{display:"flex"},children:[e.jsx(i,{children:e.jsx("img",{src:kt,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}})}),e.jsxs(i,{children:[e.jsx(h,{sx:{fontWeight:"bold"},children:Object.keys(a).length>0?a==null?void 0:a.reg_id:"Reg No"}),e.jsx(h,{sx:{marginBottom:"5px"},children:"Chassis No"}),e.jsxs(i,{sx:{width:"200px",display:"flex",gap:"8px"},children:[e.jsx(je,{placeholder:"ONLINE"}),e.jsx(je,{placeholder:"RUNNING"})]}),e.jsx(i,{sx:{marginLeft:"-8px"},children:e.jsxs(h,{children:[e.jsx(W,{})," ",e.jsx("b",{children:"Switched ON / OFF"})]})})]})]})]}),e.jsxs(i,{onClick:()=>{l(!t)},sx:{cursor:"pointer",marginTop:"50px"},children:[e.jsx("img",{src:Lt,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}}),e.jsx(h,{sx:{fontSize:"12px"},children:"Set Geofence"})]})]})})};function Yt(){const{w_customer_id:t}=k(c=>c.auth),{vehicleSideBar:l}=k(c=>c.geofence),{collapsed:o}=k(c=>c.auth),[r,a]=s.useState([]);s.useState([]);const[x,y]=s.useState({user:!0,vehicle:!1}),[m,S]=s.useState(!1),[v,f]=s.useState(!1),[p,w]=s.useState(!1);let g=Z();s.useEffect(()=>{L()},[]);const L=async()=>{let c=[],A=[];(await g(Re({w_customer_id:t}))).payload.map(E=>{c.push({id:E.id,label:E.registration_id,value:E.imei[0].mac_id}),A.push(E.imei[0].mac_id)});const N="one",C=A;A.length>0&&g(ke({type:N,imei:C})),a(c)};return e.jsxs("div",{className:"app",children:[e.jsx(Te,{}),e.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[e.jsx(At,{title:"Settings",setShowContent:y,showContent:x,showMap:m,setShowMap:S,showGfBar:v,setShowGfBar:f,showGfAlert:p,setShowGfAlert:w}),e.jsxs(i,{style:{display:"flex",width:"100%",height:"95vh"},children:[e.jsx(i,{style:{width:l?"80%":"100%"},children:x.user?e.jsx(Rt,{}):e.jsx(Pt,{showMap:m,setShowMap:S,showGfBar:v,showGfAlert:p})}),!p&&!v&&l&&e.jsx(i,{style:{width:"20%"},children:e.jsx(Xe,{vehicleData:r,title:"Setting"})}),p&&!v&&!l&&e.jsx(i,{sx:{width:o?"25%":"20%"},children:e.jsx(Et,{})})]})]})]})}export{Yt as default};
