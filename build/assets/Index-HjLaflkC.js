import{c as At,j as a,g as tt,a as rt,s as Ae,_ as G,r as j,u as nt,b as ot,d as wt,e as we,f as it,R as O,h as at,i as Se,k as V,B as de,t as xe,l as st,m as lt,n as St,o as Fe,I as kt,T as K,p as Me,q,v as Ot,w as Pt,x as _t,y as Tt,z as Ct,A as Rt,C as Et,D as Dt,E as It,F as Lt,G as $t,H as Nt,J as Ft,K as Mt}from"./index-C2R-h_GK.js";import{s as se}from"./Socket-0N_gnJcr.js";import{S as Vt,R as Bt,t as Ie,d as zt,L as Gt}from"./LeftSideBar2-Ca56j9LJ.js";import{d as ye}from"./dayjs.min-BTwdjDb8.js";import{u as Kt,f as Wt,B as S,C as Yt,I as Ut}from"./menu2-kNFC5OGf.js";import{T as le}from"./index-BaCpmYHv.js";import{f as M,_ as ct,a as ut,b as Ht,c as Zt,i as Q,T as Le,p as W,L as z,d as $e,e as ft,D as qt,G as Xt,u as Jt,C as Qt,g as ne,h as X,S as er,A as tr,j as rr,k as Ve,l as nr,m as ee,n as or,o as ir,q as pt,r as ar,s as pe,w as Be,t as he,v as sr,x as lr,R as dt,B as cr,y as ur,X as fr,Y as pr,z as ht,E as dr,F as hr}from"./TopBar-CCVpDAGe.js";import{G as gr}from"./GeofencAlert-DjPlDAOI.js";import"./proj-XQwXs9DQ.js";import{u as mr,G as xr,M as yr}from"./esm-DQR-Dde_.js";import{F as vr}from"./FormControlLabel-DjG95KOX.js";import{S as br}from"./Switch-HXxjxRVS.js";import{V as jr}from"./VehicleGroups-C9JR-tI6.js";import"./createSvgIcon-Cxx9lPp_.js";import"./useControlled-B1v3_3J2.js";import"./index-CqA8f-s-.js";import"./index-BhgM9pO9.js";import"./NotificationsNone-B9zvnn7E.js";import"./SwitchBase-CC6rnWtK.js";const Ar=At(a.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function wr(e){return tt("MuiAvatar",e)}rt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Sr=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],kr=e=>{const{classes:t,variant:n,colorDefault:r}=e;return it({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},wr,t)},Or=Ae("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:G({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:G({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Pr=Ae("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),_r=Ae(Ar,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Tr({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[o,i]=j.useState(!1);return j.useEffect(()=>{if(!n&&!r)return;i(!1);let s=!0;const l=new Image;return l.onload=()=>{s&&i("loaded")},l.onerror=()=>{s&&i("error")},l.crossOrigin=e,l.referrerPolicy=t,l.src=n,r&&(l.srcset=r),()=>{s=!1}},[e,t,n,r]),o}const Cr=j.forwardRef(function(t,n){const r=nt({props:t,name:"MuiAvatar"}),{alt:o,children:i,className:s,component:l="div",slots:u={},slotProps:f={},imgProps:m,sizes:y,src:x,srcSet:P,variant:b="circular"}=r,c=ot(r,Sr);let A=null;const k=Tr(G({},m,{src:x,srcSet:P})),_=x||P,C=_&&k!=="error",w=G({},r,{colorDefault:!C,component:l,variant:b}),T=kr(w),[$,N]=wt("img",{className:T.img,elementType:Pr,externalForwardedProps:{slots:u,slotProps:{img:G({},m,f.img)}},additionalProps:{alt:o,src:x,srcSet:P,sizes:y},ownerState:w});return C?A=a.jsx($,G({},N)):i||i===0?A=i:_&&o?A=o[0]:A=a.jsx(_r,{ownerState:w,className:T.fallback}),a.jsx(Or,G({as:l,ownerState:w,className:we(T.root,s),ref:n},c,{children:A}))}),gt=Cr;function Rr(e){return tt("MuiFormGroup",e)}rt("MuiFormGroup",["root","row","error"]);const Er=["className","row"],Dr=e=>{const{classes:t,row:n,error:r}=e;return it({root:["root",n&&"row",r&&"error"]},Rr,t)},Ir=Ae("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>G({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Lr=j.forwardRef(function(t,n){const r=nt({props:t,name:"MuiFormGroup"}),{className:o,row:i=!1}=r,s=ot(r,Er),l=Kt(),u=Wt({props:r,muiFormControl:l,states:["error"]}),f=G({},r,{row:i,error:u.error}),m=Dr(f);return a.jsx(Ir,G({className:we(m.root,o),ownerState:f,ref:n},s))}),$r=Lr;var Nr=["points","className","baseLinePoints","connectNulls"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}function Fr(e,t){if(e==null)return{};var n=Mr(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Mr(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function ze(e){return Gr(e)||zr(e)||Br(e)||Vr()}function Vr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(e,t){if(e){if(typeof e=="string")return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}}function zr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gr(e){if(Array.isArray(e))return Ce(e)}function Ce(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ge=function(t){return t&&t.x===+t.x&&t.y===+t.y},Kr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){Ge(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Ge(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},ce=function(t,n){var r=Kr(t);n&&(r=[r.reduce(function(i,s){return[].concat(ze(i),ze(s))},[])]);var o=r.map(function(i){return i.reduce(function(s,l,u){return"".concat(s).concat(u===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(o,"Z"):o},Wr=function(t,n,r){var o=ce(t,r);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(ce(n.reverse(),r).slice(1))},Yr=function(t){var n=t.points,r=t.className,o=t.baseLinePoints,i=t.connectNulls,s=Fr(t,Nr);if(!n||!n.length)return null;var l=we("recharts-polygon",r);if(o&&o.length){var u=s.stroke&&s.stroke!=="none",f=Wr(n,o,i);return O.createElement("g",{className:l},O.createElement("path",te({},M(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:f})),u?O.createElement("path",te({},M(s,!0),{fill:"none",d:ce(n,i)})):null,u?O.createElement("path",te({},M(s,!0),{fill:"none",d:ce(o,i)})):null)}var m=ce(n,i);return O.createElement("path",te({},M(s,!0),{fill:m.slice(-1)==="Z"?s.fill:"none",className:l,d:m}))},Ur=ct,Hr=Ht,Zr=ut;function qr(e,t){return e&&e.length?Ur(e,Zr(t),Hr):void 0}var Xr=qr;const Jr=at(Xr);var Qr=ct,en=ut,tn=Zt;function rn(e,t){return e&&e.length?Qr(e,en(t),tn):void 0}var nn=rn;const on=at(nn);var an=["cx","cy","angle","ticks","axisLine"],sn=["ticks","tick","angle","tickFormatter","stroke"];function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ke(Object(n),!0).forEach(function(r){ke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function We(e,t){if(e==null)return{};var n=ln(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ln(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xt(r.key),r)}}function un(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fn(e,t,n){return t=ve(t),pn(e,mt()?Reflect.construct(t,n||[],ve(e).constructor):t.apply(e,n))}function pn(e,t){if(t&&(oe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dn(e)}function dn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mt=function(){return!!e})()}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ve(e)}function hn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Re(e,t)}function ke(e,t,n){return t=xt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e){var t=gn(e,"string");return oe(t)=="symbol"?t:String(t)}function gn(e,t){if(oe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(oe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oe=function(e){hn(t,e);function t(){return cn(this,t),fn(this,t,arguments)}return un(t,[{key:"getTickValueCoord",value:function(r){var o=r.coordinate,i=this.props,s=i.angle,l=i.cx,u=i.cy;return W(l,u,o,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,o;switch(r){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var r=this.props,o=r.cx,i=r.cy,s=r.angle,l=r.ticks,u=Jr(l,function(m){return m.coordinate||0}),f=on(l,function(m){return m.coordinate||0});return{cx:o,cy:i,startAngle:s,endAngle:s,innerRadius:f.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.cx,i=r.cy,s=r.angle,l=r.ticks,u=r.axisLine,f=We(r,an),m=l.reduce(function(b,c){return[Math.min(b[0],c.coordinate),Math.max(b[1],c.coordinate)]},[1/0,-1/0]),y=W(o,i,m[0],s),x=W(o,i,m[1],s),P=U(U(U({},M(f,!1)),{},{fill:"none"},M(u,!1)),{},{x1:y.x,y1:y.y,x2:x.x,y2:x.y});return O.createElement("line",ue({className:"recharts-polar-radius-axis-line"},P))}},{key:"renderTicks",value:function(){var r=this,o=this.props,i=o.ticks,s=o.tick,l=o.angle,u=o.tickFormatter,f=o.stroke,m=We(o,sn),y=this.getTickTextAnchor(),x=M(m,!1),P=M(s,!1),b=i.map(function(c,A){var k=r.getTickValueCoord(c),_=U(U(U(U({textAnchor:y,transform:"rotate(".concat(90-l,", ").concat(k.x,", ").concat(k.y,")")},x),{},{stroke:"none",fill:f},P),{},{index:A},k),{},{payload:c});return O.createElement(z,ue({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(c.coordinate)},$e(r.props,c,A)),t.renderTickItem(s,_,u?u(c.value,A):c.value))});return O.createElement(z,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var r=this.props,o=r.ticks,i=r.axisLine,s=r.tick;return!o||!o.length?null:O.createElement(z,{className:"recharts-polar-radius-axis"},i&&this.renderAxisLine(),s&&this.renderTicks(),ft.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,o,i){var s;return O.isValidElement(r)?s=O.cloneElement(r,o):Q(r)?s=r(o):s=O.createElement(Le,ue({},o,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}]),t}(j.PureComponent);ke(Oe,"displayName","PolarRadiusAxis");ke(Oe,"axisType","radiusAxis");ke(Oe,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ie(e){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(e)}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ue(Object(n),!0).forEach(function(r){Pe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vt(r.key),r)}}function xn(e,t,n){return t&&He(e.prototype,t),n&&He(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yn(e,t,n){return t=be(t),vn(e,yt()?Reflect.construct(t,n||[],be(e).constructor):t.apply(e,n))}function vn(e,t){if(t&&(ie(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bn(e)}function bn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yt=function(){return!!e})()}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},be(e)}function jn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Ee(e,t)}function Pe(e,t,n){return t=vt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e){var t=An(e,"string");return ie(t)=="symbol"?t:String(t)}function An(e,t){if(ie(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ie(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wn=Math.PI/180,Ze=1e-5,_e=function(e){jn(t,e);function t(){return mn(this,t),yn(this,t,arguments)}return xn(t,[{key:"getTickLineCoord",value:function(r){var o=this.props,i=o.cx,s=o.cy,l=o.radius,u=o.orientation,f=o.tickSize,m=f||8,y=W(i,s,l,r.coordinate),x=W(i,s,l+(u==="inner"?-1:1)*m,r.coordinate);return{x1:y.x,y1:y.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(r){var o=this.props.orientation,i=Math.cos(-r.coordinate*wn),s;return i>Ze?s=o==="outer"?"start":"end":i<-Ze?s=o==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.cx,i=r.cy,s=r.radius,l=r.axisLine,u=r.axisLineType,f=H(H({},M(this.props,!1)),{},{fill:"none"},M(l,!1));if(u==="circle")return O.createElement(qt,Z({className:"recharts-polar-angle-axis-line"},f,{cx:o,cy:i,r:s}));var m=this.props.ticks,y=m.map(function(x){return W(o,i,s,x.coordinate)});return O.createElement(Yr,Z({className:"recharts-polar-angle-axis-line"},f,{points:y}))}},{key:"renderTicks",value:function(){var r=this,o=this.props,i=o.ticks,s=o.tick,l=o.tickLine,u=o.tickFormatter,f=o.stroke,m=M(this.props,!1),y=M(s,!1),x=H(H({},m),{},{fill:"none"},M(l,!1)),P=i.map(function(b,c){var A=r.getTickLineCoord(b),k=r.getTickTextAnchor(b),_=H(H(H({textAnchor:k},m),{},{stroke:"none",fill:f},y),{},{index:c,payload:b,x:A.x2,y:A.y2});return O.createElement(z,Z({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(b.coordinate)},$e(r.props,b,c)),l&&O.createElement("line",Z({className:"recharts-polar-angle-axis-tick-line"},x,A)),s&&t.renderTickItem(s,_,u?u(b.value,c):b.value))});return O.createElement(z,{className:"recharts-polar-angle-axis-ticks"},P)}},{key:"render",value:function(){var r=this.props,o=r.ticks,i=r.radius,s=r.axisLine;return i<=0||!o||!o.length?null:O.createElement(z,{className:"recharts-polar-angle-axis"},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,o,i){var s;return O.isValidElement(r)?s=O.cloneElement(r,o):Q(r)?s=r(o):s=O.createElement(Le,Z({},o,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}]),t}(j.PureComponent);Pe(_e,"displayName","PolarAngleAxis");Pe(_e,"axisType","angleAxis");Pe(_e,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ge;function ae(e){"@babel/helpers - typeof";return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(e)}function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},re.apply(this,arguments)}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qe(Object(n),!0).forEach(function(r){B(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jt(r.key),r)}}function kn(e,t,n){return t&&Xe(e.prototype,t),n&&Xe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function On(e,t,n){return t=je(t),Pn(e,bt()?Reflect.construct(t,n||[],je(e).constructor):t.apply(e,n))}function Pn(e,t){if(t&&(ae(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bt=function(){return!!e})()}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},je(e)}function J(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},De(e,t)}function B(e,t,n){return t=jt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){var t=Tn(e,"string");return ae(t)=="symbol"?t:String(t)}function Tn(e,t){if(ae(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ae(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y=function(e){_n(t,e);function t(n){var r;return Sn(this,t),r=On(this,t,[n]),B(J(r),"pieRef",null),B(J(r),"sectorRefs",[]),B(J(r),"id",Jt("recharts-pie-")),B(J(r),"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Q(o)&&o()}),B(J(r),"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Q(o)&&o()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return kn(t,[{key:"isActiveIndex",value:function(r){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(r)!==-1:r===o}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,l=i.labelLine,u=i.dataKey,f=i.valueKey,m=M(this.props,!1),y=M(s,!1),x=M(l,!1),P=s&&s.offsetRadius||20,b=r.map(function(c,A){var k=(c.startAngle+c.endAngle)/2,_=W(c.cx,c.cy,c.outerRadius+P,k),C=D(D(D(D({},m),c),{},{stroke:"none"},y),{},{index:A,textAnchor:t.getTextAnchor(_.x,c.cx)},_),w=D(D(D(D({},m),c),{},{fill:"none",stroke:c.fill},x),{},{index:A,points:[W(c.cx,c.cy,c.outerRadius,k),_],key:"line"}),T=u;return ne(u)&&ne(f)?T="value":ne(u)&&(T=f),O.createElement(z,{key:"label-".concat(c.startAngle,"-").concat(c.endAngle,"-").concat(c.midAngle,"-").concat(A)},l&&t.renderLabelLineItem(l,w),t.renderLabelItem(s,C,X(c,T)))});return O.createElement(z,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(r){var o=this,i=this.props,s=i.activeShape,l=i.blendStroke,u=i.inactiveShape;return r.map(function(f,m){if((f==null?void 0:f.startAngle)===0&&(f==null?void 0:f.endAngle)===0&&r.length!==1)return null;var y=o.isActiveIndex(m),x=u&&o.hasActiveIndex()?u:null,P=y?s:x,b=D(D({},f),{},{stroke:l?f.fill:f.stroke,tabIndex:-1});return O.createElement(z,re({ref:function(A){A&&!o.sectorRefs.includes(A)&&o.sectorRefs.push(A)},tabIndex:-1,className:"recharts-pie-sector"},$e(o.props,f,m),{key:"sector-".concat(f==null?void 0:f.startAngle,"-").concat(f==null?void 0:f.endAngle,"-").concat(f.midAngle,"-").concat(m)}),O.createElement(er,re({option:P,isActive:y,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,o=this.props,i=o.sectors,s=o.isAnimationActive,l=o.animationBegin,u=o.animationDuration,f=o.animationEasing,m=o.animationId,y=this.state,x=y.prevSectors,P=y.prevIsAnimationActive;return O.createElement(tr,{begin:l,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(P),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var c=b.t,A=[],k=i&&i[0],_=k.startAngle;return i.forEach(function(C,w){var T=x&&x[w],$=w>0?rr(C,"paddingAngle",0):0;if(T){var N=Ve(T.endAngle-T.startAngle,C.endAngle-C.startAngle),E=D(D({},C),{},{startAngle:_+$,endAngle:_+N(c)+$});A.push(E),_=E.endAngle}else{var F=C.endAngle,g=C.startAngle,R=Ve(0,F-g),h=R(c),p=D(D({},C),{},{startAngle:_+$,endAngle:_+h+$});A.push(p),_=p.endAngle}}),O.createElement(z,null,r.renderSectorsStatically(A))})}},{key:"attachKeyboardHandlers",value:function(r){var o=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[s].focus(),o.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[l].focus(),o.setState({sectorToFocus:l});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,o=r.sectors,i=r.isAnimationActive,s=this.state.prevSectors;return i&&o&&o.length&&(!s||!nr(s,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,o=this.props,i=o.hide,s=o.sectors,l=o.className,u=o.label,f=o.cx,m=o.cy,y=o.innerRadius,x=o.outerRadius,P=o.isAnimationActive,b=this.state.isAnimationFinished;if(i||!s||!s.length||!ee(f)||!ee(m)||!ee(y)||!ee(x))return null;var c=we("recharts-pie",l);return O.createElement(z,{tabIndex:this.props.rootTabIndex,className:c,ref:function(k){r.pieRef=k}},this.renderSectors(),u&&this.renderLabels(s),ft.renderCallByParent(this.props,null,!1),(!P||b)&&or.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return o.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:r.sectors!==o.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,o){return r>o?"start":r<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,o){return O.isValidElement(r)?O.cloneElement(r,o):Q(r)?r(o):O.createElement(Qt,re({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(r,o,i){if(O.isValidElement(r))return O.cloneElement(r,o);var s=i;return Q(r)&&(s=r(o),O.isValidElement(s))?s:O.createElement(Le,re({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),s)}}]),t}(j.PureComponent);ge=Y;B(Y,"displayName","Pie");B(Y,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Xt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});B(Y,"parseDeltaAngle",function(e,t){var n=he(t-e),r=Math.min(Math.abs(t-e),360);return n*r});B(Y,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,o=M(e.props,!1),i=ir(r,pt);return n&&n.length?n.map(function(s,l){return D(D(D({payload:s},o),s),i&&i[l]&&i[l].props)}):i&&i.length?i.map(function(s){return D(D({},o),s.props)}):[]});B(Y,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,o=t.width,i=t.height,s=ar(o,i),l=r+pe(e.props.cx,o,o/2),u=n+pe(e.props.cy,i,i/2),f=pe(e.props.innerRadius,s,0),m=pe(e.props.outerRadius,s,s*.8),y=e.props.maxRadius||Math.sqrt(o*o+i*i)/2;return{cx:l,cy:u,innerRadius:f,outerRadius:m,maxRadius:y}});B(Y,"getComposedData",function(e){var t=e.item,n=e.offset,r=ge.getRealPieData(t);if(!r||!r.length)return null;var o=t.props,i=o.cornerRadius,s=o.startAngle,l=o.endAngle,u=o.paddingAngle,f=o.dataKey,m=o.nameKey,y=o.valueKey,x=o.tooltipType,P=Math.abs(t.props.minAngle),b=ge.parseCoordinateOfPie(t,n),c=ge.parseDeltaAngle(s,l),A=Math.abs(c),k=f;ne(f)&&ne(y)?(Be(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k="value"):ne(f)&&(Be(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k=y);var _=r.filter(function(E){return X(E,k,0)!==0}).length,C=(A>=360?_:_-1)*u,w=A-_*P-C,T=r.reduce(function(E,F){var g=X(F,k,0);return E+(ee(g)?g:0)},0),$;if(T>0){var N;$=r.map(function(E,F){var g=X(E,k,0),R=X(E,m,F),h=(ee(g)?g:0)/T,p;F?p=N.endAngle+he(c)*u*(g!==0?1:0):p=s;var d=p+he(c)*((g!==0?P:0)+h*w),L=(p+d)/2,I=(b.innerRadius+b.outerRadius)/2,v=[{name:R,value:g,payload:E,dataKey:k,type:x}],fe=W(b.cx,b.cy,I,L);return N=D(D(D({percent:h,cornerRadius:i,name:R,tooltipPayload:v,midAngle:L,middleRadius:I,tooltipPosition:fe},E),b),{},{value:X(E,k),startAngle:p,endAngle:d,payload:E,paddingAngle:he(c)*u}),N})}return D(D({},b),{},{sectors:$,data:r})});var Cn=sr({chartName:"PieChart",GraphicalChild:Y,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:_e},{axisType:"radiusAxis",AxisComp:Oe}],formatAxisMap:lr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Rn=({vehicleData:e})=>{const t=["Engine RPM","Engine coolant temperature","Battery Potential"],n=Se(),{selectedVehicle:r,loading:o}=V(w=>w.liveMap),{startDate:i,endDate:s,mode:l,selectedVehicleGroup:u,showVehicles:f}=V(w=>w.dashboard),[m,y]=j.useState(""),[x,P]=j.useState(""),b=Ie(l),c=j.useRef(null),A=j.useRef(0),k=e.length>0&&e.filter(w=>{var T;return w.label.toLowerCase().includes(m.toLowerCase())&&(x===""||((T=w==null?void 0:w.workShop)==null?void 0:T.region)===x)}),_=async w=>{var E;c.current&&(A.current=c.current.scrollTop),n(st(!f)),n(lt({imei:w.value,reg_id:w.label})),w.value,ye().subtract(5,"day"),ye();let T=w.label;const $=await n(St({registration_id:T}));let N=[];if($&&$.payload.length>0&&((E=$.payload)==null||E.map(F=>{F.ivn_parameter.length>0&&N.push(F.ivn_parameter[0])})),N.length>0){let F=N.filter(g=>t.includes(g.pid_description));n(Fe(F))}else n(Fe([]));setTimeout(()=>{c.current&&(c.current.scrollTop=A.current)},0)};j.useEffect(()=>{c.current&&(c.current.scrollTop=A.current)},[o,k,r]);const C=w=>{console.log("clicked btn region",w),P(w)};return a.jsx(a.Fragment,{children:o?a.jsx("div",{children:a.jsx(S,{sx:{display:"flex",justifyContent:"center",height:"88vh",alignItems:"center"},children:a.jsx(Yt,{})})}):a.jsxs("div",{ref:c,style:{overflowY:"auto",height:"90vh"},children:[a.jsx(Vt,{searchTerm:m,setSearchedTerm:y}),a.jsx(Bt,{region:x,handleRegion:C}),Object.keys(u).length>0&&a.jsx(S,{sx:{align:"center",my:"8px",ml:"20px"},children:a.jsxs(de,{variant:"outlined",sx:{width:"90%",color:b.grey[400],"&:hover":{color:"#DAE0EE"}},children:["VGroup: ",u.group_name]})}),a.jsx(S,{sx:{align:"center",my:"8px",ml:"20px"},children:a.jsxs(de,{variant:"outlined",sx:{width:"90%",color:b.grey[400],"&:hover":{color:"#DAE0EE"}},children:["Total Vehicle: ",k.length]})}),k.length>0?k.map((w,T)=>a.jsx(S,{sx:{align:"center",my:"8px",ml:"20px"},children:a.jsx(de,{variant:"outlined",onClick:()=>_(w),sx:{width:"90%",bgcolor:w.label===r.reg_id?xe.bgColor:"undefined",color:w.label===r.reg_id?"#DAE0EE":b.grey[400]},children:w.label})},T)):a.jsx(S,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:a.jsxs(le,{style:{textAlign:"center",color:b.grey[400]},children:["Sorry! No vehicles in"," ",a.jsx("span",{style:{fontWeight:"bold"},children:x})," region"]})})]})})},En=({data:e})=>a.jsx(dt,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:a.jsxs(cr,{data:e,children:[a.jsx(ur,{strokeDasharray:"3 3"}),a.jsx(fr,{dataKey:"name"}),a.jsx(pr,{}),a.jsx(ht,{}),a.jsx(dr,{dataKey:"value",fill:"#82ca9d"})]})});function Dn({searchQuery:e,setSearchQuery:t,map:n}){const r=async o=>{if(o.preventDefault(),e.trim()==="")return;const i={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(n).findPlaceFromQuery(i,(l,u)=>{if(u===window.google.maps.places.PlacesServiceStatus.OK&&l){const f=l[0];n.setCenter(f.geometry.location),n.setZoom(14)}})};return a.jsxs(S,{component:"form",onSubmit:r,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[a.jsx(Ut,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),a.jsx(kt,{type:"submit",sx:{p:1},children:a.jsx(zt,{})})]})}const In=()=>{const e=Se(),{center:t,selectedParameterList:n,selectedVehicle:r,vehicleList:o,tractorIcon:i,icons:s,locationData:l,ivnPid:u,placesData:f}=V(p=>p.liveMap),{mode:m}=V(p=>p.dashboard),{isLoaded:y,loadError:x}=mr({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["places"]}),[P,b]=j.useState(null),[c,A]=j.useState(!0),[k,_]=j.useState(5),[C,w]=j.useState(),[T,$]=j.useState(""),N=j.useRef(null),E=Ie(m),F=j.useCallback(p=>{N.current=p},[]);j.useEffect(()=>{console.log("searchQuery",T)},[T]),j.useEffect(()=>{if(c)w(l);else{let p=l==null?void 0:l.filter(d=>(d==null?void 0:d._id)===(r==null?void 0:r.imei));w(p)}},[l,r,c]);const g=()=>{if(!c)e(Me({lat:21,lng:78})),_(4),A(d=>!d);else{const p=l.find(d=>d.latestDocument.imei===r.imei);if(p){console.log(p.latestDocument,"getCenter");const{lat:d,lng:L}=p.latestDocument;e(Me({lat:d,lng:L})),_(12),A(v=>!v)}else q.error("Data is not available for selected vehicle")}};if(j.useEffect(()=>{y&&b(window.google.maps)},[y,l]),x)return"Error loading maps";if(!y)return"Loading maps";const R={height:"100vh",borderRadius:"8px"},h=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return P?a.jsxs("div",{children:[a.jsxs(S,{style:{fontSize:"20px",color:E.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[a.jsx(K,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),a.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx(Dn,{searchQuery:T,setSearchQuery:$,map:N.current}),a.jsx($r,{sx:{marginLeft:0,paddingTop:0,color:E.grey[400]},children:a.jsx(vr,{control:a.jsx(br,{checked:c,onChange:g}),label:c?"Group":"Individual"})})]})]}),a.jsx(xr,{mapContainerStyle:R,zoom:k,center:t,onLoad:F,options:{mapTypeControl:!1,styles:m?h:""},children:C&&C.length>0&&C.map((p,d)=>a.jsx(yr,{position:{lat:p.latestDocument.lat,lng:p.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},d))})]}):null};function Ln(){const{vehicles_details:e}=V(r=>r.dashboard),[t,n]=j.useState([]);return j.useEffect(()=>{const r=e.reduce((i,s)=>{const l=s.sell_date?ye(s.sell_date):null,u=l&&l.isValid()?l.format("MMM YYYY"):"N/A";return i[u]=(i[u]||0)+1,i},{}),o=Object.keys(r).map(i=>({name:i,value:r[i]}));n(o)},[e]),a.jsxs(S,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[a.jsx(le,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),a.jsxs(S,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[a.jsx(S,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:a.jsx(le,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),a.jsx(En,{data:t})]}),a.jsx(le,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const Je=Math.PI/180,$n=({cx:e,cy:t,midAngle:n,innerRadius:r,outerRadius:o,percent:i,index:s})=>{const l=r+(o-r)*.5,u=e+l*Math.cos(-n*Je),f=t+l*Math.sin(-n*Je);return a.jsx("text",{x:u,y:f,fill:"white",textAnchor:u>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(i*100).toFixed(0)}%`})},Nn=({data:e,COLORS:t})=>{j.useEffect(()=>{console.log("received data to plot in graph",e)},[e]);const n=e.every(r=>r.value===0);return a.jsx(S,{sx:{width:"100%",height:"100%"},children:n?a.jsx(S,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:a.jsx(K,{sx:{textAlign:"center"},children:"No data available to display."})}):a.jsx(dt,{width:"100%",height:"100%",children:a.jsxs(Cn,{children:[a.jsx(Y,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:$n,fill:"#8884d8",dataKey:"value",children:e.map((r,o)=>a.jsx(pt,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),a.jsx(ht,{})]})})})},me=({title:e})=>a.jsx(K,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),Te=({label:e,count:t,color:n,type:r,title:o})=>{let i=Se(),{vehicleZone:s}=V(u=>u.dashboard);const l=(u,f)=>{u?(i(Ot(f)),i(st(!0))):console.log("not a vehicle status",u)};return a.jsxs(S,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[a.jsxs(S,{sx:{display:"flex",alignItems:"center"},children:[a.jsx(S,{sx:{width:"12px",height:"12px",bgcolor:n,borderRadius:"50%",marginRight:"8px"}}),a.jsx(de,{sx:{color:"black",bgcolor:o==="Vehicle Status"?s===e?"green":"white":"transparent"},onClick:()=>{l(o,e)},children:e})]}),a.jsx(S,{sx:{display:"flex",gap:"25px"},children:r==="assignVehicle"?a.jsx(K,{color:n,children:t}):a.jsx(gt,{sx:{bgcolor:n,width:"24px",height:"24px",fontSize:"0.75rem"},"aria-label":"color",children:t})})]})},Fn=({data:e,colors:t})=>{const{loading:n}=V(r=>r.dashboard);return a.jsxs(S,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[a.jsxs(S,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[a.jsx(K,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),a.jsx(S,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((r,o)=>a.jsxs(S,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[a.jsx(K,{fontSize:{xs:"12px",md:"15px"},children:r.name.split(" ")[0]}),a.jsx(gt,{sx:{bgcolor:t[o],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:r.name.split(" ").slice(1).join(" ")})]},o))})]}),a.jsx(S,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?a.jsx(K,{sx:{fontSize:"14px"},children:"Loading..."}):a.jsx(Nn,{data:e,COLORS:t})})]})},Qe=({statuses:e,title:t})=>a.jsxs(S,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[a.jsx(me,{title:t}),a.jsx(S,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((n,r)=>a.jsxs(S,{children:[a.jsx(K,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:n.color,margin:"30px 0"},"aria-label":"color",children:n.count}),a.jsx(K,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:n.label})]},r))})]}),et={total:0,online:0,offline:0,running:0};function Mn({vehicleReport:e,imeiNo:t}){const{vehicleList:n,onlineVehicle:r,locationData:o}=V(g=>g.liveMap),{breakdownStatusCount:i}=V(g=>g.breakdown),{inspectionStatusCount:s}=V(g=>g.inspection),{report:l,driver_behavior:u,overdueCount:f,completedCount:m,serviceSoonCount:y,selectedVehicleGroup:x}=V(g=>g.dashboard),[P,b]=j.useState(0),[c,A]=j.useState(et);j.useEffect(()=>{if((n==null?void 0:n.length)>0){let g={...et};if(x){const R=_(x==null?void 0:x.id);console.log("result",R);const h=n.filter(p=>p.vehicle_group===x.id);g.total=h.length,g.online=R.onlineCount,g.running=R.runningCount,g.offline=g.total-g.online}console.log("Updated Vehicle Count:",g),A(g)}console.log("vehicleList",n)},[x]),j.useEffect(()=>{if((n==null?void 0:n.length)>0){let g=0;n==null||n.map(R=>{var h;((h=R==null?void 0:R.imei)==null?void 0:h.length)>0&&g++}),b(g)}},[n]),j.useEffect(()=>{},[f,m,y]);const k=()=>{let g=0,R=0;return r.length>0&&r.forEach(h=>{t.includes(String(h))&&(g++,o==null||o.forEach(p=>{var d;String((d=p==null?void 0:p.latestDocument)==null?void 0:d.imei)===String(h)&&p.latestDocument.speed>0&&(p.latestDocument.ignition===!0||p.latestDocument.ignition===1)&&R++}))}),{onlineCount:g,runningCount:R}},_=g=>{let R=0,h=0;return r.forEach(p=>{if(t.includes(String(p))){const d=o==null?void 0:o.find(L=>{var I;return String((I=L==null?void 0:L.latestDocument)==null?void 0:I.imei)===String(p)});if(d&&n.some(I=>{var v;return I.vehicle_group===g&&((v=I==null?void 0:I.imei[0])==null?void 0:v.mac_id)===String(p)})){R++;const{speed:I,ignition:v}=d.latestDocument;I>0&&(v===!0||v===1)&&h++}}}),{onlineCount:R,runningCount:h}},C=[{name:"Overspeed O",value:Object.keys(u).length>0?u.overSpeedTime:0},{name:"Economy E",value:Object.keys(u).length>0?u.economyTime:0},{name:"Steady S",value:Object.keys(u).length>0?u.steadyTime:0}],w=["#0088FE","#00C49F","#FFBB28","#FF8042"],T=[{label:"Rejected",count:s.rejected,color:"#FF0202"},{label:"Pending",count:s.open,color:"black"},{label:"Approved",count:s.close,color:"green"}],$=[{label:"Overdue",count:f,color:"#FF0202"},{label:"Due soon",count:y,color:"black"},{label:"Serviced",count:m,color:"green"}],N=[{name:"Total Vehicles",count:Object.keys(x).length>0?c.total:P,color:"grey"},{name:"Online",count:Object.keys(x).length>0?c.online:k().onlineCount,color:"green"},{name:"Offline",count:Object.keys(x).length>0?c.offline:P-k().onlineCount,color:"grey"},{name:"Running",count:Object.keys(x).length>0?c.running:k().runningCount,color:"red"}],E=[{name:"Area Covered",count:"N/A",color:xe.bgColor},{name:"Distance Covered",count:e==null?void 0:e.totalDistance,color:"grey"},{name:"Running time",count:e.totalTime,color:"red"},{name:"Idling Time",count:Object.keys(u).length>0?`${(u.steadyTime/60).toFixed(0)} min`:0,color:xe.bgColor}],F=[{name:"Open",count:i.open,color:"grey"},{name:"Overdue",count:i.overDue,color:"red"},{name:"Closed",count:i.close,color:"green"}];return a.jsxs(a.Fragment,{children:[a.jsx(Fn,{data:C,colors:w}),a.jsxs(S,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[a.jsx(me,{title:"Vehicles Status"}),a.jsx(S,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:N.map((g,R)=>a.jsx(Te,{label:g.name,count:g.count,color:g.color,title:"Vehicle Status"}))})]}),a.jsx(Qe,{statuses:$,title:"Service Remainder"}),a.jsxs(S,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[a.jsx(me,{title:"Assigned Vehicles"}),a.jsx(S,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:E.map((g,R)=>a.jsx(Te,{type:"assignVehicle",label:g.name,count:g.count,color:g.color}))})]}),a.jsxs(S,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[a.jsx(me,{title:"Breakdown Resolved"}),a.jsx(S,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:F.map((g,R)=>a.jsx(Te,{label:g.name,count:g.count,color:g.color}))})]}),a.jsx(Qe,{statuses:T,title:"Inspection Approvals"})]})}const io=()=>{const{w_customer_id:e,collapsed:t}=V(h=>h.auth),{mode:n,selectedTripData:r,selectedVehicleGroup:o,showVehicles:i,vehicleZone:s}=V(h=>h.dashboard),{breakdowns:l}=V(h=>h.breakdown),{inspectionHistory:u}=V(h=>h.inspection),[f,m]=j.useState(()=>{const h=sessionStorage.getItem("imeiNo");return h?JSON.parse(h):[]}),{selectedVehicle:y,vehicleList:x,onlineVehicle:P,locationData:b}=V(h=>h.liveMap),c=Se(),A=Ie(n),[k,_]=j.useState([]),[C,w]=j.useState(!1),[T,$]=j.useState({}),[N,E]=j.useState(!1);j.useEffect(()=>{(async()=>{await F()})(),c(Pt())},[]),j.useEffect(()=>{console.log("locationData",b)},[b]),j.useEffect(()=>{if(u.length>0){let h={open:0,rejected:0,close:0};u.map(p=>{p.status==="Open"&&h.open++,p.status==="Close"&&h.close++,p.status==="Rejected"&&h.rejected++}),c(_t(h))}},[u]),j.useEffect(()=>{if(l.length>0){let h={open:0,overDue:0,close:0};l.map(p=>{if(p.status==="Open"&&h.open++,p.status==="Close"&&h.close++,p.submission_date){const d=new Date(p.submission_date),L=new Date;L.setHours(0,0,0,0),d.setHours(0,0,0,0),d<L&&h.overDue++}}),c(Tt(h))}},[l]),j.useEffect(()=>{c(Ct())},[]),j.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(f))},[f]),j.useEffect(()=>{var h,p,d;Object.keys(y).length===0&&x.length>0&&c(lt({imei:(p=(h=x[0])==null?void 0:h.imei[0])==null?void 0:p.mac_id,reg_id:(d=x[0])==null?void 0:d.registration_id}))},[y,x]),j.useEffect(()=>{if((async()=>{if(y!=null&&y.imei){const p=ye(),d=p.startOf("day").format("MM/DD/YYYY HH:mm:ss"),L=p.endOf("day").format("MM/DD/YYYY HH:mm:ss"),I={imei:[y.imei],startDate:d,endDate:L};try{const v=await Et(I);$(v.data[0].data)}catch(v){console.error("Error fetching report:",v)}}})(),Object.keys(y).length>0){let p={imei:y.imei};c(Rt(p))}},[y,c]),j.useEffect(()=>{const h=d=>{(d==null?void 0:d.imei)!==null&&f.find(v=>parseInt(v)===(d==null?void 0:d.imei))&&q.error(`Type: ${d==null?void 0:d.type} ${d==null?void 0:d.msg} ${d==null?void 0:d.imei}`,{id:"geofence",autoClose:5e3})},p=d=>{(d==null?void 0:d.imei)!==null&&f.find(v=>parseInt(v)===(d==null?void 0:d.imei))&&q.error(`${d==null?void 0:d.msg} ${d==null?void 0:d.imei}`,{id:"speed",autoClose:5e3})};return se.on("geofenceAlert",h),se.on("speedAlert",p),()=>{se.off("geofenceAlert",h),se.off("speedAlert",p)}},[f,se]);const F=async()=>{try{let h=[],p=[];const d=await c(Dt({w_customer_id:e}));if(Array.isArray(d.payload)){d.payload.forEach(v=>{var fe,Ne;Array.isArray(v.imei)&&v.imei.length>0?(h.push({id:v.id,label:v.registration_id,value:(fe=v==null?void 0:v.imei[0])==null?void 0:fe.mac_id,vehilce_type:v==null?void 0:v.segment,sell_date:v==null?void 0:v.sell_date,workShop:v==null?void 0:v.workshop,vehicle_group:v==null?void 0:v.vehicle_group}),p.push((Ne=v.imei[0])==null?void 0:Ne.mac_id),v.registration_id):(console.error("IMEI data not found for item:",v),q.error(`IMEI Number not found for the vehicle: ${v==null?void 0:v.registration_id}`))}),m(p);const L="one",I=p;p.length>0&&(c(It({type:L,imei:I})),c(Lt(I))),_(h),c($t(h)),c(Nt({w_customer_id:e})),c(Ft(e)),c(Mt({}))}else console.error("Unexpected data format:",d),q.error("Unexpected data format:")}catch(h){console.error("Error fetching vehicle data:",h),q.error(`Error fetching vehicle data: ${h}`)}},g=h=>b==null?void 0:b.some(p=>Number(p.latestDocument.imei)===Number(h)&&p.latestDocument.speed>0&&(p.latestDocument.ignition===!0||p.latestDocument.ignition===1)),R=k.filter(h=>{if(!(Object.keys(o).length===0||h.vehicle_group===o.id))return!1;const d=Number(h.value),L=P.includes(d),I=!P.includes(d),v=P.includes(d)&&g(d);switch(s){case"Total Vehicles":return!0;case"Online":return L;case"Running":return v;case"Offline":return I;default:return!0}});return a.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[a.jsx(Gt,{}),a.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[a.jsx(hr,{title:"Dashboard",setShowNotification:w,showNotification:C,setShowVehiclesGroup:E,showVehiclesGroup:N}),a.jsx(jr,{setShowVehiclesGroup:E,showVehiclesGroup:N}),a.jsxs(S,{sx:{height:"92vh",backgroundColor:A.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[i&&a.jsx(S,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:A.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:a.jsx(Rn,{vehicleData:R,showVehicles:i})}),C&&a.jsx(S,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:A.grey[100],overflowX:"hidden",maxWidth:"100vw"},children:a.jsx(gr,{})}),a.jsx(le,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),a.jsxs(S,{sx:{display:"flex",gap:"30px",background:xe.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[a.jsxs(S,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[a.jsx(Ln,{}),a.jsx(S,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:a.jsx(In,{})})]}),a.jsx(S,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:a.jsx(Mn,{vehicleReport:T,imeiNo:f})})]})]})]})]})};export{io as default};
