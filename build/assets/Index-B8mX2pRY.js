import{j as e,t as S,T as b,a as u,r as a,u as E,l as I,m as V,n as A,o as C,v as _}from"./index-BqNi_OjF.js";import{L as D}from"./LightModeOutlined-BwCQRwsf.js";import{t as B}from"./Search-CqfflqOy.js";import{T as L}from"./TopBar-DyatB1eG.js";import{V as N}from"./VehicleMenu-BRbN6-sm.js";import{B as s}from"./CircularProgress-BZodcYKn.js";import"./createSvgIcon-BjUJoQfT.js";import"./IconButton-BxZzzknn.js";import"./NotificationsNone-CLnEvK8j.js";import"./OutlinedInput-7lk16080.js";function T({showCard:i}){return e.jsx(e.Fragment,{children:i&&e.jsx(s,{sx:{bgcolor:S.bgColor,position:"relative",color:"white",display:"flex",alignItems:"center",justifyContent:"left",overflowX:"hidden",flexWrap:"wrap",border:"1px solid white",height:"60px",gap:"15px"},children:e.jsx(b,{variant:"h6",children:"Select Date"})})})}function q(){const{mode:i}=u(r=>r.dashboard),{w_customer_id:h}=u(r=>r.auth),[l,g]=a.useState(!1),[m,y]=a.useState([]),[j,k]=a.useState(!0),d=B(i);let o=E();a.useEffect(()=>{v()},[]);const v=async()=>{try{let r=[],c=[];const n=await o(I({w_customer_id:h}));if(Array.isArray(n.payload)){n.payload.forEach(t=>{var x,f;Array.isArray(t.imei)&&t.imei.length>0?(r.push({id:t.id,label:t.registration_id,value:(x=t==null?void 0:t.imei[0])==null?void 0:x.mac_id}),c.push((f=t.imei[0])==null?void 0:f.mac_id)):(console.error("IMEI data not found for item:",t),toast.error(`IMEI Number not found for the vehicle: ${t==null?void 0:t.registration_id}`))});const w="one",p=c;c.length>0&&(o(V({type:w,imei:p})),o(A(p))),y(r),o(C({w_customer_id:h})),o(_({}))}else console.error("Unexpected data format:",n),toast.error("Unexpected data format:")}catch(r){console.error("Error fetching vehicle data:",r),toast.error(`Error fetching vehicle data: ${r}`)}};return e.jsxs("div",{className:"app",children:[e.jsx(D,{}),e.jsxs("main",{className:"content",style:{width:"100%",background:d.grey[100]},children:[e.jsx(L,{title:"Report",showVehicles:l,setShowVehicles:g}),e.jsxs(s,{style:{display:"flex",width:"100%",height:"95vh"},children:[e.jsx(s,{style:{display:"flex",width:"100%",height:"95vh"},children:e.jsx(s,{style:{width:l?"85%":"100%"},children:e.jsx(T,{showCard:j})})}),l&&e.jsx(s,{sx:{position:"fixed",width:"250px",right:"0px",height:"90vh",zIndex:9999,backgroundColor:d.grey[100]},children:e.jsx(N,{vehicleData:m})})]})]})]})}export{q as default};
