import{r as a,q as oa,i as sa,j as t,a as R,u as ge,t as Y,O as U,T as D,ao as de,$ as Ea,h as Da,ap as ka,_ as Q,aq as H,ar as Ia,k as Ra,l as La}from"./index-BuN35QWy.js";import{A as ia,C as pe,ap as Fa,e as fe,a5 as ea,o as Pa,h as ra,a2 as _a,N as Na,f as ta,d as za,a as Ga,ac as Ta,b as Ba,c as Ma,L as Va}from"./LightModeOutlined-DiTcRjsP.js";import{r as la}from"./createSvgIcon-H5FfPu02.js";import{d as Wa,G as Xa}from"./GeofencAlert-CgybDRfx.js";import{j as Ua,V as Ja}from"./VehicleMenu-DpxbnZZY.js";import{B as l}from"./CircularProgress-DLOpGOVd.js";import{I as Ka}from"./IconButton-Cin2vqCK.js";import{C as Qa}from"./Form-BtOFVk0B.js";import{t as he}from"./theme-D2Jrx85N.js";import{u as qa,G as Ya,C as Ha,R as $a,b as aa,M as Za}from"./esm-CbmxqkRx.js";import{S as ie}from"./Switch-BX3FiowQ.js";import{I as en}from"./TextField-BeJLL-aH.js";import{u as tn,I as xe,T as an}from"./TextArea-vzLOyX4O.js";import{B as nn,S as on}from"./button-Cxi5B_7o.js";import"./Search-DrAcX6ST.js";import"./mergeSlotProps-xrZYZUrO.js";import"./Paper-Dx5ZSxpT.js";var sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const rn=sn;var ln=function(g,i){return a.createElement(ia,oa({},g,{ref:i,icon:rn}))},cn=a.forwardRef(ln);const dn=cn;var gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const pn=gn;var fn=function(g,i){return a.createElement(ia,oa({},g,{ref:i,icon:pn}))},hn=a.forwardRef(fn);const xn=hn,un=n=>{const{getPrefixCls:g,direction:i}=a.useContext(pe),{prefixCls:r,className:s}=n,h=g("input-group",r),u=g("input"),[m,T]=Fa(u),L=fe(h,{[`${h}-lg`]:n.size==="large",[`${h}-sm`]:n.size==="small",[`${h}-compact`]:n.compact,[`${h}-rtl`]:i==="rtl"},T,s),j=a.useContext(ea),O=a.useMemo(()=>Object.assign(Object.assign({},j),{isFormItemInput:!1}),[j]);return m(a.createElement("span",{className:L,style:n.style,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onFocus:n.onFocus,onBlur:n.onBlur},a.createElement(ea.Provider,{value:O},n.children)))},mn=un;var yn=function(n,g){var i={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&g.indexOf(r)<0&&(i[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)g.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(i[r[s]]=n[r[s]]);return i};const vn=n=>n?a.createElement(xn,null):a.createElement(dn,null),bn={click:"onClick",hover:"onMouseOver"},jn=a.forwardRef((n,g)=>{const{visibilityToggle:i=!0}=n,r=typeof i=="object"&&i.visible!==void 0,[s,h]=a.useState(()=>r?i.visible:!1),u=a.useRef(null);a.useEffect(()=>{r&&h(i.visible)},[r,i]);const m=tn(u),T=()=>{const{disabled:z}=n;z||(s&&m(),h(c=>{var w;const v=!c;return typeof i=="object"&&((w=i.onVisibleChange)===null||w===void 0||w.call(i,v)),v}))},L=z=>{const{action:c="click",iconRender:w=vn}=n,v=bn[c]||"",I=w(s),p={[v]:T,className:`${z}-icon`,key:"passwordIcon",onMouseDown:B=>{B.preventDefault()},onMouseUp:B=>{B.preventDefault()}};return a.cloneElement(a.isValidElement(I)?I:a.createElement("span",null,I),p)},{className:j,prefixCls:O,inputPrefixCls:_,size:y}=n,F=yn(n,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:M}=a.useContext(pe),S=M("input",_),x=M("input-password",O),N=i&&L(x),k=fe(x,j,{[`${x}-${y}`]:!!y}),P=Object.assign(Object.assign({},Pa(F,["suffix","iconRender","visibilityToggle"])),{type:s?"text":"password",className:k,prefixCls:S,suffix:N});return y&&(P.size=y),a.createElement(xe,Object.assign({ref:ra(g,u)},P))}),Cn=jn;var Sn=function(n,g){var i={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&g.indexOf(r)<0&&(i[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)g.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(i[r[s]]=n[r[s]]);return i};const wn=a.forwardRef((n,g)=>{const{prefixCls:i,inputPrefixCls:r,className:s,size:h,suffix:u,enterButton:m=!1,addonAfter:T,loading:L,disabled:j,onSearch:O,onChange:_,onCompositionStart:y,onCompositionEnd:F}=n,M=Sn(n,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:S,direction:x}=a.useContext(pe),N=a.useRef(!1),k=S("input-search",i),P=S("input",r),{compactSize:z}=_a(k,x),c=Na(d=>{var C;return(C=h??z)!==null&&C!==void 0?C:d}),w=a.useRef(null),v=d=>{d&&d.target&&d.type==="click"&&O&&O(d.target.value,d,{source:"clear"}),_&&_(d)},I=d=>{var C;document.activeElement===((C=w.current)===null||C===void 0?void 0:C.input)&&d.preventDefault()},p=d=>{var C,V;O&&O((V=(C=w.current)===null||C===void 0?void 0:C.input)===null||V===void 0?void 0:V.value,d,{source:"input"})},B=d=>{N.current||L||p(d)},q=typeof m=="boolean"?a.createElement(on,null):null,J=`${k}-button`;let f;const G=m||{},E=G.type&&G.type.__ANT_BUTTON===!0;E||G.type==="button"?f=ta(G,Object.assign({onMouseDown:I,onClick:d=>{var C,V;(V=(C=G==null?void 0:G.props)===null||C===void 0?void 0:C.onClick)===null||V===void 0||V.call(C,d),p(d)},key:"enterButton"},E?{className:J,size:c}:{})):f=a.createElement(nn,{className:J,type:m?"primary":void 0,size:c,disabled:j,key:"enterButton",onMouseDown:I,onClick:p,loading:L,icon:q},m),T&&(f=[f,ta(T,{key:"addonAfter"})]);const re=fe(k,{[`${k}-rtl`]:x==="rtl",[`${k}-${c}`]:!!c,[`${k}-with-button`]:!!m},s),ee=d=>{N.current=!0,y==null||y(d)},te=d=>{N.current=!1,F==null||F(d)};return a.createElement(xe,Object.assign({ref:ra(w,g),onPressEnter:B},M,{size:c,onCompositionStart:ee,onCompositionEnd:te,prefixCls:P,addonAfter:f,suffix:u,onChange:v,className:re,disabled:j}))}),An=wn,Z=xe;Z.Group=mn;Z.Search=An;Z.TextArea=an;Z.Password=Cn;const na=Z;var ue={},On=sa;Object.defineProperty(ue,"__esModule",{value:!0});var ca=ue.default=void 0,En=On(la()),Dn=t;ca=ue.default=(0,En.default)((0,Dn.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var me={},kn=sa;Object.defineProperty(me,"__esModule",{value:!0});var da=me.default=void 0,In=kn(la()),Rn=t;da=me.default=(0,In.default)((0,Rn.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Place");const Ln=({title:n,setShowContent:g,showContent:i,showMap:r,setShowMap:s,setShowGfBar:h,showGfBar:u,setShowGfAlert:m,showGfAlert:T})=>{const{collapsed:L}=R(S=>S.auth),{selectedVehicle:j}=R(S=>S.liveMap),{vehicleSideBar:O}=R(S=>S.geofence);a.useState(!1);const{mode:_}=R(S=>S.dashboard);JSON.parse(localStorage.getItem("w_userDetails"));const y=ge(),F=()=>{y(Da(!L))},M=()=>{g({...i,vehicle:!i.vehicle}),h(!1),m(!1),y(de({data:!O}))};return t.jsxs(l,{display:"flex",justifyContent:"space-between",p:1,sx:{bgcolor:Y.bgColor,border:"1px solid white",borderRadius:"4px",height:"55px"},children:[t.jsxs(l,{style:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"center"},children:[L?t.jsx(U,{onClick:F,sx:{color:"white"},children:t.jsx(za,{style:{width:"30px",height:"30px"}})}):t.jsx(U,{onClick:F,sx:{color:"white"},children:t.jsx(Ga,{style:{width:"30px",height:"30px"}})}),t.jsx(l,{children:t.jsx("img",{src:`${Ta}`,style:{width:"36px",height:"36px"}})}),t.jsx(D,{style:{fontSize:"20px",fontFamily:"ubuntu",fontWeight:"500",color:"#FFFFFF"},children:"WIKITRACK"})]}),t.jsx(l,{children:t.jsx(D,{variant:"h6",color:"white",fontWeight:"bold",sx:{ml:"15px",mt:"15px"},children:Object.keys(j).length>0&&r?`${n} - Geofence (${j.reg_id})`:t.jsxs(t.Fragment,{children:[n," ",Object.keys(j).length>0&&j.reg_id]})})}),t.jsxs(l,{sx:{display:"flex"},children:[t.jsxs(U,{variant:"outlined",size:"small",sx:{color:i.vehicle?"white":"black",backgroundColor:i.vehicle?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:M,children:[t.jsx("img",{src:Ua,style:{marginRight:"5px"}}),Object.keys(j).length>0?j.reg_id:"Vehicles"]}),r&&t.jsx(l,{children:t.jsx(U,{variant:"outlined",size:"small",sx:{color:u?"white":"black",backgroundColor:u?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:()=>{m(!1),h(!u),y(de({data:!1}))},children:"Geofence"})}),t.jsx(l,{sx:{color:"white",mr:"10px"},children:t.jsxs(l,{sx:{display:"flex",marginTop:"14px",gap:"10px"},children:[t.jsx(l,{onClick:()=>{h(!1),m(!T),y(de({data:!1}))},children:t.jsx(Wa,{sx:{cursor:"pointer",width:"30px",height:"30px"}})}),t.jsx(l,{onClick:()=>{g({...i,user:!i.user}),s(!1)},children:i.user?t.jsx(da,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}}):t.jsx(ca,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}})})]})}),t.jsx(Ka,{onClick:()=>{y(Ea(!_))},sx:{color:"white"},children:_?t.jsx(Ba,{}):t.jsx(Ma,{})})]})]})},Fn=Ln,Pn=()=>{const n=JSON.parse(localStorage.getItem("w_userDetails")),{mode:g}=R(r=>r.dashboard),i=he(g);return t.jsxs(l,{children:[t.jsxs(l,{sx:{backgroundColor:i.grey[200],m:"10px",borderRadius:"5px",height:"150px"},children:[t.jsx(l,{sx:{pl:"20px",pt:"10px",mb:"10px",color:`${i.grey[400]}`},children:t.jsx("b",{children:"User Settings"})}),t.jsxs(l,{sx:{display:"flex"},children:[t.jsx(l,{sx:{ml:"23px",mt:"11px",height:"70px",width:"70px",backgroundColor:"white",borderRadius:"50%"}}),t.jsxs(l,{sx:{height:"80px",width:"200px",display:"flex",justifyContent:"center",flexDirection:"column",mx:"20px",color:i.grey[400]},children:[t.jsx(l,{children:t.jsxs("b",{children:[" ",n&&n.first_name," ",n.last_name]})}),t.jsx(l,{children:n&&n.role})]})]})]}),t.jsx(l,{sx:{marginTop:"9%",alignContent:"center",textAlign:"center"},children:t.jsx(Qa,{})})]})},_n=Pn,Nn="/assets/tractorIcon-zWRQE9nW.jpg",zn="data:image/png;base64,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",Gn="http://139.59.37.47:3031",Tn=({showGfBar:n,showGfAlert:g})=>{const{isLoaded:i,loadError:r}=qa({googleMapsApiKey:"AIzaSyA_S7GfAh6rJYWQ5X4n4X-3poo3vymuspU"}),{selectedVehicle:s,locationData:h,tractorIcon:u}=R(o=>o.liveMap),{geofence:m,vehicleSideBar:T}=R(o=>o.geofence),{mode:L,styles:j}=R(o=>o.dashboard),{collapsed:O}=R(o=>o.auth),[_,y]=a.useState(null),[F,M]=a.useState(null),[S,x]=a.useState(1e3),[N,k]=a.useState([]),[P,z]=a.useState(!0),[c,w]=a.useState(!1),[v,I]=a.useState(!1),[p,B]=a.useState({lat:18.516726,lng:73.856255}),[q,J]=a.useState(50),[f,G]=a.useState("circular"),[E,re]=a.useState([]),[ee,te]=a.useState({north:p.lat+.01,south:p.lat-.01,east:p.lng+.01,west:p.lng-.01}),[d,C]=a.useState([{lat:p.lat+.01,lng:p.lng},{lat:p.lat-.01,lng:p.lng-.01},{lat:p.lat-.01,lng:p.lng+.01}]),[V,ye]=a.useState([{lat:p.lat+.01,lng:p.lng},{lat:p.lat-.01,lng:p.lng-.01},{lat:p.lat-.01,lng:p.lng+.01}]),ga=a.useRef(null),ae=a.useRef(null),le=a.useRef(!1),ne=a.useRef(null),oe=a.useRef(null);let pa=ge();a.useEffect(()=>{console.log(E,"rectangleVertices")},[E]),a.useEffect(()=>{fa()},[s]),a.useEffect(()=>{if(h.length>0&&Object.keys(s).length>0){let o=h.filter(b=>{var A;return((A=b.latestDocument)==null?void 0:A.imei)===s.imei});k(o)}},[s]),a.useEffect(()=>{_&&F&&_.fitBounds(F)},[_,F]);const fa=async()=>{var o,b,A,W,X,$,K,be,je,Ce,Se,we,Ae,Oe,Ee,De,ke,Ie,Re,Le,Fe,Pe,_e,Ne,ze,Ge,Te,Be,Me,Ve,We,Xe,Ue,Je,Ke,Qe,qe,Ye,He,$e,Ze,et,tt,at,nt,ot,st,it,rt,lt,ct,dt,gt,pt,ft,ht,xt,ut,mt,yt,vt,bt,jt,Ct,St,wt,At,Ot,Et,Dt,kt,It,Rt,Lt,Ft,Pt,_t,Nt,zt,Gt,Tt,Bt,Mt,Vt,Wt,Xt,Ut,Jt,Kt,Qt,qt,Yt,Ht,$t,Zt;if(Object.keys(s).length>0)try{const e=await ka.get(`${Gn}/api/get/geofance/${s==null?void 0:s.imei}`);if(console.log(e.data.geofenceData,"result"),((b=(o=e==null?void 0:e.data)==null?void 0:o.geofenceData)==null?void 0:b.area_type)==="circular")if(G("circular"),(W=(A=e==null?void 0:e.data)==null?void 0:A.geofenceData)!=null&&W.lat)B({lat:($=(X=e==null?void 0:e.data)==null?void 0:X.geofenceData)==null?void 0:$.lat,lng:(be=(K=e==null?void 0:e.data)==null?void 0:K.geofenceData)==null?void 0:be.long}),x((Ce=(je=e==null?void 0:e.data)==null?void 0:je.geofenceData)==null?void 0:Ce.radius),z((we=(Se=e==null?void 0:e.data)==null?void 0:Se.geofenceData)==null?void 0:we.isActive_Geofance),w(((Oe=(Ae=e==null?void 0:e.data)==null?void 0:Ae.geofenceData)==null?void 0:Oe.type)==="inward"),I((De=(Ee=e==null?void 0:e.data)==null?void 0:Ee.geofenceData)==null?void 0:De.isActive_Speed),J((Ie=(ke=e==null?void 0:e.data)==null?void 0:ke.geofenceData)==null?void 0:Ie.speed);else return Q.success("No Geofence For Selected Vehicle",{id:"getting geofence"});else((Le=(Re=e==null?void 0:e.data)==null?void 0:Re.geofenceData)==null?void 0:Le.area_type)==="triangle"?(G("triangle"),console.log("get for triangle",(Fe=e==null?void 0:e.data)==null?void 0:Fe.geofenceData),C([{lat:(Ne=(_e=(Pe=e==null?void 0:e.data)==null?void 0:Pe.geofenceData)==null?void 0:_e.triangle_points[0])==null?void 0:Ne.lat,lng:(Te=(Ge=(ze=e==null?void 0:e.data)==null?void 0:ze.geofenceData)==null?void 0:Ge.triangle_points[0])==null?void 0:Te.long},{lat:(Ve=(Me=(Be=e==null?void 0:e.data)==null?void 0:Be.geofenceData)==null?void 0:Me.triangle_points[1])==null?void 0:Ve.lat,lng:(Ue=(Xe=(We=e==null?void 0:e.data)==null?void 0:We.geofenceData)==null?void 0:Xe.triangle_points[1])==null?void 0:Ue.long},{lat:(Qe=(Ke=(Je=e==null?void 0:e.data)==null?void 0:Je.geofenceData)==null?void 0:Ke.triangle_points[2])==null?void 0:Qe.lat,lng:(He=(Ye=(qe=e==null?void 0:e.data)==null?void 0:qe.geofenceData)==null?void 0:Ye.triangle_points[2])==null?void 0:He.long}]),B({lat:(Ze=($e=e==null?void 0:e.data)==null?void 0:$e.geofenceData)==null?void 0:Ze.lat,lng:(tt=(et=e==null?void 0:e.data)==null?void 0:et.geofenceData)==null?void 0:tt.long}),J((nt=(at=e==null?void 0:e.data)==null?void 0:at.geofenceData)==null?void 0:nt.speed),z((st=(ot=e==null?void 0:e.data)==null?void 0:ot.geofenceData)==null?void 0:st.isActive_Geofance),w(((rt=(it=e==null?void 0:e.data)==null?void 0:it.geofenceData)==null?void 0:rt.type)==="inward"),I((ct=(lt=e==null?void 0:e.data)==null?void 0:lt.geofenceData)==null?void 0:ct.isActive_Speed)):((gt=(dt=e==null?void 0:e.data)==null?void 0:dt.geofenceData)==null?void 0:gt.area_type)==="rectangle"?(G("rectangle"),console.log("get for rectangle",(pt=e==null?void 0:e.data)==null?void 0:pt.geofenceData),te({north:(xt=(ht=(ft=e==null?void 0:e.data)==null?void 0:ft.geofenceData)==null?void 0:ht.rectangle_points[0])==null?void 0:xt.lat,south:(yt=(mt=(ut=e==null?void 0:e.data)==null?void 0:ut.geofenceData)==null?void 0:mt.rectangle_points[1])==null?void 0:yt.lat,east:(jt=(bt=(vt=e==null?void 0:e.data)==null?void 0:vt.geofenceData)==null?void 0:bt.rectangle_points[1])==null?void 0:jt.long,west:(wt=(St=(Ct=e==null?void 0:e.data)==null?void 0:Ct.geofenceData)==null?void 0:St.rectangle_points[0])==null?void 0:wt.long}),B({lat:(Ot=(At=e==null?void 0:e.data)==null?void 0:At.geofenceData)==null?void 0:Ot.lat,lng:(Dt=(Et=e==null?void 0:e.data)==null?void 0:Et.geofenceData)==null?void 0:Dt.long}),J((It=(kt=e==null?void 0:e.data)==null?void 0:kt.geofenceData)==null?void 0:It.speed),z((Lt=(Rt=e==null?void 0:e.data)==null?void 0:Rt.geofenceData)==null?void 0:Lt.isActive_Geofance),w(((Pt=(Ft=e==null?void 0:e.data)==null?void 0:Ft.geofenceData)==null?void 0:Pt.type)==="inward"),I((Nt=(_t=e==null?void 0:e.data)==null?void 0:_t.geofenceData)==null?void 0:Nt.isActive_Speed)):((Gt=(zt=e==null?void 0:e.data)==null?void 0:zt.geofenceData)==null?void 0:Gt.area_type)==="polygon"&&(G("polygon"),console.log("get for polygon",(Tt=e==null?void 0:e.data)==null?void 0:Tt.geofenceData),ye((Mt=(Bt=e==null?void 0:e.data)==null?void 0:Bt.geofenceData)==null?void 0:Mt.polygon_points),J((Wt=(Vt=e==null?void 0:e.data)==null?void 0:Vt.geofenceData)==null?void 0:Wt.speed),z((Ut=(Xt=e==null?void 0:e.data)==null?void 0:Xt.geofenceData)==null?void 0:Ut.isActive_Geofance),w(((Kt=(Jt=e==null?void 0:e.data)==null?void 0:Jt.geofenceData)==null?void 0:Kt.type)==="inward"),B({lat:(qt=(Qt=e==null?void 0:e.data)==null?void 0:Qt.geofenceData)==null?void 0:qt.lat,lng:(Ht=(Yt=e==null?void 0:e.data)==null?void 0:Yt.geofenceData)==null?void 0:Ht.long}),I((Zt=($t=e==null?void 0:e.data)==null?void 0:$t.geofenceData)==null?void 0:Zt.isActive_Speed))}catch(e){console.log(e,"error while getting geofence"),Q.error("Error while getting geofence",{id:"getting geofence"})}},ha=o=>{y(o)},xa=()=>{var o,b,A,W,X,$;if(Object.keys(s).length>0){let K;f==="circular"?K={imei:s.imei,area_type:f,type:c?"inward":"outward",lat:p.lat,long:p.lng,radius:S,isActive_Geofance:P,isActive_Speed:!!v,speed:v?q:5}:f==="rectangle"?K={imei:s.imei,area_type:f,type:c?"inward":"outward",rectangle_points:[{lat:E==null?void 0:E.north,long:E==null?void 0:E.west},{lat:E==null?void 0:E.south,long:E==null?void 0:E.east}],isActive_Geofance:P,isActive_Speed:!!v,speed:v?q:50}:f==="triangle"?K={imei:s.imei,area_type:f,type:c?"inward":"outward",triangle_points:[{lat:(o=d[0])==null?void 0:o.lat,long:(b=d[0])==null?void 0:b.lng},{lat:(A=d[1])==null?void 0:A.lat,long:(W=d[1])==null?void 0:W.lng},{lat:(X=d[2])==null?void 0:X.lat,long:($=d[2])==null?void 0:$.lng}],isActive_Geofance:P,isActive_Speed:!!v,speed:v?q:50}:f==="polygon"&&(K={imei:s.imei,area_type:f,type:c?"inward":"outward",polygon_points:V,isActive_Geofance:P,isActive_Speed:!!v,speed:v?q:50}),pa(Ia({data:K})),Q.success("Successful Saved",{id:"geofence"})}else Q.error("Please Select Vehicle",{id:"geofence"})},se=o=>{console.log("selectedType",o),G(o)},ua=()=>{if(!le.current){le.current=!0;const o=ce.getRadius();console.log("newRadius",o),x(o),le.current=!1}},ma=o=>{console.log("New Center:",o.toJSON()),B(o.toJSON())},ya=()=>{if(ne.current&&ne.current.getBounds){const o=ne.current.getBounds(),b=o.getNorthEast().lat(),A=o.getSouthWest().lat(),W=o.getNorthEast().lng(),X=o.getSouthWest().lng();console.log("{ north, south, east, west }",{north:b,south:A,east:W,west:X}),te({north:b,south:A,east:W,west:X}),re({north:b,south:A,east:W,west:X})}},va={bounds:ee,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},ba=o=>{ne.current=o},ja=()=>{if(ae.current&&ae.current.getPath){const b=ae.current.getPath().getArray().map(A=>({lat:A.lat(),lng:A.lng()}));C(b),console.log("newVertices",b)}},Ca={paths:d,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},Sa=o=>{ae.current=o},wa=()=>{if(oe.current&&oe.current.getPath){const b=oe.current.getPath().getArray().map(A=>({lat:A.lat(),lng:A.lng()}));ye(b),console.log("newVertices",b)}},Aa=o=>{oe.current=o},ve={paths:V,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}};if(r)return"Error loading maps";if(!i)return"Loading maps";const Oa={width:"100%",height:"92vh"};let ce;return t.jsxs(t.Fragment,{children:[t.jsxs(l,{children:[t.jsx(U,{onClick:()=>{se("circular")},style:{background:f==="circular"?Y.bgColor:"transparent",color:f==="circular"?"white":H[400]},children:"Circle"}),t.jsx(U,{onClick:()=>{se("triangle")},style:{background:f==="triangle"?Y.bgColor:"transparent",color:f==="triangle"?"white":H[400]},children:"Triangle"}),t.jsx(U,{onClick:()=>{se("rectangle")},style:{background:f==="rectangle"?Y.bgColor:"transparent",color:f==="rectangle"?"white":H[400]},children:"Rectangle"}),t.jsx(U,{onClick:()=>{se("polygon")},style:{background:f==="polygon"?Y.bgColor:"transparent",color:f==="polygon"?"white":H[400]},children:"Polygon"})]}),t.jsxs(l,{sx:{display:"flex",flexDirection:"row"},children:[t.jsxs(Ya,{ref:ga,mapContainerStyle:Oa,zoom:15,center:p,onLoad:ha,options:{mapTypeControl:!1,styles:L?j:""},children:[f==="circular"&&t.jsx(Ha,{center:p,radius:S,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0},onLoad:o=>{ce=o,ce.addListener("radius_changed",ua)},onDragEnd:o=>ma(o.latLng)}),f==="rectangle"&&t.jsx($a,{bounds:ee,options:va.options,onDragEnd:ya,onLoad:ba}),f==="triangle"&&t.jsx(aa,{paths:d,options:Ca.options,onDragEnd:ja,onLoad:Sa}),f==="polygon"&&t.jsx(aa,{paths:ve.paths,options:ve.options,draggable:!0,editable:!0,onDragEnd:wa,onLoad:Aa}),N&&N.length>0&&N.map((o,b)=>t.jsx(Za,{position:{lat:o.latestDocument.lat,lng:o.latestDocument.lng},icon:{path:u.path1,fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},b))]}),n&&!g&&!T&&p&&t.jsx(l,{sx:{width:O?"25%":"20%"},children:t.jsxs(l,{sx:{display:"flex",padding:"15px",flexDirection:"column",gap:"10px",color:H[600]},children:[t.jsx(D,{sx:{fontWeight:"bold",fontSize:"16px"},children:"Geofence Setting"}),t.jsxs(D,{sx:{fontWeight:"400",fontSize:"14px",textTransform:"capitalize"},children:["Type: ",f]}),f==="circular"&&t.jsxs(t.Fragment,{children:[t.jsxs(D,{sx:{color:"#686868"},children:["Centered At"," "]}),t.jsxs(D,{sx:{color:"#686868"},children:["Lat: ",p.lat.toFixed(2)]}),t.jsxs(D,{sx:{color:"#686868"},children:["Lng: ",p.lng.toFixed(2)]}),t.jsxs(D,{sx:{color:"#686868",border:"1px solid #686868",borderRadius:"4px",padding:"8px"},children:["Radius ( ",(S/1e3).toFixed(2)," in km)"]})]}),t.jsxs(l,{display:"flex",alignItems:"center",children:[t.jsx(D,{variant:"body1",component:"b",children:P?"Active":"Inactive"}),t.jsx(ie,{defaultChecked:P,onChange:()=>{z(!P)},color:"primary",inputProps:{"aria-label":"toggle active state"}})]}),t.jsxs(l,{display:"flex",alignItems:"center",children:[t.jsx(D,{variant:"body1",component:"b",children:c?"Inward":"Outward"}),t.jsx(ie,{checked:c,onChange:()=>{w(!c)},color:"primary",inputProps:{"aria-label":"toggle direction"}})]}),t.jsxs(l,{display:"flex",alignItems:"center",children:[t.jsx(ie,{checked:v,onChange:()=>{I(!v)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),t.jsx(D,{variant:"body1",component:"b",children:"Speed Limit"})]}),v&&t.jsx(l,{sx:{},children:t.jsx(en,{sx:{width:"100%",color:H[600],border:"none","&:focus":{outline:"none"}},value:q,placeholder:"Enter Speed Limit",type:"number",onChange:o=>{const b=Math.max(0,parseInt(o.target.value));J(b)}})}),t.jsx(U,{disabled:Object.keys(s).length===0&&!1,variant:"outlined",size:"small",sx:{color:"white",backgroundColor:Y.bgColor,mt:"6px",mx:"5px",border:"1px solid white",height:"40px",width:"100%","&:hover":{color:"black",background:Y.bgShadow,border:"1px solid black"},letterSpacing:"1.5px",fontSize:"16px"},onClick:()=>{if(Object.keys(s).length===0)return Q.error("please select a vehicle.");xa()},children:"SUBMIT"})]})})]})]})},Bn=({showMap:n,setShowMap:g,showGfBar:i,showGfAlert:r})=>{const{selectedVehicle:s}=R(m=>m.liveMap),{mode:h}=R(m=>m.dashboard),u=he(h);return t.jsx(t.Fragment,{children:n?t.jsx(Tn,{showGfBar:i,showGfAlert:r}):t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",background:u.grey[200],margin:"10px",padding:"10px",borderRadius:"8px"},children:[t.jsxs(l,{sx:{},children:[t.jsx(D,{sx:{fontWeight:"bold",fontSize:"16px",margin:"4px",color:u.grey[400]},children:"Vehicle Settings"}),t.jsxs(l,{sx:{display:"flex"},children:[t.jsx(l,{children:t.jsx("img",{src:Nn,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}})}),t.jsxs(l,{children:[t.jsx(D,{sx:{fontWeight:"bold",color:u.grey[400]},children:Object.keys(s).length>0?s==null?void 0:s.reg_id:"Reg No"}),t.jsx(D,{sx:{marginBottom:"5px",color:u.grey[400]},children:"Chassis No"}),t.jsxs(l,{sx:{width:"200px",display:"flex",gap:"8px"},children:[t.jsx(na,{placeholder:"ONLINE"}),t.jsx(na,{placeholder:"RUNNING"})]}),t.jsx(l,{sx:{marginLeft:"-8px",color:u.grey[400]},children:t.jsxs(D,{children:[t.jsx(ie,{})," ",t.jsx("b",{children:"Switched ON / OFF"})]})})]})]})]}),t.jsxs(l,{onClick:()=>{g(!n)},sx:{cursor:"pointer",marginTop:"50px"},children:[t.jsx("img",{src:zn,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}}),t.jsx(D,{sx:{fontSize:"12px",color:u.grey[400]},children:"Set Geofence"})]})]})})};function oo(){const{w_customer_id:n}=R(x=>x.auth),{vehicleSideBar:g}=R(x=>x.geofence),{collapsed:i}=R(x=>x.auth),{mode:r}=R(x=>x.dashboard),s=he(r),[h,u]=a.useState([]);a.useState([]);const[m,T]=a.useState({user:!0,vehicle:!1}),[L,j]=a.useState(!1),[O,_]=a.useState(!1),[y,F]=a.useState(!1);let M=ge();a.useEffect(()=>{S()},[]);const S=async()=>{try{let x=[],N=[];const k=await M(Ra({w_customer_id:n}));if(k.payload&&Array.isArray(k.payload)){k.payload.forEach(c=>{var w,v,I;c.imei&&Array.isArray(c.imei)&&c.imei.length>0&&((w=c.imei[0])!=null&&w.mac_id)?(x.push({id:c.id,label:c.registration_id,value:(v=c.imei[0])==null?void 0:v.mac_id}),N.push((I=c.imei[0])==null?void 0:I.mac_id)):(console.error("IMEI data not found for item:",c),Q.error(`IMEI Number not found for the vehicle: ${c==null?void 0:c.registration_id}`))});const P="one",z=N;N.length>0&&M(La({type:P,imei:z})),u(x)}else console.error("Unexpected data format or empty payload:",k),Q.error("Unexpected data format:")}catch(x){console.error("Error fetching vehicle data:",x),Q.error(`Error fetching vehicle data: ${x}`)}};return t.jsxs("div",{className:"app",children:[t.jsx(Va,{}),t.jsxs("main",{className:"content",style:{width:"100%",background:s.grey[100]},children:[t.jsx(Fn,{title:"Settings",setShowContent:T,showContent:m,showMap:L,setShowMap:j,showGfBar:O,setShowGfBar:_,showGfAlert:y,setShowGfAlert:F}),t.jsxs(l,{style:{display:"flex",width:"100%",height:"95vh"},children:[t.jsx(l,{style:{width:g?"80%":"100%"},children:m.user?t.jsx(_n,{}):t.jsx(Bn,{showMap:L,setShowMap:j,showGfBar:O,showGfAlert:y})}),!y&&!O&&g&&t.jsx(l,{style:{width:"20%"},children:t.jsx(Ja,{vehicleData:h,title:"Setting"})}),y&&!O&&!g&&t.jsx(l,{sx:{width:i?"25%":"20%"},children:t.jsx(Xa,{})})]})]})]})}export{oo as default};
