import{r as a,q as da,i as ga,j as t,a as P,u as re,t as J,O as W,T as I,ao as pe,$ as _a,h as La,ap as Fa,aq as Na,_ as Q,ar as H,as as za,k as Ta,l as Ga}from"./index-isAUPrqW.js";import{A as pa,C as fe,ap as Ba,e as he,a5 as ta,o as Ma,h as xa,a2 as Va,N as Wa,f as aa,d as Xa,a as Ua,ac as Ja,b as qa,c as Ka,L as Qa}from"./LightModeOutlined-DtOzjbUm.js";import{r as fa}from"./createSvgIcon-BJMui6Q5.js";import{d as $a,G as Ha}from"./GeofencAlert-DuUDKWZu.js";import{j as Ya,V as Za}from"./VehicleMenu-WCWs7icA.js";import{B as r}from"./CircularProgress-DApewylc.js";import{I as xe}from"./IconButton-Bxy6SMjW.js";import{u as eo,c as to,a as oa,b as ao,d as oo,V as na,e as sa}from"./Form-t0SCmHv1.js";import{t as le}from"./Search-CbnCtJd2.js";import{T as ia,I as no}from"./TextField-bvOPjbS4.js";import{a as ra}from"./OutlinedInput-CcIBv58k.js";import{u as so,G as io,C as ro,R as lo,b as la,M as co}from"./esm-DBnGC8v6.js";import{S as ie}from"./Switch-BQxscg-5.js";import{u as go,I as ue,T as po}from"./TextArea-COq0LHML.js";import{B as xo,S as fo}from"./button-CuAUhvWo.js";import"./mergeSlotProps-_N0izKtw.js";import"./Paper-DkFl3nh6.js";var ho={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const uo=ho;var mo=function(c,i){return a.createElement(pa,da({},c,{ref:i,icon:uo}))},yo=a.forwardRef(mo);const wo=yo;var bo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const jo=bo;var vo=function(c,i){return a.createElement(pa,da({},c,{ref:i,icon:jo}))},Co=a.forwardRef(vo);const So=Co,Ao=o=>{const{getPrefixCls:c,direction:i}=a.useContext(fe),{prefixCls:l,className:n}=o,h=c("input-group",l),y=c("input"),[m,F]=Ba(y),R=he(h,{[`${h}-lg`]:o.size==="large",[`${h}-sm`]:o.size==="small",[`${h}-compact`]:o.compact,[`${h}-rtl`]:i==="rtl"},F,n),b=a.useContext(ta),u=a.useMemo(()=>Object.assign(Object.assign({},b),{isFormItemInput:!1}),[b]);return m(a.createElement("span",{className:R,style:o.style,onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave,onFocus:o.onFocus,onBlur:o.onBlur},a.createElement(ta.Provider,{value:u},o.children)))},Oo=Ao;var Eo=function(o,c){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&c.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(o);n<l.length;n++)c.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(o,l[n])&&(i[l[n]]=o[l[n]]);return i};const Do=o=>o?a.createElement(So,null):a.createElement(wo,null),ko={click:"onClick",hover:"onMouseOver"},Io=a.forwardRef((o,c)=>{const{visibilityToggle:i=!0}=o,l=typeof i=="object"&&i.visible!==void 0,[n,h]=a.useState(()=>l?i.visible:!1),y=a.useRef(null);a.useEffect(()=>{l&&h(i.visible)},[l,i]);const m=go(y),F=()=>{const{disabled:G}=o;G||(n&&m(),h(d=>{var O;const j=!d;return typeof i=="object"&&((O=i.onVisibleChange)===null||O===void 0||O.call(i,j)),j}))},R=G=>{const{action:d="click",iconRender:O=Do}=o,j=ko[d]||"",L=O(n),p={[j]:F,className:`${G}-icon`,key:"passwordIcon",onMouseDown:M=>{M.preventDefault()},onMouseUp:M=>{M.preventDefault()}};return a.cloneElement(a.isValidElement(L)?L:a.createElement("span",null,L),p)},{className:b,prefixCls:u,inputPrefixCls:C,size:f}=o,D=Eo(o,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:z}=a.useContext(fe),S=z("input",C),w=z("input-password",u),T=i&&R(w),_=he(w,b,{[`${w}-${f}`]:!!f}),N=Object.assign(Object.assign({},Ma(D,["suffix","iconRender","visibilityToggle"])),{type:n?"text":"password",className:_,prefixCls:S,suffix:T});return f&&(N.size=f),a.createElement(ue,Object.assign({ref:xa(c,y)},N))}),Ro=Io;var Po=function(o,c){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&c.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(o);n<l.length;n++)c.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(o,l[n])&&(i[l[n]]=o[l[n]]);return i};const _o=a.forwardRef((o,c)=>{const{prefixCls:i,inputPrefixCls:l,className:n,size:h,suffix:y,enterButton:m=!1,addonAfter:F,loading:R,disabled:b,onSearch:u,onChange:C,onCompositionStart:f,onCompositionEnd:D}=o,z=Po(o,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:S,direction:w}=a.useContext(fe),T=a.useRef(!1),_=S("input-search",i),N=S("input",l),{compactSize:G}=Va(_,w),d=Wa(g=>{var A;return(A=h??G)!==null&&A!==void 0?A:g}),O=a.useRef(null),j=g=>{g&&g.target&&g.type==="click"&&u&&u(g.target.value,g,{source:"clear"}),C&&C(g)},L=g=>{var A;document.activeElement===((A=O.current)===null||A===void 0?void 0:A.input)&&g.preventDefault()},p=g=>{var A,V;u&&u((V=(A=O.current)===null||A===void 0?void 0:A.input)===null||V===void 0?void 0:V.value,g,{source:"input"})},M=g=>{T.current||R||p(g)},$=typeof m=="boolean"?a.createElement(fo,null):null,q=`${_}-button`;let x;const B=m||{},k=B.type&&B.type.__ANT_BUTTON===!0;k||B.type==="button"?x=aa(B,Object.assign({onMouseDown:L,onClick:g=>{var A,V;(V=(A=B==null?void 0:B.props)===null||A===void 0?void 0:A.onClick)===null||V===void 0||V.call(A,g),p(g)},key:"enterButton"},k?{className:q,size:d}:{})):x=a.createElement(xo,{className:q,type:m?"primary":void 0,size:d,disabled:b,key:"enterButton",onMouseDown:L,onClick:p,loading:R,icon:$},m),F&&(x=[x,aa(F,{key:"addonAfter"})]);const ce=he(_,{[`${_}-rtl`]:w==="rtl",[`${_}-${d}`]:!!d,[`${_}-with-button`]:!!m},n),ee=g=>{T.current=!0,f==null||f(g)},te=g=>{T.current=!1,D==null||D(g)};return a.createElement(ue,Object.assign({ref:xa(O,c),onPressEnter:M},z,{size:d,onCompositionStart:ee,onCompositionEnd:te,prefixCls:N,addonAfter:x,suffix:y,onChange:j,className:ce,disabled:b}))}),Lo=_o,Z=ue;Z.Group=Oo;Z.Search=Lo;Z.TextArea=po;Z.Password=Ro;const ca=Z;var me={},Fo=ga;Object.defineProperty(me,"__esModule",{value:!0});var ha=me.default=void 0,No=Fo(fa()),zo=t;ha=me.default=(0,No.default)((0,zo.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var ye={},To=ga;Object.defineProperty(ye,"__esModule",{value:!0});var ua=ye.default=void 0,Go=To(fa()),Bo=t;ua=ye.default=(0,Go.default)((0,Bo.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Place");const Mo=({title:o,setShowContent:c,showContent:i,showMap:l,setShowMap:n,setShowGfBar:h,showGfBar:y,setShowGfAlert:m,showGfAlert:F})=>{const{collapsed:R}=P(S=>S.auth),{selectedVehicle:b}=P(S=>S.liveMap),{vehicleSideBar:u}=P(S=>S.geofence);a.useState(!1);const{mode:C}=P(S=>S.dashboard);JSON.parse(localStorage.getItem("w_userDetails"));const f=re(),D=()=>{f(La(!R))},z=()=>{c({...i,vehicle:!i.vehicle}),h(!1),m(!1),f(pe({data:!u}))};return t.jsxs(r,{display:"flex",justifyContent:"space-between",p:1,sx:{bgcolor:J.bgColor,border:"1px solid white",borderRadius:"4px",height:"55px"},children:[t.jsxs(r,{style:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"center"},children:[R?t.jsx(W,{onClick:D,sx:{color:"white"},children:t.jsx(Xa,{style:{width:"30px",height:"30px"}})}):t.jsx(W,{onClick:D,sx:{color:"white"},children:t.jsx(Ua,{style:{width:"30px",height:"30px"}})}),t.jsx(r,{children:t.jsx("img",{src:`${Ja}`,style:{width:"36px",height:"36px"}})}),t.jsx(I,{style:{fontSize:"20px",fontFamily:"ubuntu",fontWeight:"500",color:"#FFFFFF"},children:"WIKITREK"})]}),t.jsx(r,{children:t.jsx(I,{variant:"h6",color:"white",fontWeight:"bold",sx:{ml:"15px",mt:"15px"},children:Object.keys(b).length>0&&l?`${o} - Geofence (${b.reg_id})`:t.jsxs(t.Fragment,{children:[o," ",Object.keys(b).length>0&&b.reg_id]})})}),t.jsxs(r,{sx:{display:"flex"},children:[t.jsxs(W,{variant:"outlined",size:"small",sx:{color:i.vehicle?"white":"black",backgroundColor:i.vehicle?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:z,children:[t.jsx("img",{src:Ya,style:{marginRight:"5px"}}),Object.keys(b).length>0?b.reg_id:"Vehicles"]}),l&&t.jsx(r,{children:t.jsx(W,{variant:"outlined",size:"small",sx:{color:y?"white":"black",backgroundColor:y?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:()=>{m(!1),h(!y),f(pe({data:!1}))},children:"Geofence"})}),t.jsx(r,{sx:{color:"white",mr:"10px"},children:t.jsxs(r,{sx:{display:"flex",marginTop:"14px",gap:"10px"},children:[t.jsx(r,{onClick:()=>{h(!1),m(!F),f(pe({data:!1}))},children:t.jsx($a,{sx:{cursor:"pointer",width:"30px",height:"30px"}})}),t.jsx(r,{onClick:()=>{c({...i,user:!i.user}),n(!1)},children:i.user?t.jsx(ua,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}}):t.jsx(ha,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}})})]})}),t.jsx(xe,{onClick:()=>{f(_a(!C))},sx:{color:"white"},children:C?t.jsx(qa,{}):t.jsx(Ka,{})})]})]})},Vo=Mo,Wo=()=>{const o=re(),c=eo("(min-width:600px)"),[i,l]=a.useState(!1),[n,h]=a.useState(!1),{mode:y}=P(u=>u.dashboard),m=le(y),F={new_password:"",confirmPassword:""},R=to().shape({new_password:oa().required("Password is required").min(8,"Password must be at least 8 characters"),confirmPassword:oa().oneOf([ao("new_password"),null],"Passwords must match").required("Confirm password is required")}),b=u=>{console.log("values",u);let C=u.confirmPassword;o(Fa({new_password:C}))};return t.jsx(r,{sx:{display:"flex",justifyContent:"center"},children:t.jsxs(r,{sx:{width:"30%"},children:[t.jsx(r,{sx:{align:"center"},children:t.jsx(I,{variant:"h5",sx:{mt:"25px",my:"",fontWeight:"bold",align:"center",color:m.grey[400]},children:"Change Password"})}),t.jsx(oo,{onSubmit:b,initialValues:F,validationSchema:R,children:({values:u,errors:C,touched:f,handleBlur:D,handleChange:z,handleSubmit:S})=>t.jsxs("form",{onSubmit:S,children:[t.jsxs(r,{display:"grid",gap:"15px",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",sx:{"& > div":{gridColumn:c?void 0:"span 4"}},marginTop:"20px",children:[t.jsx(ia,{fullWidth:!0,variant:"outlined",type:i?"text":"password",label:"New Password",onBlur:D,onChange:z,value:u.new_password,name:"new_password",error:!!f.new_password&&!!C.new_password,helperText:f.new_password&&C.new_password,sx:{gridColumn:"span 4",backgroundColor:"white",borderRadius:"5px"},InputProps:{endAdornment:t.jsx(ra,{position:"end",children:t.jsx(xe,{"aria-label":"toggle password visibility",onClick:()=>l(!i),edge:"end",children:i?t.jsx(na,{}):t.jsx(sa,{})})})}}),t.jsx(ia,{fullWidth:!0,variant:"outlined",type:n?"text":"password",label:"Confirm Password",onBlur:D,onChange:z,value:u.confirmPassword,name:"confirmPassword",error:!!f.confirmPassword&&!!C.confirmPassword,helperText:f.confirmPassword&&C.confirmPassword,sx:{gridColumn:"span 4",backgroundColor:"white",borderRadius:"5px"},InputProps:{endAdornment:t.jsx(ra,{position:"end",children:t.jsx(xe,{"aria-label":"toggle password visibility",onClick:()=>h(!n),edge:"end",children:n?t.jsx(na,{}):t.jsx(sa,{})})})}})]}),t.jsx(r,{sx:{my:"29px"},children:t.jsx(W,{type:"submit",sx:{background:J.bgColor,width:"100%",p:"10px","&:hover":{background:J.bgShadow,color:m.grey[100]}},variant:"contained",children:"submit"})})]})})]})})},Xo=()=>{const o=JSON.parse(localStorage.getItem("w_userDetails")),{mode:c}=P(l=>l.dashboard),i=le(c);return t.jsxs(r,{children:[t.jsxs(r,{sx:{backgroundColor:i.grey[200],m:"10px",borderRadius:"5px",height:"150px"},children:[t.jsx(r,{sx:{pl:"20px",pt:"10px",mb:"10px",color:`${i.grey[400]}`},children:t.jsx("b",{children:"User Settings"})}),t.jsxs(r,{sx:{display:"flex"},children:[t.jsx(r,{sx:{ml:"23px",mt:"11px",height:"70px",width:"70px",backgroundColor:"white",borderRadius:"50%"}}),t.jsxs(r,{sx:{height:"80px",width:"200px",display:"flex",justifyContent:"center",flexDirection:"column",mx:"20px",color:i.grey[400]},children:[t.jsx(r,{children:t.jsxs("b",{children:[" ",o&&o.first_name," ",o.last_name]})}),t.jsx(r,{children:o&&o.role})]})]})]}),t.jsx(r,{sx:{marginTop:"9%",alignContent:"center",textAlign:"center"},children:t.jsx(Wo,{})})]})},Uo=Xo,Jo="/assets/tractorIcon-zWRQE9nW.jpg",qo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAizSURBVHgB7Z0xbxNJFMfH6AQNSBHQQBOnABoQSFDRJBU0oDuJjga+wX2Ey1e4bwAVFegQVDQXGmgAIUEDFHEaaICLBA00uf05fj5fsL1vPLO776H5SZtdJ3Zs73/emzdv3s72Qg07OzvL1W6t2voT29JoC3uOC3oGo/32xPZStl6vtzXvxb1pv6zEQojfq+1m2BWq0D6Daluvto1pIv4gXCXar9XuVihWZIVBta1X4t2e/OW+yQeVaH9Uu79CEc0S/Wq7NdJmzNjiqj/cCLuWVrDLb5Xl3edgKFwlWr/a/R1Kf2YdApiVSrxtcZWroYjmAQkaxxa3GYpwXhhUFrfSG7nJzVDwRB9XeTYUvLGGcOdCwRv9IpxPhsKVwbY/inBOWSrC+WTpl/AT8OXLl7C1tRU+fvwYPnz4EL5//x6+ffs2/NuBAwfCwYMHw6FDh8Lx48fD8vLy8Ng7jON2gkMQ5t27d2EwGIT3799HvfbIkSPhzJkz4eTJk8Ep2y6Fe/v2bXj69OnYqhYFyzt//rxLAV0Jh0t8/PhxtIXVgXAI6MmFuhEO0R4+fDjcNwGiXblyxY14LoT79OnTULRU11jH/v37w9WrV4d9oHX2BeNgYY8ePWpcNCAa5b2asuqcmBeuSfc4jTYbSgqmhXv27FknrR/X/OLFi2AZswNwBIs9efRRRIhHjx4dDroB9ydjva9fv6r/16tXr8Lp06fNBitmg5ONjY3heE0DghHOM6iex5s3b8Lz58/VAvb7/XDp0qVgEZMWh7VpRcOyiAQ1lnHq1Klh2uvBgwcq8bBU+jrSZtYw2cdxwjTEiCbwXF4jrrSO169fB4u4Fi5WNIHXrK2tqZ5L0toi5oTDNWlOFkFISuCAyzx27Fjt8whqLA4NzAlHKK6B/ioVAhoNMdFoW5gTjvBdg8Za6sDqiEjr0DamNjEnnGbAnTOXqIkYi6tUoLG4nOG5JrrUeoE2MSecJuDImQbTiGIxe2JOOE2fg+vK5b40/VcRToGm/8JKPn/+HFLRzqQfPnw4WMOkq9S0cHKOqWjSajSkkvJSoh0Yp2Q1yM5ohMsx7GgCk8IxvtLADMIigQqvoUpMw8rKSrCISeEoWtUEKYsUEMW8hqFCsbgI6FO0g2wEuHPnzrDPmycGUSjPuXfvnlporeV3gdmJVPowLCMGBMdCOOFYC9EnG6XplKjHDiGuXbtmtuLLbOkCJwx3GZO1QBiCDu200DwQ3nKZntliIayny9Jw7cxBV5iu8qLmoyss929gWjjtZGduUidp28B8QWwXVpdjkrZpzAtH69eM6XJheew2iXnhCFIoTG0L60GJYF44aMt1YW0e3CS4EI5AoQ33ZT2SnMSFcNCGC/PiJsGNcFhDk5kMoldPlxK7EQ6azKTUXTBiDXfCNTE08DIEmMSVcE0NDTz1bYIr4SC3S8PausyJLoo74WTOLRcEPRaLgepwJxzkdG0e3SS4FC7XrAH/x+uCbC6Fgxz90okTJ4JX3AqXOjTwlJechlvhUksbPOUlp+FWOEhxl16DEsG1cIsGKZ6DEsG1cLCI1XkOSgT3wsUGKTzXc1AidF4QK8tjsLKBLIaNG1tdXVW5MylX1165E2OhlKrLElIILlNLXC/Xdbal9RJ0hJIVy9nPquPnRFECrhEvplydRW00/WLdxSEIyEZDYN92n9mKxS2yYjml56xgd/HixdrnasvVY6ZveO95F4dwCTKbXGOHNeK2+f9tiNiocLgvXM2ii19rrxvAbdHy6y5UjBm7xa60wHeU7ykiNjnx24hwnMC6y540xIT6nKQ64WKCEt5bu4LfXkREzkFTy+NnFQ7XwZWeOZaX58vGnGiNu4xpCLw33ydl9TwaLlfNImDuFdazBSf0CdrLc6fBiefEsrqrdPyxsA7lrOgS98XJi4VGKP2ZbIuC9eXK2GSxONZOjl2GF5HkIsRcKxvQz80SjsuTF4HPN9k3EmghHu8Tu4CArBSRQ7xk4bA0rWgIhQviJDYxDppnpVhyDvjcIiYC4A4RkP5QIyLi4dJTSzCShNOsXsCHpMCHD9r0oHVeP9dUFRf9Fo2RjfNBQ2bYM2+pRM5Zah1nknB1i8QgGK2yrSwD78PJ2NsPtXVJMO/NuJNGysLd8zyRdow6i6Rc5ayOmlZPIMAHazs1NE2ktrMavN+FCxeGmZ9ZeVSyRik0IhzrHXc1UTlNpK4uwud9Zy1/nzrGTRJuVmvqcgHqaZ+pzQsj95L7lmlCUh83KyuP/5abOLTNtEuyurK4J0+ezBzAp3qkpAF43fjN8x0RU6AxI9q8wTrTVinzgknCMRi9e/du7SrhImBT4zcLxMyAMEtx/fr1kEJyyotWRapJu5Yy4jGGwZ15F1EmgRFLu+RUrpsLZslVxog3iRT7sLcwq1wHwrAyraS6YgOPnHeEzJZkJrzV3mxoFjKTLElmjnErbQuKQHwPGiTfiw2hUkJ4vsfly5ezBUrZSxcWSTjXITdhn7wZO7CnFU8Ky+Np4f9kgxIB5EbvPOaYPc/LeZ+BplJ+jdScSJHNohORPwNN52gbLRaSzDljGYu3OWkCma5qOqneWpUXIspaklZv7bUoIhbjsrbyop2sECthtERn3qxRZuslKu4iGka4f6r9UugYKRHAMtkTJHR9P26JcAmIpKSiiyh3Ggi3We37wSiIKOE5QnIsESBMixZnMenGRACJQmUuj+MuClwjGZhdk1mwvC5ylzCtsx0K3tguwvlkKNwgFLxRhHPKS4RLq1opdMFLhgP96mAzFDzR39fr9QahuEtPDCrNtqTK61YoeGGdHz1+VO6SlBfusvPUV2Eug2pbG1tcdcBY7mYoWGcd0TgYF8RWv7gfRmZYMAmi3ZYHvb1/rdzmjbArYD8ULDD0hiPDGtOb9szREGE1FAG7ZBB2g8Y/R13Z/+jVvXok4rlqOzvaL01s0A+FWLbDfzliOR6MNvqwjdEwbSb/AmA6VQ6UiC1pAAAAAElFTkSuQmCC",Ko="http://139.59.37.47:3031",Qo=({showGfBar:o,showGfAlert:c})=>{const{isLoaded:i,loadError:l}=so({googleMapsApiKey:"AIzaSyA_S7GfAh6rJYWQ5X4n4X-3poo3vymuspU"}),{selectedVehicle:n,locationData:h,tractorIcon:y}=P(s=>s.liveMap),{geofence:m,vehicleSideBar:F}=P(s=>s.geofence),{mode:R,styles:b}=P(s=>s.dashboard),{collapsed:u}=P(s=>s.auth),[C,f]=a.useState(null),[D,z]=a.useState(null),[S,w]=a.useState(1e3),[T,_]=a.useState([]),[N,G]=a.useState(!0),[d,O]=a.useState(!1),[j,L]=a.useState(!1),[p,M]=a.useState({lat:18.516726,lng:73.856255}),[$,q]=a.useState(50),[x,B]=a.useState("circular"),[k,ce]=a.useState([]),[ee,te]=a.useState({north:p.lat+.01,south:p.lat-.01,east:p.lng+.01,west:p.lng-.01}),[g,A]=a.useState([{lat:p.lat+.01,lng:p.lng},{lat:p.lat-.01,lng:p.lng-.01},{lat:p.lat-.01,lng:p.lng+.01}]),[V,we]=a.useState([{lat:p.lat+.01,lng:p.lng},{lat:p.lat-.01,lng:p.lng-.01},{lat:p.lat-.01,lng:p.lng+.01}]),ma=a.useRef(null),ae=a.useRef(null),de=a.useRef(!1),oe=a.useRef(null),ne=a.useRef(null);let ya=re();a.useEffect(()=>{console.log(k,"rectangleVertices")},[k]),a.useEffect(()=>{wa()},[n]),a.useEffect(()=>{if(h.length>0&&Object.keys(n).length>0){let s=h.filter(v=>{var E;return((E=v.latestDocument)==null?void 0:E.imei)===n.imei});_(s)}},[n]),a.useEffect(()=>{C&&D&&C.fitBounds(D)},[C,D]);const wa=async()=>{var s,v,E,X,U,Y,K,je,ve,Ce,Se,Ae,Oe,Ee,De,ke,Ie,Re,Pe,_e,Le,Fe,Ne,ze,Te,Ge,Be,Me,Ve,We,Xe,Ue,Je,qe,Ke,Qe,$e,He,Ye,Ze,et,tt,at,ot,nt,st,it,rt,lt,ct,dt,gt,pt,xt,ft,ht,ut,mt,yt,wt,bt,jt,vt,Ct,St,At,Ot,Et,Dt,kt,It,Rt,Pt,_t,Lt,Ft,Nt,zt,Tt,Gt,Bt,Mt,Vt,Wt,Xt,Ut,Jt,qt,Kt,Qt,$t,Ht,Yt,Zt,ea;if(Object.keys(n).length>0)try{const e=await Na.get(`${Ko}/api/get/geofance/${n==null?void 0:n.imei}`);if(console.log(e.data.geofenceData,"result"),((v=(s=e==null?void 0:e.data)==null?void 0:s.geofenceData)==null?void 0:v.area_type)==="circular")if(B("circular"),(X=(E=e==null?void 0:e.data)==null?void 0:E.geofenceData)!=null&&X.lat)M({lat:(Y=(U=e==null?void 0:e.data)==null?void 0:U.geofenceData)==null?void 0:Y.lat,lng:(je=(K=e==null?void 0:e.data)==null?void 0:K.geofenceData)==null?void 0:je.long}),w((Ce=(ve=e==null?void 0:e.data)==null?void 0:ve.geofenceData)==null?void 0:Ce.radius),G((Ae=(Se=e==null?void 0:e.data)==null?void 0:Se.geofenceData)==null?void 0:Ae.isActive_Geofance),O(((Ee=(Oe=e==null?void 0:e.data)==null?void 0:Oe.geofenceData)==null?void 0:Ee.type)==="inward"),L((ke=(De=e==null?void 0:e.data)==null?void 0:De.geofenceData)==null?void 0:ke.isActive_Speed),q((Re=(Ie=e==null?void 0:e.data)==null?void 0:Ie.geofenceData)==null?void 0:Re.speed);else return Q.success("No Geofence For Selected Vehicle",{id:"getting geofence"});else((_e=(Pe=e==null?void 0:e.data)==null?void 0:Pe.geofenceData)==null?void 0:_e.area_type)==="triangle"?(B("triangle"),console.log("get for triangle",(Le=e==null?void 0:e.data)==null?void 0:Le.geofenceData),A([{lat:(ze=(Ne=(Fe=e==null?void 0:e.data)==null?void 0:Fe.geofenceData)==null?void 0:Ne.triangle_points[0])==null?void 0:ze.lat,lng:(Be=(Ge=(Te=e==null?void 0:e.data)==null?void 0:Te.geofenceData)==null?void 0:Ge.triangle_points[0])==null?void 0:Be.long},{lat:(We=(Ve=(Me=e==null?void 0:e.data)==null?void 0:Me.geofenceData)==null?void 0:Ve.triangle_points[1])==null?void 0:We.lat,lng:(Je=(Ue=(Xe=e==null?void 0:e.data)==null?void 0:Xe.geofenceData)==null?void 0:Ue.triangle_points[1])==null?void 0:Je.long},{lat:(Qe=(Ke=(qe=e==null?void 0:e.data)==null?void 0:qe.geofenceData)==null?void 0:Ke.triangle_points[2])==null?void 0:Qe.lat,lng:(Ye=(He=($e=e==null?void 0:e.data)==null?void 0:$e.geofenceData)==null?void 0:He.triangle_points[2])==null?void 0:Ye.long}]),M({lat:(et=(Ze=e==null?void 0:e.data)==null?void 0:Ze.geofenceData)==null?void 0:et.lat,lng:(at=(tt=e==null?void 0:e.data)==null?void 0:tt.geofenceData)==null?void 0:at.long}),q((nt=(ot=e==null?void 0:e.data)==null?void 0:ot.geofenceData)==null?void 0:nt.speed),G((it=(st=e==null?void 0:e.data)==null?void 0:st.geofenceData)==null?void 0:it.isActive_Geofance),O(((lt=(rt=e==null?void 0:e.data)==null?void 0:rt.geofenceData)==null?void 0:lt.type)==="inward"),L((dt=(ct=e==null?void 0:e.data)==null?void 0:ct.geofenceData)==null?void 0:dt.isActive_Speed)):((pt=(gt=e==null?void 0:e.data)==null?void 0:gt.geofenceData)==null?void 0:pt.area_type)==="rectangle"?(B("rectangle"),console.log("get for rectangle",(xt=e==null?void 0:e.data)==null?void 0:xt.geofenceData),te({north:(ut=(ht=(ft=e==null?void 0:e.data)==null?void 0:ft.geofenceData)==null?void 0:ht.rectangle_points[0])==null?void 0:ut.lat,south:(wt=(yt=(mt=e==null?void 0:e.data)==null?void 0:mt.geofenceData)==null?void 0:yt.rectangle_points[1])==null?void 0:wt.lat,east:(vt=(jt=(bt=e==null?void 0:e.data)==null?void 0:bt.geofenceData)==null?void 0:jt.rectangle_points[1])==null?void 0:vt.long,west:(At=(St=(Ct=e==null?void 0:e.data)==null?void 0:Ct.geofenceData)==null?void 0:St.rectangle_points[0])==null?void 0:At.long}),M({lat:(Et=(Ot=e==null?void 0:e.data)==null?void 0:Ot.geofenceData)==null?void 0:Et.lat,lng:(kt=(Dt=e==null?void 0:e.data)==null?void 0:Dt.geofenceData)==null?void 0:kt.long}),q((Rt=(It=e==null?void 0:e.data)==null?void 0:It.geofenceData)==null?void 0:Rt.speed),G((_t=(Pt=e==null?void 0:e.data)==null?void 0:Pt.geofenceData)==null?void 0:_t.isActive_Geofance),O(((Ft=(Lt=e==null?void 0:e.data)==null?void 0:Lt.geofenceData)==null?void 0:Ft.type)==="inward"),L((zt=(Nt=e==null?void 0:e.data)==null?void 0:Nt.geofenceData)==null?void 0:zt.isActive_Speed)):((Gt=(Tt=e==null?void 0:e.data)==null?void 0:Tt.geofenceData)==null?void 0:Gt.area_type)==="polygon"&&(B("polygon"),console.log("get for polygon",(Bt=e==null?void 0:e.data)==null?void 0:Bt.geofenceData),we((Vt=(Mt=e==null?void 0:e.data)==null?void 0:Mt.geofenceData)==null?void 0:Vt.polygon_points),q((Xt=(Wt=e==null?void 0:e.data)==null?void 0:Wt.geofenceData)==null?void 0:Xt.speed),G((Jt=(Ut=e==null?void 0:e.data)==null?void 0:Ut.geofenceData)==null?void 0:Jt.isActive_Geofance),O(((Kt=(qt=e==null?void 0:e.data)==null?void 0:qt.geofenceData)==null?void 0:Kt.type)==="inward"),M({lat:($t=(Qt=e==null?void 0:e.data)==null?void 0:Qt.geofenceData)==null?void 0:$t.lat,lng:(Yt=(Ht=e==null?void 0:e.data)==null?void 0:Ht.geofenceData)==null?void 0:Yt.long}),L((ea=(Zt=e==null?void 0:e.data)==null?void 0:Zt.geofenceData)==null?void 0:ea.isActive_Speed))}catch(e){console.log(e,"error while getting geofence"),Q.error("Error while getting geofence",{id:"getting geofence"})}},ba=s=>{f(s)},ja=()=>{var s,v,E,X,U,Y;if(Object.keys(n).length>0){let K;x==="circular"?K={imei:n.imei,area_type:x,type:d?"inward":"outward",lat:p.lat,long:p.lng,radius:S,isActive_Geofance:N,isActive_Speed:!!j,speed:j?$:5}:x==="rectangle"?K={imei:n.imei,area_type:x,type:d?"inward":"outward",rectangle_points:[{lat:k==null?void 0:k.north,long:k==null?void 0:k.west},{lat:k==null?void 0:k.south,long:k==null?void 0:k.east}],isActive_Geofance:N,isActive_Speed:!!j,speed:j?$:50}:x==="triangle"?K={imei:n.imei,area_type:x,type:d?"inward":"outward",triangle_points:[{lat:(s=g[0])==null?void 0:s.lat,long:(v=g[0])==null?void 0:v.lng},{lat:(E=g[1])==null?void 0:E.lat,long:(X=g[1])==null?void 0:X.lng},{lat:(U=g[2])==null?void 0:U.lat,long:(Y=g[2])==null?void 0:Y.lng}],isActive_Geofance:N,isActive_Speed:!!j,speed:j?$:50}:x==="polygon"&&(K={imei:n.imei,area_type:x,type:d?"inward":"outward",polygon_points:V,isActive_Geofance:N,isActive_Speed:!!j,speed:j?$:50}),ya(za({data:K})),Q.success("Successful Saved",{id:"geofence"})}else Q.error("Please Select Vehicle",{id:"geofence"})},se=s=>{console.log("selectedType",s),B(s)},va=()=>{if(!de.current){de.current=!0;const s=ge.getRadius();console.log("newRadius",s),w(s),de.current=!1}},Ca=s=>{console.log("New Center:",s.toJSON()),M(s.toJSON())},Sa=()=>{if(oe.current&&oe.current.getBounds){const s=oe.current.getBounds(),v=s.getNorthEast().lat(),E=s.getSouthWest().lat(),X=s.getNorthEast().lng(),U=s.getSouthWest().lng();console.log("{ north, south, east, west }",{north:v,south:E,east:X,west:U}),te({north:v,south:E,east:X,west:U}),ce({north:v,south:E,east:X,west:U})}},Aa={bounds:ee,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},Oa=s=>{oe.current=s},Ea=()=>{if(ae.current&&ae.current.getPath){const v=ae.current.getPath().getArray().map(E=>({lat:E.lat(),lng:E.lng()}));A(v),console.log("newVertices",v)}},Da={paths:g,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},ka=s=>{ae.current=s},Ia=()=>{if(ne.current&&ne.current.getPath){const v=ne.current.getPath().getArray().map(E=>({lat:E.lat(),lng:E.lng()}));we(v),console.log("newVertices",v)}},Ra=s=>{ne.current=s},be={paths:V,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}};if(l)return"Error loading maps";if(!i)return"Loading maps";const Pa={width:"100%",height:"92vh"};let ge;return t.jsxs(t.Fragment,{children:[t.jsxs(r,{children:[t.jsx(W,{onClick:()=>{se("circular")},style:{background:x==="circular"?J.bgColor:"transparent",color:x==="circular"?"white":H[400]},children:"Circle"}),t.jsx(W,{onClick:()=>{se("triangle")},style:{background:x==="triangle"?J.bgColor:"transparent",color:x==="triangle"?"white":H[400]},children:"Triangle"}),t.jsx(W,{onClick:()=>{se("rectangle")},style:{background:x==="rectangle"?J.bgColor:"transparent",color:x==="rectangle"?"white":H[400]},children:"Rectangle"}),t.jsx(W,{onClick:()=>{se("polygon")},style:{background:x==="polygon"?J.bgColor:"transparent",color:x==="polygon"?"white":H[400]},children:"Polygon"})]}),t.jsxs(r,{sx:{display:"flex",flexDirection:"row"},children:[t.jsxs(io,{ref:ma,mapContainerStyle:Pa,zoom:15,center:p,onLoad:ba,options:{mapTypeControl:!1,styles:R?b:""},children:[x==="circular"&&t.jsx(ro,{center:p,radius:S,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0},onLoad:s=>{ge=s,ge.addListener("radius_changed",va)},onDragEnd:s=>Ca(s.latLng)}),x==="rectangle"&&t.jsx(lo,{bounds:ee,options:Aa.options,onDragEnd:Sa,onLoad:Oa}),x==="triangle"&&t.jsx(la,{paths:g,options:Da.options,onDragEnd:Ea,onLoad:ka}),x==="polygon"&&t.jsx(la,{paths:be.paths,options:be.options,draggable:!0,editable:!0,onDragEnd:Ia,onLoad:Ra}),T&&T.length>0&&T.map((s,v)=>t.jsx(co,{position:{lat:s.latestDocument.lat,lng:s.latestDocument.lng},icon:{path:y.path1,fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},v))]}),o&&!c&&!F&&p&&t.jsx(r,{sx:{width:u?"25%":"20%"},children:t.jsxs(r,{sx:{display:"flex",padding:"15px",flexDirection:"column",gap:"10px",color:H[600]},children:[t.jsx(I,{sx:{fontWeight:"bold",fontSize:"16px"},children:"Geofence Setting"}),t.jsxs(I,{sx:{fontWeight:"400",fontSize:"14px",textTransform:"capitalize"},children:["Type: ",x]}),x==="circular"&&t.jsxs(t.Fragment,{children:[t.jsxs(I,{sx:{color:"#686868"},children:["Centered At"," "]}),t.jsxs(I,{sx:{color:"#686868"},children:["Lat: ",p.lat.toFixed(2)]}),t.jsxs(I,{sx:{color:"#686868"},children:["Lng: ",p.lng.toFixed(2)]}),t.jsxs(I,{sx:{color:"#686868",border:"1px solid #686868",borderRadius:"4px",padding:"8px"},children:["Radius ( ",(S/1e3).toFixed(2)," in km)"]})]}),t.jsxs(r,{display:"flex",alignItems:"center",children:[t.jsx(I,{variant:"body1",component:"b",children:N?"Active":"Inactive"}),t.jsx(ie,{defaultChecked:N,onChange:()=>{G(!N)},color:"primary",inputProps:{"aria-label":"toggle active state"}})]}),t.jsxs(r,{display:"flex",alignItems:"center",children:[t.jsx(I,{variant:"body1",component:"b",children:d?"Inward":"Outward"}),t.jsx(ie,{checked:d,onChange:()=>{O(!d)},color:"primary",inputProps:{"aria-label":"toggle direction"}})]}),t.jsxs(r,{display:"flex",alignItems:"center",children:[t.jsx(ie,{checked:j,onChange:()=>{L(!j)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),t.jsx(I,{variant:"body1",component:"b",children:"Speed Limit"})]}),j&&t.jsx(r,{sx:{},children:t.jsx(no,{sx:{width:"100%",color:H[600],border:"none","&:focus":{outline:"none"}},value:$,placeholder:"Enter Speed Limit",type:"number",onChange:s=>{const v=Math.max(0,parseInt(s.target.value));q(v)}})}),t.jsx(W,{disabled:Object.keys(n).length===0&&!1,variant:"outlined",size:"small",sx:{color:"white",backgroundColor:J.bgColor,mt:"6px",mx:"5px",border:"1px solid white",height:"40px",width:"100%","&:hover":{color:"black",background:J.bgShadow,border:"1px solid black"},letterSpacing:"1.5px",fontSize:"16px"},onClick:()=>{if(Object.keys(n).length===0)return Q.error("please select a vehicle.");ja()},children:"SUBMIT"})]})})]})]})},$o=({showMap:o,setShowMap:c,showGfBar:i,showGfAlert:l})=>{const{selectedVehicle:n}=P(m=>m.liveMap),{mode:h}=P(m=>m.dashboard),y=le(h);return t.jsx(t.Fragment,{children:o?t.jsx(Qo,{showGfBar:i,showGfAlert:l}):t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",background:y.grey[200],margin:"10px",padding:"10px",borderRadius:"8px"},children:[t.jsxs(r,{sx:{},children:[t.jsx(I,{sx:{fontWeight:"bold",fontSize:"16px",margin:"4px",color:y.grey[400]},children:"Vehicle Settings"}),t.jsxs(r,{sx:{display:"flex"},children:[t.jsx(r,{children:t.jsx("img",{src:Jo,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}})}),t.jsxs(r,{children:[t.jsx(I,{sx:{fontWeight:"bold",color:y.grey[400]},children:Object.keys(n).length>0?n==null?void 0:n.reg_id:"Reg No"}),t.jsx(I,{sx:{marginBottom:"5px",color:y.grey[400]},children:"Chassis No"}),t.jsxs(r,{sx:{width:"200px",display:"flex",gap:"8px"},children:[t.jsx(ca,{placeholder:"ONLINE"}),t.jsx(ca,{placeholder:"RUNNING"})]}),t.jsx(r,{sx:{marginLeft:"-8px",color:y.grey[400]},children:t.jsxs(I,{children:[t.jsx(ie,{})," ",t.jsx("b",{children:"Switched ON / OFF"})]})})]})]})]}),t.jsxs(r,{onClick:()=>{c(!o)},sx:{cursor:"pointer",marginTop:"50px"},children:[t.jsx("img",{src:qo,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}}),t.jsx(I,{sx:{fontSize:"12px",color:y.grey[400]},children:"Set Geofence"})]})]})})};function hn(){const{w_customer_id:o}=P(w=>w.auth),{vehicleSideBar:c}=P(w=>w.geofence),{collapsed:i}=P(w=>w.auth),{mode:l}=P(w=>w.dashboard),n=le(l),[h,y]=a.useState([]);a.useState([]);const[m,F]=a.useState({user:!0,vehicle:!1}),[R,b]=a.useState(!1),[u,C]=a.useState(!1),[f,D]=a.useState(!1);let z=re();a.useEffect(()=>{S()},[]);const S=async()=>{try{let w=[],T=[];const _=await z(Ta({w_customer_id:o}));if(_.payload&&Array.isArray(_.payload)){_.payload.forEach(d=>{var O,j,L;d.imei&&Array.isArray(d.imei)&&d.imei.length>0&&((O=d.imei[0])!=null&&O.mac_id)?(w.push({id:d.id,label:d.registration_id,value:(j=d.imei[0])==null?void 0:j.mac_id}),T.push((L=d.imei[0])==null?void 0:L.mac_id)):(console.error("IMEI data not found for item:",d),Q.error(`IMEI Number not found for the vehicle: ${d==null?void 0:d.registration_id}`))});const N="one",G=T;T.length>0&&z(Ga({type:N,imei:G})),y(w)}else console.error("Unexpected data format or empty payload:",_),Q.error("Unexpected data format:")}catch(w){console.error("Error fetching vehicle data:",w),Q.error(`Error fetching vehicle data: ${w}`)}};return t.jsxs("div",{className:"app",children:[t.jsx(Qa,{}),t.jsxs("main",{className:"content",style:{width:"100%",background:n.grey[100]},children:[t.jsx(Vo,{title:"Settings",setShowContent:F,showContent:m,showMap:R,setShowMap:b,showGfBar:u,setShowGfBar:C,showGfAlert:f,setShowGfAlert:D}),t.jsxs(r,{style:{display:"flex",width:"100%",height:"95vh"},children:[t.jsx(r,{style:{width:c?"80%":"100%"},children:m.user?t.jsx(Uo,{}):t.jsx($o,{showMap:R,setShowMap:b,showGfBar:u,showGfAlert:f})}),!f&&!u&&c&&t.jsx(r,{style:{width:"20%"},children:t.jsx(Za,{vehicleData:h,title:"Setting"})}),f&&!u&&!c&&t.jsx(r,{sx:{width:i?"25%":"20%"},children:t.jsx(Ha,{})})]})]})]})}export{hn as default};
