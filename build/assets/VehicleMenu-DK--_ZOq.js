import{a as y,r as D,u as E,j as r,P as f,_ as c,t as s,b as N,Q as j,S as R,aN as w}from"./index-DL9hLiOS.js";import{d as $,t as Q}from"./Search--ZZoCNX3.js";import{B as d,C as W}from"./CircularProgress-CwJAJQBH.js";import{F as Y,I as q,O as z,a as G}from"./OutlinedInput-BZ3kL5AV.js";import{I as H}from"./IconButton-7VKsicx3.js";const ee=({vehicleData:h,title:p,setParameterData:v})=>{const{selectedVehicle:n,locationData:t,loading:C}=y(e=>e.liveMap),{mode:_}=y(e=>e.dashboard),l=Q(_),[k,S]=D.useState("");let i=E();const g=h.length>0&&h.filter(e=>e.label.toLowerCase().includes(k.toLowerCase())),L=async e=>{var u,x;if((t==null?void 0:t.length)<=0)return c.error("Data not available for this vehicle",{id:"clipboard"});const o=t==null?void 0:t.filter(a=>a.latestDocument.imei===e.value);if((o==null?void 0:o.length)<=0)return c.error("Data not available for this vehicle",{id:"clipboard"});const{lat:T,lng:B}=((u=o==null?void 0:o[0])==null?void 0:u.latestDocument)??{},F={lat:T||w.lat,lng:B||w.lat};i(N(F)),i(j({imei:e.value,reg_id:e.label}));const O=e.label,M=await i(R({w_registration_id:O})),b=[];let P=0;(x=M.payload)==null||x.map(a=>{a[a.parameter_type.toLowerCase()+"_parameter"].forEach(m=>{b.push({reg_id:e.label,imei:e.value,id:m.id,_id:a.id,key:P++,label:a.parameter_type==="Telematic"&&m.short_name})})}),p==="Live Map"&&v(b)},V=e=>{S(e.target.value)},A=()=>{i(j({}))},I={backgroundColor:l.grey[100],position:"relative",width:"100%",float:"right",height:"90vh",overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin"};return r.jsx(r.Fragment,{children:r.jsx("div",{style:I,children:C?r.jsx(d,{sx:{display:"flex",justifyContent:"center",marginTop:"50%"},children:r.jsx(W,{})}):r.jsxs(r.Fragment,{children:[r.jsx(d,{sx:{align:"center",my:"15px",ml:"20px"},children:r.jsxs(Y,{sx:{width:"90%",backgroundColor:l.grey[500],borderRadius:"5px"},variant:"outlined",children:[r.jsx(q,{htmlFor:"outlined-adornment-password",style:{marginTop:"-8px",color:l.grey[400]},children:"Search"}),r.jsx(z,{onChange:e=>V(e),inputProps:{style:{padding:7,color:l.grey[400]}},id:"outlined-adornment-password",type:"text",endAdornment:r.jsx(G,{position:"end",children:r.jsx(H,{"aria-label":"toggle password visibility",edge:"end",children:r.jsx($,{style:{color:l.grey[400]}})})}),label:"Search"})]})}),p==="Live Map"&&r.jsx(d,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsx(f,{variant:"outlined",onClick:()=>{if(Object.keys(n).length>0)A();else return c.success("Already Selected To View All Vehicle Location.",{id:"already selected"})},sx:{width:"90%",bgcolor:Object.keys(n).length===0?s.bgColor:"undefined",color:Object.keys(n).length===0?"white":l.grey[400],border:`1px solid ${s.bgColor}`,"&:hover":{color:"black",border:"1px solid black",bgcolor:s.bgShadow}},children:"View All Vehicle Location"})}),g.length>0&&g.map((e,o)=>r.jsx(d,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsx(f,{variant:"outlined",onClick:()=>{L(e)},sx:{width:"90%",bgcolor:e.label===n.reg_id?s.bgColor:"undefined",color:e.label===n.reg_id?"white":l.grey[400],border:`1px solid ${s.bgColor}`,"&:hover":{color:"black",border:"1px solid black",bgcolor:s.bgShadow}},children:e.label})},o))]})})})};export{ee as V};
