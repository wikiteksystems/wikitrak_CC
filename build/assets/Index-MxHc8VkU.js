import{r as s,J as be,i as q,j as e,a as z,u as Z,t as V,T as f,B as Y,a5 as Q,h as Ae,a6 as Ee,_ as W,a7 as Ie,n as Re,o as ke}from"./index-CsFCws2M.js";import{A as ye,B as $,ao as ze,e as ee,a3 as ge,ap as Le,r as Ne,aq as te,c as Ce,a0 as Pe,J as De,M as me,an as Fe,d as Me,a as Be,aa as Ge,L as Te}from"./Close-DOxmq7ml.js";import{r as se}from"./createSvgIcon-AgKAu6xK.js";import{j as Ve,V as Xe}from"./VehicleMenu-bxkbKF10.js";import{B as n}from"./CircularProgress-D_16-N5y.js";import{C as _e}from"./Form-B9JV1wTy.js";import{u as Je,G as We,M as Ue}from"./esm-BCrIG0W8.js";import{a as U}from"./Switch-CnqSPKwe.js";import{I as Ke}from"./TextField-CnQokYLa.js";import{B as He,S as Qe}from"./button-Dr8GhG_7.js";import"./createSvgIcon-DlyRI8MI.js";import"./OutlinedInput-CWlV7Hnx.js";import"./IconButton-DRDQtcwe.js";import"./Paper-BwpwOC92.js";var Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const qe=Ye;var Ze=function(l,i){return s.createElement(ye,be({},l,{ref:i,icon:qe}))},$e=s.forwardRef(Ze);const et=$e;var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const st=tt;var nt=function(l,i){return s.createElement(ye,be({},l,{ref:i,icon:st}))},it=s.forwardRef(nt);const ot=it,at=t=>{const{getPrefixCls:l,direction:i}=s.useContext($),{prefixCls:a,className:o}=t,d=l("input-group",a),w=l("input"),[g,O]=ze(w),v=ee(d,{[`${d}-lg`]:t.size==="large",[`${d}-sm`]:t.size==="small",[`${d}-compact`]:t.compact,[`${d}-rtl`]:i==="rtl"},O,o),u=s.useContext(ge),m=s.useMemo(()=>Object.assign(Object.assign({},u),{isFormItemInput:!1}),[u]);return g(s.createElement("span",{className:v,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},s.createElement(ge.Provider,{value:m},t.children)))},rt=at;var lt=function(t,l){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&l.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)l.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(i[a[o]]=t[a[o]]);return i};const ct=t=>t?s.createElement(ot,null):s.createElement(et,null),dt={click:"onClick",hover:"onMouseOver"},xt=s.forwardRef((t,l)=>{const{visibilityToggle:i=!0}=t,a=typeof i=="object"&&i.visible!==void 0,[o,d]=s.useState(()=>a?i.visible:!1),w=s.useRef(null);s.useEffect(()=>{a&&d(i.visible)},[a,i]);const g=Le(w),O=()=>{const{disabled:F}=t;F||(o&&g(),d(S=>{var R;const j=!S;return typeof i=="object"&&((R=i.onVisibleChange)===null||R===void 0||R.call(i,j)),j}))},v=F=>{const{action:S="click",iconRender:R=ct}=t,j=dt[S]||"",L=R(o),M={[j]:O,className:`${F}-icon`,key:"passwordIcon",onMouseDown:B=>{B.preventDefault()},onMouseUp:B=>{B.preventDefault()}};return s.cloneElement(s.isValidElement(L)?L:s.createElement("span",null,L),M)},{className:u,prefixCls:m,inputPrefixCls:b,size:y}=t,C=lt(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:p}=s.useContext($),I=p("input",b),P=p("input-password",m),k=i&&v(P),A=ee(P,u,{[`${P}-${y}`]:!!y}),E=Object.assign(Object.assign({},Ne(C,["suffix","iconRender","visibilityToggle"])),{type:o?"text":"password",className:A,prefixCls:I,suffix:k});return y&&(E.size=y),s.createElement(te,Object.assign({ref:Ce(l,w)},E))}),ut=xt;var pt=function(t,l){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&l.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)l.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(i[a[o]]=t[a[o]]);return i};const ht=s.forwardRef((t,l)=>{const{prefixCls:i,inputPrefixCls:a,className:o,size:d,suffix:w,enterButton:g=!1,addonAfter:O,loading:v,disabled:u,onSearch:m,onChange:b,onCompositionStart:y,onCompositionEnd:C}=t,p=pt(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:I,direction:P}=s.useContext($),k=s.useRef(!1),A=I("input-search",i),E=I("input",a),{compactSize:F}=Pe(A,P),S=De(r=>{var h;return(h=d??F)!==null&&h!==void 0?h:r}),R=s.useRef(null),j=r=>{r&&r.target&&r.type==="click"&&m&&m(r.target.value,r,{source:"clear"}),b&&b(r)},L=r=>{var h;document.activeElement===((h=R.current)===null||h===void 0?void 0:h.input)&&r.preventDefault()},M=r=>{var h,N;m&&m((N=(h=R.current)===null||h===void 0?void 0:h.input)===null||N===void 0?void 0:N.value,r,{source:"input"})},B=r=>{k.current||v||M(r)},G=typeof g=="boolean"?s.createElement(Qe,null):null,_=`${A}-button`;let T;const D=g||{},J=D.type&&D.type.__ANT_BUTTON===!0;J||D.type==="button"?T=me(D,Object.assign({onMouseDown:L,onClick:r=>{var h,N;(N=(h=D==null?void 0:D.props)===null||h===void 0?void 0:h.onClick)===null||N===void 0||N.call(h,r),M(r)},key:"enterButton"},J?{className:_,size:S}:{})):T=s.createElement(He,{className:_,type:g?"primary":void 0,size:S,disabled:u,key:"enterButton",onMouseDown:L,onClick:M,loading:v,icon:G},g),O&&(T=[T,me(O,{key:"addonAfter"})]);const K=ee(A,{[`${A}-rtl`]:P==="rtl",[`${A}-${S}`]:!!S,[`${A}-with-button`]:!!g},o),H=r=>{k.current=!0,y==null||y(r)},c=r=>{k.current=!1,C==null||C(r)};return s.createElement(te,Object.assign({ref:Ce(R,l),onPressEnter:B},p,{size:S,onCompositionStart:H,onCompositionEnd:c,prefixCls:E,addonAfter:T,suffix:w,onChange:j,className:K,disabled:u}))}),ft=ht,X=te;X.Group=rt;X.Search=ft;X.TextArea=Fe;X.Password=ut;const ve=X;var ne={},gt=q;Object.defineProperty(ne,"__esModule",{value:!0});var Se=ne.default=void 0,mt=gt(se()),vt=e;Se=ne.default=(0,mt.default)((0,vt.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var ie={},jt=q;Object.defineProperty(ie,"__esModule",{value:!0});var we=ie.default=void 0,bt=jt(se()),yt=e;we=ie.default=(0,bt.default)((0,yt.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Place");var oe={},Ct=q;Object.defineProperty(oe,"__esModule",{value:!0});var Oe=oe.default=void 0,St=Ct(se()),wt=e;Oe=oe.default=(0,St.default)((0,wt.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone");const Ot=({title:t,setShowContent:l,showContent:i,showMap:a,setShowMap:o,setShowGfBar:d,showGfBar:w,setShowGfAlert:g,showGfAlert:O})=>{const{collapsed:v}=z(p=>p.auth),{selectedVehicle:u}=z(p=>p.liveMap),{vehicleSideBar:m}=z(p=>p.geofence);s.useState(!1),JSON.parse(localStorage.getItem("w_userDetails"));const b=Z(),y=()=>{b(Ae(!v))},C=()=>{l({...i,vehicle:!i.vehicle}),d(!1),g(!1),b(Q({data:!m}))};return e.jsxs(n,{display:"flex",justifyContent:"space-between",p:1,sx:{bgcolor:V.bgColor,border:"1px solid white",borderRadius:"4px",height:"55px"},children:[e.jsxs(n,{display:"flex",children:[e.jsx(n,{sx:{color:"white",my:"20px"},children:v?e.jsx(Me,{style:{cursor:"pointer",width:"30px",height:"30px"},onClick:y}):e.jsx(Be,{style:{cursor:"pointer",width:"30px",height:"30px"},onClick:y})}),e.jsx(n,{sx:{my:"20px",mx:"10px"},children:e.jsx(f,{style:{fontSize:"20px",fontFamily:"ubuntu",fontWeight:"500",color:"#FFFFFF"},children:"WIKITRACK"})})]}),e.jsx(n,{children:e.jsx(f,{variant:"h6",color:"white",fontWeight:"bold",sx:{ml:"15px",mt:"15px"},children:Object.keys(u).length>0&&a?`${t} - Geofence (${u.reg_id})`:e.jsxs(e.Fragment,{children:[t," ",Object.keys(u).length>0&&u.reg_id]})})}),e.jsxs(n,{sx:{display:"flex"},children:[e.jsxs(Y,{variant:"outlined",size:"small",sx:{color:i.vehicle?"white":"black",backgroundColor:i.vehicle?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:C,children:[e.jsx("img",{src:Ve,style:{marginRight:"5px"}}),Object.keys(u).length>0?u.reg_id:"Vehicles"]}),a&&e.jsx(n,{children:e.jsx(Y,{variant:"outlined",size:"small",sx:{color:w?"white":"black",backgroundColor:w?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:()=>{g(!1),d(!w),b(Q({data:!1}))},children:"Geofence"})}),e.jsx(n,{sx:{color:"white",mr:"10px"},children:e.jsxs(n,{sx:{display:"flex",marginTop:"14px",gap:"10px"},children:[e.jsx(n,{onClick:()=>{d(!1),g(!O),b(Q({data:!1}))},children:e.jsx(Oe,{sx:{cursor:"pointer",width:"30px",height:"30px"}})}),e.jsx(n,{onClick:()=>{l({...i,user:!i.user}),o(!1)},children:i.user?e.jsx(we,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}}):e.jsx(Se,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}})})]})})]})]})},At=Ot,Et=({})=>{const{selectedVehicle:t,locationData:l}=z(i=>i.liveMap);return e.jsxs(n,{sx:{padding:"15px",display:"flex",flexDirection:"column",gap:"15px",color:"#686868",backgroundColor:"#FFFFFF",height:"95vh"},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(f,{children:e.jsx("b",{children:"Geofence Alert"})}),e.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{children:"14 Jan 2024"}),e.jsx("span",{style:{paddingLeft:"15px"},children:"12: 12PM: 12"})]})]}),e.jsxs(n,{sx:{display:"flex",border:"1px solid #686868",padding:"5px",borderRadius:"5px"},children:[e.jsx("img",{style:{width:"30px",height:"30px",borderRadius:"5px",marginRight:"15px",alignItems:"center",marginTop:"15px"},src:Ge,alt:"logo"}),e.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[e.jsxs(f,{sx:{fontSize:"15px"},children:["Your Vehicle No."," ",Object.keys(t).length>0?t.reg_id:"XXX"]}),e.jsx(f,{children:"has gone at location xx km from it's center "})]})]})]})},It=()=>{const t=JSON.parse(localStorage.getItem("w_userDetails"));return e.jsxs(n,{children:[e.jsxs(n,{sx:{backgroundColor:V.bgShadow,m:"10px",borderRadius:"5px",height:"150px"},children:[e.jsx(n,{sx:{pl:"20px",pt:"10px",mb:"10px"},children:e.jsx("b",{children:"User Settings"})}),e.jsxs(n,{sx:{display:"flex"},children:[e.jsx(n,{sx:{ml:"23px",mt:"11px",height:"70px",width:"70px",backgroundColor:"white",borderRadius:"50%"}}),e.jsxs(n,{sx:{height:"80px",width:"200px",display:"flex",justifyContent:"center",flexDirection:"column",mx:"20px"},children:[e.jsx(n,{children:e.jsxs("b",{children:[" ",t&&t.first_name," ",t.last_name]})}),e.jsx(n,{children:t&&t.role})]})]})]}),e.jsx(n,{sx:{marginTop:"9%",alignContent:"center",textAlign:"center"},children:e.jsx(_e,{})})]})},Rt=It,kt="/assets/tractorIcon-zWRQE9nW.jpg",zt="data:image/png;base64,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",Lt="http://139.59.37.47:3031",Nt=({showGfBar:t,showGfAlert:l})=>{const{isLoaded:i,loadError:a}=Je({googleMapsApiKey:"AIzaSyA_S7GfAh6rJYWQ5X4n4X-3poo3vymuspU"}),{selectedVehicle:o,locationData:d}=z(c=>c.liveMap),{geofence:w,vehicleSideBar:g}=z(c=>c.geofence),{collapsed:O}=z(c=>c.auth),v=s.useRef(null),[u,m]=s.useState(null),[b,y]=s.useState(null),[C,p]=s.useState(1e3),[I,P]=s.useState([]),[k,A]=s.useState(!0),[E,F]=s.useState(!0),[S,R]=s.useState(!1),[j,L]=s.useState({lat:18.516726,lng:73.856255}),[M,B]=s.useState(5),G=s.useRef(null);let _=Z();s.useEffect(()=>{T()},[o]),s.useEffect(()=>{if(d.length>0&&Object.keys(o).length>0){let c=d.filter(r=>{var h;return((h=r.latestDocument)==null?void 0:h.imei)===o.imei});P(c)}},[o]),s.useEffect(()=>{if(u&&j&&C){G.current&&G.current.setMap(null);const c=new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:u,center:j,radius:C,draggable:!0,editable:!0});c.addListener("center_changed",()=>{}),c.addListener("radius_changed",()=>{p(c.getRadius())}),c.addListener("dragend",()=>{L(c.getCenter().toJSON())}),G.current=c}},[u,j,C]),s.useEffect(()=>{u&&b&&u.fitBounds(b)},[u,b]);const T=async()=>{var c,r,h,N,ae,re,le,ce,de,xe,ue,pe,he,fe;if(Object.keys(o).length>0)try{const x=await Ee.get(`${Lt}/api/get/geofance/${o==null?void 0:o.imei}`);if(x.data.geofenceData.lat)L({lat:(r=(c=x==null?void 0:x.data)==null?void 0:c.geofenceData)==null?void 0:r.lat,lng:(N=(h=x==null?void 0:x.data)==null?void 0:h.geofenceData)==null?void 0:N.long}),p((re=(ae=x==null?void 0:x.data)==null?void 0:ae.geofenceData)==null?void 0:re.radius),A((ce=(le=x==null?void 0:x.data)==null?void 0:le.geofenceData)==null?void 0:ce.isActive_Geofance),F(((xe=(de=x==null?void 0:x.data)==null?void 0:de.geofenceData)==null?void 0:xe.type)==="inward"),R((pe=(ue=x==null?void 0:x.data)==null?void 0:ue.geofenceData)==null?void 0:pe.isActive_Speed),B((fe=(he=x==null?void 0:x.data)==null?void 0:he.geofenceData)==null?void 0:fe.speed);else return W.success("No Geofence For Selected Vehicle",{id:"getting geofence"})}catch(x){console.log(x,"error while getting geofence"),W.error("Error while getting geofence",{id:"getting geofence"})}},D=c=>{m(c)},J=()=>{if(Object.keys(o).length>0){const c={imei:o.imei,area_type:"circular",type:E?"inward":"outward",lat:j.lat,long:j.lng,radius:C,isActive_Geofance:k,isActive_Speed:!!S,speed:S?M:5};_(Ie({data:c})),W.success("Successful Saved",{id:"geofence"})}else W.error("Please Select Vehicle",{id:"geofence"})},K=()=>{L(G.current.getCenter().toJSON()),p(G.current.getRadius())};if(a)return"Error loading maps";if(!i)return"Loading maps";const H={width:"100%",height:"92vh"};return e.jsxs(n,{sx:{display:"flex",flexDirection:"row"},children:[e.jsx(We,{ref:v,mapContainerStyle:H,zoom:15,center:j,onLoad:D,children:I&&I.length>0&&I.map((c,r)=>e.jsx(Ue,{position:{lat:c.latestDocument.lat,lng:c.latestDocument.lng},icon:{path:je.path1+je.path2,fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},r))}),t&&!l&&!g&&j&&e.jsx(n,{sx:{width:O?"25%":"20%"},children:e.jsxs(n,{sx:{display:"flex",padding:"15px",flexDirection:"column",gap:"10px"},children:[e.jsx(f,{sx:{fontWeight:"bold",fontSize:"16px"},children:"Geofence Setting"}),e.jsx(f,{sx:{color:"#686868"},children:"Centered At "}),e.jsxs(f,{sx:{color:"#686868"},children:["Lat: ",j.lat.toFixed(2)]}),e.jsxs(f,{sx:{color:"#686868"},children:["Lng: ",j.lng.toFixed(2)]}),e.jsxs(f,{sx:{color:"#686868",border:"1px solid #686868",borderRadius:"4px",padding:"8px"},children:["Radius ( ",(C/1e3).toFixed(2)," in km)"]}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(f,{variant:"body1",component:"b",children:"Inactive"}),e.jsx(U,{defaultChecked:k,onChange:()=>{A(!k)},color:"primary",inputProps:{"aria-label":"toggle active state"}}),e.jsx(f,{variant:"body1",component:"b",children:"Active"})]}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(f,{variant:"body1",component:"b",children:"Inward"}),e.jsx(U,{checked:E,onChange:()=>{F(!E)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),e.jsx(f,{variant:"body1",component:"b",children:"Outward"})]}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(U,{checked:S,onChange:()=>{R(!S)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),e.jsx(f,{variant:"body1",component:"b",children:"Speed Limit"})]}),S&&e.jsx(n,{sx:{},children:e.jsx(Ke,{sx:{width:"100%",border:"none","&:focus":{outline:"none"}},value:M,placeholder:"Enter Speed Limit",type:"number",onChange:c=>{const r=Math.max(0,parseInt(c.target.value));B(r)}})}),e.jsx(Y,{variant:"outlined",size:"small",sx:{color:"white",backgroundColor:V.bgColor,mt:"6px",mx:"5px",border:"1px solid white",height:"40px",width:"100%","&:hover":{color:"black",background:V.bgShadow,border:"1px solid black"},letterSpacing:"1.5px",fontSize:"16px"},onClick:()=>{K(),J()},children:"SUBMIT"})]})})]})},je={path1:"M19.5 12c.93 0 1.78.28 2.5.76V8c0-1.1-.9-2-2-2h-6.29l-1.06-1.06 1.41-1.41-.71-.71-3.53 3.53.71.71 1.41-1.41L13 6.71V9c0 1.1-.9 2-2 2h-.54c.95 1.06 1.54 2.46 1.54 4 0 .34-.04.67-.09 1h3.14c.25-2.25 2.14-4 4.45-4z",path2:"M19.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5zm0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM4 9h5c0-1.1-.9-2-2-2H4c-.55 0-1 .45-1 1s.45 1 1 1zm5.83 4.82-.18-.47.93-.35c-.46-1.06-1.28-1.91-2.31-2.43l-.4.89-.46-.21.4-.9C7.26 10.13 6.64 10 6 10c-.53 0-1.04.11-1.52.26l.34.91-.47.18-.35-.93c-1.06.46-1.91 1.28-2.43 2.31l.89.40-.21.46-.9-.40C1.13 13.74 1 14.36 1 15c0 .53.11 1.04.26 1.52l.91-.34.18.47-.93.35c.46 1.06 1.28 1.91 2.31 2.43l.40-.89.46.21-.40.90c.55.22 1.17.35 1.81.35.53 0 1.04-.11 1.52-.26l-.34-.91.47-.18.35.93c1.06-.46 1.91-1.28 2.43-2.31l-.89-.40.21-.46.90.40c.22-.55.35-1.17.35-1.81 0-.53-.11-1.04-.26-1.52l-.91.34zm-2.68 3.95c-1.53.63-3.29-.09-3.92-1.62-.63-1.53.09-3.29 1.62-3.92 1.53-.63 3.29.09 3.92 1.62.64 1.53-.09 3.29-1.62 3.92z"},Pt=({showMap:t,setShowMap:l,showGfBar:i,showGfAlert:a})=>{const{selectedVehicle:o}=z(d=>d.liveMap);return e.jsx(e.Fragment,{children:t?e.jsx(Nt,{showGfBar:i,showGfAlert:a}):e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",background:V.bgShadow,margin:"10px",padding:"10px",borderRadius:"8px"},children:[e.jsxs(n,{sx:{},children:[e.jsx(f,{sx:{fontWeight:"bold",fontSize:"16px",margin:"4px"},children:"Vehicle Settings"}),e.jsxs(n,{sx:{display:"flex"},children:[e.jsx(n,{children:e.jsx("img",{src:kt,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}})}),e.jsxs(n,{children:[e.jsx(f,{sx:{fontWeight:"bold"},children:Object.keys(o).length>0?o==null?void 0:o.reg_id:"Reg No"}),e.jsx(f,{sx:{marginBottom:"5px"},children:"Chassis No"}),e.jsxs(n,{sx:{width:"200px",display:"flex",gap:"8px"},children:[e.jsx(ve,{placeholder:"ONLINE"}),e.jsx(ve,{placeholder:"RUNNING"})]}),e.jsx(n,{sx:{marginLeft:"-8px"},children:e.jsxs(f,{children:[e.jsx(U,{})," ",e.jsx("b",{children:"Switched ON / OFF"})]})})]})]})]}),e.jsxs(n,{onClick:()=>{l(!t)},sx:{cursor:"pointer",marginTop:"50px"},children:[e.jsx("img",{src:zt,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}}),e.jsx(f,{sx:{fontSize:"12px"},children:"Set Geofence"})]})]})})};function Qt(){const{w_customer_id:t}=z(p=>p.auth),{vehicleSideBar:l}=z(p=>p.geofence),{collapsed:i}=z(p=>p.auth),[a,o]=s.useState([]);s.useState([]);const[d,w]=s.useState({user:!0,vehicle:!1}),[g,O]=s.useState(!1),[v,u]=s.useState(!1),[m,b]=s.useState(!1);let y=Z();s.useEffect(()=>{C()},[]);const C=async()=>{let p=[],I=[];(await y(Re({w_customer_id:t}))).payload.map(E=>{p.push({id:E.id,label:E.registration_id,value:E.imei[0].mac_id}),I.push(E.imei[0].mac_id)});const k="one",A=I;I.length>0&&y(ke({type:k,imei:A})),o(p)};return e.jsxs("div",{className:"app",children:[e.jsx(Te,{}),e.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[e.jsx(At,{title:"Settings",setShowContent:w,showContent:d,showMap:g,setShowMap:O,showGfBar:v,setShowGfBar:u,showGfAlert:m,setShowGfAlert:b}),e.jsxs(n,{style:{display:"flex",width:"100%",height:"95vh"},children:[e.jsx(n,{style:{width:l?"80%":"100%"},children:d.user?e.jsx(Rt,{}):e.jsx(Pt,{showMap:g,setShowMap:O,showGfBar:v,showGfAlert:m})}),!m&&!v&&l&&e.jsx(n,{style:{width:"20%"},children:e.jsx(Xe,{vehicleData:a,title:"Setting"})}),m&&!v&&!l&&e.jsx(n,{sx:{width:i?"25%":"20%"},children:e.jsx(Et,{})})]})]})]})}export{Qt as default};
