import{a as x,r as D,u as E,j as r,P as M,t as n,_ as b,b as A,Q as N,S as O,aN as y}from"./index-Uxemgeu3.js";import{d as R,t as Q}from"./Search-o9IUHTp_.js";import{B as i,C as W}from"./CircularProgress-BuxYFXUp.js";import{F as Y,I as $,O as q,a as z}from"./OutlinedInput-D9_-qGD9.js";import{I as G}from"./IconButton-rawcyO33.js";const Z=({vehicleData:d,title:f,setParameterData:j})=>{const{selectedVehicle:c,locationData:a,loading:v}=x(e=>e.liveMap),{mode:w}=x(e=>e.dashboard),o=Q(w),[_,C]=D.useState("");let s=E();const h=d.length>0&&d.filter(e=>e.label.toLowerCase().includes(_.toLowerCase())),S=async e=>{var g,m;if((a==null?void 0:a.length)<=0)return b.error("Data not available for this vehicle",{id:"clipboard"});const t=a==null?void 0:a.filter(l=>l.latestDocument.imei===e.value);if((t==null?void 0:t.length)<=0)return b.error("Data not available for this vehicle",{id:"clipboard"});const{lat:L,lng:B}=((g=t==null?void 0:t[0])==null?void 0:g.latestDocument)??{},F={lat:L||y.lat,lng:B||y.lat};s(A(F)),s(N({imei:e.value,reg_id:e.label}));const T=e.label,P=await s(O({w_registration_id:T})),p=[];let V=0;(m=P.payload)==null||m.map(l=>{l[l.parameter_type.toLowerCase()+"_parameter"].forEach(u=>{p.push({reg_id:e.label,imei:e.value,id:u.id,_id:l.id,key:V++,label:l.parameter_type==="Telematic"&&u.short_name})})}),f==="Live Map"&&j(p)},k=e=>{C(e.target.value)},I={backgroundColor:o.grey[100],position:"relative",width:"100%",float:"right",height:"90vh",overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin"};return r.jsx(r.Fragment,{children:r.jsx("div",{style:I,children:v?r.jsx(i,{sx:{display:"flex",justifyContent:"center",marginTop:"50%"},children:r.jsx(W,{})}):r.jsxs(r.Fragment,{children:[r.jsx(i,{sx:{align:"center",my:"15px",ml:"20px"},children:r.jsxs(Y,{sx:{width:"90%",backgroundColor:o.grey[500],borderRadius:"5px"},variant:"outlined",children:[r.jsx($,{htmlFor:"outlined-adornment-password",style:{marginTop:"-8px",color:o.grey[400]},children:"Search"}),r.jsx(q,{onChange:e=>k(e),inputProps:{style:{padding:7,color:o.grey[400]}},id:"outlined-adornment-password",type:"text",endAdornment:r.jsx(z,{position:"end",children:r.jsx(G,{"aria-label":"toggle password visibility",edge:"end",children:r.jsx(R,{style:{color:o.grey[400]}})})}),label:"Search"})]})}),h.length>0&&h.map((e,t)=>r.jsx(i,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsx(M,{variant:"outlined",onClick:()=>{S(e)},sx:{width:"90%",bgcolor:e.label===c.reg_id?n.bgColor:"undefined",color:e.label===c.reg_id?"white":o.grey[400],border:`1px solid ${n.bgColor}`,"&:hover":{color:"black",border:"1px solid black",bgcolor:n.bgShadow}},children:e.label})},t))]})})})};export{Z as V};
