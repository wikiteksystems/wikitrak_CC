import{a as B,r as y,u as E,_ as F,R as O,j as o,O as T,t as l}from"./index-D-FDkSDy.js";import{d as A}from"./Search-BJSieG0V.js";import{B as f}from"./CircularProgress-C3vNCpCt.js";import{F as N,I as R,O as V,a as z}from"./theme-l95ipxI8.js";import{I as M}from"./IconButton-B0zRfXUT.js";const K=({handleParameterChange:j,parametersData:a,setParameterData:v})=>{const{selectedParameterList:i,selectedVehicle:s,loading:$}=B(r=>r.liveMap),[w,k]=y.useState(""),C=E();y.useEffect(()=>{Object.keys(s).length>0?I(s.reg_id):F.error("Please select a vehicle",{id:"clipboard"})},[a]);const n=a&&a.length>0&&a.filter(r=>r.label.toLowerCase().includes(w.toLowerCase())),S=r=>{k(r.target.value)},I=async r=>{var h;const c=await C(O({w_registration_id:r})),p=[];let P=0;(h=c.payload)==null||h.map(e=>{e[e.parameter_type.toLowerCase()+"_parameter"].forEach(t=>{var u,_,x,m,b;const g=e.parameter_type==="Telematic"?t.short_name:e.parameter_type==="IVN"?t.pid_description:t.spn;p.push({reg_id:s.reg_id,imei:s.imei,id:t.id,_id:e.id,key:P++,label:g,param_type:e.parameter_type,param_header:(u=t==null?void 0:t.header)==null?void 0:u.device_header,unit:t==null?void 0:t.unit,param_id:e.id,vehicle_reg:(_=e==null?void 0:e.vehicle)==null?void 0:_.vin,param_group_id:(x=e.parameter_group[0])==null?void 0:x.id,param_group_name:(m=e.parameter_group[0])==null?void 0:m.group_name,param_group_color:(b=e.parameter_group[0])==null?void 0:b.color,checked:i[0].params.length>0&&i[0].params.some(L=>L.label===g)})})}),v(p)};return o.jsx(o.Fragment,{children:o.jsxs("div",{style:{backgroundColor:"white",position:"relative",height:"95vh"},children:[o.jsx(f,{sx:{align:"center",my:"15px",ml:"20px"},children:o.jsxs(N,{sx:{width:"90%"},variant:"outlined",children:[o.jsx(R,{htmlFor:"outlined-adornment-password",style:{marginTop:"-9px"},children:"Search"}),o.jsx(V,{onChange:S,inputProps:{style:{padding:7}},id:"outlined-adornment-password",type:"text",endAdornment:o.jsx(z,{position:"end",children:o.jsx(M,{"aria-label":"toggle password visibility",edge:"end",children:o.jsx(A,{})})}),label:"Search"})]})}),n&&n.length>0&&n.map((r,d)=>o.jsx(f,{sx:{align:"center",my:"6px",ml:"20px"},children:o.jsx(T,{variant:"outlined",sx:{width:"90%",bgcolor:r.checked?l.bgColor:"undefined",color:r.checked?"white":"black",border:`1px solid ${l.bgColor}`,fontSize:"12px","&:hover":{color:"black",border:"1px solid black",bgcolor:l.bgShadow}},onClick:c=>{j(r)},children:r.label})},d))]})})};export{K as P};
