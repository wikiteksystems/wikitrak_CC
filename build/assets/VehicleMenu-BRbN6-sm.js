import{a as x,r as T,u as B,j as r,P,t as s,_ as b,b as V,Q as E,S as M}from"./index-BqNi_OjF.js";import{d as A,t as O}from"./Search-CqfflqOy.js";import{B as n,C as R}from"./CircularProgress-BZodcYKn.js";import{F as N,I as Q,O as $,a as q}from"./OutlinedInput-7lk16080.js";import{I as z}from"./IconButton-BxZzzknn.js";const X=({vehicleData:i,title:d,setParameterData:y})=>{const{selectedVehicle:c,locationData:p,loading:f}=x(e=>e.liveMap),{mode:j}=x(e=>e.dashboard),t=O(j),[C,_]=T.useState("");let l=B();const h=i.length>0&&i.filter(e=>e.label.toLowerCase().includes(C.toLowerCase())),v=async e=>{var m;if(p.length<=0)return b.error("Data not available for this vehicle",{id:"clipboard"});const o=p.filter(a=>a.latestDocument.imei===e.value);if(o.length<=0)return b.error("Data not available for this vehicle",{id:"clipboard"});const{lat:k,lng:D}=o[0].latestDocument;l(V({lat:k,lng:D})),l(E({imei:e.value,reg_id:e.label}));const I=e.label,F=await l(M({w_registration_id:I})),g=[];let L=0;(m=F.payload)==null||m.map(a=>{a[a.parameter_type.toLowerCase()+"_parameter"].forEach(u=>{g.push({reg_id:e.label,imei:e.value,id:u.id,_id:a.id,key:L++,label:a.parameter_type==="Telematic"&&u.short_name})})}),d==="Live Map"&&y(g)},w=e=>{_(e.target.value)},S={backgroundColor:t.grey[100],position:"relative",width:"100%",float:"right",height:d?"90vh":"95vh"};return r.jsx(r.Fragment,{children:r.jsx("div",{style:S,children:f?r.jsx(n,{sx:{display:"flex",justifyContent:"center",marginTop:"50%"},children:r.jsx(R,{})}):r.jsxs(r.Fragment,{children:[r.jsx(n,{sx:{align:"center",my:"15px",ml:"20px"},children:r.jsxs(N,{sx:{width:"90%",backgroundColor:t.grey[500],borderRadius:"5px"},variant:"outlined",children:[r.jsx(Q,{htmlFor:"outlined-adornment-password",style:{marginTop:"-8px",color:t.grey[400]},children:"Search"}),r.jsx($,{onChange:e=>w(e),inputProps:{style:{padding:7,color:t.grey[400]}},id:"outlined-adornment-password",type:"text",endAdornment:r.jsx(q,{position:"end",children:r.jsx(z,{"aria-label":"toggle password visibility",edge:"end",children:r.jsx(A,{style:{color:t.grey[400]}})})}),label:"Search"})]})}),h.length>0&&h.map((e,o)=>r.jsx(n,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsx(P,{variant:"outlined",onClick:()=>{v(e)},sx:{width:"90%",bgcolor:e.label===c.reg_id?s.bgColor:"undefined",color:e.label===c.reg_id?"white":t.grey[400],border:`1px solid ${s.bgColor}`,"&:hover":{color:"black",border:"1px solid black",bgcolor:s.bgShadow}},children:e.label})},o))]})})})};export{X as V};
