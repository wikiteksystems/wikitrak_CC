import{r as n,q as on,i as sn,j as t,a as k,u as ge,t as q,O as J,T as D,ao as de,$ as En,h as kn,ap as Rn,_ as Z,aq as Y,ar as In,k as Ln,l as Fn}from"./index-BzV_zUQW.js";import{A as ln,C as pe,ap as Pn,e as fe,a5 as en,o as Nn,h as rn,a2 as _n,N as zn,f as tn,d as Gn,a as Tn,ac as Bn,b as Mn,c as Vn,L as Wn}from"./LightModeOutlined-BioNP8gg.js";import{r as cn}from"./createSvgIcon-CPsng49f.js";import{d as Xn,G as Jn}from"./GeofencAlert-CaRKClJL.js";import{j as Un,V as Kn}from"./VehicleMenu-D-_xRA_m.js";import{B as r}from"./CircularProgress-woJxG7UZ.js";import{I as Qn}from"./IconButton-ZxMV7Jyu.js";import{C as qn}from"./Form-BifPil0S.js";import{t as he}from"./theme-CRjQBU0N.js";import{u as Yn,G as Hn,C as Zn,R as $n,b as nn,M as ea}from"./esm-BERO0GS8.js";import{S as ie}from"./Switch-DWF3z-Qz.js";import{I as ta}from"./TextField-BU1WxiHb.js";import{u as na,I as xe,T as aa}from"./TextArea-DtBV0upR.js";import{B as oa,S as sa}from"./button-CFoUml1W.js";import"./Search-D564Q4l9.js";import"./mergeSlotProps-DfZ227cB.js";import"./Paper-BZz2lZ3w.js";var ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const la=ia;var ra=function(d,i){return n.createElement(ln,on({},d,{ref:i,icon:la}))},ca=n.forwardRef(ra);const da=ca;var ga={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const pa=ga;var fa=function(d,i){return n.createElement(ln,on({},d,{ref:i,icon:pa}))},ha=n.forwardRef(fa);const xa=ha,ua=a=>{const{getPrefixCls:d,direction:i}=n.useContext(pe),{prefixCls:l,className:s}=a,f=d("input-group",l),x=d("input"),[u,z]=Pn(x),R=fe(f,{[`${f}-lg`]:a.size==="large",[`${f}-sm`]:a.size==="small",[`${f}-compact`]:a.compact,[`${f}-rtl`]:i==="rtl"},z,s),b=n.useContext(en),A=n.useMemo(()=>Object.assign(Object.assign({},b),{isFormItemInput:!1}),[b]);return u(n.createElement("span",{className:R,style:a.style,onMouseEnter:a.onMouseEnter,onMouseLeave:a.onMouseLeave,onFocus:a.onFocus,onBlur:a.onBlur},n.createElement(en.Provider,{value:A},a.children)))},ma=ua;var ya=function(a,d){var i={};for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&d.indexOf(l)<0&&(i[l]=a[l]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(a);s<l.length;s++)d.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(a,l[s])&&(i[l[s]]=a[l[s]]);return i};const ja=a=>a?n.createElement(xa,null):n.createElement(da,null),ba={click:"onClick",hover:"onMouseOver"},va=n.forwardRef((a,d)=>{const{visibilityToggle:i=!0}=a,l=typeof i=="object"&&i.visible!==void 0,[s,f]=n.useState(()=>l?i.visible:!1),x=n.useRef(null);n.useEffect(()=>{l&&f(i.visible)},[l,i]);const u=na(x),z=()=>{const{disabled:N}=a;N||(s&&u(),f(h=>{var E;const S=!h;return typeof i=="object"&&((E=i.onVisibleChange)===null||E===void 0||E.call(i,S)),S}))},R=N=>{const{action:h="click",iconRender:E=ja}=a,S=ba[h]||"",G=E(s),g={[S]:z,className:`${N}-icon`,key:"passwordIcon",onMouseDown:B=>{B.preventDefault()},onMouseUp:B=>{B.preventDefault()}};return n.cloneElement(n.isValidElement(G)?G:n.createElement("span",null,G),g)},{className:b,prefixCls:A,inputPrefixCls:F,size:m}=a,I=ya(a,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:M}=n.useContext(pe),C=M("input",F),j=M("input-password",A),P=i&&R(j),T=fe(j,b,{[`${j}-${m}`]:!!m}),L=Object.assign(Object.assign({},Nn(I,["suffix","iconRender","visibilityToggle"])),{type:s?"text":"password",className:T,prefixCls:C,suffix:P});return m&&(L.size=m),n.createElement(xe,Object.assign({ref:rn(d,x)},L))}),Ca=va;var Sa=function(a,d){var i={};for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&d.indexOf(l)<0&&(i[l]=a[l]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(a);s<l.length;s++)d.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(a,l[s])&&(i[l[s]]=a[l[s]]);return i};const wa=n.forwardRef((a,d)=>{const{prefixCls:i,inputPrefixCls:l,className:s,size:f,suffix:x,enterButton:u=!1,addonAfter:z,loading:R,disabled:b,onSearch:A,onChange:F,onCompositionStart:m,onCompositionEnd:I}=a,M=Sa(a,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:C,direction:j}=n.useContext(pe),P=n.useRef(!1),T=C("input-search",i),L=C("input",l),{compactSize:N}=_n(T,j),h=zn(c=>{var v;return(v=f??N)!==null&&v!==void 0?v:c}),E=n.useRef(null),S=c=>{c&&c.target&&c.type==="click"&&A&&A(c.target.value,c,{source:"clear"}),F&&F(c)},G=c=>{var v;document.activeElement===((v=E.current)===null||v===void 0?void 0:v.input)&&c.preventDefault()},g=c=>{var v,V;A&&A((V=(v=E.current)===null||v===void 0?void 0:v.input)===null||V===void 0?void 0:V.value,c,{source:"input"})},B=c=>{P.current||R||g(c)},Q=typeof u=="boolean"?n.createElement(sa,null):null,U=`${T}-button`;let p;const _=u||{},O=_.type&&_.type.__ANT_BUTTON===!0;O||_.type==="button"?p=tn(_,Object.assign({onMouseDown:G,onClick:c=>{var v,V;(V=(v=_==null?void 0:_.props)===null||v===void 0?void 0:v.onClick)===null||V===void 0||V.call(v,c),g(c)},key:"enterButton"},O?{className:U,size:h}:{})):p=n.createElement(oa,{className:U,type:u?"primary":void 0,size:h,disabled:b,key:"enterButton",onMouseDown:G,onClick:g,loading:R,icon:Q},u),z&&(p=[p,tn(z,{key:"addonAfter"})]);const le=fe(T,{[`${T}-rtl`]:j==="rtl",[`${T}-${h}`]:!!h,[`${T}-with-button`]:!!u},s),ee=c=>{P.current=!0,m==null||m(c)},te=c=>{P.current=!1,I==null||I(c)};return n.createElement(xe,Object.assign({ref:rn(E,d),onPressEnter:B},M,{size:h,onCompositionStart:ee,onCompositionEnd:te,prefixCls:L,addonAfter:p,suffix:x,onChange:S,className:le,disabled:b}))}),Aa=wa,$=xe;$.Group=ma;$.Search=Aa;$.TextArea=aa;$.Password=Ca;const an=$;var ue={},Oa=sn;Object.defineProperty(ue,"__esModule",{value:!0});var dn=ue.default=void 0,Da=Oa(cn()),Ea=t;dn=ue.default=(0,Da.default)((0,Ea.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var me={},ka=sn;Object.defineProperty(me,"__esModule",{value:!0});var gn=me.default=void 0,Ra=ka(cn()),Ia=t;gn=me.default=(0,Ra.default)((0,Ia.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Place");const La=({title:a,setShowContent:d,showContent:i,showMap:l,setShowMap:s,setShowGfBar:f,showGfBar:x,setShowGfAlert:u,showGfAlert:z})=>{const{collapsed:R}=k(C=>C.auth),{selectedVehicle:b}=k(C=>C.liveMap),{vehicleSideBar:A}=k(C=>C.geofence);n.useState(!1);const{mode:F}=k(C=>C.dashboard);JSON.parse(localStorage.getItem("w_userDetails"));const m=ge(),I=()=>{m(kn(!R))},M=()=>{d({...i,vehicle:!i.vehicle}),f(!1),u(!1),m(de({data:!A}))};return t.jsxs(r,{display:"flex",justifyContent:"space-between",p:1,sx:{bgcolor:q.bgColor,border:"1px solid white",borderRadius:"4px",height:"55px"},children:[t.jsxs(r,{style:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"center"},children:[R?t.jsx(J,{onClick:I,sx:{color:"white"},children:t.jsx(Gn,{style:{width:"30px",height:"30px"}})}):t.jsx(J,{onClick:I,sx:{color:"white"},children:t.jsx(Tn,{style:{width:"30px",height:"30px"}})}),t.jsx(r,{children:t.jsx("img",{src:`${Bn}`,style:{width:"36px",height:"36px"}})}),t.jsx(D,{style:{fontSize:"20px",fontFamily:"ubuntu",fontWeight:"500",color:"#FFFFFF"},children:"WIKITRACK"})]}),t.jsx(r,{children:t.jsx(D,{variant:"h6",color:"white",fontWeight:"bold",sx:{ml:"15px",mt:"15px"},children:Object.keys(b).length>0&&l?`${a} - Geofence (${b.reg_id})`:t.jsxs(t.Fragment,{children:[a," ",Object.keys(b).length>0&&b.reg_id]})})}),t.jsxs(r,{sx:{display:"flex"},children:[t.jsxs(J,{variant:"outlined",size:"small",sx:{color:i.vehicle?"white":"black",backgroundColor:i.vehicle?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:M,children:[t.jsx("img",{src:Un,style:{marginRight:"5px"}}),Object.keys(b).length>0?b.reg_id:"Vehicles"]}),l&&t.jsx(r,{children:t.jsx(J,{variant:"outlined",size:"small",sx:{color:x?"white":"black",backgroundColor:x?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:()=>{u(!1),f(!x),m(de({data:!1}))},children:"Geofence"})}),t.jsx(r,{sx:{color:"white",mr:"10px"},children:t.jsxs(r,{sx:{display:"flex",marginTop:"14px",gap:"10px"},children:[t.jsx(r,{onClick:()=>{f(!1),u(!z),m(de({data:!1}))},children:t.jsx(Xn,{sx:{cursor:"pointer",width:"30px",height:"30px"}})}),t.jsx(r,{onClick:()=>{d({...i,user:!i.user}),s(!1)},children:i.user?t.jsx(gn,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}}):t.jsx(dn,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}})})]})}),t.jsx(Qn,{onClick:()=>{m(En(!F))},sx:{color:"white"},children:F?t.jsx(Mn,{}):t.jsx(Vn,{})})]})]})},Fa=La,Pa=()=>{const a=JSON.parse(localStorage.getItem("w_userDetails")),{mode:d}=k(l=>l.dashboard),i=he(d);return t.jsxs(r,{children:[t.jsxs(r,{sx:{backgroundColor:i.grey[200],m:"10px",borderRadius:"5px",height:"150px"},children:[t.jsx(r,{sx:{pl:"20px",pt:"10px",mb:"10px",color:`${i.grey[400]}`},children:t.jsx("b",{children:"User Settings"})}),t.jsxs(r,{sx:{display:"flex"},children:[t.jsx(r,{sx:{ml:"23px",mt:"11px",height:"70px",width:"70px",backgroundColor:"white",borderRadius:"50%"}}),t.jsxs(r,{sx:{height:"80px",width:"200px",display:"flex",justifyContent:"center",flexDirection:"column",mx:"20px",color:i.grey[400]},children:[t.jsx(r,{children:t.jsxs("b",{children:[" ",a&&a.first_name," ",a.last_name]})}),t.jsx(r,{children:a&&a.role})]})]})]}),t.jsx(r,{sx:{marginTop:"9%",alignContent:"center",textAlign:"center"},children:t.jsx(qn,{})})]})},Na=Pa,_a="/assets/tractorIcon-zWRQE9nW.jpg",za="data:image/png;base64,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",Ga="http://139.59.37.47:3031",Ta=({showGfBar:a,showGfAlert:d})=>{const{isLoaded:i,loadError:l}=Yn({googleMapsApiKey:"AIzaSyA_S7GfAh6rJYWQ5X4n4X-3poo3vymuspU"}),{selectedVehicle:s,locationData:f,tractorIcon:x}=k(o=>o.liveMap),{geofence:u,vehicleSideBar:z}=k(o=>o.geofence),{mode:R,styles:b}=k(o=>o.dashboard),{collapsed:A}=k(o=>o.auth),[F,m]=n.useState(null),[I,M]=n.useState(null),[C,j]=n.useState(1e3),[P,T]=n.useState([]),[L,N]=n.useState(!0),[h,E]=n.useState(!1),[S,G]=n.useState(!1),[g,B]=n.useState({lat:18.516726,lng:73.856255}),[Q,U]=n.useState(50),[p,_]=n.useState("circular"),[O,le]=n.useState([]),[ee,te]=n.useState({north:g.lat+.01,south:g.lat-.01,east:g.lng+.01,west:g.lng-.01}),[c,v]=n.useState([{lat:g.lat+.01,lng:g.lng},{lat:g.lat-.01,lng:g.lng-.01},{lat:g.lat-.01,lng:g.lng+.01}]),[V,ye]=n.useState([{lat:g.lat+.01,lng:g.lng},{lat:g.lat-.01,lng:g.lng-.01},{lat:g.lat-.01,lng:g.lng+.01}]),pn=n.useRef(null),ne=n.useRef(null),re=n.useRef(!1),ae=n.useRef(null),oe=n.useRef(null);let fn=ge();n.useEffect(()=>{console.log(O,"rectangleVertices")},[O]),n.useEffect(()=>{hn()},[s]),n.useEffect(()=>{if(f.length>0&&Object.keys(s).length>0){let o=f.filter(y=>{var w;return((w=y.latestDocument)==null?void 0:w.imei)===s.imei});T(o)}},[s]),n.useEffect(()=>{F&&I&&F.fitBounds(I)},[F,I]);const hn=async()=>{var o,y,w,W,X,H,K,be,ve,Ce,Se,we,Ae,Oe,De,Ee,ke,Re,Ie,Le,Fe,Pe,Ne,_e,ze,Ge,Te,Be,Me,Ve,We,Xe,Je,Ue,Ke,Qe,qe,Ye,He,Ze,$e,et,tt,nt,at,ot,st,it,lt,rt,ct,dt,gt,pt,ft,ht,xt,ut,mt,yt,jt,bt,vt,Ct,St,wt,At,Ot,Dt,Et,kt,Rt,It,Lt,Ft,Pt,Nt,_t,zt,Gt,Tt,Bt,Mt,Vt,Wt,Xt,Jt,Ut,Kt,Qt,qt,Yt,Ht,Zt,$t;if(Object.keys(s).length>0)try{const e=await Rn.get(`${Ga}/api/get/geofance/${s==null?void 0:s.imei}`);if(console.log(e.data.geofenceData,"result"),((y=(o=e==null?void 0:e.data)==null?void 0:o.geofenceData)==null?void 0:y.area_type)==="circular")if(_("circular"),(W=(w=e==null?void 0:e.data)==null?void 0:w.geofenceData)!=null&&W.lat)B({lat:(H=(X=e==null?void 0:e.data)==null?void 0:X.geofenceData)==null?void 0:H.lat,lng:(be=(K=e==null?void 0:e.data)==null?void 0:K.geofenceData)==null?void 0:be.long}),j((Ce=(ve=e==null?void 0:e.data)==null?void 0:ve.geofenceData)==null?void 0:Ce.radius),N((we=(Se=e==null?void 0:e.data)==null?void 0:Se.geofenceData)==null?void 0:we.isActive_Geofance),E(((Oe=(Ae=e==null?void 0:e.data)==null?void 0:Ae.geofenceData)==null?void 0:Oe.type)==="inward"),G((Ee=(De=e==null?void 0:e.data)==null?void 0:De.geofenceData)==null?void 0:Ee.isActive_Speed),U((Re=(ke=e==null?void 0:e.data)==null?void 0:ke.geofenceData)==null?void 0:Re.speed);else return Z.success("No Geofence For Selected Vehicle",{id:"getting geofence"});else((Le=(Ie=e==null?void 0:e.data)==null?void 0:Ie.geofenceData)==null?void 0:Le.area_type)==="triangle"?(_("triangle"),console.log("get for triangle",(Fe=e==null?void 0:e.data)==null?void 0:Fe.geofenceData),v([{lat:(_e=(Ne=(Pe=e==null?void 0:e.data)==null?void 0:Pe.geofenceData)==null?void 0:Ne.triangle_points[0])==null?void 0:_e.lat,lng:(Te=(Ge=(ze=e==null?void 0:e.data)==null?void 0:ze.geofenceData)==null?void 0:Ge.triangle_points[0])==null?void 0:Te.long},{lat:(Ve=(Me=(Be=e==null?void 0:e.data)==null?void 0:Be.geofenceData)==null?void 0:Me.triangle_points[1])==null?void 0:Ve.lat,lng:(Je=(Xe=(We=e==null?void 0:e.data)==null?void 0:We.geofenceData)==null?void 0:Xe.triangle_points[1])==null?void 0:Je.long},{lat:(Qe=(Ke=(Ue=e==null?void 0:e.data)==null?void 0:Ue.geofenceData)==null?void 0:Ke.triangle_points[2])==null?void 0:Qe.lat,lng:(He=(Ye=(qe=e==null?void 0:e.data)==null?void 0:qe.geofenceData)==null?void 0:Ye.triangle_points[2])==null?void 0:He.long}]),B({lat:($e=(Ze=e==null?void 0:e.data)==null?void 0:Ze.geofenceData)==null?void 0:$e.lat,lng:(tt=(et=e==null?void 0:e.data)==null?void 0:et.geofenceData)==null?void 0:tt.long}),U((at=(nt=e==null?void 0:e.data)==null?void 0:nt.geofenceData)==null?void 0:at.speed),N((st=(ot=e==null?void 0:e.data)==null?void 0:ot.geofenceData)==null?void 0:st.isActive_Geofance),E(((lt=(it=e==null?void 0:e.data)==null?void 0:it.geofenceData)==null?void 0:lt.type)==="inward"),G((ct=(rt=e==null?void 0:e.data)==null?void 0:rt.geofenceData)==null?void 0:ct.isActive_Speed)):((gt=(dt=e==null?void 0:e.data)==null?void 0:dt.geofenceData)==null?void 0:gt.area_type)==="rectangle"?(_("rectangle"),console.log("get for rectangle",(pt=e==null?void 0:e.data)==null?void 0:pt.geofenceData),te({north:(xt=(ht=(ft=e==null?void 0:e.data)==null?void 0:ft.geofenceData)==null?void 0:ht.rectangle_points[0])==null?void 0:xt.lat,south:(yt=(mt=(ut=e==null?void 0:e.data)==null?void 0:ut.geofenceData)==null?void 0:mt.rectangle_points[1])==null?void 0:yt.lat,east:(vt=(bt=(jt=e==null?void 0:e.data)==null?void 0:jt.geofenceData)==null?void 0:bt.rectangle_points[1])==null?void 0:vt.long,west:(wt=(St=(Ct=e==null?void 0:e.data)==null?void 0:Ct.geofenceData)==null?void 0:St.rectangle_points[0])==null?void 0:wt.long}),B({lat:(Ot=(At=e==null?void 0:e.data)==null?void 0:At.geofenceData)==null?void 0:Ot.lat,lng:(Et=(Dt=e==null?void 0:e.data)==null?void 0:Dt.geofenceData)==null?void 0:Et.long}),U((Rt=(kt=e==null?void 0:e.data)==null?void 0:kt.geofenceData)==null?void 0:Rt.speed),N((Lt=(It=e==null?void 0:e.data)==null?void 0:It.geofenceData)==null?void 0:Lt.isActive_Geofance),E(((Pt=(Ft=e==null?void 0:e.data)==null?void 0:Ft.geofenceData)==null?void 0:Pt.type)==="inward"),G((_t=(Nt=e==null?void 0:e.data)==null?void 0:Nt.geofenceData)==null?void 0:_t.isActive_Speed)):((Gt=(zt=e==null?void 0:e.data)==null?void 0:zt.geofenceData)==null?void 0:Gt.area_type)==="polygon"&&(_("polygon"),console.log("get for polygon",(Tt=e==null?void 0:e.data)==null?void 0:Tt.geofenceData),ye((Mt=(Bt=e==null?void 0:e.data)==null?void 0:Bt.geofenceData)==null?void 0:Mt.polygon_points),U((Wt=(Vt=e==null?void 0:e.data)==null?void 0:Vt.geofenceData)==null?void 0:Wt.speed),N((Jt=(Xt=e==null?void 0:e.data)==null?void 0:Xt.geofenceData)==null?void 0:Jt.isActive_Geofance),E(((Kt=(Ut=e==null?void 0:e.data)==null?void 0:Ut.geofenceData)==null?void 0:Kt.type)==="inward"),B({lat:(qt=(Qt=e==null?void 0:e.data)==null?void 0:Qt.geofenceData)==null?void 0:qt.lat,lng:(Ht=(Yt=e==null?void 0:e.data)==null?void 0:Yt.geofenceData)==null?void 0:Ht.long}),G(($t=(Zt=e==null?void 0:e.data)==null?void 0:Zt.geofenceData)==null?void 0:$t.isActive_Speed))}catch(e){console.log(e,"error while getting geofence"),Z.error("Error while getting geofence",{id:"getting geofence"})}},xn=o=>{m(o)},un=()=>{var o,y,w,W,X,H;if(Object.keys(s).length>0){let K;p==="circular"?K={imei:s.imei,area_type:p,type:h?"inward":"outward",lat:g.lat,long:g.lng,radius:C,isActive_Geofance:L,isActive_Speed:!!S,speed:S?Q:5}:p==="rectangle"?K={imei:s.imei,area_type:p,type:h?"inward":"outward",rectangle_points:[{lat:O==null?void 0:O.north,long:O==null?void 0:O.west},{lat:O==null?void 0:O.south,long:O==null?void 0:O.east}],isActive_Geofance:L,isActive_Speed:!!S,speed:S?Q:50}:p==="triangle"?K={imei:s.imei,area_type:p,type:h?"inward":"outward",triangle_points:[{lat:(o=c[0])==null?void 0:o.lat,long:(y=c[0])==null?void 0:y.lng},{lat:(w=c[1])==null?void 0:w.lat,long:(W=c[1])==null?void 0:W.lng},{lat:(X=c[2])==null?void 0:X.lat,long:(H=c[2])==null?void 0:H.lng}],isActive_Geofance:L,isActive_Speed:!!S,speed:S?Q:50}:p==="polygon"&&(K={imei:s.imei,area_type:p,type:h?"inward":"outward",polygon_points:V,isActive_Geofance:L,isActive_Speed:!!S,speed:S?Q:50}),fn(In({data:K})),Z.success("Successful Saved",{id:"geofence"})}else Z.error("Please Select Vehicle",{id:"geofence"})},se=o=>{console.log("selectedType",o),_(o)},mn=()=>{if(!re.current){re.current=!0;const o=ce.getRadius();console.log("newRadius",o),j(o),re.current=!1}},yn=o=>{console.log("New Center:",o.toJSON()),B(o.toJSON())},jn=()=>{if(ae.current&&ae.current.getBounds){const o=ae.current.getBounds(),y=o.getNorthEast().lat(),w=o.getSouthWest().lat(),W=o.getNorthEast().lng(),X=o.getSouthWest().lng();console.log("{ north, south, east, west }",{north:y,south:w,east:W,west:X}),te({north:y,south:w,east:W,west:X}),le({north:y,south:w,east:W,west:X})}},bn={bounds:ee,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},vn=o=>{ae.current=o},Cn=()=>{if(ne.current&&ne.current.getPath){const y=ne.current.getPath().getArray().map(w=>({lat:w.lat(),lng:w.lng()}));v(y),console.log("newVertices",y)}},Sn={paths:c,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},wn=o=>{ne.current=o},An=()=>{if(oe.current&&oe.current.getPath){const y=oe.current.getPath().getArray().map(w=>({lat:w.lat(),lng:w.lng()}));ye(y),console.log("newVertices",y)}},On=o=>{oe.current=o},je={paths:V,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}};if(l)return"Error loading maps";if(!i)return"Loading maps";const Dn={width:"100%",height:"92vh"};let ce;return t.jsxs(t.Fragment,{children:[t.jsxs(r,{children:[t.jsx(J,{onClick:()=>{se("circular")},style:{background:p==="circular"?q.bgColor:"transparent",color:p==="circular"?"white":Y[400]},children:"Circle"}),t.jsx(J,{onClick:()=>{se("triangle")},style:{background:p==="triangle"?q.bgColor:"transparent",color:p==="triangle"?"white":Y[400]},children:"Triangle"}),t.jsx(J,{onClick:()=>{se("rectangle")},style:{background:p==="rectangle"?q.bgColor:"transparent",color:p==="rectangle"?"white":Y[400]},children:"Rectangle"}),t.jsx(J,{onClick:()=>{se("polygon")},style:{background:p==="polygon"?q.bgColor:"transparent",color:p==="polygon"?"white":Y[400]},children:"Polygon"})]}),t.jsxs(r,{sx:{display:"flex",flexDirection:"row"},children:[t.jsxs(Hn,{ref:pn,mapContainerStyle:Dn,zoom:15,center:g,onLoad:xn,options:{mapTypeControl:!1,styles:R?b:""},children:[p==="circular"&&t.jsx(Zn,{center:g,radius:C,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0},onLoad:o=>{ce=o,ce.addListener("radius_changed",mn)},onDragEnd:o=>yn(o.latLng)}),p==="rectangle"&&t.jsx($n,{bounds:ee,options:bn.options,onDragEnd:jn,onLoad:vn}),p==="triangle"&&t.jsx(nn,{paths:c,options:Sn.options,onDragEnd:Cn,onLoad:wn}),p==="polygon"&&t.jsx(nn,{paths:je.paths,options:je.options,draggable:!0,editable:!0,onDragEnd:An,onLoad:On}),P&&P.length>0&&P.map((o,y)=>t.jsx(ea,{position:{lat:o.latestDocument.lat,lng:o.latestDocument.lng},icon:{path:x.path1,fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},y))]}),a&&!d&&!z&&g&&t.jsx(r,{sx:{width:A?"25%":"20%"},children:t.jsxs(r,{sx:{display:"flex",padding:"15px",flexDirection:"column",gap:"10px",color:Y[600]},children:[t.jsx(D,{sx:{fontWeight:"bold",fontSize:"16px"},children:"Geofence Setting"}),t.jsxs(D,{sx:{fontWeight:"400",fontSize:"14px",textTransform:"capitalize"},children:["Type: ",p]}),p==="circular"&&t.jsxs(t.Fragment,{children:[t.jsxs(D,{sx:{color:"#686868"},children:["Centered At"," "]}),t.jsxs(D,{sx:{color:"#686868"},children:["Lat: ",g.lat.toFixed(2)]}),t.jsxs(D,{sx:{color:"#686868"},children:["Lng: ",g.lng.toFixed(2)]}),t.jsxs(D,{sx:{color:"#686868",border:"1px solid #686868",borderRadius:"4px",padding:"8px"},children:["Radius ( ",(C/1e3).toFixed(2)," in km)"]})]}),t.jsxs(r,{display:"flex",alignItems:"center",children:[t.jsx(D,{variant:"body1",component:"b",children:L?"Active":"Inactive"}),t.jsx(ie,{defaultChecked:L,onChange:()=>{N(!L)},color:"primary",inputProps:{"aria-label":"toggle active state"}})]}),t.jsxs(r,{display:"flex",alignItems:"center",children:[t.jsx(D,{variant:"body1",component:"b",children:h?"Inward":"Outward"}),t.jsx(ie,{checked:h,onChange:()=>{E(!h)},color:"primary",inputProps:{"aria-label":"toggle direction"}})]}),t.jsxs(r,{display:"flex",alignItems:"center",children:[t.jsx(ie,{checked:S,onChange:()=>{G(!S)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),t.jsx(D,{variant:"body1",component:"b",children:"Speed Limit"})]}),S&&t.jsx(r,{sx:{},children:t.jsx(ta,{sx:{width:"100%",color:Y[600],border:"none","&:focus":{outline:"none"}},value:Q,placeholder:"Enter Speed Limit",type:"number",onChange:o=>{const y=Math.max(0,parseInt(o.target.value));U(y)}})}),t.jsx(J,{disabled:Object.keys(s).length===0&&!1,variant:"outlined",size:"small",sx:{color:"white",backgroundColor:q.bgColor,mt:"6px",mx:"5px",border:"1px solid white",height:"40px",width:"100%","&:hover":{color:"black",background:q.bgShadow,border:"1px solid black"},letterSpacing:"1.5px",fontSize:"16px"},onClick:()=>{if(Object.keys(s).length===0)return Z.error("please select a vehicle.");un()},children:"SUBMIT"})]})})]})]})},Ba=({showMap:a,setShowMap:d,showGfBar:i,showGfAlert:l})=>{const{selectedVehicle:s}=k(u=>u.liveMap),{mode:f}=k(u=>u.dashboard),x=he(f);return t.jsx(t.Fragment,{children:a?t.jsx(Ta,{showGfBar:i,showGfAlert:l}):t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",background:x.grey[200],margin:"10px",padding:"10px",borderRadius:"8px"},children:[t.jsxs(r,{sx:{},children:[t.jsx(D,{sx:{fontWeight:"bold",fontSize:"16px",margin:"4px",color:x.grey[400]},children:"Vehicle Settings"}),t.jsxs(r,{sx:{display:"flex"},children:[t.jsx(r,{children:t.jsx("img",{src:_a,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}})}),t.jsxs(r,{children:[t.jsx(D,{sx:{fontWeight:"bold",color:x.grey[400]},children:Object.keys(s).length>0?s==null?void 0:s.reg_id:"Reg No"}),t.jsx(D,{sx:{marginBottom:"5px",color:x.grey[400]},children:"Chassis No"}),t.jsxs(r,{sx:{width:"200px",display:"flex",gap:"8px"},children:[t.jsx(an,{placeholder:"ONLINE"}),t.jsx(an,{placeholder:"RUNNING"})]}),t.jsx(r,{sx:{marginLeft:"-8px",color:x.grey[400]},children:t.jsxs(D,{children:[t.jsx(ie,{})," ",t.jsx("b",{children:"Switched ON / OFF"})]})})]})]})]}),t.jsxs(r,{onClick:()=>{d(!a)},sx:{cursor:"pointer",marginTop:"50px"},children:[t.jsx("img",{src:za,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}}),t.jsx(D,{sx:{fontSize:"12px",color:x.grey[400]},children:"Set Geofence"})]})]})})};function oo(){const{w_customer_id:a}=k(j=>j.auth),{vehicleSideBar:d}=k(j=>j.geofence),{collapsed:i}=k(j=>j.auth),{mode:l}=k(j=>j.dashboard),s=he(l),[f,x]=n.useState([]);n.useState([]);const[u,z]=n.useState({user:!0,vehicle:!1}),[R,b]=n.useState(!1),[A,F]=n.useState(!1),[m,I]=n.useState(!1);let M=ge();n.useEffect(()=>{C()},[]);const C=async()=>{let j=[],P=[];(await M(Ln({w_customer_id:a}))).payload.map(h=>{j.push({id:h.id,label:h.registration_id,value:h.imei[0].mac_id}),P.push(h.imei[0].mac_id)});const L="one",N=P;P.length>0&&M(Fn({type:L,imei:N})),x(j)};return t.jsxs("div",{className:"app",children:[t.jsx(Wn,{}),t.jsxs("main",{className:"content",style:{width:"100%",background:s.grey[100]},children:[t.jsx(Fa,{title:"Settings",setShowContent:z,showContent:u,showMap:R,setShowMap:b,showGfBar:A,setShowGfBar:F,showGfAlert:m,setShowGfAlert:I}),t.jsxs(r,{style:{display:"flex",width:"100%",height:"95vh"},children:[t.jsx(r,{style:{width:d?"80%":"100%"},children:u.user?t.jsx(Na,{}):t.jsx(Ba,{showMap:R,setShowMap:b,showGfBar:A,showGfAlert:m})}),!m&&!A&&d&&t.jsx(r,{style:{width:"20%"},children:t.jsx(Kn,{vehicleData:f,title:"Setting"})}),m&&!A&&!d&&t.jsx(r,{sx:{width:i?"25%":"20%"},children:t.jsx(Jn,{})})]})]})]})}export{oo as default};
