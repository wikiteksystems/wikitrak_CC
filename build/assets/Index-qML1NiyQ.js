import{J as ve,L as be,M as Le,w as fe,r as n,N as Ae,D as Te,j as e,E as De,I as ke,t as Ie,T as _,P as H,u as me,a as z,ae as Ee,af as Fe,X as de,c as W,W as we,ag as Re,ah as Pe,ai as xe,$ as Se,_ as X,a0 as ye,aj as _e,l as Ye,m as Ve}from"./index-D0aNwlmP.js";import{L as Ne}from"./LightModeOutlined-Dy-oKYkP.js";import{L as Be}from"./LiveMapTopBar-CVIHJtBa.js";import{V as Oe}from"./VehicleMenu-D1SddK0Z.js";import"./index-CYfbUwbR.js";import{T as $e}from"./TripGraph-DizZI_mc.js";import{t as je,d as ze}from"./Search-DzLS79QW.js";import{D as Xe,d as Ue,a as qe}from"./ArrowForwardIos-Bbkb9T_4.js";import{B as L,C as Me}from"./CircularProgress-D0vTU0dk.js";import{M as Ge}from"./Modal-zRsVz3sN.js";import{C as He}from"./Card-LM4OS8qK.js";import{C as We}from"./CardContent-C11j1Jb2.js";import{u as Ke}from"./esm-BEmcYOY9.js";import{i as Qe,j as Je,k as Ze,m as et,n as tt,p as st,q as nt,s as ot,t as at,v as rt,w as it,x as lt,y as ct,f as J,V as he,F as K,a as ue,S as Q,z as Ce,P as ge,I as pe,M as dt,T as ht,O as ut,b as gt}from"./Vector-BEQdHjna.js";/* empty css           */import{v as pt}from"./3W-CBKYabV4.js";import{b as ft}from"./OutlinedInput-CyZt5XCD.js";import{I as xt}from"./IconButton-CSU8wmWS.js";import"./createSvgIcon-BJRz-VQo.js";import"./jcb-aCHXMCXy.js";import"./index-B-MMvrfw.js";import"./roundedArrow-BBersqtH.js";import"./TextArea-BCWfbs8Q.js";import"./button-CoWbF1Zu.js";import"./Paper-2h0VwTET.js";function mt(s){return ve("MuiCardActions",s)}be("MuiCardActions",["root","spacing"]);const wt=["disableSpacing","className"],St=s=>{const{classes:o,disableSpacing:i}=s;return ke({root:["root",!i&&"spacing"]},mt,o)},yt=Le("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:i}=s;return[o.root,!i.disableSpacing&&o.spacing]}})(({ownerState:s})=>fe({display:"flex",alignItems:"center",padding:8},!s.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Ct=n.forwardRef(function(o,i){const y=Ae({props:o,name:"MuiCardActions"}),{disableSpacing:l=!1,className:p}=y,D=Te(y,wt),C=fe({},y,{disableSpacing:l}),A=St(C);return e.jsx(yt,fe({className:De(A.root,p),ownerState:C,ref:i},D))}),jt=Ct;class Z extends Qe{constructor(o,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(o[0])?this.setFlatCoordinates(i,o):this.setCoordinates(o,i)}appendCoordinate(o){Je(this.flatCoordinates,o),this.changed()}clone(){const o=new Z(this.flatCoordinates.slice(),this.layout);return o.applyProperties(this),o}closestPointXY(o,i,y,l){return l<Ze(this.getExtent(),o,i)?l:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(et(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,o,i,y,l))}forEachSegment(o){return st(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o)}getCoordinateAtM(o,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0?i:!1,nt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,i))}getCoordinates(){return ot(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(o,i){return at(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,i,this.stride)}getLength(){return rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(o){const i=[];return i.length=it(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,i,0),new Z(i,"XY")}getType(){return"LineString"}intersectsExtent(o){return lt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o)}setCoordinates(o,i){this.setLayout(i,o,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ct(this.flatCoordinates,0,o,this.stride),this.changed()}}function Mt({tripPlay:s,speed:o,totalDistance:i,Acreage:y,filterCoordinates:l,handleTrip:p,showGraph:D,handleShowGraph:C}){return e.jsxs(L,{sx:{bgcolor:Ie.bgColor,position:"relative",color:"white",display:"flex",alignItems:"center",overflowX:"hidden",flexWrap:"wrap",border:"1px solid white",gap:"5px",paddingLeft:"5px",padding:"10px 10px"},children:[e.jsxs(L,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px",width:"150px",display:"flex",justifyContent:"space-evenly"},children:[e.jsx(_,{children:"Speed"}),e.jsxs(_,{children:[s?o:0," KM/H"]})]}),e.jsxs(_,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px"},children:["Total-Distance ",i," KM"]}),e.jsxs(_,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px"},children:[parseFloat(y).toFixed(2)," acre"]}),e.jsxs(H,{sx:{background:"white",border:"1px solid white",borderRadius:"5px",padding:"5px 20px",color:"black"},onClick:()=>{l()},children:[" ","Calculate Acerage"]}),e.jsxs(H,{sx:{background:s?"transparent":"white",border:"1px solid white",borderRadius:"5px",height:"38px",padding:"5px 20px",color:s?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{p()},children:[s?"Pause":"Play","-Trip"]}),e.jsxs(H,{style:{height:"38px",padding:"5px 20px"},sx:{background:D?"transparent":"white",border:"1px solid white",borderRadius:"5px",color:D?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{C()},children:[D?"Hide":"Show","-Graph"]})]})}const vt=()=>{var se,ne,oe,ae;const s=me(),{tripList:o,selectedTripData:i,loading:y,trips:l,activeIndex:p,searchText:D,mode:C,isNavigate:A,allTripList:t,trip_payload:E,page:k}=z(a=>a.dashboard),{selectedVehicle:Y}=z(a=>a.liveMap),j=je(C),[T,M]=n.useState(!1),[h,x]=n.useState({}),[f,b]=n.useState(""),[F,S]=n.useState(0);n.useEffect(()=>{console.log("trips",l),(l==null?void 0:l.length)>0&&b(l[0])},[l]),n.useEffect(()=>{console.log("allTripList",t);const a=O(t);s(Ee(a))},[t]),n.useEffect(()=>{!(i.length>0)&&A&&p!==null&&$.length>0&&R($[p])},[i,A]);const R=async a=>{var N;let m={imei:Y.imei,startDate:a.startDate,endDate:a.endDate};const P=await Fe(m);((N=P==null?void 0:P.data)==null?void 0:N.documents.length)>0?(s(A(!1)),s(de(P.data.documents[0].data))):(s(A(!1)),s(de([])))},O=a=>{const m=new Set,P=[];return a.forEach(N=>{const U=W(N.startTime).format("YYYY-MM-DD");m.has(U)||(m.add(U),P.push(U))}),P},V=(a,m)=>{s(we(null)),s(Re(a)),s(Pe(!1)),b(a),S(m)},$=t.filter(a=>W(a.startTime).format("YYYY-MM-DD")===f),G=async(a,m)=>{s(de(m.data)),s(we(a)),s(xe(0))},re=a=>{x(a),M(!0)},ee=()=>{M(!1),x({})},te=a=>a?a.split(" ").slice(0,2).join(" "):"",ie=async()=>{const a={...E,page:k+1};try{(await s(Se(a))).error?X.error("No Trip! within selected date"):s(ye(k+1))}catch{X.error("No Trip! within selected date")}},le=()=>{if(k<=1)return;const a={...E,page:k-1};s(ye(k-1)),s(Se(a))};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(L,{children:[e.jsx(L,{sx:{color:j.grey[400]},children:"Select Date"}),e.jsx(L,{sx:{mt:1},children:e.jsx(Xe,{})})]}),y?e.jsx("div",{style:{width:"100%",margin:"38%"},children:e.jsx(Me,{})}):e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsx(L,{sx:{display:"flex",overflowX:"auto",gap:"10px",paddingBottom:"5px"},children:t&&(t==null?void 0:t.length)>0?e.jsx(e.Fragment,{children:l.map((a,m)=>e.jsx(L,{children:e.jsx(H,{onClick:()=>{V(a,m)},style:{backgroundColor:F===m?j.grey[300]:j.grey[200],color:F===m?"black":j.grey[300],height:"35px",fontWeight:700,fontSize:"12px",width:"90px",marginTop:"20px"},children:a})},m))}):e.jsx(_,{sx:{width:"100%",mt:"50%",textAlign:"center"},children:"Sorry! No Trips Found"})})}),e.jsxs(L,{sx:{height:"70vh",width:"100%",overflowY:"auto"},children:[e.jsxs(L,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(H,{disabled:k<=1,onClick:le,children:e.jsx(Ue,{})}),e.jsx(H,{disabled:!(E!=null&&E.imei),onClick:ie,children:e.jsx(qe,{})})]}),$&&$.length>0&&$.map((a,m)=>{var g,c,u,d;const P=(c=(g=a==null?void 0:a.startLocation)==null?void 0:g.address)==null?void 0:c.address,N=(d=(u=a==null?void 0:a.endLocation)==null?void 0:u.address)==null?void 0:d.address,U=P?`${P.town||P.city||""}`:"",r=N?`${N.town||N.city||""}`:"";return e.jsxs(L,{sx:{m:"15px",border:"1px solid #e8edea",borderRadius:"5px",padding:"10px",justifyContent:"space-between",alignItems:"center",color:p===m?"black":j.grey[400],backgroundColor:p===m?"#e8edea":"undefined",fontSize:"10px",cursor:"pointer","&:hover":{background:C?j.grey[300]:j.grey[200]}},onClick:()=>G(m,a),children:[e.jsxs(_,{sx:{cursor:"text"},children:[m+1,". ",te(U)," to"," ",te(r)," ",e.jsx("span",{style:{color:C?"orange":"blue",cursor:"pointer"},onClick:v=>{v.stopPropagation(),re(a)},children:"...see more"})]}),e.jsxs(_,{children:[a!=null&&a.startTime?W(new Date(a.startTime).toISOString()).format("LT"):""," ","/"," ",a!=null&&a.endTime?W(new Date(a.endTime).toISOString()).format("LT"):"----"]})]},m)})]})]})]}),e.jsx(Ge,{open:T,onClose:ee,children:e.jsxs(He,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40%",bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsxs(We,{children:[e.jsx(_,{variant:"h6",component:"div",children:"Trip Details"}),e.jsxs(_,{sx:{mt:2},children:[e.jsx("strong",{children:"Start Location:"})," ",((ne=(se=h==null?void 0:h.startLocation)==null?void 0:se.address)==null?void 0:ne.display_name)||"N/A"]}),e.jsxs(_,{sx:{mt:2},children:[e.jsx("strong",{children:"End Location:"})," ",((ae=(oe=h==null?void 0:h.endLocation)==null?void 0:oe.address)==null?void 0:ae.display_name)||"N/A"]}),e.jsxs(_,{sx:{mt:2},children:[e.jsx("strong",{children:"Start Time:"})," ",h!=null&&h.startTime?W(new Date(h.startTime).toISOString()).format("MMMM Do YYYY, h:mm:ss A"):"N/A"]}),e.jsxs(_,{sx:{mt:2},children:[e.jsx("strong",{children:"End Time:"})," ",h!=null&&h.endTime?W(new Date(h.endTime).toISOString()).format("MMMM Do YYYY, h:mm:ss A"):"N/A"]})]}),e.jsx(jt,{children:e.jsx(H,{onClick:ee,children:"Close"})})]})})]})},bt=vt;function Lt({trip:s,tripPlay:o,setTripPlay:i,setSpeed:y,map:l}){const[p,D]=n.useState([]),[C,A]=n.useState(0),[t,E]=n.useState([]),[k,Y]=n.useState([]),j=n.useRef(null),T=n.useRef(null),M=n.useRef(null),h=n.useRef(null);return n.useEffect(()=>{console.log("trip",s),A(0)},[s]),n.useEffect(()=>{Y([]);const x=[];if(s&&s.length>0&&(s.forEach(f=>{x.push(f.speed)}),E(x)),s&&s.length>0){const f=s.map(b=>J([parseFloat(b.lng),parseFloat(b.lat)]));D(f),A(0),Y(f)}},[s]),n.useEffect(()=>{console.log("tripPlay",o)},[o]),n.useEffect(()=>{if(o){const x=p.length,f=9e3,b=1e4,F=performance.now();let S=0;const R=O=>{const V=O-F,$=Math.max(0,Math.min(V/f,1)),G=Math.max(0,Math.min(Math.floor($*x),x-1));G!==j.current&&(A(G),y(t[G]),j.current=G),S<b&&o?(requestAnimationFrame(R),S++):(i(!1),l.removeLayer(M.current),A(0))};requestAnimationFrame(R)}},[o,p,t,y,i]),n.useEffect(()=>{if(l&&k.length>0){T.current&&l.removeLayer(T.current);const x=new he({features:[new K({geometry:new Z(k)})]}),f=new ue({source:x,style:new Q({stroke:new Ce({color:"red",width:4})})});if(T.current=f,l.addLayer(f),o||l.getView().fit(x.getExtent(),{size:l.getSize(),duration:1e3}),o&&p&&p.length>0&&p[C]){console.log("path index",p[C],C),M.current&&l.removeLayer(M.current);const b=new K({geometry:new Z(p.slice(0,C+1))}),F=new K({geometry:new ge(p[C])}),S=new he({features:[b,F]}),R=new Q({stroke:new Ce({color:"green",width:4})}),O=new Q({image:new pe({src:pt,scale:.07,anchor:[.5,1]})});b.setStyle(R),F.setStyle(O);const V=new ue({source:S});M.current=V,l.addLayer(V)}else M.current&&l.removeLayer(M.current)}},[l,k,p,C,o]),n.useEffect(()=>{if(l&&s.length>0){const x=new K({geometry:new ge(J([parseFloat(s[0].lng),parseFloat(s[0].lat)]))}),f=new K({geometry:new ge(J([parseFloat(s[s.length-1].lng),parseFloat(s[s.length-1].lat)]))});x.setStyle(new Q({image:new pe({src:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",scale:1})})),f.setStyle(new Q({image:new pe({src:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scale:1})}));const b=new he({features:[x,f]});h.current&&l.removeLayer(h.current);const F=new ue({source:b});h.current=F,l.addLayer(F)}},[l,s]),n.useEffect(()=>{M.current&&(l.removeLayer(M.current),M.current=null)},[s]),null}function At({trip:s,tripPlay:o,setTripPlay:i,setSpeed:y,showCard:l}){const p=n.useRef(),[D,C]=n.useState(null),[A,t]=n.useState({lat:18.516726,lng:73.856255}),[E,k]=n.useState("");n.useEffect(()=>{const j=J([A.lng,A.lat]),T=new dt({target:p.current,layers:[new ht({source:new ut})],view:new gt({center:j,zoom:15})});return C(T),()=>T.setTarget(null)},[]);const Y=async j=>{if(j.preventDefault(),E.trim()==="")return;const M=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${E}`)).json();if(M.length>0){const{lon:h,lat:x}=M[0],f=J([parseFloat(h),parseFloat(x)]);D.getView().animate({center:f,zoom:15})}};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{component:"form",onSubmit:Y,border:"1px solid white",backgroundColor:"white",borderRadius:"3px",sx:{my:"6px",ml:"90px",position:"absolute",top:l?125:63,left:200,zIndex:1},children:[e.jsx(ft,{sx:{my:.5,mx:2},placeholder:"Search for a location",value:E,onChange:j=>k(j.target.value)}),e.jsx(xt,{type:"submit",sx:{p:1},children:e.jsx(ze,{})})]}),e.jsx("div",{ref:p,style:{width:"100%",height:l?"86vh":"93vh"},children:D&&e.jsx(Lt,{trip:s,tripPlay:o,setTripPlay:i,setSpeed:y,map:D})})]})}const Tt=({center:s,showCard:o})=>{var N,U;const i=me(),{isLoaded:y,loadError:l}=Ke({googleMapsApiKey:"AIzaSyA_S7GfAh6rJYWQ5X4n4X-3poo3vymuspU"}),{Acreage:p}=z(r=>r.tripMonitor);z(r=>r.liveMap);const{singleTrip_Data:D,tripLoading:C,loading:A}=z(r=>r.tripMonitor),{selectedTripData:t,mode:E,styles:k}=z(r=>r.dashboard);n.useRef(null);const[Y,j]=n.useState(null),[T,M]=n.useState(null),[h,x]=n.useState([]);n.useState([]);const[f,b]=n.useState(!1),[F,S]=n.useState(0),[R,O]=n.useState(!1),[V,$]=n.useState(0);n.useState([]);const[G,re]=n.useState([]);n.useState([]),n.useEffect(()=>{Y&&T&&Y.fitBounds(T)},[Y,T,t]),n.useEffect(()=>{if(console.log("selectedTripData",t),(t==null?void 0:t.length)>0){const r=ee({selectedTripData:t});$(r)}},[t]);const ee=({selectedTripData:r})=>{const g=r.reduce((c,u,d)=>{if(d===0)return c;const v=r[d-1],w=_e(v.lat,v.lng,u.lat,u.lng);return c+w},0);return g==null?void 0:g.toFixed(2)};n.useEffect(()=>{var r,g,c,u,d;if(t&&(t==null?void 0:t.length)>0){const v=new window.google.maps.LatLngBounds,w=new window.google.maps.LatLng(parseFloat((r=t[0])==null?void 0:r.lat),parseFloat((g=t[0])==null?void 0:g.lng)),I=new window.google.maps.LatLng(parseFloat((c=t[(t==null?void 0:t.length)-1])==null?void 0:c.lat),parseFloat((u=t[(t==null?void 0:t.length)-1])==null?void 0:u.lng));v.extend(w),v.extend(I),S((d=t[0])==null?void 0:d.speed),M(v)}b(!1),te()},[t]);const te=()=>{if(t&&t.length>0){const r=(u,d)=>{const w=new Date(u.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return{Date:u.createdAt.substring(0,10),Time:w,value:u[d]}},c=["speed","mainInputVoltage","ignition"].map(u=>({label:u==="speed"?"Speed":u==="mainInputVoltage"?"MainInputVoltage":"Ignition",randomColor:ie(),data:t.map(d=>r(d,u))}));x(c)}else x([])},ie=()=>"#"+Math.floor(Math.random()*16777215).toString(16),le=()=>{var r;if((t==null?void 0:t.length)>0)b(!f),S(0);else return((r=Object.keys(t))==null?void 0:r.length)===0?X.error("Please Select Vehicle",{id:"vehicle"}):X.error("Please Select Trip",{id:"trip error"})},se=()=>{var r;if((t==null?void 0:t.length)>0)O(!R);else return((r=Object.keys(t))==null?void 0:r.length)===0?X.error("Please Select Vehicle",{id:"vehicle"}):X.error("Please Select Trip",{id:"trip error"})};if(l)return"Error loading maps";if(!y)return"Loading maps";const ne=r=>{if(!window.google||!window.google.maps.geometry){console.log("not loaded");return}const c=window.google.maps.geometry.spherical.computeArea(r.getPath())/4046.86;i(xe(c))},oe=()=>{const c=[];t.length>0&&t.map((d,v)=>{let w={latitude:d.lat,longitude:d.lng},I=[];t.map(B=>{const q={latitude:B.lat,longitude:B.lng};if(q.latitude!==w.latitude&&q.longitude!==w.longitude){const ce=P(d.lat,d.lng,B.lat,B.lng);ce<20&&ce>10&&I.push(B)}}),I.length>10&&c.push(d)});const u=c.map(d=>({lat:parseFloat(d.lat),lng:parseFloat(d.lng)}));if(c&&c.length>0){re(c);const d=m(u),v=ae(d),w=new window.google.maps.Polygon({paths:v});ne(w)}else i(xe(0))},ae=r=>{r.sort((u,d)=>u.lng-d.lng||u.lat-d.lat);const g=[],c=[];for(const u of r){for(;g.length>=2&&a(g[g.length-2],g[g.length-1],u)<=0;)g.pop();g.push(u)}for(let u=r.length-1;u>=0;u--){const d=r[u];for(;c.length>=2&&a(c[c.length-2],c[c.length-1],d)<=0;)c.pop();c.push(d)}return[...g.slice(0,-1),...c.slice(0,-1)]},a=(r,g,c)=>(g.lat-r.lat)*(c.lng-r.lng)-(g.lng-r.lng)*(c.lat-r.lat),m=r=>{const g=(w,I,B)=>{const q=(I.lat-w.lat)*(B.lng-I.lng)-(I.lng-w.lng)*(B.lat-I.lat);return q===0?0:q>0?1:2},c=r.reduce((w,I)=>I.lng<w.lng?I:w);let u=[],d=c,v;do{u.push(d),v=r[0]===d?r[1]:r[0];for(let w=0;w<r.length;w++)g(d,v,r[w])===2&&(v=r[w]);d=v}while(d!==c);return u};function P(r,g,c,u){const v=r*Math.PI/180,w=c*Math.PI/180,I=(c-r)*Math.PI/180,B=(u-g)*Math.PI/180,q=Math.sin(I/2)*Math.sin(I/2)+Math.cos(v)*Math.cos(w)*Math.sin(B/2)*Math.sin(B/2);return 6371e3*(2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q)))}return e.jsxs(e.Fragment,{children:[C&&e.jsx(L,{sx:{position:"absolute",top:"50vh",left:"50%",zIndex:"1000"},children:e.jsx(Me,{})}),o&&e.jsx(Mt,{tripPlay:f,speed:F,totalDistance:V,Acreage:p,filterCoordinates:oe,handleTrip:le,showGraph:R,handleShowGraph:se}),e.jsx(At,{trip:t,tripPlay:f,setTripPlay:b,setSpeed:S,showCard:o}),e.jsx("div",{style:{position:"absolute",top:430,left:300,color:"green"},children:((U=(N=h[0])==null?void 0:N.data)==null?void 0:U.length)>0&&R&&e.jsx($e,{item:h})})]})},Dt=Tt;function ss(){const{w_customer_id:s}=z(h=>h.auth),{collapsed:o}=z(h=>h.auth),{mode:i}=z(h=>h.dashboard),[y,l]=n.useState(!1),[p,D]=n.useState(!0),[C,A]=n.useState([]),[t,E]=n.useState(!1);n.useState([]);const[k,Y]=n.useState({lat:18.516726,lng:73.856255});n.useState([]);const j=je(i);let T=me();n.useEffect(()=>{M()},[]);const M=async()=>{try{let h=[],x=[];const f=await T(Ye({w_customer_id:s}));if(Array.isArray(f.payload)){f.payload.forEach(S=>{var R,O,V;Array.isArray(S.imei)&&S.imei.length>0&&((R=S.imei[0])!=null&&R.mac_id)?(h.push({id:S.id,label:S.registration_id,value:(O=S.imei[0])==null?void 0:O.mac_id}),x.push((V=S.imei[0])==null?void 0:V.mac_id)):(console.error("IMEI data not found for item:",S),X.error(`IMEI Number not found for the vehicle: ${S==null?void 0:S.registration_id}`))});const b="one",F=x;x.length>0&&T(Ve({type:b,imei:F})),A(h)}else console.error("Unexpected data format:",f),X.error("Unexpected data format:")}catch(h){console.error("Error fetching vehicle data:",h),X.error(`Error fetching vehicle data: ${h}`)}};return e.jsxs("div",{className:"app",children:[e.jsx(Ne,{}),e.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[e.jsx(Be,{title:"Trip Monitor",setShowVehicles:l,showVehicles:y,setShowCard:D,showCard:p,sideBarTrip:t,setSideBarTrip:E}),e.jsxs(L,{style:{display:"flex",width:"100%",height:"95vh"},children:[e.jsx(L,{style:{width:y||t?"80%":"100%"},children:e.jsx(Dt,{center:k,showCard:p})}),y&&e.jsx(L,{style:{width:"20%",backgroundColor:j.grey[100]},children:e.jsx(Oe,{vehicleData:C,title:"Live Monitor"})}),e.jsx(L,{style:{width:o?"22%":"20%",display:t?"block":"none",backgroundColor:j.grey[100]},children:e.jsx(bt,{})})]})]})]})}export{ss as default};
