import{r as n,q as Pt,i as Nt,j as e,a as k,u as ge,t as Q,O as J,T as E,ao as de,$ as on,h as an,ap as sn,_ as Z,aq as Y,ar as ln,k as rn,l as cn}from"./index-D-FDkSDy.js";import{A as zt,C as pe,ap as dn,e as ue,a5 as Dt,o as gn,h as _t,a2 as pn,N as un,f as It,d as hn,a as xn,ac as fn,b as mn,c as yn,L as jn}from"./LightModeOutlined-DxQ98IV3.js";import{r as Gt}from"./createSvgIcon-B2VI29Eg.js";import{d as bn,G as vn}from"./GeofencAlert-C6nHSg2r.js";import{j as Cn,V as Sn}from"./VehicleMenu-zTdVh75g.js";import{B as r}from"./CircularProgress-C3vNCpCt.js";import{I as wn}from"./IconButton-B0zRfXUT.js";import{C as On}from"./Form-BOvEdJO7.js";import{t as he}from"./theme-l95ipxI8.js";import{u as An,G as En,C as kn,R as Rn,b as Lt,M as Dn}from"./esm-Cxj0JWIk.js";import{S as ie}from"./Switch-CxlrbGDk.js";import{I as In}from"./TextField-BcOMI6fX.js";import{u as Ln,I as xe,T as Fn}from"./TextArea-BwjxObOn.js";import{B as Pn,S as Nn}from"./button-CdA4b2Ay.js";import"./Search-BJSieG0V.js";import"./mergeSlotProps-raqXZrO-.js";import"./Paper-79I20hkQ.js";var zn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const _n=zn;var Gn=function(d,i){return n.createElement(zt,Pt({},d,{ref:i,icon:_n}))},Tn=n.forwardRef(Gn);const Bn=Tn;var Mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const Vn=Mn;var Wn=function(d,i){return n.createElement(zt,Pt({},d,{ref:i,icon:Vn}))},Xn=n.forwardRef(Wn);const Jn=Xn,Un=o=>{const{getPrefixCls:d,direction:i}=n.useContext(pe),{prefixCls:l,className:s}=o,u=d("input-group",l),x=d("input"),[f,z]=dn(x),R=ue(u,{[`${u}-lg`]:o.size==="large",[`${u}-sm`]:o.size==="small",[`${u}-compact`]:o.compact,[`${u}-rtl`]:i==="rtl"},z,s),b=n.useContext(Dt),O=n.useMemo(()=>Object.assign(Object.assign({},b),{isFormItemInput:!1}),[b]);return f(n.createElement("span",{className:R,style:o.style,onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave,onFocus:o.onFocus,onBlur:o.onBlur},n.createElement(Dt.Provider,{value:O},o.children)))},Kn=Un;var Qn=function(o,d){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&d.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(o);s<l.length;s++)d.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(o,l[s])&&(i[l[s]]=o[l[s]]);return i};const qn=o=>o?n.createElement(Jn,null):n.createElement(Bn,null),Yn={click:"onClick",hover:"onMouseOver"},Hn=n.forwardRef((o,d)=>{const{visibilityToggle:i=!0}=o,l=typeof i=="object"&&i.visible!==void 0,[s,u]=n.useState(()=>l?i.visible:!1),x=n.useRef(null);n.useEffect(()=>{l&&u(i.visible)},[l,i]);const f=Ln(x),z=()=>{const{disabled:G}=o;G||(s&&f(),u(h=>{var P;const S=!h;return typeof i=="object"&&((P=i.onVisibleChange)===null||P===void 0||P.call(i,S)),S}))},R=G=>{const{action:h="click",iconRender:P=qn}=o,S=Yn[h]||"",B=P(s),g={[S]:z,className:`${G}-icon`,key:"passwordIcon",onMouseDown:V=>{V.preventDefault()},onMouseUp:V=>{V.preventDefault()}};return n.cloneElement(n.isValidElement(B)?B:n.createElement("span",null,B),g)},{className:b,prefixCls:O,inputPrefixCls:L,size:m}=o,D=Qn(o,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:T}=n.useContext(pe),C=T("input",L),j=T("input-password",O),F=i&&R(j),_=ue(j,b,{[`${j}-${m}`]:!!m}),I=Object.assign(Object.assign({},gn(D,["suffix","iconRender","visibilityToggle"])),{type:s?"text":"password",className:_,prefixCls:C,suffix:F});return m&&(I.size=m),n.createElement(xe,Object.assign({ref:_t(d,x)},I))}),Zn=Hn;var $n=function(o,d){var i={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&d.indexOf(l)<0&&(i[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(o);s<l.length;s++)d.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(o,l[s])&&(i[l[s]]=o[l[s]]);return i};const eo=n.forwardRef((o,d)=>{const{prefixCls:i,inputPrefixCls:l,className:s,size:u,suffix:x,enterButton:f=!1,addonAfter:z,loading:R,disabled:b,onSearch:O,onChange:L,onCompositionStart:m,onCompositionEnd:D}=o,T=$n(o,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:C,direction:j}=n.useContext(pe),F=n.useRef(!1),_=C("input-search",i),I=C("input",l),{compactSize:G}=pn(_,j),h=un(c=>{var v;return(v=u??G)!==null&&v!==void 0?v:c}),P=n.useRef(null),S=c=>{c&&c.target&&c.type==="click"&&O&&O(c.target.value,c,{source:"clear"}),L&&L(c)},B=c=>{var v;document.activeElement===((v=P.current)===null||v===void 0?void 0:v.input)&&c.preventDefault()},g=c=>{var v,M;O&&O((M=(v=P.current)===null||v===void 0?void 0:v.input)===null||M===void 0?void 0:M.value,c,{source:"input"})},V=c=>{F.current||R||g(c)},K=typeof f=="boolean"?n.createElement(Nn,null):null,q=`${_}-button`;let p;const N=f||{},A=N.type&&N.type.__ANT_BUTTON===!0;A||N.type==="button"?p=It(N,Object.assign({onMouseDown:B,onClick:c=>{var v,M;(M=(v=N==null?void 0:N.props)===null||v===void 0?void 0:v.onClick)===null||M===void 0||M.call(v,c),g(c)},key:"enterButton"},A?{className:q,size:h}:{})):p=n.createElement(Pn,{className:q,type:f?"primary":void 0,size:h,disabled:b,key:"enterButton",onMouseDown:B,onClick:g,loading:R,icon:K},f),z&&(p=[p,It(z,{key:"addonAfter"})]);const le=ue(_,{[`${_}-rtl`]:j==="rtl",[`${_}-${h}`]:!!h,[`${_}-with-button`]:!!f},s),ee=c=>{F.current=!0,m==null||m(c)},te=c=>{F.current=!1,D==null||D(c)};return n.createElement(xe,Object.assign({ref:_t(P,d),onPressEnter:V},T,{size:h,onCompositionStart:ee,onCompositionEnd:te,prefixCls:I,addonAfter:p,suffix:x,onChange:S,className:le,disabled:b}))}),to=eo,$=xe;$.Group=Kn;$.Search=to;$.TextArea=Fn;$.Password=Zn;const Ft=$;var fe={},no=Nt;Object.defineProperty(fe,"__esModule",{value:!0});var Tt=fe.default=void 0,oo=no(Gt()),ao=e;Tt=fe.default=(0,oo.default)((0,ao.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var me={},so=Nt;Object.defineProperty(me,"__esModule",{value:!0});var Bt=me.default=void 0,io=so(Gt()),lo=e;Bt=me.default=(0,io.default)((0,lo.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Place");const ro=({title:o,setShowContent:d,showContent:i,showMap:l,setShowMap:s,setShowGfBar:u,showGfBar:x,setShowGfAlert:f,showGfAlert:z})=>{const{collapsed:R}=k(C=>C.auth),{selectedVehicle:b}=k(C=>C.liveMap),{vehicleSideBar:O}=k(C=>C.geofence);n.useState(!1);const{mode:L}=k(C=>C.dashboard);JSON.parse(localStorage.getItem("w_userDetails"));const m=ge(),D=()=>{m(an(!R))},T=()=>{d({...i,vehicle:!i.vehicle}),u(!1),f(!1),m(de({data:!O}))};return e.jsxs(r,{display:"flex",justifyContent:"space-between",p:1,sx:{bgcolor:Q.bgColor,border:"1px solid white",borderRadius:"4px",height:"55px"},children:[e.jsxs(r,{style:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"center"},children:[R?e.jsx(J,{onClick:D,sx:{color:"white"},children:e.jsx(hn,{style:{width:"30px",height:"30px"}})}):e.jsx(J,{onClick:D,sx:{color:"white"},children:e.jsx(xn,{style:{width:"30px",height:"30px"}})}),e.jsx(r,{children:e.jsx("img",{src:`${fn}`,style:{width:"36px",height:"36px"}})}),e.jsx(E,{style:{fontSize:"20px",fontFamily:"ubuntu",fontWeight:"500",color:"#FFFFFF"},children:"WIKITRACK"})]}),e.jsx(r,{children:e.jsx(E,{variant:"h6",color:"white",fontWeight:"bold",sx:{ml:"15px",mt:"15px"},children:Object.keys(b).length>0&&l?`${o} - Geofence (${b.reg_id})`:e.jsxs(e.Fragment,{children:[o," ",Object.keys(b).length>0&&b.reg_id]})})}),e.jsxs(r,{sx:{display:"flex"},children:[e.jsxs(J,{variant:"outlined",size:"small",sx:{color:i.vehicle?"white":"black",backgroundColor:i.vehicle?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:T,children:[e.jsx("img",{src:Cn,style:{marginRight:"5px"}}),Object.keys(b).length>0?b.reg_id:"Vehicles"]}),l&&e.jsx(r,{children:e.jsx(J,{variant:"outlined",size:"small",sx:{color:x?"white":"black",backgroundColor:x?"transparent":"white",mt:"6px",mx:"5px",border:"1px solid white",width:"150px",height:"40px","&:hover":{color:"white",border:"1px solid black"}},onClick:()=>{f(!1),u(!x),m(de({data:!1}))},children:"Geofence"})}),e.jsx(r,{sx:{color:"white",mr:"10px"},children:e.jsxs(r,{sx:{display:"flex",marginTop:"14px",gap:"10px"},children:[e.jsx(r,{onClick:()=>{u(!1),f(!z),m(de({data:!1}))},children:e.jsx(bn,{sx:{cursor:"pointer",width:"30px",height:"30px"}})}),e.jsx(r,{onClick:()=>{d({...i,user:!i.user}),s(!1)},children:i.user?e.jsx(Bt,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}}):e.jsx(Tt,{sx:{mr:"2px",cursor:"pointer",width:"30px",height:"30px"}})})]})}),e.jsx(wn,{onClick:()=>{m(on(!L))},sx:{color:"white"},children:L?e.jsx(mn,{}):e.jsx(yn,{})})]})]})},co=ro,go=()=>{const o=JSON.parse(localStorage.getItem("w_userDetails")),{mode:d}=k(l=>l.dashboard),i=he(d);return e.jsxs(r,{children:[e.jsxs(r,{sx:{backgroundColor:i.grey[200],m:"10px",borderRadius:"5px",height:"150px"},children:[e.jsx(r,{sx:{pl:"20px",pt:"10px",mb:"10px",color:`${i.grey[400]}`},children:e.jsx("b",{children:"User Settings"})}),e.jsxs(r,{sx:{display:"flex"},children:[e.jsx(r,{sx:{ml:"23px",mt:"11px",height:"70px",width:"70px",backgroundColor:"white",borderRadius:"50%"}}),e.jsxs(r,{sx:{height:"80px",width:"200px",display:"flex",justifyContent:"center",flexDirection:"column",mx:"20px",color:i.grey[400]},children:[e.jsx(r,{children:e.jsxs("b",{children:[" ",o&&o.first_name," ",o.last_name]})}),e.jsx(r,{children:o&&o.role})]})]})]}),e.jsx(r,{sx:{marginTop:"9%",alignContent:"center",textAlign:"center"},children:e.jsx(On,{})})]})},po=go,uo="/assets/tractorIcon-zWRQE9nW.jpg",ho="data:image/png;base64,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",xo="http://139.59.37.47:3031",fo=({showGfBar:o,showGfAlert:d})=>{const{isLoaded:i,loadError:l}=An({googleMapsApiKey:"AIzaSyA_S7GfAh6rJYWQ5X4n4X-3poo3vymuspU"}),{selectedVehicle:s,locationData:u,tractorIcon:x}=k(a=>a.liveMap),{geofence:f,vehicleSideBar:z}=k(a=>a.geofence),{mode:R,styles:b}=k(a=>a.dashboard),{collapsed:O}=k(a=>a.auth),[L,m]=n.useState(null),[D,T]=n.useState(null),[C,j]=n.useState(1e3),[F,_]=n.useState([]),[I,G]=n.useState(!0),[h,P]=n.useState(!1),[S,B]=n.useState(!1),[g,V]=n.useState({lat:18.516726,lng:73.856255}),[K,q]=n.useState(50),[p,N]=n.useState("circular"),[A,le]=n.useState([]),[ee,te]=n.useState({north:g.lat+.01,south:g.lat-.01,east:g.lng+.01,west:g.lng-.01}),[c,v]=n.useState([{lat:g.lat+.01,lng:g.lng},{lat:g.lat-.01,lng:g.lng-.01},{lat:g.lat-.01,lng:g.lng+.01}]),[M,ye]=n.useState([{lat:g.lat+.01,lng:g.lng},{lat:g.lat-.01,lng:g.lng-.01},{lat:g.lat-.01,lng:g.lng+.01}]),Mt=n.useRef(null),ne=n.useRef(null),re=n.useRef(!1),oe=n.useRef(null),ae=n.useRef(null);let Vt=ge();n.useEffect(()=>{console.log(A,"rectangleVertices")},[A]),n.useEffect(()=>{Wt()},[s]),n.useEffect(()=>{if(u.length>0&&Object.keys(s).length>0){let a=u.filter(y=>{var w;return((w=y.latestDocument)==null?void 0:w.imei)===s.imei});_(a)}},[s]),n.useEffect(()=>{L&&D&&L.fitBounds(D)},[L,D]);const Wt=async()=>{var a,y,w,W,X,H,U,be,ve,Ce,Se,we,Oe,Ae,Ee,ke,Re,De,Ie,Le,Fe,Pe,Ne,ze,_e,Ge,Te,Be,Me,Ve,We,Xe,Je,Ue,Ke,Qe,qe,Ye,He,Ze,$e,et,tt,nt,ot,at,st,it,lt,rt,ct,dt,gt,pt,ut,ht,xt,ft,mt,yt,jt,bt,vt,Ct,St,wt,Ot,At,Et,kt,Rt;if(Object.keys(s).length>0)try{const t=await sn.get(`${xo}/api/get/geofance/${s==null?void 0:s.imei}`);if(console.log(t.data.geofenceData,"result"),((y=(a=t==null?void 0:t.data)==null?void 0:a.geofenceData)==null?void 0:y.area_type)==="circular")if(N("circular"),(W=(w=t==null?void 0:t.data)==null?void 0:w.geofenceData)!=null&&W.lat)V({lat:(H=(X=t==null?void 0:t.data)==null?void 0:X.geofenceData)==null?void 0:H.lat,lng:(be=(U=t==null?void 0:t.data)==null?void 0:U.geofenceData)==null?void 0:be.long}),j((Ce=(ve=t==null?void 0:t.data)==null?void 0:ve.geofenceData)==null?void 0:Ce.radius),G((we=(Se=t==null?void 0:t.data)==null?void 0:Se.geofenceData)==null?void 0:we.isActive_Geofance),P(((Ae=(Oe=t==null?void 0:t.data)==null?void 0:Oe.geofenceData)==null?void 0:Ae.type)==="inward"),B((ke=(Ee=t==null?void 0:t.data)==null?void 0:Ee.geofenceData)==null?void 0:ke.isActive_Speed),q((De=(Re=t==null?void 0:t.data)==null?void 0:Re.geofenceData)==null?void 0:De.speed);else return Z.success("No Geofence For Selected Vehicle",{id:"getting geofence"});else((Le=(Ie=t==null?void 0:t.data)==null?void 0:Ie.geofenceData)==null?void 0:Le.area_type)==="triangle"?(N("triangle"),console.log("get for triangle",(Fe=t==null?void 0:t.data)==null?void 0:Fe.geofenceData),v([{lat:(ze=(Ne=(Pe=t==null?void 0:t.data)==null?void 0:Pe.geofenceData)==null?void 0:Ne.triangle_points[0])==null?void 0:ze.lat,lng:(Te=(Ge=(_e=t==null?void 0:t.data)==null?void 0:_e.geofenceData)==null?void 0:Ge.triangle_points[0])==null?void 0:Te.long},{lat:(Ve=(Me=(Be=t==null?void 0:t.data)==null?void 0:Be.geofenceData)==null?void 0:Me.triangle_points[1])==null?void 0:Ve.lat,lng:(Je=(Xe=(We=t==null?void 0:t.data)==null?void 0:We.geofenceData)==null?void 0:Xe.triangle_points[1])==null?void 0:Je.long},{lat:(Qe=(Ke=(Ue=t==null?void 0:t.data)==null?void 0:Ue.geofenceData)==null?void 0:Ke.triangle_points[2])==null?void 0:Qe.lat,lng:(He=(Ye=(qe=t==null?void 0:t.data)==null?void 0:qe.geofenceData)==null?void 0:Ye.triangle_points[2])==null?void 0:He.long}])):(($e=(Ze=t==null?void 0:t.data)==null?void 0:Ze.geofenceData)==null?void 0:$e.area_type)==="rectangle"?(N("rectangle"),console.log("get for rectangle",(et=t==null?void 0:t.data)==null?void 0:et.geofenceData),te({north:(ot=(nt=(tt=t==null?void 0:t.data)==null?void 0:tt.geofenceData)==null?void 0:nt.rectangle_points[0])==null?void 0:ot.lat,south:(it=(st=(at=t==null?void 0:t.data)==null?void 0:at.geofenceData)==null?void 0:st.rectangle_points[1])==null?void 0:it.lat,east:(ct=(rt=(lt=t==null?void 0:t.data)==null?void 0:lt.geofenceData)==null?void 0:rt.rectangle_points[1])==null?void 0:ct.long,west:(pt=(gt=(dt=t==null?void 0:t.data)==null?void 0:dt.geofenceData)==null?void 0:gt.rectangle_points[0])==null?void 0:pt.long})):((ht=(ut=t==null?void 0:t.data)==null?void 0:ut.geofenceData)==null?void 0:ht.area_type)==="polygon"&&(N("polygon"),console.log("get for polygon",(xt=t==null?void 0:t.data)==null?void 0:xt.geofenceData),ye((mt=(ft=t==null?void 0:t.data)==null?void 0:ft.geofenceData)==null?void 0:mt.polygon_points),q((jt=(yt=t==null?void 0:t.data)==null?void 0:yt.geofenceData)==null?void 0:jt.speed),G((vt=(bt=t==null?void 0:t.data)==null?void 0:bt.geofenceData)==null?void 0:vt.isActive_Geofance),P(((St=(Ct=t==null?void 0:t.data)==null?void 0:Ct.geofenceData)==null?void 0:St.type)==="inward"),V({lat:(Ot=(wt=t==null?void 0:t.data)==null?void 0:wt.geofenceData)==null?void 0:Ot.lat,lng:(Et=(At=t==null?void 0:t.data)==null?void 0:At.geofenceData)==null?void 0:Et.long}),B((Rt=(kt=t==null?void 0:t.data)==null?void 0:kt.geofenceData)==null?void 0:Rt.isActive_Speed))}catch(t){console.log(t,"error while getting geofence"),Z.error("Error while getting geofence",{id:"getting geofence"})}},Xt=a=>{m(a)},Jt=()=>{var a,y,w,W,X,H;if(Object.keys(s).length>0){let U;p==="circular"?U={imei:s.imei,area_type:p,type:h?"inward":"outward",lat:g.lat,long:g.lng,radius:C,isActive_Geofance:I,isActive_Speed:!!S,speed:S?K:5}:p==="rectangle"?U={imei:s.imei,area_type:p,type:h?"inward":"outward",rectangle_points:[{lat:A==null?void 0:A.north,long:A==null?void 0:A.west},{lat:A==null?void 0:A.south,long:A==null?void 0:A.east}],isActive_Geofance:I,isActive_Speed:!!S,speed:S?K:50}:p==="triangle"?U={imei:s.imei,area_type:p,type:h?"inward":"outward",triangle_points:[{lat:(a=c[0])==null?void 0:a.lat,long:(y=c[0])==null?void 0:y.lng},{lat:(w=c[1])==null?void 0:w.lat,long:(W=c[1])==null?void 0:W.lng},{lat:(X=c[2])==null?void 0:X.lat,long:(H=c[2])==null?void 0:H.lng}],isActive_Geofance:I,isActive_Speed:!!S,speed:S?K:50}:p==="polygon"&&(U={imei:s.imei,area_type:p,type:h?"inward":"outward",polygon_points:M,isActive_Geofance:I,isActive_Speed:!!S,speed:S?K:50}),Vt(ln({data:U})),Z.success("Successful Saved",{id:"geofence"})}else Z.error("Please Select Vehicle",{id:"geofence"})},se=a=>{console.log("selectedType",a),N(a)},Ut=()=>{if(!re.current){re.current=!0;const a=ce.getRadius();console.log("newRadius",a),j(a),re.current=!1}},Kt=a=>{console.log("New Center:",a.toJSON()),V(a.toJSON())},Qt=()=>{if(oe.current&&oe.current.getBounds){const a=oe.current.getBounds(),y=a.getNorthEast().lat(),w=a.getSouthWest().lat(),W=a.getNorthEast().lng(),X=a.getSouthWest().lng();console.log("{ north, south, east, west }",{north:y,south:w,east:W,west:X}),te({north:y,south:w,east:W,west:X}),le({north:y,south:w,east:W,west:X})}},qt={bounds:ee,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},Yt=a=>{oe.current=a},Ht=()=>{if(ne.current&&ne.current.getPath){const y=ne.current.getPath().getArray().map(w=>({lat:w.lat(),lng:w.lng()}));v(y),console.log("newVertices",y)}},Zt={paths:c,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}},$t=a=>{ne.current=a},en=()=>{if(ae.current&&ae.current.getPath){const y=ae.current.getPath().getArray().map(w=>({lat:w.lat(),lng:w.lng()}));ye(y),console.log("newVertices",y)}},tn=a=>{ae.current=a},je={paths:M,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0}};if(l)return"Error loading maps";if(!i)return"Loading maps";const nn={width:"100%",height:"92vh"};let ce;return e.jsxs(e.Fragment,{children:[e.jsxs(r,{children:[e.jsx(J,{onClick:()=>{se("rectangle")},style:{background:p==="rectangle"?Q.bgColor:"transparent",color:p==="rectangle"?"white":Y[400]},children:"Rectangle"}),e.jsx(J,{onClick:()=>{se("circular")},style:{background:p==="circular"?Q.bgColor:"transparent",color:p==="circular"?"white":Y[400]},children:"Circle"}),e.jsx(J,{onClick:()=>{se("triangle")},style:{background:p==="triangle"?Q.bgColor:"transparent",color:p==="triangle"?"white":Y[400]},children:"Triangle"}),e.jsx(J,{onClick:()=>{se("polygon")},style:{background:p==="polygon"?Q.bgColor:"transparent",color:p==="polygon"?"white":Y[400]},children:"Polygon"})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"row"},children:[e.jsxs(En,{ref:Mt,mapContainerStyle:nn,zoom:15,center:g,onLoad:Xt,options:{mapTypeControl:!1,styles:R?b:""},children:[p==="circular"&&e.jsx(kn,{center:g,radius:C,options:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0},onLoad:a=>{ce=a,ce.addListener("radius_changed",Ut)},onDragEnd:a=>Kt(a.latLng)}),p==="rectangle"&&e.jsx(Rn,{bounds:ee,options:qt.options,onDragEnd:Qt,onLoad:Yt}),p==="triangle"&&e.jsx(Lt,{paths:c,options:Zt.options,onDragEnd:Ht,onLoad:$t}),p==="polygon"&&e.jsx(Lt,{paths:je.paths,options:je.options,draggable:!0,editable:!0,onDragEnd:en,onLoad:tn}),F&&F.length>0&&F.map((a,y)=>e.jsx(Dn,{position:{lat:a.latestDocument.lat,lng:a.latestDocument.lng},icon:{path:x.path1,fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},y))]}),o&&!d&&!z&&g&&e.jsx(r,{sx:{width:O?"25%":"20%"},children:e.jsxs(r,{sx:{display:"flex",padding:"15px",flexDirection:"column",gap:"10px",color:Y[600]},children:[e.jsx(E,{sx:{fontWeight:"bold",fontSize:"16px"},children:"Geofence Setting"}),e.jsxs(E,{sx:{fontWeight:"400",fontSize:"14px",textTransform:"capitalize"},children:["Type: ",p]}),p==="circular"&&e.jsxs(e.Fragment,{children:[e.jsxs(E,{sx:{color:"#686868"},children:["Centered At"," "]}),e.jsxs(E,{sx:{color:"#686868"},children:["Lat: ",g.lat.toFixed(2)]}),e.jsxs(E,{sx:{color:"#686868"},children:["Lng: ",g.lng.toFixed(2)]}),e.jsxs(E,{sx:{color:"#686868",border:"1px solid #686868",borderRadius:"4px",padding:"8px"},children:["Radius ( ",(C/1e3).toFixed(2)," in km)"]})]}),e.jsxs(r,{display:"flex",alignItems:"center",children:[e.jsx(E,{variant:"body1",component:"b",children:I?"Active":"Inactive"}),e.jsx(ie,{defaultChecked:I,onChange:()=>{G(!I)},color:"primary",inputProps:{"aria-label":"toggle active state"}})]}),e.jsxs(r,{display:"flex",alignItems:"center",children:[e.jsx(E,{variant:"body1",component:"b",children:h?"Inward":"Outward"}),e.jsx(ie,{checked:h,onChange:()=>{P(!h)},color:"primary",inputProps:{"aria-label":"toggle direction"}})]}),e.jsxs(r,{display:"flex",alignItems:"center",children:[e.jsx(ie,{checked:S,onChange:()=>{B(!S)},color:"primary",inputProps:{"aria-label":"toggle direction"}}),e.jsx(E,{variant:"body1",component:"b",children:"Speed Limit"})]}),S&&e.jsx(r,{sx:{},children:e.jsx(In,{sx:{width:"100%",color:Y[600],border:"none","&:focus":{outline:"none"}},value:K,placeholder:"Enter Speed Limit",type:"number",onChange:a=>{const y=Math.max(0,parseInt(a.target.value));q(y)}})}),e.jsx(J,{disabled:Object.keys(s).length===0&&!1,variant:"outlined",size:"small",sx:{color:"white",backgroundColor:Q.bgColor,mt:"6px",mx:"5px",border:"1px solid white",height:"40px",width:"100%","&:hover":{color:"black",background:Q.bgShadow,border:"1px solid black"},letterSpacing:"1.5px",fontSize:"16px"},onClick:()=>{if(Object.keys(s).length===0)return Z.error("please select a vehicle.");Jt()},children:"SUBMIT"})]})})]})]})},mo=({showMap:o,setShowMap:d,showGfBar:i,showGfAlert:l})=>{const{selectedVehicle:s}=k(f=>f.liveMap),{mode:u}=k(f=>f.dashboard),x=he(u);return e.jsx(e.Fragment,{children:o?e.jsx(fo,{showGfBar:i,showGfAlert:l}):e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",background:x.grey[200],margin:"10px",padding:"10px",borderRadius:"8px"},children:[e.jsxs(r,{sx:{},children:[e.jsx(E,{sx:{fontWeight:"bold",fontSize:"16px",margin:"4px",color:x.grey[400]},children:"Vehicle Settings"}),e.jsxs(r,{sx:{display:"flex"},children:[e.jsx(r,{children:e.jsx("img",{src:uo,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}})}),e.jsxs(r,{children:[e.jsx(E,{sx:{fontWeight:"bold",color:x.grey[400]},children:Object.keys(s).length>0?s==null?void 0:s.reg_id:"Reg No"}),e.jsx(E,{sx:{marginBottom:"5px",color:x.grey[400]},children:"Chassis No"}),e.jsxs(r,{sx:{width:"200px",display:"flex",gap:"8px"},children:[e.jsx(Ft,{placeholder:"ONLINE"}),e.jsx(Ft,{placeholder:"RUNNING"})]}),e.jsx(r,{sx:{marginLeft:"-8px",color:x.grey[400]},children:e.jsxs(E,{children:[e.jsx(ie,{})," ",e.jsx("b",{children:"Switched ON / OFF"})]})})]})]})]}),e.jsxs(r,{onClick:()=>{d(!o)},sx:{cursor:"pointer",marginTop:"50px"},children:[e.jsx("img",{src:ho,alt:"tractorIcon",style:{width:"80px",height:"75px",borderRadius:"5px",marginRight:"20px"}}),e.jsx(E,{sx:{fontSize:"12px",color:x.grey[400]},children:"Set Geofence"})]})]})})};function No(){const{w_customer_id:o}=k(j=>j.auth),{vehicleSideBar:d}=k(j=>j.geofence),{collapsed:i}=k(j=>j.auth),{mode:l}=k(j=>j.dashboard),s=he(l),[u,x]=n.useState([]);n.useState([]);const[f,z]=n.useState({user:!0,vehicle:!1}),[R,b]=n.useState(!1),[O,L]=n.useState(!1),[m,D]=n.useState(!1);let T=ge();n.useEffect(()=>{C()},[]);const C=async()=>{let j=[],F=[];(await T(rn({w_customer_id:o}))).payload.map(h=>{j.push({id:h.id,label:h.registration_id,value:h.imei[0].mac_id}),F.push(h.imei[0].mac_id)});const I="one",G=F;F.length>0&&T(cn({type:I,imei:G})),x(j)};return e.jsxs("div",{className:"app",children:[e.jsx(jn,{}),e.jsxs("main",{className:"content",style:{width:"100%",background:s.grey[100]},children:[e.jsx(co,{title:"Settings",setShowContent:z,showContent:f,showMap:R,setShowMap:b,showGfBar:O,setShowGfBar:L,showGfAlert:m,setShowGfAlert:D}),e.jsxs(r,{style:{display:"flex",width:"100%",height:"95vh"},children:[e.jsx(r,{style:{width:d?"80%":"100%"},children:f.user?e.jsx(po,{}):e.jsx(mo,{showMap:R,setShowMap:b,showGfBar:O,showGfAlert:m})}),!m&&!O&&d&&e.jsx(r,{style:{width:"20%"},children:e.jsx(Sn,{vehicleData:u,title:"Setting"})}),m&&!O&&!d&&e.jsx(r,{sx:{width:i?"25%":"20%"},children:e.jsx(vn,{})})]})]})]})}export{No as default};
