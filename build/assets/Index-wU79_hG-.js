import{g as Oe,b as Ve,s as Ne,a as fe,r as o,c as Be,_ as He,j as e,d as We,e as Ge,k as de,l as E,Q as ce,S as De,U as Te,t as Pe,B as J,V as ze,R as Ue,D as $e,v as U,W as xe,X as qe,Y as Xe,Z as ge,$ as ee,T as X,a0 as Ce,a1 as Je,a2 as Ke,a3 as ke,n as Qe,E as Ze,F as et,I as tt}from"./index-vGe6je9P.js";import{t as Se,L as st}from"./LeftSideBar2-BtFZ_WRa.js";import{L as ot}from"./LiveMapTopBar-BCzOd0ut.js";import{V as at}from"./VehicleMenu-ByuGe6Ly.js";import{P as Ae,a as me,u as nt,G as rt,b as it}from"./esm-C17i-jC9.js";import{d as z}from"./dayjs.min-BMH85gV2.js";import{t as lt}from"./3W-fvB8OITn.js";import{m as Ie}from"./motorbike-Ci4voNFa.js";import{T as ct,a as dt}from"./TripVehicleInfo-BczCelfn.js";import{B as C,C as Ee,M as ht}from"./menu2-DSZb8Tmo.js";import{d as pt}from"./Info-JtmmQEKy.js";import{S as ut,D as gt}from"./index-BNsm-FZK.js";import{r as _e}from"./createSvgIcon-BRJQG8jM.js";import{C as ft}from"./Card-5YZkMraX.js";import{C as xt}from"./CardContent-CbXDkk9U.js";/* empty css           */import"./proj-XQwXs9DQ.js";import{V as mt}from"./VehicleGroups-Cb7_TB40.js";import"./IconButton-CzLMt84m.js";import"./Paper-DPLOiB2J.js";import"./wikitrak-Dx4bfL4M.js";import"./Close-BEeeSntK.js";import"./index-CpE_TqHm.js";import"./customParseFormat-D5dD-Es0.js";function St(n){return Oe("MuiCardActions",n)}Ve("MuiCardActions",["root","spacing"]);const wt=["disableSpacing","className"],yt=n=>{const{classes:h,disableSpacing:k}=n;return Ge({root:["root",!k&&"spacing"]},St,h)},jt=Ne("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(n,h)=>{const{ownerState:k}=n;return[h.root,!k.disableSpacing&&h.spacing]}})(({ownerState:n})=>fe({display:"flex",alignItems:"center",padding:8},!n.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),vt=o.forwardRef(function(h,k){const M=Be({props:h,name:"MuiCardActions"}),{disableSpacing:p=!1,className:b}=M,w=He(M,wt),g=fe({},M,{disableSpacing:p}),A=yt(g);return e.jsx(jt,fe({className:We(A.root,b),ownerState:g,ref:k},w))}),Mt=vt,{RangePicker:bt}=gt,Dt=()=>{const n=de(),{selectedVehicle:h}=E(t=>t.liveMap),{selectedTripData:k,mode:M}=E(t=>t.dashboard),[p,b]=o.useState(),[w,g]=o.useState(),A=Se(M);o.useEffect(()=>{const t=z().subtract(5,"day");if(b(t),g(z()),h!=null&&h.imei){let x={imei:h==null?void 0:h.imei,startDate:z().subtract(5,"day").startOf("day"),endDate:z().endOf("day"),page:1};n(ce(x)),n(De(x))}},[h]);const I=(t,x)=>{if(t){const Y=z(x[0]).startOf("day"),D=z(x[1]).endOf("day");let R={imei:h==null?void 0:h.imei,startDate:Y.format(),endDate:D.format(),page:1};b(z(x[0])),g(z(x[1])),n(ce(R)),n(De(R))}else console.log("Clear date")};return e.jsx(ut,{direction:"vertical",size:12,children:e.jsx(bt,{value:[p,w],onChange:(t,x)=>{I(t,x)},style:{backgroundColor:A.grey[500],color:A.grey[400]}})})};var we={},Ct=Te;Object.defineProperty(we,"__esModule",{value:!0});var Fe=we.default=void 0,kt=Ct(_e()),At=e;Fe=we.default=(0,kt.default)((0,At.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");var ye={},It=Te;Object.defineProperty(ye,"__esModule",{value:!0});var Le=ye.default=void 0,Tt=It(_e()),Pt=e;Le=ye.default=(0,Tt.default)((0,Pt.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");const Et="/assets/preet_tractor-2erNEHvu.png";function _t({trip:n,tripPlay:h,setTripPlay:k,setSpeed:M}){const[p,b]=o.useState([]),[w,g]=o.useState(0),[A,I]=o.useState([]),[t,x]=o.useState([null]),Y=o.useRef(null),{selectedVehicle:D}=E(f=>f.liveMap),{vehicles_details:R}=E(f=>f.dashboard),[H,y]=o.useState("2W");o.useEffect(()=>{x([null]);const f=[];if(n&&n.length>0&&(n==null||n.forEach(j=>{f.push(j.speed.toFixed(2))}),I(f)),n&&n.length>0){const j=n.map(c=>({lat:parseFloat(c.lat),lng:parseFloat(c.lng)}));b(j),x(j.slice(0))}},[n]),o.useEffect(()=>{if(h){const f=p.length,j=9e3,c=1e4,_=performance.now();let T=0;const F=K=>{const v=K-_,G=Math.max(0,Math.min(v/j,1)),V=Math.min(Math.floor(G*f),f-1);V!==Y.current&&(g(V),M(A[V]),Y.current=V),T<c&&(requestAnimationFrame(F),T++)};return requestAnimationFrame(F),()=>{}}},[h,p,A]);const N=f=>{const j=R&&R.length>0&&R.find(c=>c.value===f&&c.vehilce_type);return j?j.vehilce_type:null};o.useEffect(()=>{if(Object.keys(D).length>0){const f=N(D.imei);y(f)}},[D]);const $=o.useMemo(()=>{var f,j;return{lat:parseFloat((f=p[w])==null?void 0:f.lat),lng:parseFloat((j=p[w])==null?void 0:j.lng)}},[p,w]),O=o.useMemo(()=>({url:(()=>{switch(H){case"2W":return Ie;case"3W":return lt;case"4W":return Et;default:return Ie}})(),size:new window.google.maps.Size(80,80),scaledSize:new window.google.maps.Size(80,80),fillOpacity:2,strokeWeight:1,scale:2}),[H]);return e.jsxs("div",{children:[t.length>0&&e.jsx(e.Fragment,{children:e.jsx(Ae,{path:t,options:{strokeColor:"red",strokeOpacity:1,strokeWeight:4}})}),h&&e.jsxs(e.Fragment,{children:[e.jsx(Ae,{path:p.slice(0,w+1),options:{strokeColor:"green",strokeOpacity:1,strokeWeight:4,zIndex:1e3,geodesic:!0}}),e.jsx(me,{position:$,icon:O},w)]})]})}function Ft({tripPlay:n,speed:h,totalDistance:k,Acreage:M,filterCoordinates:p,handleTrip:b,showGraph:w,handleShowGraph:g}){return e.jsxs(C,{sx:{bgcolor:Pe.bgColor,position:"relative",color:"white",display:"flex",alignItems:"center",overflowX:"hidden",flexWrap:"wrap",border:"1px solid white",gap:"5px",paddingLeft:"5px",padding:"10px 10px"},children:[e.jsxs(J,{sx:{background:"white",border:"1px solid white",borderRadius:"5px",padding:"5px 20px",color:"black"},onClick:()=>{p()},children:[" ","Calculate Acerage"]}),e.jsxs(J,{sx:{background:n?"transparent":"white",border:"1px solid white",borderRadius:"5px",height:"38px",padding:"5px 20px",color:n?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{b()},children:[n?"Pause":"Play","-Trip"]}),e.jsxs(J,{style:{height:"38px",padding:"5px 20px"},sx:{background:w?"transparent":"white",border:"1px solid white",borderRadius:"5px",color:w?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{g()},children:[w?"Hide":"Show","-Graph"]})]})}const Lt=({selectedTrip:n,center:h,showCard:k})=>{var Me,be;const M=de(),{isLoaded:p,loadError:b}=nt({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA"}),{Acreage:w}=E(s=>s.tripMonitor),{selectedVehicle:g}=E(s=>s.liveMap),{singleTrip_Data:A,tripLoading:I}=E(s=>s.tripMonitor),{selectedTripData:t,mode:x,styles:Y}=E(s=>s.dashboard),{collapsed:D}=E(s=>s.auth),R=o.useRef(null),[H,y]=o.useState(null),[N,$]=o.useState(null),[O,f]=o.useState([]);o.useState([]);const[j,c]=o.useState(!1),[_,T]=o.useState(0),[F,K]=o.useState(!1),[v,G]=o.useState(0),[V,te]=o.useState([]),[je,ae]=o.useState([]);o.useState([]);const[Q,se]=o.useState(!1),[ne,a]=o.useState({});o.useEffect(()=>{se(!0)},[g]),o.useEffect(()=>{(async()=>{if(g!=null&&g.imei){const d=z(),r=d.startOf("day").format("MM/DD/YYYY HH:mm:ss"),l=d.endOf("day").format("MM/DD/YYYY HH:mm:ss"),i={imei:[g.imei],startDate:r,endDate:l};try{const u=await $e(i);console.log("result",u.data[0].data),a(u.data[0].data)}catch(u){console.error("Error fetching report:",u)}}})()},[g,M]),o.useEffect(()=>{H&&N&&H.fitBounds(N)},[H,N,t]),o.useEffect(()=>{if(console.log("selectedTripData",t),(t==null?void 0:t.length)>0){const s=m({selectedTripData:t});G(s)}},[t]);const m=({selectedTripData:s})=>{const d=s.reduce((r,l,i)=>{if(i===0)return r;const u=s[i-1],S=ze(u.lat,u.lng,l.lat,l.lng);return r+S},0);return d==null?void 0:d.toFixed(2)};o.useEffect(()=>{var s,d,r,l,i;if(t&&(t==null?void 0:t.length)>0){const u=new window.google.maps.LatLngBounds,S=new window.google.maps.LatLng(parseFloat((s=t[0])==null?void 0:s.lat),parseFloat((d=t[0])==null?void 0:d.lng)),P=new window.google.maps.LatLng(parseFloat((r=t[(t==null?void 0:t.length)-1])==null?void 0:r.lat),parseFloat((l=t[(t==null?void 0:t.length)-1])==null?void 0:l.lng));u.extend(S),u.extend(P),T((i=t[0])==null?void 0:i.speed),$(u)}c(!1),L()},[t]);const L=()=>{if(t&&t.length>0){const s=(l,i)=>{const S=new Date(l.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return{Date:l.createdAt.substring(0,10),Time:S,value:l[i]}},r=["speed","mainInputVoltage","ignition"].map(l=>({label:l==="speed"?"Speed":l==="mainInputVoltage"?"MainInputVoltage":"Ignition",randomColor:W(),data:t.map(i=>s(i,l))}));f(r)}else f([])},W=()=>"#"+Math.floor(Math.random()*16777215).toString(16),Z=()=>{var s;if((t==null?void 0:t.length)>0)c(!j),T(0);else return((s=Object.keys(t))==null?void 0:s.length)===0?U.error("Please Select Vehicle",{id:"vehicle"}):U.error("Please Select Trip",{id:"trip error"})},he=()=>{var s;if((t==null?void 0:t.length)>0)K(!F);else return((s=Object.keys(t))==null?void 0:s.length)===0?U.error("Please Select Vehicle",{id:"vehicle"}):U.error("Please Select Trip",{id:"trip error"})},oe=()=>{Object.keys(g).length>0||Q?se(!Q):U.error("Please select any vehicle")};if(b)return"Error loading maps";if(!p)return"Loading maps";const re={width:"100%",height:k?"87vh":"93vh"},ie=s=>{if(!window.google||!window.google.maps.geometry){console.log("not loaded");return}const r=window.google.maps.geometry.spherical.computeArea(s.getPath())/4046.86;M(xe(r))},le=()=>{const r=[];t.length>0&&t.map((i,u)=>{let S={latitude:i.lat,longitude:i.lng},P=[];t.map(B=>{const q={latitude:B.lat,longitude:B.lng};if(q.latitude!==S.latitude&&q.longitude!==S.longitude){const ue=Re(i.lat,i.lng,B.lat,B.lng);ue<20&&ue>10&&P.push(B)}}),P.length>10&&r.push(i)});const l=r.map(i=>({lat:parseFloat(i.lat),lng:parseFloat(i.lng)}));if(r&&r.length>0){ae(r);const i=Ye(l),u=pe(i),S=new window.google.maps.Polygon({paths:u});ie(S)}else M(xe(0))},pe=s=>{s.sort((l,i)=>l.lng-i.lng||l.lat-i.lat);const d=[],r=[];for(const l of s){for(;d.length>=2&&ve(d[d.length-2],d[d.length-1],l)<=0;)d.pop();d.push(l)}for(let l=s.length-1;l>=0;l--){const i=s[l];for(;r.length>=2&&ve(r[r.length-2],r[r.length-1],i)<=0;)r.pop();r.push(i)}return[...d.slice(0,-1),...r.slice(0,-1)]},ve=(s,d,r)=>(d.lat-s.lat)*(r.lng-s.lng)-(d.lng-s.lng)*(r.lat-s.lat),Ye=s=>{const d=(S,P,B)=>{const q=(P.lat-S.lat)*(B.lng-P.lng)-(P.lng-S.lng)*(B.lat-P.lat);return q===0?0:q>0?1:2},r=s.reduce((S,P)=>P.lng<S.lng?P:S);let l=[],i=r,u;do{l.push(i),u=s[0]===i?s[1]:s[0];for(let S=0;S<s.length;S++)d(i,u,s[S])===2&&(u=s[S]);i=u}while(i!==r);return l};function Re(s,d,r,l){const u=s*Math.PI/180,S=r*Math.PI/180,P=(r-s)*Math.PI/180,B=(l-d)*Math.PI/180,q=Math.sin(P/2)*Math.sin(P/2)+Math.cos(u)*Math.cos(S)*Math.sin(B/2)*Math.sin(B/2);return 6371e3*(2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q)))}return e.jsxs(e.Fragment,{children:[I&&e.jsx(C,{sx:{position:"absolute",top:"50vh",left:"50%",zIndex:"1000"},children:e.jsx(Ee,{})}),k&&e.jsx(Ft,{tripPlay:j,speed:_,totalDistance:v,Acreage:w,filterCoordinates:le,handleTrip:Z,showGraph:F,handleShowGraph:he}),e.jsx(C,{sx:{position:"absolute",top:"750px",left:D?"74px":"250px",zIndex:1,background:Pe.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:e.jsxs(J,{sx:{color:"white"},onClick:oe,children:[Q?"Hide":"Show"," Vehicle Info",e.jsx(pt,{})]})}),Q===!0&&e.jsx(ct,{handleVehicleInfo:oe,vehicleReport:ne,tripPlay:j,speed:_,totalDistance:v,Acreage:w,whereToUse:"TripMonitor"}),e.jsxs(rt,{ref:R,mapContainerStyle:re,zoom:10,center:h,onLoad:s=>y(s),options:{styles:x?Y:""},children:[e.jsx(it,{paths:V,options:{fillColor:"#00FF00",fillOpacity:.4,strokeColor:"#000",strokeOpacity:1,strokeWeight:2}}),t&&(t==null?void 0:t.length)>0&&(t==null?void 0:t.map((s,d)=>{var r,l,i,u;return e.jsxs(Ue.Fragment,{children:[e.jsx(me,{position:{lat:parseFloat((r=t[0])==null?void 0:r.lat),lng:parseFloat((l=t[0])==null?void 0:l.lng)},animation:"BOUNCE",icon:{url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"}}),e.jsx(_t,{trip:t,tripPlay:j,setTripPlay:c,setSpeed:T}),e.jsx(me,{position:{lat:parseFloat((i=t[(t==null?void 0:t.length)-1])==null?void 0:i.lat),lng:parseFloat((u=t[(t==null?void 0:t.length)-1])==null?void 0:u.lng)},animation:"BOUNCE",icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png"}})]},d)})),e.jsx("div",{style:{position:"relative",top:200,left:12,color:"green"},children:((be=(Me=O[0])==null?void 0:Me.data)==null?void 0:be.length)>0&&F&&e.jsx(dt,{item:O})})]})]})},Yt=Lt,Rt=()=>{var ae,Q,se,ne;const n=de(),{tripList:h,selectedTripData:k,loading:M,trips:p,activeIndex:b,searchText:w,mode:g,isNavigate:A,allTripList:I,trip_payload:t,page:x}=E(a=>a.dashboard),{selectedVehicle:Y}=E(a=>a.liveMap),D=Se(g),[R,H]=o.useState(!1),[y,N]=o.useState({}),[$,O]=o.useState(""),[f,j]=o.useState(0);o.useEffect(()=>{console.log("trips",p),(p==null?void 0:p.length)>0&&O(p[0])},[p]),o.useEffect(()=>{console.log("allTripList",I);const a=_(I);n(qe(a))},[I]),o.useEffect(()=>{!(k.length>0)&&A&&b!==null&&F.length>0&&c(F[b])},[k,A]);const c=async a=>{var W;let m={imei:Y.imei,startDate:a.startDate,endDate:a.endDate};const L=await Xe(m);((W=L==null?void 0:L.data)==null?void 0:W.documents.length)>0?(n(A(!1)),n(ge(L.data.documents[0].data))):(n(A(!1)),n(ge([])))},_=a=>{const m=new Set,L=[];return a.forEach(W=>{const Z=ee(W.startTime).format("YYYY-MM-DD");m.has(Z)||(m.add(Z),L.push(Z))}),L},T=(a,m)=>{n(Ce(null)),n(Je(a)),n(Ke(!1)),O(a),j(m)},F=I.filter(a=>ee(a.startTime).format("YYYY-MM-DD")===$),K=async(a,m)=>{n(ge(m.data)),n(Ce(a)),n(xe(0))},v=a=>{N(a),H(!0)},G=()=>{H(!1),N({})},V=a=>a?a.split(" ").slice(0,2).join(" "):"",te=async()=>{const a={...t,page:x+1};try{(await n(ce(a))).error?U.error("No Trip! within selected date"):n(ke(x+1))}catch{U.error("No Trip! within selected date")}},je=()=>{if(x<=1)return;const a={...t,page:x-1};n(ke(x-1)),n(ce(a))};return e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsxs(C,{children:[e.jsx(C,{sx:{color:D.grey[400]},children:"Select Date"}),e.jsx(C,{sx:{mt:1},children:e.jsx(Dt,{})})]}),M?e.jsx("div",{style:{width:"100%",margin:"38%"},children:e.jsx(Ee,{})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{children:e.jsx(C,{sx:{display:"flex",overflowX:"auto",gap:"10px",paddingBottom:"5px"},children:I&&(I==null?void 0:I.length)>0?e.jsx(e.Fragment,{children:p.map((a,m)=>e.jsx(C,{children:e.jsx(J,{onClick:()=>{T(a,m)},style:{backgroundColor:f===m?D.grey[300]:D.grey[200],color:f===m?"black":D.grey[300],height:"35px",fontWeight:700,fontSize:"12px",width:"90px",marginTop:"20px"},children:a})},m))}):e.jsx(X,{sx:{width:"100%",mt:"50%",textAlign:"center"},children:"Sorry! No Trips Found"})})}),e.jsxs(C,{sx:{height:"70vh",width:"100%",overflowY:"auto"},children:[e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(J,{disabled:x<=1,onClick:je,children:e.jsx(Fe,{})}),e.jsx(J,{disabled:!(t!=null&&t.imei),onClick:te,children:e.jsx(Le,{})})]}),F&&F.length>0&&F.map((a,m)=>{var oe,re,ie,le;const L=(re=(oe=a==null?void 0:a.startLocation)==null?void 0:oe.address)==null?void 0:re.address,W=(le=(ie=a==null?void 0:a.endLocation)==null?void 0:ie.address)==null?void 0:le.address,Z=L?`${L.town||L.city||""}`:"",he=W?`${W.town||W.city||""}`:"";return e.jsxs(C,{sx:{m:"15px",border:"1px solid #e8edea",borderRadius:"5px",padding:"10px",justifyContent:"space-between",alignItems:"center",color:b===m?"black":D.grey[400],backgroundColor:b===m?"#e8edea":"undefined",fontSize:"10px",cursor:"pointer","&:hover":{background:g?D.grey[300]:D.grey[200]}},onClick:()=>K(m,a),children:[e.jsxs(X,{sx:{cursor:"text"},children:[m+1,". ",V(Z)," to"," ",V(he)," "]}),e.jsxs(X,{children:[a!=null&&a.startTime?ee(new Date(a.startTime).toISOString()).format("YYYY-MM-DD, HH:mm a"):""," ","/"," ",a!=null&&a.endTime?ee(new Date(a.endTime).toISOString()).format("YYYY-MM-DD, HH:mm a"):"----",e.jsx("span",{style:{color:g?"orange":"blue",cursor:"pointer"},onClick:pe=>{pe.stopPropagation(),v(a)},children:"...see more"})]})]},m)})]})]})]}),e.jsx(ht,{open:R,onClose:G,children:e.jsxs(ft,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40%",bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsxs(xt,{children:[e.jsx(X,{variant:"h6",component:"div",children:"Trip Details"}),e.jsxs(X,{sx:{mt:2},children:[e.jsx("strong",{children:"Start Location:"})," ",((Q=(ae=y==null?void 0:y.startLocation)==null?void 0:ae.address)==null?void 0:Q.display_name)||"N/A"]}),e.jsxs(X,{sx:{mt:2},children:[e.jsx("strong",{children:"End Location:"})," ",((ne=(se=y==null?void 0:y.endLocation)==null?void 0:se.address)==null?void 0:ne.display_name)||"N/A"]}),e.jsxs(X,{sx:{mt:2},children:[e.jsx("strong",{children:"Start Time:"})," ",y!=null&&y.startTime?ee(new Date(y.startTime).toISOString()).format("MMMM Do YYYY, h:mm:ss A"):"N/A"]}),e.jsxs(X,{sx:{mt:2},children:[e.jsx("strong",{children:"End Time:"})," ",y!=null&&y.endTime?ee(new Date(y.endTime).toISOString()).format("MMMM Do YYYY, h:mm:ss A"):"N/A"]})]}),e.jsx(Mt,{children:e.jsx(J,{onClick:G,children:"Close"})})]})})]})},Ot=Rt;function ds(){const{w_customer_id:n}=E(c=>c.auth),{collapsed:h}=E(c=>c.auth),{mode:k,selectedVehicleGroup:M}=E(c=>c.dashboard),{vehicleList:p,selectedVehicle:b}=E(c=>c.liveMap),[w,g]=o.useState(!1),[A,I]=o.useState(!0),[t,x]=o.useState([]),[Y,D]=o.useState(!1);o.useState([]);const[R,H]=o.useState({lat:18.516726,lng:73.856255});o.useState([]);const[y,N]=o.useState(!1),$=Se(k);let O=de();o.useEffect(()=>{f()},[]),o.useEffect(()=>{var c,_,T;Object.keys(b).length===0&&p.length>0&&O(Qe({imei:(_=(c=p[0])==null?void 0:c.imei[0])==null?void 0:_.mac_id,reg_id:(T=p[0])==null?void 0:T.registration_id}))},[b,p]);const f=async()=>{try{let c=[],_=[];const T=await O(Ze({w_customer_id:n}));if(Array.isArray(T.payload)){T.payload.forEach(v=>{var G,V,te;Array.isArray(v.imei)&&v.imei.length>0&&((G=v.imei[0])!=null&&G.mac_id)?(c.push({id:v.id,label:v.registration_id,value:(V=v.imei[0])==null?void 0:V.mac_id,workShop:v==null?void 0:v.workshop,vehicle_group:v==null?void 0:v.vehicle_group}),_.push((te=v.imei[0])==null?void 0:te.mac_id)):console.error("IMEI data not found for item:",v)});const F="one",K=_;_.length>0&&O(et({type:F,imei:K})),O(tt({w_customer_id:n})),x(c)}else console.error("Unexpected data format:",T),U.error("Unexpected data format:")}catch(c){console.error("Error fetching vehicle data:",c),U.error(`Error fetching vehicle data: ${c}`)}},j=t.filter(c=>Object.keys(M).length===0||c.vehicle_group===M.id);return e.jsxs("div",{className:"app",children:[e.jsx(st,{}),e.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[e.jsx(ot,{title:"Trip Monitor",setShowVehicles:g,showVehicles:w,setShowCard:I,showCard:A,sideBarTrip:Y,setSideBarTrip:D,setShowVehiclesGroup:N,showVehiclesGroup:y}),e.jsx(mt,{setShowVehiclesGroup:N,showVehiclesGroup:y,where:"tripmonitor"}),e.jsxs(C,{style:{display:"flex",width:"100%",height:"95vh"},children:[e.jsx(C,{style:{width:w||Y?"80%":"100%"},children:e.jsx(Yt,{center:R,showCard:A})}),w&&e.jsx(C,{style:{width:"20%",backgroundColor:$.grey[100]},children:e.jsx(at,{vehicleData:j,setShowVehicles:g,showVehicles:w,title:"Live Monitor"})}),e.jsx(C,{style:{width:h?"22%":"20%",display:Y?"block":"none",backgroundColor:$.grey[100]},children:e.jsx(Ot,{})})]})]})]})}export{ds as default};
