import{a as u,r as L,u as T,j as r,P,t as s,_ as x,b as V,Q as E,S as M}from"./index-DC0H0P0O.js";import{d as A,t as O}from"./Search-CpzIG1qB.js";import{B as n,C as R}from"./CircularProgress-DIEDOwos.js";import{F as N,I as Q,O as W,a as Y}from"./OutlinedInput-j_QbgfSR.js";import{I as $}from"./IconButton-HGSK4y2F.js";const U=({vehicleData:i,title:b,setParameterData:y})=>{const{selectedVehicle:d,locationData:c,loading:f}=u(e=>e.liveMap),{mode:j}=u(e=>e.dashboard),t=O(j),[C,v]=L.useState("");let l=T();const h=i.length>0&&i.filter(e=>e.label.toLowerCase().includes(C.toLowerCase())),w=async e=>{var g;if(c.length<=0)return x.error("Data not available for this vehicle",{id:"clipboard"});const o=c.filter(a=>a.latestDocument.imei===e.value);if(o.length<=0)return x.error("Data not available for this vehicle",{id:"clipboard"});const{lat:k,lng:D}=o[0].latestDocument;l(V({lat:k,lng:D})),l(E({imei:e.value,reg_id:e.label}));const I=e.label,B=await l(M({w_registration_id:I})),p=[];let F=0;(g=B.payload)==null||g.map(a=>{a[a.parameter_type.toLowerCase()+"_parameter"].forEach(m=>{p.push({reg_id:e.label,imei:e.value,id:m.id,_id:a.id,key:F++,label:a.parameter_type==="Telematic"&&m.short_name})})}),b==="Live Map"&&y(p)},_=e=>{v(e.target.value)},S={backgroundColor:t.grey[100],position:"relative",width:"100%",float:"right",height:"90vh",overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin"};return r.jsx(r.Fragment,{children:r.jsx("div",{style:S,children:f?r.jsx(n,{sx:{display:"flex",justifyContent:"center",marginTop:"50%"},children:r.jsx(R,{})}):r.jsxs(r.Fragment,{children:[r.jsx(n,{sx:{align:"center",my:"15px",ml:"20px"},children:r.jsxs(N,{sx:{width:"90%",backgroundColor:t.grey[500],borderRadius:"5px"},variant:"outlined",children:[r.jsx(Q,{htmlFor:"outlined-adornment-password",style:{marginTop:"-8px",color:t.grey[400]},children:"Search"}),r.jsx(W,{onChange:e=>_(e),inputProps:{style:{padding:7,color:t.grey[400]}},id:"outlined-adornment-password",type:"text",endAdornment:r.jsx(Y,{position:"end",children:r.jsx($,{"aria-label":"toggle password visibility",edge:"end",children:r.jsx(A,{style:{color:t.grey[400]}})})}),label:"Search"})]})}),h.length>0&&h.map((e,o)=>r.jsx(n,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsx(P,{variant:"outlined",onClick:()=>{w(e)},sx:{width:"90%",bgcolor:e.label===d.reg_id?s.bgColor:"undefined",color:e.label===d.reg_id?"white":t.grey[400],border:`1px solid ${s.bgColor}`,"&:hover":{color:"black",border:"1px solid black",bgcolor:s.bgShadow}},children:e.label})},o))]})})})};export{U as V};
