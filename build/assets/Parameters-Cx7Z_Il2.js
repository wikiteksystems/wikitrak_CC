import{a as f,r as j,u as T,_ as O,S as A,j as o,P as N,t as i}from"./index-CF5yQFgl.js";import{d as V,t as z}from"./Search-C70iWLI6.js";import{B as v}from"./CircularProgress-DokMkeU4.js";import{F as D,I as M,O as R,a as $}from"./OutlinedInput-H9YrEzJe.js";import{I as q}from"./IconButton-FvjWlNEe.js";const W=({handleParameterChange:w,parametersData:n,setParameterData:C})=>{const{selectedParameterList:d,selectedVehicle:a,loading:G}=f(e=>e.liveMap),{mode:k}=f(e=>e.dashboard),[S,P]=j.useState(""),I=T(),s=z(k);j.useEffect(()=>{Object.keys(a).length>0?B(a.reg_id):O.error("Please select a vehicle",{id:"clipboard"})},[]);const l=n&&n.length>0&&n.filter(e=>e.label.toLowerCase().includes(S.toLowerCase())),L=e=>{P(e.target.value)},B=async e=>{var g;const p=await I(A({w_registration_id:e})),h=[];let E=0;(g=p.payload)==null||g.map(r=>{r[r.parameter_type.toLowerCase()+"_parameter"].forEach(t=>{var _,x,m,b,y;const u=r.parameter_type==="Telematic"?t.short_name:r.parameter_type==="IVN"?t.pid_description:t.spn;h.push({reg_id:a.reg_id,imei:a.imei,id:t.id,_id:r.id,key:E++,label:u,param_type:r.parameter_type,param_header:(_=t==null?void 0:t.header)==null?void 0:_.device_header,unit:t==null?void 0:t.unit,param_id:r.id,vehicle_reg:(x=r==null?void 0:r.vehicle)==null?void 0:x.vin,param_group_id:(m=r.parameter_group[0])==null?void 0:m.id,param_group_name:(b=r.parameter_group[0])==null?void 0:b.group_name,param_group_color:(y=r.parameter_group[0])==null?void 0:y.color,checked:d[0].params.length>0&&d[0].params.some(F=>F.label===u)})})}),C(h)};return o.jsx(o.Fragment,{children:o.jsxs("div",{style:{backgroundColor:s.grey[100],position:"relative",height:"95vh"},children:[o.jsx(v,{sx:{align:"center",my:"15px",ml:"20px"},children:o.jsxs(D,{sx:{width:"90%",backgroundColor:s.grey[500]},variant:"outlined",children:[o.jsx(M,{htmlFor:"outlined-adornment-password",style:{marginTop:"-9px",color:s.grey[400]},children:"Search"}),o.jsx(R,{onChange:L,inputProps:{style:{padding:7}},id:"outlined-adornment-password",type:"text",endAdornment:o.jsx($,{position:"end",children:o.jsx(q,{"aria-label":"toggle password visibility",edge:"end",children:o.jsx(V,{})})}),label:"Search"})]})}),l&&l.length>0&&l.map((e,c)=>o.jsx(v,{sx:{align:"center",my:"6px",ml:"20px"},children:o.jsx(N,{variant:"outlined",sx:{width:"90%",bgcolor:e.checked?i.bgColor:"undefined",color:s.grey[400],border:`1px solid ${i.bgColor}`,fontSize:"12px","&:hover":{color:"black",border:"1px solid black",bgcolor:i.bgShadow}},onClick:p=>{w(e)},children:e.label})},c))]})})};export{W as P};
