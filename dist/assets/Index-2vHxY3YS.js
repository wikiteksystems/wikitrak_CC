import{c as Nt,j as s,g as dt,a as ht,r as v,u as gt,_ as mt,b as X,s as De,d as J,e as yt,f as $t,h as Ft,R as j,i as vt,k as ue,l as Mt,B as k,I as Vt,m as Bt,n as zt,o as Le,p as B,q as Wt,t as qe,v as xt,T as ee,F as Kt,w as Gt,V as de,x as bt,y as Pe,z as ze,A as At,C as Yt,D as Ht,E as Ut,G as ve,H as Ve,J as Zt,K as qt,L as Xt,M as Jt,N as Qt,O as Xe,P as en,Q as tn,S as je,U as nn,W as rn,X as on,Y as an,Z as sn,$ as ln,a0 as cn,a1 as un,a2 as fn,a3 as pn,a4 as dn,a5 as hn,a6 as gn}from"./index-D58bEPpO.js";import{u as mn,G as yn,M as vn}from"./esm-CjjiDMUF.js";import{u as xn,f as bn}from"./TripMap-KRfxf5bR.js";import{S as An}from"./Switch-CWMW1C81.js";import{f as M,_ as wt,a as wn,b as jt,c as jn,T as He,p as te,L as U,g as St,d as Ue,e as kt,D as Sn,C as kn,i as xe,h as he,S as On,A as Pn,j as _n,k as Je,l as ge,m as Tn,u as Cn,G as Rn,n as _e,o as In,q as Ot,r as En,s as Oe,w as Qe,t as Dn,v as Ln,R as Pt,B as Nn,x as $n,X as Fn,Y as Mn,y as _t,z as Vn}from"./BarChart-DwRNlzJB.js";import"./redTractor-NXgVJyvR.js";import"./EllipsisOutlined-BkLaEQsL.js";import"./index-BIyco3rD.js";const Bn=Nt(s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function zn(e){return dt("MuiAvatar",e)}ht("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Wn=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Kn=e=>{const{classes:t,variant:r,colorDefault:n}=e;return yt({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},zn,t)},Gn=De("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:X({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:X({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Yn=De("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Hn=De(Bn,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Un({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[o,i]=v.useState(!1);return v.useEffect(()=>{if(!r&&!n)return;i(!1);let a=!0;const l=new Image;return l.onload=()=>{a&&i("loaded")},l.onerror=()=>{a&&i("error")},l.crossOrigin=e,l.referrerPolicy=t,l.src=r,n&&(l.srcset=n),()=>{a=!1}},[e,t,r,n]),o}const Tt=v.forwardRef(function(t,r){const n=gt({props:t,name:"MuiAvatar"}),{alt:o,children:i,className:a,component:l="div",slots:f={},slotProps:c={},imgProps:u,sizes:b,src:A,srcSet:P,variant:x="circular"}=n,p=mt(n,Wn);let y=null;const O=Un(X({},u,{src:A,srcSet:P})),_=A||P,I=_&&O!=="error",R=X({},n,{colorDefault:!I,component:l,variant:x}),E=Kn(R),[z,K]=xn("img",{className:E.img,elementType:Yn,externalForwardedProps:{slots:f,slotProps:{img:X({},u,c.img)}},additionalProps:{alt:o,src:A,srcSet:P,sizes:b},ownerState:R});return I?y=s.jsx(z,X({},K)):i||i===0?y=i:_&&o?y=o[0]:y=s.jsx(Hn,{ownerState:R,className:E.fallback}),s.jsx(Gn,X({as:l,ownerState:R,className:J(E.root,a),ref:r},p,{children:y}))});function Zn(e){return dt("MuiFormGroup",e)}ht("MuiFormGroup",["root","row","error"]);const qn=["className","row"],Xn=e=>{const{classes:t,row:r,error:n}=e;return yt({root:["root",r&&"row",n&&"error"]},Zn,t)},Jn=De("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>X({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Qn=v.forwardRef(function(t,r){const n=gt({props:t,name:"MuiFormGroup"}),{className:o,row:i=!1}=n,a=mt(n,qn),l=$t(),f=Ft({props:n,muiFormControl:l,states:["error"]}),c=X({},n,{row:i,error:f.error}),u=Xn(c);return s.jsx(Jn,X({className:J(u.root,o),ownerState:c,ref:r},a))});var er=["points","className","baseLinePoints","connectNulls"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},me.apply(this,arguments)}function tr(e,t){if(e==null)return{};var r=nr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nr(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function et(e){return ar(e)||ir(e)||or(e)||rr()}function rr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function or(e,t){if(e){if(typeof e=="string")return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,t)}}function ir(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ar(e){if(Array.isArray(e))return We(e)}function We(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tt=function(t){return t&&t.x===+t.x&&t.y===+t.y},sr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){tt(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),tt(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Se=function(t,r){var n=sr(t);r&&(n=[n.reduce(function(i,a){return[].concat(et(i),et(a))},[])]);var o=n.map(function(i){return i.reduce(function(a,l,f){return"".concat(a).concat(f===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(o,"Z"):o},lr=function(t,r,n){var o=Se(t,n);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(Se(r.reverse(),n).slice(1))},cr=function(t){var r=t.points,n=t.className,o=t.baseLinePoints,i=t.connectNulls,a=tr(t,er);if(!r||!r.length)return null;var l=J("recharts-polygon",n);if(o&&o.length){var f=a.stroke&&a.stroke!=="none",c=lr(r,o,i);return j.createElement("g",{className:l},j.createElement("path",me({},M(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),f?j.createElement("path",me({},M(a,!0),{fill:"none",d:Se(r,i)})):null,f?j.createElement("path",me({},M(a,!0),{fill:"none",d:Se(o,i)})):null)}var u=Se(r,i);return j.createElement("path",me({},M(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",className:l,d:u}))},ur=wt,fr=wn,pr=jt;function dr(e,t){return e&&e.length?ur(e,pr(t),fr):void 0}var hr=dr;const gr=vt(hr);var mr=wt,yr=jt,vr=jn;function xr(e,t){return e&&e.length?mr(e,yr(t),vr):void 0}var br=xr;const Ar=vt(br);var wr=["cx","cy","angle","ticks","axisLine"],jr=["ticks","tick","angle","tickFormatter","stroke"];function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ke.apply(this,arguments)}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nt(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rt(e,t){if(e==null)return{};var r=Sr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Sr(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rt(n.key),n)}}function Or(e,t,r){return t&&ot(e.prototype,t),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pr(e,t,r){return t=Re(t),_r(e,Ct()?Reflect.construct(t,r||[],Re(e).constructor):t.apply(e,r))}function _r(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tr(e)}function Tr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ct=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Re(e)}function Cr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}function Ke(e,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Ke(e,t)}function Ne(e,t,r){return t=Rt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e){var t=Rr(e,"string");return be(t)=="symbol"?t:t+""}function Rr(e,t){if(be(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(be(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $e=function(e){function t(){return kr(this,t),Pr(this,t,arguments)}return Cr(t,e),Or(t,[{key:"getTickValueCoord",value:function(n){var o=n.coordinate,i=this.props,a=i.angle,l=i.cx,f=i.cy;return te(l,f,o,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,o;switch(n){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var n=this.props,o=n.cx,i=n.cy,a=n.angle,l=n.ticks,f=gr(l,function(u){return u.coordinate||0}),c=Ar(l,function(u){return u.coordinate||0});return{cx:o,cy:i,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:f.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,i=n.cy,a=n.angle,l=n.ticks,f=n.axisLine,c=rt(n,wr),u=l.reduce(function(x,p){return[Math.min(x[0],p.coordinate),Math.max(x[1],p.coordinate)]},[1/0,-1/0]),b=te(o,i,u[0],a),A=te(o,i,u[1],a),P=le(le(le({},M(c,!1)),{},{fill:"none"},M(f,!1)),{},{x1:b.x,y1:b.y,x2:A.x,y2:A.y});return j.createElement("line",ke({className:"recharts-polar-radius-axis-line"},P))}},{key:"renderTicks",value:function(){var n=this,o=this.props,i=o.ticks,a=o.tick,l=o.angle,f=o.tickFormatter,c=o.stroke,u=rt(o,jr),b=this.getTickTextAnchor(),A=M(u,!1),P=M(a,!1),x=i.map(function(p,y){var O=n.getTickValueCoord(p),_=le(le(le(le({textAnchor:b,transform:"rotate(".concat(90-l,", ").concat(O.x,", ").concat(O.y,")")},A),{},{stroke:"none",fill:c},P),{},{index:y},O),{},{payload:p});return j.createElement(U,ke({className:J("recharts-polar-radius-axis-tick",St(a)),key:"tick-".concat(p.coordinate)},Ue(n.props,p,y)),t.renderTickItem(a,_,f?f(p.value,y):p.value))});return j.createElement(U,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,o=n.ticks,i=n.axisLine,a=n.tick;return!o||!o.length?null:j.createElement(U,{className:J("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),a&&this.renderTicks(),kt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,o,i){var a;return j.isValidElement(n)?a=j.cloneElement(n,o):ue(n)?a=n(o):a=j.createElement(He,ke({},o,{className:"recharts-polar-radius-axis-tick-value"}),i),a}}])}(v.PureComponent);Ne($e,"displayName","PolarRadiusAxis");Ne($e,"axisType","radiusAxis");Ne($e,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fe.apply(this,arguments)}function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?it(Object(r),!0).forEach(function(n){Fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Et(n.key),n)}}function Er(e,t,r){return t&&at(e.prototype,t),r&&at(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dr(e,t,r){return t=Ie(t),Lr(e,It()?Reflect.construct(t,r||[],Ie(e).constructor):t.apply(e,r))}function Lr(e,t){if(t&&(Ae(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nr(e)}function Nr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(It=function(){return!!e})()}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ie(e)}function $r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Ge(e,t)}function Fe(e,t,r){return t=Et(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e){var t=Fr(e,"string");return Ae(t)=="symbol"?t:t+""}function Fr(e,t){if(Ae(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ae(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mr=Math.PI/180,st=1e-5,Me=function(e){function t(){return Ir(this,t),Dr(this,t,arguments)}return $r(t,e),Er(t,[{key:"getTickLineCoord",value:function(n){var o=this.props,i=o.cx,a=o.cy,l=o.radius,f=o.orientation,c=o.tickSize,u=c||8,b=te(i,a,l,n.coordinate),A=te(i,a,l+(f==="inner"?-1:1)*u,n.coordinate);return{x1:b.x,y1:b.y,x2:A.x,y2:A.y}}},{key:"getTickTextAnchor",value:function(n){var o=this.props.orientation,i=Math.cos(-n.coordinate*Mr),a;return i>st?a=o==="outer"?"start":"end":i<-st?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,i=n.cy,a=n.radius,l=n.axisLine,f=n.axisLineType,c=ce(ce({},M(this.props,!1)),{},{fill:"none"},M(l,!1));if(f==="circle")return j.createElement(Sn,fe({className:"recharts-polar-angle-axis-line"},c,{cx:o,cy:i,r:a}));var u=this.props.ticks,b=u.map(function(A){return te(o,i,a,A.coordinate)});return j.createElement(cr,fe({className:"recharts-polar-angle-axis-line"},c,{points:b}))}},{key:"renderTicks",value:function(){var n=this,o=this.props,i=o.ticks,a=o.tick,l=o.tickLine,f=o.tickFormatter,c=o.stroke,u=M(this.props,!1),b=M(a,!1),A=ce(ce({},u),{},{fill:"none"},M(l,!1)),P=i.map(function(x,p){var y=n.getTickLineCoord(x),O=n.getTickTextAnchor(x),_=ce(ce(ce({textAnchor:O},u),{},{stroke:"none",fill:c},b),{},{index:p,payload:x,x:y.x2,y:y.y2});return j.createElement(U,fe({className:J("recharts-polar-angle-axis-tick",St(a)),key:"tick-".concat(x.coordinate)},Ue(n.props,x,p)),l&&j.createElement("line",fe({className:"recharts-polar-angle-axis-tick-line"},A,y)),a&&t.renderTickItem(a,_,f?f(x.value,p):x.value))});return j.createElement(U,{className:"recharts-polar-angle-axis-ticks"},P)}},{key:"render",value:function(){var n=this.props,o=n.ticks,i=n.radius,a=n.axisLine;return i<=0||!o||!o.length?null:j.createElement(U,{className:J("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,o,i){var a;return j.isValidElement(n)?a=j.cloneElement(n,o):ue(n)?a=n(o):a=j.createElement(He,fe({},o,{className:"recharts-polar-angle-axis-tick-value"}),i),a}}])}(v.PureComponent);Fe(Me,"displayName","PolarAngleAxis");Fe(Me,"axisType","angleAxis");Fe(Me,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Te;function we(e){"@babel/helpers - typeof";return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lt(Object(r),!0).forEach(function(n){Y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lt(n.key),n)}}function Br(e,t,r){return t&&ct(e.prototype,t),r&&ct(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zr(e,t,r){return t=Ee(t),Wr(e,Dt()?Reflect.construct(t,r||[],Ee(e).constructor):t.apply(e,r))}function Wr(e,t){if(t&&(we(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kr(e)}function Kr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dt=function(){return!!e})()}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ee(e)}function Gr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Ye(e,t)}function Y(e,t,r){return t=Lt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lt(e){var t=Yr(e,"string");return we(t)=="symbol"?t:t+""}function Yr(e,t){if(we(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(we(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ne=function(e){function t(r){var n;return Vr(this,t),n=zr(this,t,[r]),Y(n,"pieRef",null),Y(n,"sectorRefs",[]),Y(n,"id",Cn("recharts-pie-")),Y(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ue(o)&&o()}),Y(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ue(o)&&o()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Gr(t,e),Br(t,[{key:"isActiveIndex",value:function(n){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(n)!==-1:n===o}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.label,l=i.labelLine,f=i.dataKey,c=i.valueKey,u=M(this.props,!1),b=M(a,!1),A=M(l,!1),P=a&&a.offsetRadius||20,x=n.map(function(p,y){var O=(p.startAngle+p.endAngle)/2,_=te(p.cx,p.cy,p.outerRadius+P,O),I=C(C(C(C({},u),p),{},{stroke:"none"},b),{},{index:y,textAnchor:t.getTextAnchor(_.x,p.cx)},_),R=C(C(C(C({},u),p),{},{fill:"none",stroke:p.fill},A),{},{index:y,points:[te(p.cx,p.cy,p.outerRadius,O),_]}),E=f;return xe(f)&&xe(c)?E="value":xe(f)&&(E=c),j.createElement(U,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,R,"line"),t.renderLabelItem(a,I,he(p,E)))});return j.createElement(U,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var o=this,i=this.props,a=i.activeShape,l=i.blendStroke,f=i.inactiveShape;return n.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&n.length!==1)return null;var b=o.isActiveIndex(u),A=f&&o.hasActiveIndex()?f:null,P=b?a:A,x=C(C({},c),{},{stroke:l?c.fill:c.stroke,tabIndex:-1});return j.createElement(U,ye({ref:function(y){y&&!o.sectorRefs.includes(y)&&o.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Ue(o.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),j.createElement(On,ye({option:P,isActive:b,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,o=this.props,i=o.sectors,a=o.isAnimationActive,l=o.animationBegin,f=o.animationDuration,c=o.animationEasing,u=o.animationId,b=this.state,A=b.prevSectors,P=b.prevIsAnimationActive;return j.createElement(Pn,{begin:l,duration:f,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(P),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var p=x.t,y=[],O=i&&i[0],_=O.startAngle;return i.forEach(function(I,R){var E=A&&A[R],z=R>0?_n(I,"paddingAngle",0):0;if(E){var K=Je(E.endAngle-E.startAngle,I.endAngle-I.startAngle),L=C(C({},I),{},{startAngle:_+z,endAngle:_+K(p)+z});y.push(L),_=L.endAngle}else{var V=I.endAngle,F=I.startAngle,Z=Je(0,V-F),q=Z(p),W=C(C({},I),{},{startAngle:_+z,endAngle:_+q+z});y.push(W),_=W.endAngle}}),j.createElement(U,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var o=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var l=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[l].focus(),o.setState({sectorToFocus:l});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,o=n.sectors,i=n.isAnimationActive,a=this.state.prevSectors;return i&&o&&o.length&&(!a||!Mt(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,o=this.props,i=o.hide,a=o.sectors,l=o.className,f=o.label,c=o.cx,u=o.cy,b=o.innerRadius,A=o.outerRadius,P=o.isAnimationActive,x=this.state.isAnimationFinished;if(i||!a||!a.length||!ge(c)||!ge(u)||!ge(b)||!ge(A))return null;var p=J("recharts-pie",l);return j.createElement(U,{tabIndex:this.props.rootTabIndex,className:p,ref:function(O){n.pieRef=O}},this.renderSectors(),f&&this.renderLabels(a),kt.renderCallByParent(this.props,null,!1),(!P||x)&&Tn.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return o.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:n.sectors!==o.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,o){return n>o?"start":n<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,o,i){if(j.isValidElement(n))return j.cloneElement(n,o);if(ue(n))return n(o);var a=J("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return j.createElement(kn,ye({},o,{key:i,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(n,o,i){if(j.isValidElement(n))return j.cloneElement(n,o);var a=i;if(ue(n)&&(a=n(o),j.isValidElement(a)))return a;var l=J("recharts-pie-label-text",typeof n!="boolean"&&!ue(n)?n.className:"");return j.createElement(He,ye({},o,{alignmentBaseline:"middle",className:l}),a)}}])}(v.PureComponent);Te=ne;Y(ne,"displayName","Pie");Y(ne,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Rn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Y(ne,"parseDeltaAngle",function(e,t){var r=_e(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Y(ne,"getRealPieData",function(e){var t=e.data,r=e.children,n=M(e,!1),o=In(r,Ot);return t&&t.length?t.map(function(i,a){return C(C(C({payload:i},n),i),o&&o[a]&&o[a].props)}):o&&o.length?o.map(function(i){return C(C({},n),i.props)}):[]});Y(ne,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,o=t.width,i=t.height,a=En(o,i),l=n+Oe(e.cx,o,o/2),f=r+Oe(e.cy,i,i/2),c=Oe(e.innerRadius,a,0),u=Oe(e.outerRadius,a,a*.8),b=e.maxRadius||Math.sqrt(o*o+i*i)/2;return{cx:l,cy:f,innerRadius:c,outerRadius:u,maxRadius:b}});Y(ne,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?C(C({},t.type.defaultProps),t.props):t.props,o=Te.getRealPieData(n);if(!o||!o.length)return null;var i=n.cornerRadius,a=n.startAngle,l=n.endAngle,f=n.paddingAngle,c=n.dataKey,u=n.nameKey,b=n.valueKey,A=n.tooltipType,P=Math.abs(n.minAngle),x=Te.parseCoordinateOfPie(n,r),p=Te.parseDeltaAngle(a,l),y=Math.abs(p),O=c;xe(c)&&xe(b)?(Qe(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),O="value"):xe(c)&&(Qe(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),O=b);var _=o.filter(function(L){return he(L,O,0)!==0}).length,I=(y>=360?_:_-1)*f,R=y-_*P-I,E=o.reduce(function(L,V){var F=he(V,O,0);return L+(ge(F)?F:0)},0),z;if(E>0){var K;z=o.map(function(L,V){var F=he(L,O,0),Z=he(L,u,V),q=(ge(F)?F:0)/E,W;V?W=K.endAngle+_e(p)*f*(F!==0?1:0):W=a;var re=W+_e(p)*((F!==0?P:0)+q*R),oe=(W+re)/2,T=(x.innerRadius+x.outerRadius)/2,N=[{name:Z,value:F,payload:L,dataKey:O,type:A}],d=te(x.cx,x.cy,T,oe);return K=C(C(C({percent:q,cornerRadius:i,name:Z,tooltipPayload:N,midAngle:oe,middleRadius:T,tooltipPosition:d},L),x),{},{value:he(L,O),startAngle:W,endAngle:re,payload:L,paddingAngle:_e(p)*f}),K})}return C(C({},x),{},{sectors:z,data:o})});var Hr=Dn({chartName:"PieChart",GraphicalChild:ne,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Me},{axisType:"radiusAxis",AxisComp:$e}],formatAxisMap:Ln,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Ur=({data:e})=>s.jsx(Pt,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:s.jsxs(Nn,{data:e,children:[s.jsx($n,{strokeDasharray:"3 3"}),s.jsx(Fn,{dataKey:"name"}),s.jsx(Mn,{}),s.jsx(_t,{}),s.jsx(Vn,{dataKey:"value",fill:"#82ca9d"})]})});function Zr({searchQuery:e,setSearchQuery:t,map:r}){const n=async o=>{if(o.preventDefault(),e.trim()==="")return;const i={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(r).findPlaceFromQuery(i,(l,f)=>{if(f===window.google.maps.places.PlacesServiceStatus.OK&&l){const c=l[0];r.setCenter(c.geometry.location),r.setZoom(14)}})};return s.jsxs(k,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[s.jsx(Vt,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),s.jsx(Bt,{type:"submit",sx:{p:1},children:s.jsx(zt,{})})]})}const qr=({setLoading:e})=>{const t=Le(),{center:r,selectedParameterList:n,selectedVehicle:o,vehicleList:i,tractorIcon:a,icons:l,locationData:f,ivnPid:c,placesData:u}=B(T=>T.liveMap),{mode:b,AreaCoveredTrips:A}=B(T=>T.dashboard),{isLoaded:P,loadError:x}=mn({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[p,y]=v.useState(null),[O,_]=v.useState(!0),[I,R]=v.useState(5),[E,z]=v.useState(),[K,L]=v.useState(""),V=v.useRef(null),F=xt(b),Z=v.useCallback(T=>{V.current=T},[]),q=Wt(T=>{if(!T||T.length===0)return;const N=10;let d=0;const m=h=>{T.slice(h,h+N).forEach($=>{var w;((w=$==null?void 0:$.data)==null?void 0:w.length)>0&&(d+=bn($==null?void 0:$.data,t))}),h+N<T.length?setTimeout(()=>m(h+N),0):(console.log("calculated acreage: ",d),t(qe(d.toFixed(2))),e(!1))};m(0)},300);v.useEffect(()=>(A&&A.length>0?(e(!0),q(A)):(e(!1),t(qe(0))),()=>{q.cancel(),e(!1)}),[A,t]),v.useEffect(()=>{if(O)z(f);else{let T=f==null?void 0:f.filter(N=>(N==null?void 0:N._id)===(o==null?void 0:o.imei));z(T)}},[f,o,O]);const W=()=>{if(!O)t(Gt({lat:21,lng:78})),R(4),_(N=>!N);else{const T=f.find(N=>N.latestDocument.imei===o.imei);if(T){console.log(T.latestDocument,"getCenter");const{lat:N,lng:d}=T.latestDocument;_(m=>!m)}else de.error("Data is not available for selected vehicle")}};if(v.useEffect(()=>{P&&y(window.google.maps)},[P,f]),x)return"Error loading maps";if(!P)return"Loading maps";const re={height:"100vh",borderRadius:"8px"},oe=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return p?s.jsxs("div",{children:[s.jsxs(k,{style:{fontSize:"20px",color:F.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[s.jsx(ee,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),s.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(Zr,{searchQuery:K,setSearchQuery:L,map:V.current}),s.jsx(Qn,{sx:{marginLeft:0,paddingTop:0,color:F.grey[400]},children:s.jsx(Kt,{control:s.jsx(An,{checked:O,onChange:W}),label:O?"Group":"Individual"})})]})]}),s.jsx(yn,{mapContainerStyle:re,zoom:I,center:r,onLoad:Z,options:{mapTypeControl:!1,styles:b?oe:""},children:E&&E.length>0&&E.map((T,N)=>s.jsx(vn,{position:{lat:T.latestDocument.lat,lng:T.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},N))})]}):null};function Xr(){const{vehicles_details:e}=B(n=>n.dashboard),[t,r]=v.useState([]);return v.useEffect(()=>{const n=e.reduce((i,a)=>{const l=a.sell_date?bt(a.sell_date):null,f=l&&l.isValid()?l.format("MMM YYYY"):"N/A";return i[f]=(i[f]||0)+1,i},{}),o=Object.keys(n).map(i=>({name:i,value:n[i]}));r(o)},[e]),s.jsxs(k,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[s.jsx(Pe,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),s.jsxs(k,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[s.jsx(k,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:s.jsx(Pe,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),s.jsx(Ur,{data:t})]}),s.jsx(Pe,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const ut=Math.PI/180,Jr=({cx:e,cy:t,midAngle:r,innerRadius:n,outerRadius:o,percent:i,index:a})=>{const l=n+(o-n)*.5,f=e+l*Math.cos(-r*ut),c=t+l*Math.sin(-r*ut);return s.jsx("text",{x:f,y:c,fill:"white",textAnchor:f>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(i*100).toFixed(0)}%`})},Qr=({data:e,COLORS:t})=>{v.useEffect(()=>{},[e]);const r=e.every(n=>n.value===0);return s.jsx(k,{sx:{width:"100%",height:"100%"},children:r?s.jsx(k,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:s.jsx(ee,{sx:{textAlign:"center"},children:"No data available to display."})}):s.jsx(Pt,{width:"100%",height:"100%",children:s.jsxs(Hr,{children:[s.jsx(ne,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:Jr,fill:"#8884d8",dataKey:"value",children:e.map((n,o)=>s.jsx(Ot,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),s.jsx(_t,{})]})})})},Ce=({title:e})=>s.jsx(ee,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),Be=({label:e,count:t,color:r,type:n,title:o})=>{let i=Le(),{vehicleZone:a}=B(c=>c.dashboard),l=At();const f=(c,u)=>{if(c==="Vehicle Status")console.log("Vehicle label: ",u),i(Ht(u)),i(Ut(!0));else if(c==="Breakdown"){switch(console.log("breakdown label: ",u),u){case"Open":i(ve("Open"));break;case"Overdue":i(ve("overdue"));break;case"Closed":i(ve("Close"));break}l("/breakdown")}};return s.jsxs(k,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[s.jsxs(k,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(k,{sx:{width:"12px",height:"12px",bgcolor:r,borderRadius:"50%",marginRight:"8px"}}),s.jsx(Yt,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{f(o,e)},children:e})]}),s.jsx(k,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?s.jsx(ee,{color:r,children:t}):s.jsx(Tt,{sx:{bgcolor:r,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},eo=({data:e,colors:t})=>{const{loading:r,isDriverBehaviorLoading:n}=B(o=>o.dashboard);return s.jsxs(k,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[s.jsxs(k,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[s.jsx(ee,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),s.jsx(k,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,i)=>s.jsxs(k,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[s.jsx(ee,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),s.jsx(Tt,{sx:{bgcolor:t[i],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},i))})]}),s.jsx(k,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?s.jsx(ee,{sx:{fontSize:"14px"},children:"Loading..."}):s.jsx(Qr,{data:e,COLORS:t})})]})},ft=({statuses:e,title:t})=>{let r=Le(),n=At();const o=i=>{if(t==="Inspection Approvals"){switch(console.log("status: ",i),i.label){case"Rejected":r(ve("Rejected"));break;case"Pending":r(ve("Open"));break;case"Approved":r(ve("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(i.label){case"Overdue":r(Ve("Overdue"));break;case"Due soon":r(Ve("Due soon"));break;case"Serviced":r(Ve("Serviced"));break}n("/service")}};return s.jsxs(k,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Ce,{title:t}),s.jsx(k,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((i,a)=>s.jsxs(k,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(i)},children:[s.jsx(ee,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:i.color,margin:"30px 0"},"aria-label":"color",children:i.count}),s.jsx(ee,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:i.label})]},a))})]})},pt={total:0,online:0,offline:0,running:0};function to({vehicleReport:e,imeiNo:t,loading:r,isloadingReport:n}){var d,m,h,D,$,w,ae;const{vehicleList:o,onlineVehicle:i,locationData:a}=B(g=>g.liveMap),{isDriverBehaviorLoading:l}=B(g=>g.dashboard),{breakdownStatusCount:f}=B(g=>g.breakdown),{inspectionStatusCount:c}=B(g=>g.inspection),{vehicleStatesData:u}=B(g=>g.report),{report:b,driver_behavior:A,overdueCount:P,completedCount:x,serviceSoonCount:p,selectedVehicleGroup:y,areaCovered:O}=B(g=>g.dashboard),[_,I]=v.useState(0),[R,E]=v.useState(pt);v.useEffect(()=>{if((o==null?void 0:o.length)>0){let g={...pt};if(y){const S=F(y==null?void 0:y.id);console.log("result",S);const G=o.filter(Q=>Q.vehicle_group===y.id);g.total=G.length,g.online=S.onlineCount,g.running=S.runningCount,g.offline=g.total-g.online}console.log("Updated Vehicle Count:",g),E(g)}console.log("vehicleList",o)},[y]),v.useEffect(()=>{if((o==null?void 0:o.length)>0){let g=0;o==null||o.map(S=>{var G;((G=S==null?void 0:S.imei)==null?void 0:G.length)>0&&g++}),I(g)}},[o]),v.useEffect(()=>{},[P,x,p]);const z=g=>{if(!g)return!1;const S=String(g).toLowerCase();return i.some(G=>String(G).toLowerCase()===S)},K=g=>a==null?void 0:a.some(S=>String(S.latestDocument.imei)===String(g)&&S.latestDocument.speed>0&&(S.latestDocument.ignition===!0||S.latestDocument.ignition===1)),L=g=>a==null?void 0:a.some(S=>String(S.latestDocument.imei)===String(g)&&S.latestDocument.speed<=0&&(S.latestDocument.ignition===!0||S.latestDocument.ignition===1)),V=()=>{let g=0,S=0,G=0;return o&&o.length>0&&o.map(Q=>{var Ze;let pe=(Ze=Q==null?void 0:Q.imei[0])==null?void 0:Ze.mac_id,ie=z(pe),H=K(pe),se=L(pe);ie&&g++,ie&&H&&S++,ie&&se&&G++}),{onlineCount:g,runningCount:S,idelingCount:G}},F=g=>{let S=0,G=0;return i.forEach(Q=>{if(t.includes(String(Q))){const pe=a==null?void 0:a.find(ie=>{var H;return String((H=ie==null?void 0:ie.latestDocument)==null?void 0:H.imei)===String(Q)});if(pe&&o.some(H=>{var se;return H.vehicle_group===g&&((se=H==null?void 0:H.imei[0])==null?void 0:se.mac_id)===String(Q)})){S++;const{speed:H,ignition:se}=pe.latestDocument;H>0&&(se===!0||se===1)&&G++}}}),{onlineCount:S,runningCount:G}};v.useEffect(()=>{},[u]);const Z=[{name:"Overspeed O",value:((d=u==null?void 0:u.totals)==null?void 0:d.total_overSpeedTimeSec)||0},{name:"Economy E",value:((m=u==null?void 0:u.totals)==null?void 0:m.total_economyTimeSec)||0},{name:"Steady S",value:((h=u==null?void 0:u.totals)==null?void 0:h.total_idleTimeSec)||0}],q=["#0088FE","#00C49F","#FFBB28","#FF8042"],W=[{label:"Rejected",count:c.rejected||0,color:"#FF0202"},{label:"Pending",count:c.open||0,color:"black"},{label:"Approved",count:c.close||0,color:"green"}],re=[{label:"Overdue",count:P,color:"#FF0202"},{label:"Due soon",count:p,color:"black"},{label:"Serviced",count:x,color:"green"}],oe=[{name:"Total Vehicles",count:Object.keys(y).length>0?R.total:_,color:"grey"},{name:"Online",count:Object.keys(y).length>0?R.online:V().onlineCount,color:"red"},{name:"Offline",count:Object.keys(y).length>0?R.offline:_-V().onlineCount,color:"grey"},{name:"Running",count:Object.keys(y).length>0?R.running:V().runningCount,color:"green"},{name:"Idling",count:Object.keys(y).length>0?R.online-R.running:V().idelingCount,color:"yellow"}],T=[{name:"Distance Covered",count:((D=u==null?void 0:u.totals)==null?void 0:D.totalDistance)||0,color:"grey"},{name:"Running time",count:(($=u==null?void 0:u.totals)==null?void 0:$.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((w=u==null?void 0:u.totals)==null?void 0:w.total_idleTime)||0,color:ze.bgColor},{name:"Engine Hrs",count:((ae=u==null?void 0:u.totals)==null?void 0:ae.total_engineHours)||0,color:ze.bgColor}],N=[{name:"Open",count:f.open,color:"grey"},{name:"Overdue",count:f.overDue,color:"red"},{name:"Closed",count:f.close,color:"green"}];return s.jsxs(s.Fragment,{children:[s.jsx(eo,{data:Z,colors:q}),s.jsxs(k,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[s.jsx(Ce,{title:"Vehicles Status"}),s.jsx(k,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:oe.map((g,S)=>s.jsx(Be,{label:g.name,count:g.count,color:g.color,title:"Vehicle Status"},S+1))})]}),s.jsx(ft,{statuses:re,title:"Service Remainder"}),s.jsxs(k,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Ce,{title:"Assigned Vehicles"}),s.jsx(k,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:T.map((g,S)=>s.jsx(Be,{type:"assignVehicle",label:g.name,count:g.count,color:g.color},S+1))})]}),s.jsxs(k,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Ce,{title:"Breakdown Resolved"}),s.jsx(k,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:N.map((g,S)=>s.jsx(Be,{label:g.name,count:g.count,color:g.color,title:"Breakdown"}))})]}),s.jsx(ft,{statuses:W,title:"Inspection Approvals"})]})}const uo=()=>{const{w_customer_id:e,collapsed:t}=B(d=>d.auth),{mode:r,selectedTripData:n,selectedVehicleGroup:o,showVehicles:i,vehicleZone:a}=B(d=>d.dashboard),{breakdowns:l}=B(d=>d.breakdown),{inspectionHistory:f}=B(d=>d.inspection),[c,u]=v.useState(()=>{const d=sessionStorage.getItem("imeiNo");return d?JSON.parse(d):[]}),{selectedVehicle:b,vehicleList:A,onlineVehicle:P,locationData:x}=B(d=>d.liveMap),p=Le(),y=xt(r),[O,_]=v.useState([]),[I,R]=v.useState(!1),[E,z]=v.useState({}),[K,L]=v.useState(!1),[V,F]=v.useState(!1),[Z,q]=v.useState(!1);v.useEffect(()=>{(async()=>{await re()})(),p(Zt())},[]);const W=d=>{let m=A.find(h=>{var D;return((D=h==null?void 0:h.imei[0])==null?void 0:D.mac_id)==d});return(m==null?void 0:m.registration_id)||d};v.useEffect(()=>{if(f.length>0){let d={open:0,rejected:0,close:0};f.map(m=>{m.status==="Open"&&d.open++,m.status==="Close"&&d.close++,m.status==="Rejected"&&d.rejected++}),p(qt(d))}},[l]),v.useEffect(()=>{if(l.length>0){let d={open:0,overDue:0,close:0};l.map(m=>{if(m.status==="Open"&&d.open++,m.status==="Close"&&d.close++,m.submission_date){const h=new Date(m.submission_date),D=new Date;D.setHours(0,0,0,0),h.setHours(0,0,0,0),h<D&&m.status=="Open"&&d.overDue++}}),p(Xt(d))}},[l]),v.useEffect(()=>{p(Jt())},[]),v.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(c))},[c]),v.useEffect(()=>{var d,m,h;Object.keys(b).length===0&&A.length>0&&p(Qt({imei:(m=(d=A[0])==null?void 0:d.imei[0])==null?void 0:m.mac_id,reg_id:(h=A[0])==null?void 0:h.registration_id}))},[b,A]),v.useEffect(()=>{let d=A.map(h=>{var D;return((D=h==null?void 0:h.imei[0])==null?void 0:D.mac_id)||null}).filter(h=>h),m={imeiList:d,startDate:Xe(new Date).format("MM-DD-YYYY"),endDate:Xe(new Date).format("MM-DD-YYYY")};d&&d.length>0&&p(en(m)),p(tn())},[A]),v.useEffect(()=>{(async()=>{if(b!=null&&b.imei){const m=bt(),h=m.startOf("day").format("MM/DD/YYYY HH:mm:ss"),D=m.endOf("day").format("MM/DD/YYYY HH:mm:ss"),$={imei:b.imei,startTime:h,endTime:D};try{p(ln($))}catch(w){console.error("Error fetching report:",w)}}})()},[b,p]),v.useEffect(()=>{const d=h=>{(h==null?void 0:h.imei)!==null&&c.find(w=>parseInt(w)===(h==null?void 0:h.imei))&&de.error(`Type: ${h==null?void 0:h.type} ${h==null?void 0:h.msg} ${W(h==null?void 0:h.imei)}`,{id:"geofence",autoClose:5e3})},m=h=>{(h==null?void 0:h.imei)!==null&&c.find(w=>parseInt(w)===(h==null?void 0:h.imei))&&de.error(`${h==null?void 0:h.msg} ${W(h==null?void 0:h.imei)}`,{id:"speed",autoClose:5e3})};return je.on("geofenceAlert",d),je.on("speedAlert",m),()=>{je.off("geofenceAlert",d),je.off("speedAlert",m)}},[c,je]);const re=async()=>{try{let d=[],m=[];const h=await p(cn({w_customer_id:e}));if(Array.isArray(h.payload)){h.payload.forEach(w=>{var ae,g;Array.isArray(w.imei)&&w.imei.length>0?(d.push({id:w.id,label:w.registration_id,value:(ae=w==null?void 0:w.imei[0])==null?void 0:ae.mac_id,vehilce_type:w==null?void 0:w.segment,sell_date:w==null?void 0:w.sell_date,workShop:w==null?void 0:w.workshop,vehicle_group:w==null?void 0:w.vehicle_group}),m.push((g=w.imei[0])==null?void 0:g.mac_id),w.registration_id):(console.error("IMEI data not found for item:",w),de.error(`IMEI Number not found for the vehicle: ${w==null?void 0:w.registration_id}`,{duration:2e3}))}),u(m);const D="one",$=m;m.length>0&&(p(un({type:D,imei:$})),p(fn($))),_(d),p(pn(d)),p(dn({w_customer_id:e})),p(hn(e)),p(gn({}))}else console.error("Unexpected data format:",h),de.error("Unexpected data format:")}catch(d){console.error("Error fetching vehicle data:",d),de.error(`Error fetching vehicle data: ${d}`)}},oe=d=>x==null?void 0:x.some(m=>String(m.latestDocument.imei)===String(d)&&m.latestDocument.speed>0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),T=d=>x==null?void 0:x.some(m=>String(m.latestDocument.imei)===String(d)&&m.latestDocument.speed<=0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),N=O.filter(d=>{if(!(Object.keys(o).length===0||d.vehicle_group===o.id))return!1;const h=d.value,D=String(d.value).toLowerCase(),$=P.some(S=>String(S).toLowerCase()===D),w=!P.some(S=>String(S).toLowerCase()===D),ae=$&&oe(h),g=$&&T(h);switch(a){case"Total Vehicles":return!0;case"Online":return $;case"Running":return ae;case"Offline":return w;case"Idling":return g;default:return!0}});return s.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[s.jsx(nn,{}),s.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[s.jsx(rn,{title:"Dashboard",setShowNotification:R,showNotification:I,setShowVehiclesGroup:L,showVehiclesGroup:K}),s.jsx(on,{setShowVehiclesGroup:L,showVehiclesGroup:K}),s.jsxs(k,{sx:{height:"92vh",backgroundColor:y.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[i&&s.jsx(k,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:y.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:s.jsx(an,{vehicleData:N,showVehicles:i})}),s.jsx(Pe,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),s.jsxs(k,{sx:{display:"flex",gap:"30px",background:ze.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[s.jsxs(k,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[I&&s.jsx(sn,{showNotification:I,setShowNotification:R}),"              ",s.jsx(Xr,{}),s.jsx(k,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:s.jsx(qr,{setLoading:F})})]}),s.jsx(k,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:s.jsx(to,{vehicleReport:E,imeiNo:c,loading:V,isloadingReport:Z})})]})]})]})]})};export{uo as default};
