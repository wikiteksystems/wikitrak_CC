import{c as vn,s as bn,_ as K,h as gt,r as Qe,a as jn,d as kn,m as Sn,b as y,e as An,f as pe,j as i,g as he,u as Pn,i as xt,k as Ke,l as He,n as Cn,o as ct,p as me,q as Ue,t as Wt,T as Z,R as E,v as ut,w as Ie,x as ge,y as G,z as yt,A as On,B as ue,C as zt,D as rt,E as dt,F as se,G as wn,H as Tn,I as fe,J as et,K as Ee,L as Ae,M as vt,N as Gt,O as bt,P as Kt,Q as _n,S as jt,U as Rn,V as Dn,W as In,X as En,Y as Ln,Z as Fn,$ as $n,a0 as Nn,a1 as Mn,a2 as Vn,a3 as Bn,a4 as Yn,a5 as Wn}from"./index-CTkhISWS.js";import{s as Te}from"./Socket-DLjvxrzW.js";import{d as zn,t as Ht}from"./Search-B8KaEu9H.js";import{V as Gn}from"./VehicleMenu-BvTPtNx2.js";import"./DateTimePicker-B_053Rry.js";import{f as H,_ as Ut,a as qt,b as Kn,c as Hn,i as be,T as pt,p as ne,L as ee,d as ft,e as Zt,D as Un,G as qn,u as Zn,C as Xn,g as Pe,h as ye,S as Jn,A as Qn,j as er,k as kt,l as tr,m as je,n as nr,o as rr,q as Xt,r as or,s as Le,w as St,t as $e,v as ir,x as sr,R as Jt,B as ar,y as lr,X as cr,Y as ur,z as Qt,E as dr,F as pr}from"./TopBar-C97zmjmz.js";import"./proj-XQwXs9DQ.js";import{L as fr}from"./LeftSideBar2-ChCnEeg2.js";import{u as hr,G as mr,M as gr}from"./esm-DqdDmx5X.js";import{B as _}from"./CircularProgress-BtfWMK0B.js";import{r as xr,m as yr,a as vr,u as en,f as tn,I as br,F as At,b as Pt}from"./OutlinedInput-BptfRdp1.js";import{c as jr,I as nn}from"./IconButton-BFq29S61.js";import{f as kr}from"./TripMap-Bq2_daKp.js";import{S as Sr}from"./Switch-B8s9o85s.js";import{T as Ne}from"./index-Dswl9mzP.js";import{V as Ar}from"./VehicleGroups-DmTeheip.js";import{d as Pr}from"./Close-Pg18Ol1R.js";import{N as Cr}from"./NewLoader-qxQ6gpZB.js";import{S as Ct}from"./Select-DvAnSXcw.js";import{M as Fe}from"./MenuItem-CNipEDD9.js";import{T as rn,a as on,b as sn,c as Be,d as B,e as an}from"./TableRow-B_DBKy_d.js";import{P as ln}from"./Paper-CiQNsGfa.js";import{C as Ye}from"./Checkbox-BF87kgAh.js";import{T as cn,a as Or}from"./TablePagination-DgfdBqA4.js";import{D as ht,a as wr,b as un,c as dn}from"./DialogTitle-1Pr93vft.js";import{T as Tr,a as Ot}from"./Tabs-C0Fosbcz.js";import"./createSvgIcon-B8RWTts6.js";import"./RegionSelector-PPpxxeXN.js";import"./SearchTab-YHMQLTXW.js";import"./InputAdornment-BQGdcE5C.js";import"./TripGraph-tAncTB-T.js";import"./useIcons-C0f2nQSq.js";import"./SearchOutlined-SutUeNC9.js";import"./button-CZ2IJZOD.js";import"./roundedArrow-D1JlIit0.js";import"./index-VrboQCeR.js";import"./NotificationsNone-BnUkYuJo.js";import"./Tooltip-CROS0JFr.js";import"./usePreviousProps-CqKwpGw7.js";import"./menu2-CSH6e-AV.js";import"./redTractor-NXgVJyvR.js";import"./Info-Ckp9zFtt.js";import"./TextArea-CDyH6ymW.js";const _r=["component","direction","spacing","divider","children","className","useFlexGap"],Rr=vn(),Dr=bn("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Ir(e){return Pn({props:e,name:"MuiStack",defaultTheme:Rr})}function Er(e,t){const r=y.Children.toArray(e).filter(Boolean);return r.reduce((n,o,s)=>(n.push(o),s<r.length-1&&n.push(y.cloneElement(t,{key:`separator-${s}`})),n),[])}const Lr=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Fr=({ownerState:e,theme:t})=>{let r=K({display:"flex",flexDirection:"column"},gt({theme:t},Qe({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=jn(t),o=Object.keys(t.breakpoints.values).reduce((c,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(c[l]=!0),c),{}),s=Qe({values:e.direction,base:o}),a=Qe({values:e.spacing,base:o});typeof s=="object"&&Object.keys(s).forEach((c,l,h)=>{if(!s[c]){const m=l>0?s[h[l-1]]:"column";s[c]=m}}),r=kn(r,gt({theme:t},a,(c,l)=>e.useFlexGap?{gap:xt(n,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Lr(l?s[l]:e.direction)}`]:xt(n,c)}}))}return r=Sn(t.breakpoints,r),r};function $r(e={}){const{createStyledComponent:t=Dr,useThemeProps:r=Ir,componentName:n="MuiStack"}=e,o=()=>Ke({root:["root"]},c=>He(n,c),{}),s=t(Fr);return y.forwardRef(function(c,l){const h=r(c),v=An(h),{component:m="div",direction:P="column",spacing:b=0,divider:p,children:j,className:A,useFlexGap:O=!1}=v,T=pe(v,_r),L={direction:P,spacing:b,useFlexGap:O},D=o();return i.jsx(s,K({as:m,ownerState:L,ref:l,className:he(D.root,A)},T,{children:p?Er(j,p):j}))})}const Nr=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Mr=["component","slots","slotProps"],Vr=["component"];function Br(e,t){const{className:r,elementType:n,ownerState:o,externalForwardedProps:s,getSlotOwnerState:a,internalForwardedProps:u}=t,c=pe(t,Nr),{component:l,slots:h={[e]:void 0},slotProps:v={[e]:void 0}}=s,m=pe(s,Mr),P=h[e]||n,b=xr(v[e],o),p=yr(K({className:r},c,{externalForwardedProps:e==="root"?m:void 0,externalSlotProps:b})),{props:{component:j},internalRef:A}=p,O=pe(p.props,Vr),T=Cn(A,b==null?void 0:b.ref,t.ref),L=a?a(O):{},D=K({},o,L),d=e==="root"?j||l:j,w=vr(P,K({},e==="root"&&!l&&!h[e]&&u,e!=="root"&&!h[e]&&u,O,d&&{as:d},{ref:T}),D);return Object.keys(L).forEach(k=>{delete w[k]}),[P,w]}const Yr=jr(i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Wr(e){return He("MuiAvatar",e)}ct("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const zr=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Gr=e=>{const{classes:t,variant:r,colorDefault:n}=e;return Ke({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Wr,t)},Kr=me("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:K({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:K({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Hr=me("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ur=me(Yr,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function qr({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[o,s]=y.useState(!1);return y.useEffect(()=>{if(!r&&!n)return;s(!1);let a=!0;const u=new Image;return u.onload=()=>{a&&s("loaded")},u.onerror=()=>{a&&s("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=r,n&&(u.srcset=n),()=>{a=!1}},[e,t,r,n]),o}const Zr=y.forwardRef(function(t,r){const n=Ue({props:t,name:"MuiAvatar"}),{alt:o,children:s,className:a,component:u="div",slots:c={},slotProps:l={},imgProps:h,sizes:v,src:m,srcSet:P,variant:b="circular"}=n,p=pe(n,zr);let j=null;const A=qr(K({},h,{src:m,srcSet:P})),O=m||P,T=O&&A!=="error",L=K({},n,{colorDefault:!T,component:u,variant:b}),D=Gr(L),[d,w]=Br("img",{className:D.img,elementType:Hr,externalForwardedProps:{slots:c,slotProps:{img:K({},h,l.img)}},additionalProps:{alt:o,src:m,srcSet:P,sizes:v},ownerState:L});return T?j=i.jsx(d,K({},w)):s||s===0?j=s:O&&o?j=o[0]:j=i.jsx(Ur,{ownerState:L,className:D.fallback}),i.jsx(Kr,K({as:u,ownerState:L,className:he(D.root,a),ref:r},p,{children:j}))}),pn=Zr,Xr=$r({createStyledComponent:me("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Ue({props:e,name:"MuiStack"})}),Jr=Xr;function Qr(e){return He("MuiFormControlLabel",e)}const eo=ct("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),_e=eo,to=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],no=e=>{const{classes:t,disabled:r,labelPlacement:n,error:o,required:s}=e,a={root:["root",r&&"disabled",`labelPlacement${Wt(n)}`,o&&"error",s&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]};return Ke(a,Qr,t)},ro=me("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${_e.label}`]:t.label},t.root,t[`labelPlacement${Wt(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>K({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${_e.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${_e.label}`]:{[`&.${_e.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),oo=me("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${_e.error}`]:{color:(e.vars||e).palette.error.main}})),io=y.forwardRef(function(t,r){var n,o;const s=Ue({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:u={},control:c,disabled:l,disableTypography:h,label:v,labelPlacement:m="end",required:P,slotProps:b={}}=s,p=pe(s,to),j=en(),A=(n=l??c.props.disabled)!=null?n:j==null?void 0:j.disabled,O=P??c.props.required,T={disabled:A,required:O};["checked","name","onChange","value","inputRef"].forEach(N=>{typeof c.props[N]>"u"&&typeof s[N]<"u"&&(T[N]=s[N])});const L=tn({props:s,muiFormControl:j,states:["error"]}),D=K({},s,{disabled:A,labelPlacement:m,required:O,error:L.error}),d=no(D),w=(o=b.typography)!=null?o:u.typography;let k=v;return k!=null&&k.type!==Z&&!h&&(k=i.jsx(Z,K({component:"span"},w,{className:he(d.label,w==null?void 0:w.className),children:k}))),i.jsxs(ro,K({className:he(d.root,a),ownerState:D,ref:r},p,{children:[y.cloneElement(c,T),O?i.jsxs(Jr,{display:"block",children:[k,i.jsxs(oo,{ownerState:D,"aria-hidden":!0,className:d.asterisk,children:[" ","*"]})]}):k]}))}),so=io;function ao(e){return He("MuiFormGroup",e)}ct("MuiFormGroup",["root","row","error"]);const lo=["className","row"],co=e=>{const{classes:t,row:r,error:n}=e;return Ke({root:["root",r&&"row",n&&"error"]},ao,t)},uo=me("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>K({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),po=y.forwardRef(function(t,r){const n=Ue({props:t,name:"MuiFormGroup"}),{className:o,row:s=!1}=n,a=pe(n,lo),u=en(),c=tn({props:n,muiFormControl:u,states:["error"]}),l=K({},n,{row:s,error:c.error}),h=co(l);return i.jsx(uo,K({className:he(h.root,o),ownerState:l,ref:r},a))}),fo=po;var ho=["points","className","baseLinePoints","connectNulls"];function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ke.apply(this,arguments)}function mo(e,t){if(e==null)return{};var r=go(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function go(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function wt(e){return bo(e)||vo(e)||yo(e)||xo()}function xo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yo(e,t){if(e){if(typeof e=="string")return ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ot(e,t)}}function vo(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bo(e){if(Array.isArray(e))return ot(e)}function ot(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tt=function(t){return t&&t.x===+t.x&&t.y===+t.y},jo=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Tt(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Tt(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Re=function(t,r){var n=jo(t);r&&(n=[n.reduce(function(s,a){return[].concat(wt(s),wt(a))},[])]);var o=n.map(function(s){return s.reduce(function(a,u,c){return"".concat(a).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return n.length===1?"".concat(o,"Z"):o},ko=function(t,r,n){var o=Re(t,n);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(Re(r.reverse(),n).slice(1))},So=function(t){var r=t.points,n=t.className,o=t.baseLinePoints,s=t.connectNulls,a=mo(t,ho);if(!r||!r.length)return null;var u=he("recharts-polygon",n);if(o&&o.length){var c=a.stroke&&a.stroke!=="none",l=ko(r,o,s);return E.createElement("g",{className:u},E.createElement("path",ke({},H(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),c?E.createElement("path",ke({},H(a,!0),{fill:"none",d:Re(r,s)})):null,c?E.createElement("path",ke({},H(a,!0),{fill:"none",d:Re(o,s)})):null)}var h=Re(r,s);return E.createElement("path",ke({},H(a,!0),{fill:h.slice(-1)==="Z"?a.fill:"none",className:u,d:h}))},Ao=Ut,Po=Kn,Co=qt;function Oo(e,t){return e&&e.length?Ao(e,Co(t),Po):void 0}var wo=Oo;const To=ut(wo);var _o=Ut,Ro=qt,Do=Hn;function Io(e,t){return e&&e.length?_o(e,Ro(t),Do):void 0}var Eo=Io;const Lo=ut(Eo);var Fo=["cx","cy","angle","ticks","axisLine"],$o=["ticks","tick","angle","tickFormatter","stroke"];function Ce(e){"@babel/helpers - typeof";return Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(e)}function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},De.apply(this,arguments)}function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_t(Object(r),!0).forEach(function(n){qe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rt(e,t){if(e==null)return{};var r=No(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function No(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Mo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hn(n.key),n)}}function Vo(e,t,r){return t&&Dt(e.prototype,t),r&&Dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bo(e,t,r){return t=We(t),Yo(e,fn()?Reflect.construct(t,r||[],We(e).constructor):t.apply(e,r))}function Yo(e,t){if(t&&(Ce(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wo(e)}function Wo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fn=function(){return!!e})()}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},We(e)}function zo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},it(e,t)}function qe(e,t,r){return t=hn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){var t=Go(e,"string");return Ce(t)=="symbol"?t:String(t)}function Go(e,t){if(Ce(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ce(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ze=function(e){zo(t,e);function t(){return Mo(this,t),Bo(this,t,arguments)}return Vo(t,[{key:"getTickValueCoord",value:function(n){var o=n.coordinate,s=this.props,a=s.angle,u=s.cx,c=s.cy;return ne(u,c,o,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,o;switch(n){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=To(u,function(h){return h.coordinate||0}),l=Lo(u,function(h){return h.coordinate||0});return{cx:o,cy:s,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=n.axisLine,l=Rt(n,Fo),h=u.reduce(function(b,p){return[Math.min(b[0],p.coordinate),Math.max(b[1],p.coordinate)]},[1/0,-1/0]),v=ne(o,s,h[0],a),m=ne(o,s,h[1],a),P=le(le(le({},H(l,!1)),{},{fill:"none"},H(c,!1)),{},{x1:v.x,y1:v.y,x2:m.x,y2:m.y});return E.createElement("line",De({className:"recharts-polar-radius-axis-line"},P))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.angle,c=o.tickFormatter,l=o.stroke,h=Rt(o,$o),v=this.getTickTextAnchor(),m=H(h,!1),P=H(a,!1),b=s.map(function(p,j){var A=n.getTickValueCoord(p),O=le(le(le(le({textAnchor:v,transform:"rotate(".concat(90-u,", ").concat(A.x,", ").concat(A.y,")")},m),{},{stroke:"none",fill:l},P),{},{index:j},A),{},{payload:p});return E.createElement(ee,De({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(p.coordinate)},ft(n.props,p,j)),t.renderTickItem(a,O,c?c(p.value,j):p.value))});return E.createElement(ee,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.axisLine,a=n.tick;return!o||!o.length?null:E.createElement(ee,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),a&&this.renderTicks(),Zt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,o,s){var a;return E.isValidElement(n)?a=E.cloneElement(n,o):be(n)?a=n(o):a=E.createElement(pt,De({},o,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}]),t}(y.PureComponent);qe(Ze,"displayName","PolarRadiusAxis");qe(Ze,"axisType","radiusAxis");qe(Ze,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Oe(e){"@babel/helpers - typeof";return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(e)}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(this,arguments)}function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?It(Object(r),!0).forEach(function(n){Xe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gn(n.key),n)}}function Ho(e,t,r){return t&&Et(e.prototype,t),r&&Et(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uo(e,t,r){return t=ze(t),qo(e,mn()?Reflect.construct(t,r||[],ze(e).constructor):t.apply(e,r))}function qo(e,t){if(t&&(Oe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zo(e)}function Zo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mn=function(){return!!e})()}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ze(e)}function Xo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},st(e,t)}function Xe(e,t,r){return t=gn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gn(e){var t=Jo(e,"string");return Oe(t)=="symbol"?t:String(t)}function Jo(e,t){if(Oe(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Oe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qo=Math.PI/180,Lt=1e-5,Je=function(e){Xo(t,e);function t(){return Ko(this,t),Uo(this,t,arguments)}return Ho(t,[{key:"getTickLineCoord",value:function(n){var o=this.props,s=o.cx,a=o.cy,u=o.radius,c=o.orientation,l=o.tickSize,h=l||8,v=ne(s,a,u,n.coordinate),m=ne(s,a,u+(c==="inner"?-1:1)*h,n.coordinate);return{x1:v.x,y1:v.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var o=this.props.orientation,s=Math.cos(-n.coordinate*Qo),a;return s>Lt?a=o==="outer"?"start":"end":s<-Lt?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.radius,u=n.axisLine,c=n.axisLineType,l=ce(ce({},H(this.props,!1)),{},{fill:"none"},H(u,!1));if(c==="circle")return E.createElement(Un,de({className:"recharts-polar-angle-axis-line"},l,{cx:o,cy:s,r:a}));var h=this.props.ticks,v=h.map(function(m){return ne(o,s,a,m.coordinate)});return E.createElement(So,de({className:"recharts-polar-angle-axis-line"},l,{points:v}))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.tickLine,c=o.tickFormatter,l=o.stroke,h=H(this.props,!1),v=H(a,!1),m=ce(ce({},h),{},{fill:"none"},H(u,!1)),P=s.map(function(b,p){var j=n.getTickLineCoord(b),A=n.getTickTextAnchor(b),O=ce(ce(ce({textAnchor:A},h),{},{stroke:"none",fill:l},v),{},{index:p,payload:b,x:j.x2,y:j.y2});return E.createElement(ee,de({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(b.coordinate)},ft(n.props,b,p)),u&&E.createElement("line",de({className:"recharts-polar-angle-axis-tick-line"},m,j)),a&&t.renderTickItem(a,O,c?c(b.value,p):b.value))});return E.createElement(ee,{className:"recharts-polar-angle-axis-ticks"},P)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!o||!o.length?null:E.createElement(ee,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,o,s){var a;return E.isValidElement(n)?a=E.cloneElement(n,o):be(n)?a=n(o):a=E.createElement(pt,de({},o,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}]),t}(y.PureComponent);Xe(Je,"displayName","PolarAngleAxis");Xe(Je,"axisType","angleAxis");Xe(Je,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Me;function we(e){"@babel/helpers - typeof";return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(e)}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(this,arguments)}function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ft(Object(r),!0).forEach(function(n){J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yn(n.key),n)}}function ti(e,t,r){return t&&$t(e.prototype,t),r&&$t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ni(e,t,r){return t=Ge(t),ri(e,xn()?Reflect.construct(t,r||[],Ge(e).constructor):t.apply(e,r))}function ri(e,t){if(t&&(we(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function xn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xn=function(){return!!e})()}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ge(e)}function ve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},at(e,t)}function J(e,t,r){return t=yn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yn(e){var t=ii(e,"string");return we(t)=="symbol"?t:String(t)}function ii(e,t){if(we(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(we(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var re=function(e){oi(t,e);function t(r){var n;return ei(this,t),n=ni(this,t,[r]),J(ve(n),"pieRef",null),J(ve(n),"sectorRefs",[]),J(ve(n),"id",Zn("recharts-pie-")),J(ve(n),"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),be(o)&&o()}),J(ve(n),"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),be(o)&&o()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return ti(t,[{key:"isActiveIndex",value:function(n){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(n)!==-1:n===o}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,u=s.labelLine,c=s.dataKey,l=s.valueKey,h=H(this.props,!1),v=H(a,!1),m=H(u,!1),P=a&&a.offsetRadius||20,b=n.map(function(p,j){var A=(p.startAngle+p.endAngle)/2,O=ne(p.cx,p.cy,p.outerRadius+P,A),T=M(M(M(M({},h),p),{},{stroke:"none"},v),{},{index:j,textAnchor:t.getTextAnchor(O.x,p.cx)},O),L=M(M(M(M({},h),p),{},{fill:"none",stroke:p.fill},m),{},{index:j,points:[ne(p.cx,p.cy,p.outerRadius,A),O],key:"line"}),D=c;return Pe(c)&&Pe(l)?D="value":Pe(c)&&(D=l),E.createElement(ee,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(j)},u&&t.renderLabelLineItem(u,L),t.renderLabelItem(a,T,ye(p,D)))});return E.createElement(ee,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var o=this,s=this.props,a=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return n.map(function(l,h){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var v=o.isActiveIndex(h),m=c&&o.hasActiveIndex()?c:null,P=v?a:m,b=M(M({},l),{},{stroke:u?l.fill:l.stroke,tabIndex:-1});return E.createElement(ee,Se({ref:function(j){j&&!o.sectorRefs.includes(j)&&o.sectorRefs.push(j)},tabIndex:-1,className:"recharts-pie-sector"},ft(o.props,l,h),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(h)}),E.createElement(Jn,Se({option:P,isActive:v,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,o=this.props,s=o.sectors,a=o.isAnimationActive,u=o.animationBegin,c=o.animationDuration,l=o.animationEasing,h=o.animationId,v=this.state,m=v.prevSectors,P=v.prevIsAnimationActive;return E.createElement(Qn,{begin:u,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(P),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var p=b.t,j=[],A=s&&s[0],O=A.startAngle;return s.forEach(function(T,L){var D=m&&m[L],d=L>0?er(T,"paddingAngle",0):0;if(D){var w=kt(D.endAngle-D.startAngle,T.endAngle-T.startAngle),k=M(M({},T),{},{startAngle:O+d,endAngle:O+w(p)+d});j.push(k),O=k.endAngle}else{var N=T.endAngle,Y=T.startAngle,X=kt(0,N-Y),f=X(p),F=M(M({},T),{},{startAngle:O+d,endAngle:O+f+d});j.push(F),O=F.endAngle}}),E.createElement(ee,null,n.renderSectorsStatically(j))})}},{key:"attachKeyboardHandlers",value:function(n){var o=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var u=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[u].focus(),o.setState({sectorToFocus:u});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,o=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&o&&o.length&&(!a||!tr(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,o=this.props,s=o.hide,a=o.sectors,u=o.className,c=o.label,l=o.cx,h=o.cy,v=o.innerRadius,m=o.outerRadius,P=o.isAnimationActive,b=this.state.isAnimationFinished;if(s||!a||!a.length||!je(l)||!je(h)||!je(v)||!je(m))return null;var p=he("recharts-pie",u);return E.createElement(ee,{tabIndex:this.props.rootTabIndex,className:p,ref:function(A){n.pieRef=A}},this.renderSectors(),c&&this.renderLabels(a),Zt.renderCallByParent(this.props,null,!1),(!P||b)&&nr.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return o.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:n.sectors!==o.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,o){return n>o?"start":n<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,o){return E.isValidElement(n)?E.cloneElement(n,o):be(n)?n(o):E.createElement(Xn,Se({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,o,s){if(E.isValidElement(n))return E.cloneElement(n,o);var a=s;return be(n)&&(a=n(o),E.isValidElement(a))?a:E.createElement(pt,Se({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(y.PureComponent);Me=re;J(re,"displayName","Pie");J(re,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!qn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});J(re,"parseDeltaAngle",function(e,t){var r=$e(t-e),n=Math.min(Math.abs(t-e),360);return r*n});J(re,"getRealPieData",function(e){var t=e.props,r=t.data,n=t.children,o=H(e.props,!1),s=rr(n,Xt);return r&&r.length?r.map(function(a,u){return M(M(M({payload:a},o),a),s&&s[u]&&s[u].props)}):s&&s.length?s.map(function(a){return M(M({},o),a.props)}):[]});J(re,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,o=t.width,s=t.height,a=or(o,s),u=n+Le(e.props.cx,o,o/2),c=r+Le(e.props.cy,s,s/2),l=Le(e.props.innerRadius,a,0),h=Le(e.props.outerRadius,a,a*.8),v=e.props.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:u,cy:c,innerRadius:l,outerRadius:h,maxRadius:v}});J(re,"getComposedData",function(e){var t=e.item,r=e.offset,n=Me.getRealPieData(t);if(!n||!n.length)return null;var o=t.props,s=o.cornerRadius,a=o.startAngle,u=o.endAngle,c=o.paddingAngle,l=o.dataKey,h=o.nameKey,v=o.valueKey,m=o.tooltipType,P=Math.abs(t.props.minAngle),b=Me.parseCoordinateOfPie(t,r),p=Me.parseDeltaAngle(a,u),j=Math.abs(p),A=l;Pe(l)&&Pe(v)?(St(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A="value"):Pe(l)&&(St(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A=v);var O=n.filter(function(k){return ye(k,A,0)!==0}).length,T=(j>=360?O:O-1)*c,L=j-O*P-T,D=n.reduce(function(k,N){var Y=ye(N,A,0);return k+(je(Y)?Y:0)},0),d;if(D>0){var w;d=n.map(function(k,N){var Y=ye(k,A,0),X=ye(k,h,N),f=(je(Y)?Y:0)/D,F;N?F=w.endAngle+$e(p)*c*(Y!==0?1:0):F=a;var q=F+$e(p)*((Y!==0?P:0)+f*L),oe=(F+q)/2,$=(b.innerRadius+b.outerRadius)/2,V=[{name:X,value:Y,payload:k,dataKey:A,type:m}],g=ne(b.cx,b.cy,$,oe);return w=M(M(M({percent:f,cornerRadius:s,name:X,tooltipPayload:V,midAngle:oe,middleRadius:$,tooltipPosition:g},k),b),{},{value:ye(k,A),startAngle:F,endAngle:q,payload:k,paddingAngle:$e(p)*c}),w})}return M(M({},b),{},{sectors:d,data:n})});var si=ir({chartName:"PieChart",GraphicalChild:re,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Je},{axisType:"radiusAxis",AxisComp:Ze}],formatAxisMap:sr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ai=({data:e})=>i.jsx(Jt,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:i.jsxs(ar,{data:e,children:[i.jsx(lr,{strokeDasharray:"3 3"}),i.jsx(cr,{dataKey:"name"}),i.jsx(ur,{}),i.jsx(Qt,{}),i.jsx(dr,{dataKey:"value",fill:"#82ca9d"})]})});function li({searchQuery:e,setSearchQuery:t,map:r}){const n=async o=>{if(o.preventDefault(),e.trim()==="")return;const s={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(r).findPlaceFromQuery(s,(u,c)=>{if(c===window.google.maps.places.PlacesServiceStatus.OK&&u){const l=u[0];r.setCenter(l.geometry.location),r.setZoom(14)}})};return i.jsxs(_,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[i.jsx(br,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),i.jsx(nn,{type:"submit",sx:{p:1},children:i.jsx(zn,{})})]})}var ci="Expected a function",Nt=NaN,ui="[object Symbol]",di=/^\s+|\s+$/g,pi=/^[-+]0x[0-9a-f]+$/i,fi=/^0b[01]+$/i,hi=/^0o[0-7]+$/i,mi=parseInt,gi=typeof Ie=="object"&&Ie&&Ie.Object===Object&&Ie,xi=typeof self=="object"&&self&&self.Object===Object&&self,yi=gi||xi||Function("return this")(),vi=Object.prototype,bi=vi.toString,ji=Math.max,ki=Math.min,tt=function(){return yi.Date.now()};function Si(e,t,r){var n,o,s,a,u,c,l=0,h=!1,v=!1,m=!0;if(typeof e!="function")throw new TypeError(ci);t=Mt(t)||0,lt(r)&&(h=!!r.leading,v="maxWait"in r,s=v?ji(Mt(r.maxWait)||0,t):s,m="trailing"in r?!!r.trailing:m);function P(d){var w=n,k=o;return n=o=void 0,l=d,a=e.apply(k,w),a}function b(d){return l=d,u=setTimeout(A,t),h?P(d):a}function p(d){var w=d-c,k=d-l,N=t-w;return v?ki(N,s-k):N}function j(d){var w=d-c,k=d-l;return c===void 0||w>=t||w<0||v&&k>=s}function A(){var d=tt();if(j(d))return O(d);u=setTimeout(A,p(d))}function O(d){return u=void 0,m&&n?P(d):(n=o=void 0,a)}function T(){u!==void 0&&clearTimeout(u),l=0,n=c=o=u=void 0}function L(){return u===void 0?a:O(tt())}function D(){var d=tt(),w=j(d);if(n=arguments,o=this,c=d,w){if(u===void 0)return b(c);if(v)return u=setTimeout(A,t),P(c)}return u===void 0&&(u=setTimeout(A,t)),a}return D.cancel=T,D.flush=L,D}function lt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ai(e){return!!e&&typeof e=="object"}function Pi(e){return typeof e=="symbol"||Ai(e)&&bi.call(e)==ui}function Mt(e){if(typeof e=="number")return e;if(Pi(e))return Nt;if(lt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=lt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(di,"");var r=fi.test(e);return r||hi.test(e)?mi(e.slice(2),r?2:8):pi.test(e)?Nt:+e}var Ci=Si;const Oi=ut(Ci),wi=({setLoading:e})=>{const t=ge(),{center:r,selectedParameterList:n,selectedVehicle:o,vehicleList:s,tractorIcon:a,icons:u,locationData:c,ivnPid:l,placesData:h}=G($=>$.liveMap),{mode:v,AreaCoveredTrips:m}=G($=>$.dashboard),{isLoaded:P,loadError:b}=hr({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[p,j]=y.useState(null),[A,O]=y.useState(!0),[T,L]=y.useState(5),[D,d]=y.useState(),[w,k]=y.useState(""),N=y.useRef(null),Y=Ht(v),X=y.useCallback($=>{N.current=$},[]),f=Oi($=>{if(!$||$.length===0)return;const V=10;let g=0;const C=x=>{$.slice(x,x+V).forEach(z=>{var R;((R=z==null?void 0:z.data)==null?void 0:R.length)>0&&(g+=kr(z==null?void 0:z.data,t))}),x+V<$.length?setTimeout(()=>C(x+V),0):(console.log("calculated acreage: ",g),t(yt(g.toFixed(2))),e(!1))};C(0)},300);y.useEffect(()=>(m&&m.length>0?(e(!0),f(m)):(e(!1),t(yt(0))),()=>{f.cancel(),e(!1)}),[m,t]),y.useEffect(()=>{if(A)d(c);else{let $=c==null?void 0:c.filter(V=>(V==null?void 0:V._id)===(o==null?void 0:o.imei));d($)}},[c,o,A]);const F=()=>{if(!A)t(On({lat:21,lng:78})),L(4),O(V=>!V);else{const $=c.find(V=>V.latestDocument.imei===o.imei);$?(console.log($.latestDocument,"getCenter"),$.latestDocument,O(V=>!V)):ue.error("Data is not available for selected vehicle")}};if(y.useEffect(()=>{P&&j(window.google.maps)},[P,c]),b)return"Error loading maps";if(!P)return"Loading maps";const q={height:"100vh",borderRadius:"8px"},oe=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return p?i.jsxs("div",{children:[i.jsxs(_,{style:{fontSize:"20px",color:Y.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[i.jsx(Z,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),i.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(li,{searchQuery:w,setSearchQuery:k,map:N.current}),i.jsx(fo,{sx:{marginLeft:0,paddingTop:0,color:Y.grey[400]},children:i.jsx(so,{control:i.jsx(Sr,{checked:A,onChange:F}),label:A?"Group":"Individual"})})]})]}),i.jsx(mr,{mapContainerStyle:q,zoom:T,center:r,onLoad:X,options:{mapTypeControl:!1,styles:v?oe:""},children:D&&D.length>0&&D.map(($,V)=>i.jsx(gr,{position:{lat:$.latestDocument.lat,lng:$.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},V))})]}):null};function Ti(){const{vehicles_details:e}=G(n=>n.dashboard),[t,r]=y.useState([]);return y.useEffect(()=>{const n=e.reduce((s,a)=>{const u=a.sell_date?zt(a.sell_date):null,c=u&&u.isValid()?u.format("MMM YYYY"):"N/A";return s[c]=(s[c]||0)+1,s},{}),o=Object.keys(n).map(s=>({name:s,value:n[s]}));r(o)},[e]),i.jsxs(_,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[i.jsx(Ne,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),i.jsxs(_,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[i.jsx(_,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:i.jsx(Ne,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),i.jsx(ai,{data:t})]}),i.jsx(Ne,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const Vt=Math.PI/180,_i=({cx:e,cy:t,midAngle:r,innerRadius:n,outerRadius:o,percent:s,index:a})=>{const u=n+(o-n)*.5,c=e+u*Math.cos(-r*Vt),l=t+u*Math.sin(-r*Vt);return i.jsx("text",{x:c,y:l,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(s*100).toFixed(0)}%`})},Ri=({data:e,COLORS:t})=>{y.useEffect(()=>{},[e]);const r=e.every(n=>n.value===0);return i.jsx(_,{sx:{width:"100%",height:"100%"},children:r?i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:i.jsx(Z,{sx:{textAlign:"center"},children:"No data available to display."})}):i.jsx(Jt,{width:"100%",height:"100%",children:i.jsxs(si,{children:[i.jsx(re,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:_i,fill:"#8884d8",dataKey:"value",children:e.map((n,o)=>i.jsx(Xt,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),i.jsx(Qt,{})]})})})},Ve=({title:e})=>i.jsx(Z,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),nt=({label:e,count:t,color:r,type:n,title:o})=>{let s=ge(),{vehicleZone:a}=G(l=>l.dashboard),u=dt();const c=(l,h)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",h),s(wn(h)),s(Tn(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",h),h){case"Open":s(fe("Open"));break;case"Overdue":s(fe("overdue"));break;case"Closed":s(fe("Close"));break}u("/breakdown")}};return i.jsxs(_,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[i.jsxs(_,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(_,{sx:{width:"12px",height:"12px",bgcolor:r,borderRadius:"50%",marginRight:"8px"}}),i.jsx(se,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{c(o,e)},children:e})]}),i.jsx(_,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?i.jsx(Z,{color:r,children:t}):i.jsx(pn,{sx:{bgcolor:r,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},Di=({data:e,colors:t})=>{const{loading:r,isDriverBehaviorLoading:n}=G(o=>o.dashboard);return i.jsxs(_,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[i.jsx(Z,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),i.jsx(_,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,s)=>i.jsxs(_,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[i.jsx(Z,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),i.jsx(pn,{sx:{bgcolor:t[s],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},s))})]}),i.jsx(_,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?i.jsx(Z,{sx:{fontSize:"14px"},children:"Loading..."}):i.jsx(Ri,{data:e,COLORS:t})})]})},Bt=({statuses:e,title:t})=>{let r=ge(),n=dt();const o=s=>{if(t==="Inspection Approvals"){switch(console.log("status: ",s),s.label){case"Rejected":r(fe("Rejected"));break;case"Pending":r(fe("Open"));break;case"Approved":r(fe("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(s.label){case"Overdue":r(et("Overdue"));break;case"Due soon":r(et("Due soon"));break;case"Serviced":r(et("Serviced"));break}n("/service")}};return i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx(Ve,{title:t}),i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((s,a)=>i.jsxs(_,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(s)},children:[i.jsx(Z,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:s.color,margin:"30px 0"},"aria-label":"color",children:s.count}),i.jsx(Z,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:s.label})]},a))})]})},Yt={total:0,online:0,offline:0,running:0};function Ii({vehicleReport:e,imeiNo:t,loading:r,isloadingReport:n}){var V,g,C,x,W,z,R;const{vehicleList:o,onlineVehicle:s,locationData:a}=G(S=>S.liveMap);G(S=>S.dashboard);const{breakdownStatusCount:u}=G(S=>S.breakdown),{inspectionStatusCount:c}=G(S=>S.inspection),{vehicleStatesData:l}=G(S=>S.report),{report:h,driver_behavior:v,overdueCount:m,completedCount:P,serviceSoonCount:b,selectedVehicleGroup:p,areaCovered:j}=G(S=>S.dashboard),[A,O]=y.useState(0),[T,L]=y.useState(Yt);y.useEffect(()=>{if((o==null?void 0:o.length)>0){let S={...Yt};if(p){const I=N(p==null?void 0:p.id);console.log("result",I);const U=o.filter(te=>te.vehicle_group===p.id);S.total=U.length,S.online=I.onlineCount,S.running=I.runningCount,S.offline=S.total-S.online}console.log("Updated Vehicle Count:",S),L(S)}console.log("vehicleList",o)},[p]),y.useEffect(()=>{if((o==null?void 0:o.length)>0){let S=0;o==null||o.map(I=>{var U;((U=I==null?void 0:I.imei)==null?void 0:U.length)>0&&S++}),O(S)}},[o]),y.useEffect(()=>{},[m,P,b]);const D=S=>{if(!S)return!1;const I=String(S).toLowerCase();return s.some(U=>String(U).toLowerCase()===I)},d=S=>a==null?void 0:a.some(I=>String(I.latestDocument.imei)===String(S)&&I.latestDocument.speed>0&&(I.latestDocument.ignition===!0||I.latestDocument.ignition===1)),w=S=>a==null?void 0:a.some(I=>String(I.latestDocument.imei)===String(S)&&I.latestDocument.speed<=0&&(I.latestDocument.ignition===!0||I.latestDocument.ignition===1)),k=()=>{let S=0,I=0,U=0;return o&&o.length>0&&o.map(te=>{var mt;let xe=(mt=te==null?void 0:te.imei[0])==null?void 0:mt.mac_id,ie=D(xe),Q=d(xe),ae=w(xe);ie&&S++,ie&&Q&&I++,ie&&ae&&U++}),{onlineCount:S,runningCount:I,idelingCount:U}},N=S=>{let I=0,U=0;return s.forEach(te=>{if(t.includes(String(te))){const xe=a==null?void 0:a.find(ie=>{var Q;return String((Q=ie==null?void 0:ie.latestDocument)==null?void 0:Q.imei)===String(te)});if(xe&&o.some(Q=>{var ae;return Q.vehicle_group===S&&((ae=Q==null?void 0:Q.imei[0])==null?void 0:ae.mac_id)===String(te)})){I++;const{speed:Q,ignition:ae}=xe.latestDocument;Q>0&&(ae===!0||ae===1)&&U++}}}),{onlineCount:I,runningCount:U}};y.useEffect(()=>{},[l]);const Y=[{name:"Overspeed O",value:((V=l==null?void 0:l.totals)==null?void 0:V.total_overSpeedTimeSec)||0},{name:"Economy E",value:((g=l==null?void 0:l.totals)==null?void 0:g.total_economyTimeSec)||0},{name:"Steady S",value:((C=l==null?void 0:l.totals)==null?void 0:C.total_idleTimeSec)||0}],X=["#0088FE","#00C49F","#FFBB28","#FF8042"],f=[{label:"Rejected",count:c.rejected||0,color:"#FF0202"},{label:"Pending",count:c.open||0,color:"black"},{label:"Approved",count:c.close||0,color:"green"}],F=[{label:"Overdue",count:m,color:"#FF0202"},{label:"Due soon",count:b,color:"black"},{label:"Serviced",count:P,color:"green"}],q=[{name:"Total Vehicles",count:Object.keys(p).length>0?T.total:A,color:"grey"},{name:"Online",count:Object.keys(p).length>0?T.online:k().onlineCount,color:"red"},{name:"Offline",count:Object.keys(p).length>0?T.offline:A-k().onlineCount,color:"grey"},{name:"Running",count:Object.keys(p).length>0?T.running:k().runningCount,color:"green"},{name:"Idling",count:Object.keys(p).length>0?T.online-T.running:k().idelingCount,color:"yellow"}],oe=[{name:"Distance Covered",count:((x=l==null?void 0:l.totals)==null?void 0:x.totalDistance)||0,color:"grey"},{name:"Running time",count:((W=l==null?void 0:l.totals)==null?void 0:W.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((z=l==null?void 0:l.totals)==null?void 0:z.total_idleTime)||0,color:rt.bgColor},{name:"Engine Hrs",count:((R=l==null?void 0:l.totals)==null?void 0:R.total_engineHours)||0,color:rt.bgColor}],$=[{name:"Open",count:u.open,color:"grey"},{name:"Overdue",count:u.overDue,color:"red"},{name:"Closed",count:u.close,color:"green"}];return i.jsxs(i.Fragment,{children:[i.jsx(Di,{data:Y,colors:X}),i.jsxs(_,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[i.jsx(Ve,{title:"Vehicles Status"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:q.map((S,I)=>i.jsx(nt,{label:S.name,count:S.count,color:S.color,title:"Vehicle Status"},I+1))})]}),i.jsx(Bt,{statuses:F,title:"Service Remainder"}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx(Ve,{title:"Assigned Vehicles"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:oe.map((S,I)=>i.jsx(nt,{type:"assignVehicle",label:S.name,count:S.count,color:S.color},I+1))})]}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx(Ve,{title:"Breakdown Resolved"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:$.map((S,I)=>i.jsx(nt,{label:S.name,count:S.count,color:S.color,title:"Breakdown"}))})]}),i.jsx(Bt,{statuses:f,title:"Inspection Approvals"})]})}const Ei=()=>{var X;const{allAlerts:e,loading:t}=G(f=>f.geofence),{vehicleList:r}=G(f=>f.liveMap),n=ge(),[o,s]=y.useState(0),[a,u]=y.useState(10),[c,l]=y.useState([]),[h,v]=y.useState(""),[m,P]=y.useState(""),[b,p]=y.useState(!1);y.useEffect(()=>{console.log("allalert",e.filter(f=>f._id==="67fde2c226ec73328f071edd"))},[e]),y.useEffect(()=>{console.log("vehicleList",r)},[r]);let j=f=>r.find(F=>{var q;return((q=F==null?void 0:F.imei[0])==null?void 0:q.mac_id)==f||""});const A=(f,F)=>s(F),O=f=>{u(parseInt(f.target.value,10)),s(0)},T=f=>{l(F=>F.includes(f)?F.filter(q=>q!==f):[...F,f])},L=f=>c.includes(f),D=f=>{if(f.target.checked){const F=k==null?void 0:k.map(q=>q._id);l(F)}else l([])},d=()=>{console.log("vhehicle list",Y);let f={imeiList:Y,startDate:Ae(new Date).format("MM-DD-YYYY"),endDate:Ae(new Date).format("MM-DD-YYYY")};n(Gt(f))},w=async()=>{try{if(c.length===0)return;const f=await n(vt({ids:c}));vt.fulfilled.match(f)?(l([]),d()):console.error("Delete failed:",f==null?void 0:f.payload)}catch(f){console.error("Delete error:",f)}},k=(X=e==null?void 0:e.filter(f=>h?f.type===h:!0))==null?void 0:X.filter(f=>m?f.imei===m:!0),N=[...new Set(e==null?void 0:e.map(f=>f.type))],Y=[...new Set(e==null?void 0:e.map(f=>f.imei))];return i.jsxs(_,{children:[t&&i.jsx(Cr,{}),i.jsxs(Ee,{container:!0,spacing:2,sx:{mb:2},children:[i.jsx(Ee,{item:!0,xs:6,md:3,children:i.jsxs(At,{fullWidth:!0,children:[i.jsx(Pt,{children:"Alert Type"}),i.jsxs(Ct,{value:h,label:"Alert Type",onChange:f=>{v(f.target.value),s(0)},children:[i.jsx(Fe,{value:"",children:"All"}),N.map(f=>i.jsx(Fe,{value:f,children:f},f))]})]})}),i.jsx(Ee,{item:!0,xs:6,md:3,children:i.jsxs(At,{fullWidth:!0,children:[i.jsx(Pt,{children:"Vehicle"}),i.jsxs(Ct,{value:m,label:"Vehicle",onChange:f=>{P(f.target.value),s(0)},children:[i.jsx(Fe,{value:"",children:"All"}),Y.map(f=>{var F;return i.jsx(Fe,{value:f,children:(F=j(f))==null?void 0:F.registration_id},f)})]})]})}),i.jsx(Ee,{item:!0,xs:12,md:3,display:"flex",alignItems:"center",children:i.jsx(se,{variant:"contained",color:"error",disabled:c.length===0,onClick:()=>p(!0),children:"Delete Selected"})})]}),i.jsxs(rn,{component:ln,sx:{maxHeight:700},children:[i.jsxs(on,{stickyHeader:!0,children:[i.jsx(sn,{children:i.jsxs(Be,{children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Ye,{checked:k.length>0&&c.length===k.length,indeterminate:c.length>0&&c.length<k.length,onChange:D})}),i.jsx(B,{children:"Sr no"}),i.jsx(B,{children:"Vehicle"}),i.jsx(B,{children:"Alert type"}),i.jsx(B,{children:"Message"}),i.jsx(B,{children:"Created Time"})]})}),i.jsx(an,{children:k==null?void 0:k.slice(o*a,o*a+a).map((f,F)=>i.jsxs(Be,{hover:!0,selected:L(f._id),onClick:()=>T(f._id),sx:{cursor:"pointer"},children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Ye,{checked:L(f._id)})}),i.jsx(B,{children:o*a+F+1}),i.jsx(B,{children:j(f==null?void 0:f.imei).registration_id}),i.jsx(B,{children:f==null?void 0:f.type}),i.jsx(B,{children:f==null?void 0:f.msg}),i.jsx(B,{children:Ae(new Date(f==null?void 0:f.createdAt)).format("DD-MM-YYYY HH:mm")})]},f==null?void 0:f._id))})]}),i.jsx(cn,{rowsPerPageOptions:[12],component:"div",count:k.length,rowsPerPage:a,page:o,onPageChange:A,onRowsPerPageChange:O})]}),i.jsx(ht,{open:b,onClose:()=>p(!1),children:i.jsxs(_,{p:3,children:[i.jsx(Z,{variant:"h6",children:"Confirm Deletion"}),i.jsxs(Z,{sx:{my:2},children:["Are you sure you want to delete ",c.length," selected notifications?"]}),i.jsxs(_,{display:"flex",justifyContent:"flex-end",gap:2,children:[i.jsx(se,{onClick:()=>p(!1),variant:"outlined",children:"Cancel"}),i.jsx(se,{onClick:async()=>{await w(),p(!1)},color:"error",variant:"contained",children:"Confirm Delete"})]})]})})]})},Li=()=>{const{allNotification:e}=G(d=>d.geofence),t=ge(),r=dt(),[n,o]=y.useState(0),[s,a]=y.useState(10),[u,c]=y.useState([]),[l,h]=y.useState(!1),[v,m]=y.useState(!1),P=(d,w)=>o(w),b=d=>{a(parseInt(d.target.value,10)),o(0)},p=d=>{c(w=>w.includes(d)?w.filter(k=>k!==d):[...w,d])},j=d=>u.includes(d),A=e||[],O=A.slice(n*s,n*s+s),T=d=>{const w=d.target.checked;if(h(w),w){const k=A.map(N=>N.id);c(k)}else c([])},L=async()=>{try{console.log("Deleting rows:",u);const d=await t(bt({ids:u}));bt.fulfilled.match(d)?(c([]),t(Kt())):console.error("Delete failed:",d==null?void 0:d.payload),m(!1)}catch(d){console.error("Delete failed:",d)}},D=d=>{console.log("row",d),t(fe((d==null?void 0:d.record_id)||""));let w={id:d==null?void 0:d.id,status:"Seen"};switch(t(_n(w)),d==null?void 0:d.goes_to){case"BI":t(jt(0)),r("/inspections");break;case"IB":r("/breakdown?tab=1");break;case"SI":t(jt(1)),r("/inspections");break;case"IS":r("/service?tab=1");break;case"SS":r("/service?tab=0");break;case"BB":r("/breakdown?tab=0");break;default:ue.error("Page location not found");break}};return i.jsxs(_,{children:[i.jsx(Or,{sx:{justifyContent:"flex-end"},children:i.jsx(se,{color:"error",variant:"contained",disabled:u.length===0,onClick:()=>m(!0),children:"Delete Selected"})}),i.jsxs(rn,{component:ln,sx:{maxHeight:500},children:[i.jsxs(on,{stickyHeader:!0,children:[i.jsx(sn,{children:i.jsxs(Be,{children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Ye,{checked:l,indeterminate:u.length>0&&u.length<O.length,onChange:T})}),i.jsx(B,{children:"Sr no"}),i.jsx(B,{children:"Inspection Id"}),i.jsx(B,{children:"Message"}),i.jsx(B,{children:"Date Time"})]})}),i.jsx(an,{children:O.map((d,w)=>i.jsxs(Be,{hover:!0,selected:j(d.id),sx:{cursor:"pointer"},children:[i.jsx(B,{padding:"checkbox",onClick:()=>p(d.id),children:i.jsx(Ye,{checked:j(d.id)})}),i.jsx(B,{children:n*s+w+1}),i.jsx(B,{children:d==null?void 0:d.record_id}),i.jsx(B,{onClick:()=>D(d),sx:{color:d.status==="Seen"?"#7d88c7":"blue",textDecoration:"underline",cursor:"pointer"},title:"View Breakdown",children:d==null?void 0:d.message}),i.jsx(B,{children:Ae(new Date(d==null?void 0:d.created)).format("DD-MM-YYYY HH:mm")})]},d==null?void 0:d.id))})]}),i.jsx(cn,{rowsPerPageOptions:[10],component:"div",count:A.length,rowsPerPage:s,page:n,onPageChange:P,onRowsPerPageChange:b})]}),i.jsxs(ht,{open:v,onClose:()=>m(!1),children:[i.jsx(wr,{children:"Confirm Deletion"}),i.jsx(un,{children:i.jsxs(Z,{children:["Are you sure you want to delete ",u.length," selected",u.length>1?" items":" item","?"]})}),i.jsxs(dn,{children:[i.jsx(se,{onClick:()=>m(!1),children:"Cancel"}),i.jsx(se,{color:"error",onClick:L,children:"Delete"})]})]})]})};function Fi({showNotification:e,setShowNotification:t}){ge(),G(s=>s.liveMap);const[r,n]=y.useState("one"),o=(s,a)=>{n(a)};return i.jsx(i.Fragment,{children:i.jsxs(ht,{open:e,onClose:()=>t(!1),fullWidth:!0,maxWidth:"xxl",sx:{"& .MuiDialog-paper":{height:"90vh"}},children:[i.jsx(nn,{sx:{position:"absolute",right:2,top:8},onClick:()=>t(!1),children:i.jsx(Pr,{})}),i.jsxs(un,{dividers:!0,sx:{minHeight:"100px"},children:["  ",i.jsxs(_,{sx:{width:"100%"},children:[i.jsxs(Tr,{value:r,onChange:o,textColor:"inherit",indicatorColor:"secondary",sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #ccc"},children:[i.jsx(Ot,{value:"one",label:"Inbox",sx:{color:"black",fontWeight:"bold"}}),i.jsx(Ot,{value:"two",label:"Alert",sx:{color:"black",fontWeight:"bold"}})]}),i.jsxs(_,{sx:{p:2},children:[r==="one"&&i.jsx(_,{children:i.jsx(Li,{})}),r==="two"&&i.jsx(_,{children:i.jsx(Ei,{})})]})]})]}),i.jsx(dn,{children:i.jsx(se,{onClick:()=>t(!1),children:"Close"})})]})})}const Cs=()=>{const{w_customer_id:e,collapsed:t}=G(g=>g.auth),{mode:r,selectedTripData:n,selectedVehicleGroup:o,showVehicles:s,vehicleZone:a}=G(g=>g.dashboard),{breakdowns:u}=G(g=>g.breakdown),{inspectionHistory:c}=G(g=>g.inspection),[l,h]=y.useState(()=>{const g=sessionStorage.getItem("imeiNo");return g?JSON.parse(g):[]}),{selectedVehicle:v,vehicleList:m,onlineVehicle:P,locationData:b}=G(g=>g.liveMap),p=ge(),j=Ht(r),[A,O]=y.useState([]),[T,L]=y.useState(!1),[D,d]=y.useState({}),[w,k]=y.useState(!1),[N,Y]=y.useState(!1),[X,f]=y.useState(!1);y.useEffect(()=>{(async()=>{await q()})(),p(Rn())},[]);const F=g=>{let C=m.find(x=>{var W;return((W=x==null?void 0:x.imei[0])==null?void 0:W.mac_id)==g});return(C==null?void 0:C.registration_id)||g};y.useEffect(()=>{if(c.length>0){let g={open:0,rejected:0,close:0};c.map(C=>{C.status==="Open"&&g.open++,C.status==="Close"&&g.close++,C.status==="Rejected"&&g.rejected++}),p(Dn(g))}},[u]),y.useEffect(()=>{if(u.length>0){let g={open:0,overDue:0,close:0};u.map(C=>{if(C.status==="Open"&&g.open++,C.status==="Close"&&g.close++,C.submission_date){const x=new Date(C.submission_date),W=new Date;W.setHours(0,0,0,0),x.setHours(0,0,0,0),x<W&&C.status=="Open"&&g.overDue++}}),p(In(g))}},[u]),y.useEffect(()=>{p(En())},[]),y.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(l))},[l]),y.useEffect(()=>{var g,C,x;Object.keys(v).length===0&&m.length>0&&p(Ln({imei:(C=(g=m[0])==null?void 0:g.imei[0])==null?void 0:C.mac_id,reg_id:(x=m[0])==null?void 0:x.registration_id}))},[v,m]),y.useEffect(()=>{let g=m.map(x=>{var W;return((W=x==null?void 0:x.imei[0])==null?void 0:W.mac_id)||null}).filter(x=>x),C={imeiList:g,startDate:Ae(new Date).format("MM-DD-YYYY"),endDate:Ae(new Date).format("MM-DD-YYYY")};g&&g.length>0&&p(Gt(C)),p(Kt())},[m]),y.useEffect(()=>{(async()=>{if(v!=null&&v.imei){const C=zt(),x=C.startOf("day").format("MM/DD/YYYY HH:mm:ss"),W=C.endOf("day").format("MM/DD/YYYY HH:mm:ss"),z={imei:v.imei,startTime:x,endTime:W};try{p(Fn(z))}catch(R){console.error("Error fetching report:",R)}}})()},[v,p]),y.useEffect(()=>{const g=x=>{(x==null?void 0:x.imei)!==null&&l.find(R=>parseInt(R)===(x==null?void 0:x.imei))&&ue.error(`Type: ${x==null?void 0:x.type} ${x==null?void 0:x.msg} ${F(x==null?void 0:x.imei)}`,{id:"geofence",autoClose:5e3})},C=x=>{(x==null?void 0:x.imei)!==null&&l.find(R=>parseInt(R)===(x==null?void 0:x.imei))&&ue.error(`${x==null?void 0:x.msg} ${F(x==null?void 0:x.imei)}`,{id:"speed",autoClose:5e3})};return Te.on("geofenceAlert",g),Te.on("speedAlert",C),()=>{Te.off("geofenceAlert",g),Te.off("speedAlert",C)}},[l,Te]);const q=async()=>{try{let g=[],C=[];const x=await p($n({w_customer_id:e}));if(Array.isArray(x.payload)){x.payload.forEach(R=>{var S,I;Array.isArray(R.imei)&&R.imei.length>0?(g.push({id:R.id,label:R.registration_id,value:(S=R==null?void 0:R.imei[0])==null?void 0:S.mac_id,vehilce_type:R==null?void 0:R.segment,sell_date:R==null?void 0:R.sell_date,workShop:R==null?void 0:R.workshop,vehicle_group:R==null?void 0:R.vehicle_group}),C.push((I=R.imei[0])==null?void 0:I.mac_id),R.registration_id):(console.error("IMEI data not found for item:",R),ue.error(`IMEI Number not found for the vehicle: ${R==null?void 0:R.registration_id}`,{duration:2e3}))}),h(C);const W="one",z=C;C.length>0&&(p(Nn({type:W,imei:z})),p(Mn(z))),O(g),p(Vn(g)),p(Bn({w_customer_id:e})),p(Yn(e)),p(Wn({}))}else console.error("Unexpected data format:",x),ue.error("Unexpected data format:")}catch(g){console.error("Error fetching vehicle data:",g),ue.error(`Error fetching vehicle data: ${g}`)}},oe=g=>b==null?void 0:b.some(C=>String(C.latestDocument.imei)===String(g)&&C.latestDocument.speed>0&&(C.latestDocument.ignition===!0||C.latestDocument.ignition===1)),$=g=>b==null?void 0:b.some(C=>String(C.latestDocument.imei)===String(g)&&C.latestDocument.speed<=0&&(C.latestDocument.ignition===!0||C.latestDocument.ignition===1)),V=A.filter(g=>{if(!(Object.keys(o).length===0||g.vehicle_group===o.id))return!1;const x=g.value,W=String(g.value).toLowerCase(),z=P.some(U=>String(U).toLowerCase()===W),R=!P.some(U=>String(U).toLowerCase()===W),S=z&&oe(x),I=z&&$(x);switch(a){case"Total Vehicles":return!0;case"Online":return z;case"Running":return S;case"Offline":return R;case"Idling":return I;default:return!0}});return i.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[i.jsx(fr,{}),i.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[i.jsx(pr,{title:"Dashboard",setShowNotification:L,showNotification:T,setShowVehiclesGroup:k,showVehiclesGroup:w}),i.jsx(Ar,{setShowVehiclesGroup:k,showVehiclesGroup:w}),i.jsxs(_,{sx:{height:"92vh",backgroundColor:j.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[s&&i.jsx(_,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:j.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:i.jsx(Gn,{vehicleData:V,showVehicles:s})}),i.jsx(Ne,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),i.jsxs(_,{sx:{display:"flex",gap:"30px",background:rt.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[T&&i.jsx(Fi,{showNotification:T,setShowNotification:L}),"              ",i.jsx(Ti,{}),i.jsx(_,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:i.jsx(wi,{setLoading:Y})})]}),i.jsx(_,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:i.jsx(Ii,{vehicleReport:D,imeiNo:l,loading:N,isloadingReport:X})})]})]})]})]})};export{Cs as default};
