import{c as gn,s as mn,_ as K,h as ft,r as Ze,a as xn,d as yn,m as vn,b as y,e as bn,f as Ye,j as i,g as ue,u as jn,i as pt,k as We,l as Ge,n as kn,o as st,p as de,q as ze,t as Sn,v as Mt,T as U,R as I,w as at,I as Vt,x as Te,y as fe,z as Y,A as ht,B as An,C as ae,D as Bt,E as et,F as lt,G as re,H as Pn,J as On,K as ce,L as Xe,M as _e,P as Yt,N as ve,O as gt,Q as Wt,S as mt,U as Gt,V as xt,W as Cn,X as wn,Y as Tn,Z as _n,$ as Rn,a0 as Dn,a1 as In,a2 as En,a3 as Ln,a4 as $n,a5 as Fn,a6 as Nn,a7 as Mn}from"./index-DKt4EGgW.js";import{s as Pe}from"./Socket-DLjvxrzW.js";import{t as zt}from"./SearchTab-BQ-B6zyF.js";import{V as Vn}from"./VehicleMenu-D1Qyrpne.js";import{f as G,_ as Kt,a as Ht,b as Bn,c as Yn,i as ge,T as ct,p as te,L as Q,d as ut,e as Ut,D as Wn,G as Gn,u as zn,C as Kn,g as be,h as pe,S as Hn,A as Un,j as qn,k as yt,l as Zn,m as me,n as Xn,o as Jn,q as qt,r as Qn,s as Re,w as vt,t as Ie,v as er,x as tr,R as Zt,B as nr,y as rr,X as or,Y as ir,z as Xt,E as sr,F as ar}from"./TopBar-CSqAxjvE.js";import"./proj-XQwXs9DQ.js";import{d as lr,T as Ee,L as cr}from"./LeftSideBar2-CzOOAFrN.js";import{u as ur,G as dr,M as fr}from"./esm-MUfzAhlP.js";import{B as _}from"./CircularProgress-CQAgb0-_.js";import{u as Jt,f as Qt,I as pr,F as bt,a as jt,S as kt,M as De}from"./menu2-Bgf9owaR.js";import{f as hr}from"./TripMap-Bt2pZNl_.js";import{S as gr}from"./Switch-CdNUR2Ja.js";import{V as mr}from"./VehicleGroups-CRz3uJ7U.js";import{d as xr}from"./Close-DWGOnMU_.js";import{N as yr}from"./NewLoader-B4aRHtVI.js";import{T as en,a as tn,b as nn,c as Fe,d as V,e as rn}from"./TableRow-CUfCtgVX.js";import{C as Ne}from"./Checkbox-DY0FI7fB.js";import{T as on,a as vr}from"./TablePagination-DMR-j_aV.js";import{D as dt,a as br,b as sn,c as an}from"./DialogTitle-g2PCj0H1.js";import{T as jr,a as St}from"./Tabs-BDJWwvb-.js";import"./index-Bs44Da_e.js";import"./NotificationsNone-D041GU_O.js";import"./createSvgIcon-DB4R3sTm.js";import"./useControlled-DP31kh5Q.js";import"./usePreviousProps-Cfqm56kD.js";import"./redTractor-NXgVJyvR.js";import"./TripGraph-CmVxxYH4.js";import"./Info-B6ZynYvn.js";const kr=["component","direction","spacing","divider","children","className","useFlexGap"],Sr=gn(),Ar=mn("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Pr(e){return jn({props:e,name:"MuiStack",defaultTheme:Sr})}function Or(e,t){const r=y.Children.toArray(e).filter(Boolean);return r.reduce((n,o,s)=>(n.push(o),s<r.length-1&&n.push(y.cloneElement(t,{key:`separator-${s}`})),n),[])}const Cr=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],wr=({ownerState:e,theme:t})=>{let r=K({display:"flex",flexDirection:"column"},ft({theme:t},Ze({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=xn(t),o=Object.keys(t.breakpoints.values).reduce((c,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(c[l]=!0),c),{}),s=Ze({values:e.direction,base:o}),a=Ze({values:e.spacing,base:o});typeof s=="object"&&Object.keys(s).forEach((c,l,g)=>{if(!s[c]){const v=l>0?s[g[l-1]]:"column";s[c]=v}}),r=yn(r,ft({theme:t},a,(c,l)=>e.useFlexGap?{gap:pt(n,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Cr(l?s[l]:e.direction)}`]:pt(n,c)}}))}return r=vn(t.breakpoints,r),r};function Tr(e={}){const{createStyledComponent:t=Ar,useThemeProps:r=Pr,componentName:n="MuiStack"}=e,o=()=>We({root:["root"]},c=>Ge(n,c),{}),s=t(wr);return y.forwardRef(function(c,l){const g=r(c),j=bn(g),{component:v="div",direction:O="column",spacing:x=0,divider:p,children:k,className:P,useFlexGap:w=!1}=j,D=Ye(j,kr),L={direction:O,spacing:x,useFlexGap:w},R=o();return i.jsx(s,K({as:v,ownerState:L,ref:l,className:ue(R.root,P)},D,{children:p?Or(k,p):k}))})}const _r=kn(i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Rr(e){return Ge("MuiAvatar",e)}st("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Dr=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Ir=e=>{const{classes:t,variant:r,colorDefault:n}=e;return We({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Rr,t)},Er=de("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:K({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:K({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Lr=de("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),$r=de(_r,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Fr({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[o,s]=y.useState(!1);return y.useEffect(()=>{if(!r&&!n)return;s(!1);let a=!0;const u=new Image;return u.onload=()=>{a&&s("loaded")},u.onerror=()=>{a&&s("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=r,n&&(u.srcset=n),()=>{a=!1}},[e,t,r,n]),o}const Nr=y.forwardRef(function(t,r){const n=ze({props:t,name:"MuiAvatar"}),{alt:o,children:s,className:a,component:u="div",slots:c={},slotProps:l={},imgProps:g,sizes:j,src:v,srcSet:O,variant:x="circular"}=n,p=Ye(n,Dr);let k=null;const P=Fr(K({},g,{src:v,srcSet:O})),w=v||O,D=w&&P!=="error",L=K({},n,{colorDefault:!D,component:u,variant:x}),R=Ir(L),[d,T]=Sn("img",{className:R.img,elementType:Lr,externalForwardedProps:{slots:c,slotProps:{img:K({},g,l.img)}},additionalProps:{alt:o,src:v,srcSet:O,sizes:j},ownerState:L});return D?k=i.jsx(d,K({},T)):s||s===0?k=s:w&&o?k=o[0]:k=i.jsx($r,{ownerState:L,className:R.fallback}),i.jsx(Er,K({as:u,ownerState:L,className:ue(R.root,a),ref:r},p,{children:k}))}),ln=Nr,Mr=Tr({createStyledComponent:de("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ze({props:e,name:"MuiStack"})}),Vr=Mr;function Br(e){return Ge("MuiFormControlLabel",e)}const Yr=st("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Oe=Yr,Wr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Gr=e=>{const{classes:t,disabled:r,labelPlacement:n,error:o,required:s}=e,a={root:["root",r&&"disabled",`labelPlacement${Mt(n)}`,o&&"error",s&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]};return We(a,Br,t)},zr=de("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Oe.label}`]:t.label},t.root,t[`labelPlacement${Mt(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>K({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Oe.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Oe.label}`]:{[`&.${Oe.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Kr=de("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Oe.error}`]:{color:(e.vars||e).palette.error.main}})),Hr=y.forwardRef(function(t,r){var n,o;const s=ze({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:u={},control:c,disabled:l,disableTypography:g,label:j,labelPlacement:v="end",required:O,slotProps:x={}}=s,p=Ye(s,Wr),k=Jt(),P=(n=l??c.props.disabled)!=null?n:k==null?void 0:k.disabled,w=O??c.props.required,D={disabled:P,required:w};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof c.props[F]>"u"&&typeof s[F]<"u"&&(D[F]=s[F])});const L=Qt({props:s,muiFormControl:k,states:["error"]}),R=K({},s,{disabled:P,labelPlacement:v,required:w,error:L.error}),d=Gr(R),T=(o=x.typography)!=null?o:u.typography;let C=j;return C!=null&&C.type!==U&&!g&&(C=i.jsx(U,K({component:"span"},T,{className:ue(d.label,T==null?void 0:T.className),children:C}))),i.jsxs(zr,K({className:ue(d.root,a),ownerState:R,ref:r},p,{children:[y.cloneElement(c,D),w?i.jsxs(Vr,{display:"block",children:[C,i.jsxs(Kr,{ownerState:R,"aria-hidden":!0,className:d.asterisk,children:["â€‰","*"]})]}):C]}))}),Ur=Hr;function qr(e){return Ge("MuiFormGroup",e)}st("MuiFormGroup",["root","row","error"]);const Zr=["className","row"],Xr=e=>{const{classes:t,row:r,error:n}=e;return We({root:["root",r&&"row",n&&"error"]},qr,t)},Jr=de("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>K({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Qr=y.forwardRef(function(t,r){const n=ze({props:t,name:"MuiFormGroup"}),{className:o,row:s=!1}=n,a=Ye(n,Zr),u=Jt(),c=Qt({props:n,muiFormControl:u,states:["error"]}),l=K({},n,{row:s,error:c.error}),g=Xr(l);return i.jsx(Jr,K({className:ue(g.root,o),ownerState:l,ref:r},a))}),eo=Qr;var to=["points","className","baseLinePoints","connectNulls"];function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xe.apply(this,arguments)}function no(e,t){if(e==null)return{};var r=ro(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ro(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function At(e){return ao(e)||so(e)||io(e)||oo()}function oo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function io(e,t){if(e){if(typeof e=="string")return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}}function so(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ao(e){if(Array.isArray(e))return tt(e)}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=function(t){return t&&t.x===+t.x&&t.y===+t.y},lo=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Pt(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Pt(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Ce=function(t,r){var n=lo(t);r&&(n=[n.reduce(function(s,a){return[].concat(At(s),At(a))},[])]);var o=n.map(function(s){return s.reduce(function(a,u,c){return"".concat(a).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return n.length===1?"".concat(o,"Z"):o},co=function(t,r,n){var o=Ce(t,n);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(Ce(r.reverse(),n).slice(1))},uo=function(t){var r=t.points,n=t.className,o=t.baseLinePoints,s=t.connectNulls,a=no(t,to);if(!r||!r.length)return null;var u=ue("recharts-polygon",n);if(o&&o.length){var c=a.stroke&&a.stroke!=="none",l=co(r,o,s);return I.createElement("g",{className:u},I.createElement("path",xe({},G(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),c?I.createElement("path",xe({},G(a,!0),{fill:"none",d:Ce(r,s)})):null,c?I.createElement("path",xe({},G(a,!0),{fill:"none",d:Ce(o,s)})):null)}var g=Ce(r,s);return I.createElement("path",xe({},G(a,!0),{fill:g.slice(-1)==="Z"?a.fill:"none",className:u,d:g}))},fo=Kt,po=Bn,ho=Ht;function go(e,t){return e&&e.length?fo(e,ho(t),po):void 0}var mo=go;const xo=at(mo);var yo=Kt,vo=Ht,bo=Yn;function jo(e,t){return e&&e.length?yo(e,vo(t),bo):void 0}var ko=jo;const So=at(ko);var Ao=["cx","cy","angle","ticks","axisLine"],Po=["ticks","tick","angle","tickFormatter","stroke"];function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(e)}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},we.apply(this,arguments)}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(r),!0).forEach(function(n){Ke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ct(e,t){if(e==null)return{};var r=Oo(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oo(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,un(n.key),n)}}function wo(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function To(e,t,r){return t=Me(t),_o(e,cn()?Reflect.construct(t,r||[],Me(e).constructor):t.apply(e,r))}function _o(e,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ro(e)}function Ro(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cn=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Me(e)}function Do(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},nt(e,t)}function Ke(e,t,r){return t=un(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function un(e){var t=Io(e,"string");return je(t)=="symbol"?t:String(t)}function Io(e,t){if(je(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(je(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var He=function(e){Do(t,e);function t(){return Co(this,t),To(this,t,arguments)}return wo(t,[{key:"getTickValueCoord",value:function(n){var o=n.coordinate,s=this.props,a=s.angle,u=s.cx,c=s.cy;return te(u,c,o,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,o;switch(n){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=xo(u,function(g){return g.coordinate||0}),l=So(u,function(g){return g.coordinate||0});return{cx:o,cy:s,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=n.axisLine,l=Ct(n,Ao),g=u.reduce(function(x,p){return[Math.min(x[0],p.coordinate),Math.max(x[1],p.coordinate)]},[1/0,-1/0]),j=te(o,s,g[0],a),v=te(o,s,g[1],a),O=ie(ie(ie({},G(l,!1)),{},{fill:"none"},G(c,!1)),{},{x1:j.x,y1:j.y,x2:v.x,y2:v.y});return I.createElement("line",we({className:"recharts-polar-radius-axis-line"},O))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.angle,c=o.tickFormatter,l=o.stroke,g=Ct(o,Po),j=this.getTickTextAnchor(),v=G(g,!1),O=G(a,!1),x=s.map(function(p,k){var P=n.getTickValueCoord(p),w=ie(ie(ie(ie({textAnchor:j,transform:"rotate(".concat(90-u,", ").concat(P.x,", ").concat(P.y,")")},v),{},{stroke:"none",fill:l},O),{},{index:k},P),{},{payload:p});return I.createElement(Q,we({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(p.coordinate)},ut(n.props,p,k)),t.renderTickItem(a,w,c?c(p.value,k):p.value))});return I.createElement(Q,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.axisLine,a=n.tick;return!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),a&&this.renderTicks(),Ut.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):ge(n)?a=n(o):a=I.createElement(ct,we({},o,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}]),t}(y.PureComponent);Ke(He,"displayName","PolarRadiusAxis");Ke(He,"axisType","radiusAxis");Ke(He,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(r),!0).forEach(function(n){Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fn(n.key),n)}}function Lo(e,t,r){return t&&_t(e.prototype,t),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $o(e,t,r){return t=Ve(t),Fo(e,dn()?Reflect.construct(t,r||[],Ve(e).constructor):t.apply(e,r))}function Fo(e,t){if(t&&(ke(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return No(e)}function No(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dn=function(){return!!e})()}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ve(e)}function Mo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},rt(e,t)}function Ue(e,t,r){return t=fn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fn(e){var t=Vo(e,"string");return ke(t)=="symbol"?t:String(t)}function Vo(e,t){if(ke(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ke(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bo=Math.PI/180,Rt=1e-5,qe=function(e){Mo(t,e);function t(){return Eo(this,t),$o(this,t,arguments)}return Lo(t,[{key:"getTickLineCoord",value:function(n){var o=this.props,s=o.cx,a=o.cy,u=o.radius,c=o.orientation,l=o.tickSize,g=l||8,j=te(s,a,u,n.coordinate),v=te(s,a,u+(c==="inner"?-1:1)*g,n.coordinate);return{x1:j.x,y1:j.y,x2:v.x,y2:v.y}}},{key:"getTickTextAnchor",value:function(n){var o=this.props.orientation,s=Math.cos(-n.coordinate*Bo),a;return s>Rt?a=o==="outer"?"start":"end":s<-Rt?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.radius,u=n.axisLine,c=n.axisLineType,l=se(se({},G(this.props,!1)),{},{fill:"none"},G(u,!1));if(c==="circle")return I.createElement(Wn,le({className:"recharts-polar-angle-axis-line"},l,{cx:o,cy:s,r:a}));var g=this.props.ticks,j=g.map(function(v){return te(o,s,a,v.coordinate)});return I.createElement(uo,le({className:"recharts-polar-angle-axis-line"},l,{points:j}))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.tickLine,c=o.tickFormatter,l=o.stroke,g=G(this.props,!1),j=G(a,!1),v=se(se({},g),{},{fill:"none"},G(u,!1)),O=s.map(function(x,p){var k=n.getTickLineCoord(x),P=n.getTickTextAnchor(x),w=se(se(se({textAnchor:P},g),{},{stroke:"none",fill:l},j),{},{index:p,payload:x,x:k.x2,y:k.y2});return I.createElement(Q,le({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(x.coordinate)},ut(n.props,x,p)),u&&I.createElement("line",le({className:"recharts-polar-angle-axis-tick-line"},v,k)),a&&t.renderTickItem(a,w,c?c(x.value,p):x.value))});return I.createElement(Q,{className:"recharts-polar-angle-axis-ticks"},O)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):ge(n)?a=n(o):a=I.createElement(ct,le({},o,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}]),t}(y.PureComponent);Ue(qe,"displayName","PolarAngleAxis");Ue(qe,"axisType","angleAxis");Ue(qe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Le;function Se(e){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dt(Object(r),!0).forEach(function(n){J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hn(n.key),n)}}function Wo(e,t,r){return t&&It(e.prototype,t),r&&It(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Go(e,t,r){return t=Be(t),zo(e,pn()?Reflect.construct(t,r||[],Be(e).constructor):t.apply(e,r))}function zo(e,t){if(t&&(Se(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}function pn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pn=function(){return!!e})()}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(e)}function he(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ko(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},ot(e,t)}function J(e,t,r){return t=hn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){var t=Ho(e,"string");return Se(t)=="symbol"?t:String(t)}function Ho(e,t){if(Se(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Se(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ne=function(e){Ko(t,e);function t(r){var n;return Yo(this,t),n=Go(this,t,[r]),J(he(n),"pieRef",null),J(he(n),"sectorRefs",[]),J(he(n),"id",zn("recharts-pie-")),J(he(n),"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ge(o)&&o()}),J(he(n),"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ge(o)&&o()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Wo(t,[{key:"isActiveIndex",value:function(n){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(n)!==-1:n===o}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,u=s.labelLine,c=s.dataKey,l=s.valueKey,g=G(this.props,!1),j=G(a,!1),v=G(u,!1),O=a&&a.offsetRadius||20,x=n.map(function(p,k){var P=(p.startAngle+p.endAngle)/2,w=te(p.cx,p.cy,p.outerRadius+O,P),D=M(M(M(M({},g),p),{},{stroke:"none"},j),{},{index:k,textAnchor:t.getTextAnchor(w.x,p.cx)},w),L=M(M(M(M({},g),p),{},{fill:"none",stroke:p.fill},v),{},{index:k,points:[te(p.cx,p.cy,p.outerRadius,P),w],key:"line"}),R=c;return be(c)&&be(l)?R="value":be(c)&&(R=l),I.createElement(Q,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(k)},u&&t.renderLabelLineItem(u,L),t.renderLabelItem(a,D,pe(p,R)))});return I.createElement(Q,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var o=this,s=this.props,a=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return n.map(function(l,g){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var j=o.isActiveIndex(g),v=c&&o.hasActiveIndex()?c:null,O=j?a:v,x=M(M({},l),{},{stroke:u?l.fill:l.stroke,tabIndex:-1});return I.createElement(Q,ye({ref:function(k){k&&!o.sectorRefs.includes(k)&&o.sectorRefs.push(k)},tabIndex:-1,className:"recharts-pie-sector"},ut(o.props,l,g),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(g)}),I.createElement(Hn,ye({option:O,isActive:j,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,o=this.props,s=o.sectors,a=o.isAnimationActive,u=o.animationBegin,c=o.animationDuration,l=o.animationEasing,g=o.animationId,j=this.state,v=j.prevSectors,O=j.prevIsAnimationActive;return I.createElement(Un,{begin:u,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(g,"-").concat(O),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var p=x.t,k=[],P=s&&s[0],w=P.startAngle;return s.forEach(function(D,L){var R=v&&v[L],d=L>0?qn(D,"paddingAngle",0):0;if(R){var T=yt(R.endAngle-R.startAngle,D.endAngle-D.startAngle),C=M(M({},D),{},{startAngle:w+d,endAngle:w+T(p)+d});k.push(C),w=C.endAngle}else{var F=D.endAngle,B=D.startAngle,q=yt(0,F-B),f=q(p),E=M(M({},D),{},{startAngle:w+d,endAngle:w+f+d});k.push(E),w=E.endAngle}}),I.createElement(Q,null,n.renderSectorsStatically(k))})}},{key:"attachKeyboardHandlers",value:function(n){var o=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var u=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[u].focus(),o.setState({sectorToFocus:u});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,o=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&o&&o.length&&(!a||!Zn(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,o=this.props,s=o.hide,a=o.sectors,u=o.className,c=o.label,l=o.cx,g=o.cy,j=o.innerRadius,v=o.outerRadius,O=o.isAnimationActive,x=this.state.isAnimationFinished;if(s||!a||!a.length||!me(l)||!me(g)||!me(j)||!me(v))return null;var p=ue("recharts-pie",u);return I.createElement(Q,{tabIndex:this.props.rootTabIndex,className:p,ref:function(P){n.pieRef=P}},this.renderSectors(),c&&this.renderLabels(a),Ut.renderCallByParent(this.props,null,!1),(!O||x)&&Xn.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return o.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:n.sectors!==o.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,o){return n>o?"start":n<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,o){return I.isValidElement(n)?I.cloneElement(n,o):ge(n)?n(o):I.createElement(Kn,ye({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,o,s){if(I.isValidElement(n))return I.cloneElement(n,o);var a=s;return ge(n)&&(a=n(o),I.isValidElement(a))?a:I.createElement(ct,ye({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(y.PureComponent);Le=ne;J(ne,"displayName","Pie");J(ne,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Gn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});J(ne,"parseDeltaAngle",function(e,t){var r=Ie(t-e),n=Math.min(Math.abs(t-e),360);return r*n});J(ne,"getRealPieData",function(e){var t=e.props,r=t.data,n=t.children,o=G(e.props,!1),s=Jn(n,qt);return r&&r.length?r.map(function(a,u){return M(M(M({payload:a},o),a),s&&s[u]&&s[u].props)}):s&&s.length?s.map(function(a){return M(M({},o),a.props)}):[]});J(ne,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,o=t.width,s=t.height,a=Qn(o,s),u=n+Re(e.props.cx,o,o/2),c=r+Re(e.props.cy,s,s/2),l=Re(e.props.innerRadius,a,0),g=Re(e.props.outerRadius,a,a*.8),j=e.props.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:u,cy:c,innerRadius:l,outerRadius:g,maxRadius:j}});J(ne,"getComposedData",function(e){var t=e.item,r=e.offset,n=Le.getRealPieData(t);if(!n||!n.length)return null;var o=t.props,s=o.cornerRadius,a=o.startAngle,u=o.endAngle,c=o.paddingAngle,l=o.dataKey,g=o.nameKey,j=o.valueKey,v=o.tooltipType,O=Math.abs(t.props.minAngle),x=Le.parseCoordinateOfPie(t,r),p=Le.parseDeltaAngle(a,u),k=Math.abs(p),P=l;be(l)&&be(j)?(vt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),P="value"):be(l)&&(vt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),P=j);var w=n.filter(function(C){return pe(C,P,0)!==0}).length,D=(k>=360?w:w-1)*c,L=k-w*O-D,R=n.reduce(function(C,F){var B=pe(F,P,0);return C+(me(B)?B:0)},0),d;if(R>0){var T;d=n.map(function(C,F){var B=pe(C,P,0),q=pe(C,g,F),f=(me(B)?B:0)/R,E;F?E=T.endAngle+Ie(p)*c*(B!==0?1:0):E=a;var z=E+Ie(p)*((B!==0?O:0)+f*L),ee=(E+z)/2,$=(x.innerRadius+x.outerRadius)/2,h=[{name:q,value:B,payload:C,dataKey:P,type:v}],A=te(x.cx,x.cy,$,ee);return T=M(M(M({percent:f,cornerRadius:s,name:q,tooltipPayload:h,midAngle:ee,middleRadius:$,tooltipPosition:A},C),x),{},{value:pe(C,P),startAngle:E,endAngle:z,payload:C,paddingAngle:Ie(p)*c}),T})}return M(M({},x),{},{sectors:d,data:n})});var Uo=er({chartName:"PieChart",GraphicalChild:ne,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qe},{axisType:"radiusAxis",AxisComp:He}],formatAxisMap:tr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const qo=({data:e})=>i.jsx(Zt,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:i.jsxs(nr,{data:e,children:[i.jsx(rr,{strokeDasharray:"3 3"}),i.jsx(or,{dataKey:"name"}),i.jsx(ir,{}),i.jsx(Xt,{}),i.jsx(sr,{dataKey:"value",fill:"#82ca9d"})]})});function Zo({searchQuery:e,setSearchQuery:t,map:r}){const n=async o=>{if(o.preventDefault(),e.trim()==="")return;const s={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(r).findPlaceFromQuery(s,(u,c)=>{if(c===window.google.maps.places.PlacesServiceStatus.OK&&u){const l=u[0];r.setCenter(l.geometry.location),r.setZoom(14)}})};return i.jsxs(_,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[i.jsx(pr,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),i.jsx(Vt,{type:"submit",sx:{p:1},children:i.jsx(lr,{})})]})}var Xo="Expected a function",Et=NaN,Jo="[object Symbol]",Qo=/^\s+|\s+$/g,ei=/^[-+]0x[0-9a-f]+$/i,ti=/^0b[01]+$/i,ni=/^0o[0-7]+$/i,ri=parseInt,oi=typeof Te=="object"&&Te&&Te.Object===Object&&Te,ii=typeof self=="object"&&self&&self.Object===Object&&self,si=oi||ii||Function("return this")(),ai=Object.prototype,li=ai.toString,ci=Math.max,ui=Math.min,Je=function(){return si.Date.now()};function di(e,t,r){var n,o,s,a,u,c,l=0,g=!1,j=!1,v=!0;if(typeof e!="function")throw new TypeError(Xo);t=Lt(t)||0,it(r)&&(g=!!r.leading,j="maxWait"in r,s=j?ci(Lt(r.maxWait)||0,t):s,v="trailing"in r?!!r.trailing:v);function O(d){var T=n,C=o;return n=o=void 0,l=d,a=e.apply(C,T),a}function x(d){return l=d,u=setTimeout(P,t),g?O(d):a}function p(d){var T=d-c,C=d-l,F=t-T;return j?ui(F,s-C):F}function k(d){var T=d-c,C=d-l;return c===void 0||T>=t||T<0||j&&C>=s}function P(){var d=Je();if(k(d))return w(d);u=setTimeout(P,p(d))}function w(d){return u=void 0,v&&n?O(d):(n=o=void 0,a)}function D(){u!==void 0&&clearTimeout(u),l=0,n=c=o=u=void 0}function L(){return u===void 0?a:w(Je())}function R(){var d=Je(),T=k(d);if(n=arguments,o=this,c=d,T){if(u===void 0)return x(c);if(j)return u=setTimeout(P,t),O(c)}return u===void 0&&(u=setTimeout(P,t)),a}return R.cancel=D,R.flush=L,R}function it(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fi(e){return!!e&&typeof e=="object"}function pi(e){return typeof e=="symbol"||fi(e)&&li.call(e)==Jo}function Lt(e){if(typeof e=="number")return e;if(pi(e))return Et;if(it(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=it(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Qo,"");var r=ti.test(e);return r||ni.test(e)?ri(e.slice(2),r?2:8):ei.test(e)?Et:+e}var hi=di;const gi=at(hi),mi=({setLoading:e})=>{const t=fe(),{center:r,selectedParameterList:n,selectedVehicle:o,vehicleList:s,tractorIcon:a,icons:u,locationData:c,ivnPid:l,placesData:g}=Y($=>$.liveMap),{mode:j,AreaCoveredTrips:v}=Y($=>$.dashboard),{isLoaded:O,loadError:x}=ur({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[p,k]=y.useState(null),[P,w]=y.useState(!0),[D,L]=y.useState(5),[R,d]=y.useState(),[T,C]=y.useState(""),F=y.useRef(null),B=zt(j),q=y.useCallback($=>{F.current=$},[]),f=gi($=>{if(!$||$.length===0)return;const h=10;let A=0;const m=N=>{$.slice(N,N+h).forEach(b=>{var W;((W=b==null?void 0:b.data)==null?void 0:W.length)>0&&(A+=hr(b==null?void 0:b.data,t))}),N+h<$.length?setTimeout(()=>m(N+h),0):(console.log("calculated acreage: ",A),t(ht(A.toFixed(2))),e(!1))};m(0)},300);y.useEffect(()=>(v&&v.length>0?(e(!0),f(v)):(e(!1),t(ht(0))),()=>{f.cancel(),e(!1)}),[v,t]),y.useEffect(()=>{if(P)d(c);else{let $=c==null?void 0:c.filter(h=>(h==null?void 0:h._id)===(o==null?void 0:o.imei));d($)}},[c,o,P]);const E=()=>{if(!P)t(An({lat:21,lng:78})),L(4),w(h=>!h);else{const $=c.find(h=>h.latestDocument.imei===o.imei);$?(console.log($.latestDocument,"getCenter"),$.latestDocument,w(h=>!h)):ae.error("Data is not available for selected vehicle")}};if(y.useEffect(()=>{O&&k(window.google.maps)},[O,c]),x)return"Error loading maps";if(!O)return"Loading maps";const z={height:"100vh",borderRadius:"8px"},ee=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return p?i.jsxs("div",{children:[i.jsxs(_,{style:{fontSize:"20px",color:B.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[i.jsx(U,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),i.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(Zo,{searchQuery:T,setSearchQuery:C,map:F.current}),i.jsx(eo,{sx:{marginLeft:0,paddingTop:0,color:B.grey[400]},children:i.jsx(Ur,{control:i.jsx(gr,{checked:P,onChange:E}),label:P?"Group":"Individual"})})]})]}),i.jsx(dr,{mapContainerStyle:z,zoom:D,center:r,onLoad:q,options:{mapTypeControl:!1,styles:j?ee:""},children:R&&R.length>0&&R.map(($,h)=>i.jsx(fr,{position:{lat:$.latestDocument.lat,lng:$.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},h))})]}):null};function xi(){const{vehicles_details:e}=Y(n=>n.dashboard),[t,r]=y.useState([]);return y.useEffect(()=>{const n=e.reduce((s,a)=>{const u=a.sell_date?Bt(a.sell_date):null,c=u&&u.isValid()?u.format("MMM YYYY"):"N/A";return s[c]=(s[c]||0)+1,s},{}),o=Object.keys(n).map(s=>({name:s,value:n[s]}));r(o)},[e]),i.jsxs(_,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[i.jsx(Ee,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),i.jsxs(_,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[i.jsx(_,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:i.jsx(Ee,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),i.jsx(qo,{data:t})]}),i.jsx(Ee,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const $t=Math.PI/180,yi=({cx:e,cy:t,midAngle:r,innerRadius:n,outerRadius:o,percent:s,index:a})=>{const u=n+(o-n)*.5,c=e+u*Math.cos(-r*$t),l=t+u*Math.sin(-r*$t);return i.jsx("text",{x:c,y:l,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(s*100).toFixed(0)}%`})},vi=({data:e,COLORS:t})=>{y.useEffect(()=>{},[e]);const r=e.every(n=>n.value===0);return i.jsx(_,{sx:{width:"100%",height:"100%"},children:r?i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:i.jsx(U,{sx:{textAlign:"center"},children:"No data available to display."})}):i.jsx(Zt,{width:"100%",height:"100%",children:i.jsxs(Uo,{children:[i.jsx(ne,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:yi,fill:"#8884d8",dataKey:"value",children:e.map((n,o)=>i.jsx(qt,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),i.jsx(Xt,{})]})})})},$e=({title:e})=>i.jsx(U,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),Qe=({label:e,count:t,color:r,type:n,title:o})=>{let s=fe(),{vehicleZone:a}=Y(l=>l.dashboard),u=lt();const c=(l,g)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",g),s(Pn(g)),s(On(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",g),g){case"Open":s(ce("Open"));break;case"Overdue":s(ce("overdue"));break;case"Closed":s(ce("Close"));break}u("/breakdown")}};return i.jsxs(_,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[i.jsxs(_,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(_,{sx:{width:"12px",height:"12px",bgcolor:r,borderRadius:"50%",marginRight:"8px"}}),i.jsx(re,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{c(o,e)},children:e})]}),i.jsx(_,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?i.jsx(U,{color:r,children:t}):i.jsx(ln,{sx:{bgcolor:r,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},bi=({data:e,colors:t})=>{const{loading:r,isDriverBehaviorLoading:n}=Y(o=>o.dashboard);return i.jsxs(_,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[i.jsx(U,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),i.jsx(_,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,s)=>i.jsxs(_,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[i.jsx(U,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),i.jsx(ln,{sx:{bgcolor:t[s],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},s))})]}),i.jsx(_,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?i.jsx(U,{sx:{fontSize:"14px"},children:"Loading..."}):i.jsx(vi,{data:e,COLORS:t})})]})},Ft=({statuses:e,title:t})=>{let r=fe(),n=lt();const o=s=>{if(t==="Inspection Approvals"){switch(console.log("status: ",s),s.label){case"Rejected":r(ce("Rejected"));break;case"Pending":r(ce("Open"));break;case"Approved":r(ce("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(s.label){case"Overdue":r(Xe("Overdue"));break;case"Due soon":r(Xe("Due soon"));break;case"Serviced":r(Xe("Serviced"));break}n("/service")}};return i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:t}),i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((s,a)=>i.jsxs(_,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(s)},children:[i.jsx(U,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:s.color,margin:"30px 0"},"aria-label":"color",children:s.count}),i.jsx(U,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:s.label})]},a))})]})},Nt={total:0,online:0,offline:0,running:0};function ji({vehicleReport:e,imeiNo:t,loading:r,isloadingReport:n}){var z,ee,$,h,A,m,N;const{vehicleList:o,onlineVehicle:s,locationData:a}=Y(S=>S.liveMap);Y(S=>S.dashboard);const{breakdownStatusCount:u}=Y(S=>S.breakdown),{inspectionStatusCount:c}=Y(S=>S.inspection),{vehicleStatesData:l}=Y(S=>S.report),{report:g,driver_behavior:j,overdueCount:v,completedCount:O,serviceSoonCount:x,selectedVehicleGroup:p,areaCovered:k}=Y(S=>S.dashboard),[P,w]=y.useState(0),[D,L]=y.useState(Nt);y.useEffect(()=>{if((o==null?void 0:o.length)>0){let S={...Nt};if(p){const b=d(p==null?void 0:p.id);console.log("result",b);const W=o.filter(Z=>Z.vehicle_group===p.id);S.total=W.length,S.online=b.onlineCount,S.running=b.runningCount,S.offline=S.total-S.online}console.log("Updated Vehicle Count:",S),L(S)}console.log("vehicleList",o)},[p]),y.useEffect(()=>{if((o==null?void 0:o.length)>0){let S=0;o==null||o.map(b=>{var W;((W=b==null?void 0:b.imei)==null?void 0:W.length)>0&&S++}),w(S)}},[o]),y.useEffect(()=>{},[v,O,x]);const R=()=>{let S=0,b=0,W=0;return s.length>0&&s.forEach(Z=>{t.includes(String(Z))&&(S++,a==null||a.forEach(H=>{var oe,X;String((oe=H==null?void 0:H.latestDocument)==null?void 0:oe.imei)===String(Z)&&H.latestDocument.speed>0&&(H.latestDocument.ignition===!0||H.latestDocument.ignition===1)&&b++,String((X=H==null?void 0:H.latestDocument)==null?void 0:X.imei)===String(Z)&&H.latestDocument.speed<=0&&(H.latestDocument.ignition===!0||H.latestDocument.ignition===1)&&W++}))}),{onlineCount:S,runningCount:b,idelingCount:W}},d=S=>{let b=0,W=0;return s.forEach(Z=>{if(t.includes(String(Z))){const H=a==null?void 0:a.find(oe=>{var X;return String((X=oe==null?void 0:oe.latestDocument)==null?void 0:X.imei)===String(Z)});if(H&&o.some(X=>{var Ae;return X.vehicle_group===S&&((Ae=X==null?void 0:X.imei[0])==null?void 0:Ae.mac_id)===String(Z)})){b++;const{speed:X,ignition:Ae}=H.latestDocument;X>0&&(Ae===!0||Ae===1)&&W++}}}),{onlineCount:b,runningCount:W}};y.useEffect(()=>{},[l]);const T=[{name:"Overspeed O",value:((z=l==null?void 0:l.totals)==null?void 0:z.total_overSpeedTimeSec)||0},{name:"Economy E",value:((ee=l==null?void 0:l.totals)==null?void 0:ee.total_economyTimeSec)||0},{name:"Steady S",value:(($=l==null?void 0:l.totals)==null?void 0:$.total_idleTimeSec)||0}],C=["#0088FE","#00C49F","#FFBB28","#FF8042"],F=[{label:"Rejected",count:c.rejected||0,color:"#FF0202"},{label:"Pending",count:c.open||0,color:"black"},{label:"Approved",count:c.close||0,color:"green"}],B=[{label:"Overdue",count:v,color:"#FF0202"},{label:"Due soon",count:x,color:"black"},{label:"Serviced",count:O,color:"green"}],q=[{name:"Total Vehicles",count:Object.keys(p).length>0?D.total:P,color:"grey"},{name:"Online",count:Object.keys(p).length>0?D.online:R().onlineCount,color:"red"},{name:"Offline",count:Object.keys(p).length>0?D.offline:P-R().onlineCount,color:"grey"},{name:"Running",count:Object.keys(p).length>0?D.running:R().runningCount,color:"green"},{name:"Idling",count:Object.keys(p).length>0?D.online-D.running:R().idelingCount,color:"yellow"}],f=[{name:"Distance Covered",count:((h=l==null?void 0:l.totals)==null?void 0:h.totalDistance)||0,color:"grey"},{name:"Running time",count:((A=l==null?void 0:l.totals)==null?void 0:A.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((m=l==null?void 0:l.totals)==null?void 0:m.total_idleTime)||0,color:et.bgColor},{name:"Engine Hrs",count:((N=l==null?void 0:l.totals)==null?void 0:N.total_engineHours)||0,color:et.bgColor}],E=[{name:"Open",count:u.open,color:"grey"},{name:"Overdue",count:u.overDue,color:"red"},{name:"Closed",count:u.close,color:"green"}];return i.jsxs(i.Fragment,{children:[i.jsx(bi,{data:T,colors:C}),i.jsxs(_,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[i.jsx($e,{title:"Vehicles Status"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:q.map((S,b)=>i.jsx(Qe,{label:S.name,count:S.count,color:S.color,title:"Vehicle Status"},b+1))})]}),i.jsx(Ft,{statuses:B,title:"Service Remainder"}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Assigned Vehicles"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:f.map((S,b)=>i.jsx(Qe,{type:"assignVehicle",label:S.name,count:S.count,color:S.color}))})]}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Breakdown Resolved"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:E.map((S,b)=>i.jsx(Qe,{label:S.name,count:S.count,color:S.color,title:"Breakdown"}))})]}),i.jsx(Ft,{statuses:F,title:"Inspection Approvals"})]})}const ki=()=>{var q;const{allAlerts:e,loading:t}=Y(f=>f.geofence),{vehicleList:r}=Y(f=>f.liveMap),n=fe(),[o,s]=y.useState(0),[a,u]=y.useState(10),[c,l]=y.useState([]),[g,j]=y.useState(""),[v,O]=y.useState(""),[x,p]=y.useState(!1);y.useEffect(()=>{console.log("allalert",e.filter(f=>f._id==="67fde2c226ec73328f071edd"))},[e]),y.useEffect(()=>{console.log("vehicleList",r)},[r]);let k=f=>r.find(E=>{var z;return((z=E==null?void 0:E.imei[0])==null?void 0:z.mac_id)==f||""});const P=(f,E)=>s(E),w=f=>{u(parseInt(f.target.value,10)),s(0)},D=f=>{l(E=>E.includes(f)?E.filter(z=>z!==f):[...E,f])},L=f=>c.includes(f),R=f=>{if(f.target.checked){const E=C==null?void 0:C.map(z=>z._id);l(E)}else l([])},d=()=>{console.log("vhehicle list",B);let f={imeiList:B,startDate:ve(new Date).format("MM-DD-YYYY"),endDate:ve(new Date).format("MM-DD-YYYY")};n(Wt(f))},T=async()=>{try{if(c.length===0)return;const f=await n(gt({ids:c}));gt.fulfilled.match(f)?(l([]),d()):console.error("Delete failed:",f==null?void 0:f.payload)}catch(f){console.error("Delete error:",f)}},C=(q=e==null?void 0:e.filter(f=>g?f.type===g:!0))==null?void 0:q.filter(f=>v?f.imei===v:!0),F=[...new Set(e==null?void 0:e.map(f=>f.type))],B=[...new Set(e==null?void 0:e.map(f=>f.imei))];return i.jsxs(_,{children:[t&&i.jsx(yr,{}),i.jsxs(_e,{container:!0,spacing:2,sx:{mb:2},children:[i.jsx(_e,{item:!0,xs:6,md:3,children:i.jsxs(bt,{fullWidth:!0,children:[i.jsx(jt,{children:"Alert Type"}),i.jsxs(kt,{value:g,label:"Alert Type",onChange:f=>{j(f.target.value),s(0)},children:[i.jsx(De,{value:"",children:"All"}),F.map(f=>i.jsx(De,{value:f,children:f},f))]})]})}),i.jsx(_e,{item:!0,xs:6,md:3,children:i.jsxs(bt,{fullWidth:!0,children:[i.jsx(jt,{children:"Vehicle"}),i.jsxs(kt,{value:v,label:"Vehicle",onChange:f=>{O(f.target.value),s(0)},children:[i.jsx(De,{value:"",children:"All"}),B.map(f=>{var E;return i.jsx(De,{value:f,children:(E=k(f))==null?void 0:E.registration_id},f)})]})]})}),i.jsx(_e,{item:!0,xs:12,md:3,display:"flex",alignItems:"center",children:i.jsx(re,{variant:"contained",color:"error",disabled:c.length===0,onClick:()=>p(!0),children:"Delete Selected"})})]}),i.jsxs(en,{component:Yt,sx:{maxHeight:700},children:[i.jsxs(tn,{stickyHeader:!0,children:[i.jsx(nn,{children:i.jsxs(Fe,{children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Ne,{checked:C.length>0&&c.length===C.length,indeterminate:c.length>0&&c.length<C.length,onChange:R})}),i.jsx(V,{children:"Sr no"}),i.jsx(V,{children:"Vehicle"}),i.jsx(V,{children:"Alert type"}),i.jsx(V,{children:"Message"}),i.jsx(V,{children:"Created Time"})]})}),i.jsx(rn,{children:C==null?void 0:C.slice(o*a,o*a+a).map((f,E)=>i.jsxs(Fe,{hover:!0,selected:L(f._id),onClick:()=>D(f._id),sx:{cursor:"pointer"},children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Ne,{checked:L(f._id)})}),i.jsx(V,{children:o*a+E+1}),i.jsx(V,{children:k(f==null?void 0:f.imei).registration_id}),i.jsx(V,{children:f==null?void 0:f.type}),i.jsx(V,{children:f==null?void 0:f.msg}),i.jsx(V,{children:ve(new Date(f==null?void 0:f.createdAt)).format("DD-MM-YYYY HH:mm")})]},f==null?void 0:f._id))})]}),i.jsx(on,{rowsPerPageOptions:[12],component:"div",count:C.length,rowsPerPage:a,page:o,onPageChange:P,onRowsPerPageChange:w})]}),i.jsx(dt,{open:x,onClose:()=>p(!1),children:i.jsxs(_,{p:3,children:[i.jsx(U,{variant:"h6",children:"Confirm Deletion"}),i.jsxs(U,{sx:{my:2},children:["Are you sure you want to delete ",c.length," selected notifications?"]}),i.jsxs(_,{display:"flex",justifyContent:"flex-end",gap:2,children:[i.jsx(re,{onClick:()=>p(!1),variant:"outlined",children:"Cancel"}),i.jsx(re,{onClick:async()=>{await T(),p(!1)},color:"error",variant:"contained",children:"Confirm Delete"})]})]})})]})},Si=()=>{const{allNotification:e}=Y(d=>d.geofence),t=fe(),r=lt(),[n,o]=y.useState(0),[s,a]=y.useState(10),[u,c]=y.useState([]),[l,g]=y.useState(!1),[j,v]=y.useState(!1),O=(d,T)=>o(T),x=d=>{a(parseInt(d.target.value,10)),o(0)},p=d=>{c(T=>T.includes(d)?T.filter(C=>C!==d):[...T,d])},k=d=>u.includes(d),P=e||[],w=P.slice(n*s,n*s+s),D=d=>{const T=d.target.checked;if(g(T),T){const C=w.map(F=>F.id);c(C)}else c([])},L=async()=>{try{console.log("Deleting rows:",u);const d=await t(mt({ids:u}));mt.fulfilled.match(d)?(c([]),t(Gt())):console.error("Delete failed:",d==null?void 0:d.payload),v(!1)}catch(d){console.error("Delete failed:",d)}},R=d=>{switch(console.log("row",d),t(ce((d==null?void 0:d.record_id)||"")),d==null?void 0:d.goes_to){case"BI":t(xt(0)),r("/inspections");break;case"IB":r("/breakdown");break;case"SI":t(xt(1)),r("/inspections");break;case"IS":r("/service");break;default:ae.error("Page location not found");break}};return i.jsxs(_,{children:[i.jsx(vr,{sx:{justifyContent:"flex-end"},children:i.jsx(re,{color:"error",variant:"contained",disabled:u.length===0,onClick:()=>v(!0),children:"Delete Selected"})}),i.jsxs(en,{component:Yt,sx:{maxHeight:500},children:[i.jsxs(tn,{stickyHeader:!0,children:[i.jsx(nn,{children:i.jsxs(Fe,{children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Ne,{checked:l,indeterminate:u.length>0&&u.length<w.length,onChange:D})}),i.jsx(V,{children:"Sr no"}),i.jsx(V,{children:"Inspection Id"}),i.jsx(V,{children:"Message"}),i.jsx(V,{children:"Date Time"})]})}),i.jsx(rn,{children:w.map((d,T)=>i.jsxs(Fe,{hover:!0,selected:k(d.id),sx:{cursor:"pointer"},children:[i.jsx(V,{padding:"checkbox",onClick:()=>p(d.id),children:i.jsx(Ne,{checked:k(d.id)})}),i.jsx(V,{children:n*s+T+1}),i.jsx(V,{children:d==null?void 0:d.record_id}),i.jsx(V,{onClick:()=>R(d),sx:{color:"blue",textDecoration:"underline",cursor:"pointer"},title:"View Breakdown",children:d==null?void 0:d.message}),i.jsx(V,{children:ve(new Date(d==null?void 0:d.created)).format("DD-MM-YYYY HH:mm")})]},d==null?void 0:d.id))})]}),i.jsx(on,{rowsPerPageOptions:[10],component:"div",count:P.length,rowsPerPage:s,page:n,onPageChange:O,onRowsPerPageChange:x})]}),i.jsxs(dt,{open:j,onClose:()=>v(!1),children:[i.jsx(br,{children:"Confirm Deletion"}),i.jsx(sn,{children:i.jsxs(U,{children:["Are you sure you want to delete ",u.length," selected",u.length>1?" items":" item","?"]})}),i.jsxs(an,{children:[i.jsx(re,{onClick:()=>v(!1),children:"Cancel"}),i.jsx(re,{color:"error",onClick:L,children:"Delete"})]})]})]})};function Ai({showNotification:e,setShowNotification:t}){fe(),Y(s=>s.liveMap);const[r,n]=y.useState("one"),o=(s,a)=>{n(a)};return i.jsx(i.Fragment,{children:i.jsxs(dt,{open:e,onClose:()=>t(!1),fullWidth:!0,maxWidth:"xxl",sx:{"& .MuiDialog-paper":{height:"90vh"}},children:[i.jsx(Vt,{sx:{position:"absolute",right:2,top:8},onClick:()=>t(!1),children:i.jsx(xr,{})}),i.jsxs(sn,{dividers:!0,sx:{minHeight:"100px"},children:["  ",i.jsxs(_,{sx:{width:"100%"},children:[i.jsxs(jr,{value:r,onChange:o,textColor:"inherit",indicatorColor:"secondary",sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #ccc"},children:[i.jsx(St,{value:"one",label:"Inbox",sx:{color:"black",fontWeight:"bold"}}),i.jsx(St,{value:"two",label:"Alert",sx:{color:"black",fontWeight:"bold"}})]}),i.jsxs(_,{sx:{p:2},children:[r==="one"&&i.jsx(_,{children:i.jsx(Si,{})}),r==="two"&&i.jsx(_,{children:i.jsx(ki,{})})]})]})]}),i.jsx(an,{children:i.jsx(re,{onClick:()=>t(!1),children:"Close"})})]})})}const Qi=()=>{const{w_customer_id:e,collapsed:t}=Y(h=>h.auth),{mode:r,selectedTripData:n,selectedVehicleGroup:o,showVehicles:s,vehicleZone:a}=Y(h=>h.dashboard),{breakdowns:u}=Y(h=>h.breakdown);Y(h=>h.inspection);const[c,l]=y.useState(()=>{const h=sessionStorage.getItem("imeiNo");return h?JSON.parse(h):[]}),{selectedVehicle:g,vehicleList:j,onlineVehicle:v,locationData:O}=Y(h=>h.liveMap),x=fe(),p=zt(r),[k,P]=y.useState([]),[w,D]=y.useState(!1),[L,R]=y.useState({}),[d,T]=y.useState(!1),[C,F]=y.useState(!1),[B,q]=y.useState(!1);y.useEffect(()=>{(async()=>{await E()})(),x(Cn())},[]);const f=h=>{let A=j.find(m=>{var N;return((N=m==null?void 0:m.imei[0])==null?void 0:N.mac_id)==h});return(A==null?void 0:A.registration_id)||h};y.useEffect(()=>{if(console.log(u,"inspection history"),u.length>0){let h={open:0,rejected:0,close:0};u.map(A=>{A.status==="Open"&&h.open++,A.status==="Close"&&h.close++,A.status==="Rejected"&&h.rejected++}),x(wn(h))}},[u]),y.useEffect(()=>{if(u.length>0){let h={open:0,overDue:0,close:0};u.map(A=>{if(A.status==="Open"&&h.open++,A.status==="Close"&&h.close++,A.submission_date){const m=new Date(A.submission_date),N=new Date;N.setHours(0,0,0,0),m.setHours(0,0,0,0),m<N&&A.status=="Open"&&h.overDue++}}),x(Tn(h))}},[u]),y.useEffect(()=>{x(_n())},[]),y.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(c))},[c]),y.useEffect(()=>{var h,A,m;Object.keys(g).length===0&&j.length>0&&x(Rn({imei:(A=(h=j[0])==null?void 0:h.imei[0])==null?void 0:A.mac_id,reg_id:(m=j[0])==null?void 0:m.registration_id}))},[g,j]),y.useEffect(()=>{let h=j.map(m=>{var N;return((N=m==null?void 0:m.imei[0])==null?void 0:N.mac_id)||null}).filter(m=>m),A={imeiList:h,startDate:ve(new Date).format("MM-DD-YYYY"),endDate:ve(new Date).format("MM-DD-YYYY")};h&&h.length>0&&x(Wt(A)),x(Gt())},[j]),y.useEffect(()=>{(async()=>{if(g!=null&&g.imei){const A=Bt(),m=A.startOf("day").format("MM/DD/YYYY HH:mm:ss"),N=A.endOf("day").format("MM/DD/YYYY HH:mm:ss"),S={imei:g.imei,startTime:m,endTime:N};try{x(Dn(S))}catch(b){console.error("Error fetching report:",b)}}})()},[g,x]),y.useEffect(()=>{const h=m=>{(m==null?void 0:m.imei)!==null&&c.find(b=>parseInt(b)===(m==null?void 0:m.imei))&&ae.error(`Type: ${m==null?void 0:m.type} ${m==null?void 0:m.msg} ${f(m==null?void 0:m.imei)}`,{id:"geofence",autoClose:5e3})},A=m=>{(m==null?void 0:m.imei)!==null&&c.find(b=>parseInt(b)===(m==null?void 0:m.imei))&&ae.error(`${m==null?void 0:m.msg} ${f(m==null?void 0:m.imei)}`,{id:"speed",autoClose:5e3})};return Pe.on("geofenceAlert",h),Pe.on("speedAlert",A),()=>{Pe.off("geofenceAlert",h),Pe.off("speedAlert",A)}},[c,Pe]);const E=async()=>{try{let h=[],A=[];const m=await x(In({w_customer_id:e}));if(Array.isArray(m.payload)){m.payload.forEach(b=>{var W,Z;Array.isArray(b.imei)&&b.imei.length>0?(h.push({id:b.id,label:b.registration_id,value:(W=b==null?void 0:b.imei[0])==null?void 0:W.mac_id,vehilce_type:b==null?void 0:b.segment,sell_date:b==null?void 0:b.sell_date,workShop:b==null?void 0:b.workshop,vehicle_group:b==null?void 0:b.vehicle_group}),A.push((Z=b.imei[0])==null?void 0:Z.mac_id),b.registration_id):(console.error("IMEI data not found for item:",b),ae.error(`IMEI Number not found for the vehicle: ${b==null?void 0:b.registration_id}`,{duration:2e3}))}),l(A);const N="one",S=A;A.length>0&&(x(En({type:N,imei:S})),x(Ln(S))),P(h),x($n(h)),x(Fn({w_customer_id:e})),x(Nn(e)),x(Mn({}))}else console.error("Unexpected data format:",m),ae.error("Unexpected data format:")}catch(h){console.error("Error fetching vehicle data:",h),ae.error(`Error fetching vehicle data: ${h}`)}},z=h=>O==null?void 0:O.some(A=>Number(A.latestDocument.imei)===Number(h)&&A.latestDocument.speed>0&&(A.latestDocument.ignition===!0||A.latestDocument.ignition===1)),ee=h=>O==null?void 0:O.some(A=>Number(A.latestDocument.imei)===Number(h)&&A.latestDocument.speed<=0&&(A.latestDocument.ignition===!0||A.latestDocument.ignition===1)),$=k.filter(h=>{if(!(Object.keys(o).length===0||h.vehicle_group===o.id))return!1;const m=Number(h.value),N=v.includes(m),S=!v.includes(m),b=v.includes(m)&&z(m),W=v.includes(m)&&ee(m);switch(a){case"Total Vehicles":return!0;case"Online":return N;case"Running":return b;case"Offline":return S;case"Idling":return W;default:return!0}});return i.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[i.jsx(cr,{}),i.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[i.jsx(ar,{title:"Dashboard",setShowNotification:D,showNotification:w,setShowVehiclesGroup:T,showVehiclesGroup:d}),i.jsx(mr,{setShowVehiclesGroup:T,showVehiclesGroup:d}),i.jsxs(_,{sx:{height:"92vh",backgroundColor:p.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[s&&i.jsx(_,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:p.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:i.jsx(Vn,{vehicleData:$,showVehicles:s})}),i.jsx(Ee,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),i.jsxs(_,{sx:{display:"flex",gap:"30px",background:et.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[w&&i.jsx(Ai,{showNotification:w,setShowNotification:D}),"              ",i.jsx(xi,{}),i.jsx(_,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:i.jsx(mi,{setLoading:F})})]}),i.jsx(_,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:i.jsx(ji,{vehicleReport:L,imeiNo:c,loading:C,isloadingReport:B})})]})]})]})]})};export{Qi as default};
