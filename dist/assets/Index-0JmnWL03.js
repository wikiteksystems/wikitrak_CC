import{c as gn,s as mn,_ as H,h as ft,r as Ze,a as xn,d as yn,m as vn,b as x,e as bn,f as Ye,j as i,g as ue,u as jn,i as pt,k as We,l as Ge,n as kn,o as st,p as de,q as ze,t as Sn,v as Mt,T as q,R as I,w as at,I as Vt,x as Te,y as fe,z as W,A as ht,B as An,C as ae,D as Bt,E as et,F as lt,G as re,H as Pn,J as On,K as ce,L as Xe,M as _e,P as Yt,N as ve,O as gt,Q as Wt,S as mt,U as Gt,V as xt,W as Cn,X as wn,Y as Tn,Z as _n,$ as Rn,a0 as Dn,a1 as In,a2 as En,a3 as Ln,a4 as $n,a5 as Fn,a6 as Nn,a7 as Mn}from"./index-CacN93qF.js";import{s as Pe}from"./Socket-DLjvxrzW.js";import{t as zt}from"./SearchTab-CdLD1gTP.js";import{V as Vn}from"./VehicleMenu-DtdM9SWC.js";import"./DateTimePicker-jrjTFX8W.js";import{f as z,_ as Kt,a as Ht,b as Bn,c as Yn,i as ge,T as ct,p as te,L as Q,d as ut,e as Ut,D as Wn,G as Gn,u as zn,C as Kn,g as be,h as pe,S as Hn,A as Un,j as qn,k as yt,l as Zn,m as me,n as Xn,o as Jn,q as qt,r as Qn,s as Re,w as vt,t as Ie,v as er,x as tr,R as Zt,B as nr,y as rr,X as or,Y as ir,z as Xt,E as sr,F as ar}from"./TopBar-BGNSogzy.js";import"./proj-XQwXs9DQ.js";import{d as lr,T as Ee,L as cr}from"./LeftSideBar2-BwkQRRHQ.js";import{u as ur,G as dr,M as fr}from"./esm-BpIC8BEg.js";import{B as _}from"./CircularProgress-DzZZsU67.js";import{u as Jt,f as Qt,I as pr,F as bt,a as jt,S as kt,M as De}from"./menu2-KEMXhPrS.js";import{f as hr}from"./TripMap-Dv-PAPV7.js";import{S as gr}from"./Switch-DILKY_rD.js";import{V as mr}from"./VehicleGroups-DIq4HoXd.js";import{d as xr}from"./Close-CaDFqelt.js";import{N as yr}from"./NewLoader-7qFqfefi.js";import{T as en,a as tn,b as nn,c as Fe,d as B,e as rn}from"./TableRow-DMTc0tJv.js";import{C as Ne}from"./Checkbox-DV1Lye2j.js";import{T as on,a as vr}from"./TablePagination-oTuvnKOX.js";import{D as dt,a as br,b as sn,c as an}from"./DialogTitle-BNdJ_ti5.js";import{T as jr,a as St}from"./Tabs-Dd1qFlWV.js";import"./isBetween-CeNVRmTa.js";import"./index-CvDPfAQ-.js";import"./index-Cg7om6Xs.js";import"./NotificationsNone-1XgNU0DJ.js";import"./createSvgIcon-DvNtrQm6.js";import"./useControlled-BXHThFOr.js";import"./usePreviousProps-MKzw59pG.js";import"./redTractor-NXgVJyvR.js";import"./TripGraph-BKf2Iz15.js";import"./Info-Bro-dzFk.js";const kr=["component","direction","spacing","divider","children","className","useFlexGap"],Sr=gn(),Ar=mn("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Pr(e){return jn({props:e,name:"MuiStack",defaultTheme:Sr})}function Or(e,t){const r=x.Children.toArray(e).filter(Boolean);return r.reduce((n,o,s)=>(n.push(o),s<r.length-1&&n.push(x.cloneElement(t,{key:`separator-${s}`})),n),[])}const Cr=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],wr=({ownerState:e,theme:t})=>{let r=H({display:"flex",flexDirection:"column"},ft({theme:t},Ze({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=xn(t),o=Object.keys(t.breakpoints.values).reduce((c,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(c[l]=!0),c),{}),s=Ze({values:e.direction,base:o}),a=Ze({values:e.spacing,base:o});typeof s=="object"&&Object.keys(s).forEach((c,l,g)=>{if(!s[c]){const m=l>0?s[g[l-1]]:"column";s[c]=m}}),r=yn(r,ft({theme:t},a,(c,l)=>e.useFlexGap?{gap:pt(n,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Cr(l?s[l]:e.direction)}`]:pt(n,c)}}))}return r=vn(t.breakpoints,r),r};function Tr(e={}){const{createStyledComponent:t=Ar,useThemeProps:r=Pr,componentName:n="MuiStack"}=e,o=()=>We({root:["root"]},c=>Ge(n,c),{}),s=t(wr);return x.forwardRef(function(c,l){const g=r(c),b=bn(g),{component:m="div",direction:C="column",spacing:j=0,divider:d,children:k,className:S,useFlexGap:w=!1}=b,D=Ye(b,kr),$={direction:C,spacing:j,useFlexGap:w},R=o();return i.jsx(s,H({as:m,ownerState:$,ref:l,className:ue(R.root,S)},D,{children:d?Or(k,d):k}))})}const _r=kn(i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Rr(e){return Ge("MuiAvatar",e)}st("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Dr=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Ir=e=>{const{classes:t,variant:r,colorDefault:n}=e;return We({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Rr,t)},Er=de("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:H({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:H({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Lr=de("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),$r=de(_r,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Fr({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[o,s]=x.useState(!1);return x.useEffect(()=>{if(!r&&!n)return;s(!1);let a=!0;const u=new Image;return u.onload=()=>{a&&s("loaded")},u.onerror=()=>{a&&s("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=r,n&&(u.srcset=n),()=>{a=!1}},[e,t,r,n]),o}const Nr=x.forwardRef(function(t,r){const n=ze({props:t,name:"MuiAvatar"}),{alt:o,children:s,className:a,component:u="div",slots:c={},slotProps:l={},imgProps:g,sizes:b,src:m,srcSet:C,variant:j="circular"}=n,d=Ye(n,Dr);let k=null;const S=Fr(H({},g,{src:m,srcSet:C})),w=m||C,D=w&&S!=="error",$=H({},n,{colorDefault:!D,component:u,variant:j}),R=Ir($),[f,T]=Sn("img",{className:R.img,elementType:Lr,externalForwardedProps:{slots:c,slotProps:{img:H({},g,l.img)}},additionalProps:{alt:o,src:m,srcSet:C,sizes:b},ownerState:$});return D?k=i.jsx(f,H({},T)):s||s===0?k=s:w&&o?k=o[0]:k=i.jsx($r,{ownerState:$,className:R.fallback}),i.jsx(Er,H({as:u,ownerState:$,className:ue(R.root,a),ref:r},d,{children:k}))}),ln=Nr,Mr=Tr({createStyledComponent:de("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ze({props:e,name:"MuiStack"})}),Vr=Mr;function Br(e){return Ge("MuiFormControlLabel",e)}const Yr=st("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Oe=Yr,Wr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Gr=e=>{const{classes:t,disabled:r,labelPlacement:n,error:o,required:s}=e,a={root:["root",r&&"disabled",`labelPlacement${Mt(n)}`,o&&"error",s&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]};return We(a,Br,t)},zr=de("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Oe.label}`]:t.label},t.root,t[`labelPlacement${Mt(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>H({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Oe.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Oe.label}`]:{[`&.${Oe.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Kr=de("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Oe.error}`]:{color:(e.vars||e).palette.error.main}})),Hr=x.forwardRef(function(t,r){var n,o;const s=ze({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:u={},control:c,disabled:l,disableTypography:g,label:b,labelPlacement:m="end",required:C,slotProps:j={}}=s,d=Ye(s,Wr),k=Jt(),S=(n=l??c.props.disabled)!=null?n:k==null?void 0:k.disabled,w=C??c.props.required,D={disabled:S,required:w};["checked","name","onChange","value","inputRef"].forEach(N=>{typeof c.props[N]>"u"&&typeof s[N]<"u"&&(D[N]=s[N])});const $=Qt({props:s,muiFormControl:k,states:["error"]}),R=H({},s,{disabled:S,labelPlacement:m,required:w,error:$.error}),f=Gr(R),T=(o=j.typography)!=null?o:u.typography;let A=b;return A!=null&&A.type!==q&&!g&&(A=i.jsx(q,H({component:"span"},T,{className:ue(f.label,T==null?void 0:T.className),children:A}))),i.jsxs(zr,H({className:ue(f.root,a),ownerState:R,ref:r},d,{children:[x.cloneElement(c,D),w?i.jsxs(Vr,{display:"block",children:[A,i.jsxs(Kr,{ownerState:R,"aria-hidden":!0,className:f.asterisk,children:["â€‰","*"]})]}):A]}))}),Ur=Hr;function qr(e){return Ge("MuiFormGroup",e)}st("MuiFormGroup",["root","row","error"]);const Zr=["className","row"],Xr=e=>{const{classes:t,row:r,error:n}=e;return We({root:["root",r&&"row",n&&"error"]},qr,t)},Jr=de("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>H({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Qr=x.forwardRef(function(t,r){const n=ze({props:t,name:"MuiFormGroup"}),{className:o,row:s=!1}=n,a=Ye(n,Zr),u=Jt(),c=Qt({props:n,muiFormControl:u,states:["error"]}),l=H({},n,{row:s,error:c.error}),g=Xr(l);return i.jsx(Jr,H({className:ue(g.root,o),ownerState:l,ref:r},a))}),eo=Qr;var to=["points","className","baseLinePoints","connectNulls"];function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xe.apply(this,arguments)}function no(e,t){if(e==null)return{};var r=ro(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ro(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function At(e){return ao(e)||so(e)||io(e)||oo()}function oo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function io(e,t){if(e){if(typeof e=="string")return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}}function so(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ao(e){if(Array.isArray(e))return tt(e)}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=function(t){return t&&t.x===+t.x&&t.y===+t.y},lo=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Pt(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Pt(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Ce=function(t,r){var n=lo(t);r&&(n=[n.reduce(function(s,a){return[].concat(At(s),At(a))},[])]);var o=n.map(function(s){return s.reduce(function(a,u,c){return"".concat(a).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return n.length===1?"".concat(o,"Z"):o},co=function(t,r,n){var o=Ce(t,n);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(Ce(r.reverse(),n).slice(1))},uo=function(t){var r=t.points,n=t.className,o=t.baseLinePoints,s=t.connectNulls,a=no(t,to);if(!r||!r.length)return null;var u=ue("recharts-polygon",n);if(o&&o.length){var c=a.stroke&&a.stroke!=="none",l=co(r,o,s);return I.createElement("g",{className:u},I.createElement("path",xe({},z(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),c?I.createElement("path",xe({},z(a,!0),{fill:"none",d:Ce(r,s)})):null,c?I.createElement("path",xe({},z(a,!0),{fill:"none",d:Ce(o,s)})):null)}var g=Ce(r,s);return I.createElement("path",xe({},z(a,!0),{fill:g.slice(-1)==="Z"?a.fill:"none",className:u,d:g}))},fo=Kt,po=Bn,ho=Ht;function go(e,t){return e&&e.length?fo(e,ho(t),po):void 0}var mo=go;const xo=at(mo);var yo=Kt,vo=Ht,bo=Yn;function jo(e,t){return e&&e.length?yo(e,vo(t),bo):void 0}var ko=jo;const So=at(ko);var Ao=["cx","cy","angle","ticks","axisLine"],Po=["ticks","tick","angle","tickFormatter","stroke"];function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(e)}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},we.apply(this,arguments)}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(r),!0).forEach(function(n){Ke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ct(e,t){if(e==null)return{};var r=Oo(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oo(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,un(n.key),n)}}function wo(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function To(e,t,r){return t=Me(t),_o(e,cn()?Reflect.construct(t,r||[],Me(e).constructor):t.apply(e,r))}function _o(e,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ro(e)}function Ro(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cn=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Me(e)}function Do(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},nt(e,t)}function Ke(e,t,r){return t=un(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function un(e){var t=Io(e,"string");return je(t)=="symbol"?t:String(t)}function Io(e,t){if(je(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(je(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var He=function(e){Do(t,e);function t(){return Co(this,t),To(this,t,arguments)}return wo(t,[{key:"getTickValueCoord",value:function(n){var o=n.coordinate,s=this.props,a=s.angle,u=s.cx,c=s.cy;return te(u,c,o,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,o;switch(n){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=xo(u,function(g){return g.coordinate||0}),l=So(u,function(g){return g.coordinate||0});return{cx:o,cy:s,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=n.axisLine,l=Ct(n,Ao),g=u.reduce(function(j,d){return[Math.min(j[0],d.coordinate),Math.max(j[1],d.coordinate)]},[1/0,-1/0]),b=te(o,s,g[0],a),m=te(o,s,g[1],a),C=ie(ie(ie({},z(l,!1)),{},{fill:"none"},z(c,!1)),{},{x1:b.x,y1:b.y,x2:m.x,y2:m.y});return I.createElement("line",we({className:"recharts-polar-radius-axis-line"},C))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.angle,c=o.tickFormatter,l=o.stroke,g=Ct(o,Po),b=this.getTickTextAnchor(),m=z(g,!1),C=z(a,!1),j=s.map(function(d,k){var S=n.getTickValueCoord(d),w=ie(ie(ie(ie({textAnchor:b,transform:"rotate(".concat(90-u,", ").concat(S.x,", ").concat(S.y,")")},m),{},{stroke:"none",fill:l},C),{},{index:k},S),{},{payload:d});return I.createElement(Q,we({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(d.coordinate)},ut(n.props,d,k)),t.renderTickItem(a,w,c?c(d.value,k):d.value))});return I.createElement(Q,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.axisLine,a=n.tick;return!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),a&&this.renderTicks(),Ut.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):ge(n)?a=n(o):a=I.createElement(ct,we({},o,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}]),t}(x.PureComponent);Ke(He,"displayName","PolarRadiusAxis");Ke(He,"axisType","radiusAxis");Ke(He,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(r),!0).forEach(function(n){Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fn(n.key),n)}}function Lo(e,t,r){return t&&_t(e.prototype,t),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $o(e,t,r){return t=Ve(t),Fo(e,dn()?Reflect.construct(t,r||[],Ve(e).constructor):t.apply(e,r))}function Fo(e,t){if(t&&(ke(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return No(e)}function No(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dn=function(){return!!e})()}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ve(e)}function Mo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},rt(e,t)}function Ue(e,t,r){return t=fn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fn(e){var t=Vo(e,"string");return ke(t)=="symbol"?t:String(t)}function Vo(e,t){if(ke(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ke(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bo=Math.PI/180,Rt=1e-5,qe=function(e){Mo(t,e);function t(){return Eo(this,t),$o(this,t,arguments)}return Lo(t,[{key:"getTickLineCoord",value:function(n){var o=this.props,s=o.cx,a=o.cy,u=o.radius,c=o.orientation,l=o.tickSize,g=l||8,b=te(s,a,u,n.coordinate),m=te(s,a,u+(c==="inner"?-1:1)*g,n.coordinate);return{x1:b.x,y1:b.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var o=this.props.orientation,s=Math.cos(-n.coordinate*Bo),a;return s>Rt?a=o==="outer"?"start":"end":s<-Rt?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.radius,u=n.axisLine,c=n.axisLineType,l=se(se({},z(this.props,!1)),{},{fill:"none"},z(u,!1));if(c==="circle")return I.createElement(Wn,le({className:"recharts-polar-angle-axis-line"},l,{cx:o,cy:s,r:a}));var g=this.props.ticks,b=g.map(function(m){return te(o,s,a,m.coordinate)});return I.createElement(uo,le({className:"recharts-polar-angle-axis-line"},l,{points:b}))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.tickLine,c=o.tickFormatter,l=o.stroke,g=z(this.props,!1),b=z(a,!1),m=se(se({},g),{},{fill:"none"},z(u,!1)),C=s.map(function(j,d){var k=n.getTickLineCoord(j),S=n.getTickTextAnchor(j),w=se(se(se({textAnchor:S},g),{},{stroke:"none",fill:l},b),{},{index:d,payload:j,x:k.x2,y:k.y2});return I.createElement(Q,le({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(j.coordinate)},ut(n.props,j,d)),u&&I.createElement("line",le({className:"recharts-polar-angle-axis-tick-line"},m,k)),a&&t.renderTickItem(a,w,c?c(j.value,d):j.value))});return I.createElement(Q,{className:"recharts-polar-angle-axis-ticks"},C)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):ge(n)?a=n(o):a=I.createElement(ct,le({},o,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}]),t}(x.PureComponent);Ue(qe,"displayName","PolarAngleAxis");Ue(qe,"axisType","angleAxis");Ue(qe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Le;function Se(e){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dt(Object(r),!0).forEach(function(n){J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hn(n.key),n)}}function Wo(e,t,r){return t&&It(e.prototype,t),r&&It(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Go(e,t,r){return t=Be(t),zo(e,pn()?Reflect.construct(t,r||[],Be(e).constructor):t.apply(e,r))}function zo(e,t){if(t&&(Se(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}function pn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pn=function(){return!!e})()}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(e)}function he(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ko(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},ot(e,t)}function J(e,t,r){return t=hn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){var t=Ho(e,"string");return Se(t)=="symbol"?t:String(t)}function Ho(e,t){if(Se(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Se(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ne=function(e){Ko(t,e);function t(r){var n;return Yo(this,t),n=Go(this,t,[r]),J(he(n),"pieRef",null),J(he(n),"sectorRefs",[]),J(he(n),"id",zn("recharts-pie-")),J(he(n),"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ge(o)&&o()}),J(he(n),"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ge(o)&&o()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Wo(t,[{key:"isActiveIndex",value:function(n){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(n)!==-1:n===o}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,u=s.labelLine,c=s.dataKey,l=s.valueKey,g=z(this.props,!1),b=z(a,!1),m=z(u,!1),C=a&&a.offsetRadius||20,j=n.map(function(d,k){var S=(d.startAngle+d.endAngle)/2,w=te(d.cx,d.cy,d.outerRadius+C,S),D=M(M(M(M({},g),d),{},{stroke:"none"},b),{},{index:k,textAnchor:t.getTextAnchor(w.x,d.cx)},w),$=M(M(M(M({},g),d),{},{fill:"none",stroke:d.fill},m),{},{index:k,points:[te(d.cx,d.cy,d.outerRadius,S),w],key:"line"}),R=c;return be(c)&&be(l)?R="value":be(c)&&(R=l),I.createElement(Q,{key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(k)},u&&t.renderLabelLineItem(u,$),t.renderLabelItem(a,D,pe(d,R)))});return I.createElement(Q,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(n){var o=this,s=this.props,a=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return n.map(function(l,g){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var b=o.isActiveIndex(g),m=c&&o.hasActiveIndex()?c:null,C=b?a:m,j=M(M({},l),{},{stroke:u?l.fill:l.stroke,tabIndex:-1});return I.createElement(Q,ye({ref:function(k){k&&!o.sectorRefs.includes(k)&&o.sectorRefs.push(k)},tabIndex:-1,className:"recharts-pie-sector"},ut(o.props,l,g),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(g)}),I.createElement(Hn,ye({option:C,isActive:b,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,o=this.props,s=o.sectors,a=o.isAnimationActive,u=o.animationBegin,c=o.animationDuration,l=o.animationEasing,g=o.animationId,b=this.state,m=b.prevSectors,C=b.prevIsAnimationActive;return I.createElement(Un,{begin:u,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(g,"-").concat(C),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var d=j.t,k=[],S=s&&s[0],w=S.startAngle;return s.forEach(function(D,$){var R=m&&m[$],f=$>0?qn(D,"paddingAngle",0):0;if(R){var T=yt(R.endAngle-R.startAngle,D.endAngle-D.startAngle),A=M(M({},D),{},{startAngle:w+f,endAngle:w+T(d)+f});k.push(A),w=A.endAngle}else{var N=D.endAngle,Y=D.startAngle,Z=yt(0,N-Y),p=Z(d),L=M(M({},D),{},{startAngle:w+f,endAngle:w+p+f});k.push(L),w=L.endAngle}}),I.createElement(Q,null,n.renderSectorsStatically(k))})}},{key:"attachKeyboardHandlers",value:function(n){var o=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var u=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[u].focus(),o.setState({sectorToFocus:u});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,o=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&o&&o.length&&(!a||!Zn(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,o=this.props,s=o.hide,a=o.sectors,u=o.className,c=o.label,l=o.cx,g=o.cy,b=o.innerRadius,m=o.outerRadius,C=o.isAnimationActive,j=this.state.isAnimationFinished;if(s||!a||!a.length||!me(l)||!me(g)||!me(b)||!me(m))return null;var d=ue("recharts-pie",u);return I.createElement(Q,{tabIndex:this.props.rootTabIndex,className:d,ref:function(S){n.pieRef=S}},this.renderSectors(),c&&this.renderLabels(a),Ut.renderCallByParent(this.props,null,!1),(!C||j)&&Xn.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return o.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:n.sectors!==o.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,o){return n>o?"start":n<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,o){return I.isValidElement(n)?I.cloneElement(n,o):ge(n)?n(o):I.createElement(Kn,ye({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,o,s){if(I.isValidElement(n))return I.cloneElement(n,o);var a=s;return ge(n)&&(a=n(o),I.isValidElement(a))?a:I.createElement(ct,ye({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(x.PureComponent);Le=ne;J(ne,"displayName","Pie");J(ne,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Gn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});J(ne,"parseDeltaAngle",function(e,t){var r=Ie(t-e),n=Math.min(Math.abs(t-e),360);return r*n});J(ne,"getRealPieData",function(e){var t=e.props,r=t.data,n=t.children,o=z(e.props,!1),s=Jn(n,qt);return r&&r.length?r.map(function(a,u){return M(M(M({payload:a},o),a),s&&s[u]&&s[u].props)}):s&&s.length?s.map(function(a){return M(M({},o),a.props)}):[]});J(ne,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,o=t.width,s=t.height,a=Qn(o,s),u=n+Re(e.props.cx,o,o/2),c=r+Re(e.props.cy,s,s/2),l=Re(e.props.innerRadius,a,0),g=Re(e.props.outerRadius,a,a*.8),b=e.props.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:u,cy:c,innerRadius:l,outerRadius:g,maxRadius:b}});J(ne,"getComposedData",function(e){var t=e.item,r=e.offset,n=Le.getRealPieData(t);if(!n||!n.length)return null;var o=t.props,s=o.cornerRadius,a=o.startAngle,u=o.endAngle,c=o.paddingAngle,l=o.dataKey,g=o.nameKey,b=o.valueKey,m=o.tooltipType,C=Math.abs(t.props.minAngle),j=Le.parseCoordinateOfPie(t,r),d=Le.parseDeltaAngle(a,u),k=Math.abs(d),S=l;be(l)&&be(b)?(vt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):be(l)&&(vt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=b);var w=n.filter(function(A){return pe(A,S,0)!==0}).length,D=(k>=360?w:w-1)*c,$=k-w*C-D,R=n.reduce(function(A,N){var Y=pe(N,S,0);return A+(me(Y)?Y:0)},0),f;if(R>0){var T;f=n.map(function(A,N){var Y=pe(A,S,0),Z=pe(A,g,N),p=(me(Y)?Y:0)/R,L;N?L=T.endAngle+Ie(d)*c*(Y!==0?1:0):L=a;var K=L+Ie(d)*((Y!==0?C:0)+p*$),ee=(L+K)/2,F=(j.innerRadius+j.outerRadius)/2,V=[{name:Z,value:Y,payload:A,dataKey:S,type:m}],y=te(j.cx,j.cy,F,ee);return T=M(M(M({percent:p,cornerRadius:s,name:Z,tooltipPayload:V,midAngle:ee,middleRadius:F,tooltipPosition:y},A),j),{},{value:pe(A,S),startAngle:L,endAngle:K,payload:A,paddingAngle:Ie(d)*c}),T})}return M(M({},j),{},{sectors:f,data:n})});var Uo=er({chartName:"PieChart",GraphicalChild:ne,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qe},{axisType:"radiusAxis",AxisComp:He}],formatAxisMap:tr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const qo=({data:e})=>i.jsx(Zt,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:i.jsxs(nr,{data:e,children:[i.jsx(rr,{strokeDasharray:"3 3"}),i.jsx(or,{dataKey:"name"}),i.jsx(ir,{}),i.jsx(Xt,{}),i.jsx(sr,{dataKey:"value",fill:"#82ca9d"})]})});function Zo({searchQuery:e,setSearchQuery:t,map:r}){const n=async o=>{if(o.preventDefault(),e.trim()==="")return;const s={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(r).findPlaceFromQuery(s,(u,c)=>{if(c===window.google.maps.places.PlacesServiceStatus.OK&&u){const l=u[0];r.setCenter(l.geometry.location),r.setZoom(14)}})};return i.jsxs(_,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[i.jsx(pr,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),i.jsx(Vt,{type:"submit",sx:{p:1},children:i.jsx(lr,{})})]})}var Xo="Expected a function",Et=NaN,Jo="[object Symbol]",Qo=/^\s+|\s+$/g,ei=/^[-+]0x[0-9a-f]+$/i,ti=/^0b[01]+$/i,ni=/^0o[0-7]+$/i,ri=parseInt,oi=typeof Te=="object"&&Te&&Te.Object===Object&&Te,ii=typeof self=="object"&&self&&self.Object===Object&&self,si=oi||ii||Function("return this")(),ai=Object.prototype,li=ai.toString,ci=Math.max,ui=Math.min,Je=function(){return si.Date.now()};function di(e,t,r){var n,o,s,a,u,c,l=0,g=!1,b=!1,m=!0;if(typeof e!="function")throw new TypeError(Xo);t=Lt(t)||0,it(r)&&(g=!!r.leading,b="maxWait"in r,s=b?ci(Lt(r.maxWait)||0,t):s,m="trailing"in r?!!r.trailing:m);function C(f){var T=n,A=o;return n=o=void 0,l=f,a=e.apply(A,T),a}function j(f){return l=f,u=setTimeout(S,t),g?C(f):a}function d(f){var T=f-c,A=f-l,N=t-T;return b?ui(N,s-A):N}function k(f){var T=f-c,A=f-l;return c===void 0||T>=t||T<0||b&&A>=s}function S(){var f=Je();if(k(f))return w(f);u=setTimeout(S,d(f))}function w(f){return u=void 0,m&&n?C(f):(n=o=void 0,a)}function D(){u!==void 0&&clearTimeout(u),l=0,n=c=o=u=void 0}function $(){return u===void 0?a:w(Je())}function R(){var f=Je(),T=k(f);if(n=arguments,o=this,c=f,T){if(u===void 0)return j(c);if(b)return u=setTimeout(S,t),C(c)}return u===void 0&&(u=setTimeout(S,t)),a}return R.cancel=D,R.flush=$,R}function it(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fi(e){return!!e&&typeof e=="object"}function pi(e){return typeof e=="symbol"||fi(e)&&li.call(e)==Jo}function Lt(e){if(typeof e=="number")return e;if(pi(e))return Et;if(it(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=it(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Qo,"");var r=ti.test(e);return r||ni.test(e)?ri(e.slice(2),r?2:8):ei.test(e)?Et:+e}var hi=di;const gi=at(hi),mi=({setLoading:e})=>{const t=fe(),{center:r,selectedParameterList:n,selectedVehicle:o,vehicleList:s,tractorIcon:a,icons:u,locationData:c,ivnPid:l,placesData:g}=W(F=>F.liveMap),{mode:b,AreaCoveredTrips:m}=W(F=>F.dashboard),{isLoaded:C,loadError:j}=ur({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[d,k]=x.useState(null),[S,w]=x.useState(!0),[D,$]=x.useState(5),[R,f]=x.useState(),[T,A]=x.useState(""),N=x.useRef(null),Y=zt(b),Z=x.useCallback(F=>{N.current=F},[]),p=gi(F=>{if(!F||F.length===0)return;const V=10;let y=0;const O=h=>{F.slice(h,h+V).forEach(E=>{var P;((P=E==null?void 0:E.data)==null?void 0:P.length)>0&&(y+=hr(E==null?void 0:E.data,t))}),h+V<F.length?setTimeout(()=>O(h+V),0):(console.log("calculated acreage: ",y),t(ht(y.toFixed(2))),e(!1))};O(0)},300);x.useEffect(()=>(m&&m.length>0?(e(!0),p(m)):(e(!1),t(ht(0))),()=>{p.cancel(),e(!1)}),[m,t]),x.useEffect(()=>{if(S)f(c);else{let F=c==null?void 0:c.filter(V=>(V==null?void 0:V._id)===(o==null?void 0:o.imei));f(F)}},[c,o,S]);const L=()=>{if(!S)t(An({lat:21,lng:78})),$(4),w(V=>!V);else{const F=c.find(V=>V.latestDocument.imei===o.imei);F?(console.log(F.latestDocument,"getCenter"),F.latestDocument,w(V=>!V)):ae.error("Data is not available for selected vehicle")}};if(x.useEffect(()=>{C&&k(window.google.maps)},[C,c]),j)return"Error loading maps";if(!C)return"Loading maps";const K={height:"100vh",borderRadius:"8px"},ee=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return d?i.jsxs("div",{children:[i.jsxs(_,{style:{fontSize:"20px",color:Y.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[i.jsx(q,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),i.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(Zo,{searchQuery:T,setSearchQuery:A,map:N.current}),i.jsx(eo,{sx:{marginLeft:0,paddingTop:0,color:Y.grey[400]},children:i.jsx(Ur,{control:i.jsx(gr,{checked:S,onChange:L}),label:S?"Group":"Individual"})})]})]}),i.jsx(dr,{mapContainerStyle:K,zoom:D,center:r,onLoad:Z,options:{mapTypeControl:!1,styles:b?ee:""},children:R&&R.length>0&&R.map((F,V)=>i.jsx(fr,{position:{lat:F.latestDocument.lat,lng:F.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},V))})]}):null};function xi(){const{vehicles_details:e}=W(n=>n.dashboard),[t,r]=x.useState([]);return x.useEffect(()=>{const n=e.reduce((s,a)=>{const u=a.sell_date?Bt(a.sell_date):null,c=u&&u.isValid()?u.format("MMM YYYY"):"N/A";return s[c]=(s[c]||0)+1,s},{}),o=Object.keys(n).map(s=>({name:s,value:n[s]}));r(o)},[e]),i.jsxs(_,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[i.jsx(Ee,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),i.jsxs(_,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[i.jsx(_,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:i.jsx(Ee,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),i.jsx(qo,{data:t})]}),i.jsx(Ee,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const $t=Math.PI/180,yi=({cx:e,cy:t,midAngle:r,innerRadius:n,outerRadius:o,percent:s,index:a})=>{const u=n+(o-n)*.5,c=e+u*Math.cos(-r*$t),l=t+u*Math.sin(-r*$t);return i.jsx("text",{x:c,y:l,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(s*100).toFixed(0)}%`})},vi=({data:e,COLORS:t})=>{x.useEffect(()=>{},[e]);const r=e.every(n=>n.value===0);return i.jsx(_,{sx:{width:"100%",height:"100%"},children:r?i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:i.jsx(q,{sx:{textAlign:"center"},children:"No data available to display."})}):i.jsx(Zt,{width:"100%",height:"100%",children:i.jsxs(Uo,{children:[i.jsx(ne,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:yi,fill:"#8884d8",dataKey:"value",children:e.map((n,o)=>i.jsx(qt,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),i.jsx(Xt,{})]})})})},$e=({title:e})=>i.jsx(q,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),Qe=({label:e,count:t,color:r,type:n,title:o})=>{let s=fe(),{vehicleZone:a}=W(l=>l.dashboard),u=lt();const c=(l,g)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",g),s(Pn(g)),s(On(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",g),g){case"Open":s(ce("Open"));break;case"Overdue":s(ce("overdue"));break;case"Closed":s(ce("Close"));break}u("/breakdown")}};return i.jsxs(_,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[i.jsxs(_,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(_,{sx:{width:"12px",height:"12px",bgcolor:r,borderRadius:"50%",marginRight:"8px"}}),i.jsx(re,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{c(o,e)},children:e})]}),i.jsx(_,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?i.jsx(q,{color:r,children:t}):i.jsx(ln,{sx:{bgcolor:r,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},bi=({data:e,colors:t})=>{const{loading:r,isDriverBehaviorLoading:n}=W(o=>o.dashboard);return i.jsxs(_,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[i.jsx(q,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),i.jsx(_,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,s)=>i.jsxs(_,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[i.jsx(q,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),i.jsx(ln,{sx:{bgcolor:t[s],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},s))})]}),i.jsx(_,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?i.jsx(q,{sx:{fontSize:"14px"},children:"Loading..."}):i.jsx(vi,{data:e,COLORS:t})})]})},Ft=({statuses:e,title:t})=>{let r=fe(),n=lt();const o=s=>{if(t==="Inspection Approvals"){switch(console.log("status: ",s),s.label){case"Rejected":r(ce("Rejected"));break;case"Pending":r(ce("Open"));break;case"Approved":r(ce("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(s.label){case"Overdue":r(Xe("Overdue"));break;case"Due soon":r(Xe("Due soon"));break;case"Serviced":r(Xe("Serviced"));break}n("/service")}};return i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:t}),i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((s,a)=>i.jsxs(_,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(s)},children:[i.jsx(q,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:s.color,margin:"30px 0"},"aria-label":"color",children:s.count}),i.jsx(q,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:s.label})]},a))})]})},Nt={total:0,online:0,offline:0,running:0};function ji({vehicleReport:e,imeiNo:t,loading:r,isloadingReport:n}){var K,ee,F,V,y,O,h;const{vehicleList:o,onlineVehicle:s,locationData:a}=W(v=>v.liveMap);W(v=>v.dashboard);const{breakdownStatusCount:u}=W(v=>v.breakdown),{inspectionStatusCount:c}=W(v=>v.inspection),{vehicleStatesData:l}=W(v=>v.report),{report:g,driver_behavior:b,overdueCount:m,completedCount:C,serviceSoonCount:j,selectedVehicleGroup:d,areaCovered:k}=W(v=>v.dashboard),[S,w]=x.useState(0),[D,$]=x.useState(Nt);x.useEffect(()=>{if((o==null?void 0:o.length)>0){let v={...Nt};if(d){const E=f(d==null?void 0:d.id);console.log("result",E);const P=o.filter(U=>U.vehicle_group===d.id);v.total=P.length,v.online=E.onlineCount,v.running=E.runningCount,v.offline=v.total-v.online}console.log("Updated Vehicle Count:",v),$(v)}console.log("vehicleList",o)},[d]),x.useEffect(()=>{if((o==null?void 0:o.length)>0){let v=0;o==null||o.map(E=>{var P;((P=E==null?void 0:E.imei)==null?void 0:P.length)>0&&v++}),w(v)}},[o]),x.useEffect(()=>{},[m,C,j]);const R=()=>{let v=0,E=0,P=0;return s.length>0&&s.forEach(U=>{t.includes(String(U))&&(v++,a==null||a.forEach(G=>{var oe,X;String((oe=G==null?void 0:G.latestDocument)==null?void 0:oe.imei)===String(U)&&G.latestDocument.speed>0&&(G.latestDocument.ignition===!0||G.latestDocument.ignition===1)&&E++,String((X=G==null?void 0:G.latestDocument)==null?void 0:X.imei)===String(U)&&G.latestDocument.speed<=0&&(G.latestDocument.ignition===!0||G.latestDocument.ignition===1)&&P++}))}),{onlineCount:v,runningCount:E,idelingCount:P}},f=v=>{let E=0,P=0;return s.forEach(U=>{if(t.includes(String(U))){const G=a==null?void 0:a.find(oe=>{var X;return String((X=oe==null?void 0:oe.latestDocument)==null?void 0:X.imei)===String(U)});if(G&&o.some(X=>{var Ae;return X.vehicle_group===v&&((Ae=X==null?void 0:X.imei[0])==null?void 0:Ae.mac_id)===String(U)})){E++;const{speed:X,ignition:Ae}=G.latestDocument;X>0&&(Ae===!0||Ae===1)&&P++}}}),{onlineCount:E,runningCount:P}};x.useEffect(()=>{},[l]);const T=[{name:"Overspeed O",value:((K=l==null?void 0:l.totals)==null?void 0:K.total_overSpeedTimeSec)||0},{name:"Economy E",value:((ee=l==null?void 0:l.totals)==null?void 0:ee.total_economyTimeSec)||0},{name:"Steady S",value:((F=l==null?void 0:l.totals)==null?void 0:F.total_idleTimeSec)||0}],A=["#0088FE","#00C49F","#FFBB28","#FF8042"],N=[{label:"Rejected",count:c.rejected||0,color:"#FF0202"},{label:"Pending",count:c.open||0,color:"black"},{label:"Approved",count:c.close||0,color:"green"}],Y=[{label:"Overdue",count:m,color:"#FF0202"},{label:"Due soon",count:j,color:"black"},{label:"Serviced",count:C,color:"green"}],Z=[{name:"Total Vehicles",count:Object.keys(d).length>0?D.total:S,color:"grey"},{name:"Online",count:Object.keys(d).length>0?D.online:R().onlineCount,color:"red"},{name:"Offline",count:Object.keys(d).length>0?D.offline:S-R().onlineCount,color:"grey"},{name:"Running",count:Object.keys(d).length>0?D.running:R().runningCount,color:"green"},{name:"Idling",count:Object.keys(d).length>0?D.online-D.running:R().idelingCount,color:"yellow"}],p=[{name:"Distance Covered",count:((V=l==null?void 0:l.totals)==null?void 0:V.totalDistance)||0,color:"grey"},{name:"Running time",count:((y=l==null?void 0:l.totals)==null?void 0:y.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((O=l==null?void 0:l.totals)==null?void 0:O.total_idleTime)||0,color:et.bgColor},{name:"Engine Hrs",count:((h=l==null?void 0:l.totals)==null?void 0:h.total_engineHours)||0,color:et.bgColor}],L=[{name:"Open",count:u.open,color:"grey"},{name:"Overdue",count:u.overDue,color:"red"},{name:"Closed",count:u.close,color:"green"}];return i.jsxs(i.Fragment,{children:[i.jsx(bi,{data:T,colors:A}),i.jsxs(_,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[i.jsx($e,{title:"Vehicles Status"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:Z.map((v,E)=>i.jsx(Qe,{label:v.name,count:v.count,color:v.color,title:"Vehicle Status"},E+1))})]}),i.jsx(Ft,{statuses:Y,title:"Service Remainder"}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Assigned Vehicles"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:p.map((v,E)=>i.jsx(Qe,{type:"assignVehicle",label:v.name,count:v.count,color:v.color},E+1))})]}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Breakdown Resolved"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:L.map((v,E)=>i.jsx(Qe,{label:v.name,count:v.count,color:v.color,title:"Breakdown"}))})]}),i.jsx(Ft,{statuses:N,title:"Inspection Approvals"})]})}const ki=()=>{var Z;const{allAlerts:e,loading:t}=W(p=>p.geofence),{vehicleList:r}=W(p=>p.liveMap),n=fe(),[o,s]=x.useState(0),[a,u]=x.useState(10),[c,l]=x.useState([]),[g,b]=x.useState(""),[m,C]=x.useState(""),[j,d]=x.useState(!1);x.useEffect(()=>{console.log("allalert",e.filter(p=>p._id==="67fde2c226ec73328f071edd"))},[e]),x.useEffect(()=>{console.log("vehicleList",r)},[r]);let k=p=>r.find(L=>{var K;return((K=L==null?void 0:L.imei[0])==null?void 0:K.mac_id)==p||""});const S=(p,L)=>s(L),w=p=>{u(parseInt(p.target.value,10)),s(0)},D=p=>{l(L=>L.includes(p)?L.filter(K=>K!==p):[...L,p])},$=p=>c.includes(p),R=p=>{if(p.target.checked){const L=A==null?void 0:A.map(K=>K._id);l(L)}else l([])},f=()=>{console.log("vhehicle list",Y);let p={imeiList:Y,startDate:ve(new Date).format("MM-DD-YYYY"),endDate:ve(new Date).format("MM-DD-YYYY")};n(Wt(p))},T=async()=>{try{if(c.length===0)return;const p=await n(gt({ids:c}));gt.fulfilled.match(p)?(l([]),f()):console.error("Delete failed:",p==null?void 0:p.payload)}catch(p){console.error("Delete error:",p)}},A=(Z=e==null?void 0:e.filter(p=>g?p.type===g:!0))==null?void 0:Z.filter(p=>m?p.imei===m:!0),N=[...new Set(e==null?void 0:e.map(p=>p.type))],Y=[...new Set(e==null?void 0:e.map(p=>p.imei))];return i.jsxs(_,{children:[t&&i.jsx(yr,{}),i.jsxs(_e,{container:!0,spacing:2,sx:{mb:2},children:[i.jsx(_e,{item:!0,xs:6,md:3,children:i.jsxs(bt,{fullWidth:!0,children:[i.jsx(jt,{children:"Alert Type"}),i.jsxs(kt,{value:g,label:"Alert Type",onChange:p=>{b(p.target.value),s(0)},children:[i.jsx(De,{value:"",children:"All"}),N.map(p=>i.jsx(De,{value:p,children:p},p))]})]})}),i.jsx(_e,{item:!0,xs:6,md:3,children:i.jsxs(bt,{fullWidth:!0,children:[i.jsx(jt,{children:"Vehicle"}),i.jsxs(kt,{value:m,label:"Vehicle",onChange:p=>{C(p.target.value),s(0)},children:[i.jsx(De,{value:"",children:"All"}),Y.map(p=>{var L;return i.jsx(De,{value:p,children:(L=k(p))==null?void 0:L.registration_id},p)})]})]})}),i.jsx(_e,{item:!0,xs:12,md:3,display:"flex",alignItems:"center",children:i.jsx(re,{variant:"contained",color:"error",disabled:c.length===0,onClick:()=>d(!0),children:"Delete Selected"})})]}),i.jsxs(en,{component:Yt,sx:{maxHeight:700},children:[i.jsxs(tn,{stickyHeader:!0,children:[i.jsx(nn,{children:i.jsxs(Fe,{children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Ne,{checked:A.length>0&&c.length===A.length,indeterminate:c.length>0&&c.length<A.length,onChange:R})}),i.jsx(B,{children:"Sr no"}),i.jsx(B,{children:"Vehicle"}),i.jsx(B,{children:"Alert type"}),i.jsx(B,{children:"Message"}),i.jsx(B,{children:"Created Time"})]})}),i.jsx(rn,{children:A==null?void 0:A.slice(o*a,o*a+a).map((p,L)=>i.jsxs(Fe,{hover:!0,selected:$(p._id),onClick:()=>D(p._id),sx:{cursor:"pointer"},children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Ne,{checked:$(p._id)})}),i.jsx(B,{children:o*a+L+1}),i.jsx(B,{children:k(p==null?void 0:p.imei).registration_id}),i.jsx(B,{children:p==null?void 0:p.type}),i.jsx(B,{children:p==null?void 0:p.msg}),i.jsx(B,{children:ve(new Date(p==null?void 0:p.createdAt)).format("DD-MM-YYYY HH:mm")})]},p==null?void 0:p._id))})]}),i.jsx(on,{rowsPerPageOptions:[12],component:"div",count:A.length,rowsPerPage:a,page:o,onPageChange:S,onRowsPerPageChange:w})]}),i.jsx(dt,{open:j,onClose:()=>d(!1),children:i.jsxs(_,{p:3,children:[i.jsx(q,{variant:"h6",children:"Confirm Deletion"}),i.jsxs(q,{sx:{my:2},children:["Are you sure you want to delete ",c.length," selected notifications?"]}),i.jsxs(_,{display:"flex",justifyContent:"flex-end",gap:2,children:[i.jsx(re,{onClick:()=>d(!1),variant:"outlined",children:"Cancel"}),i.jsx(re,{onClick:async()=>{await T(),d(!1)},color:"error",variant:"contained",children:"Confirm Delete"})]})]})})]})},Si=()=>{const{allNotification:e}=W(f=>f.geofence),t=fe(),r=lt(),[n,o]=x.useState(0),[s,a]=x.useState(10),[u,c]=x.useState([]),[l,g]=x.useState(!1),[b,m]=x.useState(!1),C=(f,T)=>o(T),j=f=>{a(parseInt(f.target.value,10)),o(0)},d=f=>{c(T=>T.includes(f)?T.filter(A=>A!==f):[...T,f])},k=f=>u.includes(f),S=e||[],w=S.slice(n*s,n*s+s),D=f=>{const T=f.target.checked;if(g(T),T){const A=w.map(N=>N.id);c(A)}else c([])},$=async()=>{try{console.log("Deleting rows:",u);const f=await t(mt({ids:u}));mt.fulfilled.match(f)?(c([]),t(Gt())):console.error("Delete failed:",f==null?void 0:f.payload),m(!1)}catch(f){console.error("Delete failed:",f)}},R=f=>{switch(console.log("row",f),t(ce((f==null?void 0:f.record_id)||"")),f==null?void 0:f.goes_to){case"BI":t(xt(0)),r("/inspections");break;case"IB":r("/breakdown");break;case"SI":t(xt(1)),r("/inspections");break;case"IS":r("/service");break;default:ae.error("Page location not found");break}};return i.jsxs(_,{children:[i.jsx(vr,{sx:{justifyContent:"flex-end"},children:i.jsx(re,{color:"error",variant:"contained",disabled:u.length===0,onClick:()=>m(!0),children:"Delete Selected"})}),i.jsxs(en,{component:Yt,sx:{maxHeight:500},children:[i.jsxs(tn,{stickyHeader:!0,children:[i.jsx(nn,{children:i.jsxs(Fe,{children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Ne,{checked:l,indeterminate:u.length>0&&u.length<w.length,onChange:D})}),i.jsx(B,{children:"Sr no"}),i.jsx(B,{children:"Inspection Id"}),i.jsx(B,{children:"Message"}),i.jsx(B,{children:"Date Time"})]})}),i.jsx(rn,{children:w.map((f,T)=>i.jsxs(Fe,{hover:!0,selected:k(f.id),sx:{cursor:"pointer"},children:[i.jsx(B,{padding:"checkbox",onClick:()=>d(f.id),children:i.jsx(Ne,{checked:k(f.id)})}),i.jsx(B,{children:n*s+T+1}),i.jsx(B,{children:f==null?void 0:f.record_id}),i.jsx(B,{onClick:()=>R(f),sx:{color:"blue",textDecoration:"underline",cursor:"pointer"},title:"View Breakdown",children:f==null?void 0:f.message}),i.jsx(B,{children:ve(new Date(f==null?void 0:f.created)).format("DD-MM-YYYY HH:mm")})]},f==null?void 0:f.id))})]}),i.jsx(on,{rowsPerPageOptions:[10],component:"div",count:S.length,rowsPerPage:s,page:n,onPageChange:C,onRowsPerPageChange:j})]}),i.jsxs(dt,{open:b,onClose:()=>m(!1),children:[i.jsx(br,{children:"Confirm Deletion"}),i.jsx(sn,{children:i.jsxs(q,{children:["Are you sure you want to delete ",u.length," selected",u.length>1?" items":" item","?"]})}),i.jsxs(an,{children:[i.jsx(re,{onClick:()=>m(!1),children:"Cancel"}),i.jsx(re,{color:"error",onClick:$,children:"Delete"})]})]})]})};function Ai({showNotification:e,setShowNotification:t}){fe(),W(s=>s.liveMap);const[r,n]=x.useState("one"),o=(s,a)=>{n(a)};return i.jsx(i.Fragment,{children:i.jsxs(dt,{open:e,onClose:()=>t(!1),fullWidth:!0,maxWidth:"xxl",sx:{"& .MuiDialog-paper":{height:"90vh"}},children:[i.jsx(Vt,{sx:{position:"absolute",right:2,top:8},onClick:()=>t(!1),children:i.jsx(xr,{})}),i.jsxs(sn,{dividers:!0,sx:{minHeight:"100px"},children:["  ",i.jsxs(_,{sx:{width:"100%"},children:[i.jsxs(jr,{value:r,onChange:o,textColor:"inherit",indicatorColor:"secondary",sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #ccc"},children:[i.jsx(St,{value:"one",label:"Inbox",sx:{color:"black",fontWeight:"bold"}}),i.jsx(St,{value:"two",label:"Alert",sx:{color:"black",fontWeight:"bold"}})]}),i.jsxs(_,{sx:{p:2},children:[r==="one"&&i.jsx(_,{children:i.jsx(Si,{})}),r==="two"&&i.jsx(_,{children:i.jsx(ki,{})})]})]})]}),i.jsx(an,{children:i.jsx(re,{onClick:()=>t(!1),children:"Close"})})]})})}const ns=()=>{const{w_customer_id:e,collapsed:t}=W(y=>y.auth),{mode:r,selectedTripData:n,selectedVehicleGroup:o,showVehicles:s,vehicleZone:a}=W(y=>y.dashboard),{breakdowns:u}=W(y=>y.breakdown),{inspectionHistory:c}=W(y=>y.inspection),[l,g]=x.useState(()=>{const y=sessionStorage.getItem("imeiNo");return y?JSON.parse(y):[]}),{selectedVehicle:b,vehicleList:m,onlineVehicle:C,locationData:j}=W(y=>y.liveMap),d=fe(),k=zt(r),[S,w]=x.useState([]),[D,$]=x.useState(!1),[R,f]=x.useState({}),[T,A]=x.useState(!1),[N,Y]=x.useState(!1),[Z,p]=x.useState(!1);x.useEffect(()=>{(async()=>{await K()})(),d(Cn())},[]);const L=y=>{let O=m.find(h=>{var v;return((v=h==null?void 0:h.imei[0])==null?void 0:v.mac_id)==y});return(O==null?void 0:O.registration_id)||y};x.useEffect(()=>{if(c.length>0){let y={open:0,rejected:0,close:0};c.map(O=>{O.status==="Open"&&y.open++,O.status==="Close"&&y.close++,O.status==="Rejected"&&y.rejected++}),d(wn(y))}},[u]),x.useEffect(()=>{if(u.length>0){let y={open:0,overDue:0,close:0};u.map(O=>{if(O.status==="Open"&&y.open++,O.status==="Close"&&y.close++,O.submission_date){const h=new Date(O.submission_date),v=new Date;v.setHours(0,0,0,0),h.setHours(0,0,0,0),h<v&&O.status=="Open"&&y.overDue++}}),d(Tn(y))}},[u]),x.useEffect(()=>{d(_n())},[]),x.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(l))},[l]),x.useEffect(()=>{var y,O,h;Object.keys(b).length===0&&m.length>0&&d(Rn({imei:(O=(y=m[0])==null?void 0:y.imei[0])==null?void 0:O.mac_id,reg_id:(h=m[0])==null?void 0:h.registration_id}))},[b,m]),x.useEffect(()=>{let y=m.map(h=>{var v;return((v=h==null?void 0:h.imei[0])==null?void 0:v.mac_id)||null}).filter(h=>h),O={imeiList:y,startDate:ve(new Date).format("MM-DD-YYYY"),endDate:ve(new Date).format("MM-DD-YYYY")};y&&y.length>0&&d(Wt(O)),d(Gt())},[m]),x.useEffect(()=>{(async()=>{if(b!=null&&b.imei){const O=Bt(),h=O.startOf("day").format("MM/DD/YYYY HH:mm:ss"),v=O.endOf("day").format("MM/DD/YYYY HH:mm:ss"),E={imei:b.imei,startTime:h,endTime:v};try{d(Dn(E))}catch(P){console.error("Error fetching report:",P)}}})()},[b,d]),x.useEffect(()=>{const y=h=>{(h==null?void 0:h.imei)!==null&&l.find(P=>parseInt(P)===(h==null?void 0:h.imei))&&ae.error(`Type: ${h==null?void 0:h.type} ${h==null?void 0:h.msg} ${L(h==null?void 0:h.imei)}`,{id:"geofence",autoClose:5e3})},O=h=>{(h==null?void 0:h.imei)!==null&&l.find(P=>parseInt(P)===(h==null?void 0:h.imei))&&ae.error(`${h==null?void 0:h.msg} ${L(h==null?void 0:h.imei)}`,{id:"speed",autoClose:5e3})};return Pe.on("geofenceAlert",y),Pe.on("speedAlert",O),()=>{Pe.off("geofenceAlert",y),Pe.off("speedAlert",O)}},[l,Pe]);const K=async()=>{try{let y=[],O=[];const h=await d(In({w_customer_id:e}));if(Array.isArray(h.payload)){h.payload.forEach(P=>{var U,G;Array.isArray(P.imei)&&P.imei.length>0?(y.push({id:P.id,label:P.registration_id,value:(U=P==null?void 0:P.imei[0])==null?void 0:U.mac_id,vehilce_type:P==null?void 0:P.segment,sell_date:P==null?void 0:P.sell_date,workShop:P==null?void 0:P.workshop,vehicle_group:P==null?void 0:P.vehicle_group}),O.push((G=P.imei[0])==null?void 0:G.mac_id),P.registration_id):(console.error("IMEI data not found for item:",P),ae.error(`IMEI Number not found for the vehicle: ${P==null?void 0:P.registration_id}`,{duration:2e3}))}),g(O);const v="one",E=O;O.length>0&&(d(En({type:v,imei:E})),d(Ln(E))),w(y),d($n(y)),d(Fn({w_customer_id:e})),d(Nn(e)),d(Mn({}))}else console.error("Unexpected data format:",h),ae.error("Unexpected data format:")}catch(y){console.error("Error fetching vehicle data:",y),ae.error(`Error fetching vehicle data: ${y}`)}},ee=y=>j==null?void 0:j.some(O=>Number(O.latestDocument.imei)===Number(y)&&O.latestDocument.speed>0&&(O.latestDocument.ignition===!0||O.latestDocument.ignition===1)),F=y=>j==null?void 0:j.some(O=>Number(O.latestDocument.imei)===Number(y)&&O.latestDocument.speed<=0&&(O.latestDocument.ignition===!0||O.latestDocument.ignition===1)),V=S.filter(y=>{if(!(Object.keys(o).length===0||y.vehicle_group===o.id))return!1;const h=Number(y.value),v=C.includes(h),E=!C.includes(h),P=C.includes(h)&&ee(h),U=C.includes(h)&&F(h);switch(a){case"Total Vehicles":return!0;case"Online":return v;case"Running":return P;case"Offline":return E;case"Idling":return U;default:return!0}});return i.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[i.jsx(cr,{}),i.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[i.jsx(ar,{title:"Dashboard",setShowNotification:$,showNotification:D,setShowVehiclesGroup:A,showVehiclesGroup:T}),i.jsx(mr,{setShowVehiclesGroup:A,showVehiclesGroup:T}),i.jsxs(_,{sx:{height:"92vh",backgroundColor:k.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[s&&i.jsx(_,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:k.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:i.jsx(Vn,{vehicleData:V,showVehicles:s})}),i.jsx(Ee,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),i.jsxs(_,{sx:{display:"flex",gap:"30px",background:et.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[D&&i.jsx(Ai,{showNotification:D,setShowNotification:$}),"              ",i.jsx(xi,{}),i.jsx(_,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:i.jsx(mi,{setLoading:Y})})]}),i.jsx(_,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:i.jsx(ji,{vehicleReport:R,imeiNo:l,loading:N,isloadingReport:Z})})]})]})]})]})};export{ns as default};
