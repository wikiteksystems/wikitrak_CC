import{o as C,p as d,r as c,j as s,cq as T,aP as R,cr as k,cs as v,ct as g,cu as t,cv as y,U as D,dC as _,d$ as A,a3 as B,Y as E,B as u,C as I}from"./index-BaJmgZVm.js";import"./DateTimePicker-DmBYotBN.js";import"./InspectionsTable-Cc2hi6jx.js";import"./ServiceRecordTable-B3tmOpZa.js";import{S as U}from"./ServicesTopBar-CCjmB5oj.js";import{A as Y}from"./AddBreakdown-BZ4xBkVz.js";import"./BarChart-CykcYb30.js";import"./DialogContentText-EL4iWFM0.js";import"./Edit-BAgGuKIw.js";import"./index.esm-D8AQiflw.js";import"./formik.esm-CMGnl3zt.js";import"./Autocomplete-DcsEXr3D.js";import"./excelUtils-bVlRSwtK.js";import"./Add-BRgcKVnd.js";import"./useMediaQuery-D4cg8sXj.js";const H=()=>{const o=C(),{ticketList:r}=d(e=>e.rsaReport),{searchTerm:n}=d(e=>e.inspection),[h,x]=c.useState([]),[i,l]=c.useState(0),[a,f]=c.useState(12),P=async()=>{try{o(A())}catch(e){console.log("error",e)}};c.useEffect(()=>{P()},[]),c.useEffect(()=>{},[r]);const S=(e,p)=>{l(p)},b=e=>{f(parseInt(e.target.value,10)),l(0)},L=r.filter(e=>e.ticket_id.toLowerCase().includes(n.toLowerCase())||e.status.toLowerCase().includes(n.toLowerCase())||e.vehicle.toLowerCase().includes(n.toLowerCase())||e.user.first_name.toLowerCase().includes(n.toLowerCase())||e.user.last_name.toLowerCase().includes(n.toLowerCase()));return s.jsxs(T,{component:R,children:[s.jsxs(k,{children:[s.jsx(v,{children:s.jsxs(g,{children:[s.jsx(t,{children:"Sr no"}),s.jsx(t,{children:"Req ID"}),s.jsx(t,{children:"User"}),s.jsx(t,{children:"Created Date"}),s.jsx(t,{children:"Vehicle"}),s.jsx(t,{children:"Current Status"})]})}),s.jsx(y,{children:L.slice(i*a,i*a+a).map((e,p)=>{var m,j;return s.jsxs(g,{children:[s.jsx(t,{children:i*a+p+1}),s.jsx(t,{children:e==null?void 0:e.ticket_id}),s.jsx(t,{children:((m=e==null?void 0:e.user)==null?void 0:m.first_name)+" "+((j=e==null?void 0:e.user)==null?void 0:j.last_name)}),s.jsx(t,{children:D(new Date(e==null?void 0:e.created)).format("DD-MM-YYY HH:mm")}),s.jsx(t,{children:e==null?void 0:e.vehicle}),s.jsx(t,{children:e==null?void 0:e.status})]},e==null?void 0:e.id)})})]}),s.jsx(_,{rowsPerPageOptions:[12],component:"div",count:h.length,rowsPerPage:a,page:i,onPageChange:S,onRowsPerPageChange:b})]})},w=()=>{d(a=>a.dashboard);const{w_customer_id:o}=d(a=>a.auth);let r=C();c.useState(!1);const[n,h]=c.useState(!1),[x,i]=c.useState(!1);c.useState([]),c.useEffect(()=>{l()},[]);const l=async()=>{try{const a=await r(B({w_customer_id:o}))}catch{}};return s.jsxs("div",{className:"app",children:[s.jsx(E,{}),s.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[s.jsx(U,{title:"Rsa Reports"}),s.jsx(u,{style:{display:"flex",width:"100%",height:"95vh"},children:s.jsxs(u,{style:{width:"100%",background:I.bgShadow},children:[s.jsx(Y,{where:"RSA",isAdd:n,isUpdate:x,setIsAdd:h,setIsUpdate:i}),s.jsx(u,{sx:{m:"10px"},children:s.jsx(H,{})})]})})]})]})};export{w as default};
