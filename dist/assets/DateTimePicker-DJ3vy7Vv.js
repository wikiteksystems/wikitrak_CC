import{D as e,y as x,ar as w,z as g,b as n,j as r,aq as C,ao as P,as as j}from"./index-q3CdUvS5.js";import{i as T}from"./isBetween-DAM7ipni.js";import{w as E,S as v,B as R,D as I}from"./index-3stmoeBj.js";e.extend(T);e.extend(E);const{RangePicker:L}=I,W=()=>{const o=x(),[O]=w(),m=O.get("source"),{selectedVehicle:t}=g(a=>a.liveMap),{startDate:d,endDate:f}=g(a=>a.dashboard),[l,y]=n.useState(d?e(d):null),[i,h]=n.useState(f?e(f):null),[D,p]=n.useState(!1),c=(a,s)=>{y(a),h(s),o(C({startDate:a.toISOString(),endDate:s.toISOString()}));const u={imei:t==null?void 0:t.imei,startDate:a.toISOString(),endDate:s.toISOString(),page:1,limit:m!=="TripDetail"?20:void 0};o(P(u)),o(j(u))};n.useEffect(()=>{t!=null&&t.imei&&l&&i&&c(l.startOf("day"),i.endOf("day"))},[t]);const k=a=>{a&&c(a[0].startOf("day"),a[1].endOf("day"))},b=[{label:"Today",range:[e().startOf("day"),e().endOf("day")]},{label:"Yesterday",range:[e().subtract(1,"day").startOf("day"),e().subtract(1,"day").endOf("day")]},{label:"This Week",range:[e().startOf("week"),e().endOf("week")]},{label:"Last Week",range:[e().subtract(1,"week").startOf("week"),e().subtract(1,"week").endOf("week")]},{label:"This Month",range:[e().startOf("month"),e().endOf("month")]},{label:"Last Month",range:[e().subtract(1,"month").startOf("month"),e().subtract(1,"month").endOf("month")]}],S=(a,s)=>{c(a,s),p(!1)};return r.jsx(v,{direction:"vertical",size:12,children:r.jsx(L,{value:[l,i],onChange:k,style:{backgroundColor:"#f0f0f0",color:"#333"},allowClear:!0,open:D,onOpenChange:p,renderExtraFooter:()=>r.jsx("div",{style:{display:"flex",justifyContent:"space-around",flexWrap:"wrap"},children:b.map(a=>r.jsx(R,{size:"small",type:"link",onClick:()=>S(a.range[0],a.range[1]),children:a.label},a.label))})})})};export{W as D};
