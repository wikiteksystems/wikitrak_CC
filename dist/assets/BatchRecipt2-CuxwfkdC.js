import{a_ as A,b as w,b8 as x,j as e,d3 as B,d4 as y,dz as _,fz as v,dB as K,fA as L,dH as P,dI as I,bZ as R,aW as z,T as g,bm as N,dU as D,dV as C,dW as k,dX as p,dY as O,bc as E}from"./index-afFpPkEM.js";const{RangePicker:W}=_,H=()=>{const h=x(),u=h.startOf("day"),m=h.endOf("day");return{defaultStartDate:u,defaultEndDate:m,defaultStartDateString:u.format("YYYY-MM-DD"),defaultEndDateString:m.format("YYYY-MM-DD")}},U=({setEndDate:h,setStartDate:u,selectedDate:m,startDate:d,endDate:j})=>{const l=A(),c=H(),[n,a]=w.useState([d?x(d):c.defaultStartDate,j?x(j):c.defaultEndDate]);w.useEffect(()=>{const r=x();let s,f;m?(s=r.startOf("day"),f=r.endOf("day")):(s=d?x(d):c.defaultStartDate,f=j?x(j):c.defaultEndDate),l(u(s.format("YYYY-MM-DD"))),l(h(f.format("YYYY-MM-DD"))),a([s,f])},[m]);const t=(r,s)=>{r?(l(u(s[0])),l(h(s[1])),a(r)):(l(u(null)),l(h(null)),a([]),console.log("Clear date"))},o=r=>r&&r>x().endOf("day"),i=r=>{let s,f;switch(r){case"currentDay":s=x().startOf("day"),f=x().endOf("day");break;case"currentWeek":s=x().startOf("week"),f=x().endOf("week");break;case"previousWeek":s=x().subtract(1,"week").startOf("week"),f=x().subtract(1,"week").endOf("week");break;case"currentMonth":s=x().startOf("month"),f=x().endOf("month");break;case"previousMonth":s=x().subtract(1,"month").startOf("month"),f=x().subtract(1,"month").endOf("month");break;default:return}l(u(s.format("YYYY-MM-DD"))),l(h(f.format("YYYY-MM-DD"))),a([s,f])};return e.jsx(B,{direction:"vertical",size:12,children:e.jsx(W,{format:"YYYY-MM-DD",onChange:t,disabledDate:o,value:n,renderExtraFooter:()=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-around"},children:[e.jsx(y,{size:"small",type:"link",onClick:()=>i("currentDay"),children:"Current Day"}),e.jsx(y,{size:"small",type:"link",onClick:()=>i("currentWeek"),children:"Current Week"}),e.jsx(y,{size:"small",type:"link",onClick:()=>i("previousWeek"),children:"Previous Week"}),e.jsx(y,{size:"small",type:"link",onClick:()=>i("currentMonth"),children:"Current Month"}),e.jsx(y,{size:"small",type:"link",onClick:()=>i("previousMonth"),children:"Previous Month"})]})})})},q=U;var F={exports:{}};(function(h,u){(function(m,d){d()})(v,function(){function m(t,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function d(t,o,i){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,o,i)},r.onerror=function(){console.error("could not download file")},r.send()}function j(t){var o=new XMLHttpRequest;o.open("HEAD",t,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function l(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(o)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof v=="object"&&v.global===v?v:void 0,n=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(t,o,i){var r=c.URL||c.webkitURL,s=document.createElement("a");o=o||t.name||"download",s.download=o,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin===location.origin?l(s):j(s.href)?d(t,o,i):l(s,s.target="_blank")):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){l(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,i){if(o=o||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(m(t,i),o);else if(j(t))d(t,o,i);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){l(r)})}}:function(t,o,i,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return d(t,o,i);var s=t.type==="application/octet-stream",f=/constructor/i.test(c.HTMLElement)||c.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||s&&f||n)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var b=S.result;b=M?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=b:location=b,r=null},S.readAsDataURL(t)}else{var Y=c.URL||c.webkitURL,T=Y.createObjectURL(t);r?r.location=T:location.href=T,r=null,setTimeout(function(){Y.revokeObjectURL(T)},4e4)}});c.saveAs=a.saveAs=a,h.exports=a})})(F);K.register(L,P,I);const $=({receiptData:h,open:u,setOpen:m})=>{const d=w.useRef(),j=()=>m(!1),l=a=>a==null?void 0:a.replace(/^0+/,""),c=()=>{const a=d.current.innerHTML,t=window.open("","","width=800,height=600");t.document.write(`
      <html>
        <head>
          <title>Print Receipt</title>
          <style>
            body { font-family: monospace;  padding: 10px; }
            h2, h3 { margin: 4px 0; }
            table { width: 100%; border-collapse: collapse; font-size: 12px; }
            td, th { text-align: left; padding: 2px 4px; }
            .line { border-top: 1px dashed #000; margin: 5px 0; }
          </style>
        </head>
        <body>${a}</body>
      </html>
    `),t.document.close(),t.focus(),t.print()};if(!h)return;let n=h;return e.jsx(e.Fragment,{children:e.jsx(R,{open:u,onClose:j,children:e.jsxs(z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"white",p:2,borderRadius:2,boxShadow:24,width:300,maxHeight:"90vh",overflowY:"auto",textAlign:"center"},children:[e.jsxs("div",{ref:d,children:[e.jsx(g,{variant:"h6",children:"******************************"}),e.jsx(g,{variant:"h6",children:n.manufacture_name}),e.jsx(g,{variant:"h6",children:"******************************"}),e.jsx(g,{variant:"subtitle1",sx:{mt:1},children:"DOCKET"}),e.jsxs(g,{sx:{fontSize:"12px",textAlign:"left",mt:1},children:["Batch: ",n.batch_no,e.jsx("br",{}),"Date: ",(n==null?void 0:n.date)&&N(n==null?void 0:n.date,"DDMMYYYY").format("DD-MM-YYYY")||"-",e.jsxs("span",{style:{float:"right"},children:["Start: ",n.start_time]}),e.jsx("br",{}),"Operator: ",n.operator,e.jsx("br",{}),"Dest: ",n.destination,e.jsx("br",{}),"Recipe: ",n.mix_name]}),e.jsx("div",{className:"line",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),e.jsxs(D,{size:"small",children:[e.jsx(C,{children:e.jsxs(k,{children:[e.jsx(p,{sx:{fontSize:"10px"},children:"No"}),e.jsx(p,{sx:{fontSize:"10px"},children:"Product"}),e.jsx(p,{sx:{fontSize:"10px"},children:"Target"}),e.jsx(p,{sx:{fontSize:"10px"},children:"Weight"})]})}),e.jsx(O,{children:n.materials.map((a,t)=>e.jsxs(k,{children:[e.jsx(p,{sx:{fontSize:"10px"},children:t+1}),e.jsx(p,{sx:{fontSize:"10px"},children:a.name}),e.jsx(p,{sx:{fontSize:"10px"},children:l((a==null?void 0:a.target)||"")}),e.jsx(p,{sx:{fontSize:"10px"},children:l((a==null?void 0:a.actual)||"")})]},t))})]}),e.jsx("div",{className:"line",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),e.jsxs(g,{sx:{fontSize:"12px",textAlign:"left"},children:["Batch Total(Kg): ",l(n==null?void 0:n.total_target),e.jsx("span",{style:{float:"right"},children:l(n==null?void 0:n.totalAcheived)}),e.jsx("br",{}),"Batch  Total(m3): ",n.target_m3,e.jsx("span",{style:{float:"right"},children:n.total_m3}),e.jsx("br",{}),"End: ",n.end_time,e.jsx("br",{}),e.jsx("div",{className:"line",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),"Machine Id:",l(n==null?void 0:n.device_id)]})]}),e.jsx("div",{className:"line",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),e.jsx(E,{onClick:c,variant:"contained",sx:{mt:2,backgroundColor:"#374151","&:hover":{backgroundColor:"#111827"},fontSize:"12px"},children:"üñ®Ô∏è Print Receipt"})]})})})},G=$,V=({receiptData:h,open:u,setOpen:m})=>{var a,t;const d=JSON.parse(localStorage.getItem("w_userDetails"));console.log("storedUserDetails",d);const j=w.useRef(),l=()=>m(!1),c=()=>{const o=j.current.innerHTML,i=window.open("","","width=800,height=600");i.document.write(`
      <html>
        <head>
          <title>Print Receipt</title>
          <style>
            body { font-family: monospace; padding: 10px; }
            h2, h3 { margin: 4px 0; }
            table { width: 100%; border-collapse: collapse; font-size: 12px; }
            td, th { text-align: left; padding: 2px 4px; }
            .line { border-top: 1px dashed #000; margin: 5px 0; }
          </style>
        </head>
        <body>${o}</body>
      </html>
    `),i.document.close(),i.focus(),i.print()};if(!h)return null;const n=h;return e.jsx(e.Fragment,{children:e.jsx(R,{open:u,onClose:l,children:e.jsxs(z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"white",p:2,borderRadius:2,boxShadow:24,width:300,maxHeight:"90vh",overflowY:"auto",textAlign:"center"},children:[e.jsxs("div",{ref:j,children:[e.jsx(g,{variant:"h6",children:"******************************"}),e.jsxs(g,{variant:"h6",children:[(a=d==null?void 0:d.oem)==null?void 0:a.name.split(" ")[0]," DOCKET"]}),e.jsx(g,{variant:"h6",children:"******************************"}),e.jsx(g,{variant:"subtitle1",sx:{mt:1},children:"DOCKET"}),e.jsxs(g,{sx:{fontSize:"12px",textAlign:"left",mt:1},children:["Batch: ",n.generalKeyInfo["Batch No"],e.jsx("br",{}),"Date: ",n.generalKeyInfo.Date||"-",e.jsxs("span",{style:{float:"right"},children:["Start: ",n.generalKeyInfo["Start Time"]]}),e.jsx("br",{}),"Operator: ",n.generalKeyInfo.Operator,e.jsx("br",{}),"Recipe: ",n.generalKeyInfo["Recipe Name"]]}),e.jsx("div",{className:"line",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),e.jsxs(D,{size:"small",children:[e.jsx(C,{children:e.jsxs(k,{children:[e.jsx(p,{sx:{fontSize:"10px"},children:"No"}),e.jsx(p,{sx:{fontSize:"10px"},children:"Product"}),e.jsx(p,{sx:{fontSize:"10px"},children:"Target"}),e.jsx(p,{sx:{fontSize:"10px"},children:"Achieved"})]})}),e.jsx(O,{children:(t=n.productArr)==null?void 0:t.map((o,i)=>e.jsxs(k,{children:[e.jsx(p,{sx:{fontSize:"10px"},children:i+1}),e.jsx(p,{sx:{fontSize:"10px"},children:o.product}),e.jsx(p,{sx:{fontSize:"10px"},children:o.target}),e.jsx(p,{sx:{fontSize:"10px"},children:o.achieved})]},i))})]}),e.jsx("div",{className:"line",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),e.jsxs(g,{sx:{fontSize:"12px",textAlign:"left"},children:["Batch Total (Kg): ",n.generalKeyInfo["Total Target"],e.jsx("span",{style:{float:"right"},children:n.generalKeyInfo["Total Achieved"]}),e.jsx("br",{}),"Cubic Meter: ",n.generalKeyInfo["Cubic Meter"],e.jsx("br",{}),"End: ",n.generalKeyInfo["End Time"],e.jsx("br",{}),e.jsx("div",{className:"line",style:{borderTop:"1px dashed #000",margin:"6px 0"}}),"Machine Id: ",n.imei]})]}),e.jsx(E,{onClick:c,variant:"contained",sx:{mt:2,backgroundColor:"#374151","&:hover":{backgroundColor:"#111827"},fontSize:"12px"},children:"üñ®Ô∏è Print Receipt"})]})})})},Z=V;export{q as D,G as R,Z as a};
