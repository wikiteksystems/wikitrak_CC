import{c as mn,s as gn,_ as G,h as pt,r as Ze,a as xn,d as yn,m as vn,b as x,e as bn,f as ce,j as i,g as de,u as jn,i as ft,k as We,l as Ge,n as kn,o as st,p as pe,q as ze,t as Mt,T as q,R as I,v as at,w as _e,x as fe,y as W,z as ht,A as Sn,B as ae,C as Vt,D as et,E as lt,F as re,G as An,H as Pn,I as ue,J as Xe,K as Re,L as be,M as mt,N as Bt,O as gt,P as Yt,Q as On,S as xt,U as Cn,V as wn,W as Tn,X as _n,Y as Rn,Z as Dn,$ as In,a0 as En,a1 as Ln,a2 as Fn,a3 as $n,a4 as Nn,a5 as Mn}from"./index-DFIULFn2.js";import{s as Oe}from"./Socket-DLjvxrzW.js";import{d as Vn,t as Wt}from"./Search-CmDiKBSd.js";import{V as Bn}from"./VehicleMenu-B46J3aU1.js";import"./DateTimePicker-CAxnZ5NE.js";import{f as K,_ as Gt,a as zt,b as Yn,c as Wn,i as ge,T as ct,p as te,L as Q,d as ut,e as Kt,D as Gn,G as zn,u as Kn,C as Hn,g as je,h as he,S as Un,A as qn,j as Zn,k as yt,l as Xn,m as xe,n as Jn,o as Qn,q as Ht,r as er,s as De,w as vt,t as Ee,v as tr,x as nr,R as Ut,B as rr,y as or,X as ir,Y as sr,z as qt,E as ar,F as lr}from"./TopBar-CgMeXe-P.js";import"./proj-XQwXs9DQ.js";import{L as cr}from"./LeftSideBar2-BAj_2RA3.js";import{u as ur,G as dr,M as pr}from"./esm-oBE-rW4D.js";import{B as D}from"./CircularProgress-CWnAPB2N.js";import{r as fr,m as hr,a as mr,u as Zt,f as Xt,I as gr,F as bt,b as jt}from"./OutlinedInput-BSR0DPbh.js";import{c as xr,I as Jt}from"./IconButton-Cmqcb3WR.js";import{f as yr}from"./TripMap-D6yb_-rP.js";import{S as vr}from"./Switch-DdCMDESO.js";import{T as Le}from"./index-Pb7O91MQ.js";import{V as br}from"./VehicleGroups-BDrfY9qa.js";import{d as jr}from"./Close-DB4tUmP-.js";import{N as kr}from"./NewLoader-BiNA2RiQ.js";import{S as kt}from"./Select-DJyKKsKH.js";import{M as Ie}from"./MenuItem-CxQ8Tzra.js";import{T as Qt,a as en,b as tn,c as Ne,d as B,e as nn}from"./TableRow-astDOUbQ.js";import{P as rn}from"./Paper-omF3doHZ.js";import{C as Me}from"./Checkbox-DaDFiHEv.js";import{T as on,a as Sr}from"./TablePagination-DHrXiFok.js";import{D as dt,a as Ar,b as sn,c as an}from"./DialogTitle-nQZJTibA.js";import{T as Pr,a as St}from"./Tabs-D_gJj--D.js";import"./createSvgIcon-CmZwwv7a.js";import"./RegionSelector-B4r2ybWx.js";import"./SearchTab-BWfhXvQc.js";import"./InputAdornment-CNWd5Q-r.js";import"./TripGraph-DtNLZw8f.js";import"./useIcons-20Gvjy6H.js";import"./SearchOutlined-D_75c2X0.js";import"./button-CrDstrcz.js";import"./roundedArrow-BeMxvjWC.js";import"./index-DN638-gD.js";import"./NotificationsNone-LILx6Kr3.js";import"./Tooltip-BUyYvv4R.js";import"./usePreviousProps-CPYLQKJ_.js";import"./menu2-vKyyp5to.js";import"./redTractor-NXgVJyvR.js";import"./Info-BdbLiijx.js";import"./TextArea-C45RluEo.js";const Or=["component","direction","spacing","divider","children","className","useFlexGap"],Cr=mn(),wr=gn("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Tr(e){return jn({props:e,name:"MuiStack",defaultTheme:Cr})}function _r(e,t){const r=x.Children.toArray(e).filter(Boolean);return r.reduce((n,o,s)=>(n.push(o),s<r.length-1&&n.push(x.cloneElement(t,{key:`separator-${s}`})),n),[])}const Rr=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Dr=({ownerState:e,theme:t})=>{let r=G({display:"flex",flexDirection:"column"},pt({theme:t},Ze({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=xn(t),o=Object.keys(t.breakpoints.values).reduce((c,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(c[l]=!0),c),{}),s=Ze({values:e.direction,base:o}),a=Ze({values:e.spacing,base:o});typeof s=="object"&&Object.keys(s).forEach((c,l,h)=>{if(!s[c]){const g=l>0?s[h[l-1]]:"column";s[c]=g}}),r=yn(r,pt({theme:t},a,(c,l)=>e.useFlexGap?{gap:ft(n,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Rr(l?s[l]:e.direction)}`]:ft(n,c)}}))}return r=vn(t.breakpoints,r),r};function Ir(e={}){const{createStyledComponent:t=wr,useThemeProps:r=Tr,componentName:n="MuiStack"}=e,o=()=>We({root:["root"]},c=>Ge(n,c),{}),s=t(Dr);return x.forwardRef(function(c,l){const h=r(c),v=bn(h),{component:g="div",direction:P="column",spacing:j=0,divider:p,children:k,className:S,useFlexGap:w=!1}=v,R=ce(v,Or),L={direction:P,spacing:j,useFlexGap:w},_=o();return i.jsx(s,G({as:g,ownerState:L,ref:l,className:de(_.root,S)},R,{children:p?_r(k,p):k}))})}const Er=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Lr=["component","slots","slotProps"],Fr=["component"];function $r(e,t){const{className:r,elementType:n,ownerState:o,externalForwardedProps:s,getSlotOwnerState:a,internalForwardedProps:u}=t,c=ce(t,Er),{component:l,slots:h={[e]:void 0},slotProps:v={[e]:void 0}}=s,g=ce(s,Lr),P=h[e]||n,j=fr(v[e],o),p=hr(G({className:r},c,{externalForwardedProps:e==="root"?g:void 0,externalSlotProps:j})),{props:{component:k},internalRef:S}=p,w=ce(p.props,Fr),R=kn(S,j==null?void 0:j.ref,t.ref),L=a?a(w):{},_=G({},o,L),d=e==="root"?k||l:k,T=mr(P,G({},e==="root"&&!l&&!h[e]&&u,e!=="root"&&!h[e]&&u,w,d&&{as:d},{ref:R}),_);return Object.keys(L).forEach(A=>{delete T[A]}),[P,T]}const Nr=xr(i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Mr(e){return Ge("MuiAvatar",e)}st("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Vr=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Br=e=>{const{classes:t,variant:r,colorDefault:n}=e;return We({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Mr,t)},Yr=pe("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:G({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:G({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Wr=pe("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Gr=pe(Nr,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function zr({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[o,s]=x.useState(!1);return x.useEffect(()=>{if(!r&&!n)return;s(!1);let a=!0;const u=new Image;return u.onload=()=>{a&&s("loaded")},u.onerror=()=>{a&&s("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=r,n&&(u.srcset=n),()=>{a=!1}},[e,t,r,n]),o}const Kr=x.forwardRef(function(t,r){const n=ze({props:t,name:"MuiAvatar"}),{alt:o,children:s,className:a,component:u="div",slots:c={},slotProps:l={},imgProps:h,sizes:v,src:g,srcSet:P,variant:j="circular"}=n,p=ce(n,Vr);let k=null;const S=zr(G({},h,{src:g,srcSet:P})),w=g||P,R=w&&S!=="error",L=G({},n,{colorDefault:!R,component:u,variant:j}),_=Br(L),[d,T]=$r("img",{className:_.img,elementType:Wr,externalForwardedProps:{slots:c,slotProps:{img:G({},h,l.img)}},additionalProps:{alt:o,src:g,srcSet:P,sizes:v},ownerState:L});return R?k=i.jsx(d,G({},T)):s||s===0?k=s:w&&o?k=o[0]:k=i.jsx(Gr,{ownerState:L,className:_.fallback}),i.jsx(Yr,G({as:u,ownerState:L,className:de(_.root,a),ref:r},p,{children:k}))}),ln=Kr,Hr=Ir({createStyledComponent:pe("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ze({props:e,name:"MuiStack"})}),Ur=Hr;function qr(e){return Ge("MuiFormControlLabel",e)}const Zr=st("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ce=Zr,Xr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Jr=e=>{const{classes:t,disabled:r,labelPlacement:n,error:o,required:s}=e,a={root:["root",r&&"disabled",`labelPlacement${Mt(n)}`,o&&"error",s&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]};return We(a,qr,t)},Qr=pe("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Ce.label}`]:t.label},t.root,t[`labelPlacement${Mt(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>G({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ce.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ce.label}`]:{[`&.${Ce.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),eo=pe("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Ce.error}`]:{color:(e.vars||e).palette.error.main}})),to=x.forwardRef(function(t,r){var n,o;const s=ze({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:u={},control:c,disabled:l,disableTypography:h,label:v,labelPlacement:g="end",required:P,slotProps:j={}}=s,p=ce(s,Xr),k=Zt(),S=(n=l??c.props.disabled)!=null?n:k==null?void 0:k.disabled,w=P??c.props.required,R={disabled:S,required:w};["checked","name","onChange","value","inputRef"].forEach(N=>{typeof c.props[N]>"u"&&typeof s[N]<"u"&&(R[N]=s[N])});const L=Xt({props:s,muiFormControl:k,states:["error"]}),_=G({},s,{disabled:S,labelPlacement:g,required:w,error:L.error}),d=Jr(_),T=(o=j.typography)!=null?o:u.typography;let A=v;return A!=null&&A.type!==q&&!h&&(A=i.jsx(q,G({component:"span"},T,{className:de(d.label,T==null?void 0:T.className),children:A}))),i.jsxs(Qr,G({className:de(d.root,a),ownerState:_,ref:r},p,{children:[x.cloneElement(c,R),w?i.jsxs(Ur,{display:"block",children:[A,i.jsxs(eo,{ownerState:_,"aria-hidden":!0,className:d.asterisk,children:["â€‰","*"]})]}):A]}))}),no=to;function ro(e){return Ge("MuiFormGroup",e)}st("MuiFormGroup",["root","row","error"]);const oo=["className","row"],io=e=>{const{classes:t,row:r,error:n}=e;return We({root:["root",r&&"row",n&&"error"]},ro,t)},so=pe("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>G({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),ao=x.forwardRef(function(t,r){const n=ze({props:t,name:"MuiFormGroup"}),{className:o,row:s=!1}=n,a=ce(n,oo),u=Zt(),c=Xt({props:n,muiFormControl:u,states:["error"]}),l=G({},n,{row:s,error:c.error}),h=io(l);return i.jsx(so,G({className:de(h.root,o),ownerState:l,ref:r},a))}),lo=ao;var co=["points","className","baseLinePoints","connectNulls"];function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}function uo(e,t){if(e==null)return{};var r=po(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function po(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function At(e){return go(e)||mo(e)||ho(e)||fo()}function fo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ho(e,t){if(e){if(typeof e=="string")return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}}function mo(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function go(e){if(Array.isArray(e))return tt(e)}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=function(t){return t&&t.x===+t.x&&t.y===+t.y},xo=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Pt(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Pt(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},we=function(t,r){var n=xo(t);r&&(n=[n.reduce(function(s,a){return[].concat(At(s),At(a))},[])]);var o=n.map(function(s){return s.reduce(function(a,u,c){return"".concat(a).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return n.length===1?"".concat(o,"Z"):o},yo=function(t,r,n){var o=we(t,n);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(we(r.reverse(),n).slice(1))},vo=function(t){var r=t.points,n=t.className,o=t.baseLinePoints,s=t.connectNulls,a=uo(t,co);if(!r||!r.length)return null;var u=de("recharts-polygon",n);if(o&&o.length){var c=a.stroke&&a.stroke!=="none",l=yo(r,o,s);return I.createElement("g",{className:u},I.createElement("path",ye({},K(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),c?I.createElement("path",ye({},K(a,!0),{fill:"none",d:we(r,s)})):null,c?I.createElement("path",ye({},K(a,!0),{fill:"none",d:we(o,s)})):null)}var h=we(r,s);return I.createElement("path",ye({},K(a,!0),{fill:h.slice(-1)==="Z"?a.fill:"none",className:u,d:h}))},bo=Gt,jo=Yn,ko=zt;function So(e,t){return e&&e.length?bo(e,ko(t),jo):void 0}var Ao=So;const Po=at(Ao);var Oo=Gt,Co=zt,wo=Wn;function To(e,t){return e&&e.length?Oo(e,Co(t),wo):void 0}var _o=To;const Ro=at(_o);var Do=["cx","cy","angle","ticks","axisLine"],Io=["ticks","tick","angle","tickFormatter","stroke"];function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Te.apply(this,arguments)}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(r),!0).forEach(function(n){Ke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ct(e,t){if(e==null)return{};var r=Eo(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Eo(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,un(n.key),n)}}function Fo(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $o(e,t,r){return t=Ve(t),No(e,cn()?Reflect.construct(t,r||[],Ve(e).constructor):t.apply(e,r))}function No(e,t){if(t&&(ke(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mo(e)}function Mo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cn=function(){return!!e})()}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ve(e)}function Vo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},nt(e,t)}function Ke(e,t,r){return t=un(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function un(e){var t=Bo(e,"string");return ke(t)=="symbol"?t:String(t)}function Bo(e,t){if(ke(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ke(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var He=function(e){Vo(t,e);function t(){return Lo(this,t),$o(this,t,arguments)}return Fo(t,[{key:"getTickValueCoord",value:function(n){var o=n.coordinate,s=this.props,a=s.angle,u=s.cx,c=s.cy;return te(u,c,o,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,o;switch(n){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=Po(u,function(h){return h.coordinate||0}),l=Ro(u,function(h){return h.coordinate||0});return{cx:o,cy:s,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=n.axisLine,l=Ct(n,Do),h=u.reduce(function(j,p){return[Math.min(j[0],p.coordinate),Math.max(j[1],p.coordinate)]},[1/0,-1/0]),v=te(o,s,h[0],a),g=te(o,s,h[1],a),P=ie(ie(ie({},K(l,!1)),{},{fill:"none"},K(c,!1)),{},{x1:v.x,y1:v.y,x2:g.x,y2:g.y});return I.createElement("line",Te({className:"recharts-polar-radius-axis-line"},P))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.angle,c=o.tickFormatter,l=o.stroke,h=Ct(o,Io),v=this.getTickTextAnchor(),g=K(h,!1),P=K(a,!1),j=s.map(function(p,k){var S=n.getTickValueCoord(p),w=ie(ie(ie(ie({textAnchor:v,transform:"rotate(".concat(90-u,", ").concat(S.x,", ").concat(S.y,")")},g),{},{stroke:"none",fill:l},P),{},{index:k},S),{},{payload:p});return I.createElement(Q,Te({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(p.coordinate)},ut(n.props,p,k)),t.renderTickItem(a,w,c?c(p.value,k):p.value))});return I.createElement(Q,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.axisLine,a=n.tick;return!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),a&&this.renderTicks(),Kt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):ge(n)?a=n(o):a=I.createElement(ct,Te({},o,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}]),t}(x.PureComponent);Ke(He,"displayName","PolarRadiusAxis");Ke(He,"axisType","radiusAxis");Ke(He,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Se(e){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(r),!0).forEach(function(n){Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pn(n.key),n)}}function Wo(e,t,r){return t&&_t(e.prototype,t),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Go(e,t,r){return t=Be(t),zo(e,dn()?Reflect.construct(t,r||[],Be(e).constructor):t.apply(e,r))}function zo(e,t){if(t&&(Se(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ko(e)}function Ko(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dn=function(){return!!e})()}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(e)}function Ho(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},rt(e,t)}function Ue(e,t,r){return t=pn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pn(e){var t=Uo(e,"string");return Se(t)=="symbol"?t:String(t)}function Uo(e,t){if(Se(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Se(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qo=Math.PI/180,Rt=1e-5,qe=function(e){Ho(t,e);function t(){return Yo(this,t),Go(this,t,arguments)}return Wo(t,[{key:"getTickLineCoord",value:function(n){var o=this.props,s=o.cx,a=o.cy,u=o.radius,c=o.orientation,l=o.tickSize,h=l||8,v=te(s,a,u,n.coordinate),g=te(s,a,u+(c==="inner"?-1:1)*h,n.coordinate);return{x1:v.x,y1:v.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(n){var o=this.props.orientation,s=Math.cos(-n.coordinate*qo),a;return s>Rt?a=o==="outer"?"start":"end":s<-Rt?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.radius,u=n.axisLine,c=n.axisLineType,l=se(se({},K(this.props,!1)),{},{fill:"none"},K(u,!1));if(c==="circle")return I.createElement(Gn,le({className:"recharts-polar-angle-axis-line"},l,{cx:o,cy:s,r:a}));var h=this.props.ticks,v=h.map(function(g){return te(o,s,a,g.coordinate)});return I.createElement(vo,le({className:"recharts-polar-angle-axis-line"},l,{points:v}))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.tickLine,c=o.tickFormatter,l=o.stroke,h=K(this.props,!1),v=K(a,!1),g=se(se({},h),{},{fill:"none"},K(u,!1)),P=s.map(function(j,p){var k=n.getTickLineCoord(j),S=n.getTickTextAnchor(j),w=se(se(se({textAnchor:S},h),{},{stroke:"none",fill:l},v),{},{index:p,payload:j,x:k.x2,y:k.y2});return I.createElement(Q,le({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(j.coordinate)},ut(n.props,j,p)),u&&I.createElement("line",le({className:"recharts-polar-angle-axis-tick-line"},g,k)),a&&t.renderTickItem(a,w,c?c(j.value,p):j.value))});return I.createElement(Q,{className:"recharts-polar-angle-axis-ticks"},P)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):ge(n)?a=n(o):a=I.createElement(ct,le({},o,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}]),t}(x.PureComponent);Ue(qe,"displayName","PolarAngleAxis");Ue(qe,"axisType","angleAxis");Ue(qe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Fe;function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ve.apply(this,arguments)}function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dt(Object(r),!0).forEach(function(n){J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hn(n.key),n)}}function Xo(e,t,r){return t&&It(e.prototype,t),r&&It(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jo(e,t,r){return t=Ye(t),Qo(e,fn()?Reflect.construct(t,r||[],Ye(e).constructor):t.apply(e,r))}function Qo(e,t){if(t&&(Ae(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return me(e)}function fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fn=function(){return!!e})()}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ye(e)}function me(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ei(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},ot(e,t)}function J(e,t,r){return t=hn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){var t=ti(e,"string");return Ae(t)=="symbol"?t:String(t)}function ti(e,t){if(Ae(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ae(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ne=function(e){ei(t,e);function t(r){var n;return Zo(this,t),n=Jo(this,t,[r]),J(me(n),"pieRef",null),J(me(n),"sectorRefs",[]),J(me(n),"id",Kn("recharts-pie-")),J(me(n),"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ge(o)&&o()}),J(me(n),"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ge(o)&&o()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Xo(t,[{key:"isActiveIndex",value:function(n){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(n)!==-1:n===o}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,u=s.labelLine,c=s.dataKey,l=s.valueKey,h=K(this.props,!1),v=K(a,!1),g=K(u,!1),P=a&&a.offsetRadius||20,j=n.map(function(p,k){var S=(p.startAngle+p.endAngle)/2,w=te(p.cx,p.cy,p.outerRadius+P,S),R=M(M(M(M({},h),p),{},{stroke:"none"},v),{},{index:k,textAnchor:t.getTextAnchor(w.x,p.cx)},w),L=M(M(M(M({},h),p),{},{fill:"none",stroke:p.fill},g),{},{index:k,points:[te(p.cx,p.cy,p.outerRadius,S),w],key:"line"}),_=c;return je(c)&&je(l)?_="value":je(c)&&(_=l),I.createElement(Q,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(k)},u&&t.renderLabelLineItem(u,L),t.renderLabelItem(a,R,he(p,_)))});return I.createElement(Q,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(n){var o=this,s=this.props,a=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return n.map(function(l,h){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var v=o.isActiveIndex(h),g=c&&o.hasActiveIndex()?c:null,P=v?a:g,j=M(M({},l),{},{stroke:u?l.fill:l.stroke,tabIndex:-1});return I.createElement(Q,ve({ref:function(k){k&&!o.sectorRefs.includes(k)&&o.sectorRefs.push(k)},tabIndex:-1,className:"recharts-pie-sector"},ut(o.props,l,h),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(h)}),I.createElement(Un,ve({option:P,isActive:v,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,o=this.props,s=o.sectors,a=o.isAnimationActive,u=o.animationBegin,c=o.animationDuration,l=o.animationEasing,h=o.animationId,v=this.state,g=v.prevSectors,P=v.prevIsAnimationActive;return I.createElement(qn,{begin:u,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(P),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var p=j.t,k=[],S=s&&s[0],w=S.startAngle;return s.forEach(function(R,L){var _=g&&g[L],d=L>0?Zn(R,"paddingAngle",0):0;if(_){var T=yt(_.endAngle-_.startAngle,R.endAngle-R.startAngle),A=M(M({},R),{},{startAngle:w+d,endAngle:w+T(p)+d});k.push(A),w=A.endAngle}else{var N=R.endAngle,Y=R.startAngle,Z=yt(0,N-Y),f=Z(p),F=M(M({},R),{},{startAngle:w+d,endAngle:w+f+d});k.push(F),w=F.endAngle}}),I.createElement(Q,null,n.renderSectorsStatically(k))})}},{key:"attachKeyboardHandlers",value:function(n){var o=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var u=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[u].focus(),o.setState({sectorToFocus:u});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,o=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&o&&o.length&&(!a||!Xn(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,o=this.props,s=o.hide,a=o.sectors,u=o.className,c=o.label,l=o.cx,h=o.cy,v=o.innerRadius,g=o.outerRadius,P=o.isAnimationActive,j=this.state.isAnimationFinished;if(s||!a||!a.length||!xe(l)||!xe(h)||!xe(v)||!xe(g))return null;var p=de("recharts-pie",u);return I.createElement(Q,{tabIndex:this.props.rootTabIndex,className:p,ref:function(S){n.pieRef=S}},this.renderSectors(),c&&this.renderLabels(a),Kt.renderCallByParent(this.props,null,!1),(!P||j)&&Jn.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return o.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:n.sectors!==o.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,o){return n>o?"start":n<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,o){return I.isValidElement(n)?I.cloneElement(n,o):ge(n)?n(o):I.createElement(Hn,ve({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,o,s){if(I.isValidElement(n))return I.cloneElement(n,o);var a=s;return ge(n)&&(a=n(o),I.isValidElement(a))?a:I.createElement(ct,ve({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(x.PureComponent);Fe=ne;J(ne,"displayName","Pie");J(ne,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!zn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});J(ne,"parseDeltaAngle",function(e,t){var r=Ee(t-e),n=Math.min(Math.abs(t-e),360);return r*n});J(ne,"getRealPieData",function(e){var t=e.props,r=t.data,n=t.children,o=K(e.props,!1),s=Qn(n,Ht);return r&&r.length?r.map(function(a,u){return M(M(M({payload:a},o),a),s&&s[u]&&s[u].props)}):s&&s.length?s.map(function(a){return M(M({},o),a.props)}):[]});J(ne,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,o=t.width,s=t.height,a=er(o,s),u=n+De(e.props.cx,o,o/2),c=r+De(e.props.cy,s,s/2),l=De(e.props.innerRadius,a,0),h=De(e.props.outerRadius,a,a*.8),v=e.props.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:u,cy:c,innerRadius:l,outerRadius:h,maxRadius:v}});J(ne,"getComposedData",function(e){var t=e.item,r=e.offset,n=Fe.getRealPieData(t);if(!n||!n.length)return null;var o=t.props,s=o.cornerRadius,a=o.startAngle,u=o.endAngle,c=o.paddingAngle,l=o.dataKey,h=o.nameKey,v=o.valueKey,g=o.tooltipType,P=Math.abs(t.props.minAngle),j=Fe.parseCoordinateOfPie(t,r),p=Fe.parseDeltaAngle(a,u),k=Math.abs(p),S=l;je(l)&&je(v)?(vt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):je(l)&&(vt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=v);var w=n.filter(function(A){return he(A,S,0)!==0}).length,R=(k>=360?w:w-1)*c,L=k-w*P-R,_=n.reduce(function(A,N){var Y=he(N,S,0);return A+(xe(Y)?Y:0)},0),d;if(_>0){var T;d=n.map(function(A,N){var Y=he(A,S,0),Z=he(A,h,N),f=(xe(Y)?Y:0)/_,F;N?F=T.endAngle+Ee(p)*c*(Y!==0?1:0):F=a;var H=F+Ee(p)*((Y!==0?P:0)+f*L),ee=(F+H)/2,$=(j.innerRadius+j.outerRadius)/2,V=[{name:Z,value:Y,payload:A,dataKey:S,type:g}],y=te(j.cx,j.cy,$,ee);return T=M(M(M({percent:f,cornerRadius:s,name:Z,tooltipPayload:V,midAngle:ee,middleRadius:$,tooltipPosition:y},A),j),{},{value:he(A,S),startAngle:F,endAngle:H,payload:A,paddingAngle:Ee(p)*c}),T})}return M(M({},j),{},{sectors:d,data:n})});var ni=tr({chartName:"PieChart",GraphicalChild:ne,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qe},{axisType:"radiusAxis",AxisComp:He}],formatAxisMap:nr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ri=({data:e})=>i.jsx(Ut,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:i.jsxs(rr,{data:e,children:[i.jsx(or,{strokeDasharray:"3 3"}),i.jsx(ir,{dataKey:"name"}),i.jsx(sr,{}),i.jsx(qt,{}),i.jsx(ar,{dataKey:"value",fill:"#82ca9d"})]})});function oi({searchQuery:e,setSearchQuery:t,map:r}){const n=async o=>{if(o.preventDefault(),e.trim()==="")return;const s={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(r).findPlaceFromQuery(s,(u,c)=>{if(c===window.google.maps.places.PlacesServiceStatus.OK&&u){const l=u[0];r.setCenter(l.geometry.location),r.setZoom(14)}})};return i.jsxs(D,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[i.jsx(gr,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),i.jsx(Jt,{type:"submit",sx:{p:1},children:i.jsx(Vn,{})})]})}var ii="Expected a function",Et=NaN,si="[object Symbol]",ai=/^\s+|\s+$/g,li=/^[-+]0x[0-9a-f]+$/i,ci=/^0b[01]+$/i,ui=/^0o[0-7]+$/i,di=parseInt,pi=typeof _e=="object"&&_e&&_e.Object===Object&&_e,fi=typeof self=="object"&&self&&self.Object===Object&&self,hi=pi||fi||Function("return this")(),mi=Object.prototype,gi=mi.toString,xi=Math.max,yi=Math.min,Je=function(){return hi.Date.now()};function vi(e,t,r){var n,o,s,a,u,c,l=0,h=!1,v=!1,g=!0;if(typeof e!="function")throw new TypeError(ii);t=Lt(t)||0,it(r)&&(h=!!r.leading,v="maxWait"in r,s=v?xi(Lt(r.maxWait)||0,t):s,g="trailing"in r?!!r.trailing:g);function P(d){var T=n,A=o;return n=o=void 0,l=d,a=e.apply(A,T),a}function j(d){return l=d,u=setTimeout(S,t),h?P(d):a}function p(d){var T=d-c,A=d-l,N=t-T;return v?yi(N,s-A):N}function k(d){var T=d-c,A=d-l;return c===void 0||T>=t||T<0||v&&A>=s}function S(){var d=Je();if(k(d))return w(d);u=setTimeout(S,p(d))}function w(d){return u=void 0,g&&n?P(d):(n=o=void 0,a)}function R(){u!==void 0&&clearTimeout(u),l=0,n=c=o=u=void 0}function L(){return u===void 0?a:w(Je())}function _(){var d=Je(),T=k(d);if(n=arguments,o=this,c=d,T){if(u===void 0)return j(c);if(v)return u=setTimeout(S,t),P(c)}return u===void 0&&(u=setTimeout(S,t)),a}return _.cancel=R,_.flush=L,_}function it(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function bi(e){return!!e&&typeof e=="object"}function ji(e){return typeof e=="symbol"||bi(e)&&gi.call(e)==si}function Lt(e){if(typeof e=="number")return e;if(ji(e))return Et;if(it(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=it(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ai,"");var r=ci.test(e);return r||ui.test(e)?di(e.slice(2),r?2:8):li.test(e)?Et:+e}var ki=vi;const Si=at(ki),Ai=({setLoading:e})=>{const t=fe(),{center:r,selectedParameterList:n,selectedVehicle:o,vehicleList:s,tractorIcon:a,icons:u,locationData:c,ivnPid:l,placesData:h}=W($=>$.liveMap),{mode:v,AreaCoveredTrips:g}=W($=>$.dashboard),{isLoaded:P,loadError:j}=ur({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[p,k]=x.useState(null),[S,w]=x.useState(!0),[R,L]=x.useState(5),[_,d]=x.useState(),[T,A]=x.useState(""),N=x.useRef(null),Y=Wt(v),Z=x.useCallback($=>{N.current=$},[]),f=Si($=>{if(!$||$.length===0)return;const V=10;let y=0;const C=m=>{$.slice(m,m+V).forEach(E=>{var O;((O=E==null?void 0:E.data)==null?void 0:O.length)>0&&(y+=yr(E==null?void 0:E.data,t))}),m+V<$.length?setTimeout(()=>C(m+V),0):(console.log("calculated acreage: ",y),t(ht(y.toFixed(2))),e(!1))};C(0)},300);x.useEffect(()=>(g&&g.length>0?(e(!0),f(g)):(e(!1),t(ht(0))),()=>{f.cancel(),e(!1)}),[g,t]),x.useEffect(()=>{if(S)d(c);else{let $=c==null?void 0:c.filter(V=>(V==null?void 0:V._id)===(o==null?void 0:o.imei));d($)}},[c,o,S]);const F=()=>{if(!S)t(Sn({lat:21,lng:78})),L(4),w(V=>!V);else{const $=c.find(V=>V.latestDocument.imei===o.imei);$?(console.log($.latestDocument,"getCenter"),$.latestDocument,w(V=>!V)):ae.error("Data is not available for selected vehicle")}};if(x.useEffect(()=>{P&&k(window.google.maps)},[P,c]),j)return"Error loading maps";if(!P)return"Loading maps";const H={height:"100vh",borderRadius:"8px"},ee=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return p?i.jsxs("div",{children:[i.jsxs(D,{style:{fontSize:"20px",color:Y.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[i.jsx(q,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),i.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(oi,{searchQuery:T,setSearchQuery:A,map:N.current}),i.jsx(lo,{sx:{marginLeft:0,paddingTop:0,color:Y.grey[400]},children:i.jsx(no,{control:i.jsx(vr,{checked:S,onChange:F}),label:S?"Group":"Individual"})})]})]}),i.jsx(dr,{mapContainerStyle:H,zoom:R,center:r,onLoad:Z,options:{mapTypeControl:!1,styles:v?ee:""},children:_&&_.length>0&&_.map(($,V)=>i.jsx(pr,{position:{lat:$.latestDocument.lat,lng:$.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},V))})]}):null};function Pi(){const{vehicles_details:e}=W(n=>n.dashboard),[t,r]=x.useState([]);return x.useEffect(()=>{const n=e.reduce((s,a)=>{const u=a.sell_date?Vt(a.sell_date):null,c=u&&u.isValid()?u.format("MMM YYYY"):"N/A";return s[c]=(s[c]||0)+1,s},{}),o=Object.keys(n).map(s=>({name:s,value:n[s]}));r(o)},[e]),i.jsxs(D,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[i.jsx(Le,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),i.jsxs(D,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[i.jsx(D,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:i.jsx(Le,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),i.jsx(ri,{data:t})]}),i.jsx(Le,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const Ft=Math.PI/180,Oi=({cx:e,cy:t,midAngle:r,innerRadius:n,outerRadius:o,percent:s,index:a})=>{const u=n+(o-n)*.5,c=e+u*Math.cos(-r*Ft),l=t+u*Math.sin(-r*Ft);return i.jsx("text",{x:c,y:l,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(s*100).toFixed(0)}%`})},Ci=({data:e,COLORS:t})=>{x.useEffect(()=>{},[e]);const r=e.every(n=>n.value===0);return i.jsx(D,{sx:{width:"100%",height:"100%"},children:r?i.jsx(D,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:i.jsx(q,{sx:{textAlign:"center"},children:"No data available to display."})}):i.jsx(Ut,{width:"100%",height:"100%",children:i.jsxs(ni,{children:[i.jsx(ne,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:Oi,fill:"#8884d8",dataKey:"value",children:e.map((n,o)=>i.jsx(Ht,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),i.jsx(qt,{})]})})})},$e=({title:e})=>i.jsx(q,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),Qe=({label:e,count:t,color:r,type:n,title:o})=>{let s=fe(),{vehicleZone:a}=W(l=>l.dashboard),u=lt();const c=(l,h)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",h),s(An(h)),s(Pn(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",h),h){case"Open":s(ue("Open"));break;case"Overdue":s(ue("overdue"));break;case"Closed":s(ue("Close"));break}u("/breakdown")}};return i.jsxs(D,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[i.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(D,{sx:{width:"12px",height:"12px",bgcolor:r,borderRadius:"50%",marginRight:"8px"}}),i.jsx(re,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{c(o,e)},children:e})]}),i.jsx(D,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?i.jsx(q,{color:r,children:t}):i.jsx(ln,{sx:{bgcolor:r,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},wi=({data:e,colors:t})=>{const{loading:r,isDriverBehaviorLoading:n}=W(o=>o.dashboard);return i.jsxs(D,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[i.jsxs(D,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[i.jsx(q,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),i.jsx(D,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,s)=>i.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[i.jsx(q,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),i.jsx(ln,{sx:{bgcolor:t[s],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},s))})]}),i.jsx(D,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?i.jsx(q,{sx:{fontSize:"14px"},children:"Loading..."}):i.jsx(Ci,{data:e,COLORS:t})})]})},$t=({statuses:e,title:t})=>{let r=fe(),n=lt();const o=s=>{if(t==="Inspection Approvals"){switch(console.log("status: ",s),s.label){case"Rejected":r(ue("Rejected"));break;case"Pending":r(ue("Open"));break;case"Approved":r(ue("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(s.label){case"Overdue":r(Xe("Overdue"));break;case"Due soon":r(Xe("Due soon"));break;case"Serviced":r(Xe("Serviced"));break}n("/service")}};return i.jsxs(D,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:t}),i.jsx(D,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((s,a)=>i.jsxs(D,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(s)},children:[i.jsx(q,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:s.color,margin:"30px 0"},"aria-label":"color",children:s.count}),i.jsx(q,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:s.label})]},a))})]})},Nt={total:0,online:0,offline:0,running:0};function Ti({vehicleReport:e,imeiNo:t,loading:r,isloadingReport:n}){var H,ee,$,V,y,C,m;const{vehicleList:o,onlineVehicle:s,locationData:a}=W(b=>b.liveMap);W(b=>b.dashboard);const{breakdownStatusCount:u}=W(b=>b.breakdown),{inspectionStatusCount:c}=W(b=>b.inspection),{vehicleStatesData:l}=W(b=>b.report),{report:h,driver_behavior:v,overdueCount:g,completedCount:P,serviceSoonCount:j,selectedVehicleGroup:p,areaCovered:k}=W(b=>b.dashboard),[S,w]=x.useState(0),[R,L]=x.useState(Nt);x.useEffect(()=>{if((o==null?void 0:o.length)>0){let b={...Nt};if(p){const E=d(p==null?void 0:p.id);console.log("result",E);const O=o.filter(U=>U.vehicle_group===p.id);b.total=O.length,b.online=E.onlineCount,b.running=E.runningCount,b.offline=b.total-b.online}console.log("Updated Vehicle Count:",b),L(b)}console.log("vehicleList",o)},[p]),x.useEffect(()=>{if((o==null?void 0:o.length)>0){let b=0;o==null||o.map(E=>{var O;((O=E==null?void 0:E.imei)==null?void 0:O.length)>0&&b++}),w(b)}},[o]),x.useEffect(()=>{},[g,P,j]);const _=()=>{let b=0,E=0,O=0;return s.length>0&&s.forEach(U=>{t.includes(String(U))&&(b++,a==null||a.forEach(z=>{var oe,X;String((oe=z==null?void 0:z.latestDocument)==null?void 0:oe.imei)===String(U)&&z.latestDocument.speed>0&&(z.latestDocument.ignition===!0||z.latestDocument.ignition===1)&&E++,String((X=z==null?void 0:z.latestDocument)==null?void 0:X.imei)===String(U)&&z.latestDocument.speed<=0&&(z.latestDocument.ignition===!0||z.latestDocument.ignition===1)&&O++}))}),{onlineCount:b,runningCount:E,idelingCount:O}},d=b=>{let E=0,O=0;return s.forEach(U=>{if(t.includes(String(U))){const z=a==null?void 0:a.find(oe=>{var X;return String((X=oe==null?void 0:oe.latestDocument)==null?void 0:X.imei)===String(U)});if(z&&o.some(X=>{var Pe;return X.vehicle_group===b&&((Pe=X==null?void 0:X.imei[0])==null?void 0:Pe.mac_id)===String(U)})){E++;const{speed:X,ignition:Pe}=z.latestDocument;X>0&&(Pe===!0||Pe===1)&&O++}}}),{onlineCount:E,runningCount:O}};x.useEffect(()=>{},[l]);const T=[{name:"Overspeed O",value:((H=l==null?void 0:l.totals)==null?void 0:H.total_overSpeedTimeSec)||0},{name:"Economy E",value:((ee=l==null?void 0:l.totals)==null?void 0:ee.total_economyTimeSec)||0},{name:"Steady S",value:(($=l==null?void 0:l.totals)==null?void 0:$.total_idleTimeSec)||0}],A=["#0088FE","#00C49F","#FFBB28","#FF8042"],N=[{label:"Rejected",count:c.rejected||0,color:"#FF0202"},{label:"Pending",count:c.open||0,color:"black"},{label:"Approved",count:c.close||0,color:"green"}],Y=[{label:"Overdue",count:g,color:"#FF0202"},{label:"Due soon",count:j,color:"black"},{label:"Serviced",count:P,color:"green"}],Z=[{name:"Total Vehicles",count:Object.keys(p).length>0?R.total:S,color:"grey"},{name:"Online",count:Object.keys(p).length>0?R.online:_().onlineCount,color:"red"},{name:"Offline",count:Object.keys(p).length>0?R.offline:S-_().onlineCount,color:"grey"},{name:"Running",count:Object.keys(p).length>0?R.running:_().runningCount,color:"green"},{name:"Idling",count:Object.keys(p).length>0?R.online-R.running:_().idelingCount,color:"yellow"}],f=[{name:"Distance Covered",count:((V=l==null?void 0:l.totals)==null?void 0:V.totalDistance)||0,color:"grey"},{name:"Running time",count:((y=l==null?void 0:l.totals)==null?void 0:y.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((C=l==null?void 0:l.totals)==null?void 0:C.total_idleTime)||0,color:et.bgColor},{name:"Engine Hrs",count:((m=l==null?void 0:l.totals)==null?void 0:m.total_engineHours)||0,color:et.bgColor}],F=[{name:"Open",count:u.open,color:"grey"},{name:"Overdue",count:u.overDue,color:"red"},{name:"Closed",count:u.close,color:"green"}];return i.jsxs(i.Fragment,{children:[i.jsx(wi,{data:T,colors:A}),i.jsxs(D,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[i.jsx($e,{title:"Vehicles Status"}),i.jsx(D,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:Z.map((b,E)=>i.jsx(Qe,{label:b.name,count:b.count,color:b.color,title:"Vehicle Status"},E+1))})]}),i.jsx($t,{statuses:Y,title:"Service Remainder"}),i.jsxs(D,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Assigned Vehicles"}),i.jsx(D,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:f.map((b,E)=>i.jsx(Qe,{type:"assignVehicle",label:b.name,count:b.count,color:b.color},E+1))})]}),i.jsxs(D,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Breakdown Resolved"}),i.jsx(D,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:F.map((b,E)=>i.jsx(Qe,{label:b.name,count:b.count,color:b.color,title:"Breakdown"}))})]}),i.jsx($t,{statuses:N,title:"Inspection Approvals"})]})}const _i=()=>{var Z;const{allAlerts:e,loading:t}=W(f=>f.geofence),{vehicleList:r}=W(f=>f.liveMap),n=fe(),[o,s]=x.useState(0),[a,u]=x.useState(10),[c,l]=x.useState([]),[h,v]=x.useState(""),[g,P]=x.useState(""),[j,p]=x.useState(!1);x.useEffect(()=>{console.log("allalert",e.filter(f=>f._id==="67fde2c226ec73328f071edd"))},[e]),x.useEffect(()=>{console.log("vehicleList",r)},[r]);let k=f=>r.find(F=>{var H;return((H=F==null?void 0:F.imei[0])==null?void 0:H.mac_id)==f||""});const S=(f,F)=>s(F),w=f=>{u(parseInt(f.target.value,10)),s(0)},R=f=>{l(F=>F.includes(f)?F.filter(H=>H!==f):[...F,f])},L=f=>c.includes(f),_=f=>{if(f.target.checked){const F=A==null?void 0:A.map(H=>H._id);l(F)}else l([])},d=()=>{console.log("vhehicle list",Y);let f={imeiList:Y,startDate:be(new Date).format("MM-DD-YYYY"),endDate:be(new Date).format("MM-DD-YYYY")};n(Bt(f))},T=async()=>{try{if(c.length===0)return;const f=await n(mt({ids:c}));mt.fulfilled.match(f)?(l([]),d()):console.error("Delete failed:",f==null?void 0:f.payload)}catch(f){console.error("Delete error:",f)}},A=(Z=e==null?void 0:e.filter(f=>h?f.type===h:!0))==null?void 0:Z.filter(f=>g?f.imei===g:!0),N=[...new Set(e==null?void 0:e.map(f=>f.type))],Y=[...new Set(e==null?void 0:e.map(f=>f.imei))];return i.jsxs(D,{children:[t&&i.jsx(kr,{}),i.jsxs(Re,{container:!0,spacing:2,sx:{mb:2},children:[i.jsx(Re,{item:!0,xs:6,md:3,children:i.jsxs(bt,{fullWidth:!0,children:[i.jsx(jt,{children:"Alert Type"}),i.jsxs(kt,{value:h,label:"Alert Type",onChange:f=>{v(f.target.value),s(0)},children:[i.jsx(Ie,{value:"",children:"All"}),N.map(f=>i.jsx(Ie,{value:f,children:f},f))]})]})}),i.jsx(Re,{item:!0,xs:6,md:3,children:i.jsxs(bt,{fullWidth:!0,children:[i.jsx(jt,{children:"Vehicle"}),i.jsxs(kt,{value:g,label:"Vehicle",onChange:f=>{P(f.target.value),s(0)},children:[i.jsx(Ie,{value:"",children:"All"}),Y.map(f=>{var F;return i.jsx(Ie,{value:f,children:(F=k(f))==null?void 0:F.registration_id},f)})]})]})}),i.jsx(Re,{item:!0,xs:12,md:3,display:"flex",alignItems:"center",children:i.jsx(re,{variant:"contained",color:"error",disabled:c.length===0,onClick:()=>p(!0),children:"Delete Selected"})})]}),i.jsxs(Qt,{component:rn,sx:{maxHeight:700},children:[i.jsxs(en,{stickyHeader:!0,children:[i.jsx(tn,{children:i.jsxs(Ne,{children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Me,{checked:A.length>0&&c.length===A.length,indeterminate:c.length>0&&c.length<A.length,onChange:_})}),i.jsx(B,{children:"Sr no"}),i.jsx(B,{children:"Vehicle"}),i.jsx(B,{children:"Alert type"}),i.jsx(B,{children:"Message"}),i.jsx(B,{children:"Created Time"})]})}),i.jsx(nn,{children:A==null?void 0:A.slice(o*a,o*a+a).map((f,F)=>i.jsxs(Ne,{hover:!0,selected:L(f._id),onClick:()=>R(f._id),sx:{cursor:"pointer"},children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Me,{checked:L(f._id)})}),i.jsx(B,{children:o*a+F+1}),i.jsx(B,{children:k(f==null?void 0:f.imei).registration_id}),i.jsx(B,{children:f==null?void 0:f.type}),i.jsx(B,{children:f==null?void 0:f.msg}),i.jsx(B,{children:be(new Date(f==null?void 0:f.createdAt)).format("DD-MM-YYYY HH:mm")})]},f==null?void 0:f._id))})]}),i.jsx(on,{rowsPerPageOptions:[12],component:"div",count:A.length,rowsPerPage:a,page:o,onPageChange:S,onRowsPerPageChange:w})]}),i.jsx(dt,{open:j,onClose:()=>p(!1),children:i.jsxs(D,{p:3,children:[i.jsx(q,{variant:"h6",children:"Confirm Deletion"}),i.jsxs(q,{sx:{my:2},children:["Are you sure you want to delete ",c.length," selected notifications?"]}),i.jsxs(D,{display:"flex",justifyContent:"flex-end",gap:2,children:[i.jsx(re,{onClick:()=>p(!1),variant:"outlined",children:"Cancel"}),i.jsx(re,{onClick:async()=>{await T(),p(!1)},color:"error",variant:"contained",children:"Confirm Delete"})]})]})})]})},Ri=()=>{const{allNotification:e}=W(d=>d.geofence),t=fe(),r=lt(),[n,o]=x.useState(0),[s,a]=x.useState(10),[u,c]=x.useState([]),[l,h]=x.useState(!1),[v,g]=x.useState(!1),P=(d,T)=>o(T),j=d=>{a(parseInt(d.target.value,10)),o(0)},p=d=>{c(T=>T.includes(d)?T.filter(A=>A!==d):[...T,d])},k=d=>u.includes(d),S=e||[],w=S.slice(n*s,n*s+s),R=d=>{const T=d.target.checked;if(h(T),T){const A=S.map(N=>N.id);c(A)}else c([])},L=async()=>{try{console.log("Deleting rows:",u);const d=await t(gt({ids:u}));gt.fulfilled.match(d)?(c([]),t(Yt())):console.error("Delete failed:",d==null?void 0:d.payload),g(!1)}catch(d){console.error("Delete failed:",d)}},_=d=>{console.log("row",d),t(ue((d==null?void 0:d.record_id)||""));let T={id:d==null?void 0:d.id,status:"Seen"};switch(t(On(T)),d==null?void 0:d.goes_to){case"BI":t(xt(0)),r("/inspections");break;case"IB":r("/breakdown?tab=1");break;case"SI":t(xt(1)),r("/inspections");break;case"IS":r("/service?tab=1");break;case"SS":r("/service?tab=0");break;case"BB":r("/breakdown?tab=0");break;default:ae.error("Page location not found");break}};return i.jsxs(D,{children:[i.jsx(Sr,{sx:{justifyContent:"flex-end"},children:i.jsx(re,{color:"error",variant:"contained",disabled:u.length===0,onClick:()=>g(!0),children:"Delete Selected"})}),i.jsxs(Qt,{component:rn,sx:{maxHeight:500},children:[i.jsxs(en,{stickyHeader:!0,children:[i.jsx(tn,{children:i.jsxs(Ne,{children:[i.jsx(B,{padding:"checkbox",children:i.jsx(Me,{checked:l,indeterminate:u.length>0&&u.length<w.length,onChange:R})}),i.jsx(B,{children:"Sr no"}),i.jsx(B,{children:"Inspection Id"}),i.jsx(B,{children:"Message"}),i.jsx(B,{children:"Date Time"})]})}),i.jsx(nn,{children:w.map((d,T)=>i.jsxs(Ne,{hover:!0,selected:k(d.id),sx:{cursor:"pointer"},children:[i.jsx(B,{padding:"checkbox",onClick:()=>p(d.id),children:i.jsx(Me,{checked:k(d.id)})}),i.jsx(B,{children:n*s+T+1}),i.jsx(B,{children:d==null?void 0:d.record_id}),i.jsx(B,{onClick:()=>_(d),sx:{color:d.status==="Seen"?"#7d88c7":"blue",textDecoration:"underline",cursor:"pointer"},title:"View Breakdown",children:d==null?void 0:d.message}),i.jsx(B,{children:be(new Date(d==null?void 0:d.created)).format("DD-MM-YYYY HH:mm")})]},d==null?void 0:d.id))})]}),i.jsx(on,{rowsPerPageOptions:[10],component:"div",count:S.length,rowsPerPage:s,page:n,onPageChange:P,onRowsPerPageChange:j})]}),i.jsxs(dt,{open:v,onClose:()=>g(!1),children:[i.jsx(Ar,{children:"Confirm Deletion"}),i.jsx(sn,{children:i.jsxs(q,{children:["Are you sure you want to delete ",u.length," selected",u.length>1?" items":" item","?"]})}),i.jsxs(an,{children:[i.jsx(re,{onClick:()=>g(!1),children:"Cancel"}),i.jsx(re,{color:"error",onClick:L,children:"Delete"})]})]})]})};function Di({showNotification:e,setShowNotification:t}){fe(),W(s=>s.liveMap);const[r,n]=x.useState("one"),o=(s,a)=>{n(a)};return i.jsx(i.Fragment,{children:i.jsxs(dt,{open:e,onClose:()=>t(!1),fullWidth:!0,maxWidth:"xxl",sx:{"& .MuiDialog-paper":{height:"90vh"}},children:[i.jsx(Jt,{sx:{position:"absolute",right:2,top:8},onClick:()=>t(!1),children:i.jsx(jr,{})}),i.jsxs(sn,{dividers:!0,sx:{minHeight:"100px"},children:["  ",i.jsxs(D,{sx:{width:"100%"},children:[i.jsxs(Pr,{value:r,onChange:o,textColor:"inherit",indicatorColor:"secondary",sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #ccc"},children:[i.jsx(St,{value:"one",label:"Inbox",sx:{color:"black",fontWeight:"bold"}}),i.jsx(St,{value:"two",label:"Alert",sx:{color:"black",fontWeight:"bold"}})]}),i.jsxs(D,{sx:{p:2},children:[r==="one"&&i.jsx(D,{children:i.jsx(Ri,{})}),r==="two"&&i.jsx(D,{children:i.jsx(_i,{})})]})]})]}),i.jsx(an,{children:i.jsx(re,{onClick:()=>t(!1),children:"Close"})})]})})}const ks=()=>{const{w_customer_id:e,collapsed:t}=W(y=>y.auth),{mode:r,selectedTripData:n,selectedVehicleGroup:o,showVehicles:s,vehicleZone:a}=W(y=>y.dashboard),{breakdowns:u}=W(y=>y.breakdown),{inspectionHistory:c}=W(y=>y.inspection),[l,h]=x.useState(()=>{const y=sessionStorage.getItem("imeiNo");return y?JSON.parse(y):[]}),{selectedVehicle:v,vehicleList:g,onlineVehicle:P,locationData:j}=W(y=>y.liveMap),p=fe(),k=Wt(r),[S,w]=x.useState([]),[R,L]=x.useState(!1),[_,d]=x.useState({}),[T,A]=x.useState(!1),[N,Y]=x.useState(!1),[Z,f]=x.useState(!1);x.useEffect(()=>{(async()=>{await H()})(),p(Cn())},[]);const F=y=>{let C=g.find(m=>{var b;return((b=m==null?void 0:m.imei[0])==null?void 0:b.mac_id)==y});return(C==null?void 0:C.registration_id)||y};x.useEffect(()=>{if(c.length>0){let y={open:0,rejected:0,close:0};c.map(C=>{C.status==="Open"&&y.open++,C.status==="Close"&&y.close++,C.status==="Rejected"&&y.rejected++}),p(wn(y))}},[u]),x.useEffect(()=>{if(u.length>0){let y={open:0,overDue:0,close:0};u.map(C=>{if(C.status==="Open"&&y.open++,C.status==="Close"&&y.close++,C.submission_date){const m=new Date(C.submission_date),b=new Date;b.setHours(0,0,0,0),m.setHours(0,0,0,0),m<b&&C.status=="Open"&&y.overDue++}}),p(Tn(y))}},[u]),x.useEffect(()=>{p(_n())},[]),x.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(l))},[l]),x.useEffect(()=>{var y,C,m;Object.keys(v).length===0&&g.length>0&&p(Rn({imei:(C=(y=g[0])==null?void 0:y.imei[0])==null?void 0:C.mac_id,reg_id:(m=g[0])==null?void 0:m.registration_id}))},[v,g]),x.useEffect(()=>{let y=g.map(m=>{var b;return((b=m==null?void 0:m.imei[0])==null?void 0:b.mac_id)||null}).filter(m=>m),C={imeiList:y,startDate:be(new Date).format("MM-DD-YYYY"),endDate:be(new Date).format("MM-DD-YYYY")};y&&y.length>0&&p(Bt(C)),p(Yt())},[g]),x.useEffect(()=>{(async()=>{if(v!=null&&v.imei){const C=Vt(),m=C.startOf("day").format("MM/DD/YYYY HH:mm:ss"),b=C.endOf("day").format("MM/DD/YYYY HH:mm:ss"),E={imei:v.imei,startTime:m,endTime:b};try{p(Dn(E))}catch(O){console.error("Error fetching report:",O)}}})()},[v,p]),x.useEffect(()=>{const y=m=>{(m==null?void 0:m.imei)!==null&&l.find(O=>parseInt(O)===(m==null?void 0:m.imei))&&ae.error(`Type: ${m==null?void 0:m.type} ${m==null?void 0:m.msg} ${F(m==null?void 0:m.imei)}`,{id:"geofence",autoClose:5e3})},C=m=>{(m==null?void 0:m.imei)!==null&&l.find(O=>parseInt(O)===(m==null?void 0:m.imei))&&ae.error(`${m==null?void 0:m.msg} ${F(m==null?void 0:m.imei)}`,{id:"speed",autoClose:5e3})};return Oe.on("geofenceAlert",y),Oe.on("speedAlert",C),()=>{Oe.off("geofenceAlert",y),Oe.off("speedAlert",C)}},[l,Oe]);const H=async()=>{try{let y=[],C=[];const m=await p(In({w_customer_id:e}));if(Array.isArray(m.payload)){m.payload.forEach(O=>{var U,z;Array.isArray(O.imei)&&O.imei.length>0?(y.push({id:O.id,label:O.registration_id,value:(U=O==null?void 0:O.imei[0])==null?void 0:U.mac_id,vehilce_type:O==null?void 0:O.segment,sell_date:O==null?void 0:O.sell_date,workShop:O==null?void 0:O.workshop,vehicle_group:O==null?void 0:O.vehicle_group}),C.push((z=O.imei[0])==null?void 0:z.mac_id),O.registration_id):(console.error("IMEI data not found for item:",O),ae.error(`IMEI Number not found for the vehicle: ${O==null?void 0:O.registration_id}`,{duration:2e3}))}),h(C);const b="one",E=C;C.length>0&&(p(En({type:b,imei:E})),p(Ln(E))),w(y),p(Fn(y)),p($n({w_customer_id:e})),p(Nn(e)),p(Mn({}))}else console.error("Unexpected data format:",m),ae.error("Unexpected data format:")}catch(y){console.error("Error fetching vehicle data:",y),ae.error(`Error fetching vehicle data: ${y}`)}},ee=y=>j==null?void 0:j.some(C=>String(C.latestDocument.imei)===String(y)&&C.latestDocument.speed>0&&(C.latestDocument.ignition===!0||C.latestDocument.ignition===1)),$=y=>j==null?void 0:j.some(C=>String(C.latestDocument.imei)===String(y)&&C.latestDocument.speed<=0&&(C.latestDocument.ignition===!0||C.latestDocument.ignition===1)),V=S.filter(y=>{if(!(Object.keys(o).length===0||y.vehicle_group===o.id))return!1;const m=y.value,b=P.includes(m),E=!P.includes(m),O=P.includes(m)&&ee(m),U=P.includes(m)&&$(m);switch(a){case"Total Vehicles":return!0;case"Online":return b;case"Running":return O;case"Offline":return E;case"Idling":return U;default:return!0}});return i.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[i.jsx(cr,{}),i.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[i.jsx(lr,{title:"Dashboard",setShowNotification:L,showNotification:R,setShowVehiclesGroup:A,showVehiclesGroup:T}),i.jsx(br,{setShowVehiclesGroup:A,showVehiclesGroup:T}),i.jsxs(D,{sx:{height:"92vh",backgroundColor:k.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[s&&i.jsx(D,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:k.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:i.jsx(Bn,{vehicleData:V,showVehicles:s})}),i.jsx(Le,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),i.jsxs(D,{sx:{display:"flex",gap:"30px",background:et.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[i.jsxs(D,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[R&&i.jsx(Di,{showNotification:R,setShowNotification:L}),"              ",i.jsx(Pi,{}),i.jsx(D,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:i.jsx(Ai,{setLoading:Y})})]}),i.jsx(D,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:i.jsx(Ti,{vehicleReport:_,imeiNo:l,loading:N,isloadingReport:Z})})]})]})]})]})};export{ks as default};
