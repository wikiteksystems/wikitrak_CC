import{c as Gt,s as Wt,_ as G,h as rt,r as Be,a as zt,d as Kt,m as Ut,b as x,e as Yt,f as Ee,j as s,g as re,u as Ht,i as nt,k as Ie,l as Le,n as qt,o as Xe,p as ne,q as $e,t as Xt,v as St,T as q,R as D,w as Ze,x as ke,y as V,B as we,z as Ce,A as At,C as wt,D as Zt,E as ot,I as Jt,F as Se,G as it,H as Qt,J as oe,K as Pt,L as er,M as de,N as Ge,O as tr,P as rr,Q as nr,S as or,U as ir,V as ar,W as sr,X as lr,Y as cr,Z as ur,$ as dr,a0 as fr,a1 as pr,a2 as hr}from"./index-jaVnQRPi.js";import{s as ye}from"./Socket-0N_gnJcr.js";import{S as gr,R as mr,t as Je}from"./SearchTab-CYCs8w-e.js";import{d as fe}from"./dayjs.min-B7H9YK_U.js";import{u as Ot,f as Tt,B as C,C as yr,I as vr}from"./menu2-OL55J3AA.js";import{T as xe}from"./index-NDoB9TXL.js";import{f as B,_ as Ct,a as _t,b as xr,c as br,i as se,T as Qe,p as X,L as H,d as et,e as Rt,D as jr,G as kr,u as Sr,C as Ar,g as pe,h as ie,S as wr,A as Pr,j as Or,k as at,l as Tr,m as le,n as Cr,o as _r,q as Dt,r as Rr,s as Ae,w as st,t as Pe,v as Dr,x as Er,R as Et,B as Ir,y as Lr,X as $r,Y as Fr,z as It,E as Nr,F as Mr}from"./TopBar-9tgy7Cpa.js";import{G as Vr}from"./GeofencAlert-D30I1_nU.js";import"./proj-XQwXs9DQ.js";import{d as Br,L as Gr}from"./LeftSideBar2-tdXzoJb4.js";import{u as Wr,G as zr,M as Kr}from"./esm-CmsKZHcR.js";import{f as Ur}from"./TripMap-BJGFdQnx.js";import{S as Yr}from"./Switch-Cxahyxs-.js";import{V as Hr}from"./VehicleGroups-BnEr0XnM.js";import"./useControlled-CZJjk3CB.js";import"./index-CMh9XWeg.js";import"./NotificationsNone-CIWv_-B2.js";import"./createSvgIcon-DpjpuhMU.js";import"./Close-Dd79NdZ_.js";import"./preet_tractor-CDwt_mVh.js";import"./TripVehicleInfo-Dp_1B89Z.js";import"./Info-Cb8d1Bmu.js";const qr=["component","direction","spacing","divider","children","className","useFlexGap"],Xr=Gt(),Zr=Wt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Jr(e){return Ht({props:e,name:"MuiStack",defaultTheme:Xr})}function Qr(e,t){const n=x.Children.toArray(e).filter(Boolean);return n.reduce((r,o,i)=>(r.push(o),i<n.length-1&&r.push(x.cloneElement(t,{key:`separator-${i}`})),r),[])}const en=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],tn=({ownerState:e,theme:t})=>{let n=G({display:"flex",flexDirection:"column"},rt({theme:t},Be({values:e.direction,breakpoints:t.breakpoints.values}),r=>({flexDirection:r})));if(e.spacing){const r=zt(t),o=Object.keys(t.breakpoints.values).reduce((l,u)=>((typeof e.spacing=="object"&&e.spacing[u]!=null||typeof e.direction=="object"&&e.direction[u]!=null)&&(l[u]=!0),l),{}),i=Be({values:e.direction,base:o}),a=Be({values:e.spacing,base:o});typeof i=="object"&&Object.keys(i).forEach((l,u,p)=>{if(!i[l]){const v=u>0?i[p[u-1]]:"column";i[l]=v}}),n=Kt(n,rt({theme:t},a,(l,u)=>e.useFlexGap?{gap:nt(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${en(u?i[u]:e.direction)}`]:nt(r,l)}}))}return n=Ut(t.breakpoints,n),n};function rn(e={}){const{createStyledComponent:t=Zr,useThemeProps:n=Jr,componentName:r="MuiStack"}=e,o=()=>Ie({root:["root"]},l=>Le(r,l),{}),i=t(tn);return x.forwardRef(function(l,u){const p=n(l),y=Yt(p),{component:v="div",direction:A="column",spacing:m=0,divider:f,children:b,className:k,useFlexGap:T=!1}=y,E=Ee(y,qr),j={direction:A,spacing:m,useFlexGap:T},P=o();return s.jsx(i,G({as:v,ownerState:j,ref:u,className:re(P.root,k)},E,{children:f?Qr(b,f):b}))})}const nn=qt(s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function on(e){return Le("MuiAvatar",e)}Xe("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const an=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],sn=e=>{const{classes:t,variant:n,colorDefault:r}=e;return Ie({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},on,t)},ln=ne("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:G({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:G({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),cn=ne("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),un=ne(nn,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function dn({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[o,i]=x.useState(!1);return x.useEffect(()=>{if(!n&&!r)return;i(!1);let a=!0;const c=new Image;return c.onload=()=>{a&&i("loaded")},c.onerror=()=>{a&&i("error")},c.crossOrigin=e,c.referrerPolicy=t,c.src=n,r&&(c.srcset=r),()=>{a=!1}},[e,t,n,r]),o}const fn=x.forwardRef(function(t,n){const r=$e({props:t,name:"MuiAvatar"}),{alt:o,children:i,className:a,component:c="div",slots:l={},slotProps:u={},imgProps:p,sizes:y,src:v,srcSet:A,variant:m="circular"}=r,f=Ee(r,an);let b=null;const k=dn(G({},p,{src:v,srcSet:A})),T=v||A,E=T&&k!=="error",j=G({},r,{colorDefault:!E,component:c,variant:m}),P=sn(j),[S,I]=Xt("img",{className:P.img,elementType:cn,externalForwardedProps:{slots:l,slotProps:{img:G({},p,u.img)}},additionalProps:{alt:o,src:v,srcSet:A,sizes:y},ownerState:j});return E?b=s.jsx(S,G({},I)):i||i===0?b=i:T&&o?b=o[0]:b=s.jsx(un,{ownerState:j,className:P.fallback}),s.jsx(ln,G({as:c,ownerState:j,className:re(P.root,a),ref:n},f,{children:b}))}),Lt=fn,pn=rn({createStyledComponent:ne("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>$e({props:e,name:"MuiStack"})}),hn=pn;function gn(e){return Le("MuiFormControlLabel",e)}const mn=Xe("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ve=mn,yn=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],vn=e=>{const{classes:t,disabled:n,labelPlacement:r,error:o,required:i}=e,a={root:["root",n&&"disabled",`labelPlacement${St(r)}`,o&&"error",i&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return Ie(a,gn,t)},xn=ne("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ve.label}`]:t.label},t.root,t[`labelPlacement${St(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>G({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${ve.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${ve.label}`]:{[`&.${ve.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),bn=ne("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${ve.error}`]:{color:(e.vars||e).palette.error.main}})),jn=x.forwardRef(function(t,n){var r,o;const i=$e({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:c={},control:l,disabled:u,disableTypography:p,label:y,labelPlacement:v="end",required:A,slotProps:m={}}=i,f=Ee(i,yn),b=Ot(),k=(r=u??l.props.disabled)!=null?r:b==null?void 0:b.disabled,T=A??l.props.required,E={disabled:k,required:T};["checked","name","onChange","value","inputRef"].forEach($=>{typeof l.props[$]>"u"&&typeof i[$]<"u"&&(E[$]=i[$])});const j=Tt({props:i,muiFormControl:b,states:["error"]}),P=G({},i,{disabled:k,labelPlacement:v,required:T,error:j.error}),S=vn(P),I=(o=m.typography)!=null?o:c.typography;let R=y;return R!=null&&R.type!==q&&!p&&(R=s.jsx(q,G({component:"span"},I,{className:re(S.label,I==null?void 0:I.className),children:R}))),s.jsxs(xn,G({className:re(S.root,a),ownerState:P,ref:n},f,{children:[x.cloneElement(l,E),T?s.jsxs(hn,{display:"block",children:[R,s.jsxs(bn,{ownerState:P,"aria-hidden":!0,className:S.asterisk,children:["â€‰","*"]})]}):R]}))}),kn=jn;function Sn(e){return Le("MuiFormGroup",e)}Xe("MuiFormGroup",["root","row","error"]);const An=["className","row"],wn=e=>{const{classes:t,row:n,error:r}=e;return Ie({root:["root",n&&"row",r&&"error"]},Sn,t)},Pn=ne("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>G({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),On=x.forwardRef(function(t,n){const r=$e({props:t,name:"MuiFormGroup"}),{className:o,row:i=!1}=r,a=Ee(r,An),c=Ot(),l=Tt({props:r,muiFormControl:c,states:["error"]}),u=G({},r,{row:i,error:l.error}),p=wn(u);return s.jsx(Pn,G({className:re(p.root,o),ownerState:u,ref:n},a))}),Tn=On;var Cn=["points","className","baseLinePoints","connectNulls"];function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}function _n(e,t){if(e==null)return{};var n=Rn(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rn(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function lt(e){return Ln(e)||In(e)||En(e)||Dn()}function Dn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function En(e,t){if(e){if(typeof e=="string")return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}}function In(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ln(e){if(Array.isArray(e))return Ke(e)}function Ke(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=function(t){return t&&t.x===+t.x&&t.y===+t.y},$n=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){ct(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),ct(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},be=function(t,n){var r=$n(t);n&&(r=[r.reduce(function(i,a){return[].concat(lt(i),lt(a))},[])]);var o=r.map(function(i){return i.reduce(function(a,c,l){return"".concat(a).concat(l===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(o,"Z"):o},Fn=function(t,n,r){var o=be(t,r);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(be(n.reverse(),r).slice(1))},Nn=function(t){var n=t.points,r=t.className,o=t.baseLinePoints,i=t.connectNulls,a=_n(t,Cn);if(!n||!n.length)return null;var c=re("recharts-polygon",r);if(o&&o.length){var l=a.stroke&&a.stroke!=="none",u=Fn(n,o,i);return D.createElement("g",{className:c},D.createElement("path",ce({},B(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),l?D.createElement("path",ce({},B(a,!0),{fill:"none",d:be(n,i)})):null,l?D.createElement("path",ce({},B(a,!0),{fill:"none",d:be(o,i)})):null)}var p=be(n,i);return D.createElement("path",ce({},B(a,!0),{fill:p.slice(-1)==="Z"?a.fill:"none",className:c,d:p}))},Mn=Ct,Vn=xr,Bn=_t;function Gn(e,t){return e&&e.length?Mn(e,Bn(t),Vn):void 0}var Wn=Gn;const zn=Ze(Wn);var Kn=Ct,Un=_t,Yn=br;function Hn(e,t){return e&&e.length?Kn(e,Un(t),Yn):void 0}var qn=Hn;const Xn=Ze(qn);var Zn=["cx","cy","angle","ticks","axisLine"],Jn=["ticks","tick","angle","tickFormatter","stroke"];function he(e){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(e)}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ut(Object(n),!0).forEach(function(r){Fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dt(e,t){if(e==null)return{};var n=Qn(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qn(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ft(r.key),r)}}function to(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ro(e,t,n){return t=_e(t),no(e,$t()?Reflect.construct(t,n||[],_e(e).constructor):t.apply(e,n))}function no(e,t){if(t&&(he(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oo(e)}function oo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($t=function(){return!!e})()}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_e(e)}function io(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Ue(e,t)}function Fe(e,t,n){return t=Ft(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e){var t=ao(e,"string");return he(t)=="symbol"?t:String(t)}function ao(e,t){if(he(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(he(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ne=function(e){io(t,e);function t(){return eo(this,t),ro(this,t,arguments)}return to(t,[{key:"getTickValueCoord",value:function(r){var o=r.coordinate,i=this.props,a=i.angle,c=i.cx,l=i.cy;return X(c,l,o,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,o;switch(r){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var r=this.props,o=r.cx,i=r.cy,a=r.angle,c=r.ticks,l=zn(c,function(p){return p.coordinate||0}),u=Xn(c,function(p){return p.coordinate||0});return{cx:o,cy:i,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.cx,i=r.cy,a=r.angle,c=r.ticks,l=r.axisLine,u=dt(r,Zn),p=c.reduce(function(m,f){return[Math.min(m[0],f.coordinate),Math.max(m[1],f.coordinate)]},[1/0,-1/0]),y=X(o,i,p[0],a),v=X(o,i,p[1],a),A=Q(Q(Q({},B(u,!1)),{},{fill:"none"},B(l,!1)),{},{x1:y.x,y1:y.y,x2:v.x,y2:v.y});return D.createElement("line",je({className:"recharts-polar-radius-axis-line"},A))}},{key:"renderTicks",value:function(){var r=this,o=this.props,i=o.ticks,a=o.tick,c=o.angle,l=o.tickFormatter,u=o.stroke,p=dt(o,Jn),y=this.getTickTextAnchor(),v=B(p,!1),A=B(a,!1),m=i.map(function(f,b){var k=r.getTickValueCoord(f),T=Q(Q(Q(Q({textAnchor:y,transform:"rotate(".concat(90-c,", ").concat(k.x,", ").concat(k.y,")")},v),{},{stroke:"none",fill:u},A),{},{index:b},k),{},{payload:f});return D.createElement(H,je({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(f.coordinate)},et(r.props,f,b)),t.renderTickItem(a,T,l?l(f.value,b):f.value))});return D.createElement(H,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,o=r.ticks,i=r.axisLine,a=r.tick;return!o||!o.length?null:D.createElement(H,{className:"recharts-polar-radius-axis"},i&&this.renderAxisLine(),a&&this.renderTicks(),Rt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,o,i){var a;return D.isValidElement(r)?a=D.cloneElement(r,o):se(r)?a=r(o):a=D.createElement(Qe,je({},o,{className:"recharts-polar-radius-axis-tick-value"}),i),a}}]),t}(x.PureComponent);Fe(Ne,"displayName","PolarRadiusAxis");Fe(Ne,"axisType","radiusAxis");Fe(Ne,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ge(e){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(e)}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pt(Object(n),!0).forEach(function(r){Me(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function so(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mt(r.key),r)}}function lo(e,t,n){return t&&ht(e.prototype,t),n&&ht(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function co(e,t,n){return t=Re(t),uo(e,Nt()?Reflect.construct(t,n||[],Re(e).constructor):t.apply(e,n))}function uo(e,t){if(t&&(ge(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fo(e)}function fo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nt=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Re(e)}function po(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Ye(e,t)}function Me(e,t,n){return t=Mt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e){var t=ho(e,"string");return ge(t)=="symbol"?t:String(t)}function ho(e,t){if(ge(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ge(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var go=Math.PI/180,gt=1e-5,Ve=function(e){po(t,e);function t(){return so(this,t),co(this,t,arguments)}return lo(t,[{key:"getTickLineCoord",value:function(r){var o=this.props,i=o.cx,a=o.cy,c=o.radius,l=o.orientation,u=o.tickSize,p=u||8,y=X(i,a,c,r.coordinate),v=X(i,a,c+(l==="inner"?-1:1)*p,r.coordinate);return{x1:y.x,y1:y.y,x2:v.x,y2:v.y}}},{key:"getTickTextAnchor",value:function(r){var o=this.props.orientation,i=Math.cos(-r.coordinate*go),a;return i>gt?a=o==="outer"?"start":"end":i<-gt?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.cx,i=r.cy,a=r.radius,c=r.axisLine,l=r.axisLineType,u=ee(ee({},B(this.props,!1)),{},{fill:"none"},B(c,!1));if(l==="circle")return D.createElement(jr,te({className:"recharts-polar-angle-axis-line"},u,{cx:o,cy:i,r:a}));var p=this.props.ticks,y=p.map(function(v){return X(o,i,a,v.coordinate)});return D.createElement(Nn,te({className:"recharts-polar-angle-axis-line"},u,{points:y}))}},{key:"renderTicks",value:function(){var r=this,o=this.props,i=o.ticks,a=o.tick,c=o.tickLine,l=o.tickFormatter,u=o.stroke,p=B(this.props,!1),y=B(a,!1),v=ee(ee({},p),{},{fill:"none"},B(c,!1)),A=i.map(function(m,f){var b=r.getTickLineCoord(m),k=r.getTickTextAnchor(m),T=ee(ee(ee({textAnchor:k},p),{},{stroke:"none",fill:u},y),{},{index:f,payload:m,x:b.x2,y:b.y2});return D.createElement(H,te({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(m.coordinate)},et(r.props,m,f)),c&&D.createElement("line",te({className:"recharts-polar-angle-axis-tick-line"},v,b)),a&&t.renderTickItem(a,T,l?l(m.value,f):m.value))});return D.createElement(H,{className:"recharts-polar-angle-axis-ticks"},A)}},{key:"render",value:function(){var r=this.props,o=r.ticks,i=r.radius,a=r.axisLine;return i<=0||!o||!o.length?null:D.createElement(H,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,o,i){var a;return D.isValidElement(r)?a=D.cloneElement(r,o):se(r)?a=r(o):a=D.createElement(Qe,te({},o,{className:"recharts-polar-angle-axis-tick-value"}),i),a}}]),t}(x.PureComponent);Me(Ve,"displayName","PolarAngleAxis");Me(Ve,"axisType","angleAxis");Me(Ve,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Oe;function me(e){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(e)}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mt(Object(n),!0).forEach(function(r){U(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bt(r.key),r)}}function yo(e,t,n){return t&&yt(e.prototype,t),n&&yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vo(e,t,n){return t=De(t),xo(e,Vt()?Reflect.construct(t,n||[],De(e).constructor):t.apply(e,n))}function xo(e,t){if(t&&(me(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function Vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vt=function(){return!!e})()}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},De(e)}function ae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},He(e,t)}function U(e,t,n){return t=Bt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){var t=jo(e,"string");return me(t)=="symbol"?t:String(t)}function jo(e,t){if(me(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(me(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z=function(e){bo(t,e);function t(n){var r;return mo(this,t),r=vo(this,t,[n]),U(ae(r),"pieRef",null),U(ae(r),"sectorRefs",[]),U(ae(r),"id",Sr("recharts-pie-")),U(ae(r),"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),se(o)&&o()}),U(ae(r),"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),se(o)&&o()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return yo(t,[{key:"isActiveIndex",value:function(r){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(r)!==-1:r===o}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.label,c=i.labelLine,l=i.dataKey,u=i.valueKey,p=B(this.props,!1),y=B(a,!1),v=B(c,!1),A=a&&a.offsetRadius||20,m=r.map(function(f,b){var k=(f.startAngle+f.endAngle)/2,T=X(f.cx,f.cy,f.outerRadius+A,k),E=F(F(F(F({},p),f),{},{stroke:"none"},y),{},{index:b,textAnchor:t.getTextAnchor(T.x,f.cx)},T),j=F(F(F(F({},p),f),{},{fill:"none",stroke:f.fill},v),{},{index:b,points:[X(f.cx,f.cy,f.outerRadius,k),T],key:"line"}),P=l;return pe(l)&&pe(u)?P="value":pe(l)&&(P=u),D.createElement(H,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(b)},c&&t.renderLabelLineItem(c,j),t.renderLabelItem(a,E,ie(f,P)))});return D.createElement(H,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var o=this,i=this.props,a=i.activeShape,c=i.blendStroke,l=i.inactiveShape;return r.map(function(u,p){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var y=o.isActiveIndex(p),v=l&&o.hasActiveIndex()?l:null,A=y?a:v,m=F(F({},u),{},{stroke:c?u.fill:u.stroke,tabIndex:-1});return D.createElement(H,ue({ref:function(b){b&&!o.sectorRefs.includes(b)&&o.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},et(o.props,u,p),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(p)}),D.createElement(wr,ue({option:A,isActive:y,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,o=this.props,i=o.sectors,a=o.isAnimationActive,c=o.animationBegin,l=o.animationDuration,u=o.animationEasing,p=o.animationId,y=this.state,v=y.prevSectors,A=y.prevIsAnimationActive;return D.createElement(Pr,{begin:c,duration:l,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(p,"-").concat(A),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var f=m.t,b=[],k=i&&i[0],T=k.startAngle;return i.forEach(function(E,j){var P=v&&v[j],S=j>0?Or(E,"paddingAngle",0):0;if(P){var I=at(P.endAngle-P.startAngle,E.endAngle-E.startAngle),R=F(F({},E),{},{startAngle:T+S,endAngle:T+I(f)+S});b.push(R),T=R.endAngle}else{var $=E.endAngle,M=E.startAngle,Y=at(0,$-M),K=Y(f),z=F(F({},E),{},{startAngle:T+S,endAngle:T+K+S});b.push(z),T=z.endAngle}}),D.createElement(H,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var o=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var c=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[c].focus(),o.setState({sectorToFocus:c});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,o=r.sectors,i=r.isAnimationActive,a=this.state.prevSectors;return i&&o&&o.length&&(!a||!Tr(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,o=this.props,i=o.hide,a=o.sectors,c=o.className,l=o.label,u=o.cx,p=o.cy,y=o.innerRadius,v=o.outerRadius,A=o.isAnimationActive,m=this.state.isAnimationFinished;if(i||!a||!a.length||!le(u)||!le(p)||!le(y)||!le(v))return null;var f=re("recharts-pie",c);return D.createElement(H,{tabIndex:this.props.rootTabIndex,className:f,ref:function(k){r.pieRef=k}},this.renderSectors(),l&&this.renderLabels(a),Rt.renderCallByParent(this.props,null,!1),(!A||m)&&Cr.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return o.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:r.sectors!==o.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,o){return r>o?"start":r<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,o){return D.isValidElement(r)?D.cloneElement(r,o):se(r)?r(o):D.createElement(Ar,ue({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(r,o,i){if(D.isValidElement(r))return D.cloneElement(r,o);var a=i;return se(r)&&(a=r(o),D.isValidElement(a))?a:D.createElement(Qe,ue({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(x.PureComponent);Oe=Z;U(Z,"displayName","Pie");U(Z,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!kr.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});U(Z,"parseDeltaAngle",function(e,t){var n=Pe(t-e),r=Math.min(Math.abs(t-e),360);return n*r});U(Z,"getRealPieData",function(e){var t=e.props,n=t.data,r=t.children,o=B(e.props,!1),i=_r(r,Dt);return n&&n.length?n.map(function(a,c){return F(F(F({payload:a},o),a),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(a){return F(F({},o),a.props)}):[]});U(Z,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,o=t.width,i=t.height,a=Rr(o,i),c=r+Ae(e.props.cx,o,o/2),l=n+Ae(e.props.cy,i,i/2),u=Ae(e.props.innerRadius,a,0),p=Ae(e.props.outerRadius,a,a*.8),y=e.props.maxRadius||Math.sqrt(o*o+i*i)/2;return{cx:c,cy:l,innerRadius:u,outerRadius:p,maxRadius:y}});U(Z,"getComposedData",function(e){var t=e.item,n=e.offset,r=Oe.getRealPieData(t);if(!r||!r.length)return null;var o=t.props,i=o.cornerRadius,a=o.startAngle,c=o.endAngle,l=o.paddingAngle,u=o.dataKey,p=o.nameKey,y=o.valueKey,v=o.tooltipType,A=Math.abs(t.props.minAngle),m=Oe.parseCoordinateOfPie(t,n),f=Oe.parseDeltaAngle(a,c),b=Math.abs(f),k=u;pe(u)&&pe(y)?(st(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k="value"):pe(u)&&(st(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k=y);var T=r.filter(function(R){return ie(R,k,0)!==0}).length,E=(b>=360?T:T-1)*l,j=b-T*A-E,P=r.reduce(function(R,$){var M=ie($,k,0);return R+(le(M)?M:0)},0),S;if(P>0){var I;S=r.map(function(R,$){var M=ie(R,k,0),Y=ie(R,p,$),K=(le(M)?M:0)/P,z;$?z=I.endAngle+Pe(f)*l*(M!==0?1:0):z=a;var w=z+Pe(f)*((M!==0?A:0)+K*j),N=(z+w)/2,_=(m.innerRadius+m.outerRadius)/2,d=[{name:Y,value:M,payload:R,dataKey:k,type:v}],h=X(m.cx,m.cy,_,N);return I=F(F(F({percent:K,cornerRadius:i,name:Y,tooltipPayload:d,midAngle:N,middleRadius:_,tooltipPosition:h},R),m),{},{value:ie(R,k),startAngle:z,endAngle:w,payload:R,paddingAngle:Pe(f)*l}),I})}return F(F({},m),{},{sectors:S,data:r})});var ko=Dr({chartName:"PieChart",GraphicalChild:Z,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ve},{axisType:"radiusAxis",AxisComp:Ne}],formatAxisMap:Er,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const So=({vehicleData:e})=>{const t=["Engine RPM","Engine coolant temperature","Battery Potential"],n=ke(),{selectedVehicle:r,loading:o}=V(j=>j.liveMap),{startDate:i,endDate:a,mode:c,selectedVehicleGroup:l,showVehicles:u}=V(j=>j.dashboard),[p,y]=x.useState(""),[v,A]=x.useState(""),m=Je(c),f=x.useRef(null),b=x.useRef(0),k=e.length>0&&e.filter(j=>{var P,S;return((P=j==null?void 0:j.label)==null?void 0:P.toLowerCase().includes(p.toLowerCase()))&&(v===""||((S=j==null?void 0:j.workShop)==null?void 0:S.region)===v)}).sort((j,P)=>j.label.localeCompare(P.label)),T=async j=>{var R;f.current&&(b.current=f.current.scrollTop),n(At(!u)),n(wt({imei:j.value,reg_id:j.label})),j.value,fe().subtract(5,"day"),fe();let P=j.label;const S=await n(Zt({registration_id:P}));let I=[];if(S&&S.payload.length>0&&((R=S.payload)==null||R.map($=>{$.ivn_parameter.length>0&&I.push($.ivn_parameter[0])})),I.length>0){let $=I.filter(M=>t.includes(M.pid_description));n(ot($))}else n(ot([]));setTimeout(()=>{f.current&&(f.current.scrollTop=b.current)},0)};x.useEffect(()=>{f.current&&(f.current.scrollTop=b.current)},[o,k,r]);const E=j=>{console.log("clicked btn region",j),A(j)};return s.jsx(s.Fragment,{children:o?s.jsx("div",{children:s.jsx(C,{sx:{display:"flex",justifyContent:"center",height:"88vh",alignItems:"center"},children:s.jsx(yr,{})})}):s.jsxs("div",{ref:f,style:{overflowY:"auto",height:"90vh"},children:[s.jsx(gr,{searchTerm:p,setSearchedTerm:y}),s.jsx(mr,{region:v,handleRegion:E}),Object.keys(l).length>0&&s.jsx(C,{sx:{align:"center",my:"8px",ml:"20px"},children:s.jsxs(we,{variant:"outlined",sx:{width:"90%",color:m.grey[400],"&:hover":{color:"#DAE0EE"}},children:["VGroup: ",l.group_name]})}),s.jsx(C,{sx:{align:"center",my:"8px",ml:"20px"},children:s.jsxs(we,{variant:"outlined",sx:{width:"90%",color:m.grey[400],"&:hover":{color:"#DAE0EE"}},children:["Total Vehicle: ",k.length]})}),k.length>0?k.map((j,P)=>s.jsx(C,{sx:{align:"center",my:"8px",ml:"20px"},children:s.jsx(we,{variant:"outlined",onClick:()=>T(j),sx:{width:"90%",bgcolor:j.label===r.reg_id?Ce.bgColor:"undefined",color:j.label===r.reg_id?"#DAE0EE":m.grey[400]},children:j.label})},P)):s.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:s.jsxs(xe,{style:{textAlign:"center",color:m.grey[400]},children:["Sorry! No vehicles in"," ",s.jsx("span",{style:{fontWeight:"bold"},children:v})," region"]})})]})})},Ao=({data:e})=>s.jsx(Et,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:s.jsxs(Ir,{data:e,children:[s.jsx(Lr,{strokeDasharray:"3 3"}),s.jsx($r,{dataKey:"name"}),s.jsx(Fr,{}),s.jsx(It,{}),s.jsx(Nr,{dataKey:"value",fill:"#82ca9d"})]})});function wo({searchQuery:e,setSearchQuery:t,map:n}){const r=async o=>{if(o.preventDefault(),e.trim()==="")return;const i={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(n).findPlaceFromQuery(i,(c,l)=>{if(l===window.google.maps.places.PlacesServiceStatus.OK&&c){const u=c[0];n.setCenter(u.geometry.location),n.setZoom(14)}})};return s.jsxs(C,{component:"form",onSubmit:r,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[s.jsx(vr,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),s.jsx(Jt,{type:"submit",sx:{p:1},children:s.jsx(Br,{})})]})}var Po="Expected a function",vt=NaN,Oo="[object Symbol]",To=/^\s+|\s+$/g,Co=/^[-+]0x[0-9a-f]+$/i,_o=/^0b[01]+$/i,Ro=/^0o[0-7]+$/i,Do=parseInt,Eo=typeof Se=="object"&&Se&&Se.Object===Object&&Se,Io=typeof self=="object"&&self&&self.Object===Object&&self,Lo=Eo||Io||Function("return this")(),$o=Object.prototype,Fo=$o.toString,No=Math.max,Mo=Math.min,We=function(){return Lo.Date.now()};function Vo(e,t,n){var r,o,i,a,c,l,u=0,p=!1,y=!1,v=!0;if(typeof e!="function")throw new TypeError(Po);t=xt(t)||0,qe(n)&&(p=!!n.leading,y="maxWait"in n,i=y?No(xt(n.maxWait)||0,t):i,v="trailing"in n?!!n.trailing:v);function A(S){var I=r,R=o;return r=o=void 0,u=S,a=e.apply(R,I),a}function m(S){return u=S,c=setTimeout(k,t),p?A(S):a}function f(S){var I=S-l,R=S-u,$=t-I;return y?Mo($,i-R):$}function b(S){var I=S-l,R=S-u;return l===void 0||I>=t||I<0||y&&R>=i}function k(){var S=We();if(b(S))return T(S);c=setTimeout(k,f(S))}function T(S){return c=void 0,v&&r?A(S):(r=o=void 0,a)}function E(){c!==void 0&&clearTimeout(c),u=0,r=l=o=c=void 0}function j(){return c===void 0?a:T(We())}function P(){var S=We(),I=b(S);if(r=arguments,o=this,l=S,I){if(c===void 0)return m(l);if(y)return c=setTimeout(k,t),A(l)}return c===void 0&&(c=setTimeout(k,t)),a}return P.cancel=E,P.flush=j,P}function qe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Bo(e){return!!e&&typeof e=="object"}function Go(e){return typeof e=="symbol"||Bo(e)&&Fo.call(e)==Oo}function xt(e){if(typeof e=="number")return e;if(Go(e))return vt;if(qe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=qe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(To,"");var n=_o.test(e);return n||Ro.test(e)?Do(e.slice(2),n?2:8):Co.test(e)?vt:+e}var Wo=Vo;const zo=Ze(Wo),Ko=({setLoading:e})=>{const t=ke(),{center:n,selectedParameterList:r,selectedVehicle:o,vehicleList:i,tractorIcon:a,icons:c,locationData:l,ivnPid:u,placesData:p}=V(_=>_.liveMap),{mode:y,AreaCoveredTrips:v}=V(_=>_.dashboard),{isLoaded:A,loadError:m}=Wr({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[f,b]=x.useState(null),[k,T]=x.useState(!0),[E,j]=x.useState(5),[P,S]=x.useState(),[I,R]=x.useState(""),$=x.useRef(null),M=Je(y),Y=x.useCallback(_=>{$.current=_},[]),K=zo(_=>{if(!_||_.length===0)return;const d=10;let h=0;const g=L=>{_.slice(L,L+d).forEach(O=>{var J;((J=O==null?void 0:O.data)==null?void 0:J.length)>0&&(h+=Ur(O==null?void 0:O.data,t))}),L+d<_.length?setTimeout(()=>g(L+d),0):(console.log("calculated acreage: ",h),t(it(h.toFixed(2))),e(!1))};g(0)},300);x.useEffect(()=>(v&&v.length>0?(e(!0),K(v)):(e(!1),t(it(0))),()=>{K.cancel(),e(!1)}),[v,t]),x.useEffect(()=>{if(k)S(l);else{let _=l==null?void 0:l.filter(d=>(d==null?void 0:d._id)===(o==null?void 0:o.imei));S(_)}},[l,o,k]);const z=()=>{if(!k)t(Qt({lat:21,lng:78})),j(4),T(d=>!d);else{const _=l.find(d=>d.latestDocument.imei===o.imei);_?(console.log(_.latestDocument,"getCenter"),_.latestDocument,T(d=>!d)):oe.error("Data is not available for selected vehicle")}};if(x.useEffect(()=>{A&&b(window.google.maps)},[A,l]),m)return"Error loading maps";if(!A)return"Loading maps";const w={height:"100vh",borderRadius:"8px"},N=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return f?s.jsxs("div",{children:[s.jsxs(C,{style:{fontSize:"20px",color:M.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[s.jsx(q,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),s.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(wo,{searchQuery:I,setSearchQuery:R,map:$.current}),s.jsx(Tn,{sx:{marginLeft:0,paddingTop:0,color:M.grey[400]},children:s.jsx(kn,{control:s.jsx(Yr,{checked:k,onChange:z}),label:k?"Group":"Individual"})})]})]}),s.jsx(zr,{mapContainerStyle:w,zoom:E,center:n,onLoad:Y,options:{mapTypeControl:!1,styles:y?N:""},children:P&&P.length>0&&P.map((_,d)=>s.jsx(Kr,{position:{lat:_.latestDocument.lat,lng:_.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},d))})]}):null};function Uo(){const{vehicles_details:e}=V(r=>r.dashboard),[t,n]=x.useState([]);return x.useEffect(()=>{const r=e.reduce((i,a)=>{const c=a.sell_date?fe(a.sell_date):null,l=c&&c.isValid()?c.format("MMM YYYY"):"N/A";return i[l]=(i[l]||0)+1,i},{}),o=Object.keys(r).map(i=>({name:i,value:r[i]}));n(o)},[e]),s.jsxs(C,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[s.jsx(xe,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),s.jsxs(C,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[s.jsx(C,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:s.jsx(xe,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),s.jsx(Ao,{data:t})]}),s.jsx(xe,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const bt=Math.PI/180,Yo=({cx:e,cy:t,midAngle:n,innerRadius:r,outerRadius:o,percent:i,index:a})=>{const c=r+(o-r)*.5,l=e+c*Math.cos(-n*bt),u=t+c*Math.sin(-n*bt);return s.jsx("text",{x:l,y:u,fill:"white",textAnchor:l>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(i*100).toFixed(0)}%`})},Ho=({data:e,COLORS:t})=>{x.useEffect(()=>{console.log("received data to plot in graph",e)},[e]);const n=e.every(r=>r.value===0);return s.jsx(C,{sx:{width:"100%",height:"100%"},children:n?s.jsx(C,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:s.jsx(q,{sx:{textAlign:"center"},children:"No data available to display."})}):s.jsx(Et,{width:"100%",height:"100%",children:s.jsxs(ko,{children:[s.jsx(Z,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:Yo,fill:"#8884d8",dataKey:"value",children:e.map((r,o)=>s.jsx(Dt,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),s.jsx(It,{})]})})})},Te=({title:e})=>s.jsx(q,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),ze=({label:e,count:t,color:n,type:r,title:o})=>{let i=ke(),{vehicleZone:a}=V(u=>u.dashboard),c=Pt();const l=(u,p)=>{if(u==="Vehicle Status")console.log("Vehicle label: ",p),i(er(p)),i(At(!0));else if(u==="Breakdown"){switch(console.log("breakdown label: ",p),p){case"Open":i(de("Open"));break;case"Overdue":i(de("overdue"));break;case"Closed":i(de("Close"));break}c("/breakdown")}};return s.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[s.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(C,{sx:{width:"12px",height:"12px",bgcolor:n,borderRadius:"50%",marginRight:"8px"}}),s.jsx(we,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{l(o,e)},children:e})]}),s.jsx(C,{sx:{display:"flex",gap:"25px"},children:r==="assignVehicle"?s.jsx(q,{color:n,children:t}):s.jsx(Lt,{sx:{bgcolor:n,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},qo=({data:e,colors:t})=>{const{loading:n,isDriverBehaviorLoading:r}=V(o=>o.dashboard);return s.jsxs(C,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[s.jsxs(C,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[s.jsx(q,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),s.jsx(C,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,i)=>s.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[s.jsx(q,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),s.jsx(Lt,{sx:{bgcolor:t[i],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},i))})]}),s.jsx(C,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:r?s.jsx(q,{sx:{fontSize:"14px"},children:"Loading..."}):s.jsx(Ho,{data:e,COLORS:t})})]})},jt=({statuses:e,title:t})=>{let n=ke(),r=Pt();const o=i=>{if(t==="Inspection Approvals"){switch(console.log("status: ",i),i.label){case"Rejected":n(de("Rejected"));break;case"Pending":n(de("Open"));break;case"Approved":n(de("Close"));break}r("/inspections")}else if(t==="Service Remainder"){switch(i.label){case"Overdue":n(Ge("Overdue"));break;case"Due soon":n(Ge("Due soon"));break;case"Serviced":n(Ge("Serviced"));break}r("/service")}};return s.jsxs(C,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Te,{title:t}),s.jsx(C,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((i,a)=>s.jsxs(C,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(i)},children:[s.jsx(q,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:i.color,margin:"30px 0"},"aria-label":"color",children:i.count}),s.jsx(q,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:i.label})]},a))})]})},kt={total:0,online:0,offline:0,running:0};function Xo({vehicleReport:e,imeiNo:t,loading:n,isloadingReport:r}){const{vehicleList:o,onlineVehicle:i,locationData:a}=V(w=>w.liveMap),{isDriverBehaviorLoading:c}=V(w=>w.dashboard),{breakdownStatusCount:l}=V(w=>w.breakdown),{inspectionStatusCount:u}=V(w=>w.inspection),{report:p,driver_behavior:y,overdueCount:v,completedCount:A,serviceSoonCount:m,selectedVehicleGroup:f,areaCovered:b}=V(w=>w.dashboard),[k,T]=x.useState(0),[E,j]=x.useState(kt);x.useEffect(()=>{if((o==null?void 0:o.length)>0){let w={...kt};if(f){const N=S(f==null?void 0:f.id);console.log("result",N);const _=o.filter(d=>d.vehicle_group===f.id);w.total=_.length,w.online=N.onlineCount,w.running=N.runningCount,w.offline=w.total-w.online}console.log("Updated Vehicle Count:",w),j(w)}console.log("vehicleList",o)},[f]),x.useEffect(()=>{if((o==null?void 0:o.length)>0){let w=0;o==null||o.map(N=>{var _;((_=N==null?void 0:N.imei)==null?void 0:_.length)>0&&w++}),T(w)}},[o]),x.useEffect(()=>{},[v,A,m]);const P=()=>{let w=0,N=0,_=0;return i.length>0&&i.forEach(d=>{t.includes(String(d))&&(w++,a==null||a.forEach(h=>{var g,L;String((g=h==null?void 0:h.latestDocument)==null?void 0:g.imei)===String(d)&&h.latestDocument.speed>0&&(h.latestDocument.ignition===!0||h.latestDocument.ignition===1)&&N++,String((L=h==null?void 0:h.latestDocument)==null?void 0:L.imei)===String(d)&&h.latestDocument.speed<=0&&(h.latestDocument.ignition===!0||h.latestDocument.ignition===1)&&_++}))}),{onlineCount:w,runningCount:N,idelingCount:_}},S=w=>{let N=0,_=0;return i.forEach(d=>{if(t.includes(String(d))){const h=a==null?void 0:a.find(g=>{var L;return String((L=g==null?void 0:g.latestDocument)==null?void 0:L.imei)===String(d)});if(h&&o.some(L=>{var W;return L.vehicle_group===w&&((W=L==null?void 0:L.imei[0])==null?void 0:W.mac_id)===String(d)})){N++;const{speed:L,ignition:W}=h.latestDocument;L>0&&(W===!0||W===1)&&_++}}}),{onlineCount:N,runningCount:_}},I=[{name:"Overspeed O",value:Object.keys(y).length>0?y.overSpeedTime:0},{name:"Economy E",value:Object.keys(y).length>0?y.economyTime:0},{name:"Steady S",value:Object.keys(y).length>0?y.steadyTime:0}],R=["#0088FE","#00C49F","#FFBB28","#FF8042"],$=[{label:"Rejected",count:u.rejected||0,color:"#FF0202"},{label:"Pending",count:u.open||0,color:"black"},{label:"Approved",count:u.close||0,color:"green"}],M=[{label:"Overdue",count:v,color:"#FF0202"},{label:"Due soon",count:m,color:"black"},{label:"Serviced",count:A,color:"green"}],Y=[{name:"Total Vehicles",count:Object.keys(f).length>0?E.total:k,color:"grey"},{name:"Online",count:Object.keys(f).length>0?E.online:P().onlineCount,color:"red"},{name:"Offline",count:Object.keys(f).length>0?E.offline:k-P().onlineCount,color:"grey"},{name:"Running",count:Object.keys(f).length>0?E.running:P().runningCount,color:"green"},{name:"Idling",count:Object.keys(f).length>0?E.online-E.running:P().idelingCount,color:"yellow"}],K=[{name:"Area Covered",count:n?"loading...":`${b} acre`,color:Ce.bgColor},{name:"Distance Covered",count:r?"loading...":e==null?void 0:e.totalDistance,color:"grey"},{name:"Running time",count:r?"loading...":e.totalTime,color:"red"},{name:"Idling Time",count:c?"loading...":Object.keys(y).length>0?`${(y.steadyTime/60).toFixed(0)} min`:0,color:Ce.bgColor}],z=[{name:"Open",count:l.open,color:"grey"},{name:"Overdue",count:l.overDue,color:"red"},{name:"Closed",count:l.close,color:"green"}];return s.jsxs(s.Fragment,{children:[s.jsx(qo,{data:I,colors:R}),s.jsxs(C,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[s.jsx(Te,{title:"Vehicles Status"}),s.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:Y.map((w,N)=>s.jsx(ze,{label:w.name,count:w.count,color:w.color,title:"Vehicle Status"}))})]}),s.jsx(jt,{statuses:M,title:"Service Remainder"}),s.jsxs(C,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Te,{title:"Assigned Vehicles"}),s.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:K.map((w,N)=>s.jsx(ze,{type:"assignVehicle",label:w.name,count:w.count,color:w.color}))})]}),s.jsxs(C,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Te,{title:"Breakdown Resolved"}),s.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:z.map((w,N)=>s.jsx(ze,{label:w.name,count:w.count,color:w.color,title:"Breakdown"}))})]}),s.jsx(jt,{statuses:$,title:"Inspection Approvals"})]})}const xi=()=>{const{w_customer_id:e,collapsed:t}=V(d=>d.auth),{mode:n,selectedTripData:r,selectedVehicleGroup:o,showVehicles:i,vehicleZone:a}=V(d=>d.dashboard),{breakdowns:c}=V(d=>d.breakdown);V(d=>d.inspection);const[l,u]=x.useState(()=>{const d=sessionStorage.getItem("imeiNo");return d?JSON.parse(d):[]}),{selectedVehicle:p,vehicleList:y,onlineVehicle:v,locationData:A}=V(d=>d.liveMap),m=ke(),f=Je(n),[b,k]=x.useState([]),[T,E]=x.useState(!1),[j,P]=x.useState({}),[S,I]=x.useState(!1),[R,$]=x.useState(!1),[M,Y]=x.useState(!1);x.useEffect(()=>{(async()=>{await z()})(),m(tr())},[]),x.useEffect(()=>{if(Object.keys(p).length>0){let d={imei:p==null?void 0:p.imei,startDate:fe().subtract(1,"day").startOf("day"),endDate:fe().endOf("day"),page:1};m(rr(d))}},[p]);const K=d=>{let h=y.find(g=>{var L;return((L=g==null?void 0:g.imei[0])==null?void 0:L.mac_id)==d});return(h==null?void 0:h.registration_id)||d};x.useEffect(()=>{if(console.log(c,"inspection history"),c.length>0){let d={open:0,rejected:0,close:0};c.map(h=>{h.status==="Open"&&d.open++,h.status==="Close"&&d.close++,h.status==="Rejected"&&d.rejected++}),m(nr(d))}},[c]),x.useEffect(()=>{if(c.length>0){let d={open:0,overDue:0,close:0};c.map(h=>{if(h.status==="Open"&&d.open++,h.status==="Close"&&d.close++,h.submission_date){const g=new Date(h.submission_date),L=new Date;L.setHours(0,0,0,0),g.setHours(0,0,0,0),g<L&&h.status=="Open"&&d.overDue++}}),m(or(d))}},[c]),x.useEffect(()=>{m(ir())},[]),x.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(l))},[l]),x.useEffect(()=>{var d,h,g;Object.keys(p).length===0&&y.length>0&&m(wt({imei:(h=(d=y[0])==null?void 0:d.imei[0])==null?void 0:h.mac_id,reg_id:(g=y[0])==null?void 0:g.registration_id}))},[p,y]),x.useEffect(()=>{if((async()=>{if(p!=null&&p.imei){const h=fe(),g=h.startOf("day").format("MM/DD/YYYY HH:mm:ss"),L=h.endOf("day").format("MM/DD/YYYY HH:mm:ss"),W={imei:[p.imei],startDate:g,endDate:L};try{Y(!0);const O=await sr(W);P(O.data[0].data),Y(!1)}catch(O){console.error("Error fetching report:",O)}}})(),Object.keys(p).length>0){let h={imei:p.imei};m(ar(h))}},[p,m]),x.useEffect(()=>{const d=g=>{(g==null?void 0:g.imei)!==null&&l.find(O=>parseInt(O)===(g==null?void 0:g.imei))&&oe.error(`Type: ${g==null?void 0:g.type} ${g==null?void 0:g.msg} ${K(g==null?void 0:g.imei)}`,{id:"geofence",autoClose:5e3})},h=g=>{(g==null?void 0:g.imei)!==null&&l.find(O=>parseInt(O)===(g==null?void 0:g.imei))&&oe.error(`${g==null?void 0:g.msg} ${K(g==null?void 0:g.imei)}`,{id:"speed",autoClose:5e3})};return ye.on("geofenceAlert",d),ye.on("speedAlert",h),()=>{ye.off("geofenceAlert",d),ye.off("speedAlert",h)}},[l,ye]);const z=async()=>{try{let d=[],h=[];const g=await m(lr({w_customer_id:e}));if(Array.isArray(g.payload)){g.payload.forEach(O=>{var J,tt;Array.isArray(O.imei)&&O.imei.length>0?(d.push({id:O.id,label:O.registration_id,value:(J=O==null?void 0:O.imei[0])==null?void 0:J.mac_id,vehilce_type:O==null?void 0:O.segment,sell_date:O==null?void 0:O.sell_date,workShop:O==null?void 0:O.workshop,vehicle_group:O==null?void 0:O.vehicle_group}),h.push((tt=O.imei[0])==null?void 0:tt.mac_id),O.registration_id):(console.error("IMEI data not found for item:",O),oe.error(`IMEI Number not found for the vehicle: ${O==null?void 0:O.registration_id}`,{duration:2e3}))}),u(h);const L="one",W=h;h.length>0&&(m(cr({type:L,imei:W})),m(ur(W))),k(d),m(dr(d)),m(fr({w_customer_id:e})),m(pr(e)),m(hr({}))}else console.error("Unexpected data format:",g),oe.error("Unexpected data format:")}catch(d){console.error("Error fetching vehicle data:",d),oe.error(`Error fetching vehicle data: ${d}`)}},w=d=>A==null?void 0:A.some(h=>Number(h.latestDocument.imei)===Number(d)&&h.latestDocument.speed>0&&(h.latestDocument.ignition===!0||h.latestDocument.ignition===1)),N=d=>A==null?void 0:A.some(h=>Number(h.latestDocument.imei)===Number(d)&&h.latestDocument.speed<=0&&(h.latestDocument.ignition===!0||h.latestDocument.ignition===1)),_=b.filter(d=>{if(!(Object.keys(o).length===0||d.vehicle_group===o.id))return!1;const g=Number(d.value),L=v.includes(g),W=!v.includes(g),O=v.includes(g)&&w(g),J=v.includes(g)&&N(g);switch(a){case"Total Vehicles":return!0;case"Online":return L;case"Running":return O;case"Offline":return W;case"Idling":return J;default:return!0}});return s.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[s.jsx(Gr,{}),s.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[s.jsx(Mr,{title:"Dashboard",setShowNotification:E,showNotification:T,setShowVehiclesGroup:I,showVehiclesGroup:S}),s.jsx(Hr,{setShowVehiclesGroup:I,showVehiclesGroup:S}),s.jsxs(C,{sx:{height:"92vh",backgroundColor:f.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[i&&s.jsx(C,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:f.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:s.jsx(So,{vehicleData:_,showVehicles:i})}),T&&s.jsx(C,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:f.grey[100],overflowX:"hidden",maxWidth:"100vw"},children:s.jsx(Vr,{})}),s.jsx(xe,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),s.jsxs(C,{sx:{display:"flex",gap:"30px",background:Ce.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[s.jsxs(C,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[s.jsx(Uo,{}),s.jsx(C,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:s.jsx(Ko,{setLoading:$})})]}),s.jsx(C,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:s.jsx(Xo,{vehicleReport:j,imeiNo:l,loading:R,isloadingReport:M})})]})]})]})]})};export{xi as default};
