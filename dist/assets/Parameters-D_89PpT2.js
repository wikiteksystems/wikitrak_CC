import{y as j,b as f,x as A,B as E,aC as N,j as e,F as O,D as d,T as D}from"./index-DUOvzgoN.js";import{d as V,t as z}from"./Search-C3xeStNn.js";import{B as v}from"./CircularProgress-pwhYdd0J.js";import{F as M,b as R,O as $}from"./OutlinedInput-BQvSmIVE.js";import{I as q}from"./InputAdornment-pp30ybW3.js";import{I as G}from"./IconButton-CXNJcYw0.js";const Y=({handleParameterChange:w,parametersData:n,setParameterData:C})=>{const{selectedParameterList:i,selectedVehicle:a,loading:H}=j(r=>r.liveMap),{mode:k}=j(r=>r.dashboard),[P,S]=f.useState(""),I=A(),s=z(k);f.useEffect(()=>{Object.keys(a).length>0?B(a.reg_id):E.error("Please select a vehicle",{id:"clipboard"})},[]);const l=n&&n.length>0&&n.filter(r=>r.label.toLowerCase().includes(P.toLowerCase())),T=r=>{S(r.target.value)},B=async r=>{var g;const p=await I(N({w_registration_id:r})),h=[];let F=0;(g=p.payload)==null||g.map(o=>{o[o.parameter_type.toLowerCase()+"_parameter"].forEach(t=>{var u,m,_,b,y;const x=o.parameter_type==="Telematic"?t.short_name:o.parameter_type==="IVN"?t.pid_description:t.spn;h.push({reg_id:a.reg_id,imei:a.imei,id:t.id,_id:o.id,key:F++,label:x,param_type:o.parameter_type,param_header:(u=t==null?void 0:t.header)==null?void 0:u.device_header,unit:t==null?void 0:t.unit,param_id:o.id,vehicle_reg:(m=o==null?void 0:o.vehicle)==null?void 0:m.vin,param_group_id:(_=o.parameter_group[0])==null?void 0:_.id,param_group_name:(b=o.parameter_group[0])==null?void 0:b.group_name,param_group_color:(y=o.parameter_group[0])==null?void 0:y.color,checked:i[0].params.length>0&&i[0].params.some(L=>L.label===x)})})}),C(h)};return e.jsx(e.Fragment,{children:e.jsxs("div",{style:{backgroundColor:s.grey[100],position:"relative",height:"95vh"},children:[e.jsx(v,{sx:{align:"center",my:"15px",ml:"20px"},children:e.jsxs(M,{sx:{width:"90%",backgroundColor:s.grey[500]},variant:"outlined",children:[e.jsx(R,{htmlFor:"outlined-adornment-password",style:{marginTop:"-9px",color:s.grey[400]},children:"Search"}),e.jsx($,{onChange:T,inputProps:{style:{padding:7}},id:"outlined-adornment-password",type:"text",endAdornment:e.jsx(q,{position:"end",children:e.jsx(G,{"aria-label":"toggle password visibility",edge:"end",children:e.jsx(V,{})})}),label:"Search"})]})}),l&&l.length>0?l.map((r,c)=>e.jsx(v,{sx:{align:"center",my:"6px",ml:"20px"},children:e.jsx(O,{variant:"outlined",sx:{width:"90%",bgcolor:r.checked?d.bgColor:"undefined",color:s.grey[400],border:`1px solid ${d.bgColor}`,fontSize:"12px","&:hover":{color:"black",border:"1px solid black",bgcolor:d.bgShadow}},onClick:p=>{w(r)},children:r.label})},c)):e.jsx("div",{children:e.jsx(D,{sx:{width:"100%",textAlign:"center",mt:"100px"},children:"No Parameters Added"})})]})})};export{Y as P};
