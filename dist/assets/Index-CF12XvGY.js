import{W as Hd,j as W,k as Xt,r as Q,t as uf,T as de,B as of,h as Zd,p as Xe,i as ff,v as Vr,Q as Kd,X as qd,Y as zd,m as Vd,w as cs,Z as Jo,K as Yd,L as Xd,N as Jd,O as Qd,$ as Qo}from"./index-DAGSMMGB.js";import{L as jd}from"./LiveMapTopBar-C_PwyAox.js";import{V as n0}from"./VehicleMenu-DWHYMWWc.js";import{L as t0,t as e0}from"./LeftSideBar2-XpEy3YgW.js";import{F as r0}from"./Loader-CLT4Js4H.js";import{L as i0}from"./LiveMapServices-IOEpY0AF.js";import{s as hs}from"./Socket-0N_gnJcr.js";import{P as s0}from"./Parameters-CjevJT8W.js";/* empty css           */import"./proj-XQwXs9DQ.js";import{V as u0}from"./VehicleGroups-CjFkR82D.js";import{u as o0,G as f0,M as a0}from"./esm-BGiQ4sTN.js";import{d as l0}from"./Info-Bijn2uKd.js";import{d as c0}from"./Close-DD_jQFKz.js";import{r as h0}from"./createSvgIcon-DA113q69.js";import{B as Gn,C as g0}from"./menu2-5GUJPbWb.js";import"./jcb-aCHXMCXy.js";import"./index-8mbXiZQC.js";import"./TextField-CtKkR4li.js";import"./useControlled-BG-TPWVj.js";import"./index-Cw4-o9qr.js";import"./Card-t9BMmX5r.js";import"./CardContent-B4WU7PaR.js";var ws={},p0=Hd;Object.defineProperty(ws,"__esModule",{value:!0});var af=ws.default=void 0,d0=p0(h0()),_0=W;af=ws.default=(0,d0.default)((0,_0.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"NorthEast");const v0=({label:I,value:f})=>W.jsxs(Gn,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[W.jsx(de,{variant:"body2",color:"textSecondary",children:I}),W.jsx(de,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:f||"N/A"})]}),w0=(I,f)=>(I==null?void 0:I.find(i=>{var g,v;return((v=(g=i.imei)==null?void 0:g[0])==null?void 0:v.mac_id)===f}))||{},jo=({title:I,details:f})=>W.jsx(Gn,{sx:{width:"45%"},children:f.map(({label:i,value:g})=>W.jsx(v0,{label:i,value:g},i))});function x0({handleVehicleInfo:I,udpatedParams:f}){var rn,$,X,wn,hn,pn,Sn,Fn,un,On;const{collapsed:i}=Xt(cn=>cn.auth),{vehicleList:g,selectedVehicle:v,selectedImei:x}=Xt(cn=>cn.liveMap),[w,O]=Q.useState({});let[d,b]=Q.useState(null);Q.useEffect(()=>{let cn=f&&(f==null?void 0:f.length)>0&&(f==null?void 0:f.find(Dn=>{var fn;return Number((fn=Dn==null?void 0:Dn.latestDocument)==null?void 0:fn.imei)===Number(x)}));b(cn)},[f,x]),Q.useEffect(()=>{O(w0(g,x))},[g,x]);const P=(cn,Dn)=>{const fn=`https://www.google.com/maps?q=${cn},${Dn}`;window.open(fn,"_blank")},M=cn=>{var mn,Nn;let Dn=(mn=cn==null?void 0:cn.latestDocument)==null?void 0:mn.ignition,fn=(Nn=cn==null?void 0:cn.latestDocument)==null?void 0:Nn.speed;return Dn===!0||Dn===1?fn:0},Z=[{label:"Vehicle No:",value:w==null?void 0:w.registration_id},{label:"Model:",value:(rn=w==null?void 0:w.vehicle_model)==null?void 0:rn.name},{label:"IMEI No:",value:(X=($=w==null?void 0:w.imei)==null?void 0:$[0])==null?void 0:X.mac_id},{label:"Chassis No:",value:w==null?void 0:w.chassis_no},{label:"Engine No:",value:w==null?void 0:w.engine_no}],K=[{label:"Customer Name:",value:(wn=w==null?void 0:w.user)!=null&&wn.us_user?`${w.user.us_user.first_name.charAt(0).toUpperCase()}${w.user.us_user.first_name.slice(1)} ${w.user.us_user.last_name.charAt(0).toUpperCase()}${w.user.us_user.last_name.slice(1)}`:null},{label:"Mobile: ",value:((hn=w==null?void 0:w.user)==null?void 0:hn.us_user)&&w.user.us_user.mobile},{label:"Date of Sell:",value:w==null?void 0:w.sell_date},{label:"Workshop Name:",value:(pn=w==null?void 0:w.workshop)==null?void 0:pn.name}];let j={border:"2px solid black",borderRadius:"5px",padding:"5px",color:"black"};return W.jsxs(Gn,{sx:{position:"absolute",top:"600px",left:i?"280px":"450px",zIndex:1,background:uf.bgShadow,p:2,borderRadius:2,color:"white",width:"72%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[W.jsx(de,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),W.jsxs(Gn,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[W.jsxs(Gn,{sx:{display:"flex",justifyContent:"space-between",width:"65%",marginLeft:"10px"},children:[W.jsx(Gn,{sx:j,children:W.jsxs(de,{children:["Ignition:"," ",((Sn=d==null?void 0:d.latestDocument)==null?void 0:Sn.ignition)===!0||((Fn=d==null?void 0:d.latestDocument)==null?void 0:Fn.ignition)===1?"On":"Off"]})}),W.jsx(Gn,{sx:j,children:W.jsxs(de,{children:["Speed: ",M(d)," km/h"]})}),W.jsx(Gn,{sx:j,children:W.jsxs(de,{children:["Main Voltage:"," ",d?`${(un=d==null?void 0:d.latestDocument)==null?void 0:un.mainInputVoltage} Voltage`:0]})}),W.jsx(Gn,{sx:j,children:W.jsxs(de,{children:["Heading:"," ",d?`${(On=d==null?void 0:d.latestDocument)==null?void 0:On.heading} deg`:0]})}),W.jsxs(of,{disabled:!d,onClick:()=>{var cn,Dn;P((cn=d==null?void 0:d.latestDocument)==null?void 0:cn.lat,(Dn=d==null?void 0:d.latestDocument)==null?void 0:Dn.lng)},children:["Navigate to map",W.jsx(af,{})]})]}),W.jsx(c0,{sx:{cursor:"pointer",color:"black"},onClick:I})]}),W.jsxs(Gn,{sx:{display:"flex",justifyContent:"space-between"},children:[W.jsx(jo,{title:"Vehicle Details",details:Z}),W.jsx(jo,{title:"Customer Details",details:K})]})]})}var m0=function I(f,i){if(f===i)return!0;if(f&&i&&typeof f=="object"&&typeof i=="object"){if(f.constructor!==i.constructor)return!1;var g,v,x;if(Array.isArray(f)){if(g=f.length,g!=i.length)return!1;for(v=g;v--!==0;)if(!I(f[v],i[v]))return!1;return!0}if(f.constructor===RegExp)return f.source===i.source&&f.flags===i.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===i.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===i.toString();if(x=Object.keys(f),g=x.length,g!==Object.keys(i).length)return!1;for(v=g;v--!==0;)if(!Object.prototype.hasOwnProperty.call(i,x[v]))return!1;for(v=g;v--!==0;){var w=x[v];if(!I(f[w],i[w]))return!1}return!0}return f!==f&&i!==i};const nf=Zd(m0),tf=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],gs=1,Je=8;class xs{static from(f){if(!(f instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,g]=new Uint8Array(f,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=g>>4;if(v!==gs)throw new Error(`Got v${v} data when expected v${gs}.`);const x=tf[g&15];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(f,2,1),[O]=new Uint32Array(f,4,1);return new xs(O,w,x,f)}constructor(f,i=64,g=Float64Array,v){if(isNaN(f)||f<0)throw new Error(`Unpexpected numItems value: ${f}.`);this.numItems=+f,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=g,this.IndexArrayType=f<65536?Uint16Array:Uint32Array;const x=tf.indexOf(this.ArrayType),w=f*2*this.ArrayType.BYTES_PER_ELEMENT,O=f*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-O%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${g}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,Je,f),this.coords=new this.ArrayType(this.data,Je+O+d,f*2),this._pos=f*2,this._finished=!0):(this.data=new ArrayBuffer(Je+w+O+d),this.ids=new this.IndexArrayType(this.data,Je,f),this.coords=new this.ArrayType(this.data,Je+O+d,f*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(gs<<4)+x]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=f)}add(f,i){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=f,this.coords[this._pos++]=i,g}finish(){const f=this._pos>>1;if(f!==this.numItems)throw new Error(`Added ${f} items when expected ${this.numItems}.`);return _s(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(f,i,g,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:O}=this,d=[0,x.length-1,0],b=[];for(;d.length;){const P=d.pop()||0,M=d.pop()||0,Z=d.pop()||0;if(M-Z<=O){for(let $=Z;$<=M;$++){const X=w[2*$],wn=w[2*$+1];X>=f&&X<=g&&wn>=i&&wn<=v&&b.push(x[$])}continue}const K=Z+M>>1,j=w[2*K],rn=w[2*K+1];j>=f&&j<=g&&rn>=i&&rn<=v&&b.push(x[K]),(P===0?f<=j:i<=rn)&&(d.push(Z),d.push(K-1),d.push(1-P)),(P===0?g>=j:v>=rn)&&(d.push(K+1),d.push(M),d.push(1-P))}return b}within(f,i,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,O=[0,v.length-1,0],d=[],b=g*g;for(;O.length;){const P=O.pop()||0,M=O.pop()||0,Z=O.pop()||0;if(M-Z<=w){for(let $=Z;$<=M;$++)ef(x[2*$],x[2*$+1],f,i)<=b&&d.push(v[$]);continue}const K=Z+M>>1,j=x[2*K],rn=x[2*K+1];ef(j,rn,f,i)<=b&&d.push(v[K]),(P===0?f-g<=j:i-g<=rn)&&(O.push(Z),O.push(K-1),O.push(1-P)),(P===0?f+g>=j:i+g>=rn)&&(O.push(K+1),O.push(M),O.push(1-P))}return d}}function _s(I,f,i,g,v,x){if(v-g<=i)return;const w=g+v>>1;lf(I,f,w,g,v,x),_s(I,f,i,g,w-1,1-x),_s(I,f,i,w+1,v,1-x)}function lf(I,f,i,g,v,x){for(;v>g;){if(v-g>600){const b=v-g+1,P=i-g+1,M=Math.log(b),Z=.5*Math.exp(2*M/3),K=.5*Math.sqrt(M*Z*(b-Z)/b)*(P-b/2<0?-1:1),j=Math.max(g,Math.floor(i-P*Z/b+K)),rn=Math.min(v,Math.floor(i+(b-P)*Z/b+K));lf(I,f,i,j,rn,x)}const w=f[2*i+x];let O=g,d=v;for(Qe(I,f,g,i),f[2*v+x]>w&&Qe(I,f,g,v);O<d;){for(Qe(I,f,O,d),O++,d--;f[2*O+x]<w;)O++;for(;f[2*d+x]>w;)d--}f[2*g+x]===w?Qe(I,f,g,d):(d++,Qe(I,f,d,v)),d<=i&&(g=d+1),i<=d&&(v=d-1)}}function Qe(I,f,i,g){ps(I,i,g),ps(f,2*i,2*g),ps(f,2*i+1,2*g+1)}function ps(I,f,i){const g=I[f];I[f]=I[i],I[i]=g}function ef(I,f,i,g){const v=I-i,x=f-g;return v*v+x*x}const y0={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:I=>I},rf=Math.fround||(I=>f=>(I[0]=+f,I[0]))(new Float32Array(1)),pe=2,Yt=3,ds=4,Vt=5,cf=6;class A0{constructor(f){this.options=Object.assign(Object.create(y0),f),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(f){const{log:i,minZoom:g,maxZoom:v}=this.options;i&&console.time("total time");const x=`prepare ${f.length} points`;i&&console.time(x),this.points=f;const w=[];for(let d=0;d<f.length;d++){const b=f[d];if(!b.geometry)continue;const[P,M]=b.geometry.coordinates,Z=rf(qr(P)),K=rf(zr(M));w.push(Z,K,1/0,d,-1,1),this.options.reduce&&w.push(0)}let O=this.trees[v+1]=this._createTree(w);i&&console.timeEnd(x);for(let d=v;d>=g;d--){const b=+Date.now();O=this.trees[d]=this._createTree(this._cluster(O,d)),i&&console.log("z%d: %d clusters in %dms",d,O.numItems,+Date.now()-b)}return i&&console.timeEnd("total time"),this}getClusters(f,i){let g=((f[0]+180)%360+360)%360-180;const v=Math.max(-90,Math.min(90,f[1]));let x=f[2]===180?180:((f[2]+180)%360+360)%360-180;const w=Math.max(-90,Math.min(90,f[3]));if(f[2]-f[0]>=360)g=-180,x=180;else if(g>x){const M=this.getClusters([g,v,180,w],i),Z=this.getClusters([-180,v,x,w],i);return M.concat(Z)}const O=this.trees[this._limitZoom(i)],d=O.range(qr(g),zr(w),qr(x),zr(v)),b=O.data,P=[];for(const M of d){const Z=this.stride*M;P.push(b[Z+Vt]>1?sf(b,Z,this.clusterProps):this.points[b[Z+Yt]])}return P}getChildren(f){const i=this._getOriginId(f),g=this._getOriginZoom(f),v="No cluster with the specified id.",x=this.trees[g];if(!x)throw new Error(v);const w=x.data;if(i*this.stride>=w.length)throw new Error(v);const O=this.options.radius/(this.options.extent*Math.pow(2,g-1)),d=w[i*this.stride],b=w[i*this.stride+1],P=x.within(d,b,O),M=[];for(const Z of P){const K=Z*this.stride;w[K+ds]===f&&M.push(w[K+Vt]>1?sf(w,K,this.clusterProps):this.points[w[K+Yt]])}if(M.length===0)throw new Error(v);return M}getLeaves(f,i,g){i=i||10,g=g||0;const v=[];return this._appendLeaves(v,f,i,g,0),v}getTile(f,i,g){const v=this.trees[this._limitZoom(f)],x=Math.pow(2,f),{extent:w,radius:O}=this.options,d=O/w,b=(g-d)/x,P=(g+1+d)/x,M={features:[]};return this._addTileFeatures(v.range((i-d)/x,b,(i+1+d)/x,P),v.data,i,g,x,M),i===0&&this._addTileFeatures(v.range(1-d/x,b,1,P),v.data,x,g,x,M),i===x-1&&this._addTileFeatures(v.range(0,b,d/x,P),v.data,-1,g,x,M),M.features.length?M:null}getClusterExpansionZoom(f){let i=this._getOriginZoom(f)-1;for(;i<=this.options.maxZoom;){const g=this.getChildren(f);if(i++,g.length!==1)break;f=g[0].properties.cluster_id}return i}_appendLeaves(f,i,g,v,x){const w=this.getChildren(i);for(const O of w){const d=O.properties;if(d&&d.cluster?x+d.point_count<=v?x+=d.point_count:x=this._appendLeaves(f,d.cluster_id,g,v,x):x<v?x++:f.push(O),f.length===g)break}return x}_createTree(f){const i=new xs(f.length/this.stride|0,this.options.nodeSize,Float32Array);for(let g=0;g<f.length;g+=this.stride)i.add(f[g],f[g+1]);return i.finish(),i.data=f,i}_addTileFeatures(f,i,g,v,x,w){for(const O of f){const d=O*this.stride,b=i[d+Vt]>1;let P,M,Z;if(b)P=hf(i,d,this.clusterProps),M=i[d],Z=i[d+1];else{const rn=this.points[i[d+Yt]];P=rn.properties;const[$,X]=rn.geometry.coordinates;M=qr($),Z=zr(X)}const K={type:1,geometry:[[Math.round(this.options.extent*(M*x-g)),Math.round(this.options.extent*(Z*x-v))]],tags:P};let j;b||this.options.generateId?j=i[d+Yt]:j=this.points[i[d+Yt]].id,j!==void 0&&(K.id=j),w.features.push(K)}}_limitZoom(f){return Math.max(this.options.minZoom,Math.min(Math.floor(+f),this.options.maxZoom+1))}_cluster(f,i){const{radius:g,extent:v,reduce:x,minPoints:w}=this.options,O=g/(v*Math.pow(2,i)),d=f.data,b=[],P=this.stride;for(let M=0;M<d.length;M+=P){if(d[M+pe]<=i)continue;d[M+pe]=i;const Z=d[M],K=d[M+1],j=f.within(d[M],d[M+1],O),rn=d[M+Vt];let $=rn;for(const X of j){const wn=X*P;d[wn+pe]>i&&($+=d[wn+Vt])}if($>rn&&$>=w){let X=Z*rn,wn=K*rn,hn,pn=-1;const Sn=((M/P|0)<<5)+(i+1)+this.points.length;for(const Fn of j){const un=Fn*P;if(d[un+pe]<=i)continue;d[un+pe]=i;const On=d[un+Vt];X+=d[un]*On,wn+=d[un+1]*On,d[un+ds]=Sn,x&&(hn||(hn=this._map(d,M,!0),pn=this.clusterProps.length,this.clusterProps.push(hn)),x(hn,this._map(d,un)))}d[M+ds]=Sn,b.push(X/$,wn/$,1/0,Sn,-1,$),x&&b.push(pn)}else{for(let X=0;X<P;X++)b.push(d[M+X]);if($>1)for(const X of j){const wn=X*P;if(!(d[wn+pe]<=i)){d[wn+pe]=i;for(let hn=0;hn<P;hn++)b.push(d[wn+hn])}}}}return b}_getOriginId(f){return f-this.points.length>>5}_getOriginZoom(f){return(f-this.points.length)%32}_map(f,i,g){if(f[i+Vt]>1){const w=this.clusterProps[f[i+cf]];return g?Object.assign({},w):w}const v=this.points[f[i+Yt]].properties,x=this.options.map(v);return g&&x===v?Object.assign({},x):x}}function sf(I,f,i){return{type:"Feature",id:I[f+Yt],properties:hf(I,f,i),geometry:{type:"Point",coordinates:[S0(I[f]),I0(I[f+1])]}}}function hf(I,f,i){const g=I[f+Vt],v=g>=1e4?`${Math.round(g/1e3)}k`:g>=1e3?`${Math.round(g/100)/10}k`:g,x=I[f+cf],w=x===-1?{}:Object.assign({},i[x]);return Object.assign(w,{cluster:!0,cluster_id:I[f+Yt],point_count:g,point_count_abbreviated:v})}function qr(I){return I/360+.5}function zr(I){const f=Math.sin(I*Math.PI/180),i=.5-.25*Math.log((1+f)/(1-f))/Math.PI;return i<0?0:i>1?1:i}function S0(I){return(I-.5)*360}function I0(I){const f=(180-I*360)*Math.PI/180;return 360*Math.atan(Math.exp(f))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function E0(I,f){var i={};for(var g in I)Object.prototype.hasOwnProperty.call(I,g)&&f.indexOf(g)<0&&(i[g]=I[g]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,g=Object.getOwnPropertySymbols(I);v<g.length;v++)f.indexOf(g[v])<0&&Object.prototype.propertyIsEnumerable.call(I,g[v])&&(i[g[v]]=I[g[v]]);return i}class st{static isAdvancedMarkerAvailable(f){return google.maps.marker&&f.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(f){return google.maps.marker&&f instanceof google.maps.marker.AdvancedMarkerElement}static setMap(f,i){this.isAdvancedMarker(f)?f.map=i:f.setMap(i)}static getPosition(f){if(this.isAdvancedMarker(f)){if(f.position){if(f.position instanceof google.maps.LatLng)return f.position;if(f.position.lat&&f.position.lng)return new google.maps.LatLng(f.position.lat,f.position.lng)}return new google.maps.LatLng(null)}return f.getPosition()}static getVisible(f){return this.isAdvancedMarker(f)?!0:f.getVisible()}}class vs{constructor({markers:f,position:i}){this.markers=f,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(this.markers.length===0&&!this._position)return;const f=new google.maps.LatLngBounds(this._position,this._position);for(const i of this.markers)f.extend(st.getPosition(i));return f}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(f=>st.getVisible(f)).length}push(f){this.markers.push(f)}delete(){this.marker&&(st.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class C0{constructor({maxZoom:f=16}){this.maxZoom=f}noop({markers:f}){return L0(f)}}const L0=I=>I.map(i=>new vs({position:st.getPosition(i),markers:[i]}));class M0 extends C0{constructor(f){var{maxZoom:i,radius:g=60}=f,v=E0(f,["maxZoom","radius"]);super({maxZoom:i}),this.state={zoom:-1},this.superCluster=new A0(Object.assign({maxZoom:this.maxZoom,radius:g},v))}calculate(f){let i=!1;const g={zoom:f.map.getZoom()};if(!nf(f.markers,this.markers)){i=!0,this.markers=[...f.markers];const v=this.markers.map(x=>{const w=st.getPosition(x);return{type:"Feature",geometry:{type:"Point",coordinates:[w.lng(),w.lat()]},properties:{marker:x}}});this.superCluster.load(v)}return i||(this.state.zoom<=this.maxZoom||g.zoom<=this.maxZoom)&&(i=!nf(this.state,g)),this.state=g,i&&(this.clusters=this.cluster(f)),{clusters:this.clusters,changed:i}}cluster({map:f}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(f.getZoom())).map(i=>this.transformCluster(i))}transformCluster({geometry:{coordinates:[f,i]},properties:g}){if(g.cluster)return new vs({markers:this.superCluster.getLeaves(g.cluster_id,1/0).map(x=>x.properties.marker),position:{lat:i,lng:f}});const v=g.marker;return new vs({markers:[v],position:st.getPosition(v)})}}class R0{constructor(f,i){this.markers={sum:f.length};const g=i.map(x=>x.count),v=g.reduce((x,w)=>x+w,0);this.clusters={count:i.length,markers:{mean:v/i.length,sum:v,min:Math.min(...g),max:Math.max(...g)}}}}class T0{render({count:f,position:i},g,v){const w=`<svg fill="${f>Math.max(10,g.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${f}</text>
</svg>`,O=`Cluster of ${f} markers`,d=Number(google.maps.Marker.MAX_ZINDEX)+f;if(st.isAdvancedMarkerAvailable(v)){const M=new DOMParser().parseFromString(w,"image/svg+xml").documentElement;M.setAttribute("transform","translate(0 25)");const Z={map:v,position:i,zIndex:d,title:O,content:M};return new google.maps.marker.AdvancedMarkerElement(Z)}const b={position:i,zIndex:d,title:O,icon:{url:`data:image/svg+xml;base64,${btoa(w)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(b)}}function b0(I,f){for(let i in f.prototype)I.prototype[i]=f.prototype[i]}class ms{constructor(){b0(ms,google.maps.OverlayView)}}var je;(function(I){I.CLUSTERING_BEGIN="clusteringbegin",I.CLUSTERING_END="clusteringend",I.CLUSTER_CLICK="click"})(je||(je={}));const O0=(I,f,i)=>{i.fitBounds(f.bounds)};class D0 extends ms{constructor({map:f,markers:i=[],algorithmOptions:g={},algorithm:v=new M0(g),renderer:x=new T0,onClusterClick:w=O0}){super(),this.markers=[...i],this.clusters=[],this.algorithm=v,this.renderer=x,this.onClusterClick=w,f&&this.setMap(f)}addMarker(f,i){this.markers.includes(f)||(this.markers.push(f),i||this.render())}addMarkers(f,i){f.forEach(g=>{this.addMarker(g,!0)}),i||this.render()}removeMarker(f,i){const g=this.markers.indexOf(f);return g===-1?!1:(st.setMap(f,null),this.markers.splice(g,1),i||this.render(),!0)}removeMarkers(f,i){let g=!1;return f.forEach(v=>{g=this.removeMarker(v,!0)||g}),g&&!i&&this.render(),g}clearMarkers(f){this.markers.length=0,f||this.render()}render(){const f=this.getMap();if(f instanceof google.maps.Map&&f.getProjection()){google.maps.event.trigger(this,je.CLUSTERING_BEGIN,this);const{clusters:i,changed:g}=this.algorithm.calculate({markers:this.markers,map:f,mapCanvasProjection:this.getProjection()});if(g||g==null){const v=new Set;for(const w of i)w.markers.length==1&&v.add(w.markers[0]);const x=[];for(const w of this.clusters)w.marker!=null&&(w.markers.length==1?v.has(w.marker)||st.setMap(w.marker,null):x.push(w.marker));this.clusters=i,this.renderClusters(),requestAnimationFrame(()=>x.forEach(w=>st.setMap(w,null)))}google.maps.event.trigger(this,je.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(f=>st.setMap(f,null)),this.clusters.forEach(f=>f.delete()),this.clusters=[]}renderClusters(){const f=new R0(this.markers,this.clusters),i=this.getMap();this.clusters.forEach(g=>{g.markers.length===1?g.marker=g.markers[0]:(g.marker=this.renderer.render(g,f,i),g.markers.forEach(v=>st.setMap(v,null)),this.onClusterClick&&g.marker.addListener("click",v=>{google.maps.event.trigger(this,je.CLUSTER_CLICK,g),this.onClusterClick(v,g,i)})),st.setMap(g.marker,i)})}}var Yr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Yr.exports;(function(I,f){(function(){var i,g="4.17.21",v=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",w="Expected a function",O="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",b=500,P="__lodash_placeholder__",M=1,Z=2,K=4,j=1,rn=2,$=1,X=2,wn=4,hn=8,pn=16,Sn=32,Fn=64,un=128,On=256,cn=512,Dn=30,fn="...",mn=800,Nn=16,Et=1,mt=2,N=3,Un=1/0,dn=9007199254740991,Ct=17976931348623157e292,In=NaN,Rn=4294967295,Jt=Rn-1,nr=Rn>>>1,Qt=[["ary",un],["bind",$],["bindKey",X],["curry",hn],["curryRight",pn],["flip",cn],["partial",Sn],["partialRight",Fn],["rearg",On]],yt="[object Arguments]",_e="[object Array]",Xr="[object AsyncFunction]",jt="[object Boolean]",ne="[object Date]",Pe="[object DOMException]",te="[object Error]",ve="[object Function]",tr="[object GeneratorFunction]",Jn="[object Map]",Ut="[object Number]",Jr="[object Null]",pt="[object Object]",er="[object Promise]",Qr="[object Proxy]",ee="[object RegExp]",Qn="[object Set]",re="[object String]",we="[object Symbol]",rr="[object Undefined]",ie="[object WeakMap]",A="[object WeakSet]",E="[object ArrayBuffer]",R="[object DataView]",D="[object Float32Array]",G="[object Float64Array]",nn="[object Int8Array]",q="[object Int16Array]",sn="[object Int32Array]",yn="[object Uint8Array]",Cn="[object Uint8ClampedArray]",qn="[object Uint16Array]",dt="[object Uint32Array]",Bt=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,Wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ys=/&(?:amp|lt|gt|quot|#39);/g,As=/[&<>"']/g,gf=RegExp(ys.source),pf=RegExp(As.source),df=/<%-([\s\S]+?)%>/g,_f=/<%([\s\S]+?)%>/g,Ss=/<%=([\s\S]+?)%>/g,vf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wf=/^\w*$/,xf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jr=/[\\^$.*+?()[\]{}|]/g,mf=RegExp(jr.source),ni=/^\s+/,yf=/\s/,Af=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sf=/\{\n\/\* \[wrapped with (.+)\] \*/,If=/,? & /,Ef=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cf=/[()=,{}\[\]\/\s]/,Lf=/\\(\\)?/g,Mf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Is=/\w*$/,Rf=/^[-+]0x[0-9a-f]+$/i,Tf=/^0b[01]+$/i,bf=/^\[object .+?Constructor\]$/,Of=/^0o[0-7]+$/i,Df=/^(?:0|[1-9]\d*)$/,Pf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ir=/($^)/,Ff=/['\n\r\u2028\u2029\\]/g,sr="\\ud800-\\udfff",Uf="\\u0300-\\u036f",Bf="\\ufe20-\\ufe2f",Wf="\\u20d0-\\u20ff",Es=Uf+Bf+Wf,Cs="\\u2700-\\u27bf",Ls="a-z\\xdf-\\xf6\\xf8-\\xff",Nf="\\xac\\xb1\\xd7\\xf7",kf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$f="\\u2000-\\u206f",Gf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ms="A-Z\\xc0-\\xd6\\xd8-\\xde",Rs="\\ufe0e\\ufe0f",Ts=Nf+kf+$f+Gf,ti="['’]",Hf="["+sr+"]",bs="["+Ts+"]",ur="["+Es+"]",Os="\\d+",Zf="["+Cs+"]",Ds="["+Ls+"]",Ps="[^"+sr+Ts+Os+Cs+Ls+Ms+"]",ei="\\ud83c[\\udffb-\\udfff]",Kf="(?:"+ur+"|"+ei+")",Fs="[^"+sr+"]",ri="(?:\\ud83c[\\udde6-\\uddff]){2}",ii="[\\ud800-\\udbff][\\udc00-\\udfff]",me="["+Ms+"]",Us="\\u200d",Bs="(?:"+Ds+"|"+Ps+")",qf="(?:"+me+"|"+Ps+")",Ws="(?:"+ti+"(?:d|ll|m|re|s|t|ve))?",Ns="(?:"+ti+"(?:D|LL|M|RE|S|T|VE))?",ks=Kf+"?",$s="["+Rs+"]?",zf="(?:"+Us+"(?:"+[Fs,ri,ii].join("|")+")"+$s+ks+")*",Vf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gs=$s+ks+zf,Xf="(?:"+[Zf,ri,ii].join("|")+")"+Gs,Jf="(?:"+[Fs+ur+"?",ur,ri,ii,Hf].join("|")+")",Qf=RegExp(ti,"g"),jf=RegExp(ur,"g"),si=RegExp(ei+"(?="+ei+")|"+Jf+Gs,"g"),na=RegExp([me+"?"+Ds+"+"+Ws+"(?="+[bs,me,"$"].join("|")+")",qf+"+"+Ns+"(?="+[bs,me+Bs,"$"].join("|")+")",me+"?"+Bs+"+"+Ws,me+"+"+Ns,Yf,Vf,Os,Xf].join("|"),"g"),ta=RegExp("["+Us+sr+Es+Rs+"]"),ea=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ra=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ia=-1,vn={};vn[D]=vn[G]=vn[nn]=vn[q]=vn[sn]=vn[yn]=vn[Cn]=vn[qn]=vn[dt]=!0,vn[yt]=vn[_e]=vn[E]=vn[jt]=vn[R]=vn[ne]=vn[te]=vn[ve]=vn[Jn]=vn[Ut]=vn[pt]=vn[ee]=vn[Qn]=vn[re]=vn[ie]=!1;var _n={};_n[yt]=_n[_e]=_n[E]=_n[R]=_n[jt]=_n[ne]=_n[D]=_n[G]=_n[nn]=_n[q]=_n[sn]=_n[Jn]=_n[Ut]=_n[pt]=_n[ee]=_n[Qn]=_n[re]=_n[we]=_n[yn]=_n[Cn]=_n[qn]=_n[dt]=!0,_n[te]=_n[ve]=_n[ie]=!1;var sa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aa=parseFloat,la=parseInt,Hs=typeof Xe=="object"&&Xe&&Xe.Object===Object&&Xe,ca=typeof self=="object"&&self&&self.Object===Object&&self,Bn=Hs||ca||Function("return this")(),ui=f&&!f.nodeType&&f,se=ui&&!0&&I&&!I.nodeType&&I,Zs=se&&se.exports===ui,oi=Zs&&Hs.process,ut=function(){try{var c=se&&se.require&&se.require("util").types;return c||oi&&oi.binding&&oi.binding("util")}catch{}}(),Ks=ut&&ut.isArrayBuffer,qs=ut&&ut.isDate,zs=ut&&ut.isMap,Vs=ut&&ut.isRegExp,Ys=ut&&ut.isSet,Xs=ut&&ut.isTypedArray;function jn(c,_,p){switch(p.length){case 0:return c.call(_);case 1:return c.call(_,p[0]);case 2:return c.call(_,p[0],p[1]);case 3:return c.call(_,p[0],p[1],p[2])}return c.apply(_,p)}function ha(c,_,p,L){for(var k=-1,on=c==null?0:c.length;++k<on;){var Tn=c[k];_(L,Tn,p(Tn),c)}return L}function ot(c,_){for(var p=-1,L=c==null?0:c.length;++p<L&&_(c[p],p,c)!==!1;);return c}function ga(c,_){for(var p=c==null?0:c.length;p--&&_(c[p],p,c)!==!1;);return c}function Js(c,_){for(var p=-1,L=c==null?0:c.length;++p<L;)if(!_(c[p],p,c))return!1;return!0}function Nt(c,_){for(var p=-1,L=c==null?0:c.length,k=0,on=[];++p<L;){var Tn=c[p];_(Tn,p,c)&&(on[k++]=Tn)}return on}function or(c,_){var p=c==null?0:c.length;return!!p&&ye(c,_,0)>-1}function fi(c,_,p){for(var L=-1,k=c==null?0:c.length;++L<k;)if(p(_,c[L]))return!0;return!1}function xn(c,_){for(var p=-1,L=c==null?0:c.length,k=Array(L);++p<L;)k[p]=_(c[p],p,c);return k}function kt(c,_){for(var p=-1,L=_.length,k=c.length;++p<L;)c[k+p]=_[p];return c}function ai(c,_,p,L){var k=-1,on=c==null?0:c.length;for(L&&on&&(p=c[++k]);++k<on;)p=_(p,c[k],k,c);return p}function pa(c,_,p,L){var k=c==null?0:c.length;for(L&&k&&(p=c[--k]);k--;)p=_(p,c[k],k,c);return p}function li(c,_){for(var p=-1,L=c==null?0:c.length;++p<L;)if(_(c[p],p,c))return!0;return!1}var da=ci("length");function _a(c){return c.split("")}function va(c){return c.match(Ef)||[]}function Qs(c,_,p){var L;return p(c,function(k,on,Tn){if(_(k,on,Tn))return L=on,!1}),L}function fr(c,_,p,L){for(var k=c.length,on=p+(L?1:-1);L?on--:++on<k;)if(_(c[on],on,c))return on;return-1}function ye(c,_,p){return _===_?Ra(c,_,p):fr(c,js,p)}function wa(c,_,p,L){for(var k=p-1,on=c.length;++k<on;)if(L(c[k],_))return k;return-1}function js(c){return c!==c}function nu(c,_){var p=c==null?0:c.length;return p?gi(c,_)/p:In}function ci(c){return function(_){return _==null?i:_[c]}}function hi(c){return function(_){return c==null?i:c[_]}}function tu(c,_,p,L,k){return k(c,function(on,Tn,gn){p=L?(L=!1,on):_(p,on,Tn,gn)}),p}function xa(c,_){var p=c.length;for(c.sort(_);p--;)c[p]=c[p].value;return c}function gi(c,_){for(var p,L=-1,k=c.length;++L<k;){var on=_(c[L]);on!==i&&(p=p===i?on:p+on)}return p}function pi(c,_){for(var p=-1,L=Array(c);++p<c;)L[p]=_(p);return L}function ma(c,_){return xn(_,function(p){return[p,c[p]]})}function eu(c){return c&&c.slice(0,uu(c)+1).replace(ni,"")}function nt(c){return function(_){return c(_)}}function di(c,_){return xn(_,function(p){return c[p]})}function Fe(c,_){return c.has(_)}function ru(c,_){for(var p=-1,L=c.length;++p<L&&ye(_,c[p],0)>-1;);return p}function iu(c,_){for(var p=c.length;p--&&ye(_,c[p],0)>-1;);return p}function ya(c,_){for(var p=c.length,L=0;p--;)c[p]===_&&++L;return L}var Aa=hi(sa),Sa=hi(ua);function Ia(c){return"\\"+fa[c]}function Ea(c,_){return c==null?i:c[_]}function Ae(c){return ta.test(c)}function Ca(c){return ea.test(c)}function La(c){for(var _,p=[];!(_=c.next()).done;)p.push(_.value);return p}function _i(c){var _=-1,p=Array(c.size);return c.forEach(function(L,k){p[++_]=[k,L]}),p}function su(c,_){return function(p){return c(_(p))}}function $t(c,_){for(var p=-1,L=c.length,k=0,on=[];++p<L;){var Tn=c[p];(Tn===_||Tn===P)&&(c[p]=P,on[k++]=p)}return on}function ar(c){var _=-1,p=Array(c.size);return c.forEach(function(L){p[++_]=L}),p}function Ma(c){var _=-1,p=Array(c.size);return c.forEach(function(L){p[++_]=[L,L]}),p}function Ra(c,_,p){for(var L=p-1,k=c.length;++L<k;)if(c[L]===_)return L;return-1}function Ta(c,_,p){for(var L=p+1;L--;)if(c[L]===_)return L;return L}function Se(c){return Ae(c)?Oa(c):da(c)}function _t(c){return Ae(c)?Da(c):_a(c)}function uu(c){for(var _=c.length;_--&&yf.test(c.charAt(_)););return _}var ba=hi(oa);function Oa(c){for(var _=si.lastIndex=0;si.test(c);)++_;return _}function Da(c){return c.match(si)||[]}function Pa(c){return c.match(na)||[]}var Fa=function c(_){_=_==null?Bn:Ie.defaults(Bn.Object(),_,Ie.pick(Bn,ra));var p=_.Array,L=_.Date,k=_.Error,on=_.Function,Tn=_.Math,gn=_.Object,vi=_.RegExp,Ua=_.String,ft=_.TypeError,lr=p.prototype,Ba=on.prototype,Ee=gn.prototype,cr=_["__core-js_shared__"],hr=Ba.toString,ln=Ee.hasOwnProperty,Wa=0,ou=function(){var n=/[^.]+$/.exec(cr&&cr.keys&&cr.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),gr=Ee.toString,Na=hr.call(gn),ka=Bn._,$a=vi("^"+hr.call(ln).replace(jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pr=Zs?_.Buffer:i,Gt=_.Symbol,dr=_.Uint8Array,fu=pr?pr.allocUnsafe:i,_r=su(gn.getPrototypeOf,gn),au=gn.create,lu=Ee.propertyIsEnumerable,vr=lr.splice,cu=Gt?Gt.isConcatSpreadable:i,Ue=Gt?Gt.iterator:i,ue=Gt?Gt.toStringTag:i,wr=function(){try{var n=ce(gn,"defineProperty");return n({},"",{}),n}catch{}}(),Ga=_.clearTimeout!==Bn.clearTimeout&&_.clearTimeout,Ha=L&&L.now!==Bn.Date.now&&L.now,Za=_.setTimeout!==Bn.setTimeout&&_.setTimeout,xr=Tn.ceil,mr=Tn.floor,wi=gn.getOwnPropertySymbols,Ka=pr?pr.isBuffer:i,hu=_.isFinite,qa=lr.join,za=su(gn.keys,gn),bn=Tn.max,kn=Tn.min,Va=L.now,Ya=_.parseInt,gu=Tn.random,Xa=lr.reverse,xi=ce(_,"DataView"),Be=ce(_,"Map"),mi=ce(_,"Promise"),Ce=ce(_,"Set"),We=ce(_,"WeakMap"),Ne=ce(gn,"create"),yr=We&&new We,Le={},Ja=he(xi),Qa=he(Be),ja=he(mi),nl=he(Ce),tl=he(We),Ar=Gt?Gt.prototype:i,ke=Ar?Ar.valueOf:i,pu=Ar?Ar.toString:i;function u(n){if(En(n)&&!H(n)&&!(n instanceof tn)){if(n instanceof at)return n;if(ln.call(n,"__wrapped__"))return _o(n)}return new at(n)}var Me=function(){function n(){}return function(t){if(!An(t))return{};if(au)return au(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function Sr(){}function at(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}u.templateSettings={escape:df,evaluate:_f,interpolate:Ss,variable:"",imports:{_:u}},u.prototype=Sr.prototype,u.prototype.constructor=u,at.prototype=Me(Sr.prototype),at.prototype.constructor=at;function tn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rn,this.__views__=[]}function el(){var n=new tn(this.__wrapped__);return n.__actions__=zn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=zn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=zn(this.__views__),n}function rl(){if(this.__filtered__){var n=new tn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function il(){var n=this.__wrapped__.value(),t=this.__dir__,e=H(n),r=t<0,s=e?n.length:0,o=_c(0,s,this.__views__),a=o.start,l=o.end,h=l-a,m=r?l:a-1,y=this.__iteratees__,S=y.length,C=0,T=kn(h,this.__takeCount__);if(!e||!r&&s==h&&T==h)return Wu(n,this.__actions__);var U=[];n:for(;h--&&C<T;){m+=t;for(var V=-1,B=n[m];++V<S;){var J=y[V],en=J.iteratee,rt=J.type,Kn=en(B);if(rt==mt)B=Kn;else if(!Kn){if(rt==Et)continue n;break n}}U[C++]=B}return U}tn.prototype=Me(Sr.prototype),tn.prototype.constructor=tn;function oe(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function sl(){this.__data__=Ne?Ne(null):{},this.size=0}function ul(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function ol(n){var t=this.__data__;if(Ne){var e=t[n];return e===d?i:e}return ln.call(t,n)?t[n]:i}function fl(n){var t=this.__data__;return Ne?t[n]!==i:ln.call(t,n)}function al(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ne&&t===i?d:t,this}oe.prototype.clear=sl,oe.prototype.delete=ul,oe.prototype.get=ol,oe.prototype.has=fl,oe.prototype.set=al;function Lt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function ll(){this.__data__=[],this.size=0}function cl(n){var t=this.__data__,e=Ir(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():vr.call(t,e,1),--this.size,!0}function hl(n){var t=this.__data__,e=Ir(t,n);return e<0?i:t[e][1]}function gl(n){return Ir(this.__data__,n)>-1}function pl(n,t){var e=this.__data__,r=Ir(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}Lt.prototype.clear=ll,Lt.prototype.delete=cl,Lt.prototype.get=hl,Lt.prototype.has=gl,Lt.prototype.set=pl;function Mt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function dl(){this.size=0,this.__data__={hash:new oe,map:new(Be||Lt),string:new oe}}function _l(n){var t=Ur(this,n).delete(n);return this.size-=t?1:0,t}function vl(n){return Ur(this,n).get(n)}function wl(n){return Ur(this,n).has(n)}function xl(n,t){var e=Ur(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}Mt.prototype.clear=dl,Mt.prototype.delete=_l,Mt.prototype.get=vl,Mt.prototype.has=wl,Mt.prototype.set=xl;function fe(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Mt;++t<e;)this.add(n[t])}function ml(n){return this.__data__.set(n,d),this}function yl(n){return this.__data__.has(n)}fe.prototype.add=fe.prototype.push=ml,fe.prototype.has=yl;function vt(n){var t=this.__data__=new Lt(n);this.size=t.size}function Al(){this.__data__=new Lt,this.size=0}function Sl(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function Il(n){return this.__data__.get(n)}function El(n){return this.__data__.has(n)}function Cl(n,t){var e=this.__data__;if(e instanceof Lt){var r=e.__data__;if(!Be||r.length<v-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Mt(r)}return e.set(n,t),this.size=e.size,this}vt.prototype.clear=Al,vt.prototype.delete=Sl,vt.prototype.get=Il,vt.prototype.has=El,vt.prototype.set=Cl;function du(n,t){var e=H(n),r=!e&&ge(n),s=!e&&!r&&zt(n),o=!e&&!r&&!s&&Oe(n),a=e||r||s||o,l=a?pi(n.length,Ua):[],h=l.length;for(var m in n)(t||ln.call(n,m))&&!(a&&(m=="length"||s&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Ot(m,h)))&&l.push(m);return l}function _u(n){var t=n.length;return t?n[bi(0,t-1)]:i}function Ll(n,t){return Br(zn(n),ae(t,0,n.length))}function Ml(n){return Br(zn(n))}function yi(n,t,e){(e!==i&&!wt(n[t],e)||e===i&&!(t in n))&&Rt(n,t,e)}function $e(n,t,e){var r=n[t];(!(ln.call(n,t)&&wt(r,e))||e===i&&!(t in n))&&Rt(n,t,e)}function Ir(n,t){for(var e=n.length;e--;)if(wt(n[e][0],t))return e;return-1}function Rl(n,t,e,r){return Ht(n,function(s,o,a){t(r,s,e(s),a)}),r}function vu(n,t){return n&&St(t,Pn(t),n)}function Tl(n,t){return n&&St(t,Yn(t),n)}function Rt(n,t,e){t=="__proto__"&&wr?wr(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Ai(n,t){for(var e=-1,r=t.length,s=p(r),o=n==null;++e<r;)s[e]=o?i:es(n,t[e]);return s}function ae(n,t,e){return n===n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function lt(n,t,e,r,s,o){var a,l=t&M,h=t&Z,m=t&K;if(e&&(a=s?e(n,r,s,o):e(n)),a!==i)return a;if(!An(n))return n;var y=H(n);if(y){if(a=wc(n),!l)return zn(n,a)}else{var S=$n(n),C=S==ve||S==tr;if(zt(n))return $u(n,l);if(S==pt||S==yt||C&&!s){if(a=h||C?{}:uo(n),!l)return h?oc(n,Tl(a,n)):uc(n,vu(a,n))}else{if(!_n[S])return s?n:{};a=xc(n,S,l)}}o||(o=new vt);var T=o.get(n);if(T)return T;o.set(n,a),Uo(n)?n.forEach(function(B){a.add(lt(B,t,e,B,n,o))}):Po(n)&&n.forEach(function(B,J){a.set(J,lt(B,t,e,J,n,o))});var U=m?h?Gi:$i:h?Yn:Pn,V=y?i:U(n);return ot(V||n,function(B,J){V&&(J=B,B=n[J]),$e(a,J,lt(B,t,e,J,n,o))}),a}function bl(n){var t=Pn(n);return function(e){return wu(e,n,t)}}function wu(n,t,e){var r=e.length;if(n==null)return!r;for(n=gn(n);r--;){var s=e[r],o=t[s],a=n[s];if(a===i&&!(s in n)||!o(a))return!1}return!0}function xu(n,t,e){if(typeof n!="function")throw new ft(w);return Ve(function(){n.apply(i,e)},t)}function Ge(n,t,e,r){var s=-1,o=or,a=!0,l=n.length,h=[],m=t.length;if(!l)return h;e&&(t=xn(t,nt(e))),r?(o=fi,a=!1):t.length>=v&&(o=Fe,a=!1,t=new fe(t));n:for(;++s<l;){var y=n[s],S=e==null?y:e(y);if(y=r||y!==0?y:0,a&&S===S){for(var C=m;C--;)if(t[C]===S)continue n;h.push(y)}else o(t,S,r)||h.push(y)}return h}var Ht=qu(At),mu=qu(Ii,!0);function Ol(n,t){var e=!0;return Ht(n,function(r,s,o){return e=!!t(r,s,o),e}),e}function Er(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],a=t(o);if(a!=null&&(l===i?a===a&&!et(a):e(a,l)))var l=a,h=o}return h}function Dl(n,t,e,r){var s=n.length;for(e=z(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:z(r),r<0&&(r+=s),r=e>r?0:Wo(r);e<r;)n[e++]=t;return n}function yu(n,t){var e=[];return Ht(n,function(r,s,o){t(r,s,o)&&e.push(r)}),e}function Wn(n,t,e,r,s){var o=-1,a=n.length;for(e||(e=yc),s||(s=[]);++o<a;){var l=n[o];t>0&&e(l)?t>1?Wn(l,t-1,e,r,s):kt(s,l):r||(s[s.length]=l)}return s}var Si=zu(),Au=zu(!0);function At(n,t){return n&&Si(n,t,Pn)}function Ii(n,t){return n&&Au(n,t,Pn)}function Cr(n,t){return Nt(t,function(e){return Dt(n[e])})}function le(n,t){t=Kt(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[It(t[e++])];return e&&e==r?n:i}function Su(n,t,e){var r=t(n);return H(n)?r:kt(r,e(n))}function Hn(n){return n==null?n===i?rr:Jr:ue&&ue in gn(n)?dc(n):Mc(n)}function Ei(n,t){return n>t}function Pl(n,t){return n!=null&&ln.call(n,t)}function Fl(n,t){return n!=null&&t in gn(n)}function Ul(n,t,e){return n>=kn(t,e)&&n<bn(t,e)}function Ci(n,t,e){for(var r=e?fi:or,s=n[0].length,o=n.length,a=o,l=p(o),h=1/0,m=[];a--;){var y=n[a];a&&t&&(y=xn(y,nt(t))),h=kn(y.length,h),l[a]=!e&&(t||s>=120&&y.length>=120)?new fe(a&&y):i}y=n[0];var S=-1,C=l[0];n:for(;++S<s&&m.length<h;){var T=y[S],U=t?t(T):T;if(T=e||T!==0?T:0,!(C?Fe(C,U):r(m,U,e))){for(a=o;--a;){var V=l[a];if(!(V?Fe(V,U):r(n[a],U,e)))continue n}C&&C.push(U),m.push(T)}}return m}function Bl(n,t,e,r){return At(n,function(s,o,a){t(r,e(s),o,a)}),r}function He(n,t,e){t=Kt(t,n),n=lo(n,t);var r=n==null?n:n[It(ht(t))];return r==null?i:jn(r,n,e)}function Iu(n){return En(n)&&Hn(n)==yt}function Wl(n){return En(n)&&Hn(n)==E}function Nl(n){return En(n)&&Hn(n)==ne}function Ze(n,t,e,r,s){return n===t?!0:n==null||t==null||!En(n)&&!En(t)?n!==n&&t!==t:kl(n,t,e,r,Ze,s)}function kl(n,t,e,r,s,o){var a=H(n),l=H(t),h=a?_e:$n(n),m=l?_e:$n(t);h=h==yt?pt:h,m=m==yt?pt:m;var y=h==pt,S=m==pt,C=h==m;if(C&&zt(n)){if(!zt(t))return!1;a=!0,y=!1}if(C&&!y)return o||(o=new vt),a||Oe(n)?ro(n,t,e,r,s,o):gc(n,t,h,e,r,s,o);if(!(e&j)){var T=y&&ln.call(n,"__wrapped__"),U=S&&ln.call(t,"__wrapped__");if(T||U){var V=T?n.value():n,B=U?t.value():t;return o||(o=new vt),s(V,B,e,r,o)}}return C?(o||(o=new vt),pc(n,t,e,r,s,o)):!1}function $l(n){return En(n)&&$n(n)==Jn}function Li(n,t,e,r){var s=e.length,o=s,a=!r;if(n==null)return!o;for(n=gn(n);s--;){var l=e[s];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<o;){l=e[s];var h=l[0],m=n[h],y=l[1];if(a&&l[2]){if(m===i&&!(h in n))return!1}else{var S=new vt;if(r)var C=r(m,y,h,n,t,S);if(!(C===i?Ze(y,m,j|rn,r,S):C))return!1}}return!0}function Eu(n){if(!An(n)||Sc(n))return!1;var t=Dt(n)?$a:bf;return t.test(he(n))}function Gl(n){return En(n)&&Hn(n)==ee}function Hl(n){return En(n)&&$n(n)==Qn}function Zl(n){return En(n)&&Hr(n.length)&&!!vn[Hn(n)]}function Cu(n){return typeof n=="function"?n:n==null?Xn:typeof n=="object"?H(n)?Ru(n[0],n[1]):Mu(n):Yo(n)}function Mi(n){if(!ze(n))return za(n);var t=[];for(var e in gn(n))ln.call(n,e)&&e!="constructor"&&t.push(e);return t}function Kl(n){if(!An(n))return Lc(n);var t=ze(n),e=[];for(var r in n)r=="constructor"&&(t||!ln.call(n,r))||e.push(r);return e}function Ri(n,t){return n<t}function Lu(n,t){var e=-1,r=Vn(n)?p(n.length):[];return Ht(n,function(s,o,a){r[++e]=t(s,o,a)}),r}function Mu(n){var t=Zi(n);return t.length==1&&t[0][2]?fo(t[0][0],t[0][1]):function(e){return e===n||Li(e,n,t)}}function Ru(n,t){return qi(n)&&oo(t)?fo(It(n),t):function(e){var r=es(e,n);return r===i&&r===t?rs(e,n):Ze(t,r,j|rn)}}function Lr(n,t,e,r,s){n!==t&&Si(t,function(o,a){if(s||(s=new vt),An(o))ql(n,t,a,e,Lr,r,s);else{var l=r?r(Vi(n,a),o,a+"",n,t,s):i;l===i&&(l=o),yi(n,a,l)}},Yn)}function ql(n,t,e,r,s,o,a){var l=Vi(n,e),h=Vi(t,e),m=a.get(h);if(m){yi(n,e,m);return}var y=o?o(l,h,e+"",n,t,a):i,S=y===i;if(S){var C=H(h),T=!C&&zt(h),U=!C&&!T&&Oe(h);y=h,C||T||U?H(l)?y=l:Ln(l)?y=zn(l):T?(S=!1,y=$u(h,!0)):U?(S=!1,y=Gu(h,!0)):y=[]:Ye(h)||ge(h)?(y=l,ge(l)?y=No(l):(!An(l)||Dt(l))&&(y=uo(h))):S=!1}S&&(a.set(h,y),s(y,h,r,o,a),a.delete(h)),yi(n,e,y)}function Tu(n,t){var e=n.length;if(e)return t+=t<0?e:0,Ot(t,e)?n[t]:i}function bu(n,t,e){t.length?t=xn(t,function(o){return H(o)?function(a){return le(a,o.length===1?o[0]:o)}:o}):t=[Xn];var r=-1;t=xn(t,nt(F()));var s=Lu(n,function(o,a,l){var h=xn(t,function(m){return m(o)});return{criteria:h,index:++r,value:o}});return xa(s,function(o,a){return sc(o,a,e)})}function zl(n,t){return Ou(n,t,function(e,r){return rs(n,r)})}function Ou(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var a=t[r],l=le(n,a);e(l,a)&&Ke(o,Kt(a,n),l)}return o}function Vl(n){return function(t){return le(t,n)}}function Ti(n,t,e,r){var s=r?wa:ye,o=-1,a=t.length,l=n;for(n===t&&(t=zn(t)),e&&(l=xn(n,nt(e)));++o<a;)for(var h=0,m=t[o],y=e?e(m):m;(h=s(l,y,h,r))>-1;)l!==n&&vr.call(l,h,1),vr.call(n,h,1);return n}function Du(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;Ot(s)?vr.call(n,s,1):Pi(n,s)}}return n}function bi(n,t){return n+mr(gu()*(t-n+1))}function Yl(n,t,e,r){for(var s=-1,o=bn(xr((t-n)/(e||1)),0),a=p(o);o--;)a[r?o:++s]=n,n+=e;return a}function Oi(n,t){var e="";if(!n||t<1||t>dn)return e;do t%2&&(e+=n),t=mr(t/2),t&&(n+=n);while(t);return e}function Y(n,t){return Yi(ao(n,t,Xn),n+"")}function Xl(n){return _u(De(n))}function Jl(n,t){var e=De(n);return Br(e,ae(t,0,e.length))}function Ke(n,t,e,r){if(!An(n))return n;t=Kt(t,n);for(var s=-1,o=t.length,a=o-1,l=n;l!=null&&++s<o;){var h=It(t[s]),m=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(s!=a){var y=l[h];m=r?r(y,h,l):i,m===i&&(m=An(y)?y:Ot(t[s+1])?[]:{})}$e(l,h,m),l=l[h]}return n}var Pu=yr?function(n,t){return yr.set(n,t),n}:Xn,Ql=wr?function(n,t){return wr(n,"toString",{configurable:!0,enumerable:!1,value:ss(t),writable:!0})}:Xn;function jl(n){return Br(De(n))}function ct(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=p(s);++r<s;)o[r]=n[r+t];return o}function nc(n,t){var e;return Ht(n,function(r,s,o){return e=t(r,s,o),!e}),!!e}function Mr(n,t,e){var r=0,s=n==null?r:n.length;if(typeof t=="number"&&t===t&&s<=nr){for(;r<s;){var o=r+s>>>1,a=n[o];a!==null&&!et(a)&&(e?a<=t:a<t)?r=o+1:s=o}return s}return Di(n,t,Xn,e)}function Di(n,t,e,r){var s=0,o=n==null?0:n.length;if(o===0)return 0;t=e(t);for(var a=t!==t,l=t===null,h=et(t),m=t===i;s<o;){var y=mr((s+o)/2),S=e(n[y]),C=S!==i,T=S===null,U=S===S,V=et(S);if(a)var B=r||U;else m?B=U&&(r||C):l?B=U&&C&&(r||!T):h?B=U&&C&&!T&&(r||!V):T||V?B=!1:B=r?S<=t:S<t;B?s=y+1:o=y}return kn(o,Jt)}function Fu(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!wt(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function Uu(n){return typeof n=="number"?n:et(n)?In:+n}function tt(n){if(typeof n=="string")return n;if(H(n))return xn(n,tt)+"";if(et(n))return pu?pu.call(n):"";var t=n+"";return t=="0"&&1/n==-Un?"-0":t}function Zt(n,t,e){var r=-1,s=or,o=n.length,a=!0,l=[],h=l;if(e)a=!1,s=fi;else if(o>=v){var m=t?null:cc(n);if(m)return ar(m);a=!1,s=Fe,h=new fe}else h=t?[]:l;n:for(;++r<o;){var y=n[r],S=t?t(y):y;if(y=e||y!==0?y:0,a&&S===S){for(var C=h.length;C--;)if(h[C]===S)continue n;t&&h.push(S),l.push(y)}else s(h,S,e)||(h!==l&&h.push(S),l.push(y))}return l}function Pi(n,t){return t=Kt(t,n),n=lo(n,t),n==null||delete n[It(ht(t))]}function Bu(n,t,e,r){return Ke(n,t,e(le(n,t)),r)}function Rr(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?ct(n,r?0:o,r?o+1:s):ct(n,r?o+1:0,r?s:o)}function Wu(n,t){var e=n;return e instanceof tn&&(e=e.value()),ai(t,function(r,s){return s.func.apply(s.thisArg,kt([r],s.args))},e)}function Fi(n,t,e){var r=n.length;if(r<2)return r?Zt(n[0]):[];for(var s=-1,o=p(r);++s<r;)for(var a=n[s],l=-1;++l<r;)l!=s&&(o[s]=Ge(o[s]||a,n[l],t,e));return Zt(Wn(o,1),t,e)}function Nu(n,t,e){for(var r=-1,s=n.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:i;e(a,n[r],l)}return a}function Ui(n){return Ln(n)?n:[]}function Bi(n){return typeof n=="function"?n:Xn}function Kt(n,t){return H(n)?n:qi(n,t)?[n]:po(an(n))}var tc=Y;function qt(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:ct(n,t,e)}var ku=Ga||function(n){return Bn.clearTimeout(n)};function $u(n,t){if(t)return n.slice();var e=n.length,r=fu?fu(e):new n.constructor(e);return n.copy(r),r}function Wi(n){var t=new n.constructor(n.byteLength);return new dr(t).set(new dr(n)),t}function ec(n,t){var e=t?Wi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}function rc(n){var t=new n.constructor(n.source,Is.exec(n));return t.lastIndex=n.lastIndex,t}function ic(n){return ke?gn(ke.call(n)):{}}function Gu(n,t){var e=t?Wi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function Hu(n,t){if(n!==t){var e=n!==i,r=n===null,s=n===n,o=et(n),a=t!==i,l=t===null,h=t===t,m=et(t);if(!l&&!m&&!o&&n>t||o&&a&&h&&!l&&!m||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!m&&n<t||m&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function sc(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,a=s.length,l=e.length;++r<a;){var h=Hu(s[r],o[r]);if(h){if(r>=l)return h;var m=e[r];return h*(m=="desc"?-1:1)}}return n.index-t.index}function Zu(n,t,e,r){for(var s=-1,o=n.length,a=e.length,l=-1,h=t.length,m=bn(o-a,0),y=p(h+m),S=!r;++l<h;)y[l]=t[l];for(;++s<a;)(S||s<o)&&(y[e[s]]=n[s]);for(;m--;)y[l++]=n[s++];return y}function Ku(n,t,e,r){for(var s=-1,o=n.length,a=-1,l=e.length,h=-1,m=t.length,y=bn(o-l,0),S=p(y+m),C=!r;++s<y;)S[s]=n[s];for(var T=s;++h<m;)S[T+h]=t[h];for(;++a<l;)(C||s<o)&&(S[T+e[a]]=n[s++]);return S}function zn(n,t){var e=-1,r=n.length;for(t||(t=p(r));++e<r;)t[e]=n[e];return t}function St(n,t,e,r){var s=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var l=t[o],h=r?r(e[l],n[l],l,e,n):i;h===i&&(h=n[l]),s?Rt(e,l,h):$e(e,l,h)}return e}function uc(n,t){return St(n,Ki(n),t)}function oc(n,t){return St(n,io(n),t)}function Tr(n,t){return function(e,r){var s=H(e)?ha:Rl,o=t?t():{};return s(e,n,F(r,2),o)}}function Re(n){return Y(function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=n.length>3&&typeof o=="function"?(s--,o):i,a&&Zn(e[0],e[1],a)&&(o=s<3?i:o,s=1),t=gn(t);++r<s;){var l=e[r];l&&n(t,l,r,o)}return t})}function qu(n,t){return function(e,r){if(e==null)return e;if(!Vn(e))return n(e,r);for(var s=e.length,o=t?s:-1,a=gn(e);(t?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function zu(n){return function(t,e,r){for(var s=-1,o=gn(t),a=r(t),l=a.length;l--;){var h=a[n?l:++s];if(e(o[h],h,o)===!1)break}return t}}function fc(n,t,e){var r=t&$,s=qe(n);function o(){var a=this&&this!==Bn&&this instanceof o?s:n;return a.apply(r?e:this,arguments)}return o}function Vu(n){return function(t){t=an(t);var e=Ae(t)?_t(t):i,r=e?e[0]:t.charAt(0),s=e?qt(e,1).join(""):t.slice(1);return r[n]()+s}}function Te(n){return function(t){return ai(zo(qo(t).replace(Qf,"")),n,"")}}function qe(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Me(n.prototype),r=n.apply(e,t);return An(r)?r:e}}function ac(n,t,e){var r=qe(n);function s(){for(var o=arguments.length,a=p(o),l=o,h=be(s);l--;)a[l]=arguments[l];var m=o<3&&a[0]!==h&&a[o-1]!==h?[]:$t(a,h);if(o-=m.length,o<e)return ju(n,t,br,s.placeholder,i,a,m,i,i,e-o);var y=this&&this!==Bn&&this instanceof s?r:n;return jn(y,this,a)}return s}function Yu(n){return function(t,e,r){var s=gn(t);if(!Vn(t)){var o=F(e,3);t=Pn(t),e=function(l){return o(s[l],l,s)}}var a=n(t,e,r);return a>-1?s[o?t[a]:a]:i}}function Xu(n){return bt(function(t){var e=t.length,r=e,s=at.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new ft(w);if(s&&!a&&Fr(o)=="wrapper")var a=new at([],!0)}for(r=a?r:e;++r<e;){o=t[r];var l=Fr(o),h=l=="wrapper"?Hi(o):i;h&&zi(h[0])&&h[1]==(un|hn|Sn|On)&&!h[4].length&&h[9]==1?a=a[Fr(h[0])].apply(a,h[3]):a=o.length==1&&zi(o)?a[l]():a.thru(o)}return function(){var m=arguments,y=m[0];if(a&&m.length==1&&H(y))return a.plant(y).value();for(var S=0,C=e?t[S].apply(this,m):y;++S<e;)C=t[S].call(this,C);return C}})}function br(n,t,e,r,s,o,a,l,h,m){var y=t&un,S=t&$,C=t&X,T=t&(hn|pn),U=t&cn,V=C?i:qe(n);function B(){for(var J=arguments.length,en=p(J),rt=J;rt--;)en[rt]=arguments[rt];if(T)var Kn=be(B),it=ya(en,Kn);if(r&&(en=Zu(en,r,s,T)),o&&(en=Ku(en,o,a,T)),J-=it,T&&J<m){var Mn=$t(en,Kn);return ju(n,t,br,B.placeholder,e,en,Mn,l,h,m-J)}var xt=S?e:this,Ft=C?xt[n]:n;return J=en.length,l?en=Rc(en,l):U&&J>1&&en.reverse(),y&&h<J&&(en.length=h),this&&this!==Bn&&this instanceof B&&(Ft=V||qe(Ft)),Ft.apply(xt,en)}return B}function Ju(n,t){return function(e,r){return Bl(e,n,t(r),{})}}function Or(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=tt(e),r=tt(r)):(e=Uu(e),r=Uu(r)),s=n(e,r)}return s}}function Ni(n){return bt(function(t){return t=xn(t,nt(F())),Y(function(e){var r=this;return n(t,function(s){return jn(s,r,e)})})})}function Dr(n,t){t=t===i?" ":tt(t);var e=t.length;if(e<2)return e?Oi(t,n):t;var r=Oi(t,xr(n/Se(t)));return Ae(t)?qt(_t(r),0,n).join(""):r.slice(0,n)}function lc(n,t,e,r){var s=t&$,o=qe(n);function a(){for(var l=-1,h=arguments.length,m=-1,y=r.length,S=p(y+h),C=this&&this!==Bn&&this instanceof a?o:n;++m<y;)S[m]=r[m];for(;h--;)S[m++]=arguments[++l];return jn(C,s?e:this,S)}return a}function Qu(n){return function(t,e,r){return r&&typeof r!="number"&&Zn(t,e,r)&&(e=r=i),t=Pt(t),e===i?(e=t,t=0):e=Pt(e),r=r===i?t<e?1:-1:Pt(r),Yl(t,e,r,n)}}function Pr(n){return function(t,e){return typeof t=="string"&&typeof e=="string"||(t=gt(t),e=gt(e)),n(t,e)}}function ju(n,t,e,r,s,o,a,l,h,m){var y=t&hn,S=y?a:i,C=y?i:a,T=y?o:i,U=y?i:o;t|=y?Sn:Fn,t&=~(y?Fn:Sn),t&wn||(t&=~($|X));var V=[n,t,s,T,S,U,C,l,h,m],B=e.apply(i,V);return zi(n)&&co(B,V),B.placeholder=r,ho(B,n,t)}function ki(n){var t=Tn[n];return function(e,r){if(e=gt(e),r=r==null?0:kn(z(r),292),r&&hu(e)){var s=(an(e)+"e").split("e"),o=t(s[0]+"e"+(+s[1]+r));return s=(an(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return t(e)}}var cc=Ce&&1/ar(new Ce([,-0]))[1]==Un?function(n){return new Ce(n)}:fs;function no(n){return function(t){var e=$n(t);return e==Jn?_i(t):e==Qn?Ma(t):ma(t,n(t))}}function Tt(n,t,e,r,s,o,a,l){var h=t&X;if(!h&&typeof n!="function")throw new ft(w);var m=r?r.length:0;if(m||(t&=~(Sn|Fn),r=s=i),a=a===i?a:bn(z(a),0),l=l===i?l:z(l),m-=s?s.length:0,t&Fn){var y=r,S=s;r=s=i}var C=h?i:Hi(n),T=[n,t,e,r,s,y,S,o,a,l];if(C&&Cc(T,C),n=T[0],t=T[1],e=T[2],r=T[3],s=T[4],l=T[9]=T[9]===i?h?0:n.length:bn(T[9]-m,0),!l&&t&(hn|pn)&&(t&=~(hn|pn)),!t||t==$)var U=fc(n,t,e);else t==hn||t==pn?U=ac(n,t,l):(t==Sn||t==($|Sn))&&!s.length?U=lc(n,t,e,r):U=br.apply(i,T);var V=C?Pu:co;return ho(V(U,T),n,t)}function to(n,t,e,r){return n===i||wt(n,Ee[e])&&!ln.call(r,e)?t:n}function eo(n,t,e,r,s,o){return An(n)&&An(t)&&(o.set(t,n),Lr(n,t,i,eo,o),o.delete(t)),n}function hc(n){return Ye(n)?i:n}function ro(n,t,e,r,s,o){var a=e&j,l=n.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var m=o.get(n),y=o.get(t);if(m&&y)return m==t&&y==n;var S=-1,C=!0,T=e&rn?new fe:i;for(o.set(n,t),o.set(t,n);++S<l;){var U=n[S],V=t[S];if(r)var B=a?r(V,U,S,t,n,o):r(U,V,S,n,t,o);if(B!==i){if(B)continue;C=!1;break}if(T){if(!li(t,function(J,en){if(!Fe(T,en)&&(U===J||s(U,J,e,r,o)))return T.push(en)})){C=!1;break}}else if(!(U===V||s(U,V,e,r,o))){C=!1;break}}return o.delete(n),o.delete(t),C}function gc(n,t,e,r,s,o,a){switch(e){case R:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case E:return!(n.byteLength!=t.byteLength||!o(new dr(n),new dr(t)));case jt:case ne:case Ut:return wt(+n,+t);case te:return n.name==t.name&&n.message==t.message;case ee:case re:return n==t+"";case Jn:var l=_i;case Qn:var h=r&j;if(l||(l=ar),n.size!=t.size&&!h)return!1;var m=a.get(n);if(m)return m==t;r|=rn,a.set(n,t);var y=ro(l(n),l(t),r,s,o,a);return a.delete(n),y;case we:if(ke)return ke.call(n)==ke.call(t)}return!1}function pc(n,t,e,r,s,o){var a=e&j,l=$i(n),h=l.length,m=$i(t),y=m.length;if(h!=y&&!a)return!1;for(var S=h;S--;){var C=l[S];if(!(a?C in t:ln.call(t,C)))return!1}var T=o.get(n),U=o.get(t);if(T&&U)return T==t&&U==n;var V=!0;o.set(n,t),o.set(t,n);for(var B=a;++S<h;){C=l[S];var J=n[C],en=t[C];if(r)var rt=a?r(en,J,C,t,n,o):r(J,en,C,n,t,o);if(!(rt===i?J===en||s(J,en,e,r,o):rt)){V=!1;break}B||(B=C=="constructor")}if(V&&!B){var Kn=n.constructor,it=t.constructor;Kn!=it&&"constructor"in n&&"constructor"in t&&!(typeof Kn=="function"&&Kn instanceof Kn&&typeof it=="function"&&it instanceof it)&&(V=!1)}return o.delete(n),o.delete(t),V}function bt(n){return Yi(ao(n,i,xo),n+"")}function $i(n){return Su(n,Pn,Ki)}function Gi(n){return Su(n,Yn,io)}var Hi=yr?function(n){return yr.get(n)}:fs;function Fr(n){for(var t=n.name+"",e=Le[t],r=ln.call(Le,t)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==n)return s.name}return t}function be(n){var t=ln.call(u,"placeholder")?u:n;return t.placeholder}function F(){var n=u.iteratee||us;return n=n===us?Cu:n,arguments.length?n(arguments[0],arguments[1]):n}function Ur(n,t){var e=n.__data__;return Ac(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Zi(n){for(var t=Pn(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,oo(s)]}return t}function ce(n,t){var e=Ea(n,t);return Eu(e)?e:i}function dc(n){var t=ln.call(n,ue),e=n[ue];try{n[ue]=i;var r=!0}catch{}var s=gr.call(n);return r&&(t?n[ue]=e:delete n[ue]),s}var Ki=wi?function(n){return n==null?[]:(n=gn(n),Nt(wi(n),function(t){return lu.call(n,t)}))}:as,io=wi?function(n){for(var t=[];n;)kt(t,Ki(n)),n=_r(n);return t}:as,$n=Hn;(xi&&$n(new xi(new ArrayBuffer(1)))!=R||Be&&$n(new Be)!=Jn||mi&&$n(mi.resolve())!=er||Ce&&$n(new Ce)!=Qn||We&&$n(new We)!=ie)&&($n=function(n){var t=Hn(n),e=t==pt?n.constructor:i,r=e?he(e):"";if(r)switch(r){case Ja:return R;case Qa:return Jn;case ja:return er;case nl:return Qn;case tl:return ie}return t});function _c(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=kn(t,n+a);break;case"takeRight":n=bn(n,t-a);break}}return{start:n,end:t}}function vc(n){var t=n.match(Sf);return t?t[1].split(If):[]}function so(n,t,e){t=Kt(t,n);for(var r=-1,s=t.length,o=!1;++r<s;){var a=It(t[r]);if(!(o=n!=null&&e(n,a)))break;n=n[a]}return o||++r!=s?o:(s=n==null?0:n.length,!!s&&Hr(s)&&Ot(a,s)&&(H(n)||ge(n)))}function wc(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&ln.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function uo(n){return typeof n.constructor=="function"&&!ze(n)?Me(_r(n)):{}}function xc(n,t,e){var r=n.constructor;switch(t){case E:return Wi(n);case jt:case ne:return new r(+n);case R:return ec(n,e);case D:case G:case nn:case q:case sn:case yn:case Cn:case qn:case dt:return Gu(n,e);case Jn:return new r;case Ut:case re:return new r(n);case ee:return rc(n);case Qn:return new r;case we:return ic(n)}}function mc(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(Af,`{
/* [wrapped with `+t+`] */
`)}function yc(n){return H(n)||ge(n)||!!(cu&&n&&n[cu])}function Ot(n,t){var e=typeof n;return t=t??dn,!!t&&(e=="number"||e!="symbol"&&Df.test(n))&&n>-1&&n%1==0&&n<t}function Zn(n,t,e){if(!An(e))return!1;var r=typeof t;return(r=="number"?Vn(e)&&Ot(t,e.length):r=="string"&&t in e)?wt(e[t],n):!1}function qi(n,t){if(H(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||et(n)?!0:wf.test(n)||!vf.test(n)||t!=null&&n in gn(t)}function Ac(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function zi(n){var t=Fr(n),e=u[t];if(typeof e!="function"||!(t in tn.prototype))return!1;if(n===e)return!0;var r=Hi(e);return!!r&&n===r[0]}function Sc(n){return!!ou&&ou in n}var Ic=cr?Dt:ls;function ze(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Ee;return n===e}function oo(n){return n===n&&!An(n)}function fo(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==i||n in gn(e))}}function Ec(n){var t=$r(n,function(r){return e.size===b&&e.clear(),r}),e=t.cache;return t}function Cc(n,t){var e=n[1],r=t[1],s=e|r,o=s<($|X|un),a=r==un&&e==hn||r==un&&e==On&&n[7].length<=t[8]||r==(un|On)&&t[7].length<=t[8]&&e==hn;if(!(o||a))return n;r&$&&(n[2]=t[2],s|=e&$?0:wn);var l=t[3];if(l){var h=n[3];n[3]=h?Zu(h,l,t[4]):l,n[4]=h?$t(n[3],P):t[4]}return l=t[5],l&&(h=n[5],n[5]=h?Ku(h,l,t[6]):l,n[6]=h?$t(n[5],P):t[6]),l=t[7],l&&(n[7]=l),r&un&&(n[8]=n[8]==null?t[8]:kn(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}function Lc(n){var t=[];if(n!=null)for(var e in gn(n))t.push(e);return t}function Mc(n){return gr.call(n)}function ao(n,t,e){return t=bn(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=bn(r.length-t,0),a=p(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=p(t+1);++s<t;)l[s]=r[s];return l[t]=e(a),jn(n,this,l)}}function lo(n,t){return t.length<2?n:le(n,ct(t,0,-1))}function Rc(n,t){for(var e=n.length,r=kn(t.length,e),s=zn(n);r--;){var o=t[r];n[r]=Ot(o,e)?s[o]:i}return n}function Vi(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var co=go(Pu),Ve=Za||function(n,t){return Bn.setTimeout(n,t)},Yi=go(Ql);function ho(n,t,e){var r=t+"";return Yi(n,mc(r,Tc(vc(r),e)))}function go(n){var t=0,e=0;return function(){var r=Va(),s=Nn-(r-e);if(e=r,s>0){if(++t>=mn)return arguments[0]}else t=0;return n.apply(i,arguments)}}function Br(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=bi(e,s),a=n[o];n[o]=n[e],n[e]=a}return n.length=t,n}var po=Ec(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(xf,function(e,r,s,o){t.push(s?o.replace(Lf,"$1"):r||e)}),t});function It(n){if(typeof n=="string"||et(n))return n;var t=n+"";return t=="0"&&1/n==-Un?"-0":t}function he(n){if(n!=null){try{return hr.call(n)}catch{}try{return n+""}catch{}}return""}function Tc(n,t){return ot(Qt,function(e){var r="_."+e[0];t&e[1]&&!or(n,r)&&n.push(r)}),n.sort()}function _o(n){if(n instanceof tn)return n.clone();var t=new at(n.__wrapped__,n.__chain__);return t.__actions__=zn(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function bc(n,t,e){(e?Zn(n,t,e):t===i)?t=1:t=bn(z(t),0);var r=n==null?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,a=p(xr(r/t));s<r;)a[o++]=ct(n,s,s+=t);return a}function Oc(n){for(var t=-1,e=n==null?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s}function Dc(){var n=arguments.length;if(!n)return[];for(var t=p(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return kt(H(e)?zn(e):[e],Wn(t,1))}var Pc=Y(function(n,t){return Ln(n)?Ge(n,Wn(t,1,Ln,!0)):[]}),Fc=Y(function(n,t){var e=ht(t);return Ln(e)&&(e=i),Ln(n)?Ge(n,Wn(t,1,Ln,!0),F(e,2)):[]}),Uc=Y(function(n,t){var e=ht(t);return Ln(e)&&(e=i),Ln(n)?Ge(n,Wn(t,1,Ln,!0),i,e):[]});function Bc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:z(t),ct(n,t<0?0:t,r)):[]}function Wc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:z(t),t=r-t,ct(n,0,t<0?0:t)):[]}function Nc(n,t){return n&&n.length?Rr(n,F(t,3),!0,!0):[]}function kc(n,t){return n&&n.length?Rr(n,F(t,3),!0):[]}function $c(n,t,e,r){var s=n==null?0:n.length;return s?(e&&typeof e!="number"&&Zn(n,t,e)&&(e=0,r=s),Dl(n,t,e,r)):[]}function vo(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:z(e);return s<0&&(s=bn(r+s,0)),fr(n,F(t,3),s)}function wo(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=z(e),s=e<0?bn(r+s,0):kn(s,r-1)),fr(n,F(t,3),s,!0)}function xo(n){var t=n==null?0:n.length;return t?Wn(n,1):[]}function Gc(n){var t=n==null?0:n.length;return t?Wn(n,Un):[]}function Hc(n,t){var e=n==null?0:n.length;return e?(t=t===i?1:z(t),Wn(n,t)):[]}function Zc(n){for(var t=-1,e=n==null?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r}function mo(n){return n&&n.length?n[0]:i}function Kc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:z(e);return s<0&&(s=bn(r+s,0)),ye(n,t,s)}function qc(n){var t=n==null?0:n.length;return t?ct(n,0,-1):[]}var zc=Y(function(n){var t=xn(n,Ui);return t.length&&t[0]===n[0]?Ci(t):[]}),Vc=Y(function(n){var t=ht(n),e=xn(n,Ui);return t===ht(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Ci(e,F(t,2)):[]}),Yc=Y(function(n){var t=ht(n),e=xn(n,Ui);return t=typeof t=="function"?t:i,t&&e.pop(),e.length&&e[0]===n[0]?Ci(e,i,t):[]});function Xc(n,t){return n==null?"":qa.call(n,t)}function ht(n){var t=n==null?0:n.length;return t?n[t-1]:i}function Jc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=z(e),s=s<0?bn(r+s,0):kn(s,r-1)),t===t?Ta(n,t,s):fr(n,js,s,!0)}function Qc(n,t){return n&&n.length?Tu(n,z(t)):i}var jc=Y(yo);function yo(n,t){return n&&n.length&&t&&t.length?Ti(n,t):n}function nh(n,t,e){return n&&n.length&&t&&t.length?Ti(n,t,F(e,2)):n}function th(n,t,e){return n&&n.length&&t&&t.length?Ti(n,t,i,e):n}var eh=bt(function(n,t){var e=n==null?0:n.length,r=Ai(n,t);return Du(n,xn(t,function(s){return Ot(s,e)?+s:s}).sort(Hu)),r});function rh(n,t){var e=[];if(!(n&&n.length))return e;var r=-1,s=[],o=n.length;for(t=F(t,3);++r<o;){var a=n[r];t(a,r,n)&&(e.push(a),s.push(r))}return Du(n,s),e}function Xi(n){return n==null?n:Xa.call(n)}function ih(n,t,e){var r=n==null?0:n.length;return r?(e&&typeof e!="number"&&Zn(n,t,e)?(t=0,e=r):(t=t==null?0:z(t),e=e===i?r:z(e)),ct(n,t,e)):[]}function sh(n,t){return Mr(n,t)}function uh(n,t,e){return Di(n,t,F(e,2))}function oh(n,t){var e=n==null?0:n.length;if(e){var r=Mr(n,t);if(r<e&&wt(n[r],t))return r}return-1}function fh(n,t){return Mr(n,t,!0)}function ah(n,t,e){return Di(n,t,F(e,2),!0)}function lh(n,t){var e=n==null?0:n.length;if(e){var r=Mr(n,t,!0)-1;if(wt(n[r],t))return r}return-1}function ch(n){return n&&n.length?Fu(n):[]}function hh(n,t){return n&&n.length?Fu(n,F(t,2)):[]}function gh(n){var t=n==null?0:n.length;return t?ct(n,1,t):[]}function ph(n,t,e){return n&&n.length?(t=e||t===i?1:z(t),ct(n,0,t<0?0:t)):[]}function dh(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:z(t),t=r-t,ct(n,t<0?0:t,r)):[]}function _h(n,t){return n&&n.length?Rr(n,F(t,3),!1,!0):[]}function vh(n,t){return n&&n.length?Rr(n,F(t,3)):[]}var wh=Y(function(n){return Zt(Wn(n,1,Ln,!0))}),xh=Y(function(n){var t=ht(n);return Ln(t)&&(t=i),Zt(Wn(n,1,Ln,!0),F(t,2))}),mh=Y(function(n){var t=ht(n);return t=typeof t=="function"?t:i,Zt(Wn(n,1,Ln,!0),i,t)});function yh(n){return n&&n.length?Zt(n):[]}function Ah(n,t){return n&&n.length?Zt(n,F(t,2)):[]}function Sh(n,t){return t=typeof t=="function"?t:i,n&&n.length?Zt(n,i,t):[]}function Ji(n){if(!(n&&n.length))return[];var t=0;return n=Nt(n,function(e){if(Ln(e))return t=bn(e.length,t),!0}),pi(t,function(e){return xn(n,ci(e))})}function Ao(n,t){if(!(n&&n.length))return[];var e=Ji(n);return t==null?e:xn(e,function(r){return jn(t,i,r)})}var Ih=Y(function(n,t){return Ln(n)?Ge(n,t):[]}),Eh=Y(function(n){return Fi(Nt(n,Ln))}),Ch=Y(function(n){var t=ht(n);return Ln(t)&&(t=i),Fi(Nt(n,Ln),F(t,2))}),Lh=Y(function(n){var t=ht(n);return t=typeof t=="function"?t:i,Fi(Nt(n,Ln),i,t)}),Mh=Y(Ji);function Rh(n,t){return Nu(n||[],t||[],$e)}function Th(n,t){return Nu(n||[],t||[],Ke)}var bh=Y(function(n){var t=n.length,e=t>1?n[t-1]:i;return e=typeof e=="function"?(n.pop(),e):i,Ao(n,e)});function So(n){var t=u(n);return t.__chain__=!0,t}function Oh(n,t){return t(n),n}function Wr(n,t){return t(n)}var Dh=bt(function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return Ai(o,n)};return t>1||this.__actions__.length||!(r instanceof tn)||!Ot(e)?this.thru(s):(r=r.slice(e,+e+(t?1:0)),r.__actions__.push({func:Wr,args:[s],thisArg:i}),new at(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(i),o}))});function Ph(){return So(this)}function Fh(){return new at(this.value(),this.__chain__)}function Uh(){this.__values__===i&&(this.__values__=Bo(this.value()));var n=this.__index__>=this.__values__.length,t=n?i:this.__values__[this.__index__++];return{done:n,value:t}}function Bh(){return this}function Wh(n){for(var t,e=this;e instanceof Sr;){var r=_o(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t}function Nh(){var n=this.__wrapped__;if(n instanceof tn){var t=n;return this.__actions__.length&&(t=new tn(this)),t=t.reverse(),t.__actions__.push({func:Wr,args:[Xi],thisArg:i}),new at(t,this.__chain__)}return this.thru(Xi)}function kh(){return Wu(this.__wrapped__,this.__actions__)}var $h=Tr(function(n,t,e){ln.call(n,e)?++n[e]:Rt(n,e,1)});function Gh(n,t,e){var r=H(n)?Js:Ol;return e&&Zn(n,t,e)&&(t=i),r(n,F(t,3))}function Hh(n,t){var e=H(n)?Nt:yu;return e(n,F(t,3))}var Zh=Yu(vo),Kh=Yu(wo);function qh(n,t){return Wn(Nr(n,t),1)}function zh(n,t){return Wn(Nr(n,t),Un)}function Vh(n,t,e){return e=e===i?1:z(e),Wn(Nr(n,t),e)}function Io(n,t){var e=H(n)?ot:Ht;return e(n,F(t,3))}function Eo(n,t){var e=H(n)?ga:mu;return e(n,F(t,3))}var Yh=Tr(function(n,t,e){ln.call(n,e)?n[e].push(t):Rt(n,e,[t])});function Xh(n,t,e,r){n=Vn(n)?n:De(n),e=e&&!r?z(e):0;var s=n.length;return e<0&&(e=bn(s+e,0)),Zr(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&ye(n,t,e)>-1}var Jh=Y(function(n,t,e){var r=-1,s=typeof t=="function",o=Vn(n)?p(n.length):[];return Ht(n,function(a){o[++r]=s?jn(t,a,e):He(a,t,e)}),o}),Qh=Tr(function(n,t,e){Rt(n,e,t)});function Nr(n,t){var e=H(n)?xn:Lu;return e(n,F(t,3))}function jh(n,t,e,r){return n==null?[]:(H(t)||(t=t==null?[]:[t]),e=r?i:e,H(e)||(e=e==null?[]:[e]),bu(n,t,e))}var ng=Tr(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]});function tg(n,t,e){var r=H(n)?ai:tu,s=arguments.length<3;return r(n,F(t,4),e,s,Ht)}function eg(n,t,e){var r=H(n)?pa:tu,s=arguments.length<3;return r(n,F(t,4),e,s,mu)}function rg(n,t){var e=H(n)?Nt:yu;return e(n,Gr(F(t,3)))}function ig(n){var t=H(n)?_u:Xl;return t(n)}function sg(n,t,e){(e?Zn(n,t,e):t===i)?t=1:t=z(t);var r=H(n)?Ll:Jl;return r(n,t)}function ug(n){var t=H(n)?Ml:jl;return t(n)}function og(n){if(n==null)return 0;if(Vn(n))return Zr(n)?Se(n):n.length;var t=$n(n);return t==Jn||t==Qn?n.size:Mi(n).length}function fg(n,t,e){var r=H(n)?li:nc;return e&&Zn(n,t,e)&&(t=i),r(n,F(t,3))}var ag=Y(function(n,t){if(n==null)return[];var e=t.length;return e>1&&Zn(n,t[0],t[1])?t=[]:e>2&&Zn(t[0],t[1],t[2])&&(t=[t[0]]),bu(n,Wn(t,1),[])}),kr=Ha||function(){return Bn.Date.now()};function lg(n,t){if(typeof t!="function")throw new ft(w);return n=z(n),function(){if(--n<1)return t.apply(this,arguments)}}function Co(n,t,e){return t=e?i:t,t=n&&t==null?n.length:t,Tt(n,un,i,i,i,i,t)}function Lo(n,t){var e;if(typeof t!="function")throw new ft(w);return n=z(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Qi=Y(function(n,t,e){var r=$;if(e.length){var s=$t(e,be(Qi));r|=Sn}return Tt(n,r,t,e,s)}),Mo=Y(function(n,t,e){var r=$|X;if(e.length){var s=$t(e,be(Mo));r|=Sn}return Tt(t,r,n,e,s)});function Ro(n,t,e){t=e?i:t;var r=Tt(n,hn,i,i,i,i,i,t);return r.placeholder=Ro.placeholder,r}function To(n,t,e){t=e?i:t;var r=Tt(n,pn,i,i,i,i,i,t);return r.placeholder=To.placeholder,r}function bo(n,t,e){var r,s,o,a,l,h,m=0,y=!1,S=!1,C=!0;if(typeof n!="function")throw new ft(w);t=gt(t)||0,An(e)&&(y=!!e.leading,S="maxWait"in e,o=S?bn(gt(e.maxWait)||0,t):o,C="trailing"in e?!!e.trailing:C);function T(Mn){var xt=r,Ft=s;return r=s=i,m=Mn,a=n.apply(Ft,xt),a}function U(Mn){return m=Mn,l=Ve(J,t),y?T(Mn):a}function V(Mn){var xt=Mn-h,Ft=Mn-m,Xo=t-xt;return S?kn(Xo,o-Ft):Xo}function B(Mn){var xt=Mn-h,Ft=Mn-m;return h===i||xt>=t||xt<0||S&&Ft>=o}function J(){var Mn=kr();if(B(Mn))return en(Mn);l=Ve(J,V(Mn))}function en(Mn){return l=i,C&&r?T(Mn):(r=s=i,a)}function rt(){l!==i&&ku(l),m=0,r=h=s=l=i}function Kn(){return l===i?a:en(kr())}function it(){var Mn=kr(),xt=B(Mn);if(r=arguments,s=this,h=Mn,xt){if(l===i)return U(h);if(S)return ku(l),l=Ve(J,t),T(h)}return l===i&&(l=Ve(J,t)),a}return it.cancel=rt,it.flush=Kn,it}var cg=Y(function(n,t){return xu(n,1,t)}),hg=Y(function(n,t,e){return xu(n,gt(t)||0,e)});function gg(n){return Tt(n,cn)}function $r(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new ft(w);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=n.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new($r.Cache||Mt),e}$r.Cache=Mt;function Gr(n){if(typeof n!="function")throw new ft(w);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function pg(n){return Lo(2,n)}var dg=tc(function(n,t){t=t.length==1&&H(t[0])?xn(t[0],nt(F())):xn(Wn(t,1),nt(F()));var e=t.length;return Y(function(r){for(var s=-1,o=kn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return jn(n,this,r)})}),ji=Y(function(n,t){var e=$t(t,be(ji));return Tt(n,Sn,i,t,e)}),Oo=Y(function(n,t){var e=$t(t,be(Oo));return Tt(n,Fn,i,t,e)}),_g=bt(function(n,t){return Tt(n,On,i,i,i,t)});function vg(n,t){if(typeof n!="function")throw new ft(w);return t=t===i?t:z(t),Y(n,t)}function wg(n,t){if(typeof n!="function")throw new ft(w);return t=t==null?0:bn(z(t),0),Y(function(e){var r=e[t],s=qt(e,0,t);return r&&kt(s,r),jn(n,this,s)})}function xg(n,t,e){var r=!0,s=!0;if(typeof n!="function")throw new ft(w);return An(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),bo(n,t,{leading:r,maxWait:t,trailing:s})}function mg(n){return Co(n,1)}function yg(n,t){return ji(Bi(t),n)}function Ag(){if(!arguments.length)return[];var n=arguments[0];return H(n)?n:[n]}function Sg(n){return lt(n,K)}function Ig(n,t){return t=typeof t=="function"?t:i,lt(n,K,t)}function Eg(n){return lt(n,M|K)}function Cg(n,t){return t=typeof t=="function"?t:i,lt(n,M|K,t)}function Lg(n,t){return t==null||wu(n,t,Pn(t))}function wt(n,t){return n===t||n!==n&&t!==t}var Mg=Pr(Ei),Rg=Pr(function(n,t){return n>=t}),ge=Iu(function(){return arguments}())?Iu:function(n){return En(n)&&ln.call(n,"callee")&&!lu.call(n,"callee")},H=p.isArray,Tg=Ks?nt(Ks):Wl;function Vn(n){return n!=null&&Hr(n.length)&&!Dt(n)}function Ln(n){return En(n)&&Vn(n)}function bg(n){return n===!0||n===!1||En(n)&&Hn(n)==jt}var zt=Ka||ls,Og=qs?nt(qs):Nl;function Dg(n){return En(n)&&n.nodeType===1&&!Ye(n)}function Pg(n){if(n==null)return!0;if(Vn(n)&&(H(n)||typeof n=="string"||typeof n.splice=="function"||zt(n)||Oe(n)||ge(n)))return!n.length;var t=$n(n);if(t==Jn||t==Qn)return!n.size;if(ze(n))return!Mi(n).length;for(var e in n)if(ln.call(n,e))return!1;return!0}function Fg(n,t){return Ze(n,t)}function Ug(n,t,e){e=typeof e=="function"?e:i;var r=e?e(n,t):i;return r===i?Ze(n,t,i,e):!!r}function ns(n){if(!En(n))return!1;var t=Hn(n);return t==te||t==Pe||typeof n.message=="string"&&typeof n.name=="string"&&!Ye(n)}function Bg(n){return typeof n=="number"&&hu(n)}function Dt(n){if(!An(n))return!1;var t=Hn(n);return t==ve||t==tr||t==Xr||t==Qr}function Do(n){return typeof n=="number"&&n==z(n)}function Hr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=dn}function An(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function En(n){return n!=null&&typeof n=="object"}var Po=zs?nt(zs):$l;function Wg(n,t){return n===t||Li(n,t,Zi(t))}function Ng(n,t,e){return e=typeof e=="function"?e:i,Li(n,t,Zi(t),e)}function kg(n){return Fo(n)&&n!=+n}function $g(n){if(Ic(n))throw new k(x);return Eu(n)}function Gg(n){return n===null}function Hg(n){return n==null}function Fo(n){return typeof n=="number"||En(n)&&Hn(n)==Ut}function Ye(n){if(!En(n)||Hn(n)!=pt)return!1;var t=_r(n);if(t===null)return!0;var e=ln.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&hr.call(e)==Na}var ts=Vs?nt(Vs):Gl;function Zg(n){return Do(n)&&n>=-dn&&n<=dn}var Uo=Ys?nt(Ys):Hl;function Zr(n){return typeof n=="string"||!H(n)&&En(n)&&Hn(n)==re}function et(n){return typeof n=="symbol"||En(n)&&Hn(n)==we}var Oe=Xs?nt(Xs):Zl;function Kg(n){return n===i}function qg(n){return En(n)&&$n(n)==ie}function zg(n){return En(n)&&Hn(n)==A}var Vg=Pr(Ri),Yg=Pr(function(n,t){return n<=t});function Bo(n){if(!n)return[];if(Vn(n))return Zr(n)?_t(n):zn(n);if(Ue&&n[Ue])return La(n[Ue]());var t=$n(n),e=t==Jn?_i:t==Qn?ar:De;return e(n)}function Pt(n){if(!n)return n===0?n:0;if(n=gt(n),n===Un||n===-Un){var t=n<0?-1:1;return t*Ct}return n===n?n:0}function z(n){var t=Pt(n),e=t%1;return t===t?e?t-e:t:0}function Wo(n){return n?ae(z(n),0,Rn):0}function gt(n){if(typeof n=="number")return n;if(et(n))return In;if(An(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=An(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=eu(n);var e=Tf.test(n);return e||Of.test(n)?la(n.slice(2),e?2:8):Rf.test(n)?In:+n}function No(n){return St(n,Yn(n))}function Xg(n){return n?ae(z(n),-dn,dn):n===0?n:0}function an(n){return n==null?"":tt(n)}var Jg=Re(function(n,t){if(ze(t)||Vn(t)){St(t,Pn(t),n);return}for(var e in t)ln.call(t,e)&&$e(n,e,t[e])}),ko=Re(function(n,t){St(t,Yn(t),n)}),Kr=Re(function(n,t,e,r){St(t,Yn(t),n,r)}),Qg=Re(function(n,t,e,r){St(t,Pn(t),n,r)}),jg=bt(Ai);function np(n,t){var e=Me(n);return t==null?e:vu(e,t)}var tp=Y(function(n,t){n=gn(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&Zn(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],a=Yn(o),l=-1,h=a.length;++l<h;){var m=a[l],y=n[m];(y===i||wt(y,Ee[m])&&!ln.call(n,m))&&(n[m]=o[m])}return n}),ep=Y(function(n){return n.push(i,eo),jn($o,i,n)});function rp(n,t){return Qs(n,F(t,3),At)}function ip(n,t){return Qs(n,F(t,3),Ii)}function sp(n,t){return n==null?n:Si(n,F(t,3),Yn)}function up(n,t){return n==null?n:Au(n,F(t,3),Yn)}function op(n,t){return n&&At(n,F(t,3))}function fp(n,t){return n&&Ii(n,F(t,3))}function ap(n){return n==null?[]:Cr(n,Pn(n))}function lp(n){return n==null?[]:Cr(n,Yn(n))}function es(n,t,e){var r=n==null?i:le(n,t);return r===i?e:r}function cp(n,t){return n!=null&&so(n,t,Pl)}function rs(n,t){return n!=null&&so(n,t,Fl)}var hp=Ju(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=gr.call(t)),n[t]=e},ss(Xn)),gp=Ju(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=gr.call(t)),ln.call(n,t)?n[t].push(e):n[t]=[e]},F),pp=Y(He);function Pn(n){return Vn(n)?du(n):Mi(n)}function Yn(n){return Vn(n)?du(n,!0):Kl(n)}function dp(n,t){var e={};return t=F(t,3),At(n,function(r,s,o){Rt(e,t(r,s,o),r)}),e}function _p(n,t){var e={};return t=F(t,3),At(n,function(r,s,o){Rt(e,s,t(r,s,o))}),e}var vp=Re(function(n,t,e){Lr(n,t,e)}),$o=Re(function(n,t,e,r){Lr(n,t,e,r)}),wp=bt(function(n,t){var e={};if(n==null)return e;var r=!1;t=xn(t,function(o){return o=Kt(o,n),r||(r=o.length>1),o}),St(n,Gi(n),e),r&&(e=lt(e,M|Z|K,hc));for(var s=t.length;s--;)Pi(e,t[s]);return e});function xp(n,t){return Go(n,Gr(F(t)))}var mp=bt(function(n,t){return n==null?{}:zl(n,t)});function Go(n,t){if(n==null)return{};var e=xn(Gi(n),function(r){return[r]});return t=F(t),Ou(n,e,function(r,s){return t(r,s[0])})}function yp(n,t,e){t=Kt(t,n);var r=-1,s=t.length;for(s||(s=1,n=i);++r<s;){var o=n==null?i:n[It(t[r])];o===i&&(r=s,o=e),n=Dt(o)?o.call(n):o}return n}function Ap(n,t,e){return n==null?n:Ke(n,t,e)}function Sp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Ke(n,t,e,r)}var Ho=no(Pn),Zo=no(Yn);function Ip(n,t,e){var r=H(n),s=r||zt(n)||Oe(n);if(t=F(t,4),e==null){var o=n&&n.constructor;s?e=r?new o:[]:An(n)?e=Dt(o)?Me(_r(n)):{}:e={}}return(s?ot:At)(n,function(a,l,h){return t(e,a,l,h)}),e}function Ep(n,t){return n==null?!0:Pi(n,t)}function Cp(n,t,e){return n==null?n:Bu(n,t,Bi(e))}function Lp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Bu(n,t,Bi(e),r)}function De(n){return n==null?[]:di(n,Pn(n))}function Mp(n){return n==null?[]:di(n,Yn(n))}function Rp(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=gt(e),e=e===e?e:0),t!==i&&(t=gt(t),t=t===t?t:0),ae(gt(n),t,e)}function Tp(n,t,e){return t=Pt(t),e===i?(e=t,t=0):e=Pt(e),n=gt(n),Ul(n,t,e)}function bp(n,t,e){if(e&&typeof e!="boolean"&&Zn(n,t,e)&&(t=e=i),e===i&&(typeof t=="boolean"?(e=t,t=i):typeof n=="boolean"&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Pt(n),t===i?(t=n,n=0):t=Pt(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=gu();return kn(n+s*(t-n+aa("1e-"+((s+"").length-1))),t)}return bi(n,t)}var Op=Te(function(n,t,e){return t=t.toLowerCase(),n+(e?Ko(t):t)});function Ko(n){return is(an(n).toLowerCase())}function qo(n){return n=an(n),n&&n.replace(Pf,Aa).replace(jf,"")}function Dp(n,t,e){n=an(n),t=tt(t);var r=n.length;e=e===i?r:ae(z(e),0,r);var s=e;return e-=t.length,e>=0&&n.slice(e,s)==t}function Pp(n){return n=an(n),n&&pf.test(n)?n.replace(As,Sa):n}function Fp(n){return n=an(n),n&&mf.test(n)?n.replace(jr,"\\$&"):n}var Up=Te(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Bp=Te(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),Wp=Vu("toLowerCase");function Np(n,t,e){n=an(n),t=z(t);var r=t?Se(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return Dr(mr(s),e)+n+Dr(xr(s),e)}function kp(n,t,e){n=an(n),t=z(t);var r=t?Se(n):0;return t&&r<t?n+Dr(t-r,e):n}function $p(n,t,e){n=an(n),t=z(t);var r=t?Se(n):0;return t&&r<t?Dr(t-r,e)+n:n}function Gp(n,t,e){return e||t==null?t=0:t&&(t=+t),Ya(an(n).replace(ni,""),t||0)}function Hp(n,t,e){return(e?Zn(n,t,e):t===i)?t=1:t=z(t),Oi(an(n),t)}function Zp(){var n=arguments,t=an(n[0]);return n.length<3?t:t.replace(n[1],n[2])}var Kp=Te(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()});function qp(n,t,e){return e&&typeof e!="number"&&Zn(n,t,e)&&(t=e=i),e=e===i?Rn:e>>>0,e?(n=an(n),n&&(typeof t=="string"||t!=null&&!ts(t))&&(t=tt(t),!t&&Ae(n))?qt(_t(n),0,e):n.split(t,e)):[]}var zp=Te(function(n,t,e){return n+(e?" ":"")+is(t)});function Vp(n,t,e){return n=an(n),e=e==null?0:ae(z(e),0,n.length),t=tt(t),n.slice(e,e+t.length)==t}function Yp(n,t,e){var r=u.templateSettings;e&&Zn(n,t,e)&&(t=i),n=an(n),t=Kr({},t,r,to);var s=Kr({},t.imports,r.imports,to),o=Pn(s),a=di(s,o),l,h,m=0,y=t.interpolate||ir,S="__p += '",C=vi((t.escape||ir).source+"|"+y.source+"|"+(y===Ss?Mf:ir).source+"|"+(t.evaluate||ir).source+"|$","g"),T="//# sourceURL="+(ln.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ia+"]")+`
`;n.replace(C,function(B,J,en,rt,Kn,it){return en||(en=rt),S+=n.slice(m,it).replace(Ff,Ia),J&&(l=!0,S+=`' +
__e(`+J+`) +
'`),Kn&&(h=!0,S+=`';
`+Kn+`;
__p += '`),en&&(S+=`' +
((__t = (`+en+`)) == null ? '' : __t) +
'`),m=it+B.length,B}),S+=`';
`;var U=ln.call(t,"variable")&&t.variable;if(!U)S=`with (obj) {
`+S+`
}
`;else if(Cf.test(U))throw new k(O);S=(h?S.replace(Bt,""):S).replace(xe,"$1").replace(Wt,"$1;"),S="function("+(U||"obj")+`) {
`+(U?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+S+`return __p
}`;var V=Vo(function(){return on(o,T+"return "+S).apply(i,a)});if(V.source=S,ns(V))throw V;return V}function Xp(n){return an(n).toLowerCase()}function Jp(n){return an(n).toUpperCase()}function Qp(n,t,e){if(n=an(n),n&&(e||t===i))return eu(n);if(!n||!(t=tt(t)))return n;var r=_t(n),s=_t(t),o=ru(r,s),a=iu(r,s)+1;return qt(r,o,a).join("")}function jp(n,t,e){if(n=an(n),n&&(e||t===i))return n.slice(0,uu(n)+1);if(!n||!(t=tt(t)))return n;var r=_t(n),s=iu(r,_t(t))+1;return qt(r,0,s).join("")}function nd(n,t,e){if(n=an(n),n&&(e||t===i))return n.replace(ni,"");if(!n||!(t=tt(t)))return n;var r=_t(n),s=ru(r,_t(t));return qt(r,s).join("")}function td(n,t){var e=Dn,r=fn;if(An(t)){var s="separator"in t?t.separator:s;e="length"in t?z(t.length):e,r="omission"in t?tt(t.omission):r}n=an(n);var o=n.length;if(Ae(n)){var a=_t(n);o=a.length}if(e>=o)return n;var l=e-Se(r);if(l<1)return r;var h=a?qt(a,0,l).join(""):n.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),ts(s)){if(n.slice(l).search(s)){var m,y=h;for(s.global||(s=vi(s.source,an(Is.exec(s))+"g")),s.lastIndex=0;m=s.exec(y);)var S=m.index;h=h.slice(0,S===i?l:S)}}else if(n.indexOf(tt(s),l)!=l){var C=h.lastIndexOf(s);C>-1&&(h=h.slice(0,C))}return h+r}function ed(n){return n=an(n),n&&gf.test(n)?n.replace(ys,ba):n}var rd=Te(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),is=Vu("toUpperCase");function zo(n,t,e){return n=an(n),t=e?i:t,t===i?Ca(n)?Pa(n):va(n):n.match(t)||[]}var Vo=Y(function(n,t){try{return jn(n,i,t)}catch(e){return ns(e)?e:new k(e)}}),id=bt(function(n,t){return ot(t,function(e){e=It(e),Rt(n,e,Qi(n[e],n))}),n});function sd(n){var t=n==null?0:n.length,e=F();return n=t?xn(n,function(r){if(typeof r[1]!="function")throw new ft(w);return[e(r[0]),r[1]]}):[],Y(function(r){for(var s=-1;++s<t;){var o=n[s];if(jn(o[0],this,r))return jn(o[1],this,r)}})}function ud(n){return bl(lt(n,M))}function ss(n){return function(){return n}}function od(n,t){return n==null||n!==n?t:n}var fd=Xu(),ad=Xu(!0);function Xn(n){return n}function us(n){return Cu(typeof n=="function"?n:lt(n,M))}function ld(n){return Mu(lt(n,M))}function cd(n,t){return Ru(n,lt(t,M))}var hd=Y(function(n,t){return function(e){return He(e,n,t)}}),gd=Y(function(n,t){return function(e){return He(n,e,t)}});function os(n,t,e){var r=Pn(t),s=Cr(t,r);e==null&&!(An(t)&&(s.length||!r.length))&&(e=t,t=n,n=this,s=Cr(t,Pn(t)));var o=!(An(e)&&"chain"in e)||!!e.chain,a=Dt(n);return ot(s,function(l){var h=t[l];n[l]=h,a&&(n.prototype[l]=function(){var m=this.__chain__;if(o||m){var y=n(this.__wrapped__),S=y.__actions__=zn(this.__actions__);return S.push({func:h,args:arguments,thisArg:n}),y.__chain__=m,y}return h.apply(n,kt([this.value()],arguments))})}),n}function pd(){return Bn._===this&&(Bn._=ka),this}function fs(){}function dd(n){return n=z(n),Y(function(t){return Tu(t,n)})}var _d=Ni(xn),vd=Ni(Js),wd=Ni(li);function Yo(n){return qi(n)?ci(It(n)):Vl(n)}function xd(n){return function(t){return n==null?i:le(n,t)}}var md=Qu(),yd=Qu(!0);function as(){return[]}function ls(){return!1}function Ad(){return{}}function Sd(){return""}function Id(){return!0}function Ed(n,t){if(n=z(n),n<1||n>dn)return[];var e=Rn,r=kn(n,Rn);t=F(t),n-=Rn;for(var s=pi(r,t);++e<n;)t(e);return s}function Cd(n){return H(n)?xn(n,It):et(n)?[n]:zn(po(an(n)))}function Ld(n){var t=++Wa;return an(n)+t}var Md=Or(function(n,t){return n+t},0),Rd=ki("ceil"),Td=Or(function(n,t){return n/t},1),bd=ki("floor");function Od(n){return n&&n.length?Er(n,Xn,Ei):i}function Dd(n,t){return n&&n.length?Er(n,F(t,2),Ei):i}function Pd(n){return nu(n,Xn)}function Fd(n,t){return nu(n,F(t,2))}function Ud(n){return n&&n.length?Er(n,Xn,Ri):i}function Bd(n,t){return n&&n.length?Er(n,F(t,2),Ri):i}var Wd=Or(function(n,t){return n*t},1),Nd=ki("round"),kd=Or(function(n,t){return n-t},0);function $d(n){return n&&n.length?gi(n,Xn):0}function Gd(n,t){return n&&n.length?gi(n,F(t,2)):0}return u.after=lg,u.ary=Co,u.assign=Jg,u.assignIn=ko,u.assignInWith=Kr,u.assignWith=Qg,u.at=jg,u.before=Lo,u.bind=Qi,u.bindAll=id,u.bindKey=Mo,u.castArray=Ag,u.chain=So,u.chunk=bc,u.compact=Oc,u.concat=Dc,u.cond=sd,u.conforms=ud,u.constant=ss,u.countBy=$h,u.create=np,u.curry=Ro,u.curryRight=To,u.debounce=bo,u.defaults=tp,u.defaultsDeep=ep,u.defer=cg,u.delay=hg,u.difference=Pc,u.differenceBy=Fc,u.differenceWith=Uc,u.drop=Bc,u.dropRight=Wc,u.dropRightWhile=Nc,u.dropWhile=kc,u.fill=$c,u.filter=Hh,u.flatMap=qh,u.flatMapDeep=zh,u.flatMapDepth=Vh,u.flatten=xo,u.flattenDeep=Gc,u.flattenDepth=Hc,u.flip=gg,u.flow=fd,u.flowRight=ad,u.fromPairs=Zc,u.functions=ap,u.functionsIn=lp,u.groupBy=Yh,u.initial=qc,u.intersection=zc,u.intersectionBy=Vc,u.intersectionWith=Yc,u.invert=hp,u.invertBy=gp,u.invokeMap=Jh,u.iteratee=us,u.keyBy=Qh,u.keys=Pn,u.keysIn=Yn,u.map=Nr,u.mapKeys=dp,u.mapValues=_p,u.matches=ld,u.matchesProperty=cd,u.memoize=$r,u.merge=vp,u.mergeWith=$o,u.method=hd,u.methodOf=gd,u.mixin=os,u.negate=Gr,u.nthArg=dd,u.omit=wp,u.omitBy=xp,u.once=pg,u.orderBy=jh,u.over=_d,u.overArgs=dg,u.overEvery=vd,u.overSome=wd,u.partial=ji,u.partialRight=Oo,u.partition=ng,u.pick=mp,u.pickBy=Go,u.property=Yo,u.propertyOf=xd,u.pull=jc,u.pullAll=yo,u.pullAllBy=nh,u.pullAllWith=th,u.pullAt=eh,u.range=md,u.rangeRight=yd,u.rearg=_g,u.reject=rg,u.remove=rh,u.rest=vg,u.reverse=Xi,u.sampleSize=sg,u.set=Ap,u.setWith=Sp,u.shuffle=ug,u.slice=ih,u.sortBy=ag,u.sortedUniq=ch,u.sortedUniqBy=hh,u.split=qp,u.spread=wg,u.tail=gh,u.take=ph,u.takeRight=dh,u.takeRightWhile=_h,u.takeWhile=vh,u.tap=Oh,u.throttle=xg,u.thru=Wr,u.toArray=Bo,u.toPairs=Ho,u.toPairsIn=Zo,u.toPath=Cd,u.toPlainObject=No,u.transform=Ip,u.unary=mg,u.union=wh,u.unionBy=xh,u.unionWith=mh,u.uniq=yh,u.uniqBy=Ah,u.uniqWith=Sh,u.unset=Ep,u.unzip=Ji,u.unzipWith=Ao,u.update=Cp,u.updateWith=Lp,u.values=De,u.valuesIn=Mp,u.without=Ih,u.words=zo,u.wrap=yg,u.xor=Eh,u.xorBy=Ch,u.xorWith=Lh,u.zip=Mh,u.zipObject=Rh,u.zipObjectDeep=Th,u.zipWith=bh,u.entries=Ho,u.entriesIn=Zo,u.extend=ko,u.extendWith=Kr,os(u,u),u.add=Md,u.attempt=Vo,u.camelCase=Op,u.capitalize=Ko,u.ceil=Rd,u.clamp=Rp,u.clone=Sg,u.cloneDeep=Eg,u.cloneDeepWith=Cg,u.cloneWith=Ig,u.conformsTo=Lg,u.deburr=qo,u.defaultTo=od,u.divide=Td,u.endsWith=Dp,u.eq=wt,u.escape=Pp,u.escapeRegExp=Fp,u.every=Gh,u.find=Zh,u.findIndex=vo,u.findKey=rp,u.findLast=Kh,u.findLastIndex=wo,u.findLastKey=ip,u.floor=bd,u.forEach=Io,u.forEachRight=Eo,u.forIn=sp,u.forInRight=up,u.forOwn=op,u.forOwnRight=fp,u.get=es,u.gt=Mg,u.gte=Rg,u.has=cp,u.hasIn=rs,u.head=mo,u.identity=Xn,u.includes=Xh,u.indexOf=Kc,u.inRange=Tp,u.invoke=pp,u.isArguments=ge,u.isArray=H,u.isArrayBuffer=Tg,u.isArrayLike=Vn,u.isArrayLikeObject=Ln,u.isBoolean=bg,u.isBuffer=zt,u.isDate=Og,u.isElement=Dg,u.isEmpty=Pg,u.isEqual=Fg,u.isEqualWith=Ug,u.isError=ns,u.isFinite=Bg,u.isFunction=Dt,u.isInteger=Do,u.isLength=Hr,u.isMap=Po,u.isMatch=Wg,u.isMatchWith=Ng,u.isNaN=kg,u.isNative=$g,u.isNil=Hg,u.isNull=Gg,u.isNumber=Fo,u.isObject=An,u.isObjectLike=En,u.isPlainObject=Ye,u.isRegExp=ts,u.isSafeInteger=Zg,u.isSet=Uo,u.isString=Zr,u.isSymbol=et,u.isTypedArray=Oe,u.isUndefined=Kg,u.isWeakMap=qg,u.isWeakSet=zg,u.join=Xc,u.kebabCase=Up,u.last=ht,u.lastIndexOf=Jc,u.lowerCase=Bp,u.lowerFirst=Wp,u.lt=Vg,u.lte=Yg,u.max=Od,u.maxBy=Dd,u.mean=Pd,u.meanBy=Fd,u.min=Ud,u.minBy=Bd,u.stubArray=as,u.stubFalse=ls,u.stubObject=Ad,u.stubString=Sd,u.stubTrue=Id,u.multiply=Wd,u.nth=Qc,u.noConflict=pd,u.noop=fs,u.now=kr,u.pad=Np,u.padEnd=kp,u.padStart=$p,u.parseInt=Gp,u.random=bp,u.reduce=tg,u.reduceRight=eg,u.repeat=Hp,u.replace=Zp,u.result=yp,u.round=Nd,u.runInContext=c,u.sample=ig,u.size=og,u.snakeCase=Kp,u.some=fg,u.sortedIndex=sh,u.sortedIndexBy=uh,u.sortedIndexOf=oh,u.sortedLastIndex=fh,u.sortedLastIndexBy=ah,u.sortedLastIndexOf=lh,u.startCase=zp,u.startsWith=Vp,u.subtract=kd,u.sum=$d,u.sumBy=Gd,u.template=Yp,u.times=Ed,u.toFinite=Pt,u.toInteger=z,u.toLength=Wo,u.toLower=Xp,u.toNumber=gt,u.toSafeInteger=Xg,u.toString=an,u.toUpper=Jp,u.trim=Qp,u.trimEnd=jp,u.trimStart=nd,u.truncate=td,u.unescape=ed,u.uniqueId=Ld,u.upperCase=rd,u.upperFirst=is,u.each=Io,u.eachRight=Eo,u.first=mo,os(u,function(){var n={};return At(u,function(t,e){ln.call(u.prototype,e)||(n[e]=t)}),n}(),{chain:!1}),u.VERSION=g,ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){u[n].placeholder=u}),ot(["drop","take"],function(n,t){tn.prototype[n]=function(e){e=e===i?1:bn(z(e),0);var r=this.__filtered__&&!t?new tn(this):this.clone();return r.__filtered__?r.__takeCount__=kn(e,r.__takeCount__):r.__views__.push({size:kn(e,Rn),type:n+(r.__dir__<0?"Right":"")}),r},tn.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),ot(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e==Et||e==N;tn.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:F(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),ot(["head","last"],function(n,t){var e="take"+(t?"Right":"");tn.prototype[n]=function(){return this[e](1).value()[0]}}),ot(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");tn.prototype[n]=function(){return this.__filtered__?new tn(this):this[e](1)}}),tn.prototype.compact=function(){return this.filter(Xn)},tn.prototype.find=function(n){return this.filter(n).head()},tn.prototype.findLast=function(n){return this.reverse().find(n)},tn.prototype.invokeMap=Y(function(n,t){return typeof n=="function"?new tn(this):this.map(function(e){return He(e,n,t)})}),tn.prototype.reject=function(n){return this.filter(Gr(F(n)))},tn.prototype.slice=function(n,t){n=z(n);var e=this;return e.__filtered__&&(n>0||t<0)?new tn(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(t=z(t),e=t<0?e.dropRight(-t):e.take(t-n)),e)},tn.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},tn.prototype.toArray=function(){return this.take(Rn)},At(tn.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=u[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);s&&(u.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof tn,m=l[0],y=h||H(a),S=function(J){var en=s.apply(u,kt([J],l));return r&&C?en[0]:en};y&&e&&typeof m=="function"&&m.length!=1&&(h=y=!1);var C=this.__chain__,T=!!this.__actions__.length,U=o&&!C,V=h&&!T;if(!o&&y){a=V?a:new tn(this);var B=n.apply(a,l);return B.__actions__.push({func:Wr,args:[S],thisArg:i}),new at(B,C)}return U&&V?n.apply(this,l):(B=this.thru(S),U?r?B.value()[0]:B.value():B)})}),ot(["pop","push","shift","sort","splice","unshift"],function(n){var t=lr[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);u.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(H(o)?o:[],s)}return this[e](function(a){return t.apply(H(a)?a:[],s)})}}),At(tn.prototype,function(n,t){var e=u[t];if(e){var r=e.name+"";ln.call(Le,r)||(Le[r]=[]),Le[r].push({name:t,func:e})}}),Le[br(i,X).name]=[{name:"wrapper",func:i}],tn.prototype.clone=el,tn.prototype.reverse=rl,tn.prototype.value=il,u.prototype.at=Dh,u.prototype.chain=Ph,u.prototype.commit=Fh,u.prototype.next=Uh,u.prototype.plant=Wh,u.prototype.reverse=Nh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=kh,u.prototype.first=u.prototype.head,Ue&&(u.prototype[Ue]=Bh),u},Ie=Fa();se?((se.exports=Ie)._=Ie,ui._=Ie):Bn._=Ie}).call(Xe)})(Yr,Yr.exports);Yr.exports;const P0="/assets/top_view-4gr4hmiW.svg",F0="/assets/redTractor-Cl-uV8Ra.svg",U0="/assets/yellowTractor-DVC8ngGG.svg",B0="/assets/blackTractor-DklC2nUm.svg",W0="AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA";function N0({showCard:I,loadingVehicle:f,vehicleData:i}){const{center:g,selectedParameterList:v,selectedVehicle:x,vehicleList:w,zoom:O,icons:d,locationData:b,placesData:P,imeiNumbers:M,onlineVehicle:Z,loading:K,services_loading:j}=Xt(A=>A.liveMap),{mode:rn,styles:$,vehicles_details:X}=Xt(A=>A.dashboard),wn=Q.useRef(null),{collapsed:hn}=Xt(A=>A.auth),[pn,Sn]=Q.useState(null),[Fn,un]=Q.useState(""),[On,cn]=Q.useState([]),[Dn,fn]=Q.useState(),[mn,Nn]=Q.useState(null);Q.useState("");const[Et,mt]=Q.useState(),[N,Un]=Q.useState(!1),[dn,Ct]=Q.useState(null),In=ff(),Rn={},Jt=Q.useRef([]),nr=Q.useRef(null),Qt=Q.useRef({}),{isLoaded:yt,loadError:_e}=o0({googleMapsApiKey:`${W0}`,loadingElement:W.jsx(r0,{})});Q.useEffect(()=>{yt&&Sn(window.google.maps)},[yt]),Q.useEffect(()=>{},[O]),Q.useEffect(()=>{var A,E,R,D;if(Object.keys(x).length>0){const nn=((dn==null?void 0:dn.length)>0?dn:b).filter(q=>{var sn;return((sn=q==null?void 0:q.latestDocument)==null?void 0:sn.imei)===(x==null?void 0:x.imei)});if(nn.length>0){cn(nn);const q={lat:(E=(A=nn[0])==null?void 0:A.latestDocument)==null?void 0:E.lat,lng:(D=(R=nn[0])==null?void 0:R.latestDocument)==null?void 0:D.lng};In(Vr(q))}}},[b,x]),Q.useEffect(()=>{if(!(Object.keys(x).length>0)){const A=b.filter(E=>i.some(R=>R.value===E.latestDocument.imei));cn(A),Ct(A)}},[b,x,i]),Q.useEffect(()=>{var A,E,R,D;if(Object.keys(x).length>0){const nn=((dn==null?void 0:dn.length)>0?dn:b).filter(q=>{var sn;return((sn=q==null?void 0:q.latestDocument)==null?void 0:sn.imei)===(x==null?void 0:x.imei)});if(nn.length>0){cn(nn);const q={lat:(E=(A=nn[0])==null?void 0:A.latestDocument)==null?void 0:E.lat,lng:(D=(R=nn[0])==null?void 0:R.latestDocument)==null?void 0:D.lng};In(Vr(q))}}else{const G=b.filter(nn=>i.some(q=>q.value===nn.latestDocument.imei));cn(G),Ct(G)}},[b,x]),Q.useEffect(()=>{fn(v)},[v]),Q.useEffect(()=>{In(Kd({})),Un(!0)},[x]),Q.useEffect(()=>{if(console.log("before: ",On),!pn)return;const A=nr.current;let E=null;return(async()=>{console.log("after: ",On);const D=await Xr(On,A);E&&E.clearMarkers(),E=Jr(D,A),hs.on("locationinfo",G=>{console.log("locationinfo: ",G),er(G,Jt),Ct(nn=>{const q=Array.isArray(nn)?nn:[],sn=q.findIndex(yn=>Number(yn.latestDocument.imei)===Number(G.imei));if(sn!==-1){const yn=[...q];return yn[sn]={...yn[sn],latestDocument:{...yn[sn].latestDocument,...G}},yn}else return[...q,{_id:G.imei,latestDocument:G}]})})})(),()=>{E&&E.clearMarkers(),Object.keys(Qt.current).forEach(D=>cancelAnimationFrame(Qt.current[D])),hs.off("locationinfo")}},[pn,On,hs,Dn,Jt,b]);const Xr=(A,E)=>A.map(R=>{const D=R.latestDocument.imei,G=Jt.current[D]||jt(R,E);return Jt.current[D]&&ne(R,G),G}),jt=(A,E)=>{const R=A.latestDocument.imei,D=new pn.Marker({position:{lat:A.latestDocument.lat,lng:A.latestDocument.lng},map:E,icon:Pe(A)});return D.addListener("click",()=>Jn(A,D,E)),Jt.current[R]=D,D},ne=async(A,E)=>{var sn;const R=E.getPosition(),D=((sn=E.getIcon())==null?void 0:sn.rotation)||0,G={lat:A.latestDocument.lat,lng:A.latestDocument.lng},nn=A.latestDocument.heading||0;Ut(E,R,G,D,nn);const q=await Pe(A);E.setIcon(q)},Pe=async A=>{var q,sn,yn,Cn,qn;const E=(q=A==null?void 0:A.latestDocument)==null?void 0:q.imei;Qr(E);const R=Qn(A==null?void 0:A.latestDocument),D=((sn=A==null?void 0:A.latestDocument)==null?void 0:sn.heading)||0;return te((yn=A==null?void 0:A.latestDocument)==null?void 0:yn.imei)&&ve((Cn=A==null?void 0:A.latestDocument)==null?void 0:Cn.imei),{url:await tr(R,D),fillOpacity:2,strokeWeight:1,scale:4.5,rotation:(qn=A==null?void 0:A.latestDocument)==null?void 0:qn.heading,size:new pn.Size(30,30),scaledSize:new pn.Size(30,30)}},te=A=>Z.includes(Number(A)),ve=A=>b==null?void 0:b.some(E=>Number(E.latestDocument.imei)===Number(A)&&E.latestDocument.speed>0&&(E.latestDocument.ignition===!0||E.latestDocument.ignition===1)),tr=(A,E,R,D=80)=>{const G=`${A}-${E}-${D}-${R}`;if(Rn[G])return Promise.resolve(Rn[G]);const nn=document.createElement("canvas"),q=nn.getContext("2d");nn.width=D,nn.height=D;const sn=new Image;return sn.src=A,new Promise(yn=>{sn.onload=()=>{if(q.clearRect(0,0,nn.width,nn.height),q.translate(D/2,D/2),q.rotate(E*Math.PI/180),q.translate(-D/2,-D/2),q.drawImage(sn,0,0,D,D),R){const dt=D-30-5,Bt=D-30-5;q.beginPath(),q.arc(dt,Bt,30/2,0,Math.PI*2),q.fillStyle=R,q.fill()}const Cn=nn.toDataURL("image/png");Rn[G]=Cn,yn(Cn)},sn.onerror=Cn=>{console.error("Error loading image for rotation:",Cn),yn(A)}})},Jn=(A,E,R)=>{re(A.latestDocument._id,A,E,R),we(A.latestDocument.imei)},Ut=(A,E,R,D,G)=>{const q=performance.now(),sn=()=>{const yn=performance.now()-q,Cn=Math.min(yn/500,1),qn=E.lat()+Cn*(R.lat-E.lat()),dt=E.lng()+Cn*(R.lng-E.lng()),Bt=(G-D+360)%360-180,xe=(D+Bt*Cn+360)%360;A.setPosition({lat:qn,lng:dt});const Wt=A.getIcon();Wt&&typeof Wt=="object"&&A.setIcon({...Wt,rotation:xe}),Cn<1?Qt.current[A.getPosition()]=requestAnimationFrame(sn):(A.setPosition(R),Wt&&typeof Wt=="object"&&A.setIcon({...Wt,rotation:G}),delete Qt.current[A.getPosition()])};Qt.current[A.getPosition()]=requestAnimationFrame(sn)},Jr=(A,E)=>new D0({map:E,markers:A,renderer:{render:({count:R,position:D})=>pt(R,D)}}),pt=(A,E)=>{const R=40+Math.min(A*2,40),D=30;let G;return A<10?G={start:"#76c7c0",end:"#34a853"}:A<50?G={start:"#fbbc05",end:"#f2994a"}:G={start:"#f45c42",end:"#d32f2f"},new pn.Marker({position:E,icon:{url:`data:image/svg+xml,${encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="${R}" height="${R}" viewBox="0 0 100 100">
            <defs>
              <radialGradient id="gradient" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="${G.start}" />
                <stop offset="100%" stop-color="${G.end}" />
              </radialGradient>
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.5)" />
              </filter>
            </defs>
            <!-- Outer Pulsating Ring -->
            <circle cx="50" cy="50" r="48" fill="url(#gradient)" filter="url(#shadow)" stroke="#ffffff" stroke-width="3" />
            <!-- Decorative Inner Ring -->
            <circle cx="50" cy="50" r="38" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 2" />
            <!-- Star Decoration -->
            <polygon points="50,15 54,38 70,38 57,50 62,68 50,57 38,68 43,50 30,38 46,38" fill="#ffffff" opacity="0.4" />
            <!-- Count Text -->
            <text x="50" y="55" font-size="${D}" fill="black" text-anchor="middle" font-family="'Courier New', monospace" font-weight="bold">
              ${A}
            </text>
          </svg>
        `)}`,scaledSize:new pn.Size(R,R)},label:null})},er=async(A,E,R)=>{var nn;const D=A.imei,G=E.current[D];if(G){const q=G.getPosition(),sn=((nn=G.getIcon())==null?void 0:nn.rotation)||0,yn={lat:A.lat,lng:A.lng},Cn=A.heading||0;Ut(G,q,yn,sn,Cn);const qn=await Pe({latestDocument:A});G.setIcon(qn)}},Qr=A=>{if(!A)return"motorBike";const E=ee(A);return E||console.error(`No vehicle type found for IMEI: ${A}, defaulting to motorBike`),E||"motorBike"},ee=A=>{if(!X||X.length===0)return console.error("vehicles_details is not available"),null;const E=X.find(R=>(R==null?void 0:R.value)===A&&(R==null?void 0:R.vehilce_type));return E||console.error(`No vehicle found for IMEI: ${A}`),E?E.vehilce_type:null},Qn=A=>{let{speed:E,ignition:R,imei:D}=A;if(te(D)){if(!R)return F0;if(E>0&&R)return P0;if(E<=0&&R)return U0}else return B0},re=(A,E,R,D)=>{var yn,Cn,qn;In(qd(E.latestDocument.imei));const G={lat:(yn=E==null?void 0:E.latestDocument)==null?void 0:yn.lat,lng:(Cn=E==null?void 0:E.latestDocument)==null?void 0:Cn.lng};In(Vr(G)),In(zd(15)),wn.current||(wn.current=new pn.InfoWindow);const nn=wn.current,sn=`
      <div>
        <h3>Registration No: ${((qn=w.find(dt=>{var Bt,xe;return((Bt=dt==null?void 0:dt.imei[0])==null?void 0:Bt.mac_id)===((xe=E==null?void 0:E.latestDocument)==null?void 0:xe.imei)}))==null?void 0:qn.registration_id)||""}</h3>
      </div>
    `;mn===A?(nn.close(),Nn(null)):(nn.setContent(sn),nn.open(D,R),Nn(A))},we=A=>{const E=X&&(X==null?void 0:X.length)>0&&X.find(R=>(R==null?void 0:R.value)===A&&R);mt(E||null)},rr=()=>{Un(!N)};if(_e)return"Error loading maps";if(!yt)return"Loading maps";if(!pn)return null;const ie={height:"93vh",width:"100%",transition:"transform 0.5s ease-in-out"};return W.jsxs(W.Fragment,{children:[W.jsx(Gn,{sx:{position:"absolute",top:"780px",left:hn?"74px":"250px",zIndex:1,background:uf.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:W.jsxs(of,{sx:{color:"white"},onClick:rr,children:[N?"Hide":"Show"," Vehicle Info",W.jsx(l0,{})]})}),N===!0&&W.jsx(x0,{handleVehicleInfo:rr,udpatedParams:dn}),W.jsxs(f0,{id:"map",mapContainerStyle:ie,zoom:O,center:g,onLoad:A=>{nr.current=A},options:{styles:rn?$:""},children:[Object.keys(x).length>0&&W.jsx(i0,{setPlace:un,place:Fn}),j||f?W.jsx(Gn,{sx:{position:"absolute",top:"50%",left:"50%"},children:W.jsx(g0,{})}):P&&P.length>0&&P.map((A,E)=>{var R,D;return W.jsx(a0,{position:{lat:parseFloat((R=A==null?void 0:A.location)==null?void 0:R.lat),lng:parseFloat((D=A==null?void 0:A.location)==null?void 0:D.lng)},animation:window.google.maps.Animation.DROP,icon:{path:d[`${Fn}`],fillOpacity:2,strokeWeight:1,scale:1,fillColor:"orange"}},E)})]})]})}function a_(){const{locationData:I,selectedVehicle:f,selectedParameterList:i}=Xt(fn=>fn.liveMap),{mode:g,selectedVehicleGroup:v}=Xt(fn=>fn.dashboard),x=e0(g),[w,O]=Q.useState([]),{w_customer_id:d}=Xt(fn=>fn.auth),[b,P]=Q.useState(),[M,Z]=Q.useState(!1),[K,j]=Q.useState(!1),[rn,$]=Q.useState([]),[X,wn]=Q.useState(!0),[hn,pn]=Q.useState(!1),[Sn,Fn]=Q.useState(!1);let un=ff();Q.useEffect(()=>{un(Vd({}))},[]),Q.useEffect(()=>{On()},[]),Q.useEffect(()=>{var fn;if(Object.keys(f).length>0){const mn=(I==null?void 0:I.length)>0&&(I==null?void 0:I.filter(N=>Number(N.latestDocument.imei)===Number(f==null?void 0:f.imei)));if((mn==null?void 0:mn.length)<=0){cs.error("Data not available for this vehicle",{id:"clipboard"});return}const{lat:Nn,lng:Et}=((fn=mn==null?void 0:mn[0])==null?void 0:fn.latestDocument)??{},mt={lat:Nn||Qo.lat,lng:Et||Qo.lat};un(Vr(mt))}},[f,I]),Q.useEffect(()=>{$([]),un(Jo([{reg_id:"",imei:"",params:[]}]))},[f]);const On=async()=>{try{pn(!0);let fn=[],mn=[];const Nn=await un(Yd({w_customer_id:d}));if(Array.isArray(Nn.payload)){Nn.payload.forEach(N=>{var Un,dn,Ct,In;Array.isArray(N.imei)&&N.imei.length>0&&((Un=N.imei[0])!=null&&Un.mac_id)?(fn.push({id:N.id,label:N.registration_id,value:(dn=N.imei[0])==null?void 0:dn.mac_id,vehilce_type:N==null?void 0:N.segment,chassis_no:N==null?void 0:N.chassis_no,engine_no:N==null?void 0:N.engine_no,workShop:N==null?void 0:N.workshop,registration_id:N==null?void 0:N.registration_id,sell_date:N==null?void 0:N.sell_date,customer_name:N==null?void 0:N.customer_name,vehicle_model:(Ct=N==null?void 0:N.vehicle_model)==null?void 0:Ct.name,vehicle_group:N==null?void 0:N.vehicle_group}),mn.push((In=N.imei[0])==null?void 0:In.mac_id)):console.error("IMEI data not found for item:",N)});const Et="one",mt=mn;mn.length>0&&un(Xd({type:Et,imei:mt})),O(fn),un(Jd(fn)),un(Qd({w_customer_id:d})),pn(!1)}else pn(!1),console.error("Unexpected data format:",Nn),cs.error("Unexpected data format:")}catch(fn){console.error("Error fetching vehicle data:",fn),cs.error(`Error fetching vehicle data: ${fn}`)}},cn=async fn=>{const{label:mn,imei:Nn,id:Et,reg_id:mt,checked:N}=fn;P(In=>In.map(Rn=>Rn.id===Et?{...Rn,checked:!N}:Rn));let Un=[...rn],dn=[...rn];if(!N)I.forEach(In=>{In.latestDocument.imei===Nn&&(Un.push({label:mn,value:In.latestDocument[mn==="maininputvoltage"?"mainInputVoltage":mn]}),dn=Un,$(Un))});else{let In=rn.filter(Rn=>Rn.label!==mn);dn=In,$(In)}console.log("tempParamList",dn),un(Jo([{reg_id:mt,imei:Nn,params:dn}]))},Dn=w.filter(fn=>Object.keys(v).length===0||fn.vehicle_group===v.id);return W.jsxs("div",{className:"app",children:[W.jsx(t0,{}),W.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[W.jsx(jd,{title:"Live Map",setShowVehicles:Z,showVehicles:M,showParameters:K,setShowParameters:j,setShowCard:wn,showCard:X,setShowVehiclesGroup:Fn,showVehiclesGroup:Sn}),W.jsx(u0,{setShowVehiclesGroup:Fn,showVehiclesGroup:Sn,where:"livemap"}),W.jsxs(Gn,{style:{display:"flex",width:"100%",height:"95vh"},children:[W.jsx(Gn,{style:{width:M||K?"80%":"100%"},children:W.jsx(N0,{showCard:X,loadingVehicle:hn,vehicleData:Dn})}),M&&W.jsx(Gn,{style:{width:"20%",backgroundColor:x.grey[100]},children:W.jsx(n0,{vehicleData:Dn,title:"Live Map",setParameterData:P,loadingVehicle:hn,setShowVehicles:Z,showVehicles:M,showParameters:K,setShowParameters:j})}),K&&W.jsx(Gn,{style:{width:"20%",backgroundColor:x.grey[100]},children:W.jsx(s0,{parametersData:b,setParameterData:P,handleParameterChange:cn})})]})]})]})}export{a_ as default};
