import{W as Hd,j as N,k as se,r as Y,t as uf,T as ye,B as of,h as Zd,p as nr,i as ff,v as Xr,Q as Kd,X as qd,Y as zd,m as Vd,w as cs,Z as Jo,K as Yd,L as Xd,N as Jd,O as Qd,$ as Qo}from"./index-CsbI0quj.js";import{L as jd}from"./LiveMapTopBar-DFrzeNhg.js";import{V as n0}from"./VehicleMenu-DbOgIQe4.js";import{L as t0,t as e0}from"./LeftSideBar2-Cz6BlaKx.js";import{F as r0}from"./Loader-BUI2rOmF.js";import{L as i0}from"./LiveMapServices-B_agLg_3.js";import{s as hs}from"./Socket-0N_gnJcr.js";import{P as s0}from"./Parameters-C0roWw-L.js";/* empty css           */import"./proj-XQwXs9DQ.js";import{V as u0}from"./VehicleGroups-xanEds0k.js";import{u as o0,G as f0,M as a0}from"./esm-C7u2-Xmk.js";import{d as l0}from"./Info-BCIwDaRQ.js";import{d as c0}from"./Close-xErLtBB8.js";import{r as h0}from"./createSvgIcon-W1Diufr9.js";import{B as Kn,C as g0}from"./menu2-DhtlSM1p.js";import"./jcb-aCHXMCXy.js";import"./index-C-tApY_i.js";import"./TextField-CApZJXCf.js";import"./useControlled-fYZGz4Cy.js";import"./index-CGl6qZfR.js";import"./Card-B3wyH0b3.js";import"./CardContent-CdajRo5Q.js";var ws={},p0=Hd;Object.defineProperty(ws,"__esModule",{value:!0});var af=ws.default=void 0,d0=p0(h0()),_0=N;af=ws.default=(0,d0.default)((0,_0.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"NorthEast");const v0=({label:I,value:f})=>N.jsxs(Kn,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[N.jsx(ye,{variant:"body2",color:"textSecondary",children:I}),N.jsx(ye,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:f||"N/A"})]}),w0=(I,f)=>(I==null?void 0:I.find(i=>{var g,w;return((w=(g=i.imei)==null?void 0:g[0])==null?void 0:w.mac_id)===f}))||{},jo=({title:I,details:f})=>N.jsx(Kn,{sx:{width:"45%"},children:f.map(({label:i,value:g})=>N.jsx(v0,{label:i,value:g},i))});function x0({handleVehicleInfo:I,udpatedParams:f}){var un,q,Q,vn,cn,hn,An,Rn,dn,Ln,qn,Ft;const{collapsed:i}=se(xn=>xn.auth),{vehicleList:g,selectedVehicle:w,selectedImei:x}=se(xn=>xn.liveMap),[v,O]=Y.useState({});let[d,T]=Y.useState(null);Y.useEffect(()=>{let xn=f&&(f==null?void 0:f.length)>0&&(f==null?void 0:f.find(Pn=>{var zn;return Number((zn=Pn==null?void 0:Pn.latestDocument)==null?void 0:zn.imei)===Number(x)}));T(xn)},[f,x]),Y.useEffect(()=>{O(w0(g,x))},[g,x]);const F=(xn,Pn)=>{const zn=`https://www.google.com/maps?q=${xn},${Pn}`;window.open(zn,"_blank")},L=xn=>{var Ut,Tt;let Pn=(Ut=xn==null?void 0:xn.latestDocument)==null?void 0:Ut.ignition,zn=(Tt=xn==null?void 0:xn.latestDocument)==null?void 0:Tt.speed;return Pn===!0||Pn===1?zn:0},K=[{label:"Vehicle No:",value:v==null?void 0:v.registration_id},{label:"Model:",value:(un=v==null?void 0:v.vehicle_model)==null?void 0:un.name},{label:"IMEI No:",value:(Q=(q=v==null?void 0:v.imei)==null?void 0:q[0])==null?void 0:Q.mac_id},{label:"Chassis No:",value:v==null?void 0:v.chassis_no},{label:"Engine No:",value:v==null?void 0:v.engine_no}],Z=[{label:"Customer Name:",value:(vn=v==null?void 0:v.user)!=null&&vn.us_user?`${v.user.us_user.first_name.charAt(0).toUpperCase()}${v.user.us_user.first_name.slice(1)} ${v.user.us_user.last_name.charAt(0).toUpperCase()}${v.user.us_user.last_name.slice(1)}`:null},{label:"Mobile: ",value:((cn=v==null?void 0:v.user)==null?void 0:cn.us_user)&&v.user.us_user.mobile},{label:"Date of Sell:",value:v==null?void 0:v.sell_date},{label:"Workshop Name:",value:(hn=v==null?void 0:v.workshop)==null?void 0:hn.name}];let en={border:"2px solid black",borderRadius:"5px",padding:"5px",color:"black"};return N.jsxs(Kn,{sx:{position:"absolute",top:"600px",left:i?"280px":"450px",zIndex:1,background:uf.bgShadow,p:2,borderRadius:2,color:"white",width:"72%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[N.jsx(ye,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),N.jsxs(Kn,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[N.jsxs(Kn,{sx:{display:"flex",justifyContent:"space-between",width:"65%",marginLeft:"10px"},children:[N.jsx(Kn,{sx:en,children:N.jsxs(ye,{children:["Ignition:"," ",((An=d==null?void 0:d.latestDocument)==null?void 0:An.ignition)===!0||((Rn=d==null?void 0:d.latestDocument)==null?void 0:Rn.ignition)===1?"On":"Off"]})}),N.jsx(Kn,{sx:en,children:N.jsxs(ye,{children:["Speed: ",L(d)," km/h"]})}),N.jsx(Kn,{sx:en,children:N.jsxs(ye,{children:["Main Voltage:"," ",((dn=d==null?void 0:d.latestDocument)==null?void 0:dn.mainInputVoltage)===0?11.32:(Ln=d==null?void 0:d.latestDocument)!=null&&Ln.mainInputVoltage?`${(qn=d==null?void 0:d.latestDocument)==null?void 0:qn.mainInputVoltage} Voltage`:0]})}),N.jsx(Kn,{sx:en,children:N.jsxs(ye,{children:["Heading:"," ",d?`${(Ft=d==null?void 0:d.latestDocument)==null?void 0:Ft.heading} deg`:0]})}),N.jsxs(of,{disabled:!d,onClick:()=>{var xn,Pn;F((xn=d==null?void 0:d.latestDocument)==null?void 0:xn.lat,(Pn=d==null?void 0:d.latestDocument)==null?void 0:Pn.lng)},children:["Navigate to map",N.jsx(af,{})]})]}),N.jsx(c0,{sx:{cursor:"pointer",color:"black"},onClick:I})]}),N.jsxs(Kn,{sx:{display:"flex",justifyContent:"space-between"},children:[N.jsx(jo,{title:"Vehicle Details",details:K}),N.jsx(jo,{title:"Customer Details",details:Z})]})]})}var m0=function I(f,i){if(f===i)return!0;if(f&&i&&typeof f=="object"&&typeof i=="object"){if(f.constructor!==i.constructor)return!1;var g,w,x;if(Array.isArray(f)){if(g=f.length,g!=i.length)return!1;for(w=g;w--!==0;)if(!I(f[w],i[w]))return!1;return!0}if(f.constructor===RegExp)return f.source===i.source&&f.flags===i.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===i.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===i.toString();if(x=Object.keys(f),g=x.length,g!==Object.keys(i).length)return!1;for(w=g;w--!==0;)if(!Object.prototype.hasOwnProperty.call(i,x[w]))return!1;for(w=g;w--!==0;){var v=x[w];if(!I(f[v],i[v]))return!1}return!0}return f!==f&&i!==i};const nf=Zd(m0),tf=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],gs=1,tr=8;class xs{static from(f){if(!(f instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,g]=new Uint8Array(f,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=g>>4;if(w!==gs)throw new Error(`Got v${w} data when expected v${gs}.`);const x=tf[g&15];if(!x)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(f,2,1),[O]=new Uint32Array(f,4,1);return new xs(O,v,x,f)}constructor(f,i=64,g=Float64Array,w){if(isNaN(f)||f<0)throw new Error(`Unpexpected numItems value: ${f}.`);this.numItems=+f,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=g,this.IndexArrayType=f<65536?Uint16Array:Uint32Array;const x=tf.indexOf(this.ArrayType),v=f*2*this.ArrayType.BYTES_PER_ELEMENT,O=f*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-O%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${g}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,tr,f),this.coords=new this.ArrayType(this.data,tr+O+d,f*2),this._pos=f*2,this._finished=!0):(this.data=new ArrayBuffer(tr+v+O+d),this.ids=new this.IndexArrayType(this.data,tr,f),this.coords=new this.ArrayType(this.data,tr+O+d,f*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(gs<<4)+x]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=f)}add(f,i){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=f,this.coords[this._pos++]=i,g}finish(){const f=this._pos>>1;if(f!==this.numItems)throw new Error(`Added ${f} items when expected ${this.numItems}.`);return _s(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(f,i,g,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:v,nodeSize:O}=this,d=[0,x.length-1,0],T=[];for(;d.length;){const F=d.pop()||0,L=d.pop()||0,K=d.pop()||0;if(L-K<=O){for(let q=K;q<=L;q++){const Q=v[2*q],vn=v[2*q+1];Q>=f&&Q<=g&&vn>=i&&vn<=w&&T.push(x[q])}continue}const Z=K+L>>1,en=v[2*Z],un=v[2*Z+1];en>=f&&en<=g&&un>=i&&un<=w&&T.push(x[Z]),(F===0?f<=en:i<=un)&&(d.push(K),d.push(Z-1),d.push(1-F)),(F===0?g>=en:w>=un)&&(d.push(Z+1),d.push(L),d.push(1-F))}return T}within(f,i,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:x,nodeSize:v}=this,O=[0,w.length-1,0],d=[],T=g*g;for(;O.length;){const F=O.pop()||0,L=O.pop()||0,K=O.pop()||0;if(L-K<=v){for(let q=K;q<=L;q++)ef(x[2*q],x[2*q+1],f,i)<=T&&d.push(w[q]);continue}const Z=K+L>>1,en=x[2*Z],un=x[2*Z+1];ef(en,un,f,i)<=T&&d.push(w[Z]),(F===0?f-g<=en:i-g<=un)&&(O.push(K),O.push(Z-1),O.push(1-F)),(F===0?f+g>=en:i+g>=un)&&(O.push(Z+1),O.push(L),O.push(1-F))}return d}}function _s(I,f,i,g,w,x){if(w-g<=i)return;const v=g+w>>1;lf(I,f,v,g,w,x),_s(I,f,i,g,v-1,1-x),_s(I,f,i,v+1,w,1-x)}function lf(I,f,i,g,w,x){for(;w>g;){if(w-g>600){const T=w-g+1,F=i-g+1,L=Math.log(T),K=.5*Math.exp(2*L/3),Z=.5*Math.sqrt(L*K*(T-K)/T)*(F-T/2<0?-1:1),en=Math.max(g,Math.floor(i-F*K/T+Z)),un=Math.min(w,Math.floor(i+(T-F)*K/T+Z));lf(I,f,i,en,un,x)}const v=f[2*i+x];let O=g,d=w;for(er(I,f,g,i),f[2*w+x]>v&&er(I,f,g,w);O<d;){for(er(I,f,O,d),O++,d--;f[2*O+x]<v;)O++;for(;f[2*d+x]>v;)d--}f[2*g+x]===v?er(I,f,g,d):(d++,er(I,f,d,w)),d<=i&&(g=d+1),i<=d&&(w=d-1)}}function er(I,f,i,g){ps(I,i,g),ps(f,2*i,2*g),ps(f,2*i+1,2*g+1)}function ps(I,f,i){const g=I[f];I[f]=I[i],I[i]=g}function ef(I,f,i,g){const w=I-i,x=f-g;return w*w+x*x}const y0={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:I=>I},rf=Math.fround||(I=>f=>(I[0]=+f,I[0]))(new Float32Array(1)),me=2,ie=3,ds=4,re=5,cf=6;class A0{constructor(f){this.options=Object.assign(Object.create(y0),f),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(f){const{log:i,minZoom:g,maxZoom:w}=this.options;i&&console.time("total time");const x=`prepare ${f.length} points`;i&&console.time(x),this.points=f;const v=[];for(let d=0;d<f.length;d++){const T=f[d];if(!T.geometry)continue;const[F,L]=T.geometry.coordinates,K=rf(Vr(F)),Z=rf(Yr(L));v.push(K,Z,1/0,d,-1,1),this.options.reduce&&v.push(0)}let O=this.trees[w+1]=this._createTree(v);i&&console.timeEnd(x);for(let d=w;d>=g;d--){const T=+Date.now();O=this.trees[d]=this._createTree(this._cluster(O,d)),i&&console.log("z%d: %d clusters in %dms",d,O.numItems,+Date.now()-T)}return i&&console.timeEnd("total time"),this}getClusters(f,i){let g=((f[0]+180)%360+360)%360-180;const w=Math.max(-90,Math.min(90,f[1]));let x=f[2]===180?180:((f[2]+180)%360+360)%360-180;const v=Math.max(-90,Math.min(90,f[3]));if(f[2]-f[0]>=360)g=-180,x=180;else if(g>x){const L=this.getClusters([g,w,180,v],i),K=this.getClusters([-180,w,x,v],i);return L.concat(K)}const O=this.trees[this._limitZoom(i)],d=O.range(Vr(g),Yr(v),Vr(x),Yr(w)),T=O.data,F=[];for(const L of d){const K=this.stride*L;F.push(T[K+re]>1?sf(T,K,this.clusterProps):this.points[T[K+ie]])}return F}getChildren(f){const i=this._getOriginId(f),g=this._getOriginZoom(f),w="No cluster with the specified id.",x=this.trees[g];if(!x)throw new Error(w);const v=x.data;if(i*this.stride>=v.length)throw new Error(w);const O=this.options.radius/(this.options.extent*Math.pow(2,g-1)),d=v[i*this.stride],T=v[i*this.stride+1],F=x.within(d,T,O),L=[];for(const K of F){const Z=K*this.stride;v[Z+ds]===f&&L.push(v[Z+re]>1?sf(v,Z,this.clusterProps):this.points[v[Z+ie]])}if(L.length===0)throw new Error(w);return L}getLeaves(f,i,g){i=i||10,g=g||0;const w=[];return this._appendLeaves(w,f,i,g,0),w}getTile(f,i,g){const w=this.trees[this._limitZoom(f)],x=Math.pow(2,f),{extent:v,radius:O}=this.options,d=O/v,T=(g-d)/x,F=(g+1+d)/x,L={features:[]};return this._addTileFeatures(w.range((i-d)/x,T,(i+1+d)/x,F),w.data,i,g,x,L),i===0&&this._addTileFeatures(w.range(1-d/x,T,1,F),w.data,x,g,x,L),i===x-1&&this._addTileFeatures(w.range(0,T,d/x,F),w.data,-1,g,x,L),L.features.length?L:null}getClusterExpansionZoom(f){let i=this._getOriginZoom(f)-1;for(;i<=this.options.maxZoom;){const g=this.getChildren(f);if(i++,g.length!==1)break;f=g[0].properties.cluster_id}return i}_appendLeaves(f,i,g,w,x){const v=this.getChildren(i);for(const O of v){const d=O.properties;if(d&&d.cluster?x+d.point_count<=w?x+=d.point_count:x=this._appendLeaves(f,d.cluster_id,g,w,x):x<w?x++:f.push(O),f.length===g)break}return x}_createTree(f){const i=new xs(f.length/this.stride|0,this.options.nodeSize,Float32Array);for(let g=0;g<f.length;g+=this.stride)i.add(f[g],f[g+1]);return i.finish(),i.data=f,i}_addTileFeatures(f,i,g,w,x,v){for(const O of f){const d=O*this.stride,T=i[d+re]>1;let F,L,K;if(T)F=hf(i,d,this.clusterProps),L=i[d],K=i[d+1];else{const un=this.points[i[d+ie]];F=un.properties;const[q,Q]=un.geometry.coordinates;L=Vr(q),K=Yr(Q)}const Z={type:1,geometry:[[Math.round(this.options.extent*(L*x-g)),Math.round(this.options.extent*(K*x-w))]],tags:F};let en;T||this.options.generateId?en=i[d+ie]:en=this.points[i[d+ie]].id,en!==void 0&&(Z.id=en),v.features.push(Z)}}_limitZoom(f){return Math.max(this.options.minZoom,Math.min(Math.floor(+f),this.options.maxZoom+1))}_cluster(f,i){const{radius:g,extent:w,reduce:x,minPoints:v}=this.options,O=g/(w*Math.pow(2,i)),d=f.data,T=[],F=this.stride;for(let L=0;L<d.length;L+=F){if(d[L+me]<=i)continue;d[L+me]=i;const K=d[L],Z=d[L+1],en=f.within(d[L],d[L+1],O),un=d[L+re];let q=un;for(const Q of en){const vn=Q*F;d[vn+me]>i&&(q+=d[vn+re])}if(q>un&&q>=v){let Q=K*un,vn=Z*un,cn,hn=-1;const An=((L/F|0)<<5)+(i+1)+this.points.length;for(const Rn of en){const dn=Rn*F;if(d[dn+me]<=i)continue;d[dn+me]=i;const Ln=d[dn+re];Q+=d[dn]*Ln,vn+=d[dn+1]*Ln,d[dn+ds]=An,x&&(cn||(cn=this._map(d,L,!0),hn=this.clusterProps.length,this.clusterProps.push(cn)),x(cn,this._map(d,dn)))}d[L+ds]=An,T.push(Q/q,vn/q,1/0,An,-1,q),x&&T.push(hn)}else{for(let Q=0;Q<F;Q++)T.push(d[L+Q]);if(q>1)for(const Q of en){const vn=Q*F;if(!(d[vn+me]<=i)){d[vn+me]=i;for(let cn=0;cn<F;cn++)T.push(d[vn+cn])}}}}return T}_getOriginId(f){return f-this.points.length>>5}_getOriginZoom(f){return(f-this.points.length)%32}_map(f,i,g){if(f[i+re]>1){const v=this.clusterProps[f[i+cf]];return g?Object.assign({},v):v}const w=this.points[f[i+ie]].properties,x=this.options.map(w);return g&&x===w?Object.assign({},x):x}}function sf(I,f,i){return{type:"Feature",id:I[f+ie],properties:hf(I,f,i),geometry:{type:"Point",coordinates:[S0(I[f]),I0(I[f+1])]}}}function hf(I,f,i){const g=I[f+re],w=g>=1e4?`${Math.round(g/1e3)}k`:g>=1e3?`${Math.round(g/100)/10}k`:g,x=I[f+cf],v=x===-1?{}:Object.assign({},i[x]);return Object.assign(v,{cluster:!0,cluster_id:I[f+ie],point_count:g,point_count_abbreviated:w})}function Vr(I){return I/360+.5}function Yr(I){const f=Math.sin(I*Math.PI/180),i=.5-.25*Math.log((1+f)/(1-f))/Math.PI;return i<0?0:i>1?1:i}function S0(I){return(I-.5)*360}function I0(I){const f=(180-I*360)*Math.PI/180;return 360*Math.atan(Math.exp(f))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function E0(I,f){var i={};for(var g in I)Object.prototype.hasOwnProperty.call(I,g)&&f.indexOf(g)<0&&(i[g]=I[g]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,g=Object.getOwnPropertySymbols(I);w<g.length;w++)f.indexOf(g[w])<0&&Object.prototype.propertyIsEnumerable.call(I,g[w])&&(i[g[w]]=I[g[w]]);return i}class pt{static isAdvancedMarkerAvailable(f){return google.maps.marker&&f.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(f){return google.maps.marker&&f instanceof google.maps.marker.AdvancedMarkerElement}static setMap(f,i){this.isAdvancedMarker(f)?f.map=i:f.setMap(i)}static getPosition(f){if(this.isAdvancedMarker(f)){if(f.position){if(f.position instanceof google.maps.LatLng)return f.position;if(f.position.lat&&f.position.lng)return new google.maps.LatLng(f.position.lat,f.position.lng)}return new google.maps.LatLng(null)}return f.getPosition()}static getVisible(f){return this.isAdvancedMarker(f)?!0:f.getVisible()}}class vs{constructor({markers:f,position:i}){this.markers=f,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(this.markers.length===0&&!this._position)return;const f=new google.maps.LatLngBounds(this._position,this._position);for(const i of this.markers)f.extend(pt.getPosition(i));return f}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(f=>pt.getVisible(f)).length}push(f){this.markers.push(f)}delete(){this.marker&&(pt.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class C0{constructor({maxZoom:f=16}){this.maxZoom=f}noop({markers:f}){return L0(f)}}const L0=I=>I.map(i=>new vs({position:pt.getPosition(i),markers:[i]}));class M0 extends C0{constructor(f){var{maxZoom:i,radius:g=60}=f,w=E0(f,["maxZoom","radius"]);super({maxZoom:i}),this.state={zoom:-1},this.superCluster=new A0(Object.assign({maxZoom:this.maxZoom,radius:g},w))}calculate(f){let i=!1;const g={zoom:f.map.getZoom()};if(!nf(f.markers,this.markers)){i=!0,this.markers=[...f.markers];const w=this.markers.map(x=>{const v=pt.getPosition(x);return{type:"Feature",geometry:{type:"Point",coordinates:[v.lng(),v.lat()]},properties:{marker:x}}});this.superCluster.load(w)}return i||(this.state.zoom<=this.maxZoom||g.zoom<=this.maxZoom)&&(i=!nf(this.state,g)),this.state=g,i&&(this.clusters=this.cluster(f)),{clusters:this.clusters,changed:i}}cluster({map:f}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(f.getZoom())).map(i=>this.transformCluster(i))}transformCluster({geometry:{coordinates:[f,i]},properties:g}){if(g.cluster)return new vs({markers:this.superCluster.getLeaves(g.cluster_id,1/0).map(x=>x.properties.marker),position:{lat:i,lng:f}});const w=g.marker;return new vs({markers:[w],position:pt.getPosition(w)})}}class b0{constructor(f,i){this.markers={sum:f.length};const g=i.map(x=>x.count),w=g.reduce((x,v)=>x+v,0);this.clusters={count:i.length,markers:{mean:w/i.length,sum:w,min:Math.min(...g),max:Math.max(...g)}}}}class R0{render({count:f,position:i},g,w){const v=`<svg fill="${f>Math.max(10,g.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${f}</text>
</svg>`,O=`Cluster of ${f} markers`,d=Number(google.maps.Marker.MAX_ZINDEX)+f;if(pt.isAdvancedMarkerAvailable(w)){const L=new DOMParser().parseFromString(v,"image/svg+xml").documentElement;L.setAttribute("transform","translate(0 25)");const K={map:w,position:i,zIndex:d,title:O,content:L};return new google.maps.marker.AdvancedMarkerElement(K)}const T={position:i,zIndex:d,title:O,icon:{url:`data:image/svg+xml;base64,${btoa(v)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(T)}}function T0(I,f){for(let i in f.prototype)I.prototype[i]=f.prototype[i]}class ms{constructor(){T0(ms,google.maps.OverlayView)}}var rr;(function(I){I.CLUSTERING_BEGIN="clusteringbegin",I.CLUSTERING_END="clusteringend",I.CLUSTER_CLICK="click"})(rr||(rr={}));const O0=(I,f,i)=>{i.fitBounds(f.bounds)};class D0 extends ms{constructor({map:f,markers:i=[],algorithmOptions:g={},algorithm:w=new M0(g),renderer:x=new R0,onClusterClick:v=O0}){super(),this.markers=[...i],this.clusters=[],this.algorithm=w,this.renderer=x,this.onClusterClick=v,f&&this.setMap(f)}addMarker(f,i){this.markers.includes(f)||(this.markers.push(f),i||this.render())}addMarkers(f,i){f.forEach(g=>{this.addMarker(g,!0)}),i||this.render()}removeMarker(f,i){const g=this.markers.indexOf(f);return g===-1?!1:(pt.setMap(f,null),this.markers.splice(g,1),i||this.render(),!0)}removeMarkers(f,i){let g=!1;return f.forEach(w=>{g=this.removeMarker(w,!0)||g}),g&&!i&&this.render(),g}clearMarkers(f){this.markers.length=0,f||this.render()}render(){const f=this.getMap();if(f instanceof google.maps.Map&&f.getProjection()){google.maps.event.trigger(this,rr.CLUSTERING_BEGIN,this);const{clusters:i,changed:g}=this.algorithm.calculate({markers:this.markers,map:f,mapCanvasProjection:this.getProjection()});if(g||g==null){const w=new Set;for(const v of i)v.markers.length==1&&w.add(v.markers[0]);const x=[];for(const v of this.clusters)v.marker!=null&&(v.markers.length==1?w.has(v.marker)||pt.setMap(v.marker,null):x.push(v.marker));this.clusters=i,this.renderClusters(),requestAnimationFrame(()=>x.forEach(v=>pt.setMap(v,null)))}google.maps.event.trigger(this,rr.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(f=>pt.setMap(f,null)),this.clusters.forEach(f=>f.delete()),this.clusters=[]}renderClusters(){const f=new b0(this.markers,this.clusters),i=this.getMap();this.clusters.forEach(g=>{g.markers.length===1?g.marker=g.markers[0]:(g.marker=this.renderer.render(g,f,i),g.markers.forEach(w=>pt.setMap(w,null)),this.onClusterClick&&g.marker.addListener("click",w=>{google.maps.event.trigger(this,rr.CLUSTER_CLICK,g),this.onClusterClick(w,g,i)})),pt.setMap(g.marker,i)})}}var Jr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Jr.exports;(function(I,f){(function(){var i,g="4.17.21",w=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",O="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",T=500,F="__lodash_placeholder__",L=1,K=2,Z=4,en=1,un=2,q=1,Q=2,vn=4,cn=8,hn=16,An=32,Rn=64,dn=128,Ln=256,qn=512,Ft=30,xn="...",Pn=800,zn=16,Ut=1,Tt=2,Jn=3,dt=1/0,Mn=9007199254740991,ue=17976931348623157e292,st=NaN,Wn=4294967295,$=Wn-1,sn=Wn>>>1,Fn=[["ary",dn],["bind",q],["bindKey",Q],["curry",cn],["curryRight",hn],["flip",qn],["partial",An],["partialRight",Rn],["rearg",Ln]],Un="[object Arguments]",Qn="[object Array]",W="[object AsyncFunction]",Tn="[object Boolean]",$n="[object Date]",It="[object DOMException]",bn="[object Error]",ut="[object Function]",oe="[object GeneratorFunction]",Gn="[object Map]",Et="[object Number]",Ae="[object Null]",jn="[object Object]",ir="[object Promise]",Qr="[object Proxy]",fe="[object RegExp]",ot="[object Set]",ae="[object String]",Se="[object Symbol]",sr="[object Undefined]",le="[object WeakMap]",A="[object WeakSet]",E="[object ArrayBuffer]",b="[object DataView]",D="[object Float32Array]",G="[object Float64Array]",nn="[object Int8Array]",z="[object Int16Array]",on="[object Int32Array]",mn="[object Uint8Array]",In="[object Uint8ClampedArray]",nt="[object Uint16Array]",Ct="[object Uint32Array]",qt=/\b__p \+= '';/g,Ie=/\b(__p \+=) '' \+/g,zt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ys=/&(?:amp|lt|gt|quot|#39);/g,As=/[&<>"']/g,gf=RegExp(ys.source),pf=RegExp(As.source),df=/<%-([\s\S]+?)%>/g,_f=/<%([\s\S]+?)%>/g,Ss=/<%=([\s\S]+?)%>/g,vf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wf=/^\w*$/,xf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jr=/[\\^$.*+?()[\]{}|]/g,mf=RegExp(jr.source),ni=/^\s+/,yf=/\s/,Af=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sf=/\{\n\/\* \[wrapped with (.+)\] \*/,If=/,? & /,Ef=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cf=/[()=,{}\[\]\/\s]/,Lf=/\\(\\)?/g,Mf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Is=/\w*$/,bf=/^[-+]0x[0-9a-f]+$/i,Rf=/^0b[01]+$/i,Tf=/^\[object .+?Constructor\]$/,Of=/^0o[0-7]+$/i,Df=/^(?:0|[1-9]\d*)$/,Pf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ur=/($^)/,Ff=/['\n\r\u2028\u2029\\]/g,or="\\ud800-\\udfff",Uf="\\u0300-\\u036f",Bf="\\ufe20-\\ufe2f",Wf="\\u20d0-\\u20ff",Es=Uf+Bf+Wf,Cs="\\u2700-\\u27bf",Ls="a-z\\xdf-\\xf6\\xf8-\\xff",Nf="\\xac\\xb1\\xd7\\xf7",kf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$f="\\u2000-\\u206f",Gf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ms="A-Z\\xc0-\\xd6\\xd8-\\xde",bs="\\ufe0e\\ufe0f",Rs=Nf+kf+$f+Gf,ti="['’]",Hf="["+or+"]",Ts="["+Rs+"]",fr="["+Es+"]",Os="\\d+",Zf="["+Cs+"]",Ds="["+Ls+"]",Ps="[^"+or+Rs+Os+Cs+Ls+Ms+"]",ei="\\ud83c[\\udffb-\\udfff]",Kf="(?:"+fr+"|"+ei+")",Fs="[^"+or+"]",ri="(?:\\ud83c[\\udde6-\\uddff]){2}",ii="[\\ud800-\\udbff][\\udc00-\\udfff]",Ee="["+Ms+"]",Us="\\u200d",Bs="(?:"+Ds+"|"+Ps+")",qf="(?:"+Ee+"|"+Ps+")",Ws="(?:"+ti+"(?:d|ll|m|re|s|t|ve))?",Ns="(?:"+ti+"(?:D|LL|M|RE|S|T|VE))?",ks=Kf+"?",$s="["+bs+"]?",zf="(?:"+Us+"(?:"+[Fs,ri,ii].join("|")+")"+$s+ks+")*",Vf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gs=$s+ks+zf,Xf="(?:"+[Zf,ri,ii].join("|")+")"+Gs,Jf="(?:"+[Fs+fr+"?",fr,ri,ii,Hf].join("|")+")",Qf=RegExp(ti,"g"),jf=RegExp(fr,"g"),si=RegExp(ei+"(?="+ei+")|"+Jf+Gs,"g"),na=RegExp([Ee+"?"+Ds+"+"+Ws+"(?="+[Ts,Ee,"$"].join("|")+")",qf+"+"+Ns+"(?="+[Ts,Ee+Bs,"$"].join("|")+")",Ee+"?"+Bs+"+"+Ws,Ee+"+"+Ns,Yf,Vf,Os,Xf].join("|"),"g"),ta=RegExp("["+Us+or+Es+bs+"]"),ea=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ra=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ia=-1,_n={};_n[D]=_n[G]=_n[nn]=_n[z]=_n[on]=_n[mn]=_n[In]=_n[nt]=_n[Ct]=!0,_n[Un]=_n[Qn]=_n[E]=_n[Tn]=_n[b]=_n[$n]=_n[bn]=_n[ut]=_n[Gn]=_n[Et]=_n[jn]=_n[fe]=_n[ot]=_n[ae]=_n[le]=!1;var pn={};pn[Un]=pn[Qn]=pn[E]=pn[b]=pn[Tn]=pn[$n]=pn[D]=pn[G]=pn[nn]=pn[z]=pn[on]=pn[Gn]=pn[Et]=pn[jn]=pn[fe]=pn[ot]=pn[ae]=pn[Se]=pn[mn]=pn[In]=pn[nt]=pn[Ct]=!0,pn[bn]=pn[ut]=pn[le]=!1;var sa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aa=parseFloat,la=parseInt,Hs=typeof nr=="object"&&nr&&nr.Object===Object&&nr,ca=typeof self=="object"&&self&&self.Object===Object&&self,Nn=Hs||ca||Function("return this")(),ui=f&&!f.nodeType&&f,ce=ui&&!0&&I&&!I.nodeType&&I,Zs=ce&&ce.exports===ui,oi=Zs&&Hs.process,_t=function(){try{var c=ce&&ce.require&&ce.require("util").types;return c||oi&&oi.binding&&oi.binding("util")}catch{}}(),Ks=_t&&_t.isArrayBuffer,qs=_t&&_t.isDate,zs=_t&&_t.isMap,Vs=_t&&_t.isRegExp,Ys=_t&&_t.isSet,Xs=_t&&_t.isTypedArray;function ft(c,_,p){switch(p.length){case 0:return c.call(_);case 1:return c.call(_,p[0]);case 2:return c.call(_,p[0],p[1]);case 3:return c.call(_,p[0],p[1],p[2])}return c.apply(_,p)}function ha(c,_,p,M){for(var k=-1,fn=c==null?0:c.length;++k<fn;){var On=c[k];_(M,On,p(On),c)}return M}function vt(c,_){for(var p=-1,M=c==null?0:c.length;++p<M&&_(c[p],p,c)!==!1;);return c}function ga(c,_){for(var p=c==null?0:c.length;p--&&_(c[p],p,c)!==!1;);return c}function Js(c,_){for(var p=-1,M=c==null?0:c.length;++p<M;)if(!_(c[p],p,c))return!1;return!0}function Vt(c,_){for(var p=-1,M=c==null?0:c.length,k=0,fn=[];++p<M;){var On=c[p];_(On,p,c)&&(fn[k++]=On)}return fn}function ar(c,_){var p=c==null?0:c.length;return!!p&&Ce(c,_,0)>-1}function fi(c,_,p){for(var M=-1,k=c==null?0:c.length;++M<k;)if(p(_,c[M]))return!0;return!1}function wn(c,_){for(var p=-1,M=c==null?0:c.length,k=Array(M);++p<M;)k[p]=_(c[p],p,c);return k}function Yt(c,_){for(var p=-1,M=_.length,k=c.length;++p<M;)c[k+p]=_[p];return c}function ai(c,_,p,M){var k=-1,fn=c==null?0:c.length;for(M&&fn&&(p=c[++k]);++k<fn;)p=_(p,c[k],k,c);return p}function pa(c,_,p,M){var k=c==null?0:c.length;for(M&&k&&(p=c[--k]);k--;)p=_(p,c[k],k,c);return p}function li(c,_){for(var p=-1,M=c==null?0:c.length;++p<M;)if(_(c[p],p,c))return!0;return!1}var da=ci("length");function _a(c){return c.split("")}function va(c){return c.match(Ef)||[]}function Qs(c,_,p){var M;return p(c,function(k,fn,On){if(_(k,fn,On))return M=fn,!1}),M}function lr(c,_,p,M){for(var k=c.length,fn=p+(M?1:-1);M?fn--:++fn<k;)if(_(c[fn],fn,c))return fn;return-1}function Ce(c,_,p){return _===_?ba(c,_,p):lr(c,js,p)}function wa(c,_,p,M){for(var k=p-1,fn=c.length;++k<fn;)if(M(c[k],_))return k;return-1}function js(c){return c!==c}function nu(c,_){var p=c==null?0:c.length;return p?gi(c,_)/p:st}function ci(c){return function(_){return _==null?i:_[c]}}function hi(c){return function(_){return c==null?i:c[_]}}function tu(c,_,p,M,k){return k(c,function(fn,On,gn){p=M?(M=!1,fn):_(p,fn,On,gn)}),p}function xa(c,_){var p=c.length;for(c.sort(_);p--;)c[p]=c[p].value;return c}function gi(c,_){for(var p,M=-1,k=c.length;++M<k;){var fn=_(c[M]);fn!==i&&(p=p===i?fn:p+fn)}return p}function pi(c,_){for(var p=-1,M=Array(c);++p<c;)M[p]=_(p);return M}function ma(c,_){return wn(_,function(p){return[p,c[p]]})}function eu(c){return c&&c.slice(0,uu(c)+1).replace(ni,"")}function at(c){return function(_){return c(_)}}function di(c,_){return wn(_,function(p){return c[p]})}function Ne(c,_){return c.has(_)}function ru(c,_){for(var p=-1,M=c.length;++p<M&&Ce(_,c[p],0)>-1;);return p}function iu(c,_){for(var p=c.length;p--&&Ce(_,c[p],0)>-1;);return p}function ya(c,_){for(var p=c.length,M=0;p--;)c[p]===_&&++M;return M}var Aa=hi(sa),Sa=hi(ua);function Ia(c){return"\\"+fa[c]}function Ea(c,_){return c==null?i:c[_]}function Le(c){return ta.test(c)}function Ca(c){return ea.test(c)}function La(c){for(var _,p=[];!(_=c.next()).done;)p.push(_.value);return p}function _i(c){var _=-1,p=Array(c.size);return c.forEach(function(M,k){p[++_]=[k,M]}),p}function su(c,_){return function(p){return c(_(p))}}function Xt(c,_){for(var p=-1,M=c.length,k=0,fn=[];++p<M;){var On=c[p];(On===_||On===F)&&(c[p]=F,fn[k++]=p)}return fn}function cr(c){var _=-1,p=Array(c.size);return c.forEach(function(M){p[++_]=M}),p}function Ma(c){var _=-1,p=Array(c.size);return c.forEach(function(M){p[++_]=[M,M]}),p}function ba(c,_,p){for(var M=p-1,k=c.length;++M<k;)if(c[M]===_)return M;return-1}function Ra(c,_,p){for(var M=p+1;M--;)if(c[M]===_)return M;return M}function Me(c){return Le(c)?Oa(c):da(c)}function Lt(c){return Le(c)?Da(c):_a(c)}function uu(c){for(var _=c.length;_--&&yf.test(c.charAt(_)););return _}var Ta=hi(oa);function Oa(c){for(var _=si.lastIndex=0;si.test(c);)++_;return _}function Da(c){return c.match(si)||[]}function Pa(c){return c.match(na)||[]}var Fa=function c(_){_=_==null?Nn:be.defaults(Nn.Object(),_,be.pick(Nn,ra));var p=_.Array,M=_.Date,k=_.Error,fn=_.Function,On=_.Math,gn=_.Object,vi=_.RegExp,Ua=_.String,wt=_.TypeError,hr=p.prototype,Ba=fn.prototype,Re=gn.prototype,gr=_["__core-js_shared__"],pr=Ba.toString,ln=Re.hasOwnProperty,Wa=0,ou=function(){var n=/[^.]+$/.exec(gr&&gr.keys&&gr.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),dr=Re.toString,Na=pr.call(gn),ka=Nn._,$a=vi("^"+pr.call(ln).replace(jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_r=Zs?_.Buffer:i,Jt=_.Symbol,vr=_.Uint8Array,fu=_r?_r.allocUnsafe:i,wr=su(gn.getPrototypeOf,gn),au=gn.create,lu=Re.propertyIsEnumerable,xr=hr.splice,cu=Jt?Jt.isConcatSpreadable:i,ke=Jt?Jt.iterator:i,he=Jt?Jt.toStringTag:i,mr=function(){try{var n=ve(gn,"defineProperty");return n({},"",{}),n}catch{}}(),Ga=_.clearTimeout!==Nn.clearTimeout&&_.clearTimeout,Ha=M&&M.now!==Nn.Date.now&&M.now,Za=_.setTimeout!==Nn.setTimeout&&_.setTimeout,yr=On.ceil,Ar=On.floor,wi=gn.getOwnPropertySymbols,Ka=_r?_r.isBuffer:i,hu=_.isFinite,qa=hr.join,za=su(gn.keys,gn),Dn=On.max,Hn=On.min,Va=M.now,Ya=_.parseInt,gu=On.random,Xa=hr.reverse,xi=ve(_,"DataView"),$e=ve(_,"Map"),mi=ve(_,"Promise"),Te=ve(_,"Set"),Ge=ve(_,"WeakMap"),He=ve(gn,"create"),Sr=Ge&&new Ge,Oe={},Ja=we(xi),Qa=we($e),ja=we(mi),nl=we(Te),tl=we(Ge),Ir=Jt?Jt.prototype:i,Ze=Ir?Ir.valueOf:i,pu=Ir?Ir.toString:i;function u(n){if(Sn(n)&&!H(n)&&!(n instanceof tn)){if(n instanceof xt)return n;if(ln.call(n,"__wrapped__"))return _o(n)}return new xt(n)}var De=function(){function n(){}return function(t){if(!yn(t))return{};if(au)return au(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function Er(){}function xt(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}u.templateSettings={escape:df,evaluate:_f,interpolate:Ss,variable:"",imports:{_:u}},u.prototype=Er.prototype,u.prototype.constructor=u,xt.prototype=De(Er.prototype),xt.prototype.constructor=xt;function tn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wn,this.__views__=[]}function el(){var n=new tn(this.__wrapped__);return n.__actions__=tt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=tt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=tt(this.__views__),n}function rl(){if(this.__filtered__){var n=new tn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function il(){var n=this.__wrapped__.value(),t=this.__dir__,e=H(n),r=t<0,s=e?n.length:0,o=_c(0,s,this.__views__),a=o.start,l=o.end,h=l-a,m=r?l:a-1,y=this.__iteratees__,S=y.length,C=0,R=Hn(h,this.__takeCount__);if(!e||!r&&s==h&&R==h)return Wu(n,this.__actions__);var U=[];n:for(;h--&&C<R;){m+=t;for(var X=-1,B=n[m];++X<S;){var j=y[X],rn=j.iteratee,ht=j.type,Xn=rn(B);if(ht==Tt)B=Xn;else if(!Xn){if(ht==Ut)continue n;break n}}U[C++]=B}return U}tn.prototype=De(Er.prototype),tn.prototype.constructor=tn;function ge(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function sl(){this.__data__=He?He(null):{},this.size=0}function ul(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function ol(n){var t=this.__data__;if(He){var e=t[n];return e===d?i:e}return ln.call(t,n)?t[n]:i}function fl(n){var t=this.__data__;return He?t[n]!==i:ln.call(t,n)}function al(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=He&&t===i?d:t,this}ge.prototype.clear=sl,ge.prototype.delete=ul,ge.prototype.get=ol,ge.prototype.has=fl,ge.prototype.set=al;function Bt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function ll(){this.__data__=[],this.size=0}function cl(n){var t=this.__data__,e=Cr(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():xr.call(t,e,1),--this.size,!0}function hl(n){var t=this.__data__,e=Cr(t,n);return e<0?i:t[e][1]}function gl(n){return Cr(this.__data__,n)>-1}function pl(n,t){var e=this.__data__,r=Cr(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}Bt.prototype.clear=ll,Bt.prototype.delete=cl,Bt.prototype.get=hl,Bt.prototype.has=gl,Bt.prototype.set=pl;function Wt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function dl(){this.size=0,this.__data__={hash:new ge,map:new($e||Bt),string:new ge}}function _l(n){var t=Wr(this,n).delete(n);return this.size-=t?1:0,t}function vl(n){return Wr(this,n).get(n)}function wl(n){return Wr(this,n).has(n)}function xl(n,t){var e=Wr(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}Wt.prototype.clear=dl,Wt.prototype.delete=_l,Wt.prototype.get=vl,Wt.prototype.has=wl,Wt.prototype.set=xl;function pe(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Wt;++t<e;)this.add(n[t])}function ml(n){return this.__data__.set(n,d),this}function yl(n){return this.__data__.has(n)}pe.prototype.add=pe.prototype.push=ml,pe.prototype.has=yl;function Mt(n){var t=this.__data__=new Bt(n);this.size=t.size}function Al(){this.__data__=new Bt,this.size=0}function Sl(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function Il(n){return this.__data__.get(n)}function El(n){return this.__data__.has(n)}function Cl(n,t){var e=this.__data__;if(e instanceof Bt){var r=e.__data__;if(!$e||r.length<w-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Wt(r)}return e.set(n,t),this.size=e.size,this}Mt.prototype.clear=Al,Mt.prototype.delete=Sl,Mt.prototype.get=Il,Mt.prototype.has=El,Mt.prototype.set=Cl;function du(n,t){var e=H(n),r=!e&&xe(n),s=!e&&!r&&ee(n),o=!e&&!r&&!s&&Be(n),a=e||r||s||o,l=a?pi(n.length,Ua):[],h=l.length;for(var m in n)(t||ln.call(n,m))&&!(a&&(m=="length"||s&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Gt(m,h)))&&l.push(m);return l}function _u(n){var t=n.length;return t?n[Ti(0,t-1)]:i}function Ll(n,t){return Nr(tt(n),de(t,0,n.length))}function Ml(n){return Nr(tt(n))}function yi(n,t,e){(e!==i&&!bt(n[t],e)||e===i&&!(t in n))&&Nt(n,t,e)}function Ke(n,t,e){var r=n[t];(!(ln.call(n,t)&&bt(r,e))||e===i&&!(t in n))&&Nt(n,t,e)}function Cr(n,t){for(var e=n.length;e--;)if(bt(n[e][0],t))return e;return-1}function bl(n,t,e,r){return Qt(n,function(s,o,a){t(r,s,e(s),a)}),r}function vu(n,t){return n&&Dt(t,Bn(t),n)}function Rl(n,t){return n&&Dt(t,rt(t),n)}function Nt(n,t,e){t=="__proto__"&&mr?mr(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Ai(n,t){for(var e=-1,r=t.length,s=p(r),o=n==null;++e<r;)s[e]=o?i:es(n,t[e]);return s}function de(n,t,e){return n===n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function mt(n,t,e,r,s,o){var a,l=t&L,h=t&K,m=t&Z;if(e&&(a=s?e(n,r,s,o):e(n)),a!==i)return a;if(!yn(n))return n;var y=H(n);if(y){if(a=wc(n),!l)return tt(n,a)}else{var S=Zn(n),C=S==ut||S==oe;if(ee(n))return $u(n,l);if(S==jn||S==Un||C&&!s){if(a=h||C?{}:uo(n),!l)return h?oc(n,Rl(a,n)):uc(n,vu(a,n))}else{if(!pn[S])return s?n:{};a=xc(n,S,l)}}o||(o=new Mt);var R=o.get(n);if(R)return R;o.set(n,a),Uo(n)?n.forEach(function(B){a.add(mt(B,t,e,B,n,o))}):Po(n)&&n.forEach(function(B,j){a.set(j,mt(B,t,e,j,n,o))});var U=m?h?Gi:$i:h?rt:Bn,X=y?i:U(n);return vt(X||n,function(B,j){X&&(j=B,B=n[j]),Ke(a,j,mt(B,t,e,j,n,o))}),a}function Tl(n){var t=Bn(n);return function(e){return wu(e,n,t)}}function wu(n,t,e){var r=e.length;if(n==null)return!r;for(n=gn(n);r--;){var s=e[r],o=t[s],a=n[s];if(a===i&&!(s in n)||!o(a))return!1}return!0}function xu(n,t,e){if(typeof n!="function")throw new wt(v);return Qe(function(){n.apply(i,e)},t)}function qe(n,t,e,r){var s=-1,o=ar,a=!0,l=n.length,h=[],m=t.length;if(!l)return h;e&&(t=wn(t,at(e))),r?(o=fi,a=!1):t.length>=w&&(o=Ne,a=!1,t=new pe(t));n:for(;++s<l;){var y=n[s],S=e==null?y:e(y);if(y=r||y!==0?y:0,a&&S===S){for(var C=m;C--;)if(t[C]===S)continue n;h.push(y)}else o(t,S,r)||h.push(y)}return h}var Qt=qu(Ot),mu=qu(Ii,!0);function Ol(n,t){var e=!0;return Qt(n,function(r,s,o){return e=!!t(r,s,o),e}),e}function Lr(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],a=t(o);if(a!=null&&(l===i?a===a&&!ct(a):e(a,l)))var l=a,h=o}return h}function Dl(n,t,e,r){var s=n.length;for(e=V(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:V(r),r<0&&(r+=s),r=e>r?0:Wo(r);e<r;)n[e++]=t;return n}function yu(n,t){var e=[];return Qt(n,function(r,s,o){t(r,s,o)&&e.push(r)}),e}function kn(n,t,e,r,s){var o=-1,a=n.length;for(e||(e=yc),s||(s=[]);++o<a;){var l=n[o];t>0&&e(l)?t>1?kn(l,t-1,e,r,s):Yt(s,l):r||(s[s.length]=l)}return s}var Si=zu(),Au=zu(!0);function Ot(n,t){return n&&Si(n,t,Bn)}function Ii(n,t){return n&&Au(n,t,Bn)}function Mr(n,t){return Vt(t,function(e){return Ht(n[e])})}function _e(n,t){t=ne(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[Pt(t[e++])];return e&&e==r?n:i}function Su(n,t,e){var r=t(n);return H(n)?r:Yt(r,e(n))}function Vn(n){return n==null?n===i?sr:Ae:he&&he in gn(n)?dc(n):Mc(n)}function Ei(n,t){return n>t}function Pl(n,t){return n!=null&&ln.call(n,t)}function Fl(n,t){return n!=null&&t in gn(n)}function Ul(n,t,e){return n>=Hn(t,e)&&n<Dn(t,e)}function Ci(n,t,e){for(var r=e?fi:ar,s=n[0].length,o=n.length,a=o,l=p(o),h=1/0,m=[];a--;){var y=n[a];a&&t&&(y=wn(y,at(t))),h=Hn(y.length,h),l[a]=!e&&(t||s>=120&&y.length>=120)?new pe(a&&y):i}y=n[0];var S=-1,C=l[0];n:for(;++S<s&&m.length<h;){var R=y[S],U=t?t(R):R;if(R=e||R!==0?R:0,!(C?Ne(C,U):r(m,U,e))){for(a=o;--a;){var X=l[a];if(!(X?Ne(X,U):r(n[a],U,e)))continue n}C&&C.push(U),m.push(R)}}return m}function Bl(n,t,e,r){return Ot(n,function(s,o,a){t(r,e(s),o,a)}),r}function ze(n,t,e){t=ne(t,n),n=lo(n,t);var r=n==null?n:n[Pt(At(t))];return r==null?i:ft(r,n,e)}function Iu(n){return Sn(n)&&Vn(n)==Un}function Wl(n){return Sn(n)&&Vn(n)==E}function Nl(n){return Sn(n)&&Vn(n)==$n}function Ve(n,t,e,r,s){return n===t?!0:n==null||t==null||!Sn(n)&&!Sn(t)?n!==n&&t!==t:kl(n,t,e,r,Ve,s)}function kl(n,t,e,r,s,o){var a=H(n),l=H(t),h=a?Qn:Zn(n),m=l?Qn:Zn(t);h=h==Un?jn:h,m=m==Un?jn:m;var y=h==jn,S=m==jn,C=h==m;if(C&&ee(n)){if(!ee(t))return!1;a=!0,y=!1}if(C&&!y)return o||(o=new Mt),a||Be(n)?ro(n,t,e,r,s,o):gc(n,t,h,e,r,s,o);if(!(e&en)){var R=y&&ln.call(n,"__wrapped__"),U=S&&ln.call(t,"__wrapped__");if(R||U){var X=R?n.value():n,B=U?t.value():t;return o||(o=new Mt),s(X,B,e,r,o)}}return C?(o||(o=new Mt),pc(n,t,e,r,s,o)):!1}function $l(n){return Sn(n)&&Zn(n)==Gn}function Li(n,t,e,r){var s=e.length,o=s,a=!r;if(n==null)return!o;for(n=gn(n);s--;){var l=e[s];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<o;){l=e[s];var h=l[0],m=n[h],y=l[1];if(a&&l[2]){if(m===i&&!(h in n))return!1}else{var S=new Mt;if(r)var C=r(m,y,h,n,t,S);if(!(C===i?Ve(y,m,en|un,r,S):C))return!1}}return!0}function Eu(n){if(!yn(n)||Sc(n))return!1;var t=Ht(n)?$a:Tf;return t.test(we(n))}function Gl(n){return Sn(n)&&Vn(n)==fe}function Hl(n){return Sn(n)&&Zn(n)==ot}function Zl(n){return Sn(n)&&Kr(n.length)&&!!_n[Vn(n)]}function Cu(n){return typeof n=="function"?n:n==null?it:typeof n=="object"?H(n)?bu(n[0],n[1]):Mu(n):Yo(n)}function Mi(n){if(!Je(n))return za(n);var t=[];for(var e in gn(n))ln.call(n,e)&&e!="constructor"&&t.push(e);return t}function Kl(n){if(!yn(n))return Lc(n);var t=Je(n),e=[];for(var r in n)r=="constructor"&&(t||!ln.call(n,r))||e.push(r);return e}function bi(n,t){return n<t}function Lu(n,t){var e=-1,r=et(n)?p(n.length):[];return Qt(n,function(s,o,a){r[++e]=t(s,o,a)}),r}function Mu(n){var t=Zi(n);return t.length==1&&t[0][2]?fo(t[0][0],t[0][1]):function(e){return e===n||Li(e,n,t)}}function bu(n,t){return qi(n)&&oo(t)?fo(Pt(n),t):function(e){var r=es(e,n);return r===i&&r===t?rs(e,n):Ve(t,r,en|un)}}function br(n,t,e,r,s){n!==t&&Si(t,function(o,a){if(s||(s=new Mt),yn(o))ql(n,t,a,e,br,r,s);else{var l=r?r(Vi(n,a),o,a+"",n,t,s):i;l===i&&(l=o),yi(n,a,l)}},rt)}function ql(n,t,e,r,s,o,a){var l=Vi(n,e),h=Vi(t,e),m=a.get(h);if(m){yi(n,e,m);return}var y=o?o(l,h,e+"",n,t,a):i,S=y===i;if(S){var C=H(h),R=!C&&ee(h),U=!C&&!R&&Be(h);y=h,C||R||U?H(l)?y=l:En(l)?y=tt(l):R?(S=!1,y=$u(h,!0)):U?(S=!1,y=Gu(h,!0)):y=[]:je(h)||xe(h)?(y=l,xe(l)?y=No(l):(!yn(l)||Ht(l))&&(y=uo(h))):S=!1}S&&(a.set(h,y),s(y,h,r,o,a),a.delete(h)),yi(n,e,y)}function Ru(n,t){var e=n.length;if(e)return t+=t<0?e:0,Gt(t,e)?n[t]:i}function Tu(n,t,e){t.length?t=wn(t,function(o){return H(o)?function(a){return _e(a,o.length===1?o[0]:o)}:o}):t=[it];var r=-1;t=wn(t,at(P()));var s=Lu(n,function(o,a,l){var h=wn(t,function(m){return m(o)});return{criteria:h,index:++r,value:o}});return xa(s,function(o,a){return sc(o,a,e)})}function zl(n,t){return Ou(n,t,function(e,r){return rs(n,r)})}function Ou(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var a=t[r],l=_e(n,a);e(l,a)&&Ye(o,ne(a,n),l)}return o}function Vl(n){return function(t){return _e(t,n)}}function Ri(n,t,e,r){var s=r?wa:Ce,o=-1,a=t.length,l=n;for(n===t&&(t=tt(t)),e&&(l=wn(n,at(e)));++o<a;)for(var h=0,m=t[o],y=e?e(m):m;(h=s(l,y,h,r))>-1;)l!==n&&xr.call(l,h,1),xr.call(n,h,1);return n}function Du(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;Gt(s)?xr.call(n,s,1):Pi(n,s)}}return n}function Ti(n,t){return n+Ar(gu()*(t-n+1))}function Yl(n,t,e,r){for(var s=-1,o=Dn(yr((t-n)/(e||1)),0),a=p(o);o--;)a[r?o:++s]=n,n+=e;return a}function Oi(n,t){var e="";if(!n||t<1||t>Mn)return e;do t%2&&(e+=n),t=Ar(t/2),t&&(n+=n);while(t);return e}function J(n,t){return Yi(ao(n,t,it),n+"")}function Xl(n){return _u(We(n))}function Jl(n,t){var e=We(n);return Nr(e,de(t,0,e.length))}function Ye(n,t,e,r){if(!yn(n))return n;t=ne(t,n);for(var s=-1,o=t.length,a=o-1,l=n;l!=null&&++s<o;){var h=Pt(t[s]),m=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(s!=a){var y=l[h];m=r?r(y,h,l):i,m===i&&(m=yn(y)?y:Gt(t[s+1])?[]:{})}Ke(l,h,m),l=l[h]}return n}var Pu=Sr?function(n,t){return Sr.set(n,t),n}:it,Ql=mr?function(n,t){return mr(n,"toString",{configurable:!0,enumerable:!1,value:ss(t),writable:!0})}:it;function jl(n){return Nr(We(n))}function yt(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=p(s);++r<s;)o[r]=n[r+t];return o}function nc(n,t){var e;return Qt(n,function(r,s,o){return e=t(r,s,o),!e}),!!e}function Rr(n,t,e){var r=0,s=n==null?r:n.length;if(typeof t=="number"&&t===t&&s<=sn){for(;r<s;){var o=r+s>>>1,a=n[o];a!==null&&!ct(a)&&(e?a<=t:a<t)?r=o+1:s=o}return s}return Di(n,t,it,e)}function Di(n,t,e,r){var s=0,o=n==null?0:n.length;if(o===0)return 0;t=e(t);for(var a=t!==t,l=t===null,h=ct(t),m=t===i;s<o;){var y=Ar((s+o)/2),S=e(n[y]),C=S!==i,R=S===null,U=S===S,X=ct(S);if(a)var B=r||U;else m?B=U&&(r||C):l?B=U&&C&&(r||!R):h?B=U&&C&&!R&&(r||!X):R||X?B=!1:B=r?S<=t:S<t;B?s=y+1:o=y}return Hn(o,$)}function Fu(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!bt(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function Uu(n){return typeof n=="number"?n:ct(n)?st:+n}function lt(n){if(typeof n=="string")return n;if(H(n))return wn(n,lt)+"";if(ct(n))return pu?pu.call(n):"";var t=n+"";return t=="0"&&1/n==-dt?"-0":t}function jt(n,t,e){var r=-1,s=ar,o=n.length,a=!0,l=[],h=l;if(e)a=!1,s=fi;else if(o>=w){var m=t?null:cc(n);if(m)return cr(m);a=!1,s=Ne,h=new pe}else h=t?[]:l;n:for(;++r<o;){var y=n[r],S=t?t(y):y;if(y=e||y!==0?y:0,a&&S===S){for(var C=h.length;C--;)if(h[C]===S)continue n;t&&h.push(S),l.push(y)}else s(h,S,e)||(h!==l&&h.push(S),l.push(y))}return l}function Pi(n,t){return t=ne(t,n),n=lo(n,t),n==null||delete n[Pt(At(t))]}function Bu(n,t,e,r){return Ye(n,t,e(_e(n,t)),r)}function Tr(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?yt(n,r?0:o,r?o+1:s):yt(n,r?o+1:0,r?s:o)}function Wu(n,t){var e=n;return e instanceof tn&&(e=e.value()),ai(t,function(r,s){return s.func.apply(s.thisArg,Yt([r],s.args))},e)}function Fi(n,t,e){var r=n.length;if(r<2)return r?jt(n[0]):[];for(var s=-1,o=p(r);++s<r;)for(var a=n[s],l=-1;++l<r;)l!=s&&(o[s]=qe(o[s]||a,n[l],t,e));return jt(kn(o,1),t,e)}function Nu(n,t,e){for(var r=-1,s=n.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:i;e(a,n[r],l)}return a}function Ui(n){return En(n)?n:[]}function Bi(n){return typeof n=="function"?n:it}function ne(n,t){return H(n)?n:qi(n,t)?[n]:po(an(n))}var tc=J;function te(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:yt(n,t,e)}var ku=Ga||function(n){return Nn.clearTimeout(n)};function $u(n,t){if(t)return n.slice();var e=n.length,r=fu?fu(e):new n.constructor(e);return n.copy(r),r}function Wi(n){var t=new n.constructor(n.byteLength);return new vr(t).set(new vr(n)),t}function ec(n,t){var e=t?Wi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}function rc(n){var t=new n.constructor(n.source,Is.exec(n));return t.lastIndex=n.lastIndex,t}function ic(n){return Ze?gn(Ze.call(n)):{}}function Gu(n,t){var e=t?Wi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function Hu(n,t){if(n!==t){var e=n!==i,r=n===null,s=n===n,o=ct(n),a=t!==i,l=t===null,h=t===t,m=ct(t);if(!l&&!m&&!o&&n>t||o&&a&&h&&!l&&!m||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!m&&n<t||m&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function sc(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,a=s.length,l=e.length;++r<a;){var h=Hu(s[r],o[r]);if(h){if(r>=l)return h;var m=e[r];return h*(m=="desc"?-1:1)}}return n.index-t.index}function Zu(n,t,e,r){for(var s=-1,o=n.length,a=e.length,l=-1,h=t.length,m=Dn(o-a,0),y=p(h+m),S=!r;++l<h;)y[l]=t[l];for(;++s<a;)(S||s<o)&&(y[e[s]]=n[s]);for(;m--;)y[l++]=n[s++];return y}function Ku(n,t,e,r){for(var s=-1,o=n.length,a=-1,l=e.length,h=-1,m=t.length,y=Dn(o-l,0),S=p(y+m),C=!r;++s<y;)S[s]=n[s];for(var R=s;++h<m;)S[R+h]=t[h];for(;++a<l;)(C||s<o)&&(S[R+e[a]]=n[s++]);return S}function tt(n,t){var e=-1,r=n.length;for(t||(t=p(r));++e<r;)t[e]=n[e];return t}function Dt(n,t,e,r){var s=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var l=t[o],h=r?r(e[l],n[l],l,e,n):i;h===i&&(h=n[l]),s?Nt(e,l,h):Ke(e,l,h)}return e}function uc(n,t){return Dt(n,Ki(n),t)}function oc(n,t){return Dt(n,io(n),t)}function Or(n,t){return function(e,r){var s=H(e)?ha:bl,o=t?t():{};return s(e,n,P(r,2),o)}}function Pe(n){return J(function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=n.length>3&&typeof o=="function"?(s--,o):i,a&&Yn(e[0],e[1],a)&&(o=s<3?i:o,s=1),t=gn(t);++r<s;){var l=e[r];l&&n(t,l,r,o)}return t})}function qu(n,t){return function(e,r){if(e==null)return e;if(!et(e))return n(e,r);for(var s=e.length,o=t?s:-1,a=gn(e);(t?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function zu(n){return function(t,e,r){for(var s=-1,o=gn(t),a=r(t),l=a.length;l--;){var h=a[n?l:++s];if(e(o[h],h,o)===!1)break}return t}}function fc(n,t,e){var r=t&q,s=Xe(n);function o(){var a=this&&this!==Nn&&this instanceof o?s:n;return a.apply(r?e:this,arguments)}return o}function Vu(n){return function(t){t=an(t);var e=Le(t)?Lt(t):i,r=e?e[0]:t.charAt(0),s=e?te(e,1).join(""):t.slice(1);return r[n]()+s}}function Fe(n){return function(t){return ai(zo(qo(t).replace(Qf,"")),n,"")}}function Xe(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=De(n.prototype),r=n.apply(e,t);return yn(r)?r:e}}function ac(n,t,e){var r=Xe(n);function s(){for(var o=arguments.length,a=p(o),l=o,h=Ue(s);l--;)a[l]=arguments[l];var m=o<3&&a[0]!==h&&a[o-1]!==h?[]:Xt(a,h);if(o-=m.length,o<e)return ju(n,t,Dr,s.placeholder,i,a,m,i,i,e-o);var y=this&&this!==Nn&&this instanceof s?r:n;return ft(y,this,a)}return s}function Yu(n){return function(t,e,r){var s=gn(t);if(!et(t)){var o=P(e,3);t=Bn(t),e=function(l){return o(s[l],l,s)}}var a=n(t,e,r);return a>-1?s[o?t[a]:a]:i}}function Xu(n){return $t(function(t){var e=t.length,r=e,s=xt.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new wt(v);if(s&&!a&&Br(o)=="wrapper")var a=new xt([],!0)}for(r=a?r:e;++r<e;){o=t[r];var l=Br(o),h=l=="wrapper"?Hi(o):i;h&&zi(h[0])&&h[1]==(dn|cn|An|Ln)&&!h[4].length&&h[9]==1?a=a[Br(h[0])].apply(a,h[3]):a=o.length==1&&zi(o)?a[l]():a.thru(o)}return function(){var m=arguments,y=m[0];if(a&&m.length==1&&H(y))return a.plant(y).value();for(var S=0,C=e?t[S].apply(this,m):y;++S<e;)C=t[S].call(this,C);return C}})}function Dr(n,t,e,r,s,o,a,l,h,m){var y=t&dn,S=t&q,C=t&Q,R=t&(cn|hn),U=t&qn,X=C?i:Xe(n);function B(){for(var j=arguments.length,rn=p(j),ht=j;ht--;)rn[ht]=arguments[ht];if(R)var Xn=Ue(B),gt=ya(rn,Xn);if(r&&(rn=Zu(rn,r,s,R)),o&&(rn=Ku(rn,o,a,R)),j-=gt,R&&j<m){var Cn=Xt(rn,Xn);return ju(n,t,Dr,B.placeholder,e,rn,Cn,l,h,m-j)}var Rt=S?e:this,Kt=C?Rt[n]:n;return j=rn.length,l?rn=bc(rn,l):U&&j>1&&rn.reverse(),y&&h<j&&(rn.length=h),this&&this!==Nn&&this instanceof B&&(Kt=X||Xe(Kt)),Kt.apply(Rt,rn)}return B}function Ju(n,t){return function(e,r){return Bl(e,n,t(r),{})}}function Pr(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=lt(e),r=lt(r)):(e=Uu(e),r=Uu(r)),s=n(e,r)}return s}}function Ni(n){return $t(function(t){return t=wn(t,at(P())),J(function(e){var r=this;return n(t,function(s){return ft(s,r,e)})})})}function Fr(n,t){t=t===i?" ":lt(t);var e=t.length;if(e<2)return e?Oi(t,n):t;var r=Oi(t,yr(n/Me(t)));return Le(t)?te(Lt(r),0,n).join(""):r.slice(0,n)}function lc(n,t,e,r){var s=t&q,o=Xe(n);function a(){for(var l=-1,h=arguments.length,m=-1,y=r.length,S=p(y+h),C=this&&this!==Nn&&this instanceof a?o:n;++m<y;)S[m]=r[m];for(;h--;)S[m++]=arguments[++l];return ft(C,s?e:this,S)}return a}function Qu(n){return function(t,e,r){return r&&typeof r!="number"&&Yn(t,e,r)&&(e=r=i),t=Zt(t),e===i?(e=t,t=0):e=Zt(e),r=r===i?t<e?1:-1:Zt(r),Yl(t,e,r,n)}}function Ur(n){return function(t,e){return typeof t=="string"&&typeof e=="string"||(t=St(t),e=St(e)),n(t,e)}}function ju(n,t,e,r,s,o,a,l,h,m){var y=t&cn,S=y?a:i,C=y?i:a,R=y?o:i,U=y?i:o;t|=y?An:Rn,t&=~(y?Rn:An),t&vn||(t&=~(q|Q));var X=[n,t,s,R,S,U,C,l,h,m],B=e.apply(i,X);return zi(n)&&co(B,X),B.placeholder=r,ho(B,n,t)}function ki(n){var t=On[n];return function(e,r){if(e=St(e),r=r==null?0:Hn(V(r),292),r&&hu(e)){var s=(an(e)+"e").split("e"),o=t(s[0]+"e"+(+s[1]+r));return s=(an(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return t(e)}}var cc=Te&&1/cr(new Te([,-0]))[1]==dt?function(n){return new Te(n)}:fs;function no(n){return function(t){var e=Zn(t);return e==Gn?_i(t):e==ot?Ma(t):ma(t,n(t))}}function kt(n,t,e,r,s,o,a,l){var h=t&Q;if(!h&&typeof n!="function")throw new wt(v);var m=r?r.length:0;if(m||(t&=~(An|Rn),r=s=i),a=a===i?a:Dn(V(a),0),l=l===i?l:V(l),m-=s?s.length:0,t&Rn){var y=r,S=s;r=s=i}var C=h?i:Hi(n),R=[n,t,e,r,s,y,S,o,a,l];if(C&&Cc(R,C),n=R[0],t=R[1],e=R[2],r=R[3],s=R[4],l=R[9]=R[9]===i?h?0:n.length:Dn(R[9]-m,0),!l&&t&(cn|hn)&&(t&=~(cn|hn)),!t||t==q)var U=fc(n,t,e);else t==cn||t==hn?U=ac(n,t,l):(t==An||t==(q|An))&&!s.length?U=lc(n,t,e,r):U=Dr.apply(i,R);var X=C?Pu:co;return ho(X(U,R),n,t)}function to(n,t,e,r){return n===i||bt(n,Re[e])&&!ln.call(r,e)?t:n}function eo(n,t,e,r,s,o){return yn(n)&&yn(t)&&(o.set(t,n),br(n,t,i,eo,o),o.delete(t)),n}function hc(n){return je(n)?i:n}function ro(n,t,e,r,s,o){var a=e&en,l=n.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var m=o.get(n),y=o.get(t);if(m&&y)return m==t&&y==n;var S=-1,C=!0,R=e&un?new pe:i;for(o.set(n,t),o.set(t,n);++S<l;){var U=n[S],X=t[S];if(r)var B=a?r(X,U,S,t,n,o):r(U,X,S,n,t,o);if(B!==i){if(B)continue;C=!1;break}if(R){if(!li(t,function(j,rn){if(!Ne(R,rn)&&(U===j||s(U,j,e,r,o)))return R.push(rn)})){C=!1;break}}else if(!(U===X||s(U,X,e,r,o))){C=!1;break}}return o.delete(n),o.delete(t),C}function gc(n,t,e,r,s,o,a){switch(e){case b:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case E:return!(n.byteLength!=t.byteLength||!o(new vr(n),new vr(t)));case Tn:case $n:case Et:return bt(+n,+t);case bn:return n.name==t.name&&n.message==t.message;case fe:case ae:return n==t+"";case Gn:var l=_i;case ot:var h=r&en;if(l||(l=cr),n.size!=t.size&&!h)return!1;var m=a.get(n);if(m)return m==t;r|=un,a.set(n,t);var y=ro(l(n),l(t),r,s,o,a);return a.delete(n),y;case Se:if(Ze)return Ze.call(n)==Ze.call(t)}return!1}function pc(n,t,e,r,s,o){var a=e&en,l=$i(n),h=l.length,m=$i(t),y=m.length;if(h!=y&&!a)return!1;for(var S=h;S--;){var C=l[S];if(!(a?C in t:ln.call(t,C)))return!1}var R=o.get(n),U=o.get(t);if(R&&U)return R==t&&U==n;var X=!0;o.set(n,t),o.set(t,n);for(var B=a;++S<h;){C=l[S];var j=n[C],rn=t[C];if(r)var ht=a?r(rn,j,C,t,n,o):r(j,rn,C,n,t,o);if(!(ht===i?j===rn||s(j,rn,e,r,o):ht)){X=!1;break}B||(B=C=="constructor")}if(X&&!B){var Xn=n.constructor,gt=t.constructor;Xn!=gt&&"constructor"in n&&"constructor"in t&&!(typeof Xn=="function"&&Xn instanceof Xn&&typeof gt=="function"&&gt instanceof gt)&&(X=!1)}return o.delete(n),o.delete(t),X}function $t(n){return Yi(ao(n,i,xo),n+"")}function $i(n){return Su(n,Bn,Ki)}function Gi(n){return Su(n,rt,io)}var Hi=Sr?function(n){return Sr.get(n)}:fs;function Br(n){for(var t=n.name+"",e=Oe[t],r=ln.call(Oe,t)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==n)return s.name}return t}function Ue(n){var t=ln.call(u,"placeholder")?u:n;return t.placeholder}function P(){var n=u.iteratee||us;return n=n===us?Cu:n,arguments.length?n(arguments[0],arguments[1]):n}function Wr(n,t){var e=n.__data__;return Ac(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Zi(n){for(var t=Bn(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,oo(s)]}return t}function ve(n,t){var e=Ea(n,t);return Eu(e)?e:i}function dc(n){var t=ln.call(n,he),e=n[he];try{n[he]=i;var r=!0}catch{}var s=dr.call(n);return r&&(t?n[he]=e:delete n[he]),s}var Ki=wi?function(n){return n==null?[]:(n=gn(n),Vt(wi(n),function(t){return lu.call(n,t)}))}:as,io=wi?function(n){for(var t=[];n;)Yt(t,Ki(n)),n=wr(n);return t}:as,Zn=Vn;(xi&&Zn(new xi(new ArrayBuffer(1)))!=b||$e&&Zn(new $e)!=Gn||mi&&Zn(mi.resolve())!=ir||Te&&Zn(new Te)!=ot||Ge&&Zn(new Ge)!=le)&&(Zn=function(n){var t=Vn(n),e=t==jn?n.constructor:i,r=e?we(e):"";if(r)switch(r){case Ja:return b;case Qa:return Gn;case ja:return ir;case nl:return ot;case tl:return le}return t});function _c(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=Hn(t,n+a);break;case"takeRight":n=Dn(n,t-a);break}}return{start:n,end:t}}function vc(n){var t=n.match(Sf);return t?t[1].split(If):[]}function so(n,t,e){t=ne(t,n);for(var r=-1,s=t.length,o=!1;++r<s;){var a=Pt(t[r]);if(!(o=n!=null&&e(n,a)))break;n=n[a]}return o||++r!=s?o:(s=n==null?0:n.length,!!s&&Kr(s)&&Gt(a,s)&&(H(n)||xe(n)))}function wc(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&ln.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function uo(n){return typeof n.constructor=="function"&&!Je(n)?De(wr(n)):{}}function xc(n,t,e){var r=n.constructor;switch(t){case E:return Wi(n);case Tn:case $n:return new r(+n);case b:return ec(n,e);case D:case G:case nn:case z:case on:case mn:case In:case nt:case Ct:return Gu(n,e);case Gn:return new r;case Et:case ae:return new r(n);case fe:return rc(n);case ot:return new r;case Se:return ic(n)}}function mc(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(Af,`{
/* [wrapped with `+t+`] */
`)}function yc(n){return H(n)||xe(n)||!!(cu&&n&&n[cu])}function Gt(n,t){var e=typeof n;return t=t??Mn,!!t&&(e=="number"||e!="symbol"&&Df.test(n))&&n>-1&&n%1==0&&n<t}function Yn(n,t,e){if(!yn(e))return!1;var r=typeof t;return(r=="number"?et(e)&&Gt(t,e.length):r=="string"&&t in e)?bt(e[t],n):!1}function qi(n,t){if(H(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||ct(n)?!0:wf.test(n)||!vf.test(n)||t!=null&&n in gn(t)}function Ac(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function zi(n){var t=Br(n),e=u[t];if(typeof e!="function"||!(t in tn.prototype))return!1;if(n===e)return!0;var r=Hi(e);return!!r&&n===r[0]}function Sc(n){return!!ou&&ou in n}var Ic=gr?Ht:ls;function Je(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Re;return n===e}function oo(n){return n===n&&!yn(n)}function fo(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==i||n in gn(e))}}function Ec(n){var t=Hr(n,function(r){return e.size===T&&e.clear(),r}),e=t.cache;return t}function Cc(n,t){var e=n[1],r=t[1],s=e|r,o=s<(q|Q|dn),a=r==dn&&e==cn||r==dn&&e==Ln&&n[7].length<=t[8]||r==(dn|Ln)&&t[7].length<=t[8]&&e==cn;if(!(o||a))return n;r&q&&(n[2]=t[2],s|=e&q?0:vn);var l=t[3];if(l){var h=n[3];n[3]=h?Zu(h,l,t[4]):l,n[4]=h?Xt(n[3],F):t[4]}return l=t[5],l&&(h=n[5],n[5]=h?Ku(h,l,t[6]):l,n[6]=h?Xt(n[5],F):t[6]),l=t[7],l&&(n[7]=l),r&dn&&(n[8]=n[8]==null?t[8]:Hn(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}function Lc(n){var t=[];if(n!=null)for(var e in gn(n))t.push(e);return t}function Mc(n){return dr.call(n)}function ao(n,t,e){return t=Dn(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=Dn(r.length-t,0),a=p(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=p(t+1);++s<t;)l[s]=r[s];return l[t]=e(a),ft(n,this,l)}}function lo(n,t){return t.length<2?n:_e(n,yt(t,0,-1))}function bc(n,t){for(var e=n.length,r=Hn(t.length,e),s=tt(n);r--;){var o=t[r];n[r]=Gt(o,e)?s[o]:i}return n}function Vi(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var co=go(Pu),Qe=Za||function(n,t){return Nn.setTimeout(n,t)},Yi=go(Ql);function ho(n,t,e){var r=t+"";return Yi(n,mc(r,Rc(vc(r),e)))}function go(n){var t=0,e=0;return function(){var r=Va(),s=zn-(r-e);if(e=r,s>0){if(++t>=Pn)return arguments[0]}else t=0;return n.apply(i,arguments)}}function Nr(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=Ti(e,s),a=n[o];n[o]=n[e],n[e]=a}return n.length=t,n}var po=Ec(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(xf,function(e,r,s,o){t.push(s?o.replace(Lf,"$1"):r||e)}),t});function Pt(n){if(typeof n=="string"||ct(n))return n;var t=n+"";return t=="0"&&1/n==-dt?"-0":t}function we(n){if(n!=null){try{return pr.call(n)}catch{}try{return n+""}catch{}}return""}function Rc(n,t){return vt(Fn,function(e){var r="_."+e[0];t&e[1]&&!ar(n,r)&&n.push(r)}),n.sort()}function _o(n){if(n instanceof tn)return n.clone();var t=new xt(n.__wrapped__,n.__chain__);return t.__actions__=tt(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Tc(n,t,e){(e?Yn(n,t,e):t===i)?t=1:t=Dn(V(t),0);var r=n==null?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,a=p(yr(r/t));s<r;)a[o++]=yt(n,s,s+=t);return a}function Oc(n){for(var t=-1,e=n==null?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s}function Dc(){var n=arguments.length;if(!n)return[];for(var t=p(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return Yt(H(e)?tt(e):[e],kn(t,1))}var Pc=J(function(n,t){return En(n)?qe(n,kn(t,1,En,!0)):[]}),Fc=J(function(n,t){var e=At(t);return En(e)&&(e=i),En(n)?qe(n,kn(t,1,En,!0),P(e,2)):[]}),Uc=J(function(n,t){var e=At(t);return En(e)&&(e=i),En(n)?qe(n,kn(t,1,En,!0),i,e):[]});function Bc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:V(t),yt(n,t<0?0:t,r)):[]}function Wc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:V(t),t=r-t,yt(n,0,t<0?0:t)):[]}function Nc(n,t){return n&&n.length?Tr(n,P(t,3),!0,!0):[]}function kc(n,t){return n&&n.length?Tr(n,P(t,3),!0):[]}function $c(n,t,e,r){var s=n==null?0:n.length;return s?(e&&typeof e!="number"&&Yn(n,t,e)&&(e=0,r=s),Dl(n,t,e,r)):[]}function vo(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:V(e);return s<0&&(s=Dn(r+s,0)),lr(n,P(t,3),s)}function wo(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=V(e),s=e<0?Dn(r+s,0):Hn(s,r-1)),lr(n,P(t,3),s,!0)}function xo(n){var t=n==null?0:n.length;return t?kn(n,1):[]}function Gc(n){var t=n==null?0:n.length;return t?kn(n,dt):[]}function Hc(n,t){var e=n==null?0:n.length;return e?(t=t===i?1:V(t),kn(n,t)):[]}function Zc(n){for(var t=-1,e=n==null?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r}function mo(n){return n&&n.length?n[0]:i}function Kc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:V(e);return s<0&&(s=Dn(r+s,0)),Ce(n,t,s)}function qc(n){var t=n==null?0:n.length;return t?yt(n,0,-1):[]}var zc=J(function(n){var t=wn(n,Ui);return t.length&&t[0]===n[0]?Ci(t):[]}),Vc=J(function(n){var t=At(n),e=wn(n,Ui);return t===At(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Ci(e,P(t,2)):[]}),Yc=J(function(n){var t=At(n),e=wn(n,Ui);return t=typeof t=="function"?t:i,t&&e.pop(),e.length&&e[0]===n[0]?Ci(e,i,t):[]});function Xc(n,t){return n==null?"":qa.call(n,t)}function At(n){var t=n==null?0:n.length;return t?n[t-1]:i}function Jc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=V(e),s=s<0?Dn(r+s,0):Hn(s,r-1)),t===t?Ra(n,t,s):lr(n,js,s,!0)}function Qc(n,t){return n&&n.length?Ru(n,V(t)):i}var jc=J(yo);function yo(n,t){return n&&n.length&&t&&t.length?Ri(n,t):n}function nh(n,t,e){return n&&n.length&&t&&t.length?Ri(n,t,P(e,2)):n}function th(n,t,e){return n&&n.length&&t&&t.length?Ri(n,t,i,e):n}var eh=$t(function(n,t){var e=n==null?0:n.length,r=Ai(n,t);return Du(n,wn(t,function(s){return Gt(s,e)?+s:s}).sort(Hu)),r});function rh(n,t){var e=[];if(!(n&&n.length))return e;var r=-1,s=[],o=n.length;for(t=P(t,3);++r<o;){var a=n[r];t(a,r,n)&&(e.push(a),s.push(r))}return Du(n,s),e}function Xi(n){return n==null?n:Xa.call(n)}function ih(n,t,e){var r=n==null?0:n.length;return r?(e&&typeof e!="number"&&Yn(n,t,e)?(t=0,e=r):(t=t==null?0:V(t),e=e===i?r:V(e)),yt(n,t,e)):[]}function sh(n,t){return Rr(n,t)}function uh(n,t,e){return Di(n,t,P(e,2))}function oh(n,t){var e=n==null?0:n.length;if(e){var r=Rr(n,t);if(r<e&&bt(n[r],t))return r}return-1}function fh(n,t){return Rr(n,t,!0)}function ah(n,t,e){return Di(n,t,P(e,2),!0)}function lh(n,t){var e=n==null?0:n.length;if(e){var r=Rr(n,t,!0)-1;if(bt(n[r],t))return r}return-1}function ch(n){return n&&n.length?Fu(n):[]}function hh(n,t){return n&&n.length?Fu(n,P(t,2)):[]}function gh(n){var t=n==null?0:n.length;return t?yt(n,1,t):[]}function ph(n,t,e){return n&&n.length?(t=e||t===i?1:V(t),yt(n,0,t<0?0:t)):[]}function dh(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:V(t),t=r-t,yt(n,t<0?0:t,r)):[]}function _h(n,t){return n&&n.length?Tr(n,P(t,3),!1,!0):[]}function vh(n,t){return n&&n.length?Tr(n,P(t,3)):[]}var wh=J(function(n){return jt(kn(n,1,En,!0))}),xh=J(function(n){var t=At(n);return En(t)&&(t=i),jt(kn(n,1,En,!0),P(t,2))}),mh=J(function(n){var t=At(n);return t=typeof t=="function"?t:i,jt(kn(n,1,En,!0),i,t)});function yh(n){return n&&n.length?jt(n):[]}function Ah(n,t){return n&&n.length?jt(n,P(t,2)):[]}function Sh(n,t){return t=typeof t=="function"?t:i,n&&n.length?jt(n,i,t):[]}function Ji(n){if(!(n&&n.length))return[];var t=0;return n=Vt(n,function(e){if(En(e))return t=Dn(e.length,t),!0}),pi(t,function(e){return wn(n,ci(e))})}function Ao(n,t){if(!(n&&n.length))return[];var e=Ji(n);return t==null?e:wn(e,function(r){return ft(t,i,r)})}var Ih=J(function(n,t){return En(n)?qe(n,t):[]}),Eh=J(function(n){return Fi(Vt(n,En))}),Ch=J(function(n){var t=At(n);return En(t)&&(t=i),Fi(Vt(n,En),P(t,2))}),Lh=J(function(n){var t=At(n);return t=typeof t=="function"?t:i,Fi(Vt(n,En),i,t)}),Mh=J(Ji);function bh(n,t){return Nu(n||[],t||[],Ke)}function Rh(n,t){return Nu(n||[],t||[],Ye)}var Th=J(function(n){var t=n.length,e=t>1?n[t-1]:i;return e=typeof e=="function"?(n.pop(),e):i,Ao(n,e)});function So(n){var t=u(n);return t.__chain__=!0,t}function Oh(n,t){return t(n),n}function kr(n,t){return t(n)}var Dh=$t(function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return Ai(o,n)};return t>1||this.__actions__.length||!(r instanceof tn)||!Gt(e)?this.thru(s):(r=r.slice(e,+e+(t?1:0)),r.__actions__.push({func:kr,args:[s],thisArg:i}),new xt(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(i),o}))});function Ph(){return So(this)}function Fh(){return new xt(this.value(),this.__chain__)}function Uh(){this.__values__===i&&(this.__values__=Bo(this.value()));var n=this.__index__>=this.__values__.length,t=n?i:this.__values__[this.__index__++];return{done:n,value:t}}function Bh(){return this}function Wh(n){for(var t,e=this;e instanceof Er;){var r=_o(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t}function Nh(){var n=this.__wrapped__;if(n instanceof tn){var t=n;return this.__actions__.length&&(t=new tn(this)),t=t.reverse(),t.__actions__.push({func:kr,args:[Xi],thisArg:i}),new xt(t,this.__chain__)}return this.thru(Xi)}function kh(){return Wu(this.__wrapped__,this.__actions__)}var $h=Or(function(n,t,e){ln.call(n,e)?++n[e]:Nt(n,e,1)});function Gh(n,t,e){var r=H(n)?Js:Ol;return e&&Yn(n,t,e)&&(t=i),r(n,P(t,3))}function Hh(n,t){var e=H(n)?Vt:yu;return e(n,P(t,3))}var Zh=Yu(vo),Kh=Yu(wo);function qh(n,t){return kn($r(n,t),1)}function zh(n,t){return kn($r(n,t),dt)}function Vh(n,t,e){return e=e===i?1:V(e),kn($r(n,t),e)}function Io(n,t){var e=H(n)?vt:Qt;return e(n,P(t,3))}function Eo(n,t){var e=H(n)?ga:mu;return e(n,P(t,3))}var Yh=Or(function(n,t,e){ln.call(n,e)?n[e].push(t):Nt(n,e,[t])});function Xh(n,t,e,r){n=et(n)?n:We(n),e=e&&!r?V(e):0;var s=n.length;return e<0&&(e=Dn(s+e,0)),qr(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&Ce(n,t,e)>-1}var Jh=J(function(n,t,e){var r=-1,s=typeof t=="function",o=et(n)?p(n.length):[];return Qt(n,function(a){o[++r]=s?ft(t,a,e):ze(a,t,e)}),o}),Qh=Or(function(n,t,e){Nt(n,e,t)});function $r(n,t){var e=H(n)?wn:Lu;return e(n,P(t,3))}function jh(n,t,e,r){return n==null?[]:(H(t)||(t=t==null?[]:[t]),e=r?i:e,H(e)||(e=e==null?[]:[e]),Tu(n,t,e))}var ng=Or(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]});function tg(n,t,e){var r=H(n)?ai:tu,s=arguments.length<3;return r(n,P(t,4),e,s,Qt)}function eg(n,t,e){var r=H(n)?pa:tu,s=arguments.length<3;return r(n,P(t,4),e,s,mu)}function rg(n,t){var e=H(n)?Vt:yu;return e(n,Zr(P(t,3)))}function ig(n){var t=H(n)?_u:Xl;return t(n)}function sg(n,t,e){(e?Yn(n,t,e):t===i)?t=1:t=V(t);var r=H(n)?Ll:Jl;return r(n,t)}function ug(n){var t=H(n)?Ml:jl;return t(n)}function og(n){if(n==null)return 0;if(et(n))return qr(n)?Me(n):n.length;var t=Zn(n);return t==Gn||t==ot?n.size:Mi(n).length}function fg(n,t,e){var r=H(n)?li:nc;return e&&Yn(n,t,e)&&(t=i),r(n,P(t,3))}var ag=J(function(n,t){if(n==null)return[];var e=t.length;return e>1&&Yn(n,t[0],t[1])?t=[]:e>2&&Yn(t[0],t[1],t[2])&&(t=[t[0]]),Tu(n,kn(t,1),[])}),Gr=Ha||function(){return Nn.Date.now()};function lg(n,t){if(typeof t!="function")throw new wt(v);return n=V(n),function(){if(--n<1)return t.apply(this,arguments)}}function Co(n,t,e){return t=e?i:t,t=n&&t==null?n.length:t,kt(n,dn,i,i,i,i,t)}function Lo(n,t){var e;if(typeof t!="function")throw new wt(v);return n=V(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Qi=J(function(n,t,e){var r=q;if(e.length){var s=Xt(e,Ue(Qi));r|=An}return kt(n,r,t,e,s)}),Mo=J(function(n,t,e){var r=q|Q;if(e.length){var s=Xt(e,Ue(Mo));r|=An}return kt(t,r,n,e,s)});function bo(n,t,e){t=e?i:t;var r=kt(n,cn,i,i,i,i,i,t);return r.placeholder=bo.placeholder,r}function Ro(n,t,e){t=e?i:t;var r=kt(n,hn,i,i,i,i,i,t);return r.placeholder=Ro.placeholder,r}function To(n,t,e){var r,s,o,a,l,h,m=0,y=!1,S=!1,C=!0;if(typeof n!="function")throw new wt(v);t=St(t)||0,yn(e)&&(y=!!e.leading,S="maxWait"in e,o=S?Dn(St(e.maxWait)||0,t):o,C="trailing"in e?!!e.trailing:C);function R(Cn){var Rt=r,Kt=s;return r=s=i,m=Cn,a=n.apply(Kt,Rt),a}function U(Cn){return m=Cn,l=Qe(j,t),y?R(Cn):a}function X(Cn){var Rt=Cn-h,Kt=Cn-m,Xo=t-Rt;return S?Hn(Xo,o-Kt):Xo}function B(Cn){var Rt=Cn-h,Kt=Cn-m;return h===i||Rt>=t||Rt<0||S&&Kt>=o}function j(){var Cn=Gr();if(B(Cn))return rn(Cn);l=Qe(j,X(Cn))}function rn(Cn){return l=i,C&&r?R(Cn):(r=s=i,a)}function ht(){l!==i&&ku(l),m=0,r=h=s=l=i}function Xn(){return l===i?a:rn(Gr())}function gt(){var Cn=Gr(),Rt=B(Cn);if(r=arguments,s=this,h=Cn,Rt){if(l===i)return U(h);if(S)return ku(l),l=Qe(j,t),R(h)}return l===i&&(l=Qe(j,t)),a}return gt.cancel=ht,gt.flush=Xn,gt}var cg=J(function(n,t){return xu(n,1,t)}),hg=J(function(n,t,e){return xu(n,St(t)||0,e)});function gg(n){return kt(n,qn)}function Hr(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new wt(v);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=n.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new(Hr.Cache||Wt),e}Hr.Cache=Wt;function Zr(n){if(typeof n!="function")throw new wt(v);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function pg(n){return Lo(2,n)}var dg=tc(function(n,t){t=t.length==1&&H(t[0])?wn(t[0],at(P())):wn(kn(t,1),at(P()));var e=t.length;return J(function(r){for(var s=-1,o=Hn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return ft(n,this,r)})}),ji=J(function(n,t){var e=Xt(t,Ue(ji));return kt(n,An,i,t,e)}),Oo=J(function(n,t){var e=Xt(t,Ue(Oo));return kt(n,Rn,i,t,e)}),_g=$t(function(n,t){return kt(n,Ln,i,i,i,t)});function vg(n,t){if(typeof n!="function")throw new wt(v);return t=t===i?t:V(t),J(n,t)}function wg(n,t){if(typeof n!="function")throw new wt(v);return t=t==null?0:Dn(V(t),0),J(function(e){var r=e[t],s=te(e,0,t);return r&&Yt(s,r),ft(n,this,s)})}function xg(n,t,e){var r=!0,s=!0;if(typeof n!="function")throw new wt(v);return yn(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),To(n,t,{leading:r,maxWait:t,trailing:s})}function mg(n){return Co(n,1)}function yg(n,t){return ji(Bi(t),n)}function Ag(){if(!arguments.length)return[];var n=arguments[0];return H(n)?n:[n]}function Sg(n){return mt(n,Z)}function Ig(n,t){return t=typeof t=="function"?t:i,mt(n,Z,t)}function Eg(n){return mt(n,L|Z)}function Cg(n,t){return t=typeof t=="function"?t:i,mt(n,L|Z,t)}function Lg(n,t){return t==null||wu(n,t,Bn(t))}function bt(n,t){return n===t||n!==n&&t!==t}var Mg=Ur(Ei),bg=Ur(function(n,t){return n>=t}),xe=Iu(function(){return arguments}())?Iu:function(n){return Sn(n)&&ln.call(n,"callee")&&!lu.call(n,"callee")},H=p.isArray,Rg=Ks?at(Ks):Wl;function et(n){return n!=null&&Kr(n.length)&&!Ht(n)}function En(n){return Sn(n)&&et(n)}function Tg(n){return n===!0||n===!1||Sn(n)&&Vn(n)==Tn}var ee=Ka||ls,Og=qs?at(qs):Nl;function Dg(n){return Sn(n)&&n.nodeType===1&&!je(n)}function Pg(n){if(n==null)return!0;if(et(n)&&(H(n)||typeof n=="string"||typeof n.splice=="function"||ee(n)||Be(n)||xe(n)))return!n.length;var t=Zn(n);if(t==Gn||t==ot)return!n.size;if(Je(n))return!Mi(n).length;for(var e in n)if(ln.call(n,e))return!1;return!0}function Fg(n,t){return Ve(n,t)}function Ug(n,t,e){e=typeof e=="function"?e:i;var r=e?e(n,t):i;return r===i?Ve(n,t,i,e):!!r}function ns(n){if(!Sn(n))return!1;var t=Vn(n);return t==bn||t==It||typeof n.message=="string"&&typeof n.name=="string"&&!je(n)}function Bg(n){return typeof n=="number"&&hu(n)}function Ht(n){if(!yn(n))return!1;var t=Vn(n);return t==ut||t==oe||t==W||t==Qr}function Do(n){return typeof n=="number"&&n==V(n)}function Kr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Mn}function yn(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function Sn(n){return n!=null&&typeof n=="object"}var Po=zs?at(zs):$l;function Wg(n,t){return n===t||Li(n,t,Zi(t))}function Ng(n,t,e){return e=typeof e=="function"?e:i,Li(n,t,Zi(t),e)}function kg(n){return Fo(n)&&n!=+n}function $g(n){if(Ic(n))throw new k(x);return Eu(n)}function Gg(n){return n===null}function Hg(n){return n==null}function Fo(n){return typeof n=="number"||Sn(n)&&Vn(n)==Et}function je(n){if(!Sn(n)||Vn(n)!=jn)return!1;var t=wr(n);if(t===null)return!0;var e=ln.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&pr.call(e)==Na}var ts=Vs?at(Vs):Gl;function Zg(n){return Do(n)&&n>=-Mn&&n<=Mn}var Uo=Ys?at(Ys):Hl;function qr(n){return typeof n=="string"||!H(n)&&Sn(n)&&Vn(n)==ae}function ct(n){return typeof n=="symbol"||Sn(n)&&Vn(n)==Se}var Be=Xs?at(Xs):Zl;function Kg(n){return n===i}function qg(n){return Sn(n)&&Zn(n)==le}function zg(n){return Sn(n)&&Vn(n)==A}var Vg=Ur(bi),Yg=Ur(function(n,t){return n<=t});function Bo(n){if(!n)return[];if(et(n))return qr(n)?Lt(n):tt(n);if(ke&&n[ke])return La(n[ke]());var t=Zn(n),e=t==Gn?_i:t==ot?cr:We;return e(n)}function Zt(n){if(!n)return n===0?n:0;if(n=St(n),n===dt||n===-dt){var t=n<0?-1:1;return t*ue}return n===n?n:0}function V(n){var t=Zt(n),e=t%1;return t===t?e?t-e:t:0}function Wo(n){return n?de(V(n),0,Wn):0}function St(n){if(typeof n=="number")return n;if(ct(n))return st;if(yn(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=yn(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=eu(n);var e=Rf.test(n);return e||Of.test(n)?la(n.slice(2),e?2:8):bf.test(n)?st:+n}function No(n){return Dt(n,rt(n))}function Xg(n){return n?de(V(n),-Mn,Mn):n===0?n:0}function an(n){return n==null?"":lt(n)}var Jg=Pe(function(n,t){if(Je(t)||et(t)){Dt(t,Bn(t),n);return}for(var e in t)ln.call(t,e)&&Ke(n,e,t[e])}),ko=Pe(function(n,t){Dt(t,rt(t),n)}),zr=Pe(function(n,t,e,r){Dt(t,rt(t),n,r)}),Qg=Pe(function(n,t,e,r){Dt(t,Bn(t),n,r)}),jg=$t(Ai);function np(n,t){var e=De(n);return t==null?e:vu(e,t)}var tp=J(function(n,t){n=gn(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&Yn(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],a=rt(o),l=-1,h=a.length;++l<h;){var m=a[l],y=n[m];(y===i||bt(y,Re[m])&&!ln.call(n,m))&&(n[m]=o[m])}return n}),ep=J(function(n){return n.push(i,eo),ft($o,i,n)});function rp(n,t){return Qs(n,P(t,3),Ot)}function ip(n,t){return Qs(n,P(t,3),Ii)}function sp(n,t){return n==null?n:Si(n,P(t,3),rt)}function up(n,t){return n==null?n:Au(n,P(t,3),rt)}function op(n,t){return n&&Ot(n,P(t,3))}function fp(n,t){return n&&Ii(n,P(t,3))}function ap(n){return n==null?[]:Mr(n,Bn(n))}function lp(n){return n==null?[]:Mr(n,rt(n))}function es(n,t,e){var r=n==null?i:_e(n,t);return r===i?e:r}function cp(n,t){return n!=null&&so(n,t,Pl)}function rs(n,t){return n!=null&&so(n,t,Fl)}var hp=Ju(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=dr.call(t)),n[t]=e},ss(it)),gp=Ju(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=dr.call(t)),ln.call(n,t)?n[t].push(e):n[t]=[e]},P),pp=J(ze);function Bn(n){return et(n)?du(n):Mi(n)}function rt(n){return et(n)?du(n,!0):Kl(n)}function dp(n,t){var e={};return t=P(t,3),Ot(n,function(r,s,o){Nt(e,t(r,s,o),r)}),e}function _p(n,t){var e={};return t=P(t,3),Ot(n,function(r,s,o){Nt(e,s,t(r,s,o))}),e}var vp=Pe(function(n,t,e){br(n,t,e)}),$o=Pe(function(n,t,e,r){br(n,t,e,r)}),wp=$t(function(n,t){var e={};if(n==null)return e;var r=!1;t=wn(t,function(o){return o=ne(o,n),r||(r=o.length>1),o}),Dt(n,Gi(n),e),r&&(e=mt(e,L|K|Z,hc));for(var s=t.length;s--;)Pi(e,t[s]);return e});function xp(n,t){return Go(n,Zr(P(t)))}var mp=$t(function(n,t){return n==null?{}:zl(n,t)});function Go(n,t){if(n==null)return{};var e=wn(Gi(n),function(r){return[r]});return t=P(t),Ou(n,e,function(r,s){return t(r,s[0])})}function yp(n,t,e){t=ne(t,n);var r=-1,s=t.length;for(s||(s=1,n=i);++r<s;){var o=n==null?i:n[Pt(t[r])];o===i&&(r=s,o=e),n=Ht(o)?o.call(n):o}return n}function Ap(n,t,e){return n==null?n:Ye(n,t,e)}function Sp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Ye(n,t,e,r)}var Ho=no(Bn),Zo=no(rt);function Ip(n,t,e){var r=H(n),s=r||ee(n)||Be(n);if(t=P(t,4),e==null){var o=n&&n.constructor;s?e=r?new o:[]:yn(n)?e=Ht(o)?De(wr(n)):{}:e={}}return(s?vt:Ot)(n,function(a,l,h){return t(e,a,l,h)}),e}function Ep(n,t){return n==null?!0:Pi(n,t)}function Cp(n,t,e){return n==null?n:Bu(n,t,Bi(e))}function Lp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Bu(n,t,Bi(e),r)}function We(n){return n==null?[]:di(n,Bn(n))}function Mp(n){return n==null?[]:di(n,rt(n))}function bp(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=St(e),e=e===e?e:0),t!==i&&(t=St(t),t=t===t?t:0),de(St(n),t,e)}function Rp(n,t,e){return t=Zt(t),e===i?(e=t,t=0):e=Zt(e),n=St(n),Ul(n,t,e)}function Tp(n,t,e){if(e&&typeof e!="boolean"&&Yn(n,t,e)&&(t=e=i),e===i&&(typeof t=="boolean"?(e=t,t=i):typeof n=="boolean"&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Zt(n),t===i?(t=n,n=0):t=Zt(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=gu();return Hn(n+s*(t-n+aa("1e-"+((s+"").length-1))),t)}return Ti(n,t)}var Op=Fe(function(n,t,e){return t=t.toLowerCase(),n+(e?Ko(t):t)});function Ko(n){return is(an(n).toLowerCase())}function qo(n){return n=an(n),n&&n.replace(Pf,Aa).replace(jf,"")}function Dp(n,t,e){n=an(n),t=lt(t);var r=n.length;e=e===i?r:de(V(e),0,r);var s=e;return e-=t.length,e>=0&&n.slice(e,s)==t}function Pp(n){return n=an(n),n&&pf.test(n)?n.replace(As,Sa):n}function Fp(n){return n=an(n),n&&mf.test(n)?n.replace(jr,"\\$&"):n}var Up=Fe(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Bp=Fe(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),Wp=Vu("toLowerCase");function Np(n,t,e){n=an(n),t=V(t);var r=t?Me(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return Fr(Ar(s),e)+n+Fr(yr(s),e)}function kp(n,t,e){n=an(n),t=V(t);var r=t?Me(n):0;return t&&r<t?n+Fr(t-r,e):n}function $p(n,t,e){n=an(n),t=V(t);var r=t?Me(n):0;return t&&r<t?Fr(t-r,e)+n:n}function Gp(n,t,e){return e||t==null?t=0:t&&(t=+t),Ya(an(n).replace(ni,""),t||0)}function Hp(n,t,e){return(e?Yn(n,t,e):t===i)?t=1:t=V(t),Oi(an(n),t)}function Zp(){var n=arguments,t=an(n[0]);return n.length<3?t:t.replace(n[1],n[2])}var Kp=Fe(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()});function qp(n,t,e){return e&&typeof e!="number"&&Yn(n,t,e)&&(t=e=i),e=e===i?Wn:e>>>0,e?(n=an(n),n&&(typeof t=="string"||t!=null&&!ts(t))&&(t=lt(t),!t&&Le(n))?te(Lt(n),0,e):n.split(t,e)):[]}var zp=Fe(function(n,t,e){return n+(e?" ":"")+is(t)});function Vp(n,t,e){return n=an(n),e=e==null?0:de(V(e),0,n.length),t=lt(t),n.slice(e,e+t.length)==t}function Yp(n,t,e){var r=u.templateSettings;e&&Yn(n,t,e)&&(t=i),n=an(n),t=zr({},t,r,to);var s=zr({},t.imports,r.imports,to),o=Bn(s),a=di(s,o),l,h,m=0,y=t.interpolate||ur,S="__p += '",C=vi((t.escape||ur).source+"|"+y.source+"|"+(y===Ss?Mf:ur).source+"|"+(t.evaluate||ur).source+"|$","g"),R="//# sourceURL="+(ln.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ia+"]")+`
`;n.replace(C,function(B,j,rn,ht,Xn,gt){return rn||(rn=ht),S+=n.slice(m,gt).replace(Ff,Ia),j&&(l=!0,S+=`' +
__e(`+j+`) +
'`),Xn&&(h=!0,S+=`';
`+Xn+`;
__p += '`),rn&&(S+=`' +
((__t = (`+rn+`)) == null ? '' : __t) +
'`),m=gt+B.length,B}),S+=`';
`;var U=ln.call(t,"variable")&&t.variable;if(!U)S=`with (obj) {
`+S+`
}
`;else if(Cf.test(U))throw new k(O);S=(h?S.replace(qt,""):S).replace(Ie,"$1").replace(zt,"$1;"),S="function("+(U||"obj")+`) {
`+(U?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+S+`return __p
}`;var X=Vo(function(){return fn(o,R+"return "+S).apply(i,a)});if(X.source=S,ns(X))throw X;return X}function Xp(n){return an(n).toLowerCase()}function Jp(n){return an(n).toUpperCase()}function Qp(n,t,e){if(n=an(n),n&&(e||t===i))return eu(n);if(!n||!(t=lt(t)))return n;var r=Lt(n),s=Lt(t),o=ru(r,s),a=iu(r,s)+1;return te(r,o,a).join("")}function jp(n,t,e){if(n=an(n),n&&(e||t===i))return n.slice(0,uu(n)+1);if(!n||!(t=lt(t)))return n;var r=Lt(n),s=iu(r,Lt(t))+1;return te(r,0,s).join("")}function nd(n,t,e){if(n=an(n),n&&(e||t===i))return n.replace(ni,"");if(!n||!(t=lt(t)))return n;var r=Lt(n),s=ru(r,Lt(t));return te(r,s).join("")}function td(n,t){var e=Ft,r=xn;if(yn(t)){var s="separator"in t?t.separator:s;e="length"in t?V(t.length):e,r="omission"in t?lt(t.omission):r}n=an(n);var o=n.length;if(Le(n)){var a=Lt(n);o=a.length}if(e>=o)return n;var l=e-Me(r);if(l<1)return r;var h=a?te(a,0,l).join(""):n.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),ts(s)){if(n.slice(l).search(s)){var m,y=h;for(s.global||(s=vi(s.source,an(Is.exec(s))+"g")),s.lastIndex=0;m=s.exec(y);)var S=m.index;h=h.slice(0,S===i?l:S)}}else if(n.indexOf(lt(s),l)!=l){var C=h.lastIndexOf(s);C>-1&&(h=h.slice(0,C))}return h+r}function ed(n){return n=an(n),n&&gf.test(n)?n.replace(ys,Ta):n}var rd=Fe(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),is=Vu("toUpperCase");function zo(n,t,e){return n=an(n),t=e?i:t,t===i?Ca(n)?Pa(n):va(n):n.match(t)||[]}var Vo=J(function(n,t){try{return ft(n,i,t)}catch(e){return ns(e)?e:new k(e)}}),id=$t(function(n,t){return vt(t,function(e){e=Pt(e),Nt(n,e,Qi(n[e],n))}),n});function sd(n){var t=n==null?0:n.length,e=P();return n=t?wn(n,function(r){if(typeof r[1]!="function")throw new wt(v);return[e(r[0]),r[1]]}):[],J(function(r){for(var s=-1;++s<t;){var o=n[s];if(ft(o[0],this,r))return ft(o[1],this,r)}})}function ud(n){return Tl(mt(n,L))}function ss(n){return function(){return n}}function od(n,t){return n==null||n!==n?t:n}var fd=Xu(),ad=Xu(!0);function it(n){return n}function us(n){return Cu(typeof n=="function"?n:mt(n,L))}function ld(n){return Mu(mt(n,L))}function cd(n,t){return bu(n,mt(t,L))}var hd=J(function(n,t){return function(e){return ze(e,n,t)}}),gd=J(function(n,t){return function(e){return ze(n,e,t)}});function os(n,t,e){var r=Bn(t),s=Mr(t,r);e==null&&!(yn(t)&&(s.length||!r.length))&&(e=t,t=n,n=this,s=Mr(t,Bn(t)));var o=!(yn(e)&&"chain"in e)||!!e.chain,a=Ht(n);return vt(s,function(l){var h=t[l];n[l]=h,a&&(n.prototype[l]=function(){var m=this.__chain__;if(o||m){var y=n(this.__wrapped__),S=y.__actions__=tt(this.__actions__);return S.push({func:h,args:arguments,thisArg:n}),y.__chain__=m,y}return h.apply(n,Yt([this.value()],arguments))})}),n}function pd(){return Nn._===this&&(Nn._=ka),this}function fs(){}function dd(n){return n=V(n),J(function(t){return Ru(t,n)})}var _d=Ni(wn),vd=Ni(Js),wd=Ni(li);function Yo(n){return qi(n)?ci(Pt(n)):Vl(n)}function xd(n){return function(t){return n==null?i:_e(n,t)}}var md=Qu(),yd=Qu(!0);function as(){return[]}function ls(){return!1}function Ad(){return{}}function Sd(){return""}function Id(){return!0}function Ed(n,t){if(n=V(n),n<1||n>Mn)return[];var e=Wn,r=Hn(n,Wn);t=P(t),n-=Wn;for(var s=pi(r,t);++e<n;)t(e);return s}function Cd(n){return H(n)?wn(n,Pt):ct(n)?[n]:tt(po(an(n)))}function Ld(n){var t=++Wa;return an(n)+t}var Md=Pr(function(n,t){return n+t},0),bd=ki("ceil"),Rd=Pr(function(n,t){return n/t},1),Td=ki("floor");function Od(n){return n&&n.length?Lr(n,it,Ei):i}function Dd(n,t){return n&&n.length?Lr(n,P(t,2),Ei):i}function Pd(n){return nu(n,it)}function Fd(n,t){return nu(n,P(t,2))}function Ud(n){return n&&n.length?Lr(n,it,bi):i}function Bd(n,t){return n&&n.length?Lr(n,P(t,2),bi):i}var Wd=Pr(function(n,t){return n*t},1),Nd=ki("round"),kd=Pr(function(n,t){return n-t},0);function $d(n){return n&&n.length?gi(n,it):0}function Gd(n,t){return n&&n.length?gi(n,P(t,2)):0}return u.after=lg,u.ary=Co,u.assign=Jg,u.assignIn=ko,u.assignInWith=zr,u.assignWith=Qg,u.at=jg,u.before=Lo,u.bind=Qi,u.bindAll=id,u.bindKey=Mo,u.castArray=Ag,u.chain=So,u.chunk=Tc,u.compact=Oc,u.concat=Dc,u.cond=sd,u.conforms=ud,u.constant=ss,u.countBy=$h,u.create=np,u.curry=bo,u.curryRight=Ro,u.debounce=To,u.defaults=tp,u.defaultsDeep=ep,u.defer=cg,u.delay=hg,u.difference=Pc,u.differenceBy=Fc,u.differenceWith=Uc,u.drop=Bc,u.dropRight=Wc,u.dropRightWhile=Nc,u.dropWhile=kc,u.fill=$c,u.filter=Hh,u.flatMap=qh,u.flatMapDeep=zh,u.flatMapDepth=Vh,u.flatten=xo,u.flattenDeep=Gc,u.flattenDepth=Hc,u.flip=gg,u.flow=fd,u.flowRight=ad,u.fromPairs=Zc,u.functions=ap,u.functionsIn=lp,u.groupBy=Yh,u.initial=qc,u.intersection=zc,u.intersectionBy=Vc,u.intersectionWith=Yc,u.invert=hp,u.invertBy=gp,u.invokeMap=Jh,u.iteratee=us,u.keyBy=Qh,u.keys=Bn,u.keysIn=rt,u.map=$r,u.mapKeys=dp,u.mapValues=_p,u.matches=ld,u.matchesProperty=cd,u.memoize=Hr,u.merge=vp,u.mergeWith=$o,u.method=hd,u.methodOf=gd,u.mixin=os,u.negate=Zr,u.nthArg=dd,u.omit=wp,u.omitBy=xp,u.once=pg,u.orderBy=jh,u.over=_d,u.overArgs=dg,u.overEvery=vd,u.overSome=wd,u.partial=ji,u.partialRight=Oo,u.partition=ng,u.pick=mp,u.pickBy=Go,u.property=Yo,u.propertyOf=xd,u.pull=jc,u.pullAll=yo,u.pullAllBy=nh,u.pullAllWith=th,u.pullAt=eh,u.range=md,u.rangeRight=yd,u.rearg=_g,u.reject=rg,u.remove=rh,u.rest=vg,u.reverse=Xi,u.sampleSize=sg,u.set=Ap,u.setWith=Sp,u.shuffle=ug,u.slice=ih,u.sortBy=ag,u.sortedUniq=ch,u.sortedUniqBy=hh,u.split=qp,u.spread=wg,u.tail=gh,u.take=ph,u.takeRight=dh,u.takeRightWhile=_h,u.takeWhile=vh,u.tap=Oh,u.throttle=xg,u.thru=kr,u.toArray=Bo,u.toPairs=Ho,u.toPairsIn=Zo,u.toPath=Cd,u.toPlainObject=No,u.transform=Ip,u.unary=mg,u.union=wh,u.unionBy=xh,u.unionWith=mh,u.uniq=yh,u.uniqBy=Ah,u.uniqWith=Sh,u.unset=Ep,u.unzip=Ji,u.unzipWith=Ao,u.update=Cp,u.updateWith=Lp,u.values=We,u.valuesIn=Mp,u.without=Ih,u.words=zo,u.wrap=yg,u.xor=Eh,u.xorBy=Ch,u.xorWith=Lh,u.zip=Mh,u.zipObject=bh,u.zipObjectDeep=Rh,u.zipWith=Th,u.entries=Ho,u.entriesIn=Zo,u.extend=ko,u.extendWith=zr,os(u,u),u.add=Md,u.attempt=Vo,u.camelCase=Op,u.capitalize=Ko,u.ceil=bd,u.clamp=bp,u.clone=Sg,u.cloneDeep=Eg,u.cloneDeepWith=Cg,u.cloneWith=Ig,u.conformsTo=Lg,u.deburr=qo,u.defaultTo=od,u.divide=Rd,u.endsWith=Dp,u.eq=bt,u.escape=Pp,u.escapeRegExp=Fp,u.every=Gh,u.find=Zh,u.findIndex=vo,u.findKey=rp,u.findLast=Kh,u.findLastIndex=wo,u.findLastKey=ip,u.floor=Td,u.forEach=Io,u.forEachRight=Eo,u.forIn=sp,u.forInRight=up,u.forOwn=op,u.forOwnRight=fp,u.get=es,u.gt=Mg,u.gte=bg,u.has=cp,u.hasIn=rs,u.head=mo,u.identity=it,u.includes=Xh,u.indexOf=Kc,u.inRange=Rp,u.invoke=pp,u.isArguments=xe,u.isArray=H,u.isArrayBuffer=Rg,u.isArrayLike=et,u.isArrayLikeObject=En,u.isBoolean=Tg,u.isBuffer=ee,u.isDate=Og,u.isElement=Dg,u.isEmpty=Pg,u.isEqual=Fg,u.isEqualWith=Ug,u.isError=ns,u.isFinite=Bg,u.isFunction=Ht,u.isInteger=Do,u.isLength=Kr,u.isMap=Po,u.isMatch=Wg,u.isMatchWith=Ng,u.isNaN=kg,u.isNative=$g,u.isNil=Hg,u.isNull=Gg,u.isNumber=Fo,u.isObject=yn,u.isObjectLike=Sn,u.isPlainObject=je,u.isRegExp=ts,u.isSafeInteger=Zg,u.isSet=Uo,u.isString=qr,u.isSymbol=ct,u.isTypedArray=Be,u.isUndefined=Kg,u.isWeakMap=qg,u.isWeakSet=zg,u.join=Xc,u.kebabCase=Up,u.last=At,u.lastIndexOf=Jc,u.lowerCase=Bp,u.lowerFirst=Wp,u.lt=Vg,u.lte=Yg,u.max=Od,u.maxBy=Dd,u.mean=Pd,u.meanBy=Fd,u.min=Ud,u.minBy=Bd,u.stubArray=as,u.stubFalse=ls,u.stubObject=Ad,u.stubString=Sd,u.stubTrue=Id,u.multiply=Wd,u.nth=Qc,u.noConflict=pd,u.noop=fs,u.now=Gr,u.pad=Np,u.padEnd=kp,u.padStart=$p,u.parseInt=Gp,u.random=Tp,u.reduce=tg,u.reduceRight=eg,u.repeat=Hp,u.replace=Zp,u.result=yp,u.round=Nd,u.runInContext=c,u.sample=ig,u.size=og,u.snakeCase=Kp,u.some=fg,u.sortedIndex=sh,u.sortedIndexBy=uh,u.sortedIndexOf=oh,u.sortedLastIndex=fh,u.sortedLastIndexBy=ah,u.sortedLastIndexOf=lh,u.startCase=zp,u.startsWith=Vp,u.subtract=kd,u.sum=$d,u.sumBy=Gd,u.template=Yp,u.times=Ed,u.toFinite=Zt,u.toInteger=V,u.toLength=Wo,u.toLower=Xp,u.toNumber=St,u.toSafeInteger=Xg,u.toString=an,u.toUpper=Jp,u.trim=Qp,u.trimEnd=jp,u.trimStart=nd,u.truncate=td,u.unescape=ed,u.uniqueId=Ld,u.upperCase=rd,u.upperFirst=is,u.each=Io,u.eachRight=Eo,u.first=mo,os(u,function(){var n={};return Ot(u,function(t,e){ln.call(u.prototype,e)||(n[e]=t)}),n}(),{chain:!1}),u.VERSION=g,vt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){u[n].placeholder=u}),vt(["drop","take"],function(n,t){tn.prototype[n]=function(e){e=e===i?1:Dn(V(e),0);var r=this.__filtered__&&!t?new tn(this):this.clone();return r.__filtered__?r.__takeCount__=Hn(e,r.__takeCount__):r.__views__.push({size:Hn(e,Wn),type:n+(r.__dir__<0?"Right":"")}),r},tn.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),vt(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e==Ut||e==Jn;tn.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:P(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),vt(["head","last"],function(n,t){var e="take"+(t?"Right":"");tn.prototype[n]=function(){return this[e](1).value()[0]}}),vt(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");tn.prototype[n]=function(){return this.__filtered__?new tn(this):this[e](1)}}),tn.prototype.compact=function(){return this.filter(it)},tn.prototype.find=function(n){return this.filter(n).head()},tn.prototype.findLast=function(n){return this.reverse().find(n)},tn.prototype.invokeMap=J(function(n,t){return typeof n=="function"?new tn(this):this.map(function(e){return ze(e,n,t)})}),tn.prototype.reject=function(n){return this.filter(Zr(P(n)))},tn.prototype.slice=function(n,t){n=V(n);var e=this;return e.__filtered__&&(n>0||t<0)?new tn(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(t=V(t),e=t<0?e.dropRight(-t):e.take(t-n)),e)},tn.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},tn.prototype.toArray=function(){return this.take(Wn)},Ot(tn.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=u[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);s&&(u.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof tn,m=l[0],y=h||H(a),S=function(j){var rn=s.apply(u,Yt([j],l));return r&&C?rn[0]:rn};y&&e&&typeof m=="function"&&m.length!=1&&(h=y=!1);var C=this.__chain__,R=!!this.__actions__.length,U=o&&!C,X=h&&!R;if(!o&&y){a=X?a:new tn(this);var B=n.apply(a,l);return B.__actions__.push({func:kr,args:[S],thisArg:i}),new xt(B,C)}return U&&X?n.apply(this,l):(B=this.thru(S),U?r?B.value()[0]:B.value():B)})}),vt(["pop","push","shift","sort","splice","unshift"],function(n){var t=hr[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);u.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(H(o)?o:[],s)}return this[e](function(a){return t.apply(H(a)?a:[],s)})}}),Ot(tn.prototype,function(n,t){var e=u[t];if(e){var r=e.name+"";ln.call(Oe,r)||(Oe[r]=[]),Oe[r].push({name:t,func:e})}}),Oe[Dr(i,Q).name]=[{name:"wrapper",func:i}],tn.prototype.clone=el,tn.prototype.reverse=rl,tn.prototype.value=il,u.prototype.at=Dh,u.prototype.chain=Ph,u.prototype.commit=Fh,u.prototype.next=Uh,u.prototype.plant=Wh,u.prototype.reverse=Nh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=kh,u.prototype.first=u.prototype.head,ke&&(u.prototype[ke]=Bh),u},be=Fa();ce?((ce.exports=be)._=be,ui._=be):Nn._=be}).call(nr)})(Jr,Jr.exports);Jr.exports;const P0="/assets/top_view-4gr4hmiW.svg",F0="/assets/redTractor-Cl-uV8Ra.svg",U0="/assets/yellowTractor-DVC8ngGG.svg",B0="/assets/blackTractor-DklC2nUm.svg",W0="AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA";function N0({showCard:I,loadingVehicle:f,vehicleData:i}){const{center:g,selectedParameterList:w,selectedVehicle:x,vehicleList:v,zoom:O,icons:d,locationData:T,placesData:F,imeiNumbers:L,onlineVehicle:K,loading:Z,services_loading:en}=se(A=>A.liveMap),{mode:un,styles:q,vehicles_details:Q}=se(A=>A.dashboard),vn=Y.useRef(null),{collapsed:cn}=se(A=>A.auth),[hn,An]=Y.useState(null),[Rn,dn]=Y.useState(""),[Ln,qn]=Y.useState([]),[Ft,xn]=Y.useState(),[Pn,zn]=Y.useState(null);Y.useState("");const[Ut,Tt]=Y.useState(),[Jn,dt]=Y.useState(!1),[Mn,ue]=Y.useState(null),st=ff(),Wn={},$=Y.useRef([]),sn=Y.useRef(null),Fn=Y.useRef({}),{isLoaded:Un,loadError:Qn}=o0({googleMapsApiKey:`${W0}`,loadingElement:N.jsx(r0,{})});Y.useEffect(()=>{Un&&An(window.google.maps)},[Un]),Y.useEffect(()=>{},[O]),Y.useEffect(()=>{var A,E,b,D;if(Object.keys(x).length>0){const nn=((Mn==null?void 0:Mn.length)>0?Mn:T).filter(z=>{var on;return((on=z==null?void 0:z.latestDocument)==null?void 0:on.imei)===(x==null?void 0:x.imei)});if(nn.length>0){qn(nn);const z={lat:(E=(A=nn[0])==null?void 0:A.latestDocument)==null?void 0:E.lat,lng:(D=(b=nn[0])==null?void 0:b.latestDocument)==null?void 0:D.lng};st(Xr(z))}}},[T,x]),Y.useEffect(()=>{if(!(Object.keys(x).length>0)){const A=T.filter(E=>i.some(b=>b.value===E.latestDocument.imei));qn(A),ue(A)}},[T,x,i]),Y.useEffect(()=>{var A,E,b,D;if(Object.keys(x).length>0){const nn=((Mn==null?void 0:Mn.length)>0?Mn:T).filter(z=>{var on;return((on=z==null?void 0:z.latestDocument)==null?void 0:on.imei)===(x==null?void 0:x.imei)});if(nn.length>0){qn(nn);const z={lat:(E=(A=nn[0])==null?void 0:A.latestDocument)==null?void 0:E.lat,lng:(D=(b=nn[0])==null?void 0:b.latestDocument)==null?void 0:D.lng};st(Xr(z))}}else{const G=T.filter(nn=>i.some(z=>z.value===nn.latestDocument.imei));qn(G),ue(G)}},[T,x]),Y.useEffect(()=>{xn(w)},[w]),Y.useEffect(()=>{st(Kd({})),dt(!0)},[x]),Y.useEffect(()=>{if(console.log("before: ",Ln),!hn)return;const A=sn.current;let E=null;return(async()=>{console.log("after: ",Ln);const D=await W(Ln,A);E&&E.clearMarkers(),E=Ae(D,A),hs.on("locationinfo",G=>{console.log("locationinfo: ",G),ir(G,$),ue(nn=>{const z=Array.isArray(nn)?nn:[],on=z.findIndex(mn=>Number(mn.latestDocument.imei)===Number(G.imei));if(on!==-1){const mn=[...z];return mn[on]={...mn[on],latestDocument:{...mn[on].latestDocument,...G}},mn}else return[...z,{_id:G.imei,latestDocument:G}]})})})(),()=>{E&&E.clearMarkers(),Object.keys(Fn.current).forEach(D=>cancelAnimationFrame(Fn.current[D])),hs.off("locationinfo")}},[hn,Ln,hs,Ft,$,T]);const W=(A,E)=>A.map(b=>{const D=b.latestDocument.imei,G=$.current[D]||Tn(b,E);return $.current[D]&&$n(b,G),G}),Tn=(A,E)=>{const b=A.latestDocument.imei,D=new hn.Marker({position:{lat:A.latestDocument.lat,lng:A.latestDocument.lng},map:E,icon:It(A)});return D.addListener("click",()=>Gn(A,D,E)),$.current[b]=D,D},$n=async(A,E)=>{var on;const b=E.getPosition(),D=((on=E.getIcon())==null?void 0:on.rotation)||0,G={lat:A.latestDocument.lat,lng:A.latestDocument.lng},nn=A.latestDocument.heading||0;Et(E,b,G,D,nn);const z=await It(A);E.setIcon(z)},It=async A=>{var z,on,mn,In,nt;const E=(z=A==null?void 0:A.latestDocument)==null?void 0:z.imei;Qr(E);const b=ot(A==null?void 0:A.latestDocument),D=((on=A==null?void 0:A.latestDocument)==null?void 0:on.heading)||0;return bn((mn=A==null?void 0:A.latestDocument)==null?void 0:mn.imei)&&ut((In=A==null?void 0:A.latestDocument)==null?void 0:In.imei),{url:await oe(b,D),fillOpacity:2,strokeWeight:1,scale:4.5,rotation:(nt=A==null?void 0:A.latestDocument)==null?void 0:nt.heading,size:new hn.Size(30,30),scaledSize:new hn.Size(30,30)}},bn=A=>K.includes(Number(A)),ut=A=>T==null?void 0:T.some(E=>Number(E.latestDocument.imei)===Number(A)&&E.latestDocument.speed>0&&(E.latestDocument.ignition===!0||E.latestDocument.ignition===1)),oe=(A,E,b,D=80)=>{const G=`${A}-${E}-${D}-${b}`;if(Wn[G])return Promise.resolve(Wn[G]);const nn=document.createElement("canvas"),z=nn.getContext("2d");nn.width=D,nn.height=D;const on=new Image;return on.src=A,new Promise(mn=>{on.onload=()=>{if(z.clearRect(0,0,nn.width,nn.height),z.translate(D/2,D/2),z.rotate(E*Math.PI/180),z.translate(-D/2,-D/2),z.drawImage(on,0,0,D,D),b){const Ct=D-30-5,qt=D-30-5;z.beginPath(),z.arc(Ct,qt,30/2,0,Math.PI*2),z.fillStyle=b,z.fill()}const In=nn.toDataURL("image/png");Wn[G]=In,mn(In)},on.onerror=In=>{console.error("Error loading image for rotation:",In),mn(A)}})},Gn=(A,E,b)=>{ae(A.latestDocument._id,A,E,b),Se(A.latestDocument.imei)},Et=(A,E,b,D,G)=>{const z=performance.now(),on=()=>{const mn=performance.now()-z,In=Math.min(mn/500,1),nt=E.lat()+In*(b.lat-E.lat()),Ct=E.lng()+In*(b.lng-E.lng()),qt=(G-D+360)%360-180,Ie=(D+qt*In+360)%360;A.setPosition({lat:nt,lng:Ct});const zt=A.getIcon();zt&&typeof zt=="object"&&A.setIcon({...zt,rotation:Ie}),In<1?Fn.current[A.getPosition()]=requestAnimationFrame(on):(A.setPosition(b),zt&&typeof zt=="object"&&A.setIcon({...zt,rotation:G}),delete Fn.current[A.getPosition()])};Fn.current[A.getPosition()]=requestAnimationFrame(on)},Ae=(A,E)=>new D0({map:E,markers:A,renderer:{render:({count:b,position:D})=>jn(b,D)}}),jn=(A,E)=>{const b=40+Math.min(A*2,40),D=30;let G;return A<10?G={start:"#76c7c0",end:"#34a853"}:A<50?G={start:"#fbbc05",end:"#f2994a"}:G={start:"#f45c42",end:"#d32f2f"},new hn.Marker({position:E,icon:{url:`data:image/svg+xml,${encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="${b}" height="${b}" viewBox="0 0 100 100">
            <defs>
              <radialGradient id="gradient" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="${G.start}" />
                <stop offset="100%" stop-color="${G.end}" />
              </radialGradient>
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.5)" />
              </filter>
            </defs>
            <!-- Outer Pulsating Ring -->
            <circle cx="50" cy="50" r="48" fill="url(#gradient)" filter="url(#shadow)" stroke="#ffffff" stroke-width="3" />
            <!-- Decorative Inner Ring -->
            <circle cx="50" cy="50" r="38" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 2" />
            <!-- Star Decoration -->
            <polygon points="50,15 54,38 70,38 57,50 62,68 50,57 38,68 43,50 30,38 46,38" fill="#ffffff" opacity="0.4" />
            <!-- Count Text -->
            <text x="50" y="55" font-size="${D}" fill="black" text-anchor="middle" font-family="'Courier New', monospace" font-weight="bold">
              ${A}
            </text>
          </svg>
        `)}`,scaledSize:new hn.Size(b,b)},label:null})},ir=async(A,E,b)=>{var nn;const D=A.imei,G=E.current[D];if(G){const z=G.getPosition(),on=((nn=G.getIcon())==null?void 0:nn.rotation)||0,mn={lat:A.lat,lng:A.lng},In=A.heading||0;Et(G,z,mn,on,In);const nt=await It({latestDocument:A});G.setIcon(nt)}},Qr=A=>{if(!A)return"motorBike";const E=fe(A);return E||console.error(`No vehicle type found for IMEI: ${A}, defaulting to motorBike`),E||"motorBike"},fe=A=>{if(!Q||Q.length===0)return console.error("vehicles_details is not available"),null;const E=Q.find(b=>(b==null?void 0:b.value)===A&&(b==null?void 0:b.vehilce_type));return E||console.error(`No vehicle found for IMEI: ${A}`),E?E.vehilce_type:null},ot=A=>{let{speed:E,ignition:b,imei:D}=A;if(bn(D)){if(!b)return F0;if(E>0&&b)return P0;if(E<=0&&b)return U0}else return B0},ae=(A,E,b,D)=>{var mn,In,nt;st(qd(E.latestDocument.imei));const G={lat:(mn=E==null?void 0:E.latestDocument)==null?void 0:mn.lat,lng:(In=E==null?void 0:E.latestDocument)==null?void 0:In.lng};st(Xr(G)),st(zd(15)),vn.current||(vn.current=new hn.InfoWindow);const nn=vn.current,on=`
      <div>
        <h3>Registration No: ${((nt=v.find(Ct=>{var qt,Ie;return((qt=Ct==null?void 0:Ct.imei[0])==null?void 0:qt.mac_id)===((Ie=E==null?void 0:E.latestDocument)==null?void 0:Ie.imei)}))==null?void 0:nt.registration_id)||""}</h3>
      </div>
    `;Pn===A?(nn.close(),zn(null)):(nn.setContent(on),nn.open(D,b),zn(A))},Se=A=>{const E=Q&&(Q==null?void 0:Q.length)>0&&Q.find(b=>(b==null?void 0:b.value)===A&&b);Tt(E||null)},sr=()=>{dt(!Jn)};if(Qn)return"Error loading maps";if(!Un)return"Loading maps";if(!hn)return null;const le={height:"93vh",width:"100%",transition:"transform 0.5s ease-in-out"};return N.jsxs(N.Fragment,{children:[N.jsx(Kn,{sx:{position:"absolute",top:"780px",left:cn?"74px":"250px",zIndex:1,background:uf.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:N.jsxs(of,{sx:{color:"white"},onClick:sr,children:[Jn?"Hide":"Show"," Vehicle Info",N.jsx(l0,{})]})}),Jn===!0&&N.jsx(x0,{handleVehicleInfo:sr,udpatedParams:Mn}),N.jsxs(f0,{id:"map",mapContainerStyle:le,zoom:O,center:g,onLoad:A=>{sn.current=A},options:{styles:un?q:""},children:[Object.keys(x).length>0&&N.jsx(i0,{setPlace:dn,place:Rn}),en||f?N.jsx(Kn,{sx:{position:"absolute",top:"50%",left:"50%"},children:N.jsx(g0,{})}):F&&F.length>0&&F.map((A,E)=>{var b,D;return N.jsx(a0,{position:{lat:parseFloat((b=A==null?void 0:A.location)==null?void 0:b.lat),lng:parseFloat((D=A==null?void 0:A.location)==null?void 0:D.lng)},animation:window.google.maps.Animation.DROP,icon:{path:d[`${Rn}`],fillOpacity:2,strokeWeight:1,scale:1,fillColor:"orange"}},E)})]})]})}function a_(){const{locationData:I,selectedVehicle:f,selectedParameterList:i,onlineVehicle:g}=se($=>$.liveMap),{mode:w,selectedVehicleGroup:x}=se($=>$.dashboard),v=e0(w),[O,d]=Y.useState([]),[T,F]=Y.useState(""),[L,K]=Y.useState(""),[Z,en]=Y.useState(""),[un,q]=Y.useState(""),{w_customer_id:Q}=se($=>$.auth),[vn,cn]=Y.useState(),[hn,An]=Y.useState(!1),[Rn,dn]=Y.useState(!1),[Ln,qn]=Y.useState([]),[Ft,xn]=Y.useState(!0),[Pn,zn]=Y.useState(!1),[Ut,Tt]=Y.useState(!1);let Jn=ff();Y.useEffect(()=>{Jn(Vd({}))},[]),Y.useEffect(()=>{dt()},[]),Y.useEffect(()=>{var $;if(Object.keys(f).length>0){const sn=(I==null?void 0:I.length)>0&&(I==null?void 0:I.filter(W=>Number(W.latestDocument.imei)===Number(f==null?void 0:f.imei)));if((sn==null?void 0:sn.length)<=0){cs.error("Data not available for this vehicle",{id:"clipboard"});return}const{lat:Fn,lng:Un}=(($=sn==null?void 0:sn[0])==null?void 0:$.latestDocument)??{},Qn={lat:Fn||Qo.lat,lng:Un||Qo.lat};Jn(Xr(Qn))}},[f,I]),Y.useEffect(()=>{qn([]),Jn(Jo([{reg_id:"",imei:"",params:[]}]))},[f]);const dt=async()=>{try{zn(!0);let $=[],sn=[];const Fn=await Jn(Yd({w_customer_id:Q}));if(Array.isArray(Fn.payload)){Fn.payload.forEach(W=>{var Tn,$n,It,bn;Array.isArray(W.imei)&&W.imei.length>0&&((Tn=W.imei[0])!=null&&Tn.mac_id)?($.push({id:W.id,label:W.registration_id,value:($n=W.imei[0])==null?void 0:$n.mac_id,vehilce_type:W==null?void 0:W.segment,chassis_no:W==null?void 0:W.chassis_no,engine_no:W==null?void 0:W.engine_no,workShop:W==null?void 0:W.workshop,registration_id:W==null?void 0:W.registration_id,sell_date:W==null?void 0:W.sell_date,customer_name:W==null?void 0:W.customer_name,vehicle_model:(It=W==null?void 0:W.vehicle_model)==null?void 0:It.name,vehicle_group:W==null?void 0:W.vehicle_group}),sn.push((bn=W.imei[0])==null?void 0:bn.mac_id)):console.error("IMEI data not found for item:",W)});const Un="one",Qn=sn;sn.length>0&&Jn(Xd({type:Un,imei:Qn})),d($),Jn(Jd($)),Jn(Qd({w_customer_id:Q})),zn(!1)}else zn(!1),console.error("Unexpected data format:",Fn),cs.error("Unexpected data format:")}catch($){console.error("Error fetching vehicle data:",$),cs.error(`Error fetching vehicle data: ${$}`)}},Mn=async $=>{const{label:sn,imei:Fn,id:Un,reg_id:Qn,checked:W}=$;cn(bn=>bn.map(ut=>ut.id===Un?{...ut,checked:!W}:ut));let Tn=[...Ln],$n=[...Ln];if(!W)I.forEach(bn=>{bn.latestDocument.imei===Fn&&(Tn.push({label:sn,value:bn.latestDocument[sn==="maininputvoltage"?"mainInputVoltage":sn]}),$n=Tn,qn(Tn))});else{let bn=Ln.filter(ut=>ut.label!==sn);$n=bn,qn(bn)}Jn(Jo([{reg_id:Qn,imei:Fn,params:$n}]))},ue=$=>I==null?void 0:I.some(sn=>Number(sn.latestDocument.imei)===Number($)&&sn.latestDocument.speed>0&&(sn.latestDocument.ignition===!0||sn.latestDocument.ignition===1)),st=$=>I==null?void 0:I.some(sn=>Number(sn.latestDocument.imei)===Number($)&&sn.latestDocument.speed<=0&&(sn.latestDocument.ignition===!0||sn.latestDocument.ignition===1)),Wn=O.filter($=>{var oe,Gn,Et,Ae,jn;if(!(Object.keys(x).length===0||$.vehicle_group===x.id))return!1;const Fn=(oe=$==null?void 0:$.label)==null?void 0:oe.toLowerCase().includes(T.toLowerCase()),Un=un===""||((Gn=$==null?void 0:$.workShop)==null?void 0:Gn.region)===un,Qn=Z===""||((Ae=(Et=$==null?void 0:$.workShop)==null?void 0:Et.state)==null?void 0:Ae.toLowerCase())===(((jn=Z==null?void 0:Z.toString())==null?void 0:jn.toLowerCase())||""),W=Number($.value),Tn=g.includes(W),$n=!Tn,It=Tn&&ue(W),bn=Tn&&st(W);return Fn&&Un&&Qn&&(L==="online"?Tn:L==="offline"?$n:L==="running"?It:L==="idling"?bn:!0)}).sort(($,sn)=>$.label.localeCompare(sn.label));return N.jsxs("div",{className:"app",children:[N.jsx(t0,{}),N.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[N.jsx(jd,{title:"Live Map",setShowVehicles:An,showVehicles:hn,showParameters:Rn,setShowParameters:dn,setShowCard:xn,showCard:Ft,setShowVehiclesGroup:Tt,showVehiclesGroup:Ut}),N.jsx(u0,{setShowVehiclesGroup:Tt,showVehiclesGroup:Ut,where:"livemap"}),N.jsxs(Kn,{style:{display:"flex",width:"100%",height:"95vh"},children:[N.jsx(Kn,{style:{width:hn||Rn?"80%":"100%"},children:N.jsx(N0,{showCard:Ft,loadingVehicle:Pn,vehicleData:Wn})}),hn&&N.jsx(Kn,{style:{width:"20%",backgroundColor:v.grey[100]},children:N.jsx(n0,{vehicleData:Wn,title:"Live Map",setParameterData:cn,loadingVehicle:Pn,setShowVehicles:An,showVehicles:hn,showParameters:Rn,setShowParameters:dn,setSearchedTerm:F,setOptions:K,setState:en,setRegion:q,searchTerm:T,options:L,state:Z,region:un})}),Rn&&N.jsx(Kn,{style:{width:"20%",backgroundColor:v.grey[100]},children:N.jsx(s0,{parametersData:vn,setParameterData:cn,handleParameterChange:Mn})})]})]})]})}export{a_ as default};
