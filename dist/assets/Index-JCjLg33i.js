import{r as g,a as bt,g as yt,s as et,_ as f,ah as tt,u as Ct,b as gt,j as e,d as pt,ai as Kt,aj as Xt,ak as M,e as mt,al as Qt,c as wt,am as Zt,an as ta,ao as kt,ap as At,aq as Gt,ar as Vt,o as Wt,p as at,as as aa,at as ea,au as ut,U as rt,B as j,av as oa,aw as sa,T as U,E as dt,C as ra,ax as na,ac as Ft,ay as ia,az as It,w as Yt,aA as Dt,aB as la,aC as ca,aD as Tt,aE as Lt,aF as da,aG as ua,aH as pa,aI as ga,aJ as xa,z as Nt,aK as va,S as fa,a3 as ha,a4 as ba,a7 as ya,y as Ot,Y as Ca,$ as ma}from"./index-BiuHTavI.js";import{L as $a}from"./LiveMapTopBar-VYHZterq.js";import{V as ja}from"./VehicleMenu-B779m6HS.js";import{T as Da}from"./TripMap-CXghwiJV.js";/* empty css           */import"./Autocomplete-Bgce0ybq.js";import"./EllipsisOutlined-l7Zepq-D.js";function Ba(t){return g.Children.toArray(t).filter(a=>g.isValidElement(a))}function Ra(t){return yt("MuiButtonGroup",t)}const Pa=bt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),I=Pa,Ma=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],ka=(t,a)=>{const{ownerState:o}=t;return[{[`& .${I.grouped}`]:a.grouped},{[`& .${I.grouped}`]:a[`grouped${M(o.orientation)}`]},{[`& .${I.grouped}`]:a[`grouped${M(o.variant)}`]},{[`& .${I.grouped}`]:a[`grouped${M(o.variant)}${M(o.orientation)}`]},{[`& .${I.grouped}`]:a[`grouped${M(o.variant)}${M(o.color)}`]},{[`& .${I.firstButton}`]:a.firstButton},{[`& .${I.lastButton}`]:a.lastButton},{[`& .${I.middleButton}`]:a.middleButton},a.root,a[o.variant],o.disableElevation===!0&&a.disableElevation,o.fullWidth&&a.fullWidth,o.orientation==="vertical"&&a.vertical]},Aa=t=>{const{classes:a,color:o,disabled:n,disableElevation:x,fullWidth:h,orientation:y,variant:l}=t,p={root:["root",l,y==="vertical"&&"vertical",h&&"fullWidth",x&&"disableElevation"],grouped:["grouped",`grouped${M(y)}`,`grouped${M(l)}`,`grouped${M(l)}${M(y)}`,`grouped${M(l)}${M(o)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return mt(p,Ra,a)},Ia=et("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:ka})(({theme:t,ownerState:a})=>f({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},a.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},a.disableElevation&&{boxShadow:"none"},a.fullWidth&&{width:"100%"},a.orientation==="vertical"&&{flexDirection:"column"},{[`& .${I.grouped}`]:f({minWidth:40,"&:hover":f({},a.variant==="contained"&&{boxShadow:"none"})},a.variant==="contained"&&{boxShadow:"none"}),[`& .${I.firstButton},& .${I.middleButton}`]:f({},a.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},a.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},a.variant==="text"&&a.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${I.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},a.variant==="text"&&a.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${I.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},a.variant==="text"&&a.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:tt(t.palette[a.color].main,.5)},a.variant==="outlined"&&a.orientation==="horizontal"&&{borderRightColor:"transparent"},a.variant==="outlined"&&a.orientation==="vertical"&&{borderBottomColor:"transparent"},a.variant==="contained"&&a.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${I.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},a.variant==="contained"&&a.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${I.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},a.variant==="contained"&&a.color!=="inherit"&&{borderColor:(t.vars||t).palette[a.color].dark},{"&:hover":f({},a.variant==="outlined"&&a.orientation==="horizontal"&&{borderRightColor:"currentColor"},a.variant==="outlined"&&a.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${I.lastButton},& .${I.middleButton}`]:f({},a.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},a.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},a.variant==="outlined"&&a.orientation==="horizontal"&&{marginLeft:-1},a.variant==="outlined"&&a.orientation==="vertical"&&{marginTop:-1})})),Ta=g.forwardRef(function(a,o){const n=Ct({props:a,name:"MuiButtonGroup"}),{children:x,className:h,color:y="primary",component:l="div",disabled:p=!1,disableElevation:d=!1,disableFocusRipple:N=!1,disableRipple:G=!1,fullWidth:T=!1,orientation:D="horizontal",size:c="medium",variant:S="outlined"}=n,E=gt(n,Ma),R=f({},n,{color:y,component:l,disabled:p,disableElevation:d,disableFocusRipple:N,disableRipple:G,fullWidth:T,orientation:D,size:c,variant:S}),C=Aa(R),k=g.useMemo(()=>({className:C.grouped,color:y,disabled:p,disableElevation:d,disableFocusRipple:N,disableRipple:G,fullWidth:T,size:c,variant:S}),[y,p,d,N,G,T,c,S,C.grouped]),u=Ba(x),w=u.length,O=_=>{const B=_===0,v=_===w-1;return B&&v?"":B?C.firstButton:v?C.lastButton:C.middleButton};return e.jsx(Ia,f({as:l,role:"group",className:pt(C.root,h),ref:o,ownerState:R},E,{children:e.jsx(Kt.Provider,{value:k,children:u.map((_,B)=>e.jsx(Xt.Provider,{value:O(B),children:_},B))})}))}),La=Ta;function Na(t){return yt("MuiCardActions",t)}bt("MuiCardActions",["root","spacing"]);const Oa=["disableSpacing","className"],_a=t=>{const{classes:a,disableSpacing:o}=t;return mt({root:["root",!o&&"spacing"]},Na,a)},za=et("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,!o.disableSpacing&&a.spacing]}})(({ownerState:t})=>f({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Sa=g.forwardRef(function(a,o){const n=Ct({props:a,name:"MuiCardActions"}),{disableSpacing:x=!1,className:h}=n,y=gt(n,Oa),l=f({},n,{disableSpacing:x}),p=_a(l);return e.jsx(za,f({className:pt(p.root,h),ownerState:l,ref:o},y))}),Ea=Sa;function wa(t){return yt("MuiPagination",t)}bt("MuiPagination",["root","ul","outlined","text"]);const Ga=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Va(t={}){const{boundaryCount:a=1,componentName:o="usePagination",count:n=1,defaultPage:x=1,disabled:h=!1,hideNextButton:y=!1,hidePrevButton:l=!1,onChange:p,page:d,showFirstButton:N=!1,showLastButton:G=!1,siblingCount:T=1}=t,D=gt(t,Ga),[c,S]=Qt({controlled:d,default:x,name:o,state:"page"}),E=(v,V)=>{d||S(V),p&&p(v,V)},R=(v,V)=>{const ot=V-v+1;return Array.from({length:ot},(nt,A)=>v+A)},C=R(1,Math.min(a,n)),k=R(Math.max(n-a+1,a+1),n),u=Math.max(Math.min(c-T,n-a-T*2-1),a+2),w=Math.min(Math.max(c+T,a+T*2+2),k.length>0?k[0]-2:n-1),O=[...N?["first"]:[],...l?[]:["previous"],...C,...u>a+2?["start-ellipsis"]:a+1<n-a?[a+1]:[],...R(u,w),...w<n-a-1?["end-ellipsis"]:n-a>a?[n-a]:[],...k,...y?[]:["next"],...G?["last"]:[]],_=v=>{switch(v){case"first":return 1;case"previous":return c-1;case"next":return c+1;case"last":return n;default:return null}},B=O.map(v=>typeof v=="number"?{onClick:V=>{E(V,v)},type:"page",page:v,selected:v===c,disabled:h,"aria-current":v===c?"true":void 0}:{onClick:V=>{E(V,_(v))},type:v,page:_(v),selected:!1,disabled:h||v.indexOf("ellipsis")===-1&&(v==="next"||v==="last"?c>=n:c<=1)});return f({items:B},D)}function Wa(t){return yt("MuiPaginationItem",t)}const Fa=bt("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Y=Fa,_t=wt(e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),zt=wt(e.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Ya=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Ut=(t,a)=>{const{ownerState:o}=t;return[a.root,a[o.variant],a[`size${M(o.size)}`],o.variant==="text"&&a[`text${M(o.color)}`],o.variant==="outlined"&&a[`outlined${M(o.color)}`],o.shape==="rounded"&&a.rounded,o.type==="page"&&a.page,(o.type==="start-ellipsis"||o.type==="end-ellipsis")&&a.ellipsis,(o.type==="previous"||o.type==="next")&&a.previousNext,(o.type==="first"||o.type==="last")&&a.firstLast]},Ua=t=>{const{classes:a,color:o,disabled:n,selected:x,size:h,shape:y,type:l,variant:p}=t,d={root:["root",`size${M(h)}`,p,y,o!=="standard"&&`color${M(o)}`,o!=="standard"&&`${p}${M(o)}`,n&&"disabled",x&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return mt(d,Wa,a)},qa=et("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ut})(({theme:t,ownerState:a})=>f({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${Y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),Ha=et(Zt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ut})(({theme:t,ownerState:a})=>f({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${Y.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Y.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:tt(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${Y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:tt(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${Y.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:a})=>f({},a.variant==="text"&&{[`&.${Y.selected}`]:f({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${Y.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},{[`&.${Y.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},a.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Y.selected}`]:f({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:tt(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:tt(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:tt(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:tt(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${Y.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Ja=et("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,a)=>a.icon})(({theme:t,ownerState:a})=>f({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:t.typography.pxToRem(18)},a.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Ka=g.forwardRef(function(a,o){const n=Ct({props:a,name:"MuiPaginationItem"}),{className:x,color:h="standard",component:y,components:l={},disabled:p=!1,page:d,selected:N=!1,shape:G="circular",size:T="medium",slots:D={},type:c="page",variant:S="text"}=n,E=gt(n,Ya),R=f({},n,{color:h,disabled:p,selected:N,shape:G,size:T,type:c,variant:S}),C=ta(),k=Ua(R),w=(C?{previous:D.next||l.next||zt,next:D.previous||l.previous||_t,last:D.first||l.first||kt,first:D.last||l.last||At}:{previous:D.previous||l.previous||_t,next:D.next||l.next||zt,first:D.first||l.first||kt,last:D.last||l.last||At})[c];return c==="start-ellipsis"||c==="end-ellipsis"?e.jsx(qa,{ref:o,ownerState:R,className:pt(k.root,x),children:"…"}):e.jsxs(Ha,f({ref:o,ownerState:R,component:y,disabled:p,className:pt(k.root,x)},E,{children:[c==="page"&&d,w?e.jsx(Ja,{as:w,ownerState:R,className:k.icon}):null]}))}),Xa=Ka,Qa=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Za=t=>{const{classes:a,variant:o}=t;return mt({root:["root",o],ul:["ul"]},wa,a)},te=et("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,a[o.variant]]}})({}),ae=et("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ee(t,a,o){return t==="page"?`${o?"":"Go to "}page ${a}`:`Go to ${t} page`}const oe=g.forwardRef(function(a,o){const n=Ct({props:a,name:"MuiPagination"}),{boundaryCount:x=1,className:h,color:y="standard",count:l=1,defaultPage:p=1,disabled:d=!1,getItemAriaLabel:N=ee,hideNextButton:G=!1,hidePrevButton:T=!1,renderItem:D=B=>e.jsx(Xa,f({},B)),shape:c="circular",showFirstButton:S=!1,showLastButton:E=!1,siblingCount:R=1,size:C="medium",variant:k="text"}=n,u=gt(n,Qa),{items:w}=Va(f({},n,{componentName:"Pagination"})),O=f({},n,{boundaryCount:x,color:y,count:l,defaultPage:p,disabled:d,getItemAriaLabel:N,hideNextButton:G,hidePrevButton:T,renderItem:D,shape:c,showFirstButton:S,showLastButton:E,siblingCount:R,size:C,variant:k}),_=Za(O);return e.jsx(te,f({"aria-label":"pagination navigation",className:pt(_.root,h),ownerState:O,ref:o},u,{children:e.jsx(ae,{className:_.ul,ownerState:O,children:w.map((B,v)=>e.jsx("li",{children:D(f({},B,{color:y,"aria-label":N(B.type,B.page,B.selected),shape:c,size:C,variant:k}))},v))})}))}),se=oe;var Bt={},re=Vt;Object.defineProperty(Bt,"__esModule",{value:!0});var qt=Bt.default=void 0,ne=re(Gt()),St=e;qt=Bt.default=(0,ne.default)([(0,St.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7M7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9"},"0"),(0,St.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"LocationOnOutlined");var Rt={},ie=Vt;Object.defineProperty(Rt,"__esModule",{value:!0});var Ht=Rt.default=void 0,le=ie(Gt()),Et=e;Ht=Rt.default=(0,le.default)([(0,Et.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Et.jsx)("circle",{cx:"12",cy:"12",r:"5"},"1")],"RadioButtonCheckedOutlined");const ce="https://cc.wikitrak.in/proxy-3031",de=()=>{var X,Q,$,Z;const t=Wt(),{tripList:a,selectedTripData:o,loading:n,trips:x,activeIndex:h,searchText:y,mode:l,isNavigate:p,allTripList:d,trip_payload:N,page:G,total_page:T,total_trips:D}=at(s=>s.dashboard),{selectedVehicle:c,vehicleList:S}=at(s=>s.liveMap),{parametersConfiguration:E}=at(s=>s.tripMonitor),R=Yt(l),[C,k]=g.useState(!1),[u,w]=g.useState({}),[O,_]=g.useState(""),[B,v]=g.useState(null);g.useEffect(()=>{(x==null?void 0:x.length)>0},[x]),g.useEffect(()=>{const s=ot(d);t(aa(s))},[d]),g.useEffect(()=>{!(o.length>0)&&p&&h!==null&&A.length>0&&V(A[h])},[o,p]);const V=async s=>{var L;let r={imei:c.imei,startDate:s.startDate,endDate:s.endDate};const b=await ea(r);((L=b==null?void 0:b.data)==null?void 0:L.documents.length)>0?(t(p(!1)),t(ut(b.data.documents[0].data))):(t(p(!1)),t(ut([])))},ot=s=>{const r=new Set,b=[];return s.forEach(L=>{const W=rt(L.startTime).format("YYYY-MM-DD");r.has(W)||(r.add(W),b.push(W))}),b},nt=(s,r)=>{t(Dt(null)),t(la(s)),t(ca(!1)),O===s?(_(""),v(null)):(_(s),v(r))},A=O===""?d:d.filter(s=>rt(s.startTime).format("YYYY-MM-DD")===O),$t=async(s,r)=>{if(t(ut(r.data)),t(Dt(s)),t(Tt(r.tripAcreage)),Array.isArray(r==null?void 0:r.data)||r.data.length>5){const b={startDate:r.data[0].createdAt,endDate:r.data[r.data.length-1].createdAt,imei:r.imei};xt(b)}},xt=async s=>{var r,b,L,W,z,H;try{const F=S.find(P=>{var J,K;return((K=(J=P==null?void 0:P.imei)==null?void 0:J[0])==null?void 0:K.mac_id)===(c==null?void 0:c.imei)});if(!F){console.warn("No matching vehicle found for IMEI:",c==null?void 0:c.imei);return}const it=((H=(z=(W=(L=(b=(r=F==null?void 0:F.sub_model)==null?void 0:r.model_modelecu)==null?void 0:b[0])==null?void 0:L.ecu)==null?void 0:W.pid_datasets)==null?void 0:z[0])==null?void 0:H.codes)||[],lt=E.map(P=>{const J=it.find(K=>{var ft,ht,Mt;return((Mt=(ht=(ft=K==null?void 0:K.pi_code_variable)==null?void 0:ft[0])==null?void 0:ht.short_name)==null?void 0:Mt.toLowerCase())===P.label.toLowerCase()});return J?{...P,pid:J.code,decodeConfig:J}:{...P}});t(Lt(lt));const st=lt.filter(P=>P.checked);console.log("Selected Parameters:",st);const Pt=st.filter(P=>P.pid).map(P=>P.pid.toLowerCase().padStart(4,"0").match(/../g).reverse().join(""));if(Pt.length===0){console.warn("No valid PIDs found to fetch data.");return}const Jt={pids:Pt,startDate:s.startDate,endDate:s.endDate,imei:s.imei};console.log("item",s);const ct=(await da.post(`${ce}/pid-data`,Jt)).data;if(console.log("Raw Response:",ct),ct&&typeof ct=="object"&&Object.keys(ct).length>0){const P={};for(const[J,K]of Object.entries(ct))if(Array.isArray(K)&&K.length>0){const ft=K.map(ht=>ua(ht,J,it));P[J]=ft}else P[J]=[];console.log("Decoded Data:",P),t(pa(P))}else console.warn("Empty or invalid response received.")}catch(F){console.error("Error fetching PID data:",F)}},jt=s=>{w(s),k(!0)},vt=()=>{k(!1),w({})},i=(s,r)=>{t(ga(r));const b={...N,page:r,limit:20};t(xa(b))},m=s=>{if(q(),!Array.isArray(s)||s.length===0)return;const r=s.filter(z=>Array.isArray(z==null?void 0:z.data)&&z.data.length>0);if(r.length===0)return;const b=r.reduce((z,H)=>z+(H.tripAcreage||0),0);console.log("Total acreage",b),t(ut([])),t(Dt("all")),t(Tt(b));const L=r[r.length-1],W={startDate:L.data[L.data.length-1].createdAt,endDate:r[0].data[0].createdAt,imei:r[0].imei};console.log("pidRequestData",W),xt(W)},q=()=>{const s=[...E].map(r=>({...r,value:0}));t(Lt(s))};return e.jsxs(e.Fragment,{children:[e.jsxs(j,{children:[e.jsxs(j,{sx:{m:"10px"},children:[e.jsx(j,{sx:{color:R.grey[400]},children:"Select Date"}),e.jsx(j,{sx:{mt:1},children:e.jsx(oa,{})})]}),n?e.jsx("div",{style:{width:"100%",margin:"38%"},children:e.jsx(sa,{})}):e.jsxs(e.Fragment,{children:[e.jsx(j,{children:e.jsx(j,{sx:{display:"flex",overflowX:"auto",gap:"10px",paddingBottom:"5px"},children:d&&(d==null?void 0:d.length)>0?e.jsx(e.Fragment,{}):e.jsx(U,{sx:{width:"100%",mt:"50%",textAlign:"center"},children:"Sorry! No Trips Found"})})}),d&&(d==null?void 0:d.length)>0&&e.jsx(j,{ml:2,display:"flex",gap:1,sx:{width:"90%"},children:e.jsxs(La,{variant:"outlined","aria-label":"Loading button group",sx:{width:"100%",color:"black"},children:[e.jsx(dt,{sx:{width:"50%",color:"#333333",border:"1px solid #C0C0C0"},children:"Total Trips"}),e.jsx(dt,{sx:{width:"50%",color:"white",border:"1px solid #C0C0C0",backgroundColor:"#C0C0C0"},children:D})]})}),d&&(d==null?void 0:d.length)>0&&e.jsx(se,{page:G,count:T,sx:{m:2,width:"90%"},onChange:i}),e.jsxs(j,{sx:{height:"75vh",width:"100%",overflowY:"auto"},children:[e.jsx(j,{display:"flex",gap:1,marginLeft:2,children:x.map((s,r)=>e.jsx(j,{children:e.jsx(dt,{onClick:()=>{nt(s,r)},style:{backgroundColor:B===r?R.grey[300]:" #D5D5D5",color:"black",height:"35px",fontWeight:700,fontSize:"12px",width:"90px",marginTop:"10px"},children:s})},r))}),A&&A.length>0&&e.jsx(dt,{variant:h==="all"?"contained":"outlined",sx:{width:"92%",m:"10px 15px",p:1,backgroundColor:h==="all"?ra.bgColor:"transparent"},onClick:()=>{m(A)},children:"Select All trips"})," ",A&&A.length>0&&A.map((s,r)=>{var W,z,H,F;const b=(z=(W=s==null?void 0:s.startLocation)==null?void 0:W.address)==null?void 0:z.address,L=(F=(H=s==null?void 0:s.endLocation)==null?void 0:H.address)==null?void 0:F.address;return b&&`${b.town||b.city||""}`,L&&`${L.town||L.city||""}`,e.jsx(pe,{trip:s,index:r,openModal:jt,handleTripData:$t,activeIndex:h})})]})]})]}),e.jsx(na,{open:C,onClose:vt,children:e.jsxs(Ft,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40%",bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsxs(ia,{children:[e.jsx(U,{variant:"h6",component:"div",children:"Trip Details"}),e.jsxs(U,{sx:{mt:2},children:[e.jsx("strong",{children:"Start Location:"})," ",((Q=(X=u==null?void 0:u.startLocation)==null?void 0:X.address)==null?void 0:Q.display_name)||"N/A"]}),e.jsxs(U,{sx:{mt:2},children:[e.jsx("strong",{children:"End Location:"})," ",((Z=($=u==null?void 0:u.endLocation)==null?void 0:$.address)==null?void 0:Z.display_name)||"N/A"]}),e.jsxs(U,{sx:{mt:2},children:[e.jsx("strong",{children:"Start Time:"})," ",u!=null&&u.startTime?rt(new Date(u.startTime).toISOString()).format("MMMM Do YYYY, h:mm:ss A"):"N/A"]}),e.jsxs(U,{sx:{mt:2},children:[e.jsx("strong",{children:"End Time:"})," ",u!=null&&u.endTime?rt(new Date(u.endTime).toISOString()).format("MMMM Do YYYY, h:mm:ss A"):"N/A"]})]}),e.jsx(Ea,{children:e.jsx(dt,{onClick:vt,children:"Close"})})]})})]})},ue=de,pe=({trip:t,index:a,openModal:o,handleTripData:n,activeIndex:x})=>e.jsxs(Ft,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",m:2,px:1,py:1,borderRadius:2,border:"1px solid #DDDDDD",cursor:"pointer",backgroundColor:x===a?"#e8edea":"undefined"},onClick:()=>n(a,t),children:[e.jsxs(j,{sx:{width:40,textAlign:"center"},children:[e.jsx(U,{variant:"caption",color:"text.secondary",children:"Trip"}),e.jsx(U,{variant:"subtitle2",fontWeight:"bold",children:a+1})]}),e.jsx(It,{orientation:"vertical",flexItem:!0}),e.jsxs(j,{sx:{flex:1,mx:2},children:[e.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(Ht,{sx:{color:"#BFBEBE"}}),e.jsx(j,{sx:{flex:1,borderTop:"1px dashed #DDDDDD",mx:1.5}}),e.jsx(qt,{sx:{color:"red"}})]}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",mt:.5},children:[e.jsx(U,{variant:"caption",children:t.startTime?rt(t.startTime).format("HH:mm:ss A"):"NA"}),e.jsx(U,{variant:"caption",children:t.startTime?rt(t.endTime).format("HH:mm:ss A"):"NA"})]})]}),e.jsx(It,{orientation:"vertical",flexItem:!0}),e.jsx(j,{children:e.jsx(U,{variant:"body2",color:"primary",sx:{cursor:"pointer",m:1},onClick:()=>o(t),children:"See More"})})]},t.id);function me(){const{w_customer_id:t}=at(i=>i.auth),{collapsed:a}=at(i=>i.auth),{mode:o,selectedVehicleGroup:n}=at(i=>i.dashboard),{vehicleList:x,selectedVehicle:h,onlineVehicle:y,locationData:l}=at(i=>i.liveMap),[p,d]=g.useState(!1),[N,G]=g.useState(!0),[T,D]=g.useState([]),[c,S]=g.useState(!0),[E,R]=g.useState(""),[C,k]=g.useState(""),[u,w]=g.useState(""),[O,_]=g.useState("");g.useState([]);const[B,v]=g.useState({lat:18.516726,lng:73.856255});g.useState([]);const[V,ot]=g.useState(!1),nt=Yt(o);let A=Wt();g.useEffect(()=>{A(ut([])),$t()},[]),g.useEffect(()=>{var q,X,Q;const i=Nt().subtract(5,"day").startOf("day").toISOString(),m=Nt().endOf("day").toISOString();A(va({startDate:i,endDate:m})),Object.keys(h).length===0&&x.length>0&&A(fa({imei:(X=(q=x[0])==null?void 0:q.imei[0])==null?void 0:X.mac_id,reg_id:(Q=x[0])==null?void 0:Q.registration_id}))},[h,x]);const $t=async()=>{try{let i=[],m=[];const q=await A(ha({w_customer_id:t}));if(Array.isArray(q.payload)){q.payload.forEach($=>{var Z,s,r;Array.isArray($.imei)&&$.imei.length>0&&((Z=$.imei[0])!=null&&Z.mac_id)?(i.push({id:$.id,label:$.registration_id,value:(s=$.imei[0])==null?void 0:s.mac_id,workShop:$==null?void 0:$.workshop,vehicle_group:$==null?void 0:$.vehicle_group}),m.push((r=$.imei[0])==null?void 0:r.mac_id)):console.error("IMEI data not found for item:",$)});const X="one",Q=m;m.length>0&&A(ba({type:X,imei:Q})),A(ya({w_customer_id:t})),D(i)}else console.error("Unexpected data format:",q),Ot.error("Unexpected data format:")}catch(i){console.error("Error fetching vehicle data:",i),Ot.error(`Error fetching vehicle data: ${i}`)}},xt=i=>l==null?void 0:l.some(m=>String(m.latestDocument.imei)===String(i)&&m.latestDocument.speed>0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),jt=i=>l==null?void 0:l.some(m=>String(m.latestDocument.imei)===String(i)&&m.latestDocument.speed<=0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),vt=T.filter(i=>{var z,H,F,it,lt;if(!(Object.keys(n).length===0||i.vehicle_group===n.id))return!1;const q=(z=i==null?void 0:i.label)==null?void 0:z.toLowerCase().includes(E.toLowerCase()),X=O===""||((H=i==null?void 0:i.workShop)==null?void 0:H.region)===O,Q=u===""||((it=(F=i==null?void 0:i.workShop)==null?void 0:F.state)==null?void 0:it.toLowerCase())===(((lt=u==null?void 0:u.toString())==null?void 0:lt.toLowerCase())||""),$=i.value,Z=String(i.value).toLowerCase(),s=y.some(st=>String(st).toLowerCase()===Z),r=!y.some(st=>String(st).toLowerCase()===Z),b=s&&xt($),L=s&&jt($);return q&&X&&Q&&(C==="online"?s:C==="offline"?r:C==="running"?b:C==="idling"?L:!0)}).sort((i,m)=>i.label.localeCompare(m.label));return e.jsxs("div",{className:"app",children:[e.jsx(Ca,{}),e.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[e.jsx($a,{title:"Trip Monitor",setShowVehicles:d,showVehicles:p,setShowCard:G,showCard:N,sideBarTrip:c,setSideBarTrip:S,setShowVehiclesGroup:ot,showVehiclesGroup:V}),e.jsx(ma,{setShowVehiclesGroup:ot,showVehiclesGroup:V,where:"tripmonitor"}),e.jsxs(j,{style:{display:"flex",width:"100%",height:"95vh"},children:[e.jsx(j,{sx:{width:p||c?"80%":"100%",height:"50px"},children:e.jsx(Da,{center:B,showCard:N})}),p&&e.jsx(j,{style:{width:"20%",backgroundColor:nt.grey[100]},children:e.jsx(ja,{vehicleData:vt,setShowVehicles:d,showVehicles:p,title:"Live Monitor",setSearchedTerm:R,setOptions:k,setState:w,setRegion:_,searchTerm:E,options:C,state:u,region:O,setSideBarTrip:S})}),e.jsx(j,{style:{width:a?"22%":"20%",display:c?"block":"none",backgroundColor:nt.grey[100]},children:e.jsx(ue,{})})]})]})]})}export{me as default};
