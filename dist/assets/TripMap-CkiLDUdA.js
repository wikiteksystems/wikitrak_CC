import{b as l,j as t,y as _,x as ze,E as gt,ao as pt,D as R,F as X,bu as ht,ak as J,B as W,T as A,bv as ut,bw as xt,L as Me,bx as ft,C as bt,as as mt,by as wt}from"./index-Cjcv2yiw.js";import{a as ie,O as Ae,u as St,G as Ct,D as jt,P as le,I as re,b as Y}from"./esm-BjLC-CwO.js";import{r as yt}from"./redTractor-NXgVJyvR.js";import{T as kt}from"./TripGraph-CexIFumy.js";import{B as O,C as Pt}from"./CircularProgress-Cn0algju.js";import{d as Et}from"./Info-CKUZoL12.js";import{d as Ft}from"./Close-Bbe5XJTL.js";function Oe({trip:s,tripPlay:n,onTripEnd:h,setSpeed:u}){const[r,S]=l.useState([]),[c,f]=l.useState([]),[b,C]=l.useState(0),m=l.useRef(null),T=1e4,[o,G]=l.useState(0),[U,k]=l.useState(0);l.useEffect(()=>{if(Array.isArray(s)&&s.length>0){const y=s.filter(p=>(p==null?void 0:p.lat)&&(p==null?void 0:p.lng)).map(p=>({lat:parseFloat(p.lat),lng:parseFloat(p.lng),heading:p.heading||0,speed:p.speed||0}));S(y.length>0?y:[])}else S([])},[s]),l.useEffect(()=>{if(n&&r.length>1){C(0),f([]);const y=performance.now(),p=F=>{const j=F-y,E=Math.min(j/T,1);C(E),E<1?m.current=requestAnimationFrame(p):(f([...r]),h())};return m.current=requestAnimationFrame(p),()=>cancelAnimationFrame(m.current)}},[n,r]);const w=l.useMemo(()=>{var I,z;if(r.length<2||b===0)return r[0]||{lat:0,lng:0};const y=r.length-1,p=Math.floor(b*y),F=Math.min(p+1,y),j=b*y%1,E=r[p]||{lat:0,lng:0},q=r[F]||{lat:0,lng:0},v={lat:E.lat+(q.lat-E.lat)*j,lng:E.lng+(q.lng-E.lng)*j},K=((I=r[p])==null?void 0:I.heading)||0,L=((z=r[p])==null?void 0:z.speed)||0;return G(K),k(L),u(L),b>0&&n&&f(B=>[...B,v]),v},[r,b,n]);return t.jsxs(t.Fragment,{children:[r.length>1&&t.jsx(ie,{path:r,options:{strokeColor:"red",strokeOpacity:1,strokeWeight:4,geodesic:!1}}),n&&c.length>1&&t.jsx(ie,{path:c,options:{strokeColor:"green",strokeOpacity:1,strokeWeight:5,zIndex:1e3,geodesic:!1}}),n&&w.lat!==0&&w.lng!==0&&t.jsx(Ae,{position:w,mapPaneName:Ae.OVERLAY_MOUSE_TARGET,children:t.jsx("div",{style:{transform:`rotate(${o}deg)`,transition:"transform 0.2s linear",width:"30px",height:"30px",transformOrigin:"center center",position:"absolute",left:"50%",top:"50%",translate:"-50% -50%"},children:t.jsx("img",{src:yt,alt:"Tractor",style:{width:"100%",height:"100%"}})})})]})}function It({tripPlay:s,speed:n,totalDistance:h,Acreage:u,filterCoordinates:r,acreageTrips:S,handleTrip:c,showGraph:f,handleShowGraph:b,drawing:C,setDrawing:m,setPaths:T,setCurrentPath:o,setMousePos:G,setAreaInfo:U,setCalculatedAcreageTrips:k}){var K,L;const{selectedTripData:w}=_(I=>I.dashboard);let y=ze(),p=gt();const[F]=pt(),j=F.get("source"),E=()=>{var I,z,B;if(console.log("selected trip data",(I=w[0])==null?void 0:I.venderId,S),w.length>0)if(((z=w[0])==null?void 0:z.venderId)==="VT200"||((B=w[0])==null?void 0:B.venderId)==="wtkpltf001"){let D={};if(Object.keys(S).length>0){let N=0;Object.keys(S).map((Z,V)=>{let M=ht(S[Z]);D[V]=(M==null?void 0:M.points)||[],N+=(M==null?void 0:M.area)||0}),k(D),y(J(N))}else W.error("No acreage trip found")}else r(w,y)},q=()=>{p("/reports")},v=w&&w.length>0?!(((K=w[0])==null?void 0:K.venderId)==="VT200"||((L=w[0])==null?void 0:L.venderId)==="wtkpltf001"):!0;return t.jsxs(O,{sx:{bgcolor:R.bgColor,position:"relative",color:"white",display:"flex",alignItems:"center",overflowX:"hidden",flexWrap:"wrap",border:"1px solid white",gap:"5px",paddingLeft:"5px",padding:"10px 10px"},children:[t.jsxs(X,{sx:{background:"white",border:"1px solid white",borderRadius:"5px",padding:"5px 20px",color:"black"},onClick:E,disabled:v,children:[" ","Calculate Acerage"]}),t.jsxs(X,{sx:{background:s?"transparent":"white",border:"1px solid white",borderRadius:"5px",height:"38px",padding:"5px 20px",color:s?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{c()},children:[s?"Pause":"Play","-Trip"]}),t.jsxs(X,{style:{height:"38px",padding:"5px 20px"},sx:{background:f?"transparent":"white",border:"1px solid white",borderRadius:"5px",color:f?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{b()},children:[f?"Hide":"Show","-Graph"]}),j==="TripDetail"&&t.jsx(X,{style:{height:"38px",padding:"5px 20px"},sx:{background:"white",border:"1px solid white",borderRadius:"5px",color:"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{q()},children:"Go back"})]})}const vt=({label:s,value:n})=>t.jsxs(O,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[t.jsx(A,{variant:"body2",color:"textSecondary",children:s}),t.jsx(A,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:n||"N/A"})]}),Mt=(s,n)=>(s==null?void 0:s.find(h=>{var u,r;return((r=(u=h.imei)==null?void 0:u[0])==null?void 0:r.mac_id)===n.imei}))||{},Te=({title:s,details:n})=>t.jsx(O,{sx:{width:"45%"},children:n.map(({label:h,value:u})=>t.jsx(vt,{label:h,value:u},h))});function At({handleVehicleInfo:s,vehicleReport:n,speed:h,totalDistance:u,Acreage:r,tripPlay:S,whereToUse:c}){var U,k,w;const{collapsed:f}=_(y=>y.auth),{vehicleList:b,selectedVehicle:C}=_(y=>y.liveMap),[m,T]=l.useState({});l.useEffect(()=>{T(Mt(b,C))},[b,C]),l.useEffect(()=>{},[n]);const o=[{label:"Vehicle No:",value:m==null?void 0:m.registration_id},{label:"Model:",value:(U=m==null?void 0:m.vehicle_model)==null?void 0:U.name},{label:"IMEI No:",value:(w=(k=m==null?void 0:m.imei)==null?void 0:k[0])==null?void 0:w.mac_id},{label:"Chassis No:",value:m==null?void 0:m.chassis_no},{label:"Engine No:",value:m==null?void 0:m.engine_no}],G=[{label:"Equipment:",value:"N/A"},{label:"Avg Speed:",value:(n==null?void 0:n.averageSpeed)||"N/A"},{label:"Total Distance:",value:(n==null?void 0:n.totalDistance)||"N/A"},{label:"Avg trips/day:",value:(n==null?void 0:n.avgTrip)||"N/A"}];return t.jsxs(O,{sx:{position:"absolute",top:"570px",left:f?"280px":"450px",zIndex:1,background:R.bgShadow,p:2,borderRadius:2,color:"white",width:"58%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[t.jsxs(O,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[t.jsx(A,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),t.jsx(Ft,{sx:{cursor:"pointer",color:"black"},onClick:s})]}),c==="TripMonitor"&&t.jsxs(O,{sx:{display:"flex",justifyContent:"flex-start",gap:"10px",paddingBottom:"20px"},children:[t.jsxs(O,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px",width:"150px",display:"flex",justifyContent:"space-evenly",background:R.bgColor},children:[t.jsx(A,{children:"Speed"}),t.jsxs(A,{children:[S?h:0," KM/H"]})]}),t.jsxs(A,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px",background:R.bgColor},children:["Total-Distance ",u," KM"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:R.bgColor},children:[parseFloat(parseFloat(r).toFixed(2)*43560).toFixed()," Sqft"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:R.bgColor},children:[parseFloat(r).toFixed(2)*8," Kanal"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:R.bgColor},children:[parseFloat(parseFloat(r).toFixed(2)*8/5).toFixed(2)," Bigha"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:R.bgColor},children:[parseFloat(r).toFixed(2)," acre"]})]}),t.jsxs(O,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Te,{title:"Vehicle Details",details:o}),t.jsx(Te,{title:"Trip Details",details:G})]})]})}const Ot="/assets/endTrip-CEqIwvWS.png",Le="/assets/endTrip_-BsrUUtoJ.png",De="/assets/startTrip-CGKteKGr.png",Tt=(s,n)=>{const r=[];s.length>0&&s.forEach(c=>{let f={latitude:c.lat,longitude:c.lng},b=[];s.forEach(C=>{const m={latitude:C.lat,longitude:C.lng};if(m.latitude&&m.longitude&&m.latitude!==f.latitude&&m.longitude!==f.longitude){const T=Dt(c.lat,c.lng,C.lat,C.lng);T<20&&T>10&&b.push(C)}}),b.length>10&&r.push(c)});const S=s.filter(c=>c.lat!==void 0&&c.lng!==void 0).map(c=>({lat:parseFloat(c.lat),lng:parseFloat(c.lng)}));if(S.length>0){n(ft(r));try{const c=Lt(S),f=Rt(c),b=new window.google.maps.Polygon({paths:f});return zt(b,n)}catch(c){return console.error("Error calculating convex hull or area:",c),n(J(0)),0}}else return n(J(0)),0},Lt=s=>{const n=(c,f,b)=>{const C=(f.lat-c.lat)*(b.lng-f.lng)-(f.lng-c.lng)*(b.lat-f.lat);return C===0?0:C>0?1:2},h=s.reduce((c,f)=>f.lng<c.lng?f:c);let u=[],r=h,S;do{u.push(r),S=s[0]===r?s[1]:s[0];for(let c=0;c<s.length;c++)n(r,S,s[c])===2&&(S=s[c]);r=S}while(r!==h);return u};function Dt(s,n,h,u){const S=s*Math.PI/180,c=h*Math.PI/180,f=(h-s)*Math.PI/180,b=(u-n)*Math.PI/180,C=Math.sin(f/2)*Math.sin(f/2)+Math.cos(S)*Math.cos(c)*Math.sin(b/2)*Math.sin(b/2);return 6371e3*(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)))}const Rt=s=>{s.sort((u,r)=>u.lng-r.lng||u.lat-r.lat);const n=[],h=[];for(const u of s){for(;n.length>=2&&Re(n[n.length-2],n[n.length-1],u)<=0;)n.pop();n.push(u)}for(let u=s.length-1;u>=0;u--){const r=s[u];for(;h.length>=2&&Re(h[h.length-2],h[h.length-1],r)<=0;)h.pop();h.push(r)}return[...n.slice(0,-1),...h.slice(0,-1)]},zt=(s,n)=>{if(!window.google||!window.google.maps.geometry){console.log("not loaded");return}const u=window.google.maps.geometry.spherical.computeArea(s.getPath())/4046.86;return n(J(u)),u},Re=(s,n,h)=>(n.lat-s.lat)*(h.lng-s.lng)-(n.lng-s.lng)*(h.lat-s.lat),Nt=["drawing","geometry"],_t=({selectedTrip:s,center:n,showCard:h})=>{var Se,Ce,je,ye,ke,Pe,Ee,Fe,Ie,ve;const u=ze(),r=ut(),{isLoaded:S,loadError:c}=St({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:Nt}),{Acreage:f}=_(e=>e.tripMonitor),{selectedVehicle:b}=_(e=>e.liveMap),{singleTrip_Data:C,tripLoading:m,cords:T}=_(e=>e.tripMonitor),{selectedTripData:o,mode:G,styles:U,allTripList:k,activeIndex:w}=_(e=>e.dashboard),{collapsed:y}=_(e=>e.auth),[p,F]=l.useState(null),[j,E]=l.useState(null),q=l.useRef(null),[v,K]=l.useState(null),[L,I]=l.useState(null),[z,B]=l.useState([]);l.useState([]);const[D,N]=l.useState(!1),[Z,V]=l.useState(0),[M,Ne]=l.useState(!1),[ce,_e]=l.useState(0);l.useState([]),l.useState([]);const[Q,de]=l.useState(!1),[Be,Ve]=l.useState({}),[$,ge]=l.useState([]),[He,pe]=l.useState(null),[Ye,he]=l.useState(null),[We,Ge]=l.useState({}),[oe,ue]=l.useState({}),[ae,Ue]=l.useState([]),[xe,ne]=l.useState(0),[qe,se]=l.useState([]),[Ke,Bt]=l.useState(!1),[fe,Vt]=l.useState([]),[ee,Ht]=l.useState([]),[$e,Yt]=l.useState([]),[be,Wt]=l.useState(null);l.useEffect(()=>{(async()=>{if(b!=null&&b.imei){const a=bt(),i=a.startOf("day").format("MM/DD/YYYY HH:mm:ss"),g=a.endOf("day").format("MM/DD/YYYY HH:mm:ss"),x={imei:[b.imei],startDate:i,endDate:g};try{const P=await mt(x);Ve(P.data[0].data)}catch(P){console.error("Error fetching report:",P)}}})(),de(!1)},[b,u]),l.useEffect(()=>{v&&L&&v.fitBounds(L)},[v,L,o]);let Je=e=>{let a=wt(e);Ue(a),console.log("acerage trip start end position",a);let i={};a.map((g,x)=>{let P=e.slice(g.start,g.end+1);i[x]=P}),Ge(i)};l.useEffect(()=>{if(console.log("selectedTripData",o),ue({}),(o==null?void 0:o.length)>0){let e=o.map(i=>({lat:i.lat,lng:i.lng}));console.log("selected trip coordinate ",e);const a=Xe({selectedTripData:o});_e(a),Je(o)}},[o]);const Xe=({selectedTripData:e})=>{const a=e.reduce((i,g,x)=>{if(x===0)return i;const P=e[x-1],H=xt(P.lat,P.lng,g.lat,g.lng);return i+H},0);return a==null?void 0:a.toFixed(2)};l.useEffect(()=>{var e,a,i,g,x;if(o&&(o==null?void 0:o.length)>0){const P=new window.google.maps.LatLngBounds,H=new window.google.maps.LatLng(parseFloat((e=o[0])==null?void 0:e.lat),parseFloat((a=o[0])==null?void 0:a.lng)),dt=new window.google.maps.LatLng(parseFloat((i=o[(o==null?void 0:o.length)-1])==null?void 0:i.lat),parseFloat((g=o[(o==null?void 0:o.length)-1])==null?void 0:g.lng));P.extend(H),P.extend(dt),V((x=o[0])==null?void 0:x.speed),I(P)}else I(null);N(!1),Ze()},[o]),l.useEffect(()=>{if(w==="all"&&k.length>0){const e=new window.google.maps.LatLngBounds;k.forEach(a=>{a.data.forEach(i=>{i.lat&&i.lng&&e.extend(new window.google.maps.LatLng(i.lat,i.lng))})}),I(e)}},[w,k]);const Ze=()=>{if(o&&o.length>0){const e=(g,x)=>{const H=new Date(g.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return{Date:g.createdAt.substring(0,10),Time:H,value:g[x]}},i=["speed","mainInputVoltage","ignition"].map(g=>({label:g==="speed"?"Speed":g==="mainInputVoltage"?"MainInputVoltage":"Ignition",randomColor:Qe(),data:o.map(x=>e(x,g))}));B(i)}else B([])},Qe=()=>"#"+Math.floor(Math.random()*16777215).toString(16),et=()=>{var e;if(w==="all")k&&k.length>0?(N(!D),V(0),ne(0),se([])):W.error("No trips found");else if((o==null?void 0:o.length)>0)N(!D),V(0),ne(0),se([]);else return((e=Object.keys(o))==null?void 0:e.length)===0?W.error("Please Select Vehicle",{id:"vehicle"}):W.error("Please Select Trip",{id:"trip error"})},tt=()=>{w==="all"&&xe<k.length-1?ne(e=>e+1):N(!1)},ot=()=>{var e;if((o==null?void 0:o.length)>0)Ne(!M);else return((e=Object.keys(o))==null?void 0:e.length)===0?W.error("Please Select Vehicle",{id:"vehicle"}):W.error("Please Select Trip",{id:"trip error"})},me=()=>{Object.keys(b).length>0||Q?de(!Q):W.error("Please select any vehicle")};if(c)return"Error loading maps";if(!S)return"Loading maps";const at={width:"100%",height:h?"87vh":"93vh"},nt=e=>{if(e.type==="polygon"){const a=e.overlay;a.setEditable(!0);const i=new google.maps.InfoWindow({content:"Calculating...",position:te(a)});i.open(v),ge(x=>[...x,{polygon:a,infoWindow:i}]),pe(a),google.maps.event.clearListeners(a.getPath(),"set_at"),google.maps.event.clearListeners(a.getPath(),"insert_at"),google.maps.event.clearListeners(a.getPath(),"remove_at");const g=()=>{const x=we(a,i);i.setContent(`Area: ${x} acres`),i.setPosition(te(a))};google.maps.event.addListener(a.getPath(),"set_at",g),google.maps.event.addListener(a.getPath(),"insert_at",g),google.maps.event.addListener(a.getPath(),"remove_at",g),google.maps.event.addListener(a,"click",()=>{$.forEach(({infoWindow:x})=>x.close()),i.open(v),i.setPosition(te(a))}),g()}},we=(e=null,a=null)=>{let i=0;if(e){const x=e.getPath().getArray();i=google.maps.geometry.spherical.computeArea(x)/4046.86}else $.forEach(({polygon:x})=>{const P=x.getPath().getArray(),H=google.maps.geometry.spherical.computeArea(P);i+=H/4046.86});const g=i.toFixed(2);return he(g),u(J(g)),a&&(a.setContent(`Area: ${g} acres`),a.setPosition(te(e))),g},te=e=>{const a=e.getPath().getArray();let i=0,g=0;return a.forEach(x=>{i+=x.lat(),g+=x.lng()}),new google.maps.LatLng(i/a.length,g/a.length)},st=()=>{$.forEach(({polygon:e,infoWindow:a})=>{e.setMap(null),a.close()}),ge([]),he(0),pe(null),u(J(0))},lt=()=>{$.forEach(e=>e.setEditable(!0))},rt=()=>{$.forEach(e=>e.setEditable(!1))},it=()=>{He?we():alert("No shape is selected. Please draw or select a shape.")};let d=k&&k.length>0?[...k].reverse():[];const ct=r.pathname;return t.jsxs(t.Fragment,{children:[m&&t.jsx(O,{sx:{position:"absolute",top:"50vh",left:"50%",zIndex:"1000"},children:t.jsx(Pt,{})}),h&&t.jsx(It,{tripPlay:D,speed:Z,totalDistance:ce,Acreage:f,filterCoordinates:Tt,acreageTrips:We,handleTrip:et,showGraph:M,handleShowGraph:ot,setCalculatedAcreageTrips:ue}),t.jsx(O,{sx:{position:"absolute",top:"14%",left:y?"15%":"25%",zIndex:1,background:R.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:t.jsxs(X,{sx:{color:"white"},onClick:me,children:[Q?"Hide":"Show"," Vehicle Info",t.jsx(Et,{})]})}),Q===!0&&t.jsx(At,{handleVehicleInfo:me,vehicleReport:Be,tripPlay:D,speed:Z,totalDistance:ce,Acreage:f,whereToUse:"TripMonitor"}),t.jsxs(Ct,{ref:q,mapContainerStyle:at,zoom:10,center:n,onLoad:e=>K(e),options:{disableDoubleClickZoom:!0,styles:G?U:""},children:[t.jsx(jt,{onOverlayComplete:nt,options:{drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:["polygon"]}}}),Ke&&ee.length>0&&be&&t.jsx(ie,{path:[...ee,be],options:{strokeColor:"black",strokeOpacity:.8,strokeWeight:4,clickable:!1}}),ee.length>1&&t.jsx(le,{path:ee,options:{fillColor:"#00FF00",fillOpacity:.4,strokeColor:"#000",strokeWeight:2,clickable:!1,editable:!1}}),fe.map((e,a)=>t.jsx(le,{path:e,options:{fillColor:"#FF0000",fillOpacity:.4,strokeColor:"#000",strokeWeight:2,clickable:!1,editable:!1}},a)),fe.length>0&&$e.map((e,a)=>t.jsx(re,{position:e.position,children:t.jsxs("div",{children:[t.jsx("strong",{children:"Area:"})," ",e.area.toFixed(2)," acres"]})},a)),t.jsxs("div",{style:{position:"absolute",bottom:30,left:20,background:"white",padding:"10px",borderRadius:"8px",boxShadow:"0 0 6px rgba(0,0,0,0.2)",zIndex:100,width:"auto"},children:[t.jsxs("p",{children:["Area: ",Ye||0," acres"]}),$.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:lt,style:{marginTop:"10px",marginRight:"10px"},children:"Enable Editing"}),t.jsx("button",{onClick:rt,style:{marginTop:"10px",marginRight:"10px"},children:"Disable Editing"}),t.jsx("button",{onClick:it,style:{marginTop:"10px",marginRight:"10px"},children:"Calculate Area"}),t.jsx("button",{onClick:st,style:{marginTop:"10px"},children:"Clear All Shapes"})]})]}),ae&&ae.length>0&&ae.map(e=>{var a,i,g,x;return t.jsxs(t.Fragment,{children:[t.jsx(Y,{onClick:()=>E((e==null?void 0:e.startCoordinates)||null),position:{lat:parseFloat((a=e==null?void 0:e.startCoordinates)==null?void 0:a.lat),lng:parseFloat((i=e==null?void 0:e.startCoordinates)==null?void 0:i.lng)},animation:"BOUNCE",icon:{url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",scaledSize:new google.maps.Size(40,40)}}),t.jsx(Y,{onClick:()=>{console.log("item",e==null?void 0:e.endCoordinates),E((e==null?void 0:e.endCoordinates)||null)},position:{lat:parseFloat((g=e.endCoordinates)==null?void 0:g.lat),lng:parseFloat((x=e.endCoordinates)==null?void 0:x.lng)},animation:"BOUNCE",icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(40,40)}})]})}),Object.keys(oe).length>0&&Object.keys(oe).map((e,a)=>t.jsx(le,{paths:oe[e],options:{fillColor:"#00FF00",fillOpacity:.5,strokeColor:"#000",strokeOpacity:0,strokeWeight:2}},a)),w==="all"&&d&&d.length>0&&t.jsx(Y,{onClick:()=>F(d[0].data[0]),position:{lat:parseFloat((Se=d[0].data[0])==null?void 0:Se.lat)+1e-6,lng:parseFloat((Ce=d[0].data[0])==null?void 0:Ce.lng)+1e-6},animation:"BOUNCE",icon:{url:De,scaledSize:new google.maps.Size(60,60)}}),w==="all"&&d&&d.length>0&&t.jsx(Y,{onClick:()=>F(d[(d==null?void 0:d.length)-1].data[d[(d==null?void 0:d.length)-1].data.length-1]),position:{lat:parseFloat(((je=d[(d==null?void 0:d.length)-1].data[d[(d==null?void 0:d.length)-1].data.length-1])==null?void 0:je.lat)+1e-6),lng:parseFloat(((ye=d[(d==null?void 0:d.length)-1].data[d[(d==null?void 0:d.length)-1].data.length-1])==null?void 0:ye.lng)+1e-6)},animation:"BOUNCE",icon:{url:Le,scaledSize:new google.maps.Size(60,60)}}),o&&(o==null?void 0:o.length)>0&&t.jsx(Y,{onClick:()=>F(o[0]),position:{lat:parseFloat((ke=o[0])==null?void 0:ke.lat)+1e-6,lng:parseFloat((Pe=o[0])==null?void 0:Pe.lng)+1e-6},animation:"BOUNCE",icon:{url:De,scaledSize:new google.maps.Size(60,60)}}),o&&(o==null?void 0:o.length)>0&&t.jsx(Y,{onClick:()=>F(o[(o==null?void 0:o.length)-1]),position:{lat:parseFloat(((Ee=o[(o==null?void 0:o.length)-1])==null?void 0:Ee.lat)+1e-5),lng:parseFloat(((Fe=o[(o==null?void 0:o.length)-1])==null?void 0:Fe.lng)+1e-6)},animation:"BOUNCE",icon:{url:Le,scaledSize:new google.maps.Size(60,60)}}),w==="all"&&d&&d.length>0&&d.map((e,a)=>{var i,g;return t.jsx(Y,{position:{lat:parseFloat((i=e==null?void 0:e.data[(e==null?void 0:e.data.length)-1])==null?void 0:i.lat),lng:parseFloat((g=e==null?void 0:e.data[(e==null?void 0:e.data.length)-1])==null?void 0:g.lng)},onClick:()=>F(e==null?void 0:e.data[(e==null?void 0:e.data.length)-1]),label:{text:(a+1).toString(),color:"white",fontWeight:"bold",fontSize:"14px"},animation:"BOUNCE",icon:{url:Ot,scaledSize:new google.maps.Size(40,40)}},a)}),p&&t.jsx(re,{position:{lat:parseFloat(p==null?void 0:p.lat),lng:parseFloat(p==null?void 0:p.lng)},onCloseClick:()=>F(null),children:t.jsxs("div",{children:["Date-time:",p!=null&&p.Date?Me(new Date(p==null?void 0:p.Date)).format("DD-MM-YYYY HH:mm"):""]})}),j&&t.jsx(re,{position:{lat:parseFloat(j==null?void 0:j.lat),lng:parseFloat(j==null?void 0:j.lng)},onCloseClick:()=>E(null),children:t.jsxs("div",{children:["Date-time:",j!=null&&j.Date?Me(new Date(j==null?void 0:j.Date)).format("DD-MM-YYYY HH:mm"):""]})}),o&&o.length>0&&t.jsx(Oe,{trip:o,tripPlay:D,setSpeed:V,onTripEnd:()=>N(!1)}),w==="all"&&d&&d.length>0&&d.map((e,a)=>t.jsx(Oe,{trip:e==null?void 0:e.data,tripPlay:a===xe?D:!1,setSpeed:V,onTripEnd:tt,globalMarkerPath:qe,setGlobalMarkerPath:se},e==null?void 0:e.id)),t.jsx("div",{style:{position:"relative",top:200,left:12,color:"green"},children:((ve=(Ie=z[0])==null?void 0:Ie.data)==null?void 0:ve.length)>0&&M&&t.jsx(kt,{item:z})})]},ct)]})},Zt=_t;export{Zt as T,Tt as f};
