import{_ as Se,r as Lt,m as $t,a as Y,u as Ft,b as Nt,c as Mt,j as s,g as ht,d as gt,s as De,e as b,f as mt,h as Le,i as yt,k as Vt,l as Bt,R as k,n as xt,o as de,p as zt,B as P,I as Kt,q as Wt,t as Gt,v as $e,w as K,x as Yt,y as Xe,T as Q,F as Ht,z as vt,A as Ut,C as ue,D as bt,E as Pe,G as Ke,H as wt,J as Zt,K as qt,L as Xt,M as ye,N as Be,O as Jt,P as Qt,Q as en,S as tn,U as nn,V as Je,W as rn,X as on,Y as Ae,Z as an,$ as sn,a0 as ln,a1 as cn,a2 as un,a3 as pn,a4 as fn,a5 as dn,a6 as hn,a7 as gn,a8 as mn,a9 as yn,aa as xn}from"./index-D-4drXyu.js";import{u as vn,G as bn,M as wn}from"./esm-52iJuOhA.js";import{f as An}from"./TripMap-D_-FKQTT.js";import{S as Sn}from"./Switch-fsgsERfN.js";import{f as B,_ as At,a as St,b as jn,c as kn,T as Ue,p as ee,L as Z,d as Ze,e as jt,D as On,G as Pn,u as _n,C as Tn,i as xe,g as pe,S as Cn,A as Rn,h as In,j as Qe,k as he,l as En,m as Dn,n as kt,o as Ln,q as Oe,w as et,r as _e,s as $n,t as Fn,R as Ot,B as Nn,v as Mn,X as Vn,Y as Bn,x as Pt,y as zn}from"./BarChart-DqPD6pj3.js";import"./redTractor-NXgVJyvR.js";import"./Info-DZqR3y8W.js";const Kn=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Wn=["component","slots","slotProps"],Gn=["component"];function Yn(e,t){const{className:o,elementType:n,ownerState:r,externalForwardedProps:i,getSlotOwnerState:a,internalForwardedProps:c}=t,p=Se(t,Kn),{component:l,slots:g={[e]:void 0},slotProps:v={[e]:void 0}}=i,x=Se(i,Wn),O=g[e]||n,y=Lt(v[e],r),u=$t(Y({className:o},p,{externalForwardedProps:e==="root"?x:void 0,externalSlotProps:y})),{props:{component:A},internalRef:S}=u,_=Se(u.props,Gn),T=Ft(S,y==null?void 0:y.ref,t.ref),L=a?a(_):{},I=Y({},r,L),N=e==="root"?A||l:A,M=Nt(O,Y({},e==="root"&&!l&&!g[e]&&c,e!=="root"&&!g[e]&&c,_,N&&{as:N},{ref:T}),I);return Object.keys(L).forEach(R=>{delete M[R]}),[O,M]}const Hn=Mt(s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Un(e){return ht("MuiAvatar",e)}gt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Zn=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],qn=e=>{const{classes:t,variant:o,colorDefault:n}=e;return yt({root:["root",o,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Un,t)},Xn=De("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],o.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:Y({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:Y({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Jn=De("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Qn=De(Hn,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function er({crossOrigin:e,referrerPolicy:t,src:o,srcSet:n}){const[r,i]=b.useState(!1);return b.useEffect(()=>{if(!o&&!n)return;i(!1);let a=!0;const c=new Image;return c.onload=()=>{a&&i("loaded")},c.onerror=()=>{a&&i("error")},c.crossOrigin=e,c.referrerPolicy=t,c.src=o,n&&(c.srcset=n),()=>{a=!1}},[e,t,o,n]),r}const tr=b.forwardRef(function(t,o){const n=mt({props:t,name:"MuiAvatar"}),{alt:r,children:i,className:a,component:c="div",slots:p={},slotProps:l={},imgProps:g,sizes:v,src:x,srcSet:O,variant:y="circular"}=n,u=Se(n,Zn);let A=null;const S=er(Y({},g,{src:x,srcSet:O})),_=x||O,T=_&&S!=="error",L=Y({},n,{colorDefault:!T,component:c,variant:y}),I=qn(L),[N,M]=Yn("img",{className:I.img,elementType:Jn,externalForwardedProps:{slots:p,slotProps:{img:Y({},g,l.img)}},additionalProps:{alt:r,src:x,srcSet:O,sizes:v},ownerState:L});return T?A=s.jsx(N,Y({},M)):i||i===0?A=i:_&&r?A=r[0]:A=s.jsx(Qn,{ownerState:L,className:I.fallback}),s.jsx(Xn,Y({as:c,ownerState:L,className:Le(I.root,a),ref:o},u,{children:A}))}),_t=tr;function nr(e){return ht("MuiFormGroup",e)}gt("MuiFormGroup",["root","row","error"]);const rr=["className","row"],or=e=>{const{classes:t,row:o,error:n}=e;return yt({root:["root",o&&"row",n&&"error"]},nr,t)},ir=De("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.row&&t.row]}})(({ownerState:e})=>Y({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),ar=b.forwardRef(function(t,o){const n=mt({props:t,name:"MuiFormGroup"}),{className:r,row:i=!1}=n,a=Se(n,rr),c=Vt(),p=Bt({props:n,muiFormControl:c,states:["error"]}),l=Y({},n,{row:i,error:p.error}),g=or(l);return s.jsx(ir,Y({className:Le(g.root,r),ownerState:l,ref:o},a))}),sr=ar;var lr=["points","className","baseLinePoints","connectNulls"];function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},ge.apply(this,arguments)}function cr(e,t){if(e==null)return{};var o=ur(e,t),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ur(e,t){if(e==null)return{};var o={},n=Object.keys(e),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}function tt(e){return hr(e)||dr(e)||fr(e)||pr()}function pr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fr(e,t){if(e){if(typeof e=="string")return We(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return We(e,t)}}function dr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hr(e){if(Array.isArray(e))return We(e)}function We(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var nt=function(t){return t&&t.x===+t.x&&t.y===+t.y},gr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=[[]];return t.forEach(function(n){nt(n)?o[o.length-1].push(n):o[o.length-1].length>0&&o.push([])}),nt(t[0])&&o[o.length-1].push(t[0]),o[o.length-1].length<=0&&(o=o.slice(0,-1)),o},je=function(t,o){var n=gr(t);o&&(n=[n.reduce(function(i,a){return[].concat(tt(i),tt(a))},[])]);var r=n.map(function(i){return i.reduce(function(a,c,p){return"".concat(a).concat(p===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(r,"Z"):r},mr=function(t,o,n){var r=je(t,n);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(je(o.reverse(),n).slice(1))},yr=function(t){var o=t.points,n=t.className,r=t.baseLinePoints,i=t.connectNulls,a=cr(t,lr);if(!o||!o.length)return null;var c=Le("recharts-polygon",n);if(r&&r.length){var p=a.stroke&&a.stroke!=="none",l=mr(o,r,i);return k.createElement("g",{className:c},k.createElement("path",ge({},B(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),p?k.createElement("path",ge({},B(a,!0),{fill:"none",d:je(o,i)})):null,p?k.createElement("path",ge({},B(a,!0),{fill:"none",d:je(r,i)})):null)}var g=je(o,i);return k.createElement("path",ge({},B(a,!0),{fill:g.slice(-1)==="Z"?a.fill:"none",className:c,d:g}))},xr=At,vr=jn,br=St;function wr(e,t){return e&&e.length?xr(e,br(t),vr):void 0}var Ar=wr;const Sr=xt(Ar);var jr=At,kr=St,Or=kn;function Pr(e,t){return e&&e.length?jr(e,kr(t),Or):void 0}var _r=Pr;const Tr=xt(_r);var Cr=["cx","cy","angle","ticks","axisLine"],Rr=["ticks","tick","angle","tickFormatter","stroke"];function ve(e){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(e)}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},ke.apply(this,arguments)}function rt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),o.push.apply(o,n)}return o}function ae(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?rt(Object(o),!0).forEach(function(n){Fe(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):rt(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function ot(e,t){if(e==null)return{};var o=Ir(e,t),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ir(e,t){if(e==null)return{};var o={},n=Object.keys(e),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ct(n.key),n)}}function Dr(e,t,o){return t&&it(e.prototype,t),o&&it(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lr(e,t,o){return t=Re(t),$r(e,Tt()?Reflect.construct(t,o||[],Re(e).constructor):t.apply(e,o))}function $r(e,t){if(t&&(ve(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fr(e)}function Fr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Re(e)}function Nr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ge(e,t)}function Fe(e,t,o){return t=Ct(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ct(e){var t=Mr(e,"string");return ve(t)=="symbol"?t:String(t)}function Mr(e,t){if(ve(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var n=o.call(e,t||"default");if(ve(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ne=function(e){Nr(t,e);function t(){return Er(this,t),Lr(this,t,arguments)}return Dr(t,[{key:"getTickValueCoord",value:function(n){var r=n.coordinate,i=this.props,a=i.angle,c=i.cx,p=i.cy;return ee(c,p,r,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,r;switch(n){case"left":r="end";break;case"right":r="start";break;default:r="middle";break}return r}},{key:"getViewBox",value:function(){var n=this.props,r=n.cx,i=n.cy,a=n.angle,c=n.ticks,p=Sr(c,function(g){return g.coordinate||0}),l=Tr(c,function(g){return g.coordinate||0});return{cx:r,cy:i,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:p.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.cx,i=n.cy,a=n.angle,c=n.ticks,p=n.axisLine,l=ot(n,Cr),g=c.reduce(function(y,u){return[Math.min(y[0],u.coordinate),Math.max(y[1],u.coordinate)]},[1/0,-1/0]),v=ee(r,i,g[0],a),x=ee(r,i,g[1],a),O=ae(ae(ae({},B(l,!1)),{},{fill:"none"},B(p,!1)),{},{x1:v.x,y1:v.y,x2:x.x,y2:x.y});return k.createElement("line",ke({className:"recharts-polar-radius-axis-line"},O))}},{key:"renderTicks",value:function(){var n=this,r=this.props,i=r.ticks,a=r.tick,c=r.angle,p=r.tickFormatter,l=r.stroke,g=ot(r,Rr),v=this.getTickTextAnchor(),x=B(g,!1),O=B(a,!1),y=i.map(function(u,A){var S=n.getTickValueCoord(u),_=ae(ae(ae(ae({textAnchor:v,transform:"rotate(".concat(90-c,", ").concat(S.x,", ").concat(S.y,")")},x),{},{stroke:"none",fill:l},O),{},{index:A},S),{},{payload:u});return k.createElement(Z,ke({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(u.coordinate)},Ze(n.props,u,A)),t.renderTickItem(a,_,p?p(u.value,A):u.value))});return k.createElement(Z,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,r=n.ticks,i=n.axisLine,a=n.tick;return!r||!r.length?null:k.createElement(Z,{className:"recharts-polar-radius-axis"},i&&this.renderAxisLine(),a&&this.renderTicks(),jt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,r,i){var a;return k.isValidElement(n)?a=k.cloneElement(n,r):de(n)?a=n(r):a=k.createElement(Ue,ke({},r,{className:"recharts-polar-radius-axis-tick-value"}),i),a}}]),t}(b.PureComponent);Fe(Ne,"displayName","PolarRadiusAxis");Fe(Ne,"axisType","radiusAxis");Fe(Ne,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},le.apply(this,arguments)}function at(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),o.push.apply(o,n)}return o}function se(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?at(Object(o),!0).forEach(function(n){Me(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):at(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,It(n.key),n)}}function Br(e,t,o){return t&&st(e.prototype,t),o&&st(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function zr(e,t,o){return t=Ie(t),Kr(e,Rt()?Reflect.construct(t,o||[],Ie(e).constructor):t.apply(e,o))}function Kr(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wr(e)}function Wr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rt=function(){return!!e})()}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Ie(e)}function Gr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ye(e,t)}function Me(e,t,o){return t=It(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function It(e){var t=Yr(e,"string");return be(t)=="symbol"?t:String(t)}function Yr(e,t){if(be(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var n=o.call(e,t||"default");if(be(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hr=Math.PI/180,lt=1e-5,Ve=function(e){Gr(t,e);function t(){return Vr(this,t),zr(this,t,arguments)}return Br(t,[{key:"getTickLineCoord",value:function(n){var r=this.props,i=r.cx,a=r.cy,c=r.radius,p=r.orientation,l=r.tickSize,g=l||8,v=ee(i,a,c,n.coordinate),x=ee(i,a,c+(p==="inner"?-1:1)*g,n.coordinate);return{x1:v.x,y1:v.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var r=this.props.orientation,i=Math.cos(-n.coordinate*Hr),a;return i>lt?a=r==="outer"?"start":"end":i<-lt?a=r==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.cx,i=n.cy,a=n.radius,c=n.axisLine,p=n.axisLineType,l=se(se({},B(this.props,!1)),{},{fill:"none"},B(c,!1));if(p==="circle")return k.createElement(On,le({className:"recharts-polar-angle-axis-line"},l,{cx:r,cy:i,r:a}));var g=this.props.ticks,v=g.map(function(x){return ee(r,i,a,x.coordinate)});return k.createElement(yr,le({className:"recharts-polar-angle-axis-line"},l,{points:v}))}},{key:"renderTicks",value:function(){var n=this,r=this.props,i=r.ticks,a=r.tick,c=r.tickLine,p=r.tickFormatter,l=r.stroke,g=B(this.props,!1),v=B(a,!1),x=se(se({},g),{},{fill:"none"},B(c,!1)),O=i.map(function(y,u){var A=n.getTickLineCoord(y),S=n.getTickTextAnchor(y),_=se(se(se({textAnchor:S},g),{},{stroke:"none",fill:l},v),{},{index:u,payload:y,x:A.x2,y:A.y2});return k.createElement(Z,le({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(y.coordinate)},Ze(n.props,y,u)),c&&k.createElement("line",le({className:"recharts-polar-angle-axis-tick-line"},x,A)),a&&t.renderTickItem(a,_,p?p(y.value,u):y.value))});return k.createElement(Z,{className:"recharts-polar-angle-axis-ticks"},O)}},{key:"render",value:function(){var n=this.props,r=n.ticks,i=n.radius,a=n.axisLine;return i<=0||!r||!r.length?null:k.createElement(Z,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,r,i){var a;return k.isValidElement(n)?a=k.cloneElement(n,r):de(n)?a=n(r):a=k.createElement(Ue,le({},r,{className:"recharts-polar-angle-axis-tick-value"}),i),a}}]),t}(b.PureComponent);Me(Ve,"displayName","PolarAngleAxis");Me(Ve,"axisType","angleAxis");Me(Ve,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Te;function we(e){"@babel/helpers - typeof";return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(e)}function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},me.apply(this,arguments)}function ct(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),o.push.apply(o,n)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?ct(Object(o),!0).forEach(function(n){H(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ct(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function Ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dt(n.key),n)}}function Zr(e,t,o){return t&&ut(e.prototype,t),o&&ut(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function qr(e,t,o){return t=Ee(t),Xr(e,Et()?Reflect.construct(t,o||[],Ee(e).constructor):t.apply(e,o))}function Xr(e,t){if(t&&(we(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}function Et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Et=function(){return!!e})()}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Ee(e)}function fe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},He(e,t)}function H(e,t,o){return t=Dt(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Dt(e){var t=Qr(e,"string");return we(t)=="symbol"?t:String(t)}function Qr(e,t){if(we(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var n=o.call(e,t||"default");if(we(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var te=function(e){Jr(t,e);function t(o){var n;return Ur(this,t),n=qr(this,t,[o]),H(fe(n),"pieRef",null),H(fe(n),"sectorRefs",[]),H(fe(n),"id",_n("recharts-pie-")),H(fe(n),"handleAnimationEnd",function(){var r=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),de(r)&&r()}),H(fe(n),"handleAnimationStart",function(){var r=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),de(r)&&r()}),n.state={isAnimationFinished:!o.isAnimationActive,prevIsAnimationActive:o.isAnimationActive,prevAnimationId:o.animationId,sectorToFocus:0},n}return Zr(t,[{key:"isActiveIndex",value:function(n){var r=this.props.activeIndex;return Array.isArray(r)?r.indexOf(n)!==-1:n===r}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.label,c=i.labelLine,p=i.dataKey,l=i.valueKey,g=B(this.props,!1),v=B(a,!1),x=B(c,!1),O=a&&a.offsetRadius||20,y=n.map(function(u,A){var S=(u.startAngle+u.endAngle)/2,_=ee(u.cx,u.cy,u.outerRadius+O,S),T=E(E(E(E({},g),u),{},{stroke:"none"},v),{},{index:A,textAnchor:t.getTextAnchor(_.x,u.cx)},_),L=E(E(E(E({},g),u),{},{fill:"none",stroke:u.fill},x),{},{index:A,points:[ee(u.cx,u.cy,u.outerRadius,S),_],key:"line"}),I=p;return xe(p)&&xe(l)?I="value":xe(p)&&(I=l),k.createElement(Z,{key:"label-".concat(u.startAngle,"-").concat(u.endAngle,"-").concat(u.midAngle,"-").concat(A)},c&&t.renderLabelLineItem(c,L),t.renderLabelItem(a,T,pe(u,I)))});return k.createElement(Z,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var r=this,i=this.props,a=i.activeShape,c=i.blendStroke,p=i.inactiveShape;return n.map(function(l,g){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var v=r.isActiveIndex(g),x=p&&r.hasActiveIndex()?p:null,O=v?a:x,y=E(E({},l),{},{stroke:c?l.fill:l.stroke,tabIndex:-1});return k.createElement(Z,me({ref:function(A){A&&!r.sectorRefs.includes(A)&&r.sectorRefs.push(A)},tabIndex:-1,className:"recharts-pie-sector"},Ze(r.props,l,g),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(g)}),k.createElement(Cn,me({option:O,isActive:v,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,r=this.props,i=r.sectors,a=r.isAnimationActive,c=r.animationBegin,p=r.animationDuration,l=r.animationEasing,g=r.animationId,v=this.state,x=v.prevSectors,O=v.prevIsAnimationActive;return k.createElement(Rn,{begin:c,duration:p,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(g,"-").concat(O),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var u=y.t,A=[],S=i&&i[0],_=S.startAngle;return i.forEach(function(T,L){var I=x&&x[L],N=L>0?In(T,"paddingAngle",0):0;if(I){var M=Qe(I.endAngle-I.startAngle,T.endAngle-T.startAngle),R=E(E({},T),{},{startAngle:_+N,endAngle:_+M(u)+N});A.push(R),_=R.endAngle}else{var G=T.endAngle,V=T.startAngle,q=Qe(0,G-V),X=q(u),W=E(E({},T),{},{startAngle:_+N,endAngle:_+X+N});A.push(W),_=W.endAngle}}),k.createElement(Z,null,n.renderSectorsStatically(A))})}},{key:"attachKeyboardHandlers",value:function(n){var r=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var a=++r.state.sectorToFocus%r.sectorRefs.length;r.sectorRefs[a].focus(),r.setState({sectorToFocus:a});break}case"ArrowRight":{var c=--r.state.sectorToFocus<0?r.sectorRefs.length-1:r.state.sectorToFocus%r.sectorRefs.length;r.sectorRefs[c].focus(),r.setState({sectorToFocus:c});break}case"Escape":{r.sectorRefs[r.state.sectorToFocus].blur(),r.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,r=n.sectors,i=n.isAnimationActive,a=this.state.prevSectors;return i&&r&&r.length&&(!a||!zt(a,r))?this.renderSectorsWithAnimation():this.renderSectorsStatically(r)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,r=this.props,i=r.hide,a=r.sectors,c=r.className,p=r.label,l=r.cx,g=r.cy,v=r.innerRadius,x=r.outerRadius,O=r.isAnimationActive,y=this.state.isAnimationFinished;if(i||!a||!a.length||!he(l)||!he(g)||!he(v)||!he(x))return null;var u=Le("recharts-pie",c);return k.createElement(Z,{tabIndex:this.props.rootTabIndex,className:u,ref:function(S){n.pieRef=S}},this.renderSectors(),p&&this.renderLabels(a),jt.renderCallByParent(this.props,null,!1),(!O||y)&&En.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return r.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:r.curSectors,isAnimationFinished:!0}:n.sectors!==r.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,r){return n>r?"start":n<r?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,r){return k.isValidElement(n)?k.cloneElement(n,r):de(n)?n(r):k.createElement(Tn,me({},r,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,r,i){if(k.isValidElement(n))return k.cloneElement(n,r);var a=i;return de(n)&&(a=n(r),k.isValidElement(a))?a:k.createElement(Ue,me({},r,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(b.PureComponent);Te=te;H(te,"displayName","Pie");H(te,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Pn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});H(te,"parseDeltaAngle",function(e,t){var o=_e(t-e),n=Math.min(Math.abs(t-e),360);return o*n});H(te,"getRealPieData",function(e){var t=e.props,o=t.data,n=t.children,r=B(e.props,!1),i=Dn(n,kt);return o&&o.length?o.map(function(a,c){return E(E(E({payload:a},r),a),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(a){return E(E({},r),a.props)}):[]});H(te,"parseCoordinateOfPie",function(e,t){var o=t.top,n=t.left,r=t.width,i=t.height,a=Ln(r,i),c=n+Oe(e.props.cx,r,r/2),p=o+Oe(e.props.cy,i,i/2),l=Oe(e.props.innerRadius,a,0),g=Oe(e.props.outerRadius,a,a*.8),v=e.props.maxRadius||Math.sqrt(r*r+i*i)/2;return{cx:c,cy:p,innerRadius:l,outerRadius:g,maxRadius:v}});H(te,"getComposedData",function(e){var t=e.item,o=e.offset,n=Te.getRealPieData(t);if(!n||!n.length)return null;var r=t.props,i=r.cornerRadius,a=r.startAngle,c=r.endAngle,p=r.paddingAngle,l=r.dataKey,g=r.nameKey,v=r.valueKey,x=r.tooltipType,O=Math.abs(t.props.minAngle),y=Te.parseCoordinateOfPie(t,o),u=Te.parseDeltaAngle(a,c),A=Math.abs(u),S=l;xe(l)&&xe(v)?(et(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):xe(l)&&(et(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=v);var _=n.filter(function(R){return pe(R,S,0)!==0}).length,T=(A>=360?_:_-1)*p,L=A-_*O-T,I=n.reduce(function(R,G){var V=pe(G,S,0);return R+(he(V)?V:0)},0),N;if(I>0){var M;N=n.map(function(R,G){var V=pe(R,S,0),q=pe(R,g,G),X=(he(V)?V:0)/I,W;G?W=M.endAngle+_e(u)*p*(V!==0?1:0):W=a;var ne=W+_e(u)*((V!==0?O:0)+X*L),re=(W+ne)/2,C=(y.innerRadius+y.outerRadius)/2,D=[{name:q,value:V,payload:R,dataKey:S,type:x}],f=ee(y.cx,y.cy,C,re);return M=E(E(E({percent:X,cornerRadius:i,name:q,tooltipPayload:D,midAngle:re,middleRadius:C,tooltipPosition:f},R),y),{},{value:pe(R,S),startAngle:W,endAngle:ne,payload:R,paddingAngle:_e(u)*p}),M})}return E(E({},y),{},{sectors:N,data:n})});var eo=$n({chartName:"PieChart",GraphicalChild:te,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ve},{axisType:"radiusAxis",AxisComp:Ne}],formatAxisMap:Fn,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const to=({data:e})=>s.jsx(Ot,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:s.jsxs(Nn,{data:e,children:[s.jsx(Mn,{strokeDasharray:"3 3"}),s.jsx(Vn,{dataKey:"name"}),s.jsx(Bn,{}),s.jsx(Pt,{}),s.jsx(zn,{dataKey:"value",fill:"#82ca9d"})]})});function no({searchQuery:e,setSearchQuery:t,map:o}){const n=async r=>{if(r.preventDefault(),e.trim()==="")return;const i={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(o).findPlaceFromQuery(i,(c,p)=>{if(p===window.google.maps.places.PlacesServiceStatus.OK&&c){const l=c[0];o.setCenter(l.geometry.location),o.setZoom(14)}})};return s.jsxs(P,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[s.jsx(Kt,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:r=>t(r.target.value)}),s.jsx(Wt,{type:"submit",sx:{p:1},children:s.jsx(Gt,{})})]})}const ro=({setLoading:e})=>{const t=$e(),{center:o,selectedParameterList:n,selectedVehicle:r,vehicleList:i,tractorIcon:a,icons:c,locationData:p,ivnPid:l,placesData:g}=K(C=>C.liveMap),{mode:v,AreaCoveredTrips:x}=K(C=>C.dashboard),{isLoaded:O,loadError:y}=vn({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[u,A]=b.useState(null),[S,_]=b.useState(!0),[T,L]=b.useState(5),[I,N]=b.useState(),[M,R]=b.useState(""),G=b.useRef(null),V=vt(v),q=b.useCallback(C=>{G.current=C},[]),X=Yt(C=>{if(!C||C.length===0)return;const D=10;let f=0;const m=d=>{C.slice(d,d+D).forEach(F=>{var w;((w=F==null?void 0:F.data)==null?void 0:w.length)>0&&(f+=An(F==null?void 0:F.data,t))}),d+D<C.length?setTimeout(()=>m(d+D),0):(console.log("calculated acreage: ",f),t(Xe(f.toFixed(2))),e(!1))};m(0)},300);b.useEffect(()=>(x&&x.length>0?(e(!0),X(x)):(e(!1),t(Xe(0))),()=>{X.cancel(),e(!1)}),[x,t]),b.useEffect(()=>{if(S)N(p);else{let C=p==null?void 0:p.filter(D=>(D==null?void 0:D._id)===(r==null?void 0:r.imei));N(C)}},[p,r,S]);const W=()=>{if(!S)t(Ut({lat:21,lng:78})),L(4),_(D=>!D);else{const C=p.find(D=>D.latestDocument.imei===r.imei);C?(console.log(C.latestDocument,"getCenter"),C.latestDocument,_(D=>!D)):ue.error("Data is not available for selected vehicle")}};if(b.useEffect(()=>{O&&A(window.google.maps)},[O,p]),y)return"Error loading maps";if(!O)return"Loading maps";const ne={height:"100vh",borderRadius:"8px"},re=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return u?s.jsxs("div",{children:[s.jsxs(P,{style:{fontSize:"20px",color:V.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[s.jsx(Q,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),s.jsxs(P,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(no,{searchQuery:M,setSearchQuery:R,map:G.current}),s.jsx(sr,{sx:{marginLeft:0,paddingTop:0,color:V.grey[400]},children:s.jsx(Ht,{control:s.jsx(Sn,{checked:S,onChange:W}),label:S?"Group":"Individual"})})]})]}),s.jsx(bn,{mapContainerStyle:ne,zoom:T,center:o,onLoad:q,options:{mapTypeControl:!1,styles:v?re:""},children:I&&I.length>0&&I.map((C,D)=>s.jsx(wn,{position:{lat:C.latestDocument.lat,lng:C.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},D))})]}):null};function oo(){const{vehicles_details:e}=K(n=>n.dashboard),[t,o]=b.useState([]);return b.useEffect(()=>{const n=e.reduce((i,a)=>{const c=a.sell_date?bt(a.sell_date):null,p=c&&c.isValid()?c.format("MMM YYYY"):"N/A";return i[p]=(i[p]||0)+1,i},{}),r=Object.keys(n).map(i=>({name:i,value:n[i]}));o(r)},[e]),s.jsxs(P,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[s.jsx(Pe,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),s.jsxs(P,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[s.jsx(P,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:s.jsx(Pe,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),s.jsx(to,{data:t})]}),s.jsx(Pe,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const pt=Math.PI/180,io=({cx:e,cy:t,midAngle:o,innerRadius:n,outerRadius:r,percent:i,index:a})=>{const c=n+(r-n)*.5,p=e+c*Math.cos(-o*pt),l=t+c*Math.sin(-o*pt);return s.jsx("text",{x:p,y:l,fill:"white",textAnchor:p>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(i*100).toFixed(0)}%`})},ao=({data:e,COLORS:t})=>{b.useEffect(()=>{},[e]);const o=e.every(n=>n.value===0);return s.jsx(P,{sx:{width:"100%",height:"100%"},children:o?s.jsx(P,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:s.jsx(Q,{sx:{textAlign:"center"},children:"No data available to display."})}):s.jsx(Ot,{width:"100%",height:"100%",children:s.jsxs(eo,{children:[s.jsx(te,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:io,fill:"#8884d8",dataKey:"value",children:e.map((n,r)=>s.jsx(kt,{fill:t[r%t.length],fontSize:"18px"},`cell-${r}`))}),s.jsx(Pt,{})]})})})},Ce=({title:e})=>s.jsx(Q,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),ze=({label:e,count:t,color:o,type:n,title:r})=>{let i=$e(),{vehicleZone:a}=K(l=>l.dashboard),c=wt();const p=(l,g)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",g),i(qt(g)),i(Xt(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",g),g){case"Open":i(ye("Open"));break;case"Overdue":i(ye("overdue"));break;case"Closed":i(ye("Close"));break}c("/breakdown")}};return s.jsxs(P,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[s.jsxs(P,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(P,{sx:{width:"12px",height:"12px",bgcolor:o,borderRadius:"50%",marginRight:"8px"}}),s.jsx(Zt,{sx:{color:"black",bgcolor:r==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{p(r,e)},children:e})]}),s.jsx(P,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?s.jsx(Q,{color:o,children:t}):s.jsx(_t,{sx:{bgcolor:o,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},so=({data:e,colors:t})=>{const{loading:o,isDriverBehaviorLoading:n}=K(r=>r.dashboard);return s.jsxs(P,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[s.jsxs(P,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[s.jsx(Q,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),s.jsx(P,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((r,i)=>s.jsxs(P,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[s.jsx(Q,{fontSize:{xs:"12px",md:"15px"},children:r.name.split(" ")[0]}),s.jsx(_t,{sx:{bgcolor:t[i],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:r.name.split(" ").slice(1).join(" ")})]},i))})]}),s.jsx(P,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?s.jsx(Q,{sx:{fontSize:"14px"},children:"Loading..."}):s.jsx(ao,{data:e,COLORS:t})})]})},ft=({statuses:e,title:t})=>{let o=$e(),n=wt();const r=i=>{if(t==="Inspection Approvals"){switch(console.log("status: ",i),i.label){case"Rejected":o(ye("Rejected"));break;case"Pending":o(ye("Open"));break;case"Approved":o(ye("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(i.label){case"Overdue":o(Be("Overdue"));break;case"Due soon":o(Be("Due soon"));break;case"Serviced":o(Be("Serviced"));break}n("/service")}};return s.jsxs(P,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Ce,{title:t}),s.jsx(P,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((i,a)=>s.jsxs(P,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{r(i)},children:[s.jsx(Q,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:i.color,margin:"30px 0"},"aria-label":"color",children:i.count}),s.jsx(Q,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:i.label})]},a))})]})},dt={total:0,online:0,offline:0,running:0};function lo({vehicleReport:e,imeiNo:t,loading:o,isloadingReport:n}){var D,f,m,d,$,F,w;const{vehicleList:r,onlineVehicle:i,locationData:a}=K(h=>h.liveMap);K(h=>h.dashboard);const{breakdownStatusCount:c}=K(h=>h.breakdown),{inspectionStatusCount:p}=K(h=>h.inspection),{vehicleStatesData:l}=K(h=>h.report),{report:g,driver_behavior:v,overdueCount:x,completedCount:O,serviceSoonCount:y,selectedVehicleGroup:u,areaCovered:A}=K(h=>h.dashboard),[S,_]=b.useState(0),[T,L]=b.useState(dt);b.useEffect(()=>{if((r==null?void 0:r.length)>0){let h={...dt};if(u){const j=G(u==null?void 0:u.id);console.log("result",j);const z=r.filter(J=>J.vehicle_group===u.id);h.total=z.length,h.online=j.onlineCount,h.running=j.runningCount,h.offline=h.total-h.online}console.log("Updated Vehicle Count:",h),L(h)}console.log("vehicleList",r)},[u]),b.useEffect(()=>{if((r==null?void 0:r.length)>0){let h=0;r==null||r.map(j=>{var z;((z=j==null?void 0:j.imei)==null?void 0:z.length)>0&&h++}),_(h)}},[r]),b.useEffect(()=>{},[x,O,y]);const I=h=>{if(!h)return!1;const j=String(h).toLowerCase();return i.some(z=>String(z).toLowerCase()===j)},N=h=>a==null?void 0:a.some(j=>String(j.latestDocument.imei)===String(h)&&j.latestDocument.speed>0&&(j.latestDocument.ignition===!0||j.latestDocument.ignition===1)),M=h=>a==null?void 0:a.some(j=>String(j.latestDocument.imei)===String(h)&&j.latestDocument.speed<=0&&(j.latestDocument.ignition===!0||j.latestDocument.ignition===1)),R=()=>{let h=0,j=0,z=0;return r&&r.length>0&&r.map(J=>{var qe;let ce=(qe=J==null?void 0:J.imei[0])==null?void 0:qe.mac_id,oe=I(ce),U=N(ce),ie=M(ce);oe&&h++,oe&&U&&j++,oe&&ie&&z++}),{onlineCount:h,runningCount:j,idelingCount:z}},G=h=>{let j=0,z=0;return i.forEach(J=>{if(t.includes(String(J))){const ce=a==null?void 0:a.find(oe=>{var U;return String((U=oe==null?void 0:oe.latestDocument)==null?void 0:U.imei)===String(J)});if(ce&&r.some(U=>{var ie;return U.vehicle_group===h&&((ie=U==null?void 0:U.imei[0])==null?void 0:ie.mac_id)===String(J)})){j++;const{speed:U,ignition:ie}=ce.latestDocument;U>0&&(ie===!0||ie===1)&&z++}}}),{onlineCount:j,runningCount:z}};b.useEffect(()=>{},[l]);const V=[{name:"Overspeed O",value:((D=l==null?void 0:l.totals)==null?void 0:D.total_overSpeedTimeSec)||0},{name:"Economy E",value:((f=l==null?void 0:l.totals)==null?void 0:f.total_economyTimeSec)||0},{name:"Steady S",value:((m=l==null?void 0:l.totals)==null?void 0:m.total_idleTimeSec)||0}],q=["#0088FE","#00C49F","#FFBB28","#FF8042"],X=[{label:"Rejected",count:p.rejected||0,color:"#FF0202"},{label:"Pending",count:p.open||0,color:"black"},{label:"Approved",count:p.close||0,color:"green"}],W=[{label:"Overdue",count:x,color:"#FF0202"},{label:"Due soon",count:y,color:"black"},{label:"Serviced",count:O,color:"green"}],ne=[{name:"Total Vehicles",count:Object.keys(u).length>0?T.total:S,color:"grey"},{name:"Online",count:Object.keys(u).length>0?T.online:R().onlineCount,color:"red"},{name:"Offline",count:Object.keys(u).length>0?T.offline:S-R().onlineCount,color:"grey"},{name:"Running",count:Object.keys(u).length>0?T.running:R().runningCount,color:"green"},{name:"Idling",count:Object.keys(u).length>0?T.online-T.running:R().idelingCount,color:"yellow"}],re=[{name:"Distance Covered",count:((d=l==null?void 0:l.totals)==null?void 0:d.totalDistance)||0,color:"grey"},{name:"Running time",count:(($=l==null?void 0:l.totals)==null?void 0:$.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((F=l==null?void 0:l.totals)==null?void 0:F.total_idleTime)||0,color:Ke.bgColor},{name:"Engine Hrs",count:((w=l==null?void 0:l.totals)==null?void 0:w.total_engineHours)||0,color:Ke.bgColor}],C=[{name:"Open",count:c.open,color:"grey"},{name:"Overdue",count:c.overDue,color:"red"},{name:"Closed",count:c.close,color:"green"}];return s.jsxs(s.Fragment,{children:[s.jsx(so,{data:V,colors:q}),s.jsxs(P,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[s.jsx(Ce,{title:"Vehicles Status"}),s.jsx(P,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:ne.map((h,j)=>s.jsx(ze,{label:h.name,count:h.count,color:h.color,title:"Vehicle Status"},j+1))})]}),s.jsx(ft,{statuses:W,title:"Service Remainder"}),s.jsxs(P,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Ce,{title:"Assigned Vehicles"}),s.jsx(P,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:re.map((h,j)=>s.jsx(ze,{type:"assignVehicle",label:h.name,count:h.count,color:h.color},j+1))})]}),s.jsxs(P,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Ce,{title:"Breakdown Resolved"}),s.jsx(P,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:C.map((h,j)=>s.jsx(ze,{label:h.name,count:h.count,color:h.color,title:"Breakdown"}))})]}),s.jsx(ft,{statuses:X,title:"Inspection Approvals"})]})}const yo=()=>{const{w_customer_id:e,collapsed:t}=K(f=>f.auth),{mode:o,selectedTripData:n,selectedVehicleGroup:r,showVehicles:i,vehicleZone:a}=K(f=>f.dashboard),{breakdowns:c}=K(f=>f.breakdown),{inspectionHistory:p}=K(f=>f.inspection),[l,g]=b.useState(()=>{const f=sessionStorage.getItem("imeiNo");return f?JSON.parse(f):[]}),{selectedVehicle:v,vehicleList:x,onlineVehicle:O,locationData:y}=K(f=>f.liveMap),u=$e(),A=vt(o),[S,_]=b.useState([]),[T,L]=b.useState(!1),[I,N]=b.useState({}),[M,R]=b.useState(!1),[G,V]=b.useState(!1),[q,X]=b.useState(!1);b.useEffect(()=>{(async()=>{await ne()})(),u(Jt())},[]);const W=f=>{let m=x.find(d=>{var $;return(($=d==null?void 0:d.imei[0])==null?void 0:$.mac_id)==f});return(m==null?void 0:m.registration_id)||f};b.useEffect(()=>{if(p.length>0){let f={open:0,rejected:0,close:0};p.map(m=>{m.status==="Open"&&f.open++,m.status==="Close"&&f.close++,m.status==="Rejected"&&f.rejected++}),u(Qt(f))}},[c]),b.useEffect(()=>{if(c.length>0){let f={open:0,overDue:0,close:0};c.map(m=>{if(m.status==="Open"&&f.open++,m.status==="Close"&&f.close++,m.submission_date){const d=new Date(m.submission_date),$=new Date;$.setHours(0,0,0,0),d.setHours(0,0,0,0),d<$&&m.status=="Open"&&f.overDue++}}),u(en(f))}},[c]),b.useEffect(()=>{u(tn())},[]),b.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(l))},[l]),b.useEffect(()=>{var f,m,d;Object.keys(v).length===0&&x.length>0&&u(nn({imei:(m=(f=x[0])==null?void 0:f.imei[0])==null?void 0:m.mac_id,reg_id:(d=x[0])==null?void 0:d.registration_id}))},[v,x]),b.useEffect(()=>{let f=x.map(d=>{var $;return(($=d==null?void 0:d.imei[0])==null?void 0:$.mac_id)||null}).filter(d=>d),m={imeiList:f,startDate:Je(new Date).format("MM-DD-YYYY"),endDate:Je(new Date).format("MM-DD-YYYY")};f&&f.length>0&&u(rn(m)),u(on())},[x]),b.useEffect(()=>{(async()=>{if(v!=null&&v.imei){const m=bt(),d=m.startOf("day").format("MM/DD/YYYY HH:mm:ss"),$=m.endOf("day").format("MM/DD/YYYY HH:mm:ss"),F={imei:v.imei,startTime:d,endTime:$};try{u(pn(F))}catch(w){console.error("Error fetching report:",w)}}})()},[v,u]),b.useEffect(()=>{const f=d=>{(d==null?void 0:d.imei)!==null&&l.find(w=>parseInt(w)===(d==null?void 0:d.imei))&&ue.error(`Type: ${d==null?void 0:d.type} ${d==null?void 0:d.msg} ${W(d==null?void 0:d.imei)}`,{id:"geofence",autoClose:5e3})},m=d=>{(d==null?void 0:d.imei)!==null&&l.find(w=>parseInt(w)===(d==null?void 0:d.imei))&&ue.error(`${d==null?void 0:d.msg} ${W(d==null?void 0:d.imei)}`,{id:"speed",autoClose:5e3})};return Ae.on("geofenceAlert",f),Ae.on("speedAlert",m),()=>{Ae.off("geofenceAlert",f),Ae.off("speedAlert",m)}},[l,Ae]);const ne=async()=>{try{let f=[],m=[];const d=await u(fn({w_customer_id:e}));if(Array.isArray(d.payload)){d.payload.forEach(w=>{var h,j;Array.isArray(w.imei)&&w.imei.length>0?(f.push({id:w.id,label:w.registration_id,value:(h=w==null?void 0:w.imei[0])==null?void 0:h.mac_id,vehilce_type:w==null?void 0:w.segment,sell_date:w==null?void 0:w.sell_date,workShop:w==null?void 0:w.workshop,vehicle_group:w==null?void 0:w.vehicle_group}),m.push((j=w.imei[0])==null?void 0:j.mac_id),w.registration_id):(console.error("IMEI data not found for item:",w),ue.error(`IMEI Number not found for the vehicle: ${w==null?void 0:w.registration_id}`,{duration:2e3}))}),g(m);const $="one",F=m;m.length>0&&(u(dn({type:$,imei:F})),u(hn(F))),_(f),u(gn(f)),u(mn({w_customer_id:e})),u(yn(e)),u(xn({}))}else console.error("Unexpected data format:",d),ue.error("Unexpected data format:")}catch(f){console.error("Error fetching vehicle data:",f),ue.error(`Error fetching vehicle data: ${f}`)}},re=f=>y==null?void 0:y.some(m=>String(m.latestDocument.imei)===String(f)&&m.latestDocument.speed>0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),C=f=>y==null?void 0:y.some(m=>String(m.latestDocument.imei)===String(f)&&m.latestDocument.speed<=0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),D=S.filter(f=>{if(!(Object.keys(r).length===0||f.vehicle_group===r.id))return!1;const d=f.value,$=String(f.value).toLowerCase(),F=O.some(z=>String(z).toLowerCase()===$),w=!O.some(z=>String(z).toLowerCase()===$),h=F&&re(d),j=F&&C(d);switch(a){case"Total Vehicles":return!0;case"Online":return F;case"Running":return h;case"Offline":return w;case"Idling":return j;default:return!0}});return s.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[s.jsx(an,{}),s.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[s.jsx(sn,{title:"Dashboard",setShowNotification:L,showNotification:T,setShowVehiclesGroup:R,showVehiclesGroup:M}),s.jsx(ln,{setShowVehiclesGroup:R,showVehiclesGroup:M}),s.jsxs(P,{sx:{height:"92vh",backgroundColor:A.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[i&&s.jsx(P,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:A.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:s.jsx(cn,{vehicleData:D,showVehicles:i})}),s.jsx(Pe,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),s.jsxs(P,{sx:{display:"flex",gap:"30px",background:Ke.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[s.jsxs(P,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[T&&s.jsx(un,{showNotification:T,setShowNotification:L}),"              ",s.jsx(oo,{}),s.jsx(P,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:s.jsx(ro,{setLoading:V})})]}),s.jsx(P,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:s.jsx(lo,{vehicleReport:I,imeiNo:l,loading:G,isloadingReport:q})})]})]})]})]})};export{yo as default};
