import{k as Vt,r as rn,j as G,t as nf,T as he,h as kd,p as qe,i as tf,v as ef,Q as Gd,B as $d,w as Hr,m as Hd,W as zo,K as Zd,L as Kd,N as zd,O as qd,X as qo}from"./index-CG6W4fb_.js";import{L as Vd}from"./LiveMapTopBar-D2dzbKNw.js";import{V as Yd}from"./VehicleMenu-Dn69wBEF.js";import{L as Xd,t as Jd}from"./LeftSideBar2-C4I-N5St.js";import{F as Qd}from"./Loader-C21wSStY.js";import{L as jd}from"./LiveMapServices-B2IMxDuY.js";import{s as fs}from"./Socket-0N_gnJcr.js";import{P as n0}from"./Parameters-CPqrmPwJ.js";/* empty css           */import"./proj-XQwXs9DQ.js";import{V as t0}from"./VehicleGroups-DdU1lkgj.js";import{u as e0,G as r0,M as i0}from"./esm-ChJouSam.js";import{d as s0}from"./Info-CB62aEKI.js";import{d as u0}from"./Close-4f2faN96.js";import{B as Nn,C as o0}from"./menu2-BLsuax3-.js";import"./jcb-aCHXMCXy.js";import"./index-CztlbPrm.js";import"./TextField-DeisPKNd.js";import"./useControlled-DedoIfIB.js";import"./createSvgIcon-Bq_L2n5B.js";import"./index-CvuRNMHy.js";import"./Card-C1v0Hf4_.js";import"./CardContent-FZYdw_y0.js";const f0=({label:S,value:f})=>G.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[G.jsx(he,{variant:"body2",color:"textSecondary",children:S}),G.jsx(he,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:f||"N/A"})]}),a0=(S,f)=>(S==null?void 0:S.find(i=>{var g,d;return((d=(g=i.imei)==null?void 0:g[0])==null?void 0:d.mac_id)===f.imei}))||{},Vo=({title:S,details:f})=>G.jsx(Nn,{sx:{width:"45%"},children:f.map(({label:i,value:g})=>G.jsx(f0,{label:i,value:g},i))});function l0({handleVehicleInfo:S,udpatedParams:f}){var H,tn,Y,Z,X,wn,an,Rn,gn,bn;const{collapsed:i}=Vt(z=>z.auth),{vehicleList:g,selectedVehicle:d}=Vt(z=>z.liveMap),[_,I]=rn.useState({});let[E,m]=rn.useState(null);rn.useEffect(()=>{let z=f&&(f==null?void 0:f.length)>0&&(f==null?void 0:f.find(Cn=>{var it;return Number((it=Cn==null?void 0:Cn.latestDocument)==null?void 0:it.imei)===Number(d.imei)}));m(z)},[f,d]),rn.useEffect(()=>{I(a0(g,d))},[g,d]);const B=z=>{var Ct,pn;let Cn=(Ct=z==null?void 0:z.latestDocument)==null?void 0:Ct.ignition,it=(pn=z==null?void 0:z.latestDocument)==null?void 0:pn.speed;return Cn===!0||Cn===1?it:0},P=[{label:"Vehicle No:",value:_==null?void 0:_.registration_id},{label:"Model:",value:(H=_==null?void 0:_.vehicle_model)==null?void 0:H.name},{label:"IMEI No:",value:(Y=(tn=_==null?void 0:_.imei)==null?void 0:tn[0])==null?void 0:Y.mac_id},{label:"Chassis No:",value:_==null?void 0:_.chassis_no},{label:"Engine No:",value:_==null?void 0:_.engine_no}],M=[{label:"Customer Name:",value:(Z=_==null?void 0:_.user)!=null&&Z.us_user?`${_.user.us_user.first_name.charAt(0).toUpperCase()}${_.user.us_user.first_name.slice(1)} ${_.user.us_user.last_name.charAt(0).toUpperCase()}${_.user.us_user.last_name.slice(1)}`:null},{label:"Mobile: ",value:((X=_==null?void 0:_.user)==null?void 0:X.us_user)&&_.user.us_user.mobile},{label:"Date of Sell:",value:_==null?void 0:_.sell_date},{label:"Workshop Name:",value:(wn=_==null?void 0:_.workshop)==null?void 0:wn.name}];let N={border:"2px solid black",borderRadius:"5px",padding:"5px",color:"black"};return G.jsxs(Nn,{sx:{position:"absolute",top:"600px",left:i?"280px":"450px",zIndex:1,background:nf.bgShadow,p:2,borderRadius:2,color:"white",width:"60%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[G.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[G.jsx(he,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),G.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between",width:"65%",marginLeft:"10px"},children:[G.jsx(Nn,{sx:N,children:G.jsxs(he,{children:["Ignition:"," ",((an=E==null?void 0:E.latestDocument)==null?void 0:an.ignition)===!0||((Rn=E==null?void 0:E.latestDocument)==null?void 0:Rn.ignition)===1?"On":"Off"]})}),G.jsx(Nn,{sx:N,children:G.jsxs(he,{children:["Speed: ",B(E)," km/h"]})}),G.jsx(Nn,{sx:N,children:G.jsxs(he,{children:["Main Voltage:"," ",E?`${(gn=E==null?void 0:E.latestDocument)==null?void 0:gn.mainInputVoltage} Voltage`:0]})}),G.jsx(Nn,{sx:N,children:G.jsxs(he,{children:["Heading:"," ",E?`${(bn=E==null?void 0:E.latestDocument)==null?void 0:bn.heading} deg`:0]})})]}),G.jsx(u0,{sx:{cursor:"pointer",color:"black"},onClick:S})]}),G.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between"},children:[G.jsx(Vo,{title:"Vehicle Details",details:P}),G.jsx(Vo,{title:"Customer Details",details:M})]})]})}var c0=function S(f,i){if(f===i)return!0;if(f&&i&&typeof f=="object"&&typeof i=="object"){if(f.constructor!==i.constructor)return!1;var g,d,_;if(Array.isArray(f)){if(g=f.length,g!=i.length)return!1;for(d=g;d--!==0;)if(!S(f[d],i[d]))return!1;return!0}if(f.constructor===RegExp)return f.source===i.source&&f.flags===i.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===i.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===i.toString();if(_=Object.keys(f),g=_.length,g!==Object.keys(i).length)return!1;for(d=g;d--!==0;)if(!Object.prototype.hasOwnProperty.call(i,_[d]))return!1;for(d=g;d--!==0;){var I=_[d];if(!S(f[I],i[I]))return!1}return!0}return f!==f&&i!==i};const Yo=kd(c0),Xo=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],as=1,Ve=8;class ps{static from(f){if(!(f instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,g]=new Uint8Array(f,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=g>>4;if(d!==as)throw new Error(`Got v${d} data when expected v${as}.`);const _=Xo[g&15];if(!_)throw new Error("Unrecognized array type.");const[I]=new Uint16Array(f,2,1),[E]=new Uint32Array(f,4,1);return new ps(E,I,_,f)}constructor(f,i=64,g=Float64Array,d){if(isNaN(f)||f<0)throw new Error(`Unpexpected numItems value: ${f}.`);this.numItems=+f,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=g,this.IndexArrayType=f<65536?Uint16Array:Uint32Array;const _=Xo.indexOf(this.ArrayType),I=f*2*this.ArrayType.BYTES_PER_ELEMENT,E=f*this.IndexArrayType.BYTES_PER_ELEMENT,m=(8-E%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${g}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,Ve,f),this.coords=new this.ArrayType(this.data,Ve+E+m,f*2),this._pos=f*2,this._finished=!0):(this.data=new ArrayBuffer(Ve+I+E+m),this.ids=new this.IndexArrayType(this.data,Ve,f),this.coords=new this.ArrayType(this.data,Ve+E+m,f*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(as<<4)+_]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=f)}add(f,i){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=f,this.coords[this._pos++]=i,g}finish(){const f=this._pos>>1;if(f!==this.numItems)throw new Error(`Added ${f} items when expected ${this.numItems}.`);return hs(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(f,i,g,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:I,nodeSize:E}=this,m=[0,_.length-1,0],B=[];for(;m.length;){const P=m.pop()||0,M=m.pop()||0,N=m.pop()||0;if(M-N<=E){for(let Z=N;Z<=M;Z++){const X=I[2*Z],wn=I[2*Z+1];X>=f&&X<=g&&wn>=i&&wn<=d&&B.push(_[Z])}continue}const H=N+M>>1,tn=I[2*H],Y=I[2*H+1];tn>=f&&tn<=g&&Y>=i&&Y<=d&&B.push(_[H]),(P===0?f<=tn:i<=Y)&&(m.push(N),m.push(H-1),m.push(1-P)),(P===0?g>=tn:d>=Y)&&(m.push(H+1),m.push(M),m.push(1-P))}return B}within(f,i,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:_,nodeSize:I}=this,E=[0,d.length-1,0],m=[],B=g*g;for(;E.length;){const P=E.pop()||0,M=E.pop()||0,N=E.pop()||0;if(M-N<=I){for(let Z=N;Z<=M;Z++)Jo(_[2*Z],_[2*Z+1],f,i)<=B&&m.push(d[Z]);continue}const H=N+M>>1,tn=_[2*H],Y=_[2*H+1];Jo(tn,Y,f,i)<=B&&m.push(d[H]),(P===0?f-g<=tn:i-g<=Y)&&(E.push(N),E.push(H-1),E.push(1-P)),(P===0?f+g>=tn:i+g>=Y)&&(E.push(H+1),E.push(M),E.push(1-P))}return m}}function hs(S,f,i,g,d,_){if(d-g<=i)return;const I=g+d>>1;rf(S,f,I,g,d,_),hs(S,f,i,g,I-1,1-_),hs(S,f,i,I+1,d,1-_)}function rf(S,f,i,g,d,_){for(;d>g;){if(d-g>600){const B=d-g+1,P=i-g+1,M=Math.log(B),N=.5*Math.exp(2*M/3),H=.5*Math.sqrt(M*N*(B-N)/B)*(P-B/2<0?-1:1),tn=Math.max(g,Math.floor(i-P*N/B+H)),Y=Math.min(d,Math.floor(i+(B-P)*N/B+H));rf(S,f,i,tn,Y,_)}const I=f[2*i+_];let E=g,m=d;for(Ye(S,f,g,i),f[2*d+_]>I&&Ye(S,f,g,d);E<m;){for(Ye(S,f,E,m),E++,m--;f[2*E+_]<I;)E++;for(;f[2*m+_]>I;)m--}f[2*g+_]===I?Ye(S,f,g,m):(m++,Ye(S,f,m,d)),m<=i&&(g=m+1),i<=m&&(d=m-1)}}function Ye(S,f,i,g){ls(S,i,g),ls(f,2*i,2*g),ls(f,2*i+1,2*g+1)}function ls(S,f,i){const g=S[f];S[f]=S[i],S[i]=g}function Jo(S,f,i,g){const d=S-i,_=f-g;return d*d+_*_}const h0={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:S=>S},Qo=Math.fround||(S=>f=>(S[0]=+f,S[0]))(new Float32Array(1)),ce=2,qt=3,cs=4,zt=5,sf=6;class g0{constructor(f){this.options=Object.assign(Object.create(h0),f),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(f){const{log:i,minZoom:g,maxZoom:d}=this.options;i&&console.time("total time");const _=`prepare ${f.length} points`;i&&console.time(_),this.points=f;const I=[];for(let m=0;m<f.length;m++){const B=f[m];if(!B.geometry)continue;const[P,M]=B.geometry.coordinates,N=Qo(Gr(P)),H=Qo($r(M));I.push(N,H,1/0,m,-1,1),this.options.reduce&&I.push(0)}let E=this.trees[d+1]=this._createTree(I);i&&console.timeEnd(_);for(let m=d;m>=g;m--){const B=+Date.now();E=this.trees[m]=this._createTree(this._cluster(E,m)),i&&console.log("z%d: %d clusters in %dms",m,E.numItems,+Date.now()-B)}return i&&console.timeEnd("total time"),this}getClusters(f,i){let g=((f[0]+180)%360+360)%360-180;const d=Math.max(-90,Math.min(90,f[1]));let _=f[2]===180?180:((f[2]+180)%360+360)%360-180;const I=Math.max(-90,Math.min(90,f[3]));if(f[2]-f[0]>=360)g=-180,_=180;else if(g>_){const M=this.getClusters([g,d,180,I],i),N=this.getClusters([-180,d,_,I],i);return M.concat(N)}const E=this.trees[this._limitZoom(i)],m=E.range(Gr(g),$r(I),Gr(_),$r(d)),B=E.data,P=[];for(const M of m){const N=this.stride*M;P.push(B[N+zt]>1?jo(B,N,this.clusterProps):this.points[B[N+qt]])}return P}getChildren(f){const i=this._getOriginId(f),g=this._getOriginZoom(f),d="No cluster with the specified id.",_=this.trees[g];if(!_)throw new Error(d);const I=_.data;if(i*this.stride>=I.length)throw new Error(d);const E=this.options.radius/(this.options.extent*Math.pow(2,g-1)),m=I[i*this.stride],B=I[i*this.stride+1],P=_.within(m,B,E),M=[];for(const N of P){const H=N*this.stride;I[H+cs]===f&&M.push(I[H+zt]>1?jo(I,H,this.clusterProps):this.points[I[H+qt]])}if(M.length===0)throw new Error(d);return M}getLeaves(f,i,g){i=i||10,g=g||0;const d=[];return this._appendLeaves(d,f,i,g,0),d}getTile(f,i,g){const d=this.trees[this._limitZoom(f)],_=Math.pow(2,f),{extent:I,radius:E}=this.options,m=E/I,B=(g-m)/_,P=(g+1+m)/_,M={features:[]};return this._addTileFeatures(d.range((i-m)/_,B,(i+1+m)/_,P),d.data,i,g,_,M),i===0&&this._addTileFeatures(d.range(1-m/_,B,1,P),d.data,_,g,_,M),i===_-1&&this._addTileFeatures(d.range(0,B,m/_,P),d.data,-1,g,_,M),M.features.length?M:null}getClusterExpansionZoom(f){let i=this._getOriginZoom(f)-1;for(;i<=this.options.maxZoom;){const g=this.getChildren(f);if(i++,g.length!==1)break;f=g[0].properties.cluster_id}return i}_appendLeaves(f,i,g,d,_){const I=this.getChildren(i);for(const E of I){const m=E.properties;if(m&&m.cluster?_+m.point_count<=d?_+=m.point_count:_=this._appendLeaves(f,m.cluster_id,g,d,_):_<d?_++:f.push(E),f.length===g)break}return _}_createTree(f){const i=new ps(f.length/this.stride|0,this.options.nodeSize,Float32Array);for(let g=0;g<f.length;g+=this.stride)i.add(f[g],f[g+1]);return i.finish(),i.data=f,i}_addTileFeatures(f,i,g,d,_,I){for(const E of f){const m=E*this.stride,B=i[m+zt]>1;let P,M,N;if(B)P=uf(i,m,this.clusterProps),M=i[m],N=i[m+1];else{const Y=this.points[i[m+qt]];P=Y.properties;const[Z,X]=Y.geometry.coordinates;M=Gr(Z),N=$r(X)}const H={type:1,geometry:[[Math.round(this.options.extent*(M*_-g)),Math.round(this.options.extent*(N*_-d))]],tags:P};let tn;B||this.options.generateId?tn=i[m+qt]:tn=this.points[i[m+qt]].id,tn!==void 0&&(H.id=tn),I.features.push(H)}}_limitZoom(f){return Math.max(this.options.minZoom,Math.min(Math.floor(+f),this.options.maxZoom+1))}_cluster(f,i){const{radius:g,extent:d,reduce:_,minPoints:I}=this.options,E=g/(d*Math.pow(2,i)),m=f.data,B=[],P=this.stride;for(let M=0;M<m.length;M+=P){if(m[M+ce]<=i)continue;m[M+ce]=i;const N=m[M],H=m[M+1],tn=f.within(m[M],m[M+1],E),Y=m[M+zt];let Z=Y;for(const X of tn){const wn=X*P;m[wn+ce]>i&&(Z+=m[wn+zt])}if(Z>Y&&Z>=I){let X=N*Y,wn=H*Y,an,Rn=-1;const gn=((M/P|0)<<5)+(i+1)+this.points.length;for(const bn of tn){const z=bn*P;if(m[z+ce]<=i)continue;m[z+ce]=i;const Cn=m[z+zt];X+=m[z]*Cn,wn+=m[z+1]*Cn,m[z+cs]=gn,_&&(an||(an=this._map(m,M,!0),Rn=this.clusterProps.length,this.clusterProps.push(an)),_(an,this._map(m,z)))}m[M+cs]=gn,B.push(X/Z,wn/Z,1/0,gn,-1,Z),_&&B.push(Rn)}else{for(let X=0;X<P;X++)B.push(m[M+X]);if(Z>1)for(const X of tn){const wn=X*P;if(!(m[wn+ce]<=i)){m[wn+ce]=i;for(let an=0;an<P;an++)B.push(m[wn+an])}}}}return B}_getOriginId(f){return f-this.points.length>>5}_getOriginZoom(f){return(f-this.points.length)%32}_map(f,i,g){if(f[i+zt]>1){const I=this.clusterProps[f[i+sf]];return g?Object.assign({},I):I}const d=this.points[f[i+qt]].properties,_=this.options.map(d);return g&&_===d?Object.assign({},_):_}}function jo(S,f,i){return{type:"Feature",id:S[f+qt],properties:uf(S,f,i),geometry:{type:"Point",coordinates:[p0(S[f]),d0(S[f+1])]}}}function uf(S,f,i){const g=S[f+zt],d=g>=1e4?`${Math.round(g/1e3)}k`:g>=1e3?`${Math.round(g/100)/10}k`:g,_=S[f+sf],I=_===-1?{}:Object.assign({},i[_]);return Object.assign(I,{cluster:!0,cluster_id:S[f+qt],point_count:g,point_count_abbreviated:d})}function Gr(S){return S/360+.5}function $r(S){const f=Math.sin(S*Math.PI/180),i=.5-.25*Math.log((1+f)/(1-f))/Math.PI;return i<0?0:i>1?1:i}function p0(S){return(S-.5)*360}function d0(S){const f=(180-S*360)*Math.PI/180;return 360*Math.atan(Math.exp(f))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _0(S,f){var i={};for(var g in S)Object.prototype.hasOwnProperty.call(S,g)&&f.indexOf(g)<0&&(i[g]=S[g]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,g=Object.getOwnPropertySymbols(S);d<g.length;d++)f.indexOf(g[d])<0&&Object.prototype.propertyIsEnumerable.call(S,g[d])&&(i[g[d]]=S[g[d]]);return i}class rt{static isAdvancedMarkerAvailable(f){return google.maps.marker&&f.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(f){return google.maps.marker&&f instanceof google.maps.marker.AdvancedMarkerElement}static setMap(f,i){this.isAdvancedMarker(f)?f.map=i:f.setMap(i)}static getPosition(f){if(this.isAdvancedMarker(f)){if(f.position){if(f.position instanceof google.maps.LatLng)return f.position;if(f.position.lat&&f.position.lng)return new google.maps.LatLng(f.position.lat,f.position.lng)}return new google.maps.LatLng(null)}return f.getPosition()}static getVisible(f){return this.isAdvancedMarker(f)?!0:f.getVisible()}}class gs{constructor({markers:f,position:i}){this.markers=f,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(this.markers.length===0&&!this._position)return;const f=new google.maps.LatLngBounds(this._position,this._position);for(const i of this.markers)f.extend(rt.getPosition(i));return f}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(f=>rt.getVisible(f)).length}push(f){this.markers.push(f)}delete(){this.marker&&(rt.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class v0{constructor({maxZoom:f=16}){this.maxZoom=f}noop({markers:f}){return w0(f)}}const w0=S=>S.map(i=>new gs({position:rt.getPosition(i),markers:[i]}));class x0 extends v0{constructor(f){var{maxZoom:i,radius:g=60}=f,d=_0(f,["maxZoom","radius"]);super({maxZoom:i}),this.state={zoom:-1},this.superCluster=new g0(Object.assign({maxZoom:this.maxZoom,radius:g},d))}calculate(f){let i=!1;const g={zoom:f.map.getZoom()};if(!Yo(f.markers,this.markers)){i=!0,this.markers=[...f.markers];const d=this.markers.map(_=>{const I=rt.getPosition(_);return{type:"Feature",geometry:{type:"Point",coordinates:[I.lng(),I.lat()]},properties:{marker:_}}});this.superCluster.load(d)}return i||(this.state.zoom<=this.maxZoom||g.zoom<=this.maxZoom)&&(i=!Yo(this.state,g)),this.state=g,i&&(this.clusters=this.cluster(f)),{clusters:this.clusters,changed:i}}cluster({map:f}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(f.getZoom())).map(i=>this.transformCluster(i))}transformCluster({geometry:{coordinates:[f,i]},properties:g}){if(g.cluster)return new gs({markers:this.superCluster.getLeaves(g.cluster_id,1/0).map(_=>_.properties.marker),position:{lat:i,lng:f}});const d=g.marker;return new gs({markers:[d],position:rt.getPosition(d)})}}class m0{constructor(f,i){this.markers={sum:f.length};const g=i.map(_=>_.count),d=g.reduce((_,I)=>_+I,0);this.clusters={count:i.length,markers:{mean:d/i.length,sum:d,min:Math.min(...g),max:Math.max(...g)}}}}class y0{render({count:f,position:i},g,d){const I=`<svg fill="${f>Math.max(10,g.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${f}</text>
</svg>`,E=`Cluster of ${f} markers`,m=Number(google.maps.Marker.MAX_ZINDEX)+f;if(rt.isAdvancedMarkerAvailable(d)){const M=new DOMParser().parseFromString(I,"image/svg+xml").documentElement;M.setAttribute("transform","translate(0 25)");const N={map:d,position:i,zIndex:m,title:E,content:M};return new google.maps.marker.AdvancedMarkerElement(N)}const B={position:i,zIndex:m,title:E,icon:{url:`data:image/svg+xml;base64,${btoa(I)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(B)}}function A0(S,f){for(let i in f.prototype)S.prototype[i]=f.prototype[i]}class ds{constructor(){A0(ds,google.maps.OverlayView)}}var Xe;(function(S){S.CLUSTERING_BEGIN="clusteringbegin",S.CLUSTERING_END="clusteringend",S.CLUSTER_CLICK="click"})(Xe||(Xe={}));const S0=(S,f,i)=>{i.fitBounds(f.bounds)};class I0 extends ds{constructor({map:f,markers:i=[],algorithmOptions:g={},algorithm:d=new x0(g),renderer:_=new y0,onClusterClick:I=S0}){super(),this.markers=[...i],this.clusters=[],this.algorithm=d,this.renderer=_,this.onClusterClick=I,f&&this.setMap(f)}addMarker(f,i){this.markers.includes(f)||(this.markers.push(f),i||this.render())}addMarkers(f,i){f.forEach(g=>{this.addMarker(g,!0)}),i||this.render()}removeMarker(f,i){const g=this.markers.indexOf(f);return g===-1?!1:(rt.setMap(f,null),this.markers.splice(g,1),i||this.render(),!0)}removeMarkers(f,i){let g=!1;return f.forEach(d=>{g=this.removeMarker(d,!0)||g}),g&&!i&&this.render(),g}clearMarkers(f){this.markers.length=0,f||this.render()}render(){const f=this.getMap();if(f instanceof google.maps.Map&&f.getProjection()){google.maps.event.trigger(this,Xe.CLUSTERING_BEGIN,this);const{clusters:i,changed:g}=this.algorithm.calculate({markers:this.markers,map:f,mapCanvasProjection:this.getProjection()});if(g||g==null){const d=new Set;for(const I of i)I.markers.length==1&&d.add(I.markers[0]);const _=[];for(const I of this.clusters)I.marker!=null&&(I.markers.length==1?d.has(I.marker)||rt.setMap(I.marker,null):_.push(I.marker));this.clusters=i,this.renderClusters(),requestAnimationFrame(()=>_.forEach(I=>rt.setMap(I,null)))}google.maps.event.trigger(this,Xe.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(f=>rt.setMap(f,null)),this.clusters.forEach(f=>f.delete()),this.clusters=[]}renderClusters(){const f=new m0(this.markers,this.clusters),i=this.getMap();this.clusters.forEach(g=>{g.markers.length===1?g.marker=g.markers[0]:(g.marker=this.renderer.render(g,f,i),g.markers.forEach(d=>rt.setMap(d,null)),this.onClusterClick&&g.marker.addListener("click",d=>{google.maps.event.trigger(this,Xe.CLUSTER_CLICK,g),this.onClusterClick(d,g,i)})),rt.setMap(g.marker,i)})}}var Zr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Zr.exports;(function(S,f){(function(){var i,g="4.17.21",d=200,_="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",I="Expected a function",E="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",B=500,P="__lodash_placeholder__",M=1,N=2,H=4,tn=1,Y=2,Z=1,X=2,wn=4,an=8,Rn=16,gn=32,bn=64,z=128,Cn=256,it=512,Ct=30,pn="...",yn=800,kn=16,gt=1,Yn=2,k=3,Dn=1/0,In=9007199254740991,pt=17976931348623157e292,On=NaN,xn=4294967295,Re=xn-1,Kr=xn>>>1,zr=[["ary",z],["bind",Z],["bindKey",X],["curry",an],["curryRight",Rn],["flip",it],["partial",gn],["partialRight",bn],["rearg",Cn]],Ut="[object Arguments]",ge="[object Array]",be="[object AsyncFunction]",Yt="[object Boolean]",Xt="[object Date]",qr="[object DOMException]",pe="[object Error]",Jt="[object Function]",Je="[object GeneratorFunction]",Xn="[object Map]",Qt="[object Number]",Vr="[object Null]",dt="[object Object]",Qe="[object Promise]",Yr="[object Proxy]",jt="[object RegExp]",Zn="[object Set]",ne="[object String]",A="[object Symbol]",b="[object Undefined]",O="[object WeakMap]",W="[object WeakSet]",U="[object ArrayBuffer]",en="[object DataView]",sn="[object Float32Array]",ln="[object Float64Array]",En="[object Int8Array]",Tn="[object Int16Array]",_t="[object Int32Array]",yt="[object Uint8Array]",te="[object Uint8ClampedArray]",Oe="[object Uint16Array]",At="[object Uint32Array]",of=/\b__p \+= '';/g,ff=/\b(__p \+=) '' \+/g,af=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_s=/&(?:amp|lt|gt|quot|#39);/g,vs=/[&<>"']/g,lf=RegExp(_s.source),cf=RegExp(vs.source),hf=/<%-([\s\S]+?)%>/g,gf=/<%([\s\S]+?)%>/g,ws=/<%=([\s\S]+?)%>/g,pf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,df=/^\w*$/,_f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xr=/[\\^$.*+?()[\]{}|]/g,vf=RegExp(Xr.source),Jr=/^\s+/,wf=/\s/,xf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mf=/\{\n\/\* \[wrapped with (.+)\] \*/,yf=/,? & /,Af=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sf=/[()=,{}\[\]\/\s]/,If=/\\(\\)?/g,Ef=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xs=/\w*$/,Cf=/^[-+]0x[0-9a-f]+$/i,Lf=/^0b[01]+$/i,Mf=/^\[object .+?Constructor\]$/,Rf=/^0o[0-7]+$/i,bf=/^(?:0|[1-9]\d*)$/,Of=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,Tf=/['\n\r\u2028\u2029\\]/g,nr="\\ud800-\\udfff",Pf="\\u0300-\\u036f",Df="\\ufe20-\\ufe2f",Ff="\\u20d0-\\u20ff",ms=Pf+Df+Ff,ys="\\u2700-\\u27bf",As="a-z\\xdf-\\xf6\\xf8-\\xff",Uf="\\xac\\xb1\\xd7\\xf7",Bf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Wf="\\u2000-\\u206f",Nf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ss="A-Z\\xc0-\\xd6\\xd8-\\xde",Is="\\ufe0e\\ufe0f",Es=Uf+Bf+Wf+Nf,Qr="['’]",kf="["+nr+"]",Cs="["+Es+"]",tr="["+ms+"]",Ls="\\d+",Gf="["+ys+"]",Ms="["+As+"]",Rs="[^"+nr+Es+Ls+ys+As+Ss+"]",jr="\\ud83c[\\udffb-\\udfff]",$f="(?:"+tr+"|"+jr+")",bs="[^"+nr+"]",ni="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",de="["+Ss+"]",Os="\\u200d",Ts="(?:"+Ms+"|"+Rs+")",Hf="(?:"+de+"|"+Rs+")",Ps="(?:"+Qr+"(?:d|ll|m|re|s|t|ve))?",Ds="(?:"+Qr+"(?:D|LL|M|RE|S|T|VE))?",Fs=$f+"?",Us="["+Is+"]?",Zf="(?:"+Os+"(?:"+[bs,ni,ti].join("|")+")"+Us+Fs+")*",Kf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bs=Us+Fs+Zf,qf="(?:"+[Gf,ni,ti].join("|")+")"+Bs,Vf="(?:"+[bs+tr+"?",tr,ni,ti,kf].join("|")+")",Yf=RegExp(Qr,"g"),Xf=RegExp(tr,"g"),ei=RegExp(jr+"(?="+jr+")|"+Vf+Bs,"g"),Jf=RegExp([de+"?"+Ms+"+"+Ps+"(?="+[Cs,de,"$"].join("|")+")",Hf+"+"+Ds+"(?="+[Cs,de+Ts,"$"].join("|")+")",de+"?"+Ts+"+"+Ps,de+"+"+Ds,zf,Kf,Ls,qf].join("|"),"g"),Qf=RegExp("["+Os+nr+ms+Is+"]"),jf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,na=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ta=-1,dn={};dn[sn]=dn[ln]=dn[En]=dn[Tn]=dn[_t]=dn[yt]=dn[te]=dn[Oe]=dn[At]=!0,dn[Ut]=dn[ge]=dn[U]=dn[Yt]=dn[en]=dn[Xt]=dn[pe]=dn[Jt]=dn[Xn]=dn[Qt]=dn[dt]=dn[jt]=dn[Zn]=dn[ne]=dn[O]=!1;var hn={};hn[Ut]=hn[ge]=hn[U]=hn[en]=hn[Yt]=hn[Xt]=hn[sn]=hn[ln]=hn[En]=hn[Tn]=hn[_t]=hn[Xn]=hn[Qt]=hn[dt]=hn[jt]=hn[Zn]=hn[ne]=hn[A]=hn[yt]=hn[te]=hn[Oe]=hn[At]=!0,hn[pe]=hn[Jt]=hn[O]=!1;var ea={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ra={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ia={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ua=parseFloat,oa=parseInt,Ws=typeof qe=="object"&&qe&&qe.Object===Object&&qe,fa=typeof self=="object"&&self&&self.Object===Object&&self,Fn=Ws||fa||Function("return this")(),ri=f&&!f.nodeType&&f,ee=ri&&!0&&S&&!S.nodeType&&S,Ns=ee&&ee.exports===ri,ii=Ns&&Ws.process,st=function(){try{var c=ee&&ee.require&&ee.require("util").types;return c||ii&&ii.binding&&ii.binding("util")}catch{}}(),ks=st&&st.isArrayBuffer,Gs=st&&st.isDate,$s=st&&st.isMap,Hs=st&&st.isRegExp,Zs=st&&st.isSet,Ks=st&&st.isTypedArray;function Jn(c,v,p){switch(p.length){case 0:return c.call(v);case 1:return c.call(v,p[0]);case 2:return c.call(v,p[0],p[1]);case 3:return c.call(v,p[0],p[1],p[2])}return c.apply(v,p)}function aa(c,v,p,L){for(var $=-1,un=c==null?0:c.length;++$<un;){var Ln=c[$];v(L,Ln,p(Ln),c)}return L}function ut(c,v){for(var p=-1,L=c==null?0:c.length;++p<L&&v(c[p],p,c)!==!1;);return c}function la(c,v){for(var p=c==null?0:c.length;p--&&v(c[p],p,c)!==!1;);return c}function zs(c,v){for(var p=-1,L=c==null?0:c.length;++p<L;)if(!v(c[p],p,c))return!1;return!0}function Bt(c,v){for(var p=-1,L=c==null?0:c.length,$=0,un=[];++p<L;){var Ln=c[p];v(Ln,p,c)&&(un[$++]=Ln)}return un}function er(c,v){var p=c==null?0:c.length;return!!p&&_e(c,v,0)>-1}function si(c,v,p){for(var L=-1,$=c==null?0:c.length;++L<$;)if(p(v,c[L]))return!0;return!1}function _n(c,v){for(var p=-1,L=c==null?0:c.length,$=Array(L);++p<L;)$[p]=v(c[p],p,c);return $}function Wt(c,v){for(var p=-1,L=v.length,$=c.length;++p<L;)c[$+p]=v[p];return c}function ui(c,v,p,L){var $=-1,un=c==null?0:c.length;for(L&&un&&(p=c[++$]);++$<un;)p=v(p,c[$],$,c);return p}function ca(c,v,p,L){var $=c==null?0:c.length;for(L&&$&&(p=c[--$]);$--;)p=v(p,c[$],$,c);return p}function oi(c,v){for(var p=-1,L=c==null?0:c.length;++p<L;)if(v(c[p],p,c))return!0;return!1}var ha=fi("length");function ga(c){return c.split("")}function pa(c){return c.match(Af)||[]}function qs(c,v,p){var L;return p(c,function($,un,Ln){if(v($,un,Ln))return L=un,!1}),L}function rr(c,v,p,L){for(var $=c.length,un=p+(L?1:-1);L?un--:++un<$;)if(v(c[un],un,c))return un;return-1}function _e(c,v,p){return v===v?Ca(c,v,p):rr(c,Vs,p)}function da(c,v,p,L){for(var $=p-1,un=c.length;++$<un;)if(L(c[$],v))return $;return-1}function Vs(c){return c!==c}function Ys(c,v){var p=c==null?0:c.length;return p?li(c,v)/p:On}function fi(c){return function(v){return v==null?i:v[c]}}function ai(c){return function(v){return c==null?i:c[v]}}function Xs(c,v,p,L,$){return $(c,function(un,Ln,cn){p=L?(L=!1,un):v(p,un,Ln,cn)}),p}function _a(c,v){var p=c.length;for(c.sort(v);p--;)c[p]=c[p].value;return c}function li(c,v){for(var p,L=-1,$=c.length;++L<$;){var un=v(c[L]);un!==i&&(p=p===i?un:p+un)}return p}function ci(c,v){for(var p=-1,L=Array(c);++p<c;)L[p]=v(p);return L}function va(c,v){return _n(v,function(p){return[p,c[p]]})}function Js(c){return c&&c.slice(0,tu(c)+1).replace(Jr,"")}function Qn(c){return function(v){return c(v)}}function hi(c,v){return _n(v,function(p){return c[p]})}function Te(c,v){return c.has(v)}function Qs(c,v){for(var p=-1,L=c.length;++p<L&&_e(v,c[p],0)>-1;);return p}function js(c,v){for(var p=c.length;p--&&_e(v,c[p],0)>-1;);return p}function wa(c,v){for(var p=c.length,L=0;p--;)c[p]===v&&++L;return L}var xa=ai(ea),ma=ai(ra);function ya(c){return"\\"+sa[c]}function Aa(c,v){return c==null?i:c[v]}function ve(c){return Qf.test(c)}function Sa(c){return jf.test(c)}function Ia(c){for(var v,p=[];!(v=c.next()).done;)p.push(v.value);return p}function gi(c){var v=-1,p=Array(c.size);return c.forEach(function(L,$){p[++v]=[$,L]}),p}function nu(c,v){return function(p){return c(v(p))}}function Nt(c,v){for(var p=-1,L=c.length,$=0,un=[];++p<L;){var Ln=c[p];(Ln===v||Ln===P)&&(c[p]=P,un[$++]=p)}return un}function ir(c){var v=-1,p=Array(c.size);return c.forEach(function(L){p[++v]=L}),p}function Ea(c){var v=-1,p=Array(c.size);return c.forEach(function(L){p[++v]=[L,L]}),p}function Ca(c,v,p){for(var L=p-1,$=c.length;++L<$;)if(c[L]===v)return L;return-1}function La(c,v,p){for(var L=p+1;L--;)if(c[L]===v)return L;return L}function we(c){return ve(c)?Ra(c):ha(c)}function vt(c){return ve(c)?ba(c):ga(c)}function tu(c){for(var v=c.length;v--&&wf.test(c.charAt(v)););return v}var Ma=ai(ia);function Ra(c){for(var v=ei.lastIndex=0;ei.test(c);)++v;return v}function ba(c){return c.match(ei)||[]}function Oa(c){return c.match(Jf)||[]}var Ta=function c(v){v=v==null?Fn:xe.defaults(Fn.Object(),v,xe.pick(Fn,na));var p=v.Array,L=v.Date,$=v.Error,un=v.Function,Ln=v.Math,cn=v.Object,pi=v.RegExp,Pa=v.String,ot=v.TypeError,sr=p.prototype,Da=un.prototype,me=cn.prototype,ur=v["__core-js_shared__"],or=Da.toString,fn=me.hasOwnProperty,Fa=0,eu=function(){var n=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),fr=me.toString,Ua=or.call(cn),Ba=Fn._,Wa=pi("^"+or.call(fn).replace(Xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=Ns?v.Buffer:i,kt=v.Symbol,lr=v.Uint8Array,ru=ar?ar.allocUnsafe:i,cr=nu(cn.getPrototypeOf,cn),iu=cn.create,su=me.propertyIsEnumerable,hr=sr.splice,uu=kt?kt.isConcatSpreadable:i,Pe=kt?kt.iterator:i,re=kt?kt.toStringTag:i,gr=function(){try{var n=fe(cn,"defineProperty");return n({},"",{}),n}catch{}}(),Na=v.clearTimeout!==Fn.clearTimeout&&v.clearTimeout,ka=L&&L.now!==Fn.Date.now&&L.now,Ga=v.setTimeout!==Fn.setTimeout&&v.setTimeout,pr=Ln.ceil,dr=Ln.floor,di=cn.getOwnPropertySymbols,$a=ar?ar.isBuffer:i,ou=v.isFinite,Ha=sr.join,Za=nu(cn.keys,cn),Mn=Ln.max,Bn=Ln.min,Ka=L.now,za=v.parseInt,fu=Ln.random,qa=sr.reverse,_i=fe(v,"DataView"),De=fe(v,"Map"),vi=fe(v,"Promise"),ye=fe(v,"Set"),Fe=fe(v,"WeakMap"),Ue=fe(cn,"create"),_r=Fe&&new Fe,Ae={},Va=ae(_i),Ya=ae(De),Xa=ae(vi),Ja=ae(ye),Qa=ae(Fe),vr=kt?kt.prototype:i,Be=vr?vr.valueOf:i,au=vr?vr.toString:i;function u(n){if(mn(n)&&!K(n)&&!(n instanceof j)){if(n instanceof ft)return n;if(fn.call(n,"__wrapped__"))return lo(n)}return new ft(n)}var Se=function(){function n(){}return function(t){if(!vn(t))return{};if(iu)return iu(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function wr(){}function ft(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}u.templateSettings={escape:hf,evaluate:gf,interpolate:ws,variable:"",imports:{_:u}},u.prototype=wr.prototype,u.prototype.constructor=u,ft.prototype=Se(wr.prototype),ft.prototype.constructor=ft;function j(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xn,this.__views__=[]}function ja(){var n=new j(this.__wrapped__);return n.__actions__=Kn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Kn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Kn(this.__views__),n}function nl(){if(this.__filtered__){var n=new j(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function tl(){var n=this.__wrapped__.value(),t=this.__dir__,e=K(n),r=t<0,s=e?n.length:0,o=gc(0,s,this.__views__),a=o.start,l=o.end,h=l-a,w=r?l:a-1,x=this.__iteratees__,y=x.length,C=0,R=Bn(h,this.__takeCount__);if(!e||!r&&s==h&&R==h)return Pu(n,this.__actions__);var D=[];n:for(;h--&&C<R;){w+=t;for(var V=-1,F=n[w];++V<y;){var Q=x[V],nn=Q.iteratee,tt=Q.type,Hn=nn(F);if(tt==Yn)F=Hn;else if(!Hn){if(tt==gt)continue n;break n}}D[C++]=F}return D}j.prototype=Se(wr.prototype),j.prototype.constructor=j;function ie(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function el(){this.__data__=Ue?Ue(null):{},this.size=0}function rl(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function il(n){var t=this.__data__;if(Ue){var e=t[n];return e===m?i:e}return fn.call(t,n)?t[n]:i}function sl(n){var t=this.__data__;return Ue?t[n]!==i:fn.call(t,n)}function ul(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ue&&t===i?m:t,this}ie.prototype.clear=el,ie.prototype.delete=rl,ie.prototype.get=il,ie.prototype.has=sl,ie.prototype.set=ul;function Lt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function ol(){this.__data__=[],this.size=0}function fl(n){var t=this.__data__,e=xr(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():hr.call(t,e,1),--this.size,!0}function al(n){var t=this.__data__,e=xr(t,n);return e<0?i:t[e][1]}function ll(n){return xr(this.__data__,n)>-1}function cl(n,t){var e=this.__data__,r=xr(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}Lt.prototype.clear=ol,Lt.prototype.delete=fl,Lt.prototype.get=al,Lt.prototype.has=ll,Lt.prototype.set=cl;function Mt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function hl(){this.size=0,this.__data__={hash:new ie,map:new(De||Lt),string:new ie}}function gl(n){var t=Or(this,n).delete(n);return this.size-=t?1:0,t}function pl(n){return Or(this,n).get(n)}function dl(n){return Or(this,n).has(n)}function _l(n,t){var e=Or(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}Mt.prototype.clear=hl,Mt.prototype.delete=gl,Mt.prototype.get=pl,Mt.prototype.has=dl,Mt.prototype.set=_l;function se(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Mt;++t<e;)this.add(n[t])}function vl(n){return this.__data__.set(n,m),this}function wl(n){return this.__data__.has(n)}se.prototype.add=se.prototype.push=vl,se.prototype.has=wl;function wt(n){var t=this.__data__=new Lt(n);this.size=t.size}function xl(){this.__data__=new Lt,this.size=0}function ml(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function yl(n){return this.__data__.get(n)}function Al(n){return this.__data__.has(n)}function Sl(n,t){var e=this.__data__;if(e instanceof Lt){var r=e.__data__;if(!De||r.length<d-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Mt(r)}return e.set(n,t),this.size=e.size,this}wt.prototype.clear=xl,wt.prototype.delete=ml,wt.prototype.get=yl,wt.prototype.has=Al,wt.prototype.set=Sl;function lu(n,t){var e=K(n),r=!e&&le(n),s=!e&&!r&&Kt(n),o=!e&&!r&&!s&&Le(n),a=e||r||s||o,l=a?ci(n.length,Pa):[],h=l.length;for(var w in n)(t||fn.call(n,w))&&!(a&&(w=="length"||s&&(w=="offset"||w=="parent")||o&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Tt(w,h)))&&l.push(w);return l}function cu(n){var t=n.length;return t?n[Mi(0,t-1)]:i}function Il(n,t){return Tr(Kn(n),ue(t,0,n.length))}function El(n){return Tr(Kn(n))}function wi(n,t,e){(e!==i&&!xt(n[t],e)||e===i&&!(t in n))&&Rt(n,t,e)}function We(n,t,e){var r=n[t];(!(fn.call(n,t)&&xt(r,e))||e===i&&!(t in n))&&Rt(n,t,e)}function xr(n,t){for(var e=n.length;e--;)if(xt(n[e][0],t))return e;return-1}function Cl(n,t,e,r){return Gt(n,function(s,o,a){t(r,s,e(s),a)}),r}function hu(n,t){return n&&It(t,Pn(t),n)}function Ll(n,t){return n&&It(t,qn(t),n)}function Rt(n,t,e){t=="__proto__"&&gr?gr(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function xi(n,t){for(var e=-1,r=t.length,s=p(r),o=n==null;++e<r;)s[e]=o?i:ji(n,t[e]);return s}function ue(n,t,e){return n===n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function at(n,t,e,r,s,o){var a,l=t&M,h=t&N,w=t&H;if(e&&(a=s?e(n,r,s,o):e(n)),a!==i)return a;if(!vn(n))return n;var x=K(n);if(x){if(a=dc(n),!l)return Kn(n,a)}else{var y=Wn(n),C=y==Jt||y==Je;if(Kt(n))return Uu(n,l);if(y==dt||y==Ut||C&&!s){if(a=h||C?{}:to(n),!l)return h?ic(n,Ll(a,n)):rc(n,hu(a,n))}else{if(!hn[y])return s?n:{};a=_c(n,y,l)}}o||(o=new wt);var R=o.get(n);if(R)return R;o.set(n,a),Oo(n)?n.forEach(function(F){a.add(at(F,t,e,F,n,o))}):Ro(n)&&n.forEach(function(F,Q){a.set(Q,at(F,t,e,Q,n,o))});var D=w?h?Ni:Wi:h?qn:Pn,V=x?i:D(n);return ut(V||n,function(F,Q){V&&(Q=F,F=n[Q]),We(a,Q,at(F,t,e,Q,n,o))}),a}function Ml(n){var t=Pn(n);return function(e){return gu(e,n,t)}}function gu(n,t,e){var r=e.length;if(n==null)return!r;for(n=cn(n);r--;){var s=e[r],o=t[s],a=n[s];if(a===i&&!(s in n)||!o(a))return!1}return!0}function pu(n,t,e){if(typeof n!="function")throw new ot(I);return Ke(function(){n.apply(i,e)},t)}function Ne(n,t,e,r){var s=-1,o=er,a=!0,l=n.length,h=[],w=t.length;if(!l)return h;e&&(t=_n(t,Qn(e))),r?(o=si,a=!1):t.length>=d&&(o=Te,a=!1,t=new se(t));n:for(;++s<l;){var x=n[s],y=e==null?x:e(x);if(x=r||x!==0?x:0,a&&y===y){for(var C=w;C--;)if(t[C]===y)continue n;h.push(x)}else o(t,y,r)||h.push(x)}return h}var Gt=Gu(St),du=Gu(yi,!0);function Rl(n,t){var e=!0;return Gt(n,function(r,s,o){return e=!!t(r,s,o),e}),e}function mr(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],a=t(o);if(a!=null&&(l===i?a===a&&!nt(a):e(a,l)))var l=a,h=o}return h}function bl(n,t,e,r){var s=n.length;for(e=q(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:q(r),r<0&&(r+=s),r=e>r?0:Po(r);e<r;)n[e++]=t;return n}function _u(n,t){var e=[];return Gt(n,function(r,s,o){t(r,s,o)&&e.push(r)}),e}function Un(n,t,e,r,s){var o=-1,a=n.length;for(e||(e=wc),s||(s=[]);++o<a;){var l=n[o];t>0&&e(l)?t>1?Un(l,t-1,e,r,s):Wt(s,l):r||(s[s.length]=l)}return s}var mi=$u(),vu=$u(!0);function St(n,t){return n&&mi(n,t,Pn)}function yi(n,t){return n&&vu(n,t,Pn)}function yr(n,t){return Bt(t,function(e){return Pt(n[e])})}function oe(n,t){t=Ht(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[Et(t[e++])];return e&&e==r?n:i}function wu(n,t,e){var r=t(n);return K(n)?r:Wt(r,e(n))}function Gn(n){return n==null?n===i?b:Vr:re&&re in cn(n)?hc(n):Ec(n)}function Ai(n,t){return n>t}function Ol(n,t){return n!=null&&fn.call(n,t)}function Tl(n,t){return n!=null&&t in cn(n)}function Pl(n,t,e){return n>=Bn(t,e)&&n<Mn(t,e)}function Si(n,t,e){for(var r=e?si:er,s=n[0].length,o=n.length,a=o,l=p(o),h=1/0,w=[];a--;){var x=n[a];a&&t&&(x=_n(x,Qn(t))),h=Bn(x.length,h),l[a]=!e&&(t||s>=120&&x.length>=120)?new se(a&&x):i}x=n[0];var y=-1,C=l[0];n:for(;++y<s&&w.length<h;){var R=x[y],D=t?t(R):R;if(R=e||R!==0?R:0,!(C?Te(C,D):r(w,D,e))){for(a=o;--a;){var V=l[a];if(!(V?Te(V,D):r(n[a],D,e)))continue n}C&&C.push(D),w.push(R)}}return w}function Dl(n,t,e,r){return St(n,function(s,o,a){t(r,e(s),o,a)}),r}function ke(n,t,e){t=Ht(t,n),n=so(n,t);var r=n==null?n:n[Et(ct(t))];return r==null?i:Jn(r,n,e)}function xu(n){return mn(n)&&Gn(n)==Ut}function Fl(n){return mn(n)&&Gn(n)==U}function Ul(n){return mn(n)&&Gn(n)==Xt}function Ge(n,t,e,r,s){return n===t?!0:n==null||t==null||!mn(n)&&!mn(t)?n!==n&&t!==t:Bl(n,t,e,r,Ge,s)}function Bl(n,t,e,r,s,o){var a=K(n),l=K(t),h=a?ge:Wn(n),w=l?ge:Wn(t);h=h==Ut?dt:h,w=w==Ut?dt:w;var x=h==dt,y=w==dt,C=h==w;if(C&&Kt(n)){if(!Kt(t))return!1;a=!0,x=!1}if(C&&!x)return o||(o=new wt),a||Le(n)?Qu(n,t,e,r,s,o):lc(n,t,h,e,r,s,o);if(!(e&tn)){var R=x&&fn.call(n,"__wrapped__"),D=y&&fn.call(t,"__wrapped__");if(R||D){var V=R?n.value():n,F=D?t.value():t;return o||(o=new wt),s(V,F,e,r,o)}}return C?(o||(o=new wt),cc(n,t,e,r,s,o)):!1}function Wl(n){return mn(n)&&Wn(n)==Xn}function Ii(n,t,e,r){var s=e.length,o=s,a=!r;if(n==null)return!o;for(n=cn(n);s--;){var l=e[s];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<o;){l=e[s];var h=l[0],w=n[h],x=l[1];if(a&&l[2]){if(w===i&&!(h in n))return!1}else{var y=new wt;if(r)var C=r(w,x,h,n,t,y);if(!(C===i?Ge(x,w,tn|Y,r,y):C))return!1}}return!0}function mu(n){if(!vn(n)||mc(n))return!1;var t=Pt(n)?Wa:Mf;return t.test(ae(n))}function Nl(n){return mn(n)&&Gn(n)==jt}function kl(n){return mn(n)&&Wn(n)==Zn}function Gl(n){return mn(n)&&Wr(n.length)&&!!dn[Gn(n)]}function yu(n){return typeof n=="function"?n:n==null?Vn:typeof n=="object"?K(n)?Iu(n[0],n[1]):Su(n):Zo(n)}function Ei(n){if(!Ze(n))return Za(n);var t=[];for(var e in cn(n))fn.call(n,e)&&e!="constructor"&&t.push(e);return t}function $l(n){if(!vn(n))return Ic(n);var t=Ze(n),e=[];for(var r in n)r=="constructor"&&(t||!fn.call(n,r))||e.push(r);return e}function Ci(n,t){return n<t}function Au(n,t){var e=-1,r=zn(n)?p(n.length):[];return Gt(n,function(s,o,a){r[++e]=t(s,o,a)}),r}function Su(n){var t=Gi(n);return t.length==1&&t[0][2]?ro(t[0][0],t[0][1]):function(e){return e===n||Ii(e,n,t)}}function Iu(n,t){return Hi(n)&&eo(t)?ro(Et(n),t):function(e){var r=ji(e,n);return r===i&&r===t?ns(e,n):Ge(t,r,tn|Y)}}function Ar(n,t,e,r,s){n!==t&&mi(t,function(o,a){if(s||(s=new wt),vn(o))Hl(n,t,a,e,Ar,r,s);else{var l=r?r(Ki(n,a),o,a+"",n,t,s):i;l===i&&(l=o),wi(n,a,l)}},qn)}function Hl(n,t,e,r,s,o,a){var l=Ki(n,e),h=Ki(t,e),w=a.get(h);if(w){wi(n,e,w);return}var x=o?o(l,h,e+"",n,t,a):i,y=x===i;if(y){var C=K(h),R=!C&&Kt(h),D=!C&&!R&&Le(h);x=h,C||R||D?K(l)?x=l:An(l)?x=Kn(l):R?(y=!1,x=Uu(h,!0)):D?(y=!1,x=Bu(h,!0)):x=[]:ze(h)||le(h)?(x=l,le(l)?x=Do(l):(!vn(l)||Pt(l))&&(x=to(h))):y=!1}y&&(a.set(h,x),s(x,h,r,o,a),a.delete(h)),wi(n,e,x)}function Eu(n,t){var e=n.length;if(e)return t+=t<0?e:0,Tt(t,e)?n[t]:i}function Cu(n,t,e){t.length?t=_n(t,function(o){return K(o)?function(a){return oe(a,o.length===1?o[0]:o)}:o}):t=[Vn];var r=-1;t=_n(t,Qn(T()));var s=Au(n,function(o,a,l){var h=_n(t,function(w){return w(o)});return{criteria:h,index:++r,value:o}});return _a(s,function(o,a){return ec(o,a,e)})}function Zl(n,t){return Lu(n,t,function(e,r){return ns(n,r)})}function Lu(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var a=t[r],l=oe(n,a);e(l,a)&&$e(o,Ht(a,n),l)}return o}function Kl(n){return function(t){return oe(t,n)}}function Li(n,t,e,r){var s=r?da:_e,o=-1,a=t.length,l=n;for(n===t&&(t=Kn(t)),e&&(l=_n(n,Qn(e)));++o<a;)for(var h=0,w=t[o],x=e?e(w):w;(h=s(l,x,h,r))>-1;)l!==n&&hr.call(l,h,1),hr.call(n,h,1);return n}function Mu(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;Tt(s)?hr.call(n,s,1):Oi(n,s)}}return n}function Mi(n,t){return n+dr(fu()*(t-n+1))}function zl(n,t,e,r){for(var s=-1,o=Mn(pr((t-n)/(e||1)),0),a=p(o);o--;)a[r?o:++s]=n,n+=e;return a}function Ri(n,t){var e="";if(!n||t<1||t>In)return e;do t%2&&(e+=n),t=dr(t/2),t&&(n+=n);while(t);return e}function J(n,t){return zi(io(n,t,Vn),n+"")}function ql(n){return cu(Me(n))}function Vl(n,t){var e=Me(n);return Tr(e,ue(t,0,e.length))}function $e(n,t,e,r){if(!vn(n))return n;t=Ht(t,n);for(var s=-1,o=t.length,a=o-1,l=n;l!=null&&++s<o;){var h=Et(t[s]),w=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(s!=a){var x=l[h];w=r?r(x,h,l):i,w===i&&(w=vn(x)?x:Tt(t[s+1])?[]:{})}We(l,h,w),l=l[h]}return n}var Ru=_r?function(n,t){return _r.set(n,t),n}:Vn,Yl=gr?function(n,t){return gr(n,"toString",{configurable:!0,enumerable:!1,value:es(t),writable:!0})}:Vn;function Xl(n){return Tr(Me(n))}function lt(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=p(s);++r<s;)o[r]=n[r+t];return o}function Jl(n,t){var e;return Gt(n,function(r,s,o){return e=t(r,s,o),!e}),!!e}function Sr(n,t,e){var r=0,s=n==null?r:n.length;if(typeof t=="number"&&t===t&&s<=Kr){for(;r<s;){var o=r+s>>>1,a=n[o];a!==null&&!nt(a)&&(e?a<=t:a<t)?r=o+1:s=o}return s}return bi(n,t,Vn,e)}function bi(n,t,e,r){var s=0,o=n==null?0:n.length;if(o===0)return 0;t=e(t);for(var a=t!==t,l=t===null,h=nt(t),w=t===i;s<o;){var x=dr((s+o)/2),y=e(n[x]),C=y!==i,R=y===null,D=y===y,V=nt(y);if(a)var F=r||D;else w?F=D&&(r||C):l?F=D&&C&&(r||!R):h?F=D&&C&&!R&&(r||!V):R||V?F=!1:F=r?y<=t:y<t;F?s=x+1:o=x}return Bn(o,Re)}function bu(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!xt(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function Ou(n){return typeof n=="number"?n:nt(n)?On:+n}function jn(n){if(typeof n=="string")return n;if(K(n))return _n(n,jn)+"";if(nt(n))return au?au.call(n):"";var t=n+"";return t=="0"&&1/n==-Dn?"-0":t}function $t(n,t,e){var r=-1,s=er,o=n.length,a=!0,l=[],h=l;if(e)a=!1,s=si;else if(o>=d){var w=t?null:fc(n);if(w)return ir(w);a=!1,s=Te,h=new se}else h=t?[]:l;n:for(;++r<o;){var x=n[r],y=t?t(x):x;if(x=e||x!==0?x:0,a&&y===y){for(var C=h.length;C--;)if(h[C]===y)continue n;t&&h.push(y),l.push(x)}else s(h,y,e)||(h!==l&&h.push(y),l.push(x))}return l}function Oi(n,t){return t=Ht(t,n),n=so(n,t),n==null||delete n[Et(ct(t))]}function Tu(n,t,e,r){return $e(n,t,e(oe(n,t)),r)}function Ir(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?lt(n,r?0:o,r?o+1:s):lt(n,r?o+1:0,r?s:o)}function Pu(n,t){var e=n;return e instanceof j&&(e=e.value()),ui(t,function(r,s){return s.func.apply(s.thisArg,Wt([r],s.args))},e)}function Ti(n,t,e){var r=n.length;if(r<2)return r?$t(n[0]):[];for(var s=-1,o=p(r);++s<r;)for(var a=n[s],l=-1;++l<r;)l!=s&&(o[s]=Ne(o[s]||a,n[l],t,e));return $t(Un(o,1),t,e)}function Du(n,t,e){for(var r=-1,s=n.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:i;e(a,n[r],l)}return a}function Pi(n){return An(n)?n:[]}function Di(n){return typeof n=="function"?n:Vn}function Ht(n,t){return K(n)?n:Hi(n,t)?[n]:ao(on(n))}var Ql=J;function Zt(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:lt(n,t,e)}var Fu=Na||function(n){return Fn.clearTimeout(n)};function Uu(n,t){if(t)return n.slice();var e=n.length,r=ru?ru(e):new n.constructor(e);return n.copy(r),r}function Fi(n){var t=new n.constructor(n.byteLength);return new lr(t).set(new lr(n)),t}function jl(n,t){var e=t?Fi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}function nc(n){var t=new n.constructor(n.source,xs.exec(n));return t.lastIndex=n.lastIndex,t}function tc(n){return Be?cn(Be.call(n)):{}}function Bu(n,t){var e=t?Fi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function Wu(n,t){if(n!==t){var e=n!==i,r=n===null,s=n===n,o=nt(n),a=t!==i,l=t===null,h=t===t,w=nt(t);if(!l&&!w&&!o&&n>t||o&&a&&h&&!l&&!w||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!w&&n<t||w&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function ec(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,a=s.length,l=e.length;++r<a;){var h=Wu(s[r],o[r]);if(h){if(r>=l)return h;var w=e[r];return h*(w=="desc"?-1:1)}}return n.index-t.index}function Nu(n,t,e,r){for(var s=-1,o=n.length,a=e.length,l=-1,h=t.length,w=Mn(o-a,0),x=p(h+w),y=!r;++l<h;)x[l]=t[l];for(;++s<a;)(y||s<o)&&(x[e[s]]=n[s]);for(;w--;)x[l++]=n[s++];return x}function ku(n,t,e,r){for(var s=-1,o=n.length,a=-1,l=e.length,h=-1,w=t.length,x=Mn(o-l,0),y=p(x+w),C=!r;++s<x;)y[s]=n[s];for(var R=s;++h<w;)y[R+h]=t[h];for(;++a<l;)(C||s<o)&&(y[R+e[a]]=n[s++]);return y}function Kn(n,t){var e=-1,r=n.length;for(t||(t=p(r));++e<r;)t[e]=n[e];return t}function It(n,t,e,r){var s=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var l=t[o],h=r?r(e[l],n[l],l,e,n):i;h===i&&(h=n[l]),s?Rt(e,l,h):We(e,l,h)}return e}function rc(n,t){return It(n,$i(n),t)}function ic(n,t){return It(n,ju(n),t)}function Er(n,t){return function(e,r){var s=K(e)?aa:Cl,o=t?t():{};return s(e,n,T(r,2),o)}}function Ie(n){return J(function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=n.length>3&&typeof o=="function"?(s--,o):i,a&&$n(e[0],e[1],a)&&(o=s<3?i:o,s=1),t=cn(t);++r<s;){var l=e[r];l&&n(t,l,r,o)}return t})}function Gu(n,t){return function(e,r){if(e==null)return e;if(!zn(e))return n(e,r);for(var s=e.length,o=t?s:-1,a=cn(e);(t?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function $u(n){return function(t,e,r){for(var s=-1,o=cn(t),a=r(t),l=a.length;l--;){var h=a[n?l:++s];if(e(o[h],h,o)===!1)break}return t}}function sc(n,t,e){var r=t&Z,s=He(n);function o(){var a=this&&this!==Fn&&this instanceof o?s:n;return a.apply(r?e:this,arguments)}return o}function Hu(n){return function(t){t=on(t);var e=ve(t)?vt(t):i,r=e?e[0]:t.charAt(0),s=e?Zt(e,1).join(""):t.slice(1);return r[n]()+s}}function Ee(n){return function(t){return ui($o(Go(t).replace(Yf,"")),n,"")}}function He(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Se(n.prototype),r=n.apply(e,t);return vn(r)?r:e}}function uc(n,t,e){var r=He(n);function s(){for(var o=arguments.length,a=p(o),l=o,h=Ce(s);l--;)a[l]=arguments[l];var w=o<3&&a[0]!==h&&a[o-1]!==h?[]:Nt(a,h);if(o-=w.length,o<e)return Vu(n,t,Cr,s.placeholder,i,a,w,i,i,e-o);var x=this&&this!==Fn&&this instanceof s?r:n;return Jn(x,this,a)}return s}function Zu(n){return function(t,e,r){var s=cn(t);if(!zn(t)){var o=T(e,3);t=Pn(t),e=function(l){return o(s[l],l,s)}}var a=n(t,e,r);return a>-1?s[o?t[a]:a]:i}}function Ku(n){return Ot(function(t){var e=t.length,r=e,s=ft.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new ot(I);if(s&&!a&&br(o)=="wrapper")var a=new ft([],!0)}for(r=a?r:e;++r<e;){o=t[r];var l=br(o),h=l=="wrapper"?ki(o):i;h&&Zi(h[0])&&h[1]==(z|an|gn|Cn)&&!h[4].length&&h[9]==1?a=a[br(h[0])].apply(a,h[3]):a=o.length==1&&Zi(o)?a[l]():a.thru(o)}return function(){var w=arguments,x=w[0];if(a&&w.length==1&&K(x))return a.plant(x).value();for(var y=0,C=e?t[y].apply(this,w):x;++y<e;)C=t[y].call(this,C);return C}})}function Cr(n,t,e,r,s,o,a,l,h,w){var x=t&z,y=t&Z,C=t&X,R=t&(an|Rn),D=t&it,V=C?i:He(n);function F(){for(var Q=arguments.length,nn=p(Q),tt=Q;tt--;)nn[tt]=arguments[tt];if(R)var Hn=Ce(F),et=wa(nn,Hn);if(r&&(nn=Nu(nn,r,s,R)),o&&(nn=ku(nn,o,a,R)),Q-=et,R&&Q<w){var Sn=Nt(nn,Hn);return Vu(n,t,Cr,F.placeholder,e,nn,Sn,l,h,w-Q)}var mt=y?e:this,Ft=C?mt[n]:n;return Q=nn.length,l?nn=Cc(nn,l):D&&Q>1&&nn.reverse(),x&&h<Q&&(nn.length=h),this&&this!==Fn&&this instanceof F&&(Ft=V||He(Ft)),Ft.apply(mt,nn)}return F}function zu(n,t){return function(e,r){return Dl(e,n,t(r),{})}}function Lr(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=jn(e),r=jn(r)):(e=Ou(e),r=Ou(r)),s=n(e,r)}return s}}function Ui(n){return Ot(function(t){return t=_n(t,Qn(T())),J(function(e){var r=this;return n(t,function(s){return Jn(s,r,e)})})})}function Mr(n,t){t=t===i?" ":jn(t);var e=t.length;if(e<2)return e?Ri(t,n):t;var r=Ri(t,pr(n/we(t)));return ve(t)?Zt(vt(r),0,n).join(""):r.slice(0,n)}function oc(n,t,e,r){var s=t&Z,o=He(n);function a(){for(var l=-1,h=arguments.length,w=-1,x=r.length,y=p(x+h),C=this&&this!==Fn&&this instanceof a?o:n;++w<x;)y[w]=r[w];for(;h--;)y[w++]=arguments[++l];return Jn(C,s?e:this,y)}return a}function qu(n){return function(t,e,r){return r&&typeof r!="number"&&$n(t,e,r)&&(e=r=i),t=Dt(t),e===i?(e=t,t=0):e=Dt(e),r=r===i?t<e?1:-1:Dt(r),zl(t,e,r,n)}}function Rr(n){return function(t,e){return typeof t=="string"&&typeof e=="string"||(t=ht(t),e=ht(e)),n(t,e)}}function Vu(n,t,e,r,s,o,a,l,h,w){var x=t&an,y=x?a:i,C=x?i:a,R=x?o:i,D=x?i:o;t|=x?gn:bn,t&=~(x?bn:gn),t&wn||(t&=~(Z|X));var V=[n,t,s,R,y,D,C,l,h,w],F=e.apply(i,V);return Zi(n)&&uo(F,V),F.placeholder=r,oo(F,n,t)}function Bi(n){var t=Ln[n];return function(e,r){if(e=ht(e),r=r==null?0:Bn(q(r),292),r&&ou(e)){var s=(on(e)+"e").split("e"),o=t(s[0]+"e"+(+s[1]+r));return s=(on(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return t(e)}}var fc=ye&&1/ir(new ye([,-0]))[1]==Dn?function(n){return new ye(n)}:ss;function Yu(n){return function(t){var e=Wn(t);return e==Xn?gi(t):e==Zn?Ea(t):va(t,n(t))}}function bt(n,t,e,r,s,o,a,l){var h=t&X;if(!h&&typeof n!="function")throw new ot(I);var w=r?r.length:0;if(w||(t&=~(gn|bn),r=s=i),a=a===i?a:Mn(q(a),0),l=l===i?l:q(l),w-=s?s.length:0,t&bn){var x=r,y=s;r=s=i}var C=h?i:ki(n),R=[n,t,e,r,s,x,y,o,a,l];if(C&&Sc(R,C),n=R[0],t=R[1],e=R[2],r=R[3],s=R[4],l=R[9]=R[9]===i?h?0:n.length:Mn(R[9]-w,0),!l&&t&(an|Rn)&&(t&=~(an|Rn)),!t||t==Z)var D=sc(n,t,e);else t==an||t==Rn?D=uc(n,t,l):(t==gn||t==(Z|gn))&&!s.length?D=oc(n,t,e,r):D=Cr.apply(i,R);var V=C?Ru:uo;return oo(V(D,R),n,t)}function Xu(n,t,e,r){return n===i||xt(n,me[e])&&!fn.call(r,e)?t:n}function Ju(n,t,e,r,s,o){return vn(n)&&vn(t)&&(o.set(t,n),Ar(n,t,i,Ju,o),o.delete(t)),n}function ac(n){return ze(n)?i:n}function Qu(n,t,e,r,s,o){var a=e&tn,l=n.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var w=o.get(n),x=o.get(t);if(w&&x)return w==t&&x==n;var y=-1,C=!0,R=e&Y?new se:i;for(o.set(n,t),o.set(t,n);++y<l;){var D=n[y],V=t[y];if(r)var F=a?r(V,D,y,t,n,o):r(D,V,y,n,t,o);if(F!==i){if(F)continue;C=!1;break}if(R){if(!oi(t,function(Q,nn){if(!Te(R,nn)&&(D===Q||s(D,Q,e,r,o)))return R.push(nn)})){C=!1;break}}else if(!(D===V||s(D,V,e,r,o))){C=!1;break}}return o.delete(n),o.delete(t),C}function lc(n,t,e,r,s,o,a){switch(e){case en:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case U:return!(n.byteLength!=t.byteLength||!o(new lr(n),new lr(t)));case Yt:case Xt:case Qt:return xt(+n,+t);case pe:return n.name==t.name&&n.message==t.message;case jt:case ne:return n==t+"";case Xn:var l=gi;case Zn:var h=r&tn;if(l||(l=ir),n.size!=t.size&&!h)return!1;var w=a.get(n);if(w)return w==t;r|=Y,a.set(n,t);var x=Qu(l(n),l(t),r,s,o,a);return a.delete(n),x;case A:if(Be)return Be.call(n)==Be.call(t)}return!1}function cc(n,t,e,r,s,o){var a=e&tn,l=Wi(n),h=l.length,w=Wi(t),x=w.length;if(h!=x&&!a)return!1;for(var y=h;y--;){var C=l[y];if(!(a?C in t:fn.call(t,C)))return!1}var R=o.get(n),D=o.get(t);if(R&&D)return R==t&&D==n;var V=!0;o.set(n,t),o.set(t,n);for(var F=a;++y<h;){C=l[y];var Q=n[C],nn=t[C];if(r)var tt=a?r(nn,Q,C,t,n,o):r(Q,nn,C,n,t,o);if(!(tt===i?Q===nn||s(Q,nn,e,r,o):tt)){V=!1;break}F||(F=C=="constructor")}if(V&&!F){var Hn=n.constructor,et=t.constructor;Hn!=et&&"constructor"in n&&"constructor"in t&&!(typeof Hn=="function"&&Hn instanceof Hn&&typeof et=="function"&&et instanceof et)&&(V=!1)}return o.delete(n),o.delete(t),V}function Ot(n){return zi(io(n,i,go),n+"")}function Wi(n){return wu(n,Pn,$i)}function Ni(n){return wu(n,qn,ju)}var ki=_r?function(n){return _r.get(n)}:ss;function br(n){for(var t=n.name+"",e=Ae[t],r=fn.call(Ae,t)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==n)return s.name}return t}function Ce(n){var t=fn.call(u,"placeholder")?u:n;return t.placeholder}function T(){var n=u.iteratee||rs;return n=n===rs?yu:n,arguments.length?n(arguments[0],arguments[1]):n}function Or(n,t){var e=n.__data__;return xc(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Gi(n){for(var t=Pn(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,eo(s)]}return t}function fe(n,t){var e=Aa(n,t);return mu(e)?e:i}function hc(n){var t=fn.call(n,re),e=n[re];try{n[re]=i;var r=!0}catch{}var s=fr.call(n);return r&&(t?n[re]=e:delete n[re]),s}var $i=di?function(n){return n==null?[]:(n=cn(n),Bt(di(n),function(t){return su.call(n,t)}))}:us,ju=di?function(n){for(var t=[];n;)Wt(t,$i(n)),n=cr(n);return t}:us,Wn=Gn;(_i&&Wn(new _i(new ArrayBuffer(1)))!=en||De&&Wn(new De)!=Xn||vi&&Wn(vi.resolve())!=Qe||ye&&Wn(new ye)!=Zn||Fe&&Wn(new Fe)!=O)&&(Wn=function(n){var t=Gn(n),e=t==dt?n.constructor:i,r=e?ae(e):"";if(r)switch(r){case Va:return en;case Ya:return Xn;case Xa:return Qe;case Ja:return Zn;case Qa:return O}return t});function gc(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=Bn(t,n+a);break;case"takeRight":n=Mn(n,t-a);break}}return{start:n,end:t}}function pc(n){var t=n.match(mf);return t?t[1].split(yf):[]}function no(n,t,e){t=Ht(t,n);for(var r=-1,s=t.length,o=!1;++r<s;){var a=Et(t[r]);if(!(o=n!=null&&e(n,a)))break;n=n[a]}return o||++r!=s?o:(s=n==null?0:n.length,!!s&&Wr(s)&&Tt(a,s)&&(K(n)||le(n)))}function dc(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&fn.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function to(n){return typeof n.constructor=="function"&&!Ze(n)?Se(cr(n)):{}}function _c(n,t,e){var r=n.constructor;switch(t){case U:return Fi(n);case Yt:case Xt:return new r(+n);case en:return jl(n,e);case sn:case ln:case En:case Tn:case _t:case yt:case te:case Oe:case At:return Bu(n,e);case Xn:return new r;case Qt:case ne:return new r(n);case jt:return nc(n);case Zn:return new r;case A:return tc(n)}}function vc(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(xf,`{
/* [wrapped with `+t+`] */
`)}function wc(n){return K(n)||le(n)||!!(uu&&n&&n[uu])}function Tt(n,t){var e=typeof n;return t=t??In,!!t&&(e=="number"||e!="symbol"&&bf.test(n))&&n>-1&&n%1==0&&n<t}function $n(n,t,e){if(!vn(e))return!1;var r=typeof t;return(r=="number"?zn(e)&&Tt(t,e.length):r=="string"&&t in e)?xt(e[t],n):!1}function Hi(n,t){if(K(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||nt(n)?!0:df.test(n)||!pf.test(n)||t!=null&&n in cn(t)}function xc(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Zi(n){var t=br(n),e=u[t];if(typeof e!="function"||!(t in j.prototype))return!1;if(n===e)return!0;var r=ki(e);return!!r&&n===r[0]}function mc(n){return!!eu&&eu in n}var yc=ur?Pt:os;function Ze(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||me;return n===e}function eo(n){return n===n&&!vn(n)}function ro(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==i||n in cn(e))}}function Ac(n){var t=Ur(n,function(r){return e.size===B&&e.clear(),r}),e=t.cache;return t}function Sc(n,t){var e=n[1],r=t[1],s=e|r,o=s<(Z|X|z),a=r==z&&e==an||r==z&&e==Cn&&n[7].length<=t[8]||r==(z|Cn)&&t[7].length<=t[8]&&e==an;if(!(o||a))return n;r&Z&&(n[2]=t[2],s|=e&Z?0:wn);var l=t[3];if(l){var h=n[3];n[3]=h?Nu(h,l,t[4]):l,n[4]=h?Nt(n[3],P):t[4]}return l=t[5],l&&(h=n[5],n[5]=h?ku(h,l,t[6]):l,n[6]=h?Nt(n[5],P):t[6]),l=t[7],l&&(n[7]=l),r&z&&(n[8]=n[8]==null?t[8]:Bn(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}function Ic(n){var t=[];if(n!=null)for(var e in cn(n))t.push(e);return t}function Ec(n){return fr.call(n)}function io(n,t,e){return t=Mn(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=Mn(r.length-t,0),a=p(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=p(t+1);++s<t;)l[s]=r[s];return l[t]=e(a),Jn(n,this,l)}}function so(n,t){return t.length<2?n:oe(n,lt(t,0,-1))}function Cc(n,t){for(var e=n.length,r=Bn(t.length,e),s=Kn(n);r--;){var o=t[r];n[r]=Tt(o,e)?s[o]:i}return n}function Ki(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var uo=fo(Ru),Ke=Ga||function(n,t){return Fn.setTimeout(n,t)},zi=fo(Yl);function oo(n,t,e){var r=t+"";return zi(n,vc(r,Lc(pc(r),e)))}function fo(n){var t=0,e=0;return function(){var r=Ka(),s=kn-(r-e);if(e=r,s>0){if(++t>=yn)return arguments[0]}else t=0;return n.apply(i,arguments)}}function Tr(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=Mi(e,s),a=n[o];n[o]=n[e],n[e]=a}return n.length=t,n}var ao=Ac(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(_f,function(e,r,s,o){t.push(s?o.replace(If,"$1"):r||e)}),t});function Et(n){if(typeof n=="string"||nt(n))return n;var t=n+"";return t=="0"&&1/n==-Dn?"-0":t}function ae(n){if(n!=null){try{return or.call(n)}catch{}try{return n+""}catch{}}return""}function Lc(n,t){return ut(zr,function(e){var r="_."+e[0];t&e[1]&&!er(n,r)&&n.push(r)}),n.sort()}function lo(n){if(n instanceof j)return n.clone();var t=new ft(n.__wrapped__,n.__chain__);return t.__actions__=Kn(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Mc(n,t,e){(e?$n(n,t,e):t===i)?t=1:t=Mn(q(t),0);var r=n==null?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,a=p(pr(r/t));s<r;)a[o++]=lt(n,s,s+=t);return a}function Rc(n){for(var t=-1,e=n==null?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s}function bc(){var n=arguments.length;if(!n)return[];for(var t=p(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return Wt(K(e)?Kn(e):[e],Un(t,1))}var Oc=J(function(n,t){return An(n)?Ne(n,Un(t,1,An,!0)):[]}),Tc=J(function(n,t){var e=ct(t);return An(e)&&(e=i),An(n)?Ne(n,Un(t,1,An,!0),T(e,2)):[]}),Pc=J(function(n,t){var e=ct(t);return An(e)&&(e=i),An(n)?Ne(n,Un(t,1,An,!0),i,e):[]});function Dc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:q(t),lt(n,t<0?0:t,r)):[]}function Fc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:q(t),t=r-t,lt(n,0,t<0?0:t)):[]}function Uc(n,t){return n&&n.length?Ir(n,T(t,3),!0,!0):[]}function Bc(n,t){return n&&n.length?Ir(n,T(t,3),!0):[]}function Wc(n,t,e,r){var s=n==null?0:n.length;return s?(e&&typeof e!="number"&&$n(n,t,e)&&(e=0,r=s),bl(n,t,e,r)):[]}function co(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:q(e);return s<0&&(s=Mn(r+s,0)),rr(n,T(t,3),s)}function ho(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=q(e),s=e<0?Mn(r+s,0):Bn(s,r-1)),rr(n,T(t,3),s,!0)}function go(n){var t=n==null?0:n.length;return t?Un(n,1):[]}function Nc(n){var t=n==null?0:n.length;return t?Un(n,Dn):[]}function kc(n,t){var e=n==null?0:n.length;return e?(t=t===i?1:q(t),Un(n,t)):[]}function Gc(n){for(var t=-1,e=n==null?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r}function po(n){return n&&n.length?n[0]:i}function $c(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:q(e);return s<0&&(s=Mn(r+s,0)),_e(n,t,s)}function Hc(n){var t=n==null?0:n.length;return t?lt(n,0,-1):[]}var Zc=J(function(n){var t=_n(n,Pi);return t.length&&t[0]===n[0]?Si(t):[]}),Kc=J(function(n){var t=ct(n),e=_n(n,Pi);return t===ct(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Si(e,T(t,2)):[]}),zc=J(function(n){var t=ct(n),e=_n(n,Pi);return t=typeof t=="function"?t:i,t&&e.pop(),e.length&&e[0]===n[0]?Si(e,i,t):[]});function qc(n,t){return n==null?"":Ha.call(n,t)}function ct(n){var t=n==null?0:n.length;return t?n[t-1]:i}function Vc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=q(e),s=s<0?Mn(r+s,0):Bn(s,r-1)),t===t?La(n,t,s):rr(n,Vs,s,!0)}function Yc(n,t){return n&&n.length?Eu(n,q(t)):i}var Xc=J(_o);function _o(n,t){return n&&n.length&&t&&t.length?Li(n,t):n}function Jc(n,t,e){return n&&n.length&&t&&t.length?Li(n,t,T(e,2)):n}function Qc(n,t,e){return n&&n.length&&t&&t.length?Li(n,t,i,e):n}var jc=Ot(function(n,t){var e=n==null?0:n.length,r=xi(n,t);return Mu(n,_n(t,function(s){return Tt(s,e)?+s:s}).sort(Wu)),r});function nh(n,t){var e=[];if(!(n&&n.length))return e;var r=-1,s=[],o=n.length;for(t=T(t,3);++r<o;){var a=n[r];t(a,r,n)&&(e.push(a),s.push(r))}return Mu(n,s),e}function qi(n){return n==null?n:qa.call(n)}function th(n,t,e){var r=n==null?0:n.length;return r?(e&&typeof e!="number"&&$n(n,t,e)?(t=0,e=r):(t=t==null?0:q(t),e=e===i?r:q(e)),lt(n,t,e)):[]}function eh(n,t){return Sr(n,t)}function rh(n,t,e){return bi(n,t,T(e,2))}function ih(n,t){var e=n==null?0:n.length;if(e){var r=Sr(n,t);if(r<e&&xt(n[r],t))return r}return-1}function sh(n,t){return Sr(n,t,!0)}function uh(n,t,e){return bi(n,t,T(e,2),!0)}function oh(n,t){var e=n==null?0:n.length;if(e){var r=Sr(n,t,!0)-1;if(xt(n[r],t))return r}return-1}function fh(n){return n&&n.length?bu(n):[]}function ah(n,t){return n&&n.length?bu(n,T(t,2)):[]}function lh(n){var t=n==null?0:n.length;return t?lt(n,1,t):[]}function ch(n,t,e){return n&&n.length?(t=e||t===i?1:q(t),lt(n,0,t<0?0:t)):[]}function hh(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:q(t),t=r-t,lt(n,t<0?0:t,r)):[]}function gh(n,t){return n&&n.length?Ir(n,T(t,3),!1,!0):[]}function ph(n,t){return n&&n.length?Ir(n,T(t,3)):[]}var dh=J(function(n){return $t(Un(n,1,An,!0))}),_h=J(function(n){var t=ct(n);return An(t)&&(t=i),$t(Un(n,1,An,!0),T(t,2))}),vh=J(function(n){var t=ct(n);return t=typeof t=="function"?t:i,$t(Un(n,1,An,!0),i,t)});function wh(n){return n&&n.length?$t(n):[]}function xh(n,t){return n&&n.length?$t(n,T(t,2)):[]}function mh(n,t){return t=typeof t=="function"?t:i,n&&n.length?$t(n,i,t):[]}function Vi(n){if(!(n&&n.length))return[];var t=0;return n=Bt(n,function(e){if(An(e))return t=Mn(e.length,t),!0}),ci(t,function(e){return _n(n,fi(e))})}function vo(n,t){if(!(n&&n.length))return[];var e=Vi(n);return t==null?e:_n(e,function(r){return Jn(t,i,r)})}var yh=J(function(n,t){return An(n)?Ne(n,t):[]}),Ah=J(function(n){return Ti(Bt(n,An))}),Sh=J(function(n){var t=ct(n);return An(t)&&(t=i),Ti(Bt(n,An),T(t,2))}),Ih=J(function(n){var t=ct(n);return t=typeof t=="function"?t:i,Ti(Bt(n,An),i,t)}),Eh=J(Vi);function Ch(n,t){return Du(n||[],t||[],We)}function Lh(n,t){return Du(n||[],t||[],$e)}var Mh=J(function(n){var t=n.length,e=t>1?n[t-1]:i;return e=typeof e=="function"?(n.pop(),e):i,vo(n,e)});function wo(n){var t=u(n);return t.__chain__=!0,t}function Rh(n,t){return t(n),n}function Pr(n,t){return t(n)}var bh=Ot(function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return xi(o,n)};return t>1||this.__actions__.length||!(r instanceof j)||!Tt(e)?this.thru(s):(r=r.slice(e,+e+(t?1:0)),r.__actions__.push({func:Pr,args:[s],thisArg:i}),new ft(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(i),o}))});function Oh(){return wo(this)}function Th(){return new ft(this.value(),this.__chain__)}function Ph(){this.__values__===i&&(this.__values__=To(this.value()));var n=this.__index__>=this.__values__.length,t=n?i:this.__values__[this.__index__++];return{done:n,value:t}}function Dh(){return this}function Fh(n){for(var t,e=this;e instanceof wr;){var r=lo(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t}function Uh(){var n=this.__wrapped__;if(n instanceof j){var t=n;return this.__actions__.length&&(t=new j(this)),t=t.reverse(),t.__actions__.push({func:Pr,args:[qi],thisArg:i}),new ft(t,this.__chain__)}return this.thru(qi)}function Bh(){return Pu(this.__wrapped__,this.__actions__)}var Wh=Er(function(n,t,e){fn.call(n,e)?++n[e]:Rt(n,e,1)});function Nh(n,t,e){var r=K(n)?zs:Rl;return e&&$n(n,t,e)&&(t=i),r(n,T(t,3))}function kh(n,t){var e=K(n)?Bt:_u;return e(n,T(t,3))}var Gh=Zu(co),$h=Zu(ho);function Hh(n,t){return Un(Dr(n,t),1)}function Zh(n,t){return Un(Dr(n,t),Dn)}function Kh(n,t,e){return e=e===i?1:q(e),Un(Dr(n,t),e)}function xo(n,t){var e=K(n)?ut:Gt;return e(n,T(t,3))}function mo(n,t){var e=K(n)?la:du;return e(n,T(t,3))}var zh=Er(function(n,t,e){fn.call(n,e)?n[e].push(t):Rt(n,e,[t])});function qh(n,t,e,r){n=zn(n)?n:Me(n),e=e&&!r?q(e):0;var s=n.length;return e<0&&(e=Mn(s+e,0)),Nr(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&_e(n,t,e)>-1}var Vh=J(function(n,t,e){var r=-1,s=typeof t=="function",o=zn(n)?p(n.length):[];return Gt(n,function(a){o[++r]=s?Jn(t,a,e):ke(a,t,e)}),o}),Yh=Er(function(n,t,e){Rt(n,e,t)});function Dr(n,t){var e=K(n)?_n:Au;return e(n,T(t,3))}function Xh(n,t,e,r){return n==null?[]:(K(t)||(t=t==null?[]:[t]),e=r?i:e,K(e)||(e=e==null?[]:[e]),Cu(n,t,e))}var Jh=Er(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]});function Qh(n,t,e){var r=K(n)?ui:Xs,s=arguments.length<3;return r(n,T(t,4),e,s,Gt)}function jh(n,t,e){var r=K(n)?ca:Xs,s=arguments.length<3;return r(n,T(t,4),e,s,du)}function ng(n,t){var e=K(n)?Bt:_u;return e(n,Br(T(t,3)))}function tg(n){var t=K(n)?cu:ql;return t(n)}function eg(n,t,e){(e?$n(n,t,e):t===i)?t=1:t=q(t);var r=K(n)?Il:Vl;return r(n,t)}function rg(n){var t=K(n)?El:Xl;return t(n)}function ig(n){if(n==null)return 0;if(zn(n))return Nr(n)?we(n):n.length;var t=Wn(n);return t==Xn||t==Zn?n.size:Ei(n).length}function sg(n,t,e){var r=K(n)?oi:Jl;return e&&$n(n,t,e)&&(t=i),r(n,T(t,3))}var ug=J(function(n,t){if(n==null)return[];var e=t.length;return e>1&&$n(n,t[0],t[1])?t=[]:e>2&&$n(t[0],t[1],t[2])&&(t=[t[0]]),Cu(n,Un(t,1),[])}),Fr=ka||function(){return Fn.Date.now()};function og(n,t){if(typeof t!="function")throw new ot(I);return n=q(n),function(){if(--n<1)return t.apply(this,arguments)}}function yo(n,t,e){return t=e?i:t,t=n&&t==null?n.length:t,bt(n,z,i,i,i,i,t)}function Ao(n,t){var e;if(typeof t!="function")throw new ot(I);return n=q(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Yi=J(function(n,t,e){var r=Z;if(e.length){var s=Nt(e,Ce(Yi));r|=gn}return bt(n,r,t,e,s)}),So=J(function(n,t,e){var r=Z|X;if(e.length){var s=Nt(e,Ce(So));r|=gn}return bt(t,r,n,e,s)});function Io(n,t,e){t=e?i:t;var r=bt(n,an,i,i,i,i,i,t);return r.placeholder=Io.placeholder,r}function Eo(n,t,e){t=e?i:t;var r=bt(n,Rn,i,i,i,i,i,t);return r.placeholder=Eo.placeholder,r}function Co(n,t,e){var r,s,o,a,l,h,w=0,x=!1,y=!1,C=!0;if(typeof n!="function")throw new ot(I);t=ht(t)||0,vn(e)&&(x=!!e.leading,y="maxWait"in e,o=y?Mn(ht(e.maxWait)||0,t):o,C="trailing"in e?!!e.trailing:C);function R(Sn){var mt=r,Ft=s;return r=s=i,w=Sn,a=n.apply(Ft,mt),a}function D(Sn){return w=Sn,l=Ke(Q,t),x?R(Sn):a}function V(Sn){var mt=Sn-h,Ft=Sn-w,Ko=t-mt;return y?Bn(Ko,o-Ft):Ko}function F(Sn){var mt=Sn-h,Ft=Sn-w;return h===i||mt>=t||mt<0||y&&Ft>=o}function Q(){var Sn=Fr();if(F(Sn))return nn(Sn);l=Ke(Q,V(Sn))}function nn(Sn){return l=i,C&&r?R(Sn):(r=s=i,a)}function tt(){l!==i&&Fu(l),w=0,r=h=s=l=i}function Hn(){return l===i?a:nn(Fr())}function et(){var Sn=Fr(),mt=F(Sn);if(r=arguments,s=this,h=Sn,mt){if(l===i)return D(h);if(y)return Fu(l),l=Ke(Q,t),R(h)}return l===i&&(l=Ke(Q,t)),a}return et.cancel=tt,et.flush=Hn,et}var fg=J(function(n,t){return pu(n,1,t)}),ag=J(function(n,t,e){return pu(n,ht(t)||0,e)});function lg(n){return bt(n,it)}function Ur(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new ot(I);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=n.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new(Ur.Cache||Mt),e}Ur.Cache=Mt;function Br(n){if(typeof n!="function")throw new ot(I);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function cg(n){return Ao(2,n)}var hg=Ql(function(n,t){t=t.length==1&&K(t[0])?_n(t[0],Qn(T())):_n(Un(t,1),Qn(T()));var e=t.length;return J(function(r){for(var s=-1,o=Bn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return Jn(n,this,r)})}),Xi=J(function(n,t){var e=Nt(t,Ce(Xi));return bt(n,gn,i,t,e)}),Lo=J(function(n,t){var e=Nt(t,Ce(Lo));return bt(n,bn,i,t,e)}),gg=Ot(function(n,t){return bt(n,Cn,i,i,i,t)});function pg(n,t){if(typeof n!="function")throw new ot(I);return t=t===i?t:q(t),J(n,t)}function dg(n,t){if(typeof n!="function")throw new ot(I);return t=t==null?0:Mn(q(t),0),J(function(e){var r=e[t],s=Zt(e,0,t);return r&&Wt(s,r),Jn(n,this,s)})}function _g(n,t,e){var r=!0,s=!0;if(typeof n!="function")throw new ot(I);return vn(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),Co(n,t,{leading:r,maxWait:t,trailing:s})}function vg(n){return yo(n,1)}function wg(n,t){return Xi(Di(t),n)}function xg(){if(!arguments.length)return[];var n=arguments[0];return K(n)?n:[n]}function mg(n){return at(n,H)}function yg(n,t){return t=typeof t=="function"?t:i,at(n,H,t)}function Ag(n){return at(n,M|H)}function Sg(n,t){return t=typeof t=="function"?t:i,at(n,M|H,t)}function Ig(n,t){return t==null||gu(n,t,Pn(t))}function xt(n,t){return n===t||n!==n&&t!==t}var Eg=Rr(Ai),Cg=Rr(function(n,t){return n>=t}),le=xu(function(){return arguments}())?xu:function(n){return mn(n)&&fn.call(n,"callee")&&!su.call(n,"callee")},K=p.isArray,Lg=ks?Qn(ks):Fl;function zn(n){return n!=null&&Wr(n.length)&&!Pt(n)}function An(n){return mn(n)&&zn(n)}function Mg(n){return n===!0||n===!1||mn(n)&&Gn(n)==Yt}var Kt=$a||os,Rg=Gs?Qn(Gs):Ul;function bg(n){return mn(n)&&n.nodeType===1&&!ze(n)}function Og(n){if(n==null)return!0;if(zn(n)&&(K(n)||typeof n=="string"||typeof n.splice=="function"||Kt(n)||Le(n)||le(n)))return!n.length;var t=Wn(n);if(t==Xn||t==Zn)return!n.size;if(Ze(n))return!Ei(n).length;for(var e in n)if(fn.call(n,e))return!1;return!0}function Tg(n,t){return Ge(n,t)}function Pg(n,t,e){e=typeof e=="function"?e:i;var r=e?e(n,t):i;return r===i?Ge(n,t,i,e):!!r}function Ji(n){if(!mn(n))return!1;var t=Gn(n);return t==pe||t==qr||typeof n.message=="string"&&typeof n.name=="string"&&!ze(n)}function Dg(n){return typeof n=="number"&&ou(n)}function Pt(n){if(!vn(n))return!1;var t=Gn(n);return t==Jt||t==Je||t==be||t==Yr}function Mo(n){return typeof n=="number"&&n==q(n)}function Wr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=In}function vn(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function mn(n){return n!=null&&typeof n=="object"}var Ro=$s?Qn($s):Wl;function Fg(n,t){return n===t||Ii(n,t,Gi(t))}function Ug(n,t,e){return e=typeof e=="function"?e:i,Ii(n,t,Gi(t),e)}function Bg(n){return bo(n)&&n!=+n}function Wg(n){if(yc(n))throw new $(_);return mu(n)}function Ng(n){return n===null}function kg(n){return n==null}function bo(n){return typeof n=="number"||mn(n)&&Gn(n)==Qt}function ze(n){if(!mn(n)||Gn(n)!=dt)return!1;var t=cr(n);if(t===null)return!0;var e=fn.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&or.call(e)==Ua}var Qi=Hs?Qn(Hs):Nl;function Gg(n){return Mo(n)&&n>=-In&&n<=In}var Oo=Zs?Qn(Zs):kl;function Nr(n){return typeof n=="string"||!K(n)&&mn(n)&&Gn(n)==ne}function nt(n){return typeof n=="symbol"||mn(n)&&Gn(n)==A}var Le=Ks?Qn(Ks):Gl;function $g(n){return n===i}function Hg(n){return mn(n)&&Wn(n)==O}function Zg(n){return mn(n)&&Gn(n)==W}var Kg=Rr(Ci),zg=Rr(function(n,t){return n<=t});function To(n){if(!n)return[];if(zn(n))return Nr(n)?vt(n):Kn(n);if(Pe&&n[Pe])return Ia(n[Pe]());var t=Wn(n),e=t==Xn?gi:t==Zn?ir:Me;return e(n)}function Dt(n){if(!n)return n===0?n:0;if(n=ht(n),n===Dn||n===-Dn){var t=n<0?-1:1;return t*pt}return n===n?n:0}function q(n){var t=Dt(n),e=t%1;return t===t?e?t-e:t:0}function Po(n){return n?ue(q(n),0,xn):0}function ht(n){if(typeof n=="number")return n;if(nt(n))return On;if(vn(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=vn(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=Js(n);var e=Lf.test(n);return e||Rf.test(n)?oa(n.slice(2),e?2:8):Cf.test(n)?On:+n}function Do(n){return It(n,qn(n))}function qg(n){return n?ue(q(n),-In,In):n===0?n:0}function on(n){return n==null?"":jn(n)}var Vg=Ie(function(n,t){if(Ze(t)||zn(t)){It(t,Pn(t),n);return}for(var e in t)fn.call(t,e)&&We(n,e,t[e])}),Fo=Ie(function(n,t){It(t,qn(t),n)}),kr=Ie(function(n,t,e,r){It(t,qn(t),n,r)}),Yg=Ie(function(n,t,e,r){It(t,Pn(t),n,r)}),Xg=Ot(xi);function Jg(n,t){var e=Se(n);return t==null?e:hu(e,t)}var Qg=J(function(n,t){n=cn(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&$n(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],a=qn(o),l=-1,h=a.length;++l<h;){var w=a[l],x=n[w];(x===i||xt(x,me[w])&&!fn.call(n,w))&&(n[w]=o[w])}return n}),jg=J(function(n){return n.push(i,Ju),Jn(Uo,i,n)});function np(n,t){return qs(n,T(t,3),St)}function tp(n,t){return qs(n,T(t,3),yi)}function ep(n,t){return n==null?n:mi(n,T(t,3),qn)}function rp(n,t){return n==null?n:vu(n,T(t,3),qn)}function ip(n,t){return n&&St(n,T(t,3))}function sp(n,t){return n&&yi(n,T(t,3))}function up(n){return n==null?[]:yr(n,Pn(n))}function op(n){return n==null?[]:yr(n,qn(n))}function ji(n,t,e){var r=n==null?i:oe(n,t);return r===i?e:r}function fp(n,t){return n!=null&&no(n,t,Ol)}function ns(n,t){return n!=null&&no(n,t,Tl)}var ap=zu(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=fr.call(t)),n[t]=e},es(Vn)),lp=zu(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=fr.call(t)),fn.call(n,t)?n[t].push(e):n[t]=[e]},T),cp=J(ke);function Pn(n){return zn(n)?lu(n):Ei(n)}function qn(n){return zn(n)?lu(n,!0):$l(n)}function hp(n,t){var e={};return t=T(t,3),St(n,function(r,s,o){Rt(e,t(r,s,o),r)}),e}function gp(n,t){var e={};return t=T(t,3),St(n,function(r,s,o){Rt(e,s,t(r,s,o))}),e}var pp=Ie(function(n,t,e){Ar(n,t,e)}),Uo=Ie(function(n,t,e,r){Ar(n,t,e,r)}),dp=Ot(function(n,t){var e={};if(n==null)return e;var r=!1;t=_n(t,function(o){return o=Ht(o,n),r||(r=o.length>1),o}),It(n,Ni(n),e),r&&(e=at(e,M|N|H,ac));for(var s=t.length;s--;)Oi(e,t[s]);return e});function _p(n,t){return Bo(n,Br(T(t)))}var vp=Ot(function(n,t){return n==null?{}:Zl(n,t)});function Bo(n,t){if(n==null)return{};var e=_n(Ni(n),function(r){return[r]});return t=T(t),Lu(n,e,function(r,s){return t(r,s[0])})}function wp(n,t,e){t=Ht(t,n);var r=-1,s=t.length;for(s||(s=1,n=i);++r<s;){var o=n==null?i:n[Et(t[r])];o===i&&(r=s,o=e),n=Pt(o)?o.call(n):o}return n}function xp(n,t,e){return n==null?n:$e(n,t,e)}function mp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:$e(n,t,e,r)}var Wo=Yu(Pn),No=Yu(qn);function yp(n,t,e){var r=K(n),s=r||Kt(n)||Le(n);if(t=T(t,4),e==null){var o=n&&n.constructor;s?e=r?new o:[]:vn(n)?e=Pt(o)?Se(cr(n)):{}:e={}}return(s?ut:St)(n,function(a,l,h){return t(e,a,l,h)}),e}function Ap(n,t){return n==null?!0:Oi(n,t)}function Sp(n,t,e){return n==null?n:Tu(n,t,Di(e))}function Ip(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Tu(n,t,Di(e),r)}function Me(n){return n==null?[]:hi(n,Pn(n))}function Ep(n){return n==null?[]:hi(n,qn(n))}function Cp(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=ht(e),e=e===e?e:0),t!==i&&(t=ht(t),t=t===t?t:0),ue(ht(n),t,e)}function Lp(n,t,e){return t=Dt(t),e===i?(e=t,t=0):e=Dt(e),n=ht(n),Pl(n,t,e)}function Mp(n,t,e){if(e&&typeof e!="boolean"&&$n(n,t,e)&&(t=e=i),e===i&&(typeof t=="boolean"?(e=t,t=i):typeof n=="boolean"&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Dt(n),t===i?(t=n,n=0):t=Dt(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=fu();return Bn(n+s*(t-n+ua("1e-"+((s+"").length-1))),t)}return Mi(n,t)}var Rp=Ee(function(n,t,e){return t=t.toLowerCase(),n+(e?ko(t):t)});function ko(n){return ts(on(n).toLowerCase())}function Go(n){return n=on(n),n&&n.replace(Of,xa).replace(Xf,"")}function bp(n,t,e){n=on(n),t=jn(t);var r=n.length;e=e===i?r:ue(q(e),0,r);var s=e;return e-=t.length,e>=0&&n.slice(e,s)==t}function Op(n){return n=on(n),n&&cf.test(n)?n.replace(vs,ma):n}function Tp(n){return n=on(n),n&&vf.test(n)?n.replace(Xr,"\\$&"):n}var Pp=Ee(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Dp=Ee(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),Fp=Hu("toLowerCase");function Up(n,t,e){n=on(n),t=q(t);var r=t?we(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return Mr(dr(s),e)+n+Mr(pr(s),e)}function Bp(n,t,e){n=on(n),t=q(t);var r=t?we(n):0;return t&&r<t?n+Mr(t-r,e):n}function Wp(n,t,e){n=on(n),t=q(t);var r=t?we(n):0;return t&&r<t?Mr(t-r,e)+n:n}function Np(n,t,e){return e||t==null?t=0:t&&(t=+t),za(on(n).replace(Jr,""),t||0)}function kp(n,t,e){return(e?$n(n,t,e):t===i)?t=1:t=q(t),Ri(on(n),t)}function Gp(){var n=arguments,t=on(n[0]);return n.length<3?t:t.replace(n[1],n[2])}var $p=Ee(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()});function Hp(n,t,e){return e&&typeof e!="number"&&$n(n,t,e)&&(t=e=i),e=e===i?xn:e>>>0,e?(n=on(n),n&&(typeof t=="string"||t!=null&&!Qi(t))&&(t=jn(t),!t&&ve(n))?Zt(vt(n),0,e):n.split(t,e)):[]}var Zp=Ee(function(n,t,e){return n+(e?" ":"")+ts(t)});function Kp(n,t,e){return n=on(n),e=e==null?0:ue(q(e),0,n.length),t=jn(t),n.slice(e,e+t.length)==t}function zp(n,t,e){var r=u.templateSettings;e&&$n(n,t,e)&&(t=i),n=on(n),t=kr({},t,r,Xu);var s=kr({},t.imports,r.imports,Xu),o=Pn(s),a=hi(s,o),l,h,w=0,x=t.interpolate||je,y="__p += '",C=pi((t.escape||je).source+"|"+x.source+"|"+(x===ws?Ef:je).source+"|"+(t.evaluate||je).source+"|$","g"),R="//# sourceURL="+(fn.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ta+"]")+`
`;n.replace(C,function(F,Q,nn,tt,Hn,et){return nn||(nn=tt),y+=n.slice(w,et).replace(Tf,ya),Q&&(l=!0,y+=`' +
__e(`+Q+`) +
'`),Hn&&(h=!0,y+=`';
`+Hn+`;
__p += '`),nn&&(y+=`' +
((__t = (`+nn+`)) == null ? '' : __t) +
'`),w=et+F.length,F}),y+=`';
`;var D=fn.call(t,"variable")&&t.variable;if(!D)y=`with (obj) {
`+y+`
}
`;else if(Sf.test(D))throw new $(E);y=(h?y.replace(of,""):y).replace(ff,"$1").replace(af,"$1;"),y="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+y+`return __p
}`;var V=Ho(function(){return un(o,R+"return "+y).apply(i,a)});if(V.source=y,Ji(V))throw V;return V}function qp(n){return on(n).toLowerCase()}function Vp(n){return on(n).toUpperCase()}function Yp(n,t,e){if(n=on(n),n&&(e||t===i))return Js(n);if(!n||!(t=jn(t)))return n;var r=vt(n),s=vt(t),o=Qs(r,s),a=js(r,s)+1;return Zt(r,o,a).join("")}function Xp(n,t,e){if(n=on(n),n&&(e||t===i))return n.slice(0,tu(n)+1);if(!n||!(t=jn(t)))return n;var r=vt(n),s=js(r,vt(t))+1;return Zt(r,0,s).join("")}function Jp(n,t,e){if(n=on(n),n&&(e||t===i))return n.replace(Jr,"");if(!n||!(t=jn(t)))return n;var r=vt(n),s=Qs(r,vt(t));return Zt(r,s).join("")}function Qp(n,t){var e=Ct,r=pn;if(vn(t)){var s="separator"in t?t.separator:s;e="length"in t?q(t.length):e,r="omission"in t?jn(t.omission):r}n=on(n);var o=n.length;if(ve(n)){var a=vt(n);o=a.length}if(e>=o)return n;var l=e-we(r);if(l<1)return r;var h=a?Zt(a,0,l).join(""):n.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),Qi(s)){if(n.slice(l).search(s)){var w,x=h;for(s.global||(s=pi(s.source,on(xs.exec(s))+"g")),s.lastIndex=0;w=s.exec(x);)var y=w.index;h=h.slice(0,y===i?l:y)}}else if(n.indexOf(jn(s),l)!=l){var C=h.lastIndexOf(s);C>-1&&(h=h.slice(0,C))}return h+r}function jp(n){return n=on(n),n&&lf.test(n)?n.replace(_s,Ma):n}var nd=Ee(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),ts=Hu("toUpperCase");function $o(n,t,e){return n=on(n),t=e?i:t,t===i?Sa(n)?Oa(n):pa(n):n.match(t)||[]}var Ho=J(function(n,t){try{return Jn(n,i,t)}catch(e){return Ji(e)?e:new $(e)}}),td=Ot(function(n,t){return ut(t,function(e){e=Et(e),Rt(n,e,Yi(n[e],n))}),n});function ed(n){var t=n==null?0:n.length,e=T();return n=t?_n(n,function(r){if(typeof r[1]!="function")throw new ot(I);return[e(r[0]),r[1]]}):[],J(function(r){for(var s=-1;++s<t;){var o=n[s];if(Jn(o[0],this,r))return Jn(o[1],this,r)}})}function rd(n){return Ml(at(n,M))}function es(n){return function(){return n}}function id(n,t){return n==null||n!==n?t:n}var sd=Ku(),ud=Ku(!0);function Vn(n){return n}function rs(n){return yu(typeof n=="function"?n:at(n,M))}function od(n){return Su(at(n,M))}function fd(n,t){return Iu(n,at(t,M))}var ad=J(function(n,t){return function(e){return ke(e,n,t)}}),ld=J(function(n,t){return function(e){return ke(n,e,t)}});function is(n,t,e){var r=Pn(t),s=yr(t,r);e==null&&!(vn(t)&&(s.length||!r.length))&&(e=t,t=n,n=this,s=yr(t,Pn(t)));var o=!(vn(e)&&"chain"in e)||!!e.chain,a=Pt(n);return ut(s,function(l){var h=t[l];n[l]=h,a&&(n.prototype[l]=function(){var w=this.__chain__;if(o||w){var x=n(this.__wrapped__),y=x.__actions__=Kn(this.__actions__);return y.push({func:h,args:arguments,thisArg:n}),x.__chain__=w,x}return h.apply(n,Wt([this.value()],arguments))})}),n}function cd(){return Fn._===this&&(Fn._=Ba),this}function ss(){}function hd(n){return n=q(n),J(function(t){return Eu(t,n)})}var gd=Ui(_n),pd=Ui(zs),dd=Ui(oi);function Zo(n){return Hi(n)?fi(Et(n)):Kl(n)}function _d(n){return function(t){return n==null?i:oe(n,t)}}var vd=qu(),wd=qu(!0);function us(){return[]}function os(){return!1}function xd(){return{}}function md(){return""}function yd(){return!0}function Ad(n,t){if(n=q(n),n<1||n>In)return[];var e=xn,r=Bn(n,xn);t=T(t),n-=xn;for(var s=ci(r,t);++e<n;)t(e);return s}function Sd(n){return K(n)?_n(n,Et):nt(n)?[n]:Kn(ao(on(n)))}function Id(n){var t=++Fa;return on(n)+t}var Ed=Lr(function(n,t){return n+t},0),Cd=Bi("ceil"),Ld=Lr(function(n,t){return n/t},1),Md=Bi("floor");function Rd(n){return n&&n.length?mr(n,Vn,Ai):i}function bd(n,t){return n&&n.length?mr(n,T(t,2),Ai):i}function Od(n){return Ys(n,Vn)}function Td(n,t){return Ys(n,T(t,2))}function Pd(n){return n&&n.length?mr(n,Vn,Ci):i}function Dd(n,t){return n&&n.length?mr(n,T(t,2),Ci):i}var Fd=Lr(function(n,t){return n*t},1),Ud=Bi("round"),Bd=Lr(function(n,t){return n-t},0);function Wd(n){return n&&n.length?li(n,Vn):0}function Nd(n,t){return n&&n.length?li(n,T(t,2)):0}return u.after=og,u.ary=yo,u.assign=Vg,u.assignIn=Fo,u.assignInWith=kr,u.assignWith=Yg,u.at=Xg,u.before=Ao,u.bind=Yi,u.bindAll=td,u.bindKey=So,u.castArray=xg,u.chain=wo,u.chunk=Mc,u.compact=Rc,u.concat=bc,u.cond=ed,u.conforms=rd,u.constant=es,u.countBy=Wh,u.create=Jg,u.curry=Io,u.curryRight=Eo,u.debounce=Co,u.defaults=Qg,u.defaultsDeep=jg,u.defer=fg,u.delay=ag,u.difference=Oc,u.differenceBy=Tc,u.differenceWith=Pc,u.drop=Dc,u.dropRight=Fc,u.dropRightWhile=Uc,u.dropWhile=Bc,u.fill=Wc,u.filter=kh,u.flatMap=Hh,u.flatMapDeep=Zh,u.flatMapDepth=Kh,u.flatten=go,u.flattenDeep=Nc,u.flattenDepth=kc,u.flip=lg,u.flow=sd,u.flowRight=ud,u.fromPairs=Gc,u.functions=up,u.functionsIn=op,u.groupBy=zh,u.initial=Hc,u.intersection=Zc,u.intersectionBy=Kc,u.intersectionWith=zc,u.invert=ap,u.invertBy=lp,u.invokeMap=Vh,u.iteratee=rs,u.keyBy=Yh,u.keys=Pn,u.keysIn=qn,u.map=Dr,u.mapKeys=hp,u.mapValues=gp,u.matches=od,u.matchesProperty=fd,u.memoize=Ur,u.merge=pp,u.mergeWith=Uo,u.method=ad,u.methodOf=ld,u.mixin=is,u.negate=Br,u.nthArg=hd,u.omit=dp,u.omitBy=_p,u.once=cg,u.orderBy=Xh,u.over=gd,u.overArgs=hg,u.overEvery=pd,u.overSome=dd,u.partial=Xi,u.partialRight=Lo,u.partition=Jh,u.pick=vp,u.pickBy=Bo,u.property=Zo,u.propertyOf=_d,u.pull=Xc,u.pullAll=_o,u.pullAllBy=Jc,u.pullAllWith=Qc,u.pullAt=jc,u.range=vd,u.rangeRight=wd,u.rearg=gg,u.reject=ng,u.remove=nh,u.rest=pg,u.reverse=qi,u.sampleSize=eg,u.set=xp,u.setWith=mp,u.shuffle=rg,u.slice=th,u.sortBy=ug,u.sortedUniq=fh,u.sortedUniqBy=ah,u.split=Hp,u.spread=dg,u.tail=lh,u.take=ch,u.takeRight=hh,u.takeRightWhile=gh,u.takeWhile=ph,u.tap=Rh,u.throttle=_g,u.thru=Pr,u.toArray=To,u.toPairs=Wo,u.toPairsIn=No,u.toPath=Sd,u.toPlainObject=Do,u.transform=yp,u.unary=vg,u.union=dh,u.unionBy=_h,u.unionWith=vh,u.uniq=wh,u.uniqBy=xh,u.uniqWith=mh,u.unset=Ap,u.unzip=Vi,u.unzipWith=vo,u.update=Sp,u.updateWith=Ip,u.values=Me,u.valuesIn=Ep,u.without=yh,u.words=$o,u.wrap=wg,u.xor=Ah,u.xorBy=Sh,u.xorWith=Ih,u.zip=Eh,u.zipObject=Ch,u.zipObjectDeep=Lh,u.zipWith=Mh,u.entries=Wo,u.entriesIn=No,u.extend=Fo,u.extendWith=kr,is(u,u),u.add=Ed,u.attempt=Ho,u.camelCase=Rp,u.capitalize=ko,u.ceil=Cd,u.clamp=Cp,u.clone=mg,u.cloneDeep=Ag,u.cloneDeepWith=Sg,u.cloneWith=yg,u.conformsTo=Ig,u.deburr=Go,u.defaultTo=id,u.divide=Ld,u.endsWith=bp,u.eq=xt,u.escape=Op,u.escapeRegExp=Tp,u.every=Nh,u.find=Gh,u.findIndex=co,u.findKey=np,u.findLast=$h,u.findLastIndex=ho,u.findLastKey=tp,u.floor=Md,u.forEach=xo,u.forEachRight=mo,u.forIn=ep,u.forInRight=rp,u.forOwn=ip,u.forOwnRight=sp,u.get=ji,u.gt=Eg,u.gte=Cg,u.has=fp,u.hasIn=ns,u.head=po,u.identity=Vn,u.includes=qh,u.indexOf=$c,u.inRange=Lp,u.invoke=cp,u.isArguments=le,u.isArray=K,u.isArrayBuffer=Lg,u.isArrayLike=zn,u.isArrayLikeObject=An,u.isBoolean=Mg,u.isBuffer=Kt,u.isDate=Rg,u.isElement=bg,u.isEmpty=Og,u.isEqual=Tg,u.isEqualWith=Pg,u.isError=Ji,u.isFinite=Dg,u.isFunction=Pt,u.isInteger=Mo,u.isLength=Wr,u.isMap=Ro,u.isMatch=Fg,u.isMatchWith=Ug,u.isNaN=Bg,u.isNative=Wg,u.isNil=kg,u.isNull=Ng,u.isNumber=bo,u.isObject=vn,u.isObjectLike=mn,u.isPlainObject=ze,u.isRegExp=Qi,u.isSafeInteger=Gg,u.isSet=Oo,u.isString=Nr,u.isSymbol=nt,u.isTypedArray=Le,u.isUndefined=$g,u.isWeakMap=Hg,u.isWeakSet=Zg,u.join=qc,u.kebabCase=Pp,u.last=ct,u.lastIndexOf=Vc,u.lowerCase=Dp,u.lowerFirst=Fp,u.lt=Kg,u.lte=zg,u.max=Rd,u.maxBy=bd,u.mean=Od,u.meanBy=Td,u.min=Pd,u.minBy=Dd,u.stubArray=us,u.stubFalse=os,u.stubObject=xd,u.stubString=md,u.stubTrue=yd,u.multiply=Fd,u.nth=Yc,u.noConflict=cd,u.noop=ss,u.now=Fr,u.pad=Up,u.padEnd=Bp,u.padStart=Wp,u.parseInt=Np,u.random=Mp,u.reduce=Qh,u.reduceRight=jh,u.repeat=kp,u.replace=Gp,u.result=wp,u.round=Ud,u.runInContext=c,u.sample=tg,u.size=ig,u.snakeCase=$p,u.some=sg,u.sortedIndex=eh,u.sortedIndexBy=rh,u.sortedIndexOf=ih,u.sortedLastIndex=sh,u.sortedLastIndexBy=uh,u.sortedLastIndexOf=oh,u.startCase=Zp,u.startsWith=Kp,u.subtract=Bd,u.sum=Wd,u.sumBy=Nd,u.template=zp,u.times=Ad,u.toFinite=Dt,u.toInteger=q,u.toLength=Po,u.toLower=qp,u.toNumber=ht,u.toSafeInteger=qg,u.toString=on,u.toUpper=Vp,u.trim=Yp,u.trimEnd=Xp,u.trimStart=Jp,u.truncate=Qp,u.unescape=jp,u.uniqueId=Id,u.upperCase=nd,u.upperFirst=ts,u.each=xo,u.eachRight=mo,u.first=po,is(u,function(){var n={};return St(u,function(t,e){fn.call(u.prototype,e)||(n[e]=t)}),n}(),{chain:!1}),u.VERSION=g,ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){u[n].placeholder=u}),ut(["drop","take"],function(n,t){j.prototype[n]=function(e){e=e===i?1:Mn(q(e),0);var r=this.__filtered__&&!t?new j(this):this.clone();return r.__filtered__?r.__takeCount__=Bn(e,r.__takeCount__):r.__views__.push({size:Bn(e,xn),type:n+(r.__dir__<0?"Right":"")}),r},j.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),ut(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e==gt||e==k;j.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:T(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),ut(["head","last"],function(n,t){var e="take"+(t?"Right":"");j.prototype[n]=function(){return this[e](1).value()[0]}}),ut(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");j.prototype[n]=function(){return this.__filtered__?new j(this):this[e](1)}}),j.prototype.compact=function(){return this.filter(Vn)},j.prototype.find=function(n){return this.filter(n).head()},j.prototype.findLast=function(n){return this.reverse().find(n)},j.prototype.invokeMap=J(function(n,t){return typeof n=="function"?new j(this):this.map(function(e){return ke(e,n,t)})}),j.prototype.reject=function(n){return this.filter(Br(T(n)))},j.prototype.slice=function(n,t){n=q(n);var e=this;return e.__filtered__&&(n>0||t<0)?new j(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(t=q(t),e=t<0?e.dropRight(-t):e.take(t-n)),e)},j.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},j.prototype.toArray=function(){return this.take(xn)},St(j.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=u[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);s&&(u.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof j,w=l[0],x=h||K(a),y=function(Q){var nn=s.apply(u,Wt([Q],l));return r&&C?nn[0]:nn};x&&e&&typeof w=="function"&&w.length!=1&&(h=x=!1);var C=this.__chain__,R=!!this.__actions__.length,D=o&&!C,V=h&&!R;if(!o&&x){a=V?a:new j(this);var F=n.apply(a,l);return F.__actions__.push({func:Pr,args:[y],thisArg:i}),new ft(F,C)}return D&&V?n.apply(this,l):(F=this.thru(y),D?r?F.value()[0]:F.value():F)})}),ut(["pop","push","shift","sort","splice","unshift"],function(n){var t=sr[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);u.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(K(o)?o:[],s)}return this[e](function(a){return t.apply(K(a)?a:[],s)})}}),St(j.prototype,function(n,t){var e=u[t];if(e){var r=e.name+"";fn.call(Ae,r)||(Ae[r]=[]),Ae[r].push({name:t,func:e})}}),Ae[Cr(i,X).name]=[{name:"wrapper",func:i}],j.prototype.clone=ja,j.prototype.reverse=nl,j.prototype.value=tl,u.prototype.at=bh,u.prototype.chain=Oh,u.prototype.commit=Th,u.prototype.next=Ph,u.prototype.plant=Fh,u.prototype.reverse=Uh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=Bh,u.prototype.first=u.prototype.head,Pe&&(u.prototype[Pe]=Dh),u},xe=Ta();ee?((ee.exports=xe)._=xe,ri._=xe):Fn._=xe}).call(qe)})(Zr,Zr.exports);Zr.exports;const E0="/assets/top_view-4gr4hmiW.svg",C0="AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA";function L0({showCard:S,loadingVehicle:f}){const{center:i,selectedParameterList:g,selectedVehicle:d,vehicleList:_,icons:I,locationData:E,placesData:m,imeiNumbers:B,onlineVehicle:P,loading:M,services_loading:N}=Vt(A=>A.liveMap),{mode:H,styles:tn,vehicles_details:Y}=Vt(A=>A.dashboard),{collapsed:Z}=Vt(A=>A.auth),[X,wn]=rn.useState(null),[an,Rn]=rn.useState(""),[gn,bn]=rn.useState(),[z,Cn]=rn.useState(),[it,Ct]=rn.useState(null);rn.useState("");const[pn,yn]=rn.useState(),[kn,gt]=rn.useState(!1),[Yn,k]=rn.useState(null),Dn=tf(),In={},pt=rn.useRef([]),On=rn.useRef(null),xn=rn.useRef({}),{isLoaded:Re,loadError:Kr}=e0({googleMapsApiKey:`${C0}`,loadingElement:G.jsx(Qd,{})});rn.useEffect(()=>{Re&&wn(window.google.maps)},[Re]),rn.useEffect(()=>{var A,b,O,W;if(Object.keys(d).length>0)if(Yn){const U=Yn==null?void 0:Yn.filter(sn=>{var ln;return((ln=sn==null?void 0:sn.latestDocument)==null?void 0:ln.imei)==(d==null?void 0:d.imei)});bn(U);let en={lat:(b=(A=U[0])==null?void 0:A.latestDocument)==null?void 0:b.lat,lng:(W=(O=U[0])==null?void 0:O.latestDocument)==null?void 0:W.lng};console.log("center: ",en),Dn(ef(en))}else{const U=E==null?void 0:E.filter(en=>{var sn;return((sn=en==null?void 0:en.latestDocument)==null?void 0:sn.imei)==(d==null?void 0:d.imei)});bn(U)}else bn(E),k(E)},[E,d]),rn.useEffect(()=>{Cn(g)},[g]),rn.useEffect(()=>{Dn(Gd({})),gt(!0)},[d]),rn.useEffect(()=>{if(console.log("before: ",gn),!X)return;const A=On.current;let b=null;return(async()=>{console.log("after: ",gn);const W=await zr(gn,A);b&&b.clearMarkers(),b=Je(W,A),fs.on("locationinfo",U=>{console.log("locationinfo: ",U),Qt(U,pt),k(en=>{const sn=Array.isArray(en)?en:[],ln=sn.findIndex(En=>Number(En.latestDocument.imei)===Number(U.imei));if(ln!==-1){const En=[...sn];return En[ln]={...En[ln],latestDocument:{...En[ln].latestDocument,...U}},En}else return[...sn,{_id:U.imei,latestDocument:U}]})})})(),()=>{b&&b.clearMarkers(),Object.keys(xn.current).forEach(W=>cancelAnimationFrame(xn.current[W])),fs.off("locationinfo")}},[X,gn,fs,z,pt,E]);const zr=(A,b)=>A.map(O=>{const W=O.latestDocument.imei,U=pt.current[W]||Ut(O,b);return pt.current[W]&&ge(O,U),U}),Ut=(A,b)=>{const O=A.latestDocument.imei,W=new X.Marker({position:{lat:A.latestDocument.lat,lng:A.latestDocument.lng},map:b,icon:be(A)});return W.addListener("click",()=>pe(A,W,b)),pt.current[O]=W,W},ge=async(A,b)=>{var ln;const O=b.getPosition(),W=((ln=b.getIcon())==null?void 0:ln.rotation)||0,U={lat:A.latestDocument.lat,lng:A.latestDocument.lng},en=A.latestDocument.heading||0;Jt(b,O,U,W,en);const sn=await be(A);b.setIcon(sn)},be=async A=>{var ln,En,Tn,_t,yt;const b=(ln=A==null?void 0:A.latestDocument)==null?void 0:ln.imei;Vr(b);const O=Qe(),W=((En=A==null?void 0:A.latestDocument)==null?void 0:En.heading)||0;let U=Yt((Tn=A==null?void 0:A.latestDocument)==null?void 0:Tn.imei),en="black";return U&&Xt((_t=A==null?void 0:A.latestDocument)==null?void 0:_t.imei)&&(en="red"),{url:await qr(O,W,en),fillOpacity:2,strokeWeight:1,scale:4.5,rotation:(yt=A==null?void 0:A.latestDocument)==null?void 0:yt.heading,size:new X.Size(30,30),scaledSize:new X.Size(30,30)}},Yt=A=>P.includes(Number(A)),Xt=A=>E==null?void 0:E.some(b=>Number(b.latestDocument.imei)===Number(A)&&b.latestDocument.speed>0&&(b.latestDocument.ignition===!0||b.latestDocument.ignition===1)),qr=(A,b,O,W=80)=>{const U=`${A}-${b}-${W}-${O}`;if(In[U])return Promise.resolve(In[U]);const en=document.createElement("canvas"),sn=en.getContext("2d");en.width=W,en.height=W;const ln=new Image;return ln.src=A,new Promise(En=>{ln.onload=()=>{if(sn.clearRect(0,0,en.width,en.height),sn.translate(W/2,W/2),sn.rotate(b*Math.PI/180),sn.translate(-W/2,-W/2),sn.drawImage(ln,0,0,W,W),O){const yt=W-30-5,te=W-30-5;sn.beginPath(),sn.arc(yt,te,30/2,0,Math.PI*2),sn.fillStyle=O,sn.fill()}const Tn=en.toDataURL("image/png");In[U]=Tn,En(Tn)},ln.onerror=Tn=>{console.error("Error loading image for rotation:",Tn),En(A)}})},pe=(A,b,O)=>{Yr(A.latestDocument._id,A,b,O),jt(A.latestDocument.imei)},Jt=(A,b,O,W,U)=>{const sn=performance.now(),ln=()=>{const En=performance.now()-sn,Tn=Math.min(En/500,1),_t=b.lat()+Tn*(O.lat-b.lat()),yt=b.lng()+Tn*(O.lng-b.lng()),te=(U-W+360)%360-180,Oe=(W+te*Tn+360)%360;A.setPosition({lat:_t,lng:yt});const At=A.getIcon();At&&typeof At=="object"&&A.setIcon({...At,rotation:Oe}),Tn<1?xn.current[A.getPosition()]=requestAnimationFrame(ln):(A.setPosition(O),At&&typeof At=="object"&&A.setIcon({...At,rotation:U}),delete xn.current[A.getPosition()])};xn.current[A.getPosition()]=requestAnimationFrame(ln)},Je=(A,b)=>new I0({map:b,markers:A,renderer:{render:({count:O,position:W})=>Xn(O,W)}}),Xn=(A,b)=>{const O=40+Math.min(A*2,40),W=30;let U;return A<10?U={start:"#76c7c0",end:"#34a853"}:A<50?U={start:"#fbbc05",end:"#f2994a"}:U={start:"#f45c42",end:"#d32f2f"},new X.Marker({position:b,icon:{url:`data:image/svg+xml,${encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="${O}" height="${O}" viewBox="0 0 100 100">
            <defs>
              <radialGradient id="gradient" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="${U.start}" />
                <stop offset="100%" stop-color="${U.end}" />
              </radialGradient>
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.5)" />
              </filter>
            </defs>
            <!-- Outer Pulsating Ring -->
            <circle cx="50" cy="50" r="48" fill="url(#gradient)" filter="url(#shadow)" stroke="#ffffff" stroke-width="3" />
            <!-- Decorative Inner Ring -->
            <circle cx="50" cy="50" r="38" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 2" />
            <!-- Star Decoration -->
            <polygon points="50,15 54,38 70,38 57,50 62,68 50,57 38,68 43,50 30,38 46,38" fill="#ffffff" opacity="0.4" />
            <!-- Count Text -->
            <text x="50" y="55" font-size="${W}" fill="black" text-anchor="middle" font-family="'Courier New', monospace" font-weight="bold">
              ${A}
            </text>
          </svg>
        `)}`,scaledSize:new X.Size(O,O)},label:null})},Qt=async(A,b,O)=>{var en;const W=A.imei,U=b.current[W];if(U){const sn=U.getPosition(),ln=((en=U.getIcon())==null?void 0:en.rotation)||0,En={lat:A.lat,lng:A.lng},Tn=A.heading||0;Jt(U,sn,En,ln,Tn);const _t=await be({latestDocument:A});U.setIcon(_t)}},Vr=A=>{if(!A)return"motorBike";const b=dt(A);return b||console.error(`No vehicle type found for IMEI: ${A}, defaulting to motorBike`),b||"motorBike"},dt=A=>{if(!Y||Y.length===0)return console.error("vehicles_details is not available"),null;const b=Y.find(O=>(O==null?void 0:O.value)===A&&(O==null?void 0:O.vehilce_type));return b||console.error(`No vehicle found for IMEI: ${A}`),b?b.vehilce_type:null},Qe=A=>E0,Yr=(A,b,O,W)=>{const U=new X.InfoWindow,en=`
      <div>
        <h3>Vehicle IMEI: ${b.latestDocument.imei}</h3>
         
      </div>
    `;it===A?(U.close(),Ct(null)):(U.setContent(en),U.open(W,O),Ct(A))},jt=A=>{const b=Y&&(Y==null?void 0:Y.length)>0&&Y.find(O=>(O==null?void 0:O.value)===A&&O);yn(b||null)},Zn=()=>{Object.keys(d).length>0||kn?gt(!kn):Hr.error("Please select any vehicle")};if(Kr)return"Error loading maps";if(!Re)return"Loading maps";if(!X)return null;const ne={height:"93vh",width:"100%",transition:"transform 0.5s ease-in-out"};return G.jsxs(G.Fragment,{children:[G.jsx(Nn,{sx:{position:"absolute",top:"780px",left:Z?"74px":"250px",zIndex:1,background:nf.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:G.jsxs($d,{sx:{color:"white"},onClick:Zn,children:[kn?"Hide":"Show"," Vehicle Info",G.jsx(s0,{})]})}),kn===!0&&G.jsx(l0,{handleVehicleInfo:Zn,udpatedParams:Yn}),G.jsxs(r0,{id:"map",mapContainerStyle:ne,zoom:Object.keys(d).length>0?15:5.8,center:i,onLoad:A=>{On.current=A},options:{styles:H?tn:""},children:[Object.keys(d).length>0&&G.jsx(jd,{setPlace:Rn,place:an}),N||f?G.jsx(Nn,{sx:{position:"absolute",top:"50%",left:"50%"},children:G.jsx(o0,{})}):m&&m.length>0&&m.map((A,b)=>{var O,W;return G.jsx(i0,{position:{lat:parseFloat((O=A==null?void 0:A.location)==null?void 0:O.lat),lng:parseFloat((W=A==null?void 0:A.location)==null?void 0:W.lng)},animation:window.google.maps.Animation.DROP,icon:{path:I[`${an}`],fillOpacity:2,strokeWeight:1,scale:1,fillColor:"orange"}},b)})]})]})}function J0(){const{locationData:S,selectedVehicle:f,selectedParameterList:i}=Vt(pn=>pn.liveMap),{mode:g,selectedVehicleGroup:d}=Vt(pn=>pn.dashboard),_=Jd(g),[I,E]=rn.useState([]),{w_customer_id:m}=Vt(pn=>pn.auth),[B,P]=rn.useState(),[M,N]=rn.useState(!1),[H,tn]=rn.useState(!1),[Y,Z]=rn.useState([]),[X,wn]=rn.useState(!0),[an,Rn]=rn.useState(!1),[gn,bn]=rn.useState(!1);let z=tf();rn.useEffect(()=>{z(Hd({}))},[]),rn.useEffect(()=>{Cn()},[]),rn.useEffect(()=>{var pn;if(Object.keys(f).length>0){const yn=(S==null?void 0:S.length)>0&&(S==null?void 0:S.filter(k=>Number(k.latestDocument.imei)===Number(f==null?void 0:f.imei)));if((yn==null?void 0:yn.length)<=0){Hr.error("Data not available for this vehicle",{id:"clipboard"});return}const{lat:kn,lng:gt}=((pn=yn==null?void 0:yn[0])==null?void 0:pn.latestDocument)??{},Yn={lat:kn||qo.lat,lng:gt||qo.lat};z(ef(Yn))}},[f,S]),rn.useEffect(()=>{Z([]),z(zo([{reg_id:"",imei:"",params:[]}]))},[f]);const Cn=async()=>{try{Rn(!0);let pn=[],yn=[];const kn=await z(Zd({w_customer_id:m}));if(Array.isArray(kn.payload)){kn.payload.forEach(k=>{var Dn,In,pt,On;Array.isArray(k.imei)&&k.imei.length>0&&((Dn=k.imei[0])!=null&&Dn.mac_id)?(pn.push({id:k.id,label:k.registration_id,value:(In=k.imei[0])==null?void 0:In.mac_id,vehilce_type:k==null?void 0:k.segment,chassis_no:k==null?void 0:k.chassis_no,engine_no:k==null?void 0:k.engine_no,workShop:k==null?void 0:k.workshop,registration_id:k==null?void 0:k.registration_id,sell_date:k==null?void 0:k.sell_date,customer_name:k==null?void 0:k.customer_name,vehicle_model:(pt=k==null?void 0:k.vehicle_model)==null?void 0:pt.name,vehicle_group:k==null?void 0:k.vehicle_group}),yn.push((On=k.imei[0])==null?void 0:On.mac_id)):console.error("IMEI data not found for item:",k)});const gt="one",Yn=yn;yn.length>0&&z(Kd({type:gt,imei:Yn})),E(pn),z(zd(pn)),z(qd({w_customer_id:m})),Rn(!1)}else Rn(!1),console.error("Unexpected data format:",kn),Hr.error("Unexpected data format:")}catch(pn){console.error("Error fetching vehicle data:",pn),Hr.error(`Error fetching vehicle data: ${pn}`)}},it=async pn=>{const{label:yn,imei:kn,id:gt,reg_id:Yn,checked:k}=pn;P(On=>On.map(xn=>xn.id===gt?{...xn,checked:!k}:xn));let Dn=[...Y],In=[...Y];if(!k)S.forEach(On=>{On.latestDocument.imei===kn&&(Dn.push({label:yn,value:On.latestDocument[yn==="maininputvoltage"?"mainInputVoltage":yn]}),In=Dn,Z(Dn))});else{let On=Y.filter(xn=>xn.label!==yn);In=On,Z(On)}console.log("tempParamList",In),z(zo([{reg_id:Yn,imei:kn,params:In}]))},Ct=I.filter(pn=>Object.keys(d).length===0||pn.vehicle_group===d.id);return G.jsxs("div",{className:"app",children:[G.jsx(Xd,{}),G.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[G.jsx(Vd,{title:"Live Map",setShowVehicles:N,showVehicles:M,showParameters:H,setShowParameters:tn,setShowCard:wn,showCard:X,setShowVehiclesGroup:bn,showVehiclesGroup:gn}),G.jsx(t0,{setShowVehiclesGroup:bn,showVehiclesGroup:gn,where:"livemap"}),G.jsxs(Nn,{style:{display:"flex",width:"100%",height:"95vh"},children:[G.jsx(Nn,{style:{width:M||H?"80%":"100%"},children:G.jsx(L0,{showCard:X,loadingVehicle:an})}),M&&G.jsx(Nn,{style:{width:"20%",backgroundColor:_.grey[100]},children:G.jsx(Yd,{vehicleData:Ct,title:"Live Map",setParameterData:P,loadingVehicle:an,setShowVehicles:N,showVehicles:M,showParameters:H,setShowParameters:tn})}),H&&G.jsx(Nn,{style:{width:"20%",backgroundColor:_.grey[100]},children:G.jsx(n0,{parametersData:B,setParameterData:P,handleParameterChange:it})})]})]})]})}export{J0 as default};
