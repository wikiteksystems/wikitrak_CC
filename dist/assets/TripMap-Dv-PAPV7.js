import{b as l,j as t,z as V,y as Ae,F as ot,ar as st,E as O,G as K,bw as lt,an as U,C as D,T as F,bx as rt,by as it,N as ct,bz as dt,D as gt,av as pt,bA as ht}from"./index-CacN93qF.js";import{a as ae,O as ye,u as ut,G as xt,D as ft,P as ke,I as Pe,b as q}from"./esm-BpIC8BEg.js";import{r as bt}from"./redTractor-NXgVJyvR.js";import{T as mt}from"./TripGraph-BKf2Iz15.js";import{B as A,C as wt}from"./CircularProgress-DzZZsU67.js";import{d as St}from"./Info-Bro-dzFk.js";import{d as jt}from"./Close-CaDFqelt.js";function Ee({trip:s,tripPlay:o,onTripEnd:h,setSpeed:u}){const[r,S]=l.useState([]),[c,x]=l.useState([]),[f,j]=l.useState(0),b=l.useRef(null),L=1e4,[a,H]=l.useState(0),[G,w]=l.useState(0);l.useEffect(()=>{if(Array.isArray(s)&&s.length>0){const y=s.filter(g=>(g==null?void 0:g.lat)&&(g==null?void 0:g.lng)).map(g=>({lat:parseFloat(g.lat),lng:parseFloat(g.lng),heading:g.heading||0,speed:g.speed||0}));S(y.length>0?y:[])}else S([])},[s]),l.useEffect(()=>{if(o&&r.length>1){j(0),x([]);const y=performance.now(),g=E=>{const R=E-y,P=Math.min(R/L,1);j(P),P<1?b.current=requestAnimationFrame(g):(x([...r]),h())};return b.current=requestAnimationFrame(g),()=>cancelAnimationFrame(b.current)}},[o,r]);const C=l.useMemo(()=>{var N,I;if(r.length<2||f===0)return r[0]||{lat:0,lng:0};const y=r.length-1,g=Math.floor(f*y),E=Math.min(g+1,y),R=f*y%1,P=r[g]||{lat:0,lng:0},W=r[E]||{lat:0,lng:0},T={lat:P.lat+(W.lat-P.lat)*R,lng:P.lng+(W.lng-P.lng)*R},_=((N=r[g])==null?void 0:N.heading)||0,v=((I=r[g])==null?void 0:I.speed)||0;return H(_),w(v),u(v),f>0&&o&&x(M=>[...M,T]),T},[r,f,o]);return t.jsxs(t.Fragment,{children:[r.length>1&&t.jsx(ae,{path:r,options:{strokeColor:"red",strokeOpacity:1,strokeWeight:4,geodesic:!1}}),o&&c.length>1&&t.jsx(ae,{path:c,options:{strokeColor:"green",strokeOpacity:1,strokeWeight:5,zIndex:1e3,geodesic:!1}}),o&&C.lat!==0&&C.lng!==0&&t.jsx(ye,{position:C,mapPaneName:ye.OVERLAY_MOUSE_TARGET,children:t.jsx("div",{style:{transform:`rotate(${a}deg)`,transition:"transform 0.2s linear",width:"30px",height:"30px",transformOrigin:"center center",position:"absolute",left:"50%",top:"50%",translate:"-50% -50%"},children:t.jsx("img",{src:bt,alt:"Tractor",style:{width:"100%",height:"100%"}})})})]})}function Ct({tripPlay:s,speed:o,totalDistance:h,Acreage:u,filterCoordinates:r,acreageTrips:S,handleTrip:c,showGraph:x,handleShowGraph:f,drawing:j,setDrawing:b,setPaths:L,setCurrentPath:a,setMousePos:H,setAreaInfo:G}){var T,_;const{selectedTripData:w}=V(v=>v.dashboard);let C=Ae(),y=ot();const[g]=st(),E=g.get("source"),R=()=>{var v,N,I;if(console.log("selected trip data",(v=w[0])==null?void 0:v.venderId,S),w.length>0)if(((N=w[0])==null?void 0:N.venderId)==="VT200"||((I=w[0])==null?void 0:I.venderId)==="wtkpltf001")if(Object.keys(S).length>0){let M=0;Object.keys(S).map($=>{let z=lt(S[$]);M+=z}),console.log("final acerage",M),C(U(M))}else D.error("No acreage trip found");else r(w,C)},P=()=>{y("/reports")},W=w&&w.length>0?!(((T=w[0])==null?void 0:T.venderId)==="VT200"||((_=w[0])==null?void 0:_.venderId)==="wtkpltf001"):!0;return t.jsxs(A,{sx:{bgcolor:O.bgColor,position:"relative",color:"white",display:"flex",alignItems:"center",overflowX:"hidden",flexWrap:"wrap",border:"1px solid white",gap:"5px",paddingLeft:"5px",padding:"10px 10px"},children:[t.jsxs(K,{sx:{background:"white",border:"1px solid white",borderRadius:"5px",padding:"5px 20px",color:"black"},onClick:R,disabled:W,children:[" ","Calculate Acerage"]}),t.jsxs(K,{sx:{background:s?"transparent":"white",border:"1px solid white",borderRadius:"5px",height:"38px",padding:"5px 20px",color:s?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{c()},children:[s?"Pause":"Play","-Trip"]}),t.jsxs(K,{style:{height:"38px",padding:"5px 20px"},sx:{background:x?"transparent":"white",border:"1px solid white",borderRadius:"5px",color:x?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{f()},children:[x?"Hide":"Show","-Graph"]}),E==="TripDetail"&&t.jsx(K,{style:{height:"38px",padding:"5px 20px"},sx:{background:"white",border:"1px solid white",borderRadius:"5px",color:"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{P()},children:"Go back"})]})}const yt=({label:s,value:o})=>t.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[t.jsx(F,{variant:"body2",color:"textSecondary",children:s}),t.jsx(F,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:o||"N/A"})]}),kt=(s,o)=>(s==null?void 0:s.find(h=>{var u,r;return((r=(u=h.imei)==null?void 0:u[0])==null?void 0:r.mac_id)===o.imei}))||{},Ie=({title:s,details:o})=>t.jsx(A,{sx:{width:"45%"},children:o.map(({label:h,value:u})=>t.jsx(yt,{label:h,value:u},h))});function Pt({handleVehicleInfo:s,vehicleReport:o,speed:h,totalDistance:u,Acreage:r,tripPlay:S,whereToUse:c}){var G,w,C;const{collapsed:x}=V(y=>y.auth),{vehicleList:f,selectedVehicle:j}=V(y=>y.liveMap),[b,L]=l.useState({});l.useEffect(()=>{L(kt(f,j))},[f,j]),l.useEffect(()=>{},[o]);const a=[{label:"Vehicle No:",value:b==null?void 0:b.registration_id},{label:"Model:",value:(G=b==null?void 0:b.vehicle_model)==null?void 0:G.name},{label:"IMEI No:",value:(C=(w=b==null?void 0:b.imei)==null?void 0:w[0])==null?void 0:C.mac_id},{label:"Chassis No:",value:b==null?void 0:b.chassis_no},{label:"Engine No:",value:b==null?void 0:b.engine_no}],H=[{label:"Equipment:",value:"N/A"},{label:"Avg Speed:",value:(o==null?void 0:o.averageSpeed)||"N/A"},{label:"Total Distance:",value:(o==null?void 0:o.totalDistance)||"N/A"},{label:"Avg trips/day:",value:(o==null?void 0:o.avgTrip)||"N/A"}];return t.jsxs(A,{sx:{position:"absolute",top:"570px",left:x?"280px":"450px",zIndex:1,background:O.bgShadow,p:2,borderRadius:2,color:"white",width:"58%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[t.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[t.jsx(F,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),t.jsx(jt,{sx:{cursor:"pointer",color:"black"},onClick:s})]}),c==="TripMonitor"&&t.jsxs(A,{sx:{display:"flex",justifyContent:"flex-start",gap:"10px",paddingBottom:"20px"},children:[t.jsxs(A,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px",width:"150px",display:"flex",justifyContent:"space-evenly",background:O.bgColor},children:[t.jsx(F,{children:"Speed"}),t.jsxs(F,{children:[S?h:0," KM/H"]})]}),t.jsxs(F,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px",background:O.bgColor},children:["Total-Distance ",u," KM"]}),t.jsxs(F,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:O.bgColor},children:[parseFloat(parseFloat(r).toFixed(2)*43560).toFixed()," Sqft"]}),t.jsxs(F,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:O.bgColor},children:[parseFloat(r).toFixed(2)*8," Kanal"]}),t.jsxs(F,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:O.bgColor},children:[parseFloat(parseFloat(r).toFixed(2)*8/5).toFixed(2)," Bigha"]}),t.jsxs(F,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:O.bgColor},children:[parseFloat(r).toFixed(2)," acre"]})]}),t.jsxs(A,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Ie,{title:"Vehicle Details",details:a}),t.jsx(Ie,{title:"Trip Details",details:H})]})]})}const Et="/assets/endTrip-CEqIwvWS.png",Me="/assets/endTrip_-BsrUUtoJ.png",ve="/assets/startTrip-CGKteKGr.png",It=(s,o)=>{const r=[];s.length>0&&s.forEach(c=>{let x={latitude:c.lat,longitude:c.lng},f=[];s.forEach(j=>{const b={latitude:j.lat,longitude:j.lng};if(b.latitude&&b.longitude&&b.latitude!==x.latitude&&b.longitude!==x.longitude){const L=vt(c.lat,c.lng,j.lat,j.lng);L<20&&L>10&&f.push(j)}}),f.length>10&&r.push(c)});const S=s.filter(c=>c.lat!==void 0&&c.lng!==void 0).map(c=>({lat:parseFloat(c.lat),lng:parseFloat(c.lng)}));if(S.length>0){o(dt(r));try{const c=Mt(S),x=Ft(c),f=new window.google.maps.Polygon({paths:x});return At(f,o)}catch(c){return console.error("Error calculating convex hull or area:",c),o(U(0)),0}}else return o(U(0)),0},Mt=s=>{const o=(c,x,f)=>{const j=(x.lat-c.lat)*(f.lng-x.lng)-(x.lng-c.lng)*(f.lat-x.lat);return j===0?0:j>0?1:2},h=s.reduce((c,x)=>x.lng<c.lng?x:c);let u=[],r=h,S;do{u.push(r),S=s[0]===r?s[1]:s[0];for(let c=0;c<s.length;c++)o(r,S,s[c])===2&&(S=s[c]);r=S}while(r!==h);return u};function vt(s,o,h,u){const S=s*Math.PI/180,c=h*Math.PI/180,x=(h-s)*Math.PI/180,f=(u-o)*Math.PI/180,j=Math.sin(x/2)*Math.sin(x/2)+Math.cos(S)*Math.cos(c)*Math.sin(f/2)*Math.sin(f/2);return 6371e3*(2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)))}const Ft=s=>{s.sort((u,r)=>u.lng-r.lng||u.lat-r.lat);const o=[],h=[];for(const u of s){for(;o.length>=2&&Fe(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}for(let u=s.length-1;u>=0;u--){const r=s[u];for(;h.length>=2&&Fe(h[h.length-2],h[h.length-1],r)<=0;)h.pop();h.push(r)}return[...o.slice(0,-1),...h.slice(0,-1)]},At=(s,o)=>{if(!window.google||!window.google.maps.geometry){console.log("not loaded");return}const u=window.google.maps.geometry.spherical.computeArea(s.getPath())/4046.86;return o(U(u)),u},Fe=(s,o,h)=>(o.lat-s.lat)*(h.lng-s.lng)-(o.lng-s.lng)*(h.lat-s.lat),Lt=["drawing","geometry"],Tt=({selectedTrip:s,center:o,showCard:h})=>{var he,ue,xe,fe,be,me,we,Se,je,Ce;const u=Ae(),r=rt(),{isLoaded:S,loadError:c}=ut({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:Lt}),{Acreage:x}=V(e=>e.tripMonitor),{selectedVehicle:f}=V(e=>e.liveMap),{singleTrip_Data:j,tripLoading:b,cords:L}=V(e=>e.tripMonitor),{selectedTripData:a,mode:H,styles:G,allTripList:w,activeIndex:C}=V(e=>e.dashboard),{collapsed:y}=V(e=>e.auth),[g,E]=l.useState(null),R=l.useRef(null),[P,W]=l.useState(null),[T,_]=l.useState(null),[v,N]=l.useState([]);l.useState([]);const[I,M]=l.useState(!1),[$,z]=l.useState(0),[Q,Le]=l.useState(!1),[ne,Te]=l.useState(0);l.useState([]),l.useState([]);const[J,oe]=l.useState(!1),[Oe,Re]=l.useState({}),[Y,se]=l.useState([]),[_e,le]=l.useState(null),[Ne,re]=l.useState(null),[Ve,ze]=l.useState({}),[ie,ee]=l.useState(0),[Be,te]=l.useState([]),[De,Ot]=l.useState(!1),[ce,Rt]=l.useState([]),[X,_t]=l.useState([]),[He,Nt]=l.useState([]),[de,Vt]=l.useState(null);l.useEffect(()=>{(async()=>{if(f!=null&&f.imei){const n=gt(),i=n.startOf("day").format("MM/DD/YYYY HH:mm:ss"),p=n.endOf("day").format("MM/DD/YYYY HH:mm:ss"),m={imei:[f.imei],startDate:i,endDate:p};try{const k=await pt(m);Re(k.data[0].data)}catch(k){console.error("Error fetching report:",k)}}})(),oe(!1)},[f,u]),l.useEffect(()=>{P&&T&&P.fitBounds(T)},[P,T,a]);let Ge=e=>{let n=ht(e),i={};n.map((p,m)=>{let k=e.slice(p.start,p.end+1);i[m]=k}),ze(i)};l.useEffect(()=>{if(console.log("selectedTripData",a),(a==null?void 0:a.length)>0){let e=a.map(i=>({lat:i.lat,lng:i.lng}));console.log("selected trip coordinate ",e);const n=We({selectedTripData:a});Te(n),Ge(a)}},[a]);const We=({selectedTripData:e})=>{const n=e.reduce((i,p,m)=>{if(m===0)return i;const k=e[m-1],B=it(k.lat,k.lng,p.lat,p.lng);return i+B},0);return n==null?void 0:n.toFixed(2)};l.useEffect(()=>{var e,n,i,p,m;if(a&&(a==null?void 0:a.length)>0){const k=new window.google.maps.LatLngBounds,B=new window.google.maps.LatLng(parseFloat((e=a[0])==null?void 0:e.lat),parseFloat((n=a[0])==null?void 0:n.lng)),nt=new window.google.maps.LatLng(parseFloat((i=a[(a==null?void 0:a.length)-1])==null?void 0:i.lat),parseFloat((p=a[(a==null?void 0:a.length)-1])==null?void 0:p.lng));k.extend(B),k.extend(nt),z((m=a[0])==null?void 0:m.speed),_(k)}else _(null);M(!1),Ye()},[a]),l.useEffect(()=>{if(C==="all"&&w.length>0){const e=new window.google.maps.LatLngBounds;w.forEach(n=>{n.data.forEach(i=>{i.lat&&i.lng&&e.extend(new window.google.maps.LatLng(i.lat,i.lng))})}),_(e)}},[C,w]);const Ye=()=>{if(a&&a.length>0){const e=(p,m)=>{const B=new Date(p.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return{Date:p.createdAt.substring(0,10),Time:B,value:p[m]}},i=["speed","mainInputVoltage","ignition"].map(p=>({label:p==="speed"?"Speed":p==="mainInputVoltage"?"MainInputVoltage":"Ignition",randomColor:Ue(),data:a.map(m=>e(m,p))}));N(i)}else N([])},Ue=()=>"#"+Math.floor(Math.random()*16777215).toString(16),qe=()=>{var e;if(C==="all")w&&w.length>0?(M(!I),z(0),ee(0),te([])):D.error("No trips found");else if((a==null?void 0:a.length)>0)M(!I),z(0),ee(0),te([]);else return((e=Object.keys(a))==null?void 0:e.length)===0?D.error("Please Select Vehicle",{id:"vehicle"}):D.error("Please Select Trip",{id:"trip error"})},Ke=()=>{C==="all"&&ie<w.length-1?ee(e=>e+1):M(!1)},$e=()=>{var e;if((a==null?void 0:a.length)>0)Le(!Q);else return((e=Object.keys(a))==null?void 0:e.length)===0?D.error("Please Select Vehicle",{id:"vehicle"}):D.error("Please Select Trip",{id:"trip error"})},ge=()=>{Object.keys(f).length>0||J?oe(!J):D.error("Please select any vehicle")};if(c)return"Error loading maps";if(!S)return"Loading maps";const Je={width:"100%",height:h?"87vh":"93vh"},Xe=e=>{if(e.type==="polygon"){const n=e.overlay;n.setEditable(!0);const i=new google.maps.InfoWindow({content:"Calculating...",position:Z(n)});i.open(P),se(m=>[...m,{polygon:n,infoWindow:i}]),le(n),google.maps.event.clearListeners(n.getPath(),"set_at"),google.maps.event.clearListeners(n.getPath(),"insert_at"),google.maps.event.clearListeners(n.getPath(),"remove_at");const p=()=>{const m=pe(n,i);i.setContent(`Area: ${m} acres`),i.setPosition(Z(n))};google.maps.event.addListener(n.getPath(),"set_at",p),google.maps.event.addListener(n.getPath(),"insert_at",p),google.maps.event.addListener(n.getPath(),"remove_at",p),google.maps.event.addListener(n,"click",()=>{Y.forEach(({infoWindow:m})=>m.close()),i.open(P),i.setPosition(Z(n))}),p()}},pe=(e=null,n=null)=>{let i=0;if(e){const m=e.getPath().getArray();i=google.maps.geometry.spherical.computeArea(m)/4046.86}else Y.forEach(({polygon:m})=>{const k=m.getPath().getArray(),B=google.maps.geometry.spherical.computeArea(k);i+=B/4046.86});const p=i.toFixed(2);return re(p),u(U(p)),n&&(n.setContent(`Area: ${p} acres`),n.setPosition(Z(e))),p},Z=e=>{const n=e.getPath().getArray();let i=0,p=0;return n.forEach(m=>{i+=m.lat(),p+=m.lng()}),new google.maps.LatLng(i/n.length,p/n.length)},Ze=()=>{Y.forEach(({polygon:e,infoWindow:n})=>{e.setMap(null),n.close()}),se([]),re(0),le(null),u(U(0))},Qe=()=>{Y.forEach(e=>e.setEditable(!0))},et=()=>{Y.forEach(e=>e.setEditable(!1))},tt=()=>{_e?pe():alert("No shape is selected. Please draw or select a shape.")};let d=w&&w.length>0?[...w].reverse():[];const at=r.pathname;return t.jsxs(t.Fragment,{children:[b&&t.jsx(A,{sx:{position:"absolute",top:"50vh",left:"50%",zIndex:"1000"},children:t.jsx(wt,{})}),h&&t.jsx(Ct,{tripPlay:I,speed:$,totalDistance:ne,Acreage:x,filterCoordinates:It,acreageTrips:Ve,handleTrip:qe,showGraph:Q,handleShowGraph:$e}),t.jsx(A,{sx:{position:"absolute",top:"14%",left:y?"15%":"25%",zIndex:1,background:O.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:t.jsxs(K,{sx:{color:"white"},onClick:ge,children:[J?"Hide":"Show"," Vehicle Info",t.jsx(St,{})]})}),J===!0&&t.jsx(Pt,{handleVehicleInfo:ge,vehicleReport:Oe,tripPlay:I,speed:$,totalDistance:ne,Acreage:x,whereToUse:"TripMonitor"}),t.jsxs(xt,{ref:R,mapContainerStyle:Je,zoom:10,center:o,onLoad:e=>W(e),options:{disableDoubleClickZoom:!0,styles:H?G:""},children:[t.jsx(ft,{onOverlayComplete:Xe,options:{drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:["polygon"]}}}),De&&X.length>0&&de&&t.jsx(ae,{path:[...X,de],options:{strokeColor:"black",strokeOpacity:.8,strokeWeight:4,clickable:!1}}),X.length>1&&t.jsx(ke,{path:X,options:{fillColor:"#00FF00",fillOpacity:.4,strokeColor:"#000",strokeWeight:2,clickable:!1,editable:!1}}),ce.map((e,n)=>t.jsx(ke,{path:e,options:{fillColor:"#FF0000",fillOpacity:.4,strokeColor:"#000",strokeWeight:2,clickable:!1,editable:!1}},n)),ce.length>0&&He.map((e,n)=>t.jsx(Pe,{position:e.position,children:t.jsxs("div",{children:[t.jsx("strong",{children:"Area:"})," ",e.area.toFixed(2)," acres"]})},n)),t.jsxs("div",{style:{position:"absolute",bottom:30,left:20,background:"white",padding:"10px",borderRadius:"8px",boxShadow:"0 0 6px rgba(0,0,0,0.2)",zIndex:100,width:"auto"},children:[t.jsxs("p",{children:["Area: ",Ne||0," acres"]}),Y.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Qe,style:{marginTop:"10px",marginRight:"10px"},children:"Enable Editing"}),t.jsx("button",{onClick:et,style:{marginTop:"10px",marginRight:"10px"},children:"Disable Editing"}),t.jsx("button",{onClick:tt,style:{marginTop:"10px",marginRight:"10px"},children:"Calculate Area"}),t.jsx("button",{onClick:Ze,style:{marginTop:"10px"},children:"Clear All Shapes"})]})]}),C==="all"&&d&&d.length>0&&t.jsx(q,{onClick:()=>E(d[0].data[0]),position:{lat:parseFloat((he=d[0].data[0])==null?void 0:he.lat)+1e-6,lng:parseFloat((ue=d[0].data[0])==null?void 0:ue.lng)+1e-6},animation:"BOUNCE",icon:{url:ve,scaledSize:new google.maps.Size(60,60)}}),C==="all"&&d&&d.length>0&&t.jsx(q,{onClick:()=>E(d[(d==null?void 0:d.length)-1].data[d[(d==null?void 0:d.length)-1].data.length-1]),position:{lat:parseFloat(((xe=d[(d==null?void 0:d.length)-1].data[d[(d==null?void 0:d.length)-1].data.length-1])==null?void 0:xe.lat)+1e-6),lng:parseFloat(((fe=d[(d==null?void 0:d.length)-1].data[d[(d==null?void 0:d.length)-1].data.length-1])==null?void 0:fe.lng)+1e-6)},animation:"BOUNCE",icon:{url:Me,scaledSize:new google.maps.Size(60,60)}}),a&&(a==null?void 0:a.length)>0&&t.jsx(q,{onClick:()=>E(a[0]),position:{lat:parseFloat((be=a[0])==null?void 0:be.lat)+1e-6,lng:parseFloat((me=a[0])==null?void 0:me.lng)+1e-6},animation:"BOUNCE",icon:{url:ve,scaledSize:new google.maps.Size(60,60)}}),a&&(a==null?void 0:a.length)>0&&t.jsx(q,{onClick:()=>E(a[(a==null?void 0:a.length)-1]),position:{lat:parseFloat(((we=a[(a==null?void 0:a.length)-1])==null?void 0:we.lat)+1e-5),lng:parseFloat(((Se=a[(a==null?void 0:a.length)-1])==null?void 0:Se.lng)+1e-6)},animation:"BOUNCE",icon:{url:Me,scaledSize:new google.maps.Size(60,60)}}),C==="all"&&d&&d.length>0&&d.map((e,n)=>{var i,p;return t.jsx(q,{position:{lat:parseFloat((i=e==null?void 0:e.data[(e==null?void 0:e.data.length)-1])==null?void 0:i.lat),lng:parseFloat((p=e==null?void 0:e.data[(e==null?void 0:e.data.length)-1])==null?void 0:p.lng)},onClick:()=>E(e==null?void 0:e.data[(e==null?void 0:e.data.length)-1]),label:{text:(n+1).toString(),color:"white",fontWeight:"bold",fontSize:"14px"},animation:"BOUNCE",icon:{url:Et,scaledSize:new google.maps.Size(40,40)}},n)}),g&&t.jsx(Pe,{position:{lat:parseFloat(g==null?void 0:g.lat),lng:parseFloat(g==null?void 0:g.lng)},onCloseClick:()=>E(null),children:t.jsxs("div",{children:["Date-time:",g!=null&&g.Date?ct(new Date(g==null?void 0:g.Date)).format("DD-MM-YYYY HH:mm"):""]})}),a&&a.length>0&&t.jsx(Ee,{trip:a,tripPlay:I,setSpeed:z,onTripEnd:()=>M(!1)}),C==="all"&&d&&d.length>0&&d.map((e,n)=>t.jsx(Ee,{trip:e==null?void 0:e.data,tripPlay:n===ie?I:!1,setSpeed:z,onTripEnd:Ke,globalMarkerPath:Be,setGlobalMarkerPath:te},e==null?void 0:e.id)),t.jsx("div",{style:{position:"relative",top:200,left:12,color:"green"},children:((Ce=(je=v[0])==null?void 0:je.data)==null?void 0:Ce.length)>0&&Q&&t.jsx(mt,{item:v})})]},at)]})},Ut=Tt;export{Ut as T,It as f};
