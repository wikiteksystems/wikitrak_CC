import{c as Lt,j as s,g as dt,a as ht,s as Ee,_ as X,r as v,u as gt,b as mt,d as De,e as yt,f as $t,h as Nt,R as k,i as vt,k as de,l as Ft,B as O,I as Mt,m as Vt,n as Bt,o as Le,p as B,q as zt,t as Kt,v as qe,T as Q,F as Wt,G as Gt,M as Yt,w as xt,x as Ht,y as ue,z as bt,A as Oe,C as ze,D as At,E as Ut,H as Zt,J as qt,K as ye,L as Ve,N as Xt,O as Jt,P as Qt,Q as en,S as tn,U as Xe,V as nn,W as rn,X as we,Y as on,Z as an,$ as sn,a0 as ln,a1 as cn,a2 as un,a3 as fn,a4 as pn,a5 as dn,a6 as hn,a7 as gn,a8 as mn,a9 as yn}from"./index-BiuHTavI.js";import{u as vn,f as xn}from"./TripMap-CXghwiJV.js";import{S as bn}from"./Switch-mxTVsSi1.js";import{f as M,_ as wt,a as jt,b as An,c as wn,T as He,p as ee,L as U,d as Ue,e as kt,D as jn,G as kn,u as Sn,C as On,i as ve,g as fe,S as Pn,A as _n,h as Tn,j as Je,k as he,l as Rn,m as Cn,n as St,o as In,q as Se,w as Qe,r as Pe,s as En,t as Dn,R as Ot,B as Ln,v as $n,X as Nn,Y as Fn,x as Pt,y as Mn}from"./BarChart-DuS0XSGN.js";import"./EllipsisOutlined-l7Zepq-D.js";const Vn=Lt(s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Bn(t){return dt("MuiAvatar",t)}ht("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const zn=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Kn=t=>{const{classes:e,variant:o,colorDefault:n}=t;return yt({root:["root",o,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Bn,e)},Wn=Ee("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,e[o.variant],o.colorDefault&&e.colorDefault]}})(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:X({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:X({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]})),Gn=Ee("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Yn=Ee(Vn,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"75%",height:"75%"});function Hn({crossOrigin:t,referrerPolicy:e,src:o,srcSet:n}){const[r,i]=v.useState(!1);return v.useEffect(()=>{if(!o&&!n)return;i(!1);let a=!0;const c=new Image;return c.onload=()=>{a&&i("loaded")},c.onerror=()=>{a&&i("error")},c.crossOrigin=t,c.referrerPolicy=e,c.src=o,n&&(c.srcset=n),()=>{a=!1}},[t,e,o,n]),r}const Un=v.forwardRef(function(e,o){const n=gt({props:e,name:"MuiAvatar"}),{alt:r,children:i,className:a,component:c="div",slots:f={},slotProps:l={},imgProps:g,sizes:b,src:y,srcSet:P,variant:x="circular"}=n,u=mt(n,zn);let w=null;const S=Hn(X({},g,{src:y,srcSet:P})),_=y||P,T=_&&S!=="error",N=X({},n,{colorDefault:!T,component:c,variant:x}),E=Kn(N),[z,W]=vn("img",{className:E.img,elementType:Gn,externalForwardedProps:{slots:f,slotProps:{img:X({},g,l.img)}},additionalProps:{alt:r,src:y,srcSet:P,sizes:b},ownerState:N});return T?w=s.jsx(z,X({},W)):i||i===0?w=i:_&&r?w=r[0]:w=s.jsx(Yn,{ownerState:N,className:E.fallback}),s.jsx(Wn,X({as:c,ownerState:N,className:De(E.root,a),ref:o},u,{children:w}))}),_t=Un;function Zn(t){return dt("MuiFormGroup",t)}ht("MuiFormGroup",["root","row","error"]);const qn=["className","row"],Xn=t=>{const{classes:e,row:o,error:n}=t;return yt({root:["root",o&&"row",n&&"error"]},Zn,e)},Jn=Ee("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.row&&e.row]}})(({ownerState:t})=>X({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),Qn=v.forwardRef(function(e,o){const n=gt({props:e,name:"MuiFormGroup"}),{className:r,row:i=!1}=n,a=mt(n,qn),c=$t(),f=Nt({props:n,muiFormControl:c,states:["error"]}),l=X({},n,{row:i,error:f.error}),g=Xn(l);return s.jsx(Jn,X({className:De(g.root,r),ownerState:l,ref:o},a))}),er=Qn;var tr=["points","className","baseLinePoints","connectNulls"];function ge(){return ge=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ge.apply(this,arguments)}function nr(t,e){if(t==null)return{};var o=rr(t,e),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function rr(t,e){if(t==null)return{};var o={},n=Object.keys(t),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(o[r]=t[r]);return o}function et(t){return sr(t)||ar(t)||ir(t)||or()}function or(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ir(t,e){if(t){if(typeof t=="string")return Ke(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Ke(t,e)}}function ar(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sr(t){if(Array.isArray(t))return Ke(t)}function Ke(t,e){(e==null||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}var tt=function(e){return e&&e.x===+e.x&&e.y===+e.y},lr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=[[]];return e.forEach(function(n){tt(n)?o[o.length-1].push(n):o[o.length-1].length>0&&o.push([])}),tt(e[0])&&o[o.length-1].push(e[0]),o[o.length-1].length<=0&&(o=o.slice(0,-1)),o},je=function(e,o){var n=lr(e);o&&(n=[n.reduce(function(i,a){return[].concat(et(i),et(a))},[])]);var r=n.map(function(i){return i.reduce(function(a,c,f){return"".concat(a).concat(f===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(r,"Z"):r},cr=function(e,o,n){var r=je(e,n);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(je(o.reverse(),n).slice(1))},ur=function(e){var o=e.points,n=e.className,r=e.baseLinePoints,i=e.connectNulls,a=nr(e,tr);if(!o||!o.length)return null;var c=De("recharts-polygon",n);if(r&&r.length){var f=a.stroke&&a.stroke!=="none",l=cr(o,r,i);return k.createElement("g",{className:c},k.createElement("path",ge({},M(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),f?k.createElement("path",ge({},M(a,!0),{fill:"none",d:je(o,i)})):null,f?k.createElement("path",ge({},M(a,!0),{fill:"none",d:je(r,i)})):null)}var g=je(o,i);return k.createElement("path",ge({},M(a,!0),{fill:g.slice(-1)==="Z"?a.fill:"none",className:c,d:g}))},fr=wt,pr=An,dr=jt;function hr(t,e){return t&&t.length?fr(t,dr(e),pr):void 0}var gr=hr;const mr=vt(gr);var yr=wt,vr=jt,xr=wn;function br(t,e){return t&&t.length?yr(t,vr(e),xr):void 0}var Ar=br;const wr=vt(Ar);var jr=["cx","cy","angle","ticks","axisLine"],kr=["ticks","tick","angle","tickFormatter","stroke"];function xe(t){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(t)}function ke(){return ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ke.apply(this,arguments)}function nt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,n)}return o}function ae(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?nt(Object(o),!0).forEach(function(n){$e(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):nt(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function rt(t,e){if(t==null)return{};var o=Sr(t,e),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Sr(t,e){if(t==null)return{};var o={},n=Object.keys(t),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(o[r]=t[r]);return o}function Or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rt(n.key),n)}}function Pr(t,e,o){return e&&ot(t.prototype,e),o&&ot(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _r(t,e,o){return e=Re(e),Tr(t,Tt()?Reflect.construct(e,o||[],Re(t).constructor):e.apply(t,o))}function Tr(t,e){if(e&&(xe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rr(t)}function Rr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!t})()}function Re(t){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Re(t)}function Cr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&We(t,e)}function We(t,e){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},We(t,e)}function $e(t,e,o){return e=Rt(e),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function Rt(t){var e=Ir(t,"string");return xe(e)=="symbol"?e:String(e)}function Ir(t,e){if(xe(t)!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var n=o.call(t,e||"default");if(xe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ne=function(t){Cr(e,t);function e(){return Or(this,e),_r(this,e,arguments)}return Pr(e,[{key:"getTickValueCoord",value:function(n){var r=n.coordinate,i=this.props,a=i.angle,c=i.cx,f=i.cy;return ee(c,f,r,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,r;switch(n){case"left":r="end";break;case"right":r="start";break;default:r="middle";break}return r}},{key:"getViewBox",value:function(){var n=this.props,r=n.cx,i=n.cy,a=n.angle,c=n.ticks,f=mr(c,function(g){return g.coordinate||0}),l=wr(c,function(g){return g.coordinate||0});return{cx:r,cy:i,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:f.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.cx,i=n.cy,a=n.angle,c=n.ticks,f=n.axisLine,l=rt(n,jr),g=c.reduce(function(x,u){return[Math.min(x[0],u.coordinate),Math.max(x[1],u.coordinate)]},[1/0,-1/0]),b=ee(r,i,g[0],a),y=ee(r,i,g[1],a),P=ae(ae(ae({},M(l,!1)),{},{fill:"none"},M(f,!1)),{},{x1:b.x,y1:b.y,x2:y.x,y2:y.y});return k.createElement("line",ke({className:"recharts-polar-radius-axis-line"},P))}},{key:"renderTicks",value:function(){var n=this,r=this.props,i=r.ticks,a=r.tick,c=r.angle,f=r.tickFormatter,l=r.stroke,g=rt(r,kr),b=this.getTickTextAnchor(),y=M(g,!1),P=M(a,!1),x=i.map(function(u,w){var S=n.getTickValueCoord(u),_=ae(ae(ae(ae({textAnchor:b,transform:"rotate(".concat(90-c,", ").concat(S.x,", ").concat(S.y,")")},y),{},{stroke:"none",fill:l},P),{},{index:w},S),{},{payload:u});return k.createElement(U,ke({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(u.coordinate)},Ue(n.props,u,w)),e.renderTickItem(a,_,f?f(u.value,w):u.value))});return k.createElement(U,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,r=n.ticks,i=n.axisLine,a=n.tick;return!r||!r.length?null:k.createElement(U,{className:"recharts-polar-radius-axis"},i&&this.renderAxisLine(),a&&this.renderTicks(),kt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,r,i){var a;return k.isValidElement(n)?a=k.cloneElement(n,r):de(n)?a=n(r):a=k.createElement(He,ke({},r,{className:"recharts-polar-radius-axis-tick-value"}),i),a}}]),e}(v.PureComponent);$e(Ne,"displayName","PolarRadiusAxis");$e(Ne,"axisType","radiusAxis");$e(Ne,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function be(t){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(t)}function le(){return le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},le.apply(this,arguments)}function it(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,n)}return o}function se(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?it(Object(o),!0).forEach(function(n){Fe(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):it(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function Er(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,It(n.key),n)}}function Dr(t,e,o){return e&&at(t.prototype,e),o&&at(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lr(t,e,o){return e=Ce(e),$r(t,Ct()?Reflect.construct(e,o||[],Ce(t).constructor):e.apply(t,o))}function $r(t,e){if(e&&(be(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nr(t)}function Nr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ct=function(){return!!t})()}function Ce(t){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Ce(t)}function Fr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ge(t,e)}function Ge(t,e){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ge(t,e)}function Fe(t,e,o){return e=It(e),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function It(t){var e=Mr(t,"string");return be(e)=="symbol"?e:String(e)}function Mr(t,e){if(be(t)!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var n=o.call(t,e||"default");if(be(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vr=Math.PI/180,st=1e-5,Me=function(t){Fr(e,t);function e(){return Er(this,e),Lr(this,e,arguments)}return Dr(e,[{key:"getTickLineCoord",value:function(n){var r=this.props,i=r.cx,a=r.cy,c=r.radius,f=r.orientation,l=r.tickSize,g=l||8,b=ee(i,a,c,n.coordinate),y=ee(i,a,c+(f==="inner"?-1:1)*g,n.coordinate);return{x1:b.x,y1:b.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var r=this.props.orientation,i=Math.cos(-n.coordinate*Vr),a;return i>st?a=r==="outer"?"start":"end":i<-st?a=r==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.cx,i=n.cy,a=n.radius,c=n.axisLine,f=n.axisLineType,l=se(se({},M(this.props,!1)),{},{fill:"none"},M(c,!1));if(f==="circle")return k.createElement(jn,le({className:"recharts-polar-angle-axis-line"},l,{cx:r,cy:i,r:a}));var g=this.props.ticks,b=g.map(function(y){return ee(r,i,a,y.coordinate)});return k.createElement(ur,le({className:"recharts-polar-angle-axis-line"},l,{points:b}))}},{key:"renderTicks",value:function(){var n=this,r=this.props,i=r.ticks,a=r.tick,c=r.tickLine,f=r.tickFormatter,l=r.stroke,g=M(this.props,!1),b=M(a,!1),y=se(se({},g),{},{fill:"none"},M(c,!1)),P=i.map(function(x,u){var w=n.getTickLineCoord(x),S=n.getTickTextAnchor(x),_=se(se(se({textAnchor:S},g),{},{stroke:"none",fill:l},b),{},{index:u,payload:x,x:w.x2,y:w.y2});return k.createElement(U,le({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(x.coordinate)},Ue(n.props,x,u)),c&&k.createElement("line",le({className:"recharts-polar-angle-axis-tick-line"},y,w)),a&&e.renderTickItem(a,_,f?f(x.value,u):x.value))});return k.createElement(U,{className:"recharts-polar-angle-axis-ticks"},P)}},{key:"render",value:function(){var n=this.props,r=n.ticks,i=n.radius,a=n.axisLine;return i<=0||!r||!r.length?null:k.createElement(U,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,r,i){var a;return k.isValidElement(n)?a=k.cloneElement(n,r):de(n)?a=n(r):a=k.createElement(He,le({},r,{className:"recharts-polar-angle-axis-tick-value"}),i),a}}]),e}(v.PureComponent);Fe(Me,"displayName","PolarAngleAxis");Fe(Me,"axisType","angleAxis");Fe(Me,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var _e;function Ae(t){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(t)}function me(){return me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},me.apply(this,arguments)}function lt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,n)}return o}function C(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?lt(Object(o),!0).forEach(function(n){Y(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):lt(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function Br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dt(n.key),n)}}function zr(t,e,o){return e&&ct(t.prototype,e),o&&ct(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kr(t,e,o){return e=Ie(e),Wr(t,Et()?Reflect.construct(e,o||[],Ie(t).constructor):e.apply(t,o))}function Wr(t,e){if(e&&(Ae(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(t)}function Et(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Et=function(){return!!t})()}function Ie(t){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Ie(t)}function pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ye(t,e)}function Ye(t,e){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ye(t,e)}function Y(t,e,o){return e=Dt(e),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function Dt(t){var e=Yr(t,"string");return Ae(e)=="symbol"?e:String(e)}function Yr(t,e){if(Ae(t)!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var n=o.call(t,e||"default");if(Ae(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var te=function(t){Gr(e,t);function e(o){var n;return Br(this,e),n=Kr(this,e,[o]),Y(pe(n),"pieRef",null),Y(pe(n),"sectorRefs",[]),Y(pe(n),"id",Sn("recharts-pie-")),Y(pe(n),"handleAnimationEnd",function(){var r=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),de(r)&&r()}),Y(pe(n),"handleAnimationStart",function(){var r=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),de(r)&&r()}),n.state={isAnimationFinished:!o.isAnimationActive,prevIsAnimationActive:o.isAnimationActive,prevAnimationId:o.animationId,sectorToFocus:0},n}return zr(e,[{key:"isActiveIndex",value:function(n){var r=this.props.activeIndex;return Array.isArray(r)?r.indexOf(n)!==-1:n===r}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.label,c=i.labelLine,f=i.dataKey,l=i.valueKey,g=M(this.props,!1),b=M(a,!1),y=M(c,!1),P=a&&a.offsetRadius||20,x=n.map(function(u,w){var S=(u.startAngle+u.endAngle)/2,_=ee(u.cx,u.cy,u.outerRadius+P,S),T=C(C(C(C({},g),u),{},{stroke:"none"},b),{},{index:w,textAnchor:e.getTextAnchor(_.x,u.cx)},_),N=C(C(C(C({},g),u),{},{fill:"none",stroke:u.fill},y),{},{index:w,points:[ee(u.cx,u.cy,u.outerRadius,S),_],key:"line"}),E=f;return ve(f)&&ve(l)?E="value":ve(f)&&(E=l),k.createElement(U,{key:"label-".concat(u.startAngle,"-").concat(u.endAngle,"-").concat(u.midAngle,"-").concat(w)},c&&e.renderLabelLineItem(c,N),e.renderLabelItem(a,T,fe(u,E)))});return k.createElement(U,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var r=this,i=this.props,a=i.activeShape,c=i.blendStroke,f=i.inactiveShape;return n.map(function(l,g){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var b=r.isActiveIndex(g),y=f&&r.hasActiveIndex()?f:null,P=b?a:y,x=C(C({},l),{},{stroke:c?l.fill:l.stroke,tabIndex:-1});return k.createElement(U,me({ref:function(w){w&&!r.sectorRefs.includes(w)&&r.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},Ue(r.props,l,g),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(g)}),k.createElement(Pn,me({option:P,isActive:b,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,r=this.props,i=r.sectors,a=r.isAnimationActive,c=r.animationBegin,f=r.animationDuration,l=r.animationEasing,g=r.animationId,b=this.state,y=b.prevSectors,P=b.prevIsAnimationActive;return k.createElement(_n,{begin:c,duration:f,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(g,"-").concat(P),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var u=x.t,w=[],S=i&&i[0],_=S.startAngle;return i.forEach(function(T,N){var E=y&&y[N],z=N>0?Tn(T,"paddingAngle",0):0;if(E){var W=Je(E.endAngle-E.startAngle,T.endAngle-T.startAngle),I=C(C({},T),{},{startAngle:_+z,endAngle:_+W(u)+z});w.push(I),_=I.endAngle}else{var G=T.endAngle,F=T.startAngle,Z=Je(0,G-F),q=Z(u),K=C(C({},T),{},{startAngle:_+z,endAngle:_+q+z});w.push(K),_=K.endAngle}}),k.createElement(U,null,n.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(n){var r=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var a=++r.state.sectorToFocus%r.sectorRefs.length;r.sectorRefs[a].focus(),r.setState({sectorToFocus:a});break}case"ArrowRight":{var c=--r.state.sectorToFocus<0?r.sectorRefs.length-1:r.state.sectorToFocus%r.sectorRefs.length;r.sectorRefs[c].focus(),r.setState({sectorToFocus:c});break}case"Escape":{r.sectorRefs[r.state.sectorToFocus].blur(),r.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,r=n.sectors,i=n.isAnimationActive,a=this.state.prevSectors;return i&&r&&r.length&&(!a||!Ft(a,r))?this.renderSectorsWithAnimation():this.renderSectorsStatically(r)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,r=this.props,i=r.hide,a=r.sectors,c=r.className,f=r.label,l=r.cx,g=r.cy,b=r.innerRadius,y=r.outerRadius,P=r.isAnimationActive,x=this.state.isAnimationFinished;if(i||!a||!a.length||!he(l)||!he(g)||!he(b)||!he(y))return null;var u=De("recharts-pie",c);return k.createElement(U,{tabIndex:this.props.rootTabIndex,className:u,ref:function(S){n.pieRef=S}},this.renderSectors(),f&&this.renderLabels(a),kt.renderCallByParent(this.props,null,!1),(!P||x)&&Rn.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return r.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:r.curSectors,isAnimationFinished:!0}:n.sectors!==r.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,r){return n>r?"start":n<r?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,r){return k.isValidElement(n)?k.cloneElement(n,r):de(n)?n(r):k.createElement(On,me({},r,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,r,i){if(k.isValidElement(n))return k.cloneElement(n,r);var a=i;return de(n)&&(a=n(r),k.isValidElement(a))?a:k.createElement(He,me({},r,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),e}(v.PureComponent);_e=te;Y(te,"displayName","Pie");Y(te,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!kn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Y(te,"parseDeltaAngle",function(t,e){var o=Pe(e-t),n=Math.min(Math.abs(e-t),360);return o*n});Y(te,"getRealPieData",function(t){var e=t.props,o=e.data,n=e.children,r=M(t.props,!1),i=Cn(n,St);return o&&o.length?o.map(function(a,c){return C(C(C({payload:a},r),a),i&&i[c]&&i[c].props)}):i&&i.length?i.map(function(a){return C(C({},r),a.props)}):[]});Y(te,"parseCoordinateOfPie",function(t,e){var o=e.top,n=e.left,r=e.width,i=e.height,a=In(r,i),c=n+Se(t.props.cx,r,r/2),f=o+Se(t.props.cy,i,i/2),l=Se(t.props.innerRadius,a,0),g=Se(t.props.outerRadius,a,a*.8),b=t.props.maxRadius||Math.sqrt(r*r+i*i)/2;return{cx:c,cy:f,innerRadius:l,outerRadius:g,maxRadius:b}});Y(te,"getComposedData",function(t){var e=t.item,o=t.offset,n=_e.getRealPieData(e);if(!n||!n.length)return null;var r=e.props,i=r.cornerRadius,a=r.startAngle,c=r.endAngle,f=r.paddingAngle,l=r.dataKey,g=r.nameKey,b=r.valueKey,y=r.tooltipType,P=Math.abs(e.props.minAngle),x=_e.parseCoordinateOfPie(e,o),u=_e.parseDeltaAngle(a,c),w=Math.abs(u),S=l;ve(l)&&ve(b)?(Qe(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):ve(l)&&(Qe(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=b);var _=n.filter(function(I){return fe(I,S,0)!==0}).length,T=(w>=360?_:_-1)*f,N=w-_*P-T,E=n.reduce(function(I,G){var F=fe(G,S,0);return I+(he(F)?F:0)},0),z;if(E>0){var W;z=n.map(function(I,G){var F=fe(I,S,0),Z=fe(I,g,G),q=(he(F)?F:0)/E,K;G?K=W.endAngle+Pe(u)*f*(F!==0?1:0):K=a;var ne=K+Pe(u)*((F!==0?P:0)+q*N),re=(K+ne)/2,R=(x.innerRadius+x.outerRadius)/2,D=[{name:Z,value:F,payload:I,dataKey:S,type:y}],p=ee(x.cx,x.cy,R,re);return W=C(C(C({percent:q,cornerRadius:i,name:Z,tooltipPayload:D,midAngle:re,middleRadius:R,tooltipPosition:p},I),x),{},{value:fe(I,S),startAngle:K,endAngle:ne,payload:I,paddingAngle:Pe(u)*f}),W})}return C(C({},x),{},{sectors:z,data:n})});var Hr=En({chartName:"PieChart",GraphicalChild:te,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Me},{axisType:"radiusAxis",AxisComp:Ne}],formatAxisMap:Dn,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Ur=({data:t})=>s.jsx(Ot,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:s.jsxs(Ln,{data:t,children:[s.jsx($n,{strokeDasharray:"3 3"}),s.jsx(Nn,{dataKey:"name"}),s.jsx(Fn,{}),s.jsx(Pt,{}),s.jsx(Mn,{dataKey:"value",fill:"#82ca9d"})]})});function Zr({searchQuery:t,setSearchQuery:e,map:o}){const n=async r=>{if(r.preventDefault(),t.trim()==="")return;const i={query:t,fields:["name","geometry"]};new window.google.maps.places.PlacesService(o).findPlaceFromQuery(i,(c,f)=>{if(f===window.google.maps.places.PlacesServiceStatus.OK&&c){const l=c[0];o.setCenter(l.geometry.location),o.setZoom(14)}})};return s.jsxs(O,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[s.jsx(Mt,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:t,onChange:r=>e(r.target.value)}),s.jsx(Vt,{type:"submit",sx:{p:1},children:s.jsx(Bt,{})})]})}const qr=({setLoading:t})=>{const e=Le(),{center:o,selectedParameterList:n,selectedVehicle:r,vehicleList:i,tractorIcon:a,icons:c,locationData:f,ivnPid:l,placesData:g}=B(R=>R.liveMap),{mode:b,AreaCoveredTrips:y}=B(R=>R.dashboard),{isLoaded:P,loadError:x}=zt({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[u,w]=v.useState(null),[S,_]=v.useState(!0),[T,N]=v.useState(5),[E,z]=v.useState(),[W,I]=v.useState(""),G=v.useRef(null),F=xt(b),Z=v.useCallback(R=>{G.current=R},[]),q=Kt(R=>{if(!R||R.length===0)return;const D=10;let p=0;const m=d=>{R.slice(d,d+D).forEach($=>{var A;((A=$==null?void 0:$.data)==null?void 0:A.length)>0&&(p+=xn($==null?void 0:$.data,e))}),d+D<R.length?setTimeout(()=>m(d+D),0):(console.log("calculated acreage: ",p),e(qe(p.toFixed(2))),t(!1))};m(0)},300);v.useEffect(()=>(y&&y.length>0?(t(!0),q(y)):(t(!1),e(qe(0))),()=>{q.cancel(),t(!1)}),[y,e]),v.useEffect(()=>{if(S)z(f);else{let R=f==null?void 0:f.filter(D=>(D==null?void 0:D._id)===(r==null?void 0:r.imei));z(R)}},[f,r,S]);const K=()=>{if(!S)e(Ht({lat:21,lng:78})),N(4),_(D=>!D);else{const R=f.find(D=>D.latestDocument.imei===r.imei);R?(console.log(R.latestDocument,"getCenter"),R.latestDocument,_(D=>!D)):ue.error("Data is not available for selected vehicle")}};if(v.useEffect(()=>{P&&w(window.google.maps)},[P,f]),x)return"Error loading maps";if(!P)return"Loading maps";const ne={height:"100vh",borderRadius:"8px"},re=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return u?s.jsxs("div",{children:[s.jsxs(O,{style:{fontSize:"20px",color:F.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[s.jsx(Q,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),s.jsxs(O,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(Zr,{searchQuery:W,setSearchQuery:I,map:G.current}),s.jsx(er,{sx:{marginLeft:0,paddingTop:0,color:F.grey[400]},children:s.jsx(Wt,{control:s.jsx(bn,{checked:S,onChange:K}),label:S?"Group":"Individual"})})]})]}),s.jsx(Gt,{mapContainerStyle:ne,zoom:T,center:o,onLoad:Z,options:{mapTypeControl:!1,styles:b?re:""},children:E&&E.length>0&&E.map((R,D)=>s.jsx(Yt,{position:{lat:R.latestDocument.lat,lng:R.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},D))})]}):null};function Xr(){const{vehicles_details:t}=B(n=>n.dashboard),[e,o]=v.useState([]);return v.useEffect(()=>{const n=t.reduce((i,a)=>{const c=a.sell_date?bt(a.sell_date):null,f=c&&c.isValid()?c.format("MMM YYYY"):"N/A";return i[f]=(i[f]||0)+1,i},{}),r=Object.keys(n).map(i=>({name:i,value:n[i]}));o(r)},[t]),s.jsxs(O,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[s.jsx(Oe,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),s.jsxs(O,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[s.jsx(O,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:s.jsx(Oe,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),s.jsx(Ur,{data:e})]}),s.jsx(Oe,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const ut=Math.PI/180,Jr=({cx:t,cy:e,midAngle:o,innerRadius:n,outerRadius:r,percent:i,index:a})=>{const c=n+(r-n)*.5,f=t+c*Math.cos(-o*ut),l=e+c*Math.sin(-o*ut);return s.jsx("text",{x:f,y:l,fill:"white",textAnchor:f>t?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(i*100).toFixed(0)}%`})},Qr=({data:t,COLORS:e})=>{v.useEffect(()=>{},[t]);const o=t.every(n=>n.value===0);return s.jsx(O,{sx:{width:"100%",height:"100%"},children:o?s.jsx(O,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:s.jsx(Q,{sx:{textAlign:"center"},children:"No data available to display."})}):s.jsx(Ot,{width:"100%",height:"100%",children:s.jsxs(Hr,{children:[s.jsx(te,{data:t,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:Jr,fill:"#8884d8",dataKey:"value",children:t.map((n,r)=>s.jsx(St,{fill:e[r%e.length],fontSize:"18px"},`cell-${r}`))}),s.jsx(Pt,{})]})})})},Te=({title:t})=>s.jsx(Q,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:t}),Be=({label:t,count:e,color:o,type:n,title:r})=>{let i=Le(),{vehicleZone:a}=B(l=>l.dashboard),c=At();const f=(l,g)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",g),i(Zt(g)),i(qt(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",g),g){case"Open":i(ye("Open"));break;case"Overdue":i(ye("overdue"));break;case"Closed":i(ye("Close"));break}c("/breakdown")}};return s.jsxs(O,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[s.jsxs(O,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(O,{sx:{width:"12px",height:"12px",bgcolor:o,borderRadius:"50%",marginRight:"8px"}}),s.jsx(Ut,{sx:{color:"black",bgcolor:r==="Vehicle Status"?a===t?"green":"white":"transparent"},onClick:()=>{f(r,t)},children:t})]}),s.jsx(O,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?s.jsx(Q,{color:o,children:e}):s.jsx(_t,{sx:{bgcolor:o,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:e})})]})},eo=({data:t,colors:e})=>{const{loading:o,isDriverBehaviorLoading:n}=B(r=>r.dashboard);return s.jsxs(O,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[s.jsxs(O,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[s.jsx(Q,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),s.jsx(O,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:t.map((r,i)=>s.jsxs(O,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[s.jsx(Q,{fontSize:{xs:"12px",md:"15px"},children:r.name.split(" ")[0]}),s.jsx(_t,{sx:{bgcolor:e[i],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:r.name.split(" ").slice(1).join(" ")})]},i))})]}),s.jsx(O,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?s.jsx(Q,{sx:{fontSize:"14px"},children:"Loading..."}):s.jsx(Qr,{data:t,COLORS:e})})]})},ft=({statuses:t,title:e})=>{let o=Le(),n=At();const r=i=>{if(e==="Inspection Approvals"){switch(console.log("status: ",i),i.label){case"Rejected":o(ye("Rejected"));break;case"Pending":o(ye("Open"));break;case"Approved":o(ye("Close"));break}n("/inspections")}else if(e==="Service Remainder"){switch(i.label){case"Overdue":o(Ve("Overdue"));break;case"Due soon":o(Ve("Due soon"));break;case"Serviced":o(Ve("Serviced"));break}n("/service")}};return s.jsxs(O,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Te,{title:e}),s.jsx(O,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:t.map((i,a)=>s.jsxs(O,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{r(i)},children:[s.jsx(Q,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:i.color,margin:"30px 0"},"aria-label":"color",children:i.count}),s.jsx(Q,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:i.label})]},a))})]})},pt={total:0,online:0,offline:0,running:0};function to({vehicleReport:t,imeiNo:e,loading:o,isloadingReport:n}){var D,p,m,d,L,$,A;const{vehicleList:r,onlineVehicle:i,locationData:a}=B(h=>h.liveMap);B(h=>h.dashboard);const{breakdownStatusCount:c}=B(h=>h.breakdown),{inspectionStatusCount:f}=B(h=>h.inspection),{vehicleStatesData:l}=B(h=>h.report),{report:g,driver_behavior:b,overdueCount:y,completedCount:P,serviceSoonCount:x,selectedVehicleGroup:u,areaCovered:w}=B(h=>h.dashboard),[S,_]=v.useState(0),[T,N]=v.useState(pt);v.useEffect(()=>{if((r==null?void 0:r.length)>0){let h={...pt};if(u){const j=G(u==null?void 0:u.id);console.log("result",j);const V=r.filter(J=>J.vehicle_group===u.id);h.total=V.length,h.online=j.onlineCount,h.running=j.runningCount,h.offline=h.total-h.online}console.log("Updated Vehicle Count:",h),N(h)}console.log("vehicleList",r)},[u]),v.useEffect(()=>{if((r==null?void 0:r.length)>0){let h=0;r==null||r.map(j=>{var V;((V=j==null?void 0:j.imei)==null?void 0:V.length)>0&&h++}),_(h)}},[r]),v.useEffect(()=>{},[y,P,x]);const E=h=>{if(!h)return!1;const j=String(h).toLowerCase();return i.some(V=>String(V).toLowerCase()===j)},z=h=>a==null?void 0:a.some(j=>String(j.latestDocument.imei)===String(h)&&j.latestDocument.speed>0&&(j.latestDocument.ignition===!0||j.latestDocument.ignition===1)),W=h=>a==null?void 0:a.some(j=>String(j.latestDocument.imei)===String(h)&&j.latestDocument.speed<=0&&(j.latestDocument.ignition===!0||j.latestDocument.ignition===1)),I=()=>{let h=0,j=0,V=0;return r&&r.length>0&&r.map(J=>{var Ze;let ce=(Ze=J==null?void 0:J.imei[0])==null?void 0:Ze.mac_id,oe=E(ce),H=z(ce),ie=W(ce);oe&&h++,oe&&H&&j++,oe&&ie&&V++}),{onlineCount:h,runningCount:j,idelingCount:V}},G=h=>{let j=0,V=0;return i.forEach(J=>{if(e.includes(String(J))){const ce=a==null?void 0:a.find(oe=>{var H;return String((H=oe==null?void 0:oe.latestDocument)==null?void 0:H.imei)===String(J)});if(ce&&r.some(H=>{var ie;return H.vehicle_group===h&&((ie=H==null?void 0:H.imei[0])==null?void 0:ie.mac_id)===String(J)})){j++;const{speed:H,ignition:ie}=ce.latestDocument;H>0&&(ie===!0||ie===1)&&V++}}}),{onlineCount:j,runningCount:V}};v.useEffect(()=>{},[l]);const F=[{name:"Overspeed O",value:((D=l==null?void 0:l.totals)==null?void 0:D.total_overSpeedTimeSec)||0},{name:"Economy E",value:((p=l==null?void 0:l.totals)==null?void 0:p.total_economyTimeSec)||0},{name:"Steady S",value:((m=l==null?void 0:l.totals)==null?void 0:m.total_idleTimeSec)||0}],Z=["#0088FE","#00C49F","#FFBB28","#FF8042"],q=[{label:"Rejected",count:f.rejected||0,color:"#FF0202"},{label:"Pending",count:f.open||0,color:"black"},{label:"Approved",count:f.close||0,color:"green"}],K=[{label:"Overdue",count:y,color:"#FF0202"},{label:"Due soon",count:x,color:"black"},{label:"Serviced",count:P,color:"green"}],ne=[{name:"Total Vehicles",count:Object.keys(u).length>0?T.total:S,color:"grey"},{name:"Online",count:Object.keys(u).length>0?T.online:I().onlineCount,color:"red"},{name:"Offline",count:Object.keys(u).length>0?T.offline:S-I().onlineCount,color:"grey"},{name:"Running",count:Object.keys(u).length>0?T.running:I().runningCount,color:"green"},{name:"Idling",count:Object.keys(u).length>0?T.online-T.running:I().idelingCount,color:"yellow"}],re=[{name:"Distance Covered",count:((d=l==null?void 0:l.totals)==null?void 0:d.totalDistance)||0,color:"grey"},{name:"Running time",count:((L=l==null?void 0:l.totals)==null?void 0:L.total_runningTime)||0,color:"red"},{name:"Idling Time",count:(($=l==null?void 0:l.totals)==null?void 0:$.total_idleTime)||0,color:ze.bgColor},{name:"Engine Hrs",count:((A=l==null?void 0:l.totals)==null?void 0:A.total_engineHours)||0,color:ze.bgColor}],R=[{name:"Open",count:c.open,color:"grey"},{name:"Overdue",count:c.overDue,color:"red"},{name:"Closed",count:c.close,color:"green"}];return s.jsxs(s.Fragment,{children:[s.jsx(eo,{data:F,colors:Z}),s.jsxs(O,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[s.jsx(Te,{title:"Vehicles Status"}),s.jsx(O,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:ne.map((h,j)=>s.jsx(Be,{label:h.name,count:h.count,color:h.color,title:"Vehicle Status"},j+1))})]}),s.jsx(ft,{statuses:K,title:"Service Remainder"}),s.jsxs(O,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Te,{title:"Assigned Vehicles"}),s.jsx(O,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:re.map((h,j)=>s.jsx(Be,{type:"assignVehicle",label:h.name,count:h.count,color:h.color},j+1))})]}),s.jsxs(O,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[s.jsx(Te,{title:"Breakdown Resolved"}),s.jsx(O,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:R.map((h,j)=>s.jsx(Be,{label:h.name,count:h.count,color:h.color,title:"Breakdown"}))})]}),s.jsx(ft,{statuses:q,title:"Inspection Approvals"})]})}const so=()=>{const{w_customer_id:t,collapsed:e}=B(p=>p.auth),{mode:o,selectedTripData:n,selectedVehicleGroup:r,showVehicles:i,vehicleZone:a}=B(p=>p.dashboard),{breakdowns:c}=B(p=>p.breakdown),{inspectionHistory:f}=B(p=>p.inspection),[l,g]=v.useState(()=>{const p=sessionStorage.getItem("imeiNo");return p?JSON.parse(p):[]}),{selectedVehicle:b,vehicleList:y,onlineVehicle:P,locationData:x}=B(p=>p.liveMap),u=Le(),w=xt(o),[S,_]=v.useState([]),[T,N]=v.useState(!1),[E,z]=v.useState({}),[W,I]=v.useState(!1),[G,F]=v.useState(!1),[Z,q]=v.useState(!1);v.useEffect(()=>{(async()=>{await ne()})(),u(Xt())},[]);const K=p=>{let m=y.find(d=>{var L;return((L=d==null?void 0:d.imei[0])==null?void 0:L.mac_id)==p});return(m==null?void 0:m.registration_id)||p};v.useEffect(()=>{if(f.length>0){let p={open:0,rejected:0,close:0};f.map(m=>{m.status==="Open"&&p.open++,m.status==="Close"&&p.close++,m.status==="Rejected"&&p.rejected++}),u(Jt(p))}},[c]),v.useEffect(()=>{if(c.length>0){let p={open:0,overDue:0,close:0};c.map(m=>{if(m.status==="Open"&&p.open++,m.status==="Close"&&p.close++,m.submission_date){const d=new Date(m.submission_date),L=new Date;L.setHours(0,0,0,0),d.setHours(0,0,0,0),d<L&&m.status=="Open"&&p.overDue++}}),u(Qt(p))}},[c]),v.useEffect(()=>{u(en())},[]),v.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(l))},[l]),v.useEffect(()=>{var p,m,d;Object.keys(b).length===0&&y.length>0&&u(tn({imei:(m=(p=y[0])==null?void 0:p.imei[0])==null?void 0:m.mac_id,reg_id:(d=y[0])==null?void 0:d.registration_id}))},[b,y]),v.useEffect(()=>{let p=y.map(d=>{var L;return((L=d==null?void 0:d.imei[0])==null?void 0:L.mac_id)||null}).filter(d=>d),m={imeiList:p,startDate:Xe(new Date).format("MM-DD-YYYY"),endDate:Xe(new Date).format("MM-DD-YYYY")};p&&p.length>0&&u(nn(m)),u(rn())},[y]),v.useEffect(()=>{(async()=>{if(b!=null&&b.imei){const m=bt(),d=m.startOf("day").format("MM/DD/YYYY HH:mm:ss"),L=m.endOf("day").format("MM/DD/YYYY HH:mm:ss"),$={imei:b.imei,startTime:d,endTime:L};try{u(un($))}catch(A){console.error("Error fetching report:",A)}}})()},[b,u]),v.useEffect(()=>{const p=d=>{(d==null?void 0:d.imei)!==null&&l.find(A=>parseInt(A)===(d==null?void 0:d.imei))&&ue.error(`Type: ${d==null?void 0:d.type} ${d==null?void 0:d.msg} ${K(d==null?void 0:d.imei)}`,{id:"geofence",autoClose:5e3})},m=d=>{(d==null?void 0:d.imei)!==null&&l.find(A=>parseInt(A)===(d==null?void 0:d.imei))&&ue.error(`${d==null?void 0:d.msg} ${K(d==null?void 0:d.imei)}`,{id:"speed",autoClose:5e3})};return we.on("geofenceAlert",p),we.on("speedAlert",m),()=>{we.off("geofenceAlert",p),we.off("speedAlert",m)}},[l,we]);const ne=async()=>{try{let p=[],m=[];const d=await u(fn({w_customer_id:t}));if(Array.isArray(d.payload)){d.payload.forEach(A=>{var h,j;Array.isArray(A.imei)&&A.imei.length>0?(p.push({id:A.id,label:A.registration_id,value:(h=A==null?void 0:A.imei[0])==null?void 0:h.mac_id,vehilce_type:A==null?void 0:A.segment,sell_date:A==null?void 0:A.sell_date,workShop:A==null?void 0:A.workshop,vehicle_group:A==null?void 0:A.vehicle_group}),m.push((j=A.imei[0])==null?void 0:j.mac_id),A.registration_id):(console.error("IMEI data not found for item:",A),ue.error(`IMEI Number not found for the vehicle: ${A==null?void 0:A.registration_id}`,{duration:2e3}))}),g(m);const L="one",$=m;m.length>0&&(u(pn({type:L,imei:$})),u(dn($))),_(p),u(hn(p)),u(gn({w_customer_id:t})),u(mn(t)),u(yn({}))}else console.error("Unexpected data format:",d),ue.error("Unexpected data format:")}catch(p){console.error("Error fetching vehicle data:",p),ue.error(`Error fetching vehicle data: ${p}`)}},re=p=>x==null?void 0:x.some(m=>String(m.latestDocument.imei)===String(p)&&m.latestDocument.speed>0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),R=p=>x==null?void 0:x.some(m=>String(m.latestDocument.imei)===String(p)&&m.latestDocument.speed<=0&&(m.latestDocument.ignition===!0||m.latestDocument.ignition===1)),D=S.filter(p=>{if(!(Object.keys(r).length===0||p.vehicle_group===r.id))return!1;const d=p.value,L=String(p.value).toLowerCase(),$=P.some(V=>String(V).toLowerCase()===L),A=!P.some(V=>String(V).toLowerCase()===L),h=$&&re(d),j=$&&R(d);switch(a){case"Total Vehicles":return!0;case"Online":return $;case"Running":return h;case"Offline":return A;case"Idling":return j;default:return!0}});return s.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[s.jsx(on,{}),s.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[s.jsx(an,{title:"Dashboard",setShowNotification:N,showNotification:T,setShowVehiclesGroup:I,showVehiclesGroup:W}),s.jsx(sn,{setShowVehiclesGroup:I,showVehiclesGroup:W}),s.jsxs(O,{sx:{height:"92vh",backgroundColor:w.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[i&&s.jsx(O,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:w.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:s.jsx(ln,{vehicleData:D,showVehicles:i})}),s.jsx(Oe,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),s.jsxs(O,{sx:{display:"flex",gap:"30px",background:ze.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[s.jsxs(O,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:e?"30px":"12px",height:"fit-content"},children:[T&&s.jsx(cn,{showNotification:T,setShowNotification:N}),"              ",s.jsx(Xr,{}),s.jsx(O,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:s.jsx(qr,{setLoading:F})})]}),s.jsx(O,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:e?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:s.jsx(to,{vehicleReport:E,imeiNo:l,loading:G,isloadingReport:Z})})]})]})]})]})};export{so as default};
