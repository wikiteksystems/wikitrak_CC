import{w,v as C,C as t,x as j,ao as B,y as x,b as h,j as m,an as v,al as P,ap as E}from"./index-B5aO5-3M.js";import{w as T,S as A,D as R}from"./TripGraph-Y7p-jBq6.js";import{B as I}from"./button-h-4JHXPz.js";var D={exports:{}};(function(l,O){(function(g,a){l.exports=a()})(w,function(){return function(g,a,c){a.prototype.isBetween=function(u,f,s,r){var n=c(u),o=c(f),d=(r=r||"()")[0]==="(",i=r[1]===")";return(d?this.isAfter(n,s):!this.isBefore(n,s))&&(i?this.isBefore(o,s):!this.isAfter(o,s))||(d?this.isBefore(n,s):!this.isAfter(n,s))&&(i?this.isAfter(o,s):!this.isBefore(o,s))}}})})(D);var L=D.exports;const F=C(L);t.extend(F);t.extend(T);const{RangePicker:M}=R,G=()=>{const l=j(),[O]=B(),g=O.get("source"),{selectedVehicle:a}=x(e=>e.liveMap),{startDate:c,endDate:u}=x(e=>e.dashboard),[f,s]=h.useState(c?t(c):null),[r,n]=h.useState(u?t(u):null),[o,d]=h.useState(!1),i=(e,p)=>{s(e),n(p),l(v({startDate:e.toISOString(),endDate:p.toISOString()}));const y={imei:a==null?void 0:a.imei,startDate:e.toISOString(),endDate:p.toISOString(),page:1,limit:g!=="TripDetail"?20:void 0};l(P(y)),l(E(y))};h.useEffect(()=>{a!=null&&a.imei&&f&&r&&i(f.startOf("day"),r.endOf("day"))},[a]);const b=e=>{e&&i(e[0].startOf("day"),e[1].endOf("day"))},k=[{label:"Today",range:[t().startOf("day"),t().endOf("day")]},{label:"Yesterday",range:[t().subtract(1,"day").startOf("day"),t().subtract(1,"day").endOf("day")]},{label:"This Week",range:[t().startOf("week"),t().endOf("week")]},{label:"Last Week",range:[t().subtract(1,"week").startOf("week"),t().subtract(1,"week").endOf("week")]},{label:"This Month",range:[t().startOf("month"),t().endOf("month")]},{label:"Last Month",range:[t().subtract(1,"month").startOf("month"),t().subtract(1,"month").endOf("month")]}],S=(e,p)=>{i(e,p),d(!1)};return m.jsx(A,{direction:"vertical",size:12,children:m.jsx(M,{value:[f,r],onChange:b,style:{backgroundColor:"#f0f0f0",color:"#333"},allowClear:!0,open:o,onOpenChange:d,renderExtraFooter:()=>m.jsx("div",{style:{display:"flex",justifyContent:"space-around",flexWrap:"wrap"},children:k.map(e=>m.jsx(I,{size:"small",type:"link",onClick:()=>S(e.range[0],e.range[1]),children:e.label},e.label))})})})};export{G as D};
