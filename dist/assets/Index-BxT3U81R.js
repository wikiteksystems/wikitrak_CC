import{a4 as Hd,j as P,z as ue,b as Y,D as uf,T as zt,F as of,w as Zd,x as nr,y as ff,B as Xr,a0 as zd,a5 as qd,a6 as Kd,Q as Vd,C as cs,a7 as Jo,V as Yd,W as Xd,Y as Jd,Z as Qd,a8 as Qo}from"./index-CEzRChgC.js";import{L as jd}from"./LiveMapTopBar-CWVkXiu5.js";import{V as n0}from"./VehicleMenu-yUEEllnJ.js";import{t as t0}from"./SearchTab-BTnJr_5u.js";import{F as e0}from"./Loader-F-FGw8-v.js";import{L as r0}from"./LiveMapServices-Bq6XURjE.js";import{s as hs}from"./Socket-0N_gnJcr.js";import{P as i0}from"./Parameters-uG_oZbzm.js";/* empty css           */import"./proj-XQwXs9DQ.js";import{L as s0}from"./LeftSideBar2-Drp86BRm.js";import{V as u0}from"./VehicleGroups-bg1-vYE5.js";import{u as o0,G as f0,M as a0}from"./esm-OAGox0v0.js";import{d as l0}from"./Info-yW6gZPpC.js";import{d as c0}from"./Close-CLIPdl_M.js";import{r as h0}from"./createSvgIcon-eeGKY6kg.js";import{B as Nn,C as g0}from"./menu2-zBiw0l9T.js";import"./jcb-aCHXMCXy.js";import"./TextField-DLtE_O06.js";import"./useControlled-F5y-0Xlu.js";import"./Autocomplete-DgxWdyei.js";import"./index-CX2MosiM.js";import"./Card-D0eqavGX.js";import"./CardContent-IkP-irZ9.js";var xs={},p0=Hd;Object.defineProperty(xs,"__esModule",{value:!0});var af=xs.default=void 0,d0=p0(h0()),_0=P;af=xs.default=(0,d0.default)((0,_0.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"NorthEast");const v0=({label:I,value:f})=>P.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[P.jsx(zt,{variant:"body2",color:"textSecondary",children:I}),P.jsx(zt,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:f||"N/A"})]}),x0=(I,f)=>(I==null?void 0:I.find(i=>{var g,x;return((x=(g=i.imei)==null?void 0:g[0])==null?void 0:x.mac_id)===f}))||{},jo=({title:I,details:f})=>P.jsx(Nn,{sx:{width:"45%"},children:f.map(({label:i,value:g})=>P.jsx(v0,{label:i,value:g},i))});function w0({handleVehicleInfo:I,udpatedParams:f}){var q,Q,wn,hn,gn,Sn,On,vn,Mn,Kn,Ft,qt;const{collapsed:i}=ue(an=>an.auth),{vehicleList:g,selectedVehicle:x,selectedImei:w}=ue(an=>an.liveMap),[v,O]=Y.useState({});let[d,T]=Y.useState(null);Y.useEffect(()=>{let an=f&&(f==null?void 0:f.length)>0&&(f==null?void 0:f.find(pn=>{var Vn;return Number((Vn=pn==null?void 0:pn.latestDocument)==null?void 0:Vn.imei)===Number(w)}));T(an)},[f,w]),Y.useEffect(()=>{O(x0(g,w))},[g,w]);const U=(an,pn)=>{const Vn=`https://www.google.com/maps?q=${an},${pn}`;window.open(Vn,"_blank")},L=an=>{var Yn,bn;let pn=(Yn=an==null?void 0:an.latestDocument)==null?void 0:Yn.ignition,Vn=(bn=an==null?void 0:an.latestDocument)==null?void 0:bn.speed;return pn===!0||pn===1?Vn:0},z=[{label:"Vehicle No:",value:v==null?void 0:v.registration_id},{label:"Model:",value:(q=v==null?void 0:v.vehicle_model)==null?void 0:q.name},{label:"IMEI No:",value:(wn=(Q=v==null?void 0:v.imei)==null?void 0:Q[0])==null?void 0:wn.mac_id},{label:"Chassis No:",value:v==null?void 0:v.chassis_no},{label:"Engine No:",value:v==null?void 0:v.engine_no}],Z=[{label:"Customer Name:",value:(hn=v==null?void 0:v.user)!=null&&hn.us_user?`${v.user.us_user.first_name.charAt(0).toUpperCase()}${v.user.us_user.first_name.slice(1)} ${v.user.us_user.last_name.charAt(0).toUpperCase()}${v.user.us_user.last_name.slice(1)}`:null},{label:"Mobile: ",value:((gn=v==null?void 0:v.user)==null?void 0:gn.us_user)&&v.user.us_user.mobile},{label:"Date of Sell:",value:v==null?void 0:v.sell_date},{label:"Workshop Name:",value:(Sn=v==null?void 0:v.workshop)==null?void 0:Sn.name}];let j={border:"2px solid black",borderRadius:"5px",padding:"5px",color:"black"};const on=an=>{let pn=g.find(Yn=>{var bn,Xn;return((bn=Yn==null?void 0:Yn.imei)==null?void 0:bn.length)>0&&((Xn=Yn.imei[0])==null?void 0:Xn.mac_id)==an.imei});console.log("vehicle list",pn==null?void 0:pn.load_capacity,an.imei);let Vn=parseFloat((pn==null?void 0:pn.load_capacity)||0)/49*parseFloat((an==null?void 0:an.analogInput1)||0);return parseFloat(Vn).toFixed(2)||0};return P.jsxs(Nn,{sx:{position:"absolute",top:"600px",left:i?"280px":"450px",zIndex:1,background:uf.bgShadow,p:2,borderRadius:2,color:"white",width:"72%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[P.jsx(zt,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),P.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[P.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between",width:"100%",marginLeft:"10px"},children:[P.jsx(Nn,{sx:j,children:P.jsxs(zt,{children:["Ignition:"," ",((On=d==null?void 0:d.latestDocument)==null?void 0:On.ignition)===!0||((vn=d==null?void 0:d.latestDocument)==null?void 0:vn.ignition)===1?"On":"Off"]})}),P.jsx(Nn,{sx:j,children:P.jsxs(zt,{children:["Speed: ",L(d)," km/h"]})}),P.jsx(Nn,{sx:j,children:P.jsxs(zt,{children:["Main Voltage:"," ",d?`${(Mn=d==null?void 0:d.latestDocument)==null?void 0:Mn.mainInputVoltage} Voltage`:0]})}),P.jsx(Nn,{sx:j,children:P.jsxs(zt,{children:["Heading:"," ",d?`${(Kn=d==null?void 0:d.latestDocument)==null?void 0:Kn.heading} deg`:0]})}),d&&((Ft=d==null?void 0:d.latestDocument)==null?void 0:Ft.venderId)==="VT200"&&P.jsx(Nn,{sx:j,children:P.jsxs(zt,{children:["Load:"," ",d?on(d==null?void 0:d.latestDocument):0]})}),d&&((qt=d==null?void 0:d.latestDocument)==null?void 0:qt.venderId)==="VT200"&&P.jsx(Nn,{sx:j,children:P.jsxs(zt,{children:["Remaining fuel:"," ","0"]})}),P.jsxs(of,{disabled:!d,onClick:()=>{var an,pn;U((an=d==null?void 0:d.latestDocument)==null?void 0:an.lat,(pn=d==null?void 0:d.latestDocument)==null?void 0:pn.lng)},children:["Navigate to map",P.jsx(af,{})]})]}),P.jsx(c0,{sx:{cursor:"pointer",color:"black"},onClick:I})]}),P.jsxs(Nn,{sx:{display:"flex",justifyContent:"space-between"},children:[P.jsx(jo,{title:"Vehicle Details",details:z}),P.jsx(jo,{title:"Customer Details",details:Z})]})]})}var m0=function I(f,i){if(f===i)return!0;if(f&&i&&typeof f=="object"&&typeof i=="object"){if(f.constructor!==i.constructor)return!1;var g,x,w;if(Array.isArray(f)){if(g=f.length,g!=i.length)return!1;for(x=g;x--!==0;)if(!I(f[x],i[x]))return!1;return!0}if(f.constructor===RegExp)return f.source===i.source&&f.flags===i.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===i.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===i.toString();if(w=Object.keys(f),g=w.length,g!==Object.keys(i).length)return!1;for(x=g;x--!==0;)if(!Object.prototype.hasOwnProperty.call(i,w[x]))return!1;for(x=g;x--!==0;){var v=w[x];if(!I(f[v],i[v]))return!1}return!0}return f!==f&&i!==i};const nf=Zd(m0),tf=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],gs=1,tr=8;class ws{static from(f){if(!(f instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,g]=new Uint8Array(f,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=g>>4;if(x!==gs)throw new Error(`Got v${x} data when expected v${gs}.`);const w=tf[g&15];if(!w)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(f,2,1),[O]=new Uint32Array(f,4,1);return new ws(O,v,w,f)}constructor(f,i=64,g=Float64Array,x){if(isNaN(f)||f<0)throw new Error(`Unpexpected numItems value: ${f}.`);this.numItems=+f,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=g,this.IndexArrayType=f<65536?Uint16Array:Uint32Array;const w=tf.indexOf(this.ArrayType),v=f*2*this.ArrayType.BYTES_PER_ELEMENT,O=f*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-O%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${g}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,tr,f),this.coords=new this.ArrayType(this.data,tr+O+d,f*2),this._pos=f*2,this._finished=!0):(this.data=new ArrayBuffer(tr+v+O+d),this.ids=new this.IndexArrayType(this.data,tr,f),this.coords=new this.ArrayType(this.data,tr+O+d,f*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(gs<<4)+w]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=f)}add(f,i){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=f,this.coords[this._pos++]=i,g}finish(){const f=this._pos>>1;if(f!==this.numItems)throw new Error(`Added ${f} items when expected ${this.numItems}.`);return _s(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(f,i,g,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:v,nodeSize:O}=this,d=[0,w.length-1,0],T=[];for(;d.length;){const U=d.pop()||0,L=d.pop()||0,z=d.pop()||0;if(L-z<=O){for(let q=z;q<=L;q++){const Q=v[2*q],wn=v[2*q+1];Q>=f&&Q<=g&&wn>=i&&wn<=x&&T.push(w[q])}continue}const Z=z+L>>1,j=v[2*Z],on=v[2*Z+1];j>=f&&j<=g&&on>=i&&on<=x&&T.push(w[Z]),(U===0?f<=j:i<=on)&&(d.push(z),d.push(Z-1),d.push(1-U)),(U===0?g>=j:x>=on)&&(d.push(Z+1),d.push(L),d.push(1-U))}return T}within(f,i,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:v}=this,O=[0,x.length-1,0],d=[],T=g*g;for(;O.length;){const U=O.pop()||0,L=O.pop()||0,z=O.pop()||0;if(L-z<=v){for(let q=z;q<=L;q++)ef(w[2*q],w[2*q+1],f,i)<=T&&d.push(x[q]);continue}const Z=z+L>>1,j=w[2*Z],on=w[2*Z+1];ef(j,on,f,i)<=T&&d.push(x[Z]),(U===0?f-g<=j:i-g<=on)&&(O.push(z),O.push(Z-1),O.push(1-U)),(U===0?f+g>=j:i+g>=on)&&(O.push(Z+1),O.push(L),O.push(1-U))}return d}}function _s(I,f,i,g,x,w){if(x-g<=i)return;const v=g+x>>1;lf(I,f,v,g,x,w),_s(I,f,i,g,v-1,1-w),_s(I,f,i,v+1,x,1-w)}function lf(I,f,i,g,x,w){for(;x>g;){if(x-g>600){const T=x-g+1,U=i-g+1,L=Math.log(T),z=.5*Math.exp(2*L/3),Z=.5*Math.sqrt(L*z*(T-z)/T)*(U-T/2<0?-1:1),j=Math.max(g,Math.floor(i-U*z/T+Z)),on=Math.min(x,Math.floor(i+(T-U)*z/T+Z));lf(I,f,i,j,on,w)}const v=f[2*i+w];let O=g,d=x;for(er(I,f,g,i),f[2*x+w]>v&&er(I,f,g,x);O<d;){for(er(I,f,O,d),O++,d--;f[2*O+w]<v;)O++;for(;f[2*d+w]>v;)d--}f[2*g+w]===v?er(I,f,g,d):(d++,er(I,f,d,x)),d<=i&&(g=d+1),i<=d&&(x=d-1)}}function er(I,f,i,g){ps(I,i,g),ps(f,2*i,2*g),ps(f,2*i+1,2*g+1)}function ps(I,f,i){const g=I[f];I[f]=I[i],I[i]=g}function ef(I,f,i,g){const x=I-i,w=f-g;return x*x+w*w}const y0={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:I=>I},rf=Math.fround||(I=>f=>(I[0]=+f,I[0]))(new Float32Array(1)),ye=2,se=3,ds=4,ie=5,cf=6;class A0{constructor(f){this.options=Object.assign(Object.create(y0),f),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(f){const{log:i,minZoom:g,maxZoom:x}=this.options;i&&console.time("total time");const w=`prepare ${f.length} points`;i&&console.time(w),this.points=f;const v=[];for(let d=0;d<f.length;d++){const T=f[d];if(!T.geometry)continue;const[U,L]=T.geometry.coordinates,z=rf(Vr(U)),Z=rf(Yr(L));v.push(z,Z,1/0,d,-1,1),this.options.reduce&&v.push(0)}let O=this.trees[x+1]=this._createTree(v);i&&console.timeEnd(w);for(let d=x;d>=g;d--){const T=+Date.now();O=this.trees[d]=this._createTree(this._cluster(O,d)),i&&console.log("z%d: %d clusters in %dms",d,O.numItems,+Date.now()-T)}return i&&console.timeEnd("total time"),this}getClusters(f,i){let g=((f[0]+180)%360+360)%360-180;const x=Math.max(-90,Math.min(90,f[1]));let w=f[2]===180?180:((f[2]+180)%360+360)%360-180;const v=Math.max(-90,Math.min(90,f[3]));if(f[2]-f[0]>=360)g=-180,w=180;else if(g>w){const L=this.getClusters([g,x,180,v],i),z=this.getClusters([-180,x,w,v],i);return L.concat(z)}const O=this.trees[this._limitZoom(i)],d=O.range(Vr(g),Yr(v),Vr(w),Yr(x)),T=O.data,U=[];for(const L of d){const z=this.stride*L;U.push(T[z+ie]>1?sf(T,z,this.clusterProps):this.points[T[z+se]])}return U}getChildren(f){const i=this._getOriginId(f),g=this._getOriginZoom(f),x="No cluster with the specified id.",w=this.trees[g];if(!w)throw new Error(x);const v=w.data;if(i*this.stride>=v.length)throw new Error(x);const O=this.options.radius/(this.options.extent*Math.pow(2,g-1)),d=v[i*this.stride],T=v[i*this.stride+1],U=w.within(d,T,O),L=[];for(const z of U){const Z=z*this.stride;v[Z+ds]===f&&L.push(v[Z+ie]>1?sf(v,Z,this.clusterProps):this.points[v[Z+se]])}if(L.length===0)throw new Error(x);return L}getLeaves(f,i,g){i=i||10,g=g||0;const x=[];return this._appendLeaves(x,f,i,g,0),x}getTile(f,i,g){const x=this.trees[this._limitZoom(f)],w=Math.pow(2,f),{extent:v,radius:O}=this.options,d=O/v,T=(g-d)/w,U=(g+1+d)/w,L={features:[]};return this._addTileFeatures(x.range((i-d)/w,T,(i+1+d)/w,U),x.data,i,g,w,L),i===0&&this._addTileFeatures(x.range(1-d/w,T,1,U),x.data,w,g,w,L),i===w-1&&this._addTileFeatures(x.range(0,T,d/w,U),x.data,-1,g,w,L),L.features.length?L:null}getClusterExpansionZoom(f){let i=this._getOriginZoom(f)-1;for(;i<=this.options.maxZoom;){const g=this.getChildren(f);if(i++,g.length!==1)break;f=g[0].properties.cluster_id}return i}_appendLeaves(f,i,g,x,w){const v=this.getChildren(i);for(const O of v){const d=O.properties;if(d&&d.cluster?w+d.point_count<=x?w+=d.point_count:w=this._appendLeaves(f,d.cluster_id,g,x,w):w<x?w++:f.push(O),f.length===g)break}return w}_createTree(f){const i=new ws(f.length/this.stride|0,this.options.nodeSize,Float32Array);for(let g=0;g<f.length;g+=this.stride)i.add(f[g],f[g+1]);return i.finish(),i.data=f,i}_addTileFeatures(f,i,g,x,w,v){for(const O of f){const d=O*this.stride,T=i[d+ie]>1;let U,L,z;if(T)U=hf(i,d,this.clusterProps),L=i[d],z=i[d+1];else{const on=this.points[i[d+se]];U=on.properties;const[q,Q]=on.geometry.coordinates;L=Vr(q),z=Yr(Q)}const Z={type:1,geometry:[[Math.round(this.options.extent*(L*w-g)),Math.round(this.options.extent*(z*w-x))]],tags:U};let j;T||this.options.generateId?j=i[d+se]:j=this.points[i[d+se]].id,j!==void 0&&(Z.id=j),v.features.push(Z)}}_limitZoom(f){return Math.max(this.options.minZoom,Math.min(Math.floor(+f),this.options.maxZoom+1))}_cluster(f,i){const{radius:g,extent:x,reduce:w,minPoints:v}=this.options,O=g/(x*Math.pow(2,i)),d=f.data,T=[],U=this.stride;for(let L=0;L<d.length;L+=U){if(d[L+ye]<=i)continue;d[L+ye]=i;const z=d[L],Z=d[L+1],j=f.within(d[L],d[L+1],O),on=d[L+ie];let q=on;for(const Q of j){const wn=Q*U;d[wn+ye]>i&&(q+=d[wn+ie])}if(q>on&&q>=v){let Q=z*on,wn=Z*on,hn,gn=-1;const Sn=((L/U|0)<<5)+(i+1)+this.points.length;for(const On of j){const vn=On*U;if(d[vn+ye]<=i)continue;d[vn+ye]=i;const Mn=d[vn+ie];Q+=d[vn]*Mn,wn+=d[vn+1]*Mn,d[vn+ds]=Sn,w&&(hn||(hn=this._map(d,L,!0),gn=this.clusterProps.length,this.clusterProps.push(hn)),w(hn,this._map(d,vn)))}d[L+ds]=Sn,T.push(Q/q,wn/q,1/0,Sn,-1,q),w&&T.push(gn)}else{for(let Q=0;Q<U;Q++)T.push(d[L+Q]);if(q>1)for(const Q of j){const wn=Q*U;if(!(d[wn+ye]<=i)){d[wn+ye]=i;for(let hn=0;hn<U;hn++)T.push(d[wn+hn])}}}}return T}_getOriginId(f){return f-this.points.length>>5}_getOriginZoom(f){return(f-this.points.length)%32}_map(f,i,g){if(f[i+ie]>1){const v=this.clusterProps[f[i+cf]];return g?Object.assign({},v):v}const x=this.points[f[i+se]].properties,w=this.options.map(x);return g&&w===x?Object.assign({},w):w}}function sf(I,f,i){return{type:"Feature",id:I[f+se],properties:hf(I,f,i),geometry:{type:"Point",coordinates:[S0(I[f]),I0(I[f+1])]}}}function hf(I,f,i){const g=I[f+ie],x=g>=1e4?`${Math.round(g/1e3)}k`:g>=1e3?`${Math.round(g/100)/10}k`:g,w=I[f+cf],v=w===-1?{}:Object.assign({},i[w]);return Object.assign(v,{cluster:!0,cluster_id:I[f+se],point_count:g,point_count_abbreviated:x})}function Vr(I){return I/360+.5}function Yr(I){const f=Math.sin(I*Math.PI/180),i=.5-.25*Math.log((1+f)/(1-f))/Math.PI;return i<0?0:i>1?1:i}function S0(I){return(I-.5)*360}function I0(I){const f=(180-I*360)*Math.PI/180;return 360*Math.atan(Math.exp(f))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function E0(I,f){var i={};for(var g in I)Object.prototype.hasOwnProperty.call(I,g)&&f.indexOf(g)<0&&(i[g]=I[g]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,g=Object.getOwnPropertySymbols(I);x<g.length;x++)f.indexOf(g[x])<0&&Object.prototype.propertyIsEnumerable.call(I,g[x])&&(i[g[x]]=I[g[x]]);return i}class _t{static isAdvancedMarkerAvailable(f){return google.maps.marker&&f.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(f){return google.maps.marker&&f instanceof google.maps.marker.AdvancedMarkerElement}static setMap(f,i){this.isAdvancedMarker(f)?f.map=i:f.setMap(i)}static getPosition(f){if(this.isAdvancedMarker(f)){if(f.position){if(f.position instanceof google.maps.LatLng)return f.position;if(f.position.lat&&f.position.lng)return new google.maps.LatLng(f.position.lat,f.position.lng)}return new google.maps.LatLng(null)}return f.getPosition()}static getVisible(f){return this.isAdvancedMarker(f)?!0:f.getVisible()}}class vs{constructor({markers:f,position:i}){this.markers=f,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(this.markers.length===0&&!this._position)return;const f=new google.maps.LatLngBounds(this._position,this._position);for(const i of this.markers)f.extend(_t.getPosition(i));return f}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(f=>_t.getVisible(f)).length}push(f){this.markers.push(f)}delete(){this.marker&&(_t.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class C0{constructor({maxZoom:f=16}){this.maxZoom=f}noop({markers:f}){return L0(f)}}const L0=I=>I.map(i=>new vs({position:_t.getPosition(i),markers:[i]}));class M0 extends C0{constructor(f){var{maxZoom:i,radius:g=60}=f,x=E0(f,["maxZoom","radius"]);super({maxZoom:i}),this.state={zoom:-1},this.superCluster=new A0(Object.assign({maxZoom:this.maxZoom,radius:g},x))}calculate(f){let i=!1;const g={zoom:f.map.getZoom()};if(!nf(f.markers,this.markers)){i=!0,this.markers=[...f.markers];const x=this.markers.map(w=>{const v=_t.getPosition(w);return{type:"Feature",geometry:{type:"Point",coordinates:[v.lng(),v.lat()]},properties:{marker:w}}});this.superCluster.load(x)}return i||(this.state.zoom<=this.maxZoom||g.zoom<=this.maxZoom)&&(i=!nf(this.state,g)),this.state=g,i&&(this.clusters=this.cluster(f)),{clusters:this.clusters,changed:i}}cluster({map:f}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(f.getZoom())).map(i=>this.transformCluster(i))}transformCluster({geometry:{coordinates:[f,i]},properties:g}){if(g.cluster)return new vs({markers:this.superCluster.getLeaves(g.cluster_id,1/0).map(w=>w.properties.marker),position:{lat:i,lng:f}});const x=g.marker;return new vs({markers:[x],position:_t.getPosition(x)})}}class b0{constructor(f,i){this.markers={sum:f.length};const g=i.map(w=>w.count),x=g.reduce((w,v)=>w+v,0);this.clusters={count:i.length,markers:{mean:x/i.length,sum:x,min:Math.min(...g),max:Math.max(...g)}}}}class R0{render({count:f,position:i},g,x){const v=`<svg fill="${f>Math.max(10,g.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${f}</text>
</svg>`,O=`Cluster of ${f} markers`,d=Number(google.maps.Marker.MAX_ZINDEX)+f;if(_t.isAdvancedMarkerAvailable(x)){const L=new DOMParser().parseFromString(v,"image/svg+xml").documentElement;L.setAttribute("transform","translate(0 25)");const z={map:x,position:i,zIndex:d,title:O,content:L};return new google.maps.marker.AdvancedMarkerElement(z)}const T={position:i,zIndex:d,title:O,icon:{url:`data:image/svg+xml;base64,${btoa(v)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(T)}}function T0(I,f){for(let i in f.prototype)I.prototype[i]=f.prototype[i]}class ms{constructor(){T0(ms,google.maps.OverlayView)}}var rr;(function(I){I.CLUSTERING_BEGIN="clusteringbegin",I.CLUSTERING_END="clusteringend",I.CLUSTER_CLICK="click"})(rr||(rr={}));const O0=(I,f,i)=>{i.fitBounds(f.bounds)};class D0 extends ms{constructor({map:f,markers:i=[],algorithmOptions:g={},algorithm:x=new M0(g),renderer:w=new R0,onClusterClick:v=O0}){super(),this.markers=[...i],this.clusters=[],this.algorithm=x,this.renderer=w,this.onClusterClick=v,f&&this.setMap(f)}addMarker(f,i){this.markers.includes(f)||(this.markers.push(f),i||this.render())}addMarkers(f,i){f.forEach(g=>{this.addMarker(g,!0)}),i||this.render()}removeMarker(f,i){const g=this.markers.indexOf(f);return g===-1?!1:(_t.setMap(f,null),this.markers.splice(g,1),i||this.render(),!0)}removeMarkers(f,i){let g=!1;return f.forEach(x=>{g=this.removeMarker(x,!0)||g}),g&&!i&&this.render(),g}clearMarkers(f){this.markers.length=0,f||this.render()}render(){const f=this.getMap();if(f instanceof google.maps.Map&&f.getProjection()){google.maps.event.trigger(this,rr.CLUSTERING_BEGIN,this);const{clusters:i,changed:g}=this.algorithm.calculate({markers:this.markers,map:f,mapCanvasProjection:this.getProjection()});if(g||g==null){const x=new Set;for(const v of i)v.markers.length==1&&x.add(v.markers[0]);const w=[];for(const v of this.clusters)v.marker!=null&&(v.markers.length==1?x.has(v.marker)||_t.setMap(v.marker,null):w.push(v.marker));this.clusters=i,this.renderClusters(),requestAnimationFrame(()=>w.forEach(v=>_t.setMap(v,null)))}google.maps.event.trigger(this,rr.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(f=>_t.setMap(f,null)),this.clusters.forEach(f=>f.delete()),this.clusters=[]}renderClusters(){const f=new b0(this.markers,this.clusters),i=this.getMap();this.clusters.forEach(g=>{g.markers.length===1?g.marker=g.markers[0]:(g.marker=this.renderer.render(g,f,i),g.markers.forEach(x=>_t.setMap(x,null)),this.onClusterClick&&g.marker.addListener("click",x=>{google.maps.event.trigger(this,rr.CLUSTER_CLICK,g),this.onClusterClick(x,g,i)})),_t.setMap(g.marker,i)})}}var Jr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Jr.exports;(function(I,f){(function(){var i,g="4.17.21",x=200,w="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",O="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",T=500,U="__lodash_placeholder__",L=1,z=2,Z=4,j=1,on=2,q=1,Q=2,wn=4,hn=8,gn=16,Sn=32,On=64,vn=128,Mn=256,Kn=512,Ft=30,qt="...",an=800,pn=16,Vn=1,Yn=2,bn=3,Xn=1/0,Rn=9007199254740991,oe=17976931348623157e292,ot=NaN,kn=4294967295,$=kn-1,sn=kn>>>1,Un=[["ary",vn],["bind",q],["bindKey",Q],["curry",hn],["curryRight",gn],["flip",Kn],["partial",Sn],["partialRight",On],["rearg",Mn]],Bn="[object Arguments]",nt="[object Array]",N="[object AsyncFunction]",Dn="[object Boolean]",Hn="[object Date]",Et="[object DOMException]",Tn="[object Error]",ft="[object Function]",fe="[object GeneratorFunction]",Zn="[object Map]",Ct="[object Number]",Ae="[object Null]",tt="[object Object]",ir="[object Promise]",Qr="[object Proxy]",ae="[object RegExp]",at="[object Set]",le="[object String]",Se="[object Symbol]",sr="[object Undefined]",ce="[object WeakMap]",A="[object WeakSet]",E="[object ArrayBuffer]",b="[object DataView]",D="[object Float32Array]",G="[object Float64Array]",tn="[object Int8Array]",K="[object Int16Array]",un="[object Int32Array]",yn="[object Uint8Array]",En="[object Uint8ClampedArray]",et="[object Uint16Array]",Lt="[object Uint32Array]",Kt=/\b__p \+= '';/g,Ie=/\b(__p \+=) '' \+/g,Vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ys=/&(?:amp|lt|gt|quot|#39);/g,As=/[&<>"']/g,gf=RegExp(ys.source),pf=RegExp(As.source),df=/<%-([\s\S]+?)%>/g,_f=/<%([\s\S]+?)%>/g,Ss=/<%=([\s\S]+?)%>/g,vf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xf=/^\w*$/,wf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jr=/[\\^$.*+?()[\]{}|]/g,mf=RegExp(jr.source),ni=/^\s+/,yf=/\s/,Af=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sf=/\{\n\/\* \[wrapped with (.+)\] \*/,If=/,? & /,Ef=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cf=/[()=,{}\[\]\/\s]/,Lf=/\\(\\)?/g,Mf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Is=/\w*$/,bf=/^[-+]0x[0-9a-f]+$/i,Rf=/^0b[01]+$/i,Tf=/^\[object .+?Constructor\]$/,Of=/^0o[0-7]+$/i,Df=/^(?:0|[1-9]\d*)$/,Pf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ur=/($^)/,Ff=/['\n\r\u2028\u2029\\]/g,or="\\ud800-\\udfff",Uf="\\u0300-\\u036f",Bf="\\ufe20-\\ufe2f",Wf="\\u20d0-\\u20ff",Es=Uf+Bf+Wf,Cs="\\u2700-\\u27bf",Ls="a-z\\xdf-\\xf6\\xf8-\\xff",Nf="\\xac\\xb1\\xd7\\xf7",kf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$f="\\u2000-\\u206f",Gf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ms="A-Z\\xc0-\\xd6\\xd8-\\xde",bs="\\ufe0e\\ufe0f",Rs=Nf+kf+$f+Gf,ti="['’]",Hf="["+or+"]",Ts="["+Rs+"]",fr="["+Es+"]",Os="\\d+",Zf="["+Cs+"]",Ds="["+Ls+"]",Ps="[^"+or+Rs+Os+Cs+Ls+Ms+"]",ei="\\ud83c[\\udffb-\\udfff]",zf="(?:"+fr+"|"+ei+")",Fs="[^"+or+"]",ri="(?:\\ud83c[\\udde6-\\uddff]){2}",ii="[\\ud800-\\udbff][\\udc00-\\udfff]",Ee="["+Ms+"]",Us="\\u200d",Bs="(?:"+Ds+"|"+Ps+")",qf="(?:"+Ee+"|"+Ps+")",Ws="(?:"+ti+"(?:d|ll|m|re|s|t|ve))?",Ns="(?:"+ti+"(?:D|LL|M|RE|S|T|VE))?",ks=zf+"?",$s="["+bs+"]?",Kf="(?:"+Us+"(?:"+[Fs,ri,ii].join("|")+")"+$s+ks+")*",Vf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gs=$s+ks+Kf,Xf="(?:"+[Zf,ri,ii].join("|")+")"+Gs,Jf="(?:"+[Fs+fr+"?",fr,ri,ii,Hf].join("|")+")",Qf=RegExp(ti,"g"),jf=RegExp(fr,"g"),si=RegExp(ei+"(?="+ei+")|"+Jf+Gs,"g"),na=RegExp([Ee+"?"+Ds+"+"+Ws+"(?="+[Ts,Ee,"$"].join("|")+")",qf+"+"+Ns+"(?="+[Ts,Ee+Bs,"$"].join("|")+")",Ee+"?"+Bs+"+"+Ws,Ee+"+"+Ns,Yf,Vf,Os,Xf].join("|"),"g"),ta=RegExp("["+Us+or+Es+bs+"]"),ea=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ra=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ia=-1,xn={};xn[D]=xn[G]=xn[tn]=xn[K]=xn[un]=xn[yn]=xn[En]=xn[et]=xn[Lt]=!0,xn[Bn]=xn[nt]=xn[E]=xn[Dn]=xn[b]=xn[Hn]=xn[Tn]=xn[ft]=xn[Zn]=xn[Ct]=xn[tt]=xn[ae]=xn[at]=xn[le]=xn[ce]=!1;var _n={};_n[Bn]=_n[nt]=_n[E]=_n[b]=_n[Dn]=_n[Hn]=_n[D]=_n[G]=_n[tn]=_n[K]=_n[un]=_n[Zn]=_n[Ct]=_n[tt]=_n[ae]=_n[at]=_n[le]=_n[Se]=_n[yn]=_n[En]=_n[et]=_n[Lt]=!0,_n[Tn]=_n[ft]=_n[ce]=!1;var sa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aa=parseFloat,la=parseInt,Hs=typeof nr=="object"&&nr&&nr.Object===Object&&nr,ca=typeof self=="object"&&self&&self.Object===Object&&self,$n=Hs||ca||Function("return this")(),ui=f&&!f.nodeType&&f,he=ui&&!0&&I&&!I.nodeType&&I,Zs=he&&he.exports===ui,oi=Zs&&Hs.process,vt=function(){try{var c=he&&he.require&&he.require("util").types;return c||oi&&oi.binding&&oi.binding("util")}catch{}}(),zs=vt&&vt.isArrayBuffer,qs=vt&&vt.isDate,Ks=vt&&vt.isMap,Vs=vt&&vt.isRegExp,Ys=vt&&vt.isSet,Xs=vt&&vt.isTypedArray;function lt(c,_,p){switch(p.length){case 0:return c.call(_);case 1:return c.call(_,p[0]);case 2:return c.call(_,p[0],p[1]);case 3:return c.call(_,p[0],p[1],p[2])}return c.apply(_,p)}function ha(c,_,p,M){for(var k=-1,fn=c==null?0:c.length;++k<fn;){var Pn=c[k];_(M,Pn,p(Pn),c)}return M}function xt(c,_){for(var p=-1,M=c==null?0:c.length;++p<M&&_(c[p],p,c)!==!1;);return c}function ga(c,_){for(var p=c==null?0:c.length;p--&&_(c[p],p,c)!==!1;);return c}function Js(c,_){for(var p=-1,M=c==null?0:c.length;++p<M;)if(!_(c[p],p,c))return!1;return!0}function Yt(c,_){for(var p=-1,M=c==null?0:c.length,k=0,fn=[];++p<M;){var Pn=c[p];_(Pn,p,c)&&(fn[k++]=Pn)}return fn}function ar(c,_){var p=c==null?0:c.length;return!!p&&Ce(c,_,0)>-1}function fi(c,_,p){for(var M=-1,k=c==null?0:c.length;++M<k;)if(p(_,c[M]))return!0;return!1}function mn(c,_){for(var p=-1,M=c==null?0:c.length,k=Array(M);++p<M;)k[p]=_(c[p],p,c);return k}function Xt(c,_){for(var p=-1,M=_.length,k=c.length;++p<M;)c[k+p]=_[p];return c}function ai(c,_,p,M){var k=-1,fn=c==null?0:c.length;for(M&&fn&&(p=c[++k]);++k<fn;)p=_(p,c[k],k,c);return p}function pa(c,_,p,M){var k=c==null?0:c.length;for(M&&k&&(p=c[--k]);k--;)p=_(p,c[k],k,c);return p}function li(c,_){for(var p=-1,M=c==null?0:c.length;++p<M;)if(_(c[p],p,c))return!0;return!1}var da=ci("length");function _a(c){return c.split("")}function va(c){return c.match(Ef)||[]}function Qs(c,_,p){var M;return p(c,function(k,fn,Pn){if(_(k,fn,Pn))return M=fn,!1}),M}function lr(c,_,p,M){for(var k=c.length,fn=p+(M?1:-1);M?fn--:++fn<k;)if(_(c[fn],fn,c))return fn;return-1}function Ce(c,_,p){return _===_?ba(c,_,p):lr(c,js,p)}function xa(c,_,p,M){for(var k=p-1,fn=c.length;++k<fn;)if(M(c[k],_))return k;return-1}function js(c){return c!==c}function nu(c,_){var p=c==null?0:c.length;return p?gi(c,_)/p:ot}function ci(c){return function(_){return _==null?i:_[c]}}function hi(c){return function(_){return c==null?i:c[_]}}function tu(c,_,p,M,k){return k(c,function(fn,Pn,dn){p=M?(M=!1,fn):_(p,fn,Pn,dn)}),p}function wa(c,_){var p=c.length;for(c.sort(_);p--;)c[p]=c[p].value;return c}function gi(c,_){for(var p,M=-1,k=c.length;++M<k;){var fn=_(c[M]);fn!==i&&(p=p===i?fn:p+fn)}return p}function pi(c,_){for(var p=-1,M=Array(c);++p<c;)M[p]=_(p);return M}function ma(c,_){return mn(_,function(p){return[p,c[p]]})}function eu(c){return c&&c.slice(0,uu(c)+1).replace(ni,"")}function ct(c){return function(_){return c(_)}}function di(c,_){return mn(_,function(p){return c[p]})}function Ne(c,_){return c.has(_)}function ru(c,_){for(var p=-1,M=c.length;++p<M&&Ce(_,c[p],0)>-1;);return p}function iu(c,_){for(var p=c.length;p--&&Ce(_,c[p],0)>-1;);return p}function ya(c,_){for(var p=c.length,M=0;p--;)c[p]===_&&++M;return M}var Aa=hi(sa),Sa=hi(ua);function Ia(c){return"\\"+fa[c]}function Ea(c,_){return c==null?i:c[_]}function Le(c){return ta.test(c)}function Ca(c){return ea.test(c)}function La(c){for(var _,p=[];!(_=c.next()).done;)p.push(_.value);return p}function _i(c){var _=-1,p=Array(c.size);return c.forEach(function(M,k){p[++_]=[k,M]}),p}function su(c,_){return function(p){return c(_(p))}}function Jt(c,_){for(var p=-1,M=c.length,k=0,fn=[];++p<M;){var Pn=c[p];(Pn===_||Pn===U)&&(c[p]=U,fn[k++]=p)}return fn}function cr(c){var _=-1,p=Array(c.size);return c.forEach(function(M){p[++_]=M}),p}function Ma(c){var _=-1,p=Array(c.size);return c.forEach(function(M){p[++_]=[M,M]}),p}function ba(c,_,p){for(var M=p-1,k=c.length;++M<k;)if(c[M]===_)return M;return-1}function Ra(c,_,p){for(var M=p+1;M--;)if(c[M]===_)return M;return M}function Me(c){return Le(c)?Oa(c):da(c)}function Mt(c){return Le(c)?Da(c):_a(c)}function uu(c){for(var _=c.length;_--&&yf.test(c.charAt(_)););return _}var Ta=hi(oa);function Oa(c){for(var _=si.lastIndex=0;si.test(c);)++_;return _}function Da(c){return c.match(si)||[]}function Pa(c){return c.match(na)||[]}var Fa=function c(_){_=_==null?$n:be.defaults($n.Object(),_,be.pick($n,ra));var p=_.Array,M=_.Date,k=_.Error,fn=_.Function,Pn=_.Math,dn=_.Object,vi=_.RegExp,Ua=_.String,wt=_.TypeError,hr=p.prototype,Ba=fn.prototype,Re=dn.prototype,gr=_["__core-js_shared__"],pr=Ba.toString,cn=Re.hasOwnProperty,Wa=0,ou=function(){var n=/[^.]+$/.exec(gr&&gr.keys&&gr.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),dr=Re.toString,Na=pr.call(dn),ka=$n._,$a=vi("^"+pr.call(cn).replace(jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_r=Zs?_.Buffer:i,Qt=_.Symbol,vr=_.Uint8Array,fu=_r?_r.allocUnsafe:i,xr=su(dn.getPrototypeOf,dn),au=dn.create,lu=Re.propertyIsEnumerable,wr=hr.splice,cu=Qt?Qt.isConcatSpreadable:i,ke=Qt?Qt.iterator:i,ge=Qt?Qt.toStringTag:i,mr=function(){try{var n=xe(dn,"defineProperty");return n({},"",{}),n}catch{}}(),Ga=_.clearTimeout!==$n.clearTimeout&&_.clearTimeout,Ha=M&&M.now!==$n.Date.now&&M.now,Za=_.setTimeout!==$n.setTimeout&&_.setTimeout,yr=Pn.ceil,Ar=Pn.floor,xi=dn.getOwnPropertySymbols,za=_r?_r.isBuffer:i,hu=_.isFinite,qa=hr.join,Ka=su(dn.keys,dn),Fn=Pn.max,zn=Pn.min,Va=M.now,Ya=_.parseInt,gu=Pn.random,Xa=hr.reverse,wi=xe(_,"DataView"),$e=xe(_,"Map"),mi=xe(_,"Promise"),Te=xe(_,"Set"),Ge=xe(_,"WeakMap"),He=xe(dn,"create"),Sr=Ge&&new Ge,Oe={},Ja=we(wi),Qa=we($e),ja=we(mi),nl=we(Te),tl=we(Ge),Ir=Qt?Qt.prototype:i,Ze=Ir?Ir.valueOf:i,pu=Ir?Ir.toString:i;function u(n){if(In(n)&&!H(n)&&!(n instanceof en)){if(n instanceof mt)return n;if(cn.call(n,"__wrapped__"))return _o(n)}return new mt(n)}var De=function(){function n(){}return function(t){if(!An(t))return{};if(au)return au(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function Er(){}function mt(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}u.templateSettings={escape:df,evaluate:_f,interpolate:Ss,variable:"",imports:{_:u}},u.prototype=Er.prototype,u.prototype.constructor=u,mt.prototype=De(Er.prototype),mt.prototype.constructor=mt;function en(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=kn,this.__views__=[]}function el(){var n=new en(this.__wrapped__);return n.__actions__=rt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=rt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=rt(this.__views__),n}function rl(){if(this.__filtered__){var n=new en(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function il(){var n=this.__wrapped__.value(),t=this.__dir__,e=H(n),r=t<0,s=e?n.length:0,o=_c(0,s,this.__views__),a=o.start,l=o.end,h=l-a,m=r?l:a-1,y=this.__iteratees__,S=y.length,C=0,R=zn(h,this.__takeCount__);if(!e||!r&&s==h&&R==h)return Wu(n,this.__actions__);var B=[];n:for(;h--&&C<R;){m+=t;for(var X=-1,W=n[m];++X<S;){var nn=y[X],rn=nn.iteratee,pt=nn.type,jn=rn(W);if(pt==Yn)W=jn;else if(!jn){if(pt==Vn)continue n;break n}}B[C++]=W}return B}en.prototype=De(Er.prototype),en.prototype.constructor=en;function pe(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function sl(){this.__data__=He?He(null):{},this.size=0}function ul(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function ol(n){var t=this.__data__;if(He){var e=t[n];return e===d?i:e}return cn.call(t,n)?t[n]:i}function fl(n){var t=this.__data__;return He?t[n]!==i:cn.call(t,n)}function al(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=He&&t===i?d:t,this}pe.prototype.clear=sl,pe.prototype.delete=ul,pe.prototype.get=ol,pe.prototype.has=fl,pe.prototype.set=al;function Ut(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function ll(){this.__data__=[],this.size=0}function cl(n){var t=this.__data__,e=Cr(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():wr.call(t,e,1),--this.size,!0}function hl(n){var t=this.__data__,e=Cr(t,n);return e<0?i:t[e][1]}function gl(n){return Cr(this.__data__,n)>-1}function pl(n,t){var e=this.__data__,r=Cr(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}Ut.prototype.clear=ll,Ut.prototype.delete=cl,Ut.prototype.get=hl,Ut.prototype.has=gl,Ut.prototype.set=pl;function Bt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function dl(){this.size=0,this.__data__={hash:new pe,map:new($e||Ut),string:new pe}}function _l(n){var t=Wr(this,n).delete(n);return this.size-=t?1:0,t}function vl(n){return Wr(this,n).get(n)}function xl(n){return Wr(this,n).has(n)}function wl(n,t){var e=Wr(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}Bt.prototype.clear=dl,Bt.prototype.delete=_l,Bt.prototype.get=vl,Bt.prototype.has=xl,Bt.prototype.set=wl;function de(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Bt;++t<e;)this.add(n[t])}function ml(n){return this.__data__.set(n,d),this}function yl(n){return this.__data__.has(n)}de.prototype.add=de.prototype.push=ml,de.prototype.has=yl;function bt(n){var t=this.__data__=new Ut(n);this.size=t.size}function Al(){this.__data__=new Ut,this.size=0}function Sl(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function Il(n){return this.__data__.get(n)}function El(n){return this.__data__.has(n)}function Cl(n,t){var e=this.__data__;if(e instanceof Ut){var r=e.__data__;if(!$e||r.length<x-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Bt(r)}return e.set(n,t),this.size=e.size,this}bt.prototype.clear=Al,bt.prototype.delete=Sl,bt.prototype.get=Il,bt.prototype.has=El,bt.prototype.set=Cl;function du(n,t){var e=H(n),r=!e&&me(n),s=!e&&!r&&re(n),o=!e&&!r&&!s&&Be(n),a=e||r||s||o,l=a?pi(n.length,Ua):[],h=l.length;for(var m in n)(t||cn.call(n,m))&&!(a&&(m=="length"||s&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||$t(m,h)))&&l.push(m);return l}function _u(n){var t=n.length;return t?n[Ti(0,t-1)]:i}function Ll(n,t){return Nr(rt(n),_e(t,0,n.length))}function Ml(n){return Nr(rt(n))}function yi(n,t,e){(e!==i&&!Rt(n[t],e)||e===i&&!(t in n))&&Wt(n,t,e)}function ze(n,t,e){var r=n[t];(!(cn.call(n,t)&&Rt(r,e))||e===i&&!(t in n))&&Wt(n,t,e)}function Cr(n,t){for(var e=n.length;e--;)if(Rt(n[e][0],t))return e;return-1}function bl(n,t,e,r){return jt(n,function(s,o,a){t(r,s,e(s),a)}),r}function vu(n,t){return n&&Dt(t,Wn(t),n)}function Rl(n,t){return n&&Dt(t,st(t),n)}function Wt(n,t,e){t=="__proto__"&&mr?mr(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Ai(n,t){for(var e=-1,r=t.length,s=p(r),o=n==null;++e<r;)s[e]=o?i:es(n,t[e]);return s}function _e(n,t,e){return n===n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function yt(n,t,e,r,s,o){var a,l=t&L,h=t&z,m=t&Z;if(e&&(a=s?e(n,r,s,o):e(n)),a!==i)return a;if(!An(n))return n;var y=H(n);if(y){if(a=xc(n),!l)return rt(n,a)}else{var S=qn(n),C=S==ft||S==fe;if(re(n))return $u(n,l);if(S==tt||S==Bn||C&&!s){if(a=h||C?{}:uo(n),!l)return h?oc(n,Rl(a,n)):uc(n,vu(a,n))}else{if(!_n[S])return s?n:{};a=wc(n,S,l)}}o||(o=new bt);var R=o.get(n);if(R)return R;o.set(n,a),Uo(n)?n.forEach(function(W){a.add(yt(W,t,e,W,n,o))}):Po(n)&&n.forEach(function(W,nn){a.set(nn,yt(W,t,e,nn,n,o))});var B=m?h?Gi:$i:h?st:Wn,X=y?i:B(n);return xt(X||n,function(W,nn){X&&(nn=W,W=n[nn]),ze(a,nn,yt(W,t,e,nn,n,o))}),a}function Tl(n){var t=Wn(n);return function(e){return xu(e,n,t)}}function xu(n,t,e){var r=e.length;if(n==null)return!r;for(n=dn(n);r--;){var s=e[r],o=t[s],a=n[s];if(a===i&&!(s in n)||!o(a))return!1}return!0}function wu(n,t,e){if(typeof n!="function")throw new wt(v);return Qe(function(){n.apply(i,e)},t)}function qe(n,t,e,r){var s=-1,o=ar,a=!0,l=n.length,h=[],m=t.length;if(!l)return h;e&&(t=mn(t,ct(e))),r?(o=fi,a=!1):t.length>=x&&(o=Ne,a=!1,t=new de(t));n:for(;++s<l;){var y=n[s],S=e==null?y:e(y);if(y=r||y!==0?y:0,a&&S===S){for(var C=m;C--;)if(t[C]===S)continue n;h.push(y)}else o(t,S,r)||h.push(y)}return h}var jt=qu(Ot),mu=qu(Ii,!0);function Ol(n,t){var e=!0;return jt(n,function(r,s,o){return e=!!t(r,s,o),e}),e}function Lr(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],a=t(o);if(a!=null&&(l===i?a===a&&!gt(a):e(a,l)))var l=a,h=o}return h}function Dl(n,t,e,r){var s=n.length;for(e=V(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:V(r),r<0&&(r+=s),r=e>r?0:Wo(r);e<r;)n[e++]=t;return n}function yu(n,t){var e=[];return jt(n,function(r,s,o){t(r,s,o)&&e.push(r)}),e}function Gn(n,t,e,r,s){var o=-1,a=n.length;for(e||(e=yc),s||(s=[]);++o<a;){var l=n[o];t>0&&e(l)?t>1?Gn(l,t-1,e,r,s):Xt(s,l):r||(s[s.length]=l)}return s}var Si=Ku(),Au=Ku(!0);function Ot(n,t){return n&&Si(n,t,Wn)}function Ii(n,t){return n&&Au(n,t,Wn)}function Mr(n,t){return Yt(t,function(e){return Gt(n[e])})}function ve(n,t){t=te(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[Pt(t[e++])];return e&&e==r?n:i}function Su(n,t,e){var r=t(n);return H(n)?r:Xt(r,e(n))}function Jn(n){return n==null?n===i?sr:Ae:ge&&ge in dn(n)?dc(n):Mc(n)}function Ei(n,t){return n>t}function Pl(n,t){return n!=null&&cn.call(n,t)}function Fl(n,t){return n!=null&&t in dn(n)}function Ul(n,t,e){return n>=zn(t,e)&&n<Fn(t,e)}function Ci(n,t,e){for(var r=e?fi:ar,s=n[0].length,o=n.length,a=o,l=p(o),h=1/0,m=[];a--;){var y=n[a];a&&t&&(y=mn(y,ct(t))),h=zn(y.length,h),l[a]=!e&&(t||s>=120&&y.length>=120)?new de(a&&y):i}y=n[0];var S=-1,C=l[0];n:for(;++S<s&&m.length<h;){var R=y[S],B=t?t(R):R;if(R=e||R!==0?R:0,!(C?Ne(C,B):r(m,B,e))){for(a=o;--a;){var X=l[a];if(!(X?Ne(X,B):r(n[a],B,e)))continue n}C&&C.push(B),m.push(R)}}return m}function Bl(n,t,e,r){return Ot(n,function(s,o,a){t(r,e(s),o,a)}),r}function Ke(n,t,e){t=te(t,n),n=lo(n,t);var r=n==null?n:n[Pt(St(t))];return r==null?i:lt(r,n,e)}function Iu(n){return In(n)&&Jn(n)==Bn}function Wl(n){return In(n)&&Jn(n)==E}function Nl(n){return In(n)&&Jn(n)==Hn}function Ve(n,t,e,r,s){return n===t?!0:n==null||t==null||!In(n)&&!In(t)?n!==n&&t!==t:kl(n,t,e,r,Ve,s)}function kl(n,t,e,r,s,o){var a=H(n),l=H(t),h=a?nt:qn(n),m=l?nt:qn(t);h=h==Bn?tt:h,m=m==Bn?tt:m;var y=h==tt,S=m==tt,C=h==m;if(C&&re(n)){if(!re(t))return!1;a=!0,y=!1}if(C&&!y)return o||(o=new bt),a||Be(n)?ro(n,t,e,r,s,o):gc(n,t,h,e,r,s,o);if(!(e&j)){var R=y&&cn.call(n,"__wrapped__"),B=S&&cn.call(t,"__wrapped__");if(R||B){var X=R?n.value():n,W=B?t.value():t;return o||(o=new bt),s(X,W,e,r,o)}}return C?(o||(o=new bt),pc(n,t,e,r,s,o)):!1}function $l(n){return In(n)&&qn(n)==Zn}function Li(n,t,e,r){var s=e.length,o=s,a=!r;if(n==null)return!o;for(n=dn(n);s--;){var l=e[s];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<o;){l=e[s];var h=l[0],m=n[h],y=l[1];if(a&&l[2]){if(m===i&&!(h in n))return!1}else{var S=new bt;if(r)var C=r(m,y,h,n,t,S);if(!(C===i?Ve(y,m,j|on,r,S):C))return!1}}return!0}function Eu(n){if(!An(n)||Sc(n))return!1;var t=Gt(n)?$a:Tf;return t.test(we(n))}function Gl(n){return In(n)&&Jn(n)==ae}function Hl(n){return In(n)&&qn(n)==at}function Zl(n){return In(n)&&zr(n.length)&&!!xn[Jn(n)]}function Cu(n){return typeof n=="function"?n:n==null?ut:typeof n=="object"?H(n)?bu(n[0],n[1]):Mu(n):Yo(n)}function Mi(n){if(!Je(n))return Ka(n);var t=[];for(var e in dn(n))cn.call(n,e)&&e!="constructor"&&t.push(e);return t}function zl(n){if(!An(n))return Lc(n);var t=Je(n),e=[];for(var r in n)r=="constructor"&&(t||!cn.call(n,r))||e.push(r);return e}function bi(n,t){return n<t}function Lu(n,t){var e=-1,r=it(n)?p(n.length):[];return jt(n,function(s,o,a){r[++e]=t(s,o,a)}),r}function Mu(n){var t=Zi(n);return t.length==1&&t[0][2]?fo(t[0][0],t[0][1]):function(e){return e===n||Li(e,n,t)}}function bu(n,t){return qi(n)&&oo(t)?fo(Pt(n),t):function(e){var r=es(e,n);return r===i&&r===t?rs(e,n):Ve(t,r,j|on)}}function br(n,t,e,r,s){n!==t&&Si(t,function(o,a){if(s||(s=new bt),An(o))ql(n,t,a,e,br,r,s);else{var l=r?r(Vi(n,a),o,a+"",n,t,s):i;l===i&&(l=o),yi(n,a,l)}},st)}function ql(n,t,e,r,s,o,a){var l=Vi(n,e),h=Vi(t,e),m=a.get(h);if(m){yi(n,e,m);return}var y=o?o(l,h,e+"",n,t,a):i,S=y===i;if(S){var C=H(h),R=!C&&re(h),B=!C&&!R&&Be(h);y=h,C||R||B?H(l)?y=l:Cn(l)?y=rt(l):R?(S=!1,y=$u(h,!0)):B?(S=!1,y=Gu(h,!0)):y=[]:je(h)||me(h)?(y=l,me(l)?y=No(l):(!An(l)||Gt(l))&&(y=uo(h))):S=!1}S&&(a.set(h,y),s(y,h,r,o,a),a.delete(h)),yi(n,e,y)}function Ru(n,t){var e=n.length;if(e)return t+=t<0?e:0,$t(t,e)?n[t]:i}function Tu(n,t,e){t.length?t=mn(t,function(o){return H(o)?function(a){return ve(a,o.length===1?o[0]:o)}:o}):t=[ut];var r=-1;t=mn(t,ct(F()));var s=Lu(n,function(o,a,l){var h=mn(t,function(m){return m(o)});return{criteria:h,index:++r,value:o}});return wa(s,function(o,a){return sc(o,a,e)})}function Kl(n,t){return Ou(n,t,function(e,r){return rs(n,r)})}function Ou(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var a=t[r],l=ve(n,a);e(l,a)&&Ye(o,te(a,n),l)}return o}function Vl(n){return function(t){return ve(t,n)}}function Ri(n,t,e,r){var s=r?xa:Ce,o=-1,a=t.length,l=n;for(n===t&&(t=rt(t)),e&&(l=mn(n,ct(e)));++o<a;)for(var h=0,m=t[o],y=e?e(m):m;(h=s(l,y,h,r))>-1;)l!==n&&wr.call(l,h,1),wr.call(n,h,1);return n}function Du(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;$t(s)?wr.call(n,s,1):Pi(n,s)}}return n}function Ti(n,t){return n+Ar(gu()*(t-n+1))}function Yl(n,t,e,r){for(var s=-1,o=Fn(yr((t-n)/(e||1)),0),a=p(o);o--;)a[r?o:++s]=n,n+=e;return a}function Oi(n,t){var e="";if(!n||t<1||t>Rn)return e;do t%2&&(e+=n),t=Ar(t/2),t&&(n+=n);while(t);return e}function J(n,t){return Yi(ao(n,t,ut),n+"")}function Xl(n){return _u(We(n))}function Jl(n,t){var e=We(n);return Nr(e,_e(t,0,e.length))}function Ye(n,t,e,r){if(!An(n))return n;t=te(t,n);for(var s=-1,o=t.length,a=o-1,l=n;l!=null&&++s<o;){var h=Pt(t[s]),m=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(s!=a){var y=l[h];m=r?r(y,h,l):i,m===i&&(m=An(y)?y:$t(t[s+1])?[]:{})}ze(l,h,m),l=l[h]}return n}var Pu=Sr?function(n,t){return Sr.set(n,t),n}:ut,Ql=mr?function(n,t){return mr(n,"toString",{configurable:!0,enumerable:!1,value:ss(t),writable:!0})}:ut;function jl(n){return Nr(We(n))}function At(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=p(s);++r<s;)o[r]=n[r+t];return o}function nc(n,t){var e;return jt(n,function(r,s,o){return e=t(r,s,o),!e}),!!e}function Rr(n,t,e){var r=0,s=n==null?r:n.length;if(typeof t=="number"&&t===t&&s<=sn){for(;r<s;){var o=r+s>>>1,a=n[o];a!==null&&!gt(a)&&(e?a<=t:a<t)?r=o+1:s=o}return s}return Di(n,t,ut,e)}function Di(n,t,e,r){var s=0,o=n==null?0:n.length;if(o===0)return 0;t=e(t);for(var a=t!==t,l=t===null,h=gt(t),m=t===i;s<o;){var y=Ar((s+o)/2),S=e(n[y]),C=S!==i,R=S===null,B=S===S,X=gt(S);if(a)var W=r||B;else m?W=B&&(r||C):l?W=B&&C&&(r||!R):h?W=B&&C&&!R&&(r||!X):R||X?W=!1:W=r?S<=t:S<t;W?s=y+1:o=y}return zn(o,$)}function Fu(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!Rt(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function Uu(n){return typeof n=="number"?n:gt(n)?ot:+n}function ht(n){if(typeof n=="string")return n;if(H(n))return mn(n,ht)+"";if(gt(n))return pu?pu.call(n):"";var t=n+"";return t=="0"&&1/n==-Xn?"-0":t}function ne(n,t,e){var r=-1,s=ar,o=n.length,a=!0,l=[],h=l;if(e)a=!1,s=fi;else if(o>=x){var m=t?null:cc(n);if(m)return cr(m);a=!1,s=Ne,h=new de}else h=t?[]:l;n:for(;++r<o;){var y=n[r],S=t?t(y):y;if(y=e||y!==0?y:0,a&&S===S){for(var C=h.length;C--;)if(h[C]===S)continue n;t&&h.push(S),l.push(y)}else s(h,S,e)||(h!==l&&h.push(S),l.push(y))}return l}function Pi(n,t){return t=te(t,n),n=lo(n,t),n==null||delete n[Pt(St(t))]}function Bu(n,t,e,r){return Ye(n,t,e(ve(n,t)),r)}function Tr(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?At(n,r?0:o,r?o+1:s):At(n,r?o+1:0,r?s:o)}function Wu(n,t){var e=n;return e instanceof en&&(e=e.value()),ai(t,function(r,s){return s.func.apply(s.thisArg,Xt([r],s.args))},e)}function Fi(n,t,e){var r=n.length;if(r<2)return r?ne(n[0]):[];for(var s=-1,o=p(r);++s<r;)for(var a=n[s],l=-1;++l<r;)l!=s&&(o[s]=qe(o[s]||a,n[l],t,e));return ne(Gn(o,1),t,e)}function Nu(n,t,e){for(var r=-1,s=n.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:i;e(a,n[r],l)}return a}function Ui(n){return Cn(n)?n:[]}function Bi(n){return typeof n=="function"?n:ut}function te(n,t){return H(n)?n:qi(n,t)?[n]:po(ln(n))}var tc=J;function ee(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:At(n,t,e)}var ku=Ga||function(n){return $n.clearTimeout(n)};function $u(n,t){if(t)return n.slice();var e=n.length,r=fu?fu(e):new n.constructor(e);return n.copy(r),r}function Wi(n){var t=new n.constructor(n.byteLength);return new vr(t).set(new vr(n)),t}function ec(n,t){var e=t?Wi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}function rc(n){var t=new n.constructor(n.source,Is.exec(n));return t.lastIndex=n.lastIndex,t}function ic(n){return Ze?dn(Ze.call(n)):{}}function Gu(n,t){var e=t?Wi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function Hu(n,t){if(n!==t){var e=n!==i,r=n===null,s=n===n,o=gt(n),a=t!==i,l=t===null,h=t===t,m=gt(t);if(!l&&!m&&!o&&n>t||o&&a&&h&&!l&&!m||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!m&&n<t||m&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function sc(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,a=s.length,l=e.length;++r<a;){var h=Hu(s[r],o[r]);if(h){if(r>=l)return h;var m=e[r];return h*(m=="desc"?-1:1)}}return n.index-t.index}function Zu(n,t,e,r){for(var s=-1,o=n.length,a=e.length,l=-1,h=t.length,m=Fn(o-a,0),y=p(h+m),S=!r;++l<h;)y[l]=t[l];for(;++s<a;)(S||s<o)&&(y[e[s]]=n[s]);for(;m--;)y[l++]=n[s++];return y}function zu(n,t,e,r){for(var s=-1,o=n.length,a=-1,l=e.length,h=-1,m=t.length,y=Fn(o-l,0),S=p(y+m),C=!r;++s<y;)S[s]=n[s];for(var R=s;++h<m;)S[R+h]=t[h];for(;++a<l;)(C||s<o)&&(S[R+e[a]]=n[s++]);return S}function rt(n,t){var e=-1,r=n.length;for(t||(t=p(r));++e<r;)t[e]=n[e];return t}function Dt(n,t,e,r){var s=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var l=t[o],h=r?r(e[l],n[l],l,e,n):i;h===i&&(h=n[l]),s?Wt(e,l,h):ze(e,l,h)}return e}function uc(n,t){return Dt(n,zi(n),t)}function oc(n,t){return Dt(n,io(n),t)}function Or(n,t){return function(e,r){var s=H(e)?ha:bl,o=t?t():{};return s(e,n,F(r,2),o)}}function Pe(n){return J(function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=n.length>3&&typeof o=="function"?(s--,o):i,a&&Qn(e[0],e[1],a)&&(o=s<3?i:o,s=1),t=dn(t);++r<s;){var l=e[r];l&&n(t,l,r,o)}return t})}function qu(n,t){return function(e,r){if(e==null)return e;if(!it(e))return n(e,r);for(var s=e.length,o=t?s:-1,a=dn(e);(t?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function Ku(n){return function(t,e,r){for(var s=-1,o=dn(t),a=r(t),l=a.length;l--;){var h=a[n?l:++s];if(e(o[h],h,o)===!1)break}return t}}function fc(n,t,e){var r=t&q,s=Xe(n);function o(){var a=this&&this!==$n&&this instanceof o?s:n;return a.apply(r?e:this,arguments)}return o}function Vu(n){return function(t){t=ln(t);var e=Le(t)?Mt(t):i,r=e?e[0]:t.charAt(0),s=e?ee(e,1).join(""):t.slice(1);return r[n]()+s}}function Fe(n){return function(t){return ai(Ko(qo(t).replace(Qf,"")),n,"")}}function Xe(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=De(n.prototype),r=n.apply(e,t);return An(r)?r:e}}function ac(n,t,e){var r=Xe(n);function s(){for(var o=arguments.length,a=p(o),l=o,h=Ue(s);l--;)a[l]=arguments[l];var m=o<3&&a[0]!==h&&a[o-1]!==h?[]:Jt(a,h);if(o-=m.length,o<e)return ju(n,t,Dr,s.placeholder,i,a,m,i,i,e-o);var y=this&&this!==$n&&this instanceof s?r:n;return lt(y,this,a)}return s}function Yu(n){return function(t,e,r){var s=dn(t);if(!it(t)){var o=F(e,3);t=Wn(t),e=function(l){return o(s[l],l,s)}}var a=n(t,e,r);return a>-1?s[o?t[a]:a]:i}}function Xu(n){return kt(function(t){var e=t.length,r=e,s=mt.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new wt(v);if(s&&!a&&Br(o)=="wrapper")var a=new mt([],!0)}for(r=a?r:e;++r<e;){o=t[r];var l=Br(o),h=l=="wrapper"?Hi(o):i;h&&Ki(h[0])&&h[1]==(vn|hn|Sn|Mn)&&!h[4].length&&h[9]==1?a=a[Br(h[0])].apply(a,h[3]):a=o.length==1&&Ki(o)?a[l]():a.thru(o)}return function(){var m=arguments,y=m[0];if(a&&m.length==1&&H(y))return a.plant(y).value();for(var S=0,C=e?t[S].apply(this,m):y;++S<e;)C=t[S].call(this,C);return C}})}function Dr(n,t,e,r,s,o,a,l,h,m){var y=t&vn,S=t&q,C=t&Q,R=t&(hn|gn),B=t&Kn,X=C?i:Xe(n);function W(){for(var nn=arguments.length,rn=p(nn),pt=nn;pt--;)rn[pt]=arguments[pt];if(R)var jn=Ue(W),dt=ya(rn,jn);if(r&&(rn=Zu(rn,r,s,R)),o&&(rn=zu(rn,o,a,R)),nn-=dt,R&&nn<m){var Ln=Jt(rn,jn);return ju(n,t,Dr,W.placeholder,e,rn,Ln,l,h,m-nn)}var Tt=S?e:this,Zt=C?Tt[n]:n;return nn=rn.length,l?rn=bc(rn,l):B&&nn>1&&rn.reverse(),y&&h<nn&&(rn.length=h),this&&this!==$n&&this instanceof W&&(Zt=X||Xe(Zt)),Zt.apply(Tt,rn)}return W}function Ju(n,t){return function(e,r){return Bl(e,n,t(r),{})}}function Pr(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=ht(e),r=ht(r)):(e=Uu(e),r=Uu(r)),s=n(e,r)}return s}}function Ni(n){return kt(function(t){return t=mn(t,ct(F())),J(function(e){var r=this;return n(t,function(s){return lt(s,r,e)})})})}function Fr(n,t){t=t===i?" ":ht(t);var e=t.length;if(e<2)return e?Oi(t,n):t;var r=Oi(t,yr(n/Me(t)));return Le(t)?ee(Mt(r),0,n).join(""):r.slice(0,n)}function lc(n,t,e,r){var s=t&q,o=Xe(n);function a(){for(var l=-1,h=arguments.length,m=-1,y=r.length,S=p(y+h),C=this&&this!==$n&&this instanceof a?o:n;++m<y;)S[m]=r[m];for(;h--;)S[m++]=arguments[++l];return lt(C,s?e:this,S)}return a}function Qu(n){return function(t,e,r){return r&&typeof r!="number"&&Qn(t,e,r)&&(e=r=i),t=Ht(t),e===i?(e=t,t=0):e=Ht(e),r=r===i?t<e?1:-1:Ht(r),Yl(t,e,r,n)}}function Ur(n){return function(t,e){return typeof t=="string"&&typeof e=="string"||(t=It(t),e=It(e)),n(t,e)}}function ju(n,t,e,r,s,o,a,l,h,m){var y=t&hn,S=y?a:i,C=y?i:a,R=y?o:i,B=y?i:o;t|=y?Sn:On,t&=~(y?On:Sn),t&wn||(t&=~(q|Q));var X=[n,t,s,R,S,B,C,l,h,m],W=e.apply(i,X);return Ki(n)&&co(W,X),W.placeholder=r,ho(W,n,t)}function ki(n){var t=Pn[n];return function(e,r){if(e=It(e),r=r==null?0:zn(V(r),292),r&&hu(e)){var s=(ln(e)+"e").split("e"),o=t(s[0]+"e"+(+s[1]+r));return s=(ln(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return t(e)}}var cc=Te&&1/cr(new Te([,-0]))[1]==Xn?function(n){return new Te(n)}:fs;function no(n){return function(t){var e=qn(t);return e==Zn?_i(t):e==at?Ma(t):ma(t,n(t))}}function Nt(n,t,e,r,s,o,a,l){var h=t&Q;if(!h&&typeof n!="function")throw new wt(v);var m=r?r.length:0;if(m||(t&=~(Sn|On),r=s=i),a=a===i?a:Fn(V(a),0),l=l===i?l:V(l),m-=s?s.length:0,t&On){var y=r,S=s;r=s=i}var C=h?i:Hi(n),R=[n,t,e,r,s,y,S,o,a,l];if(C&&Cc(R,C),n=R[0],t=R[1],e=R[2],r=R[3],s=R[4],l=R[9]=R[9]===i?h?0:n.length:Fn(R[9]-m,0),!l&&t&(hn|gn)&&(t&=~(hn|gn)),!t||t==q)var B=fc(n,t,e);else t==hn||t==gn?B=ac(n,t,l):(t==Sn||t==(q|Sn))&&!s.length?B=lc(n,t,e,r):B=Dr.apply(i,R);var X=C?Pu:co;return ho(X(B,R),n,t)}function to(n,t,e,r){return n===i||Rt(n,Re[e])&&!cn.call(r,e)?t:n}function eo(n,t,e,r,s,o){return An(n)&&An(t)&&(o.set(t,n),br(n,t,i,eo,o),o.delete(t)),n}function hc(n){return je(n)?i:n}function ro(n,t,e,r,s,o){var a=e&j,l=n.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var m=o.get(n),y=o.get(t);if(m&&y)return m==t&&y==n;var S=-1,C=!0,R=e&on?new de:i;for(o.set(n,t),o.set(t,n);++S<l;){var B=n[S],X=t[S];if(r)var W=a?r(X,B,S,t,n,o):r(B,X,S,n,t,o);if(W!==i){if(W)continue;C=!1;break}if(R){if(!li(t,function(nn,rn){if(!Ne(R,rn)&&(B===nn||s(B,nn,e,r,o)))return R.push(rn)})){C=!1;break}}else if(!(B===X||s(B,X,e,r,o))){C=!1;break}}return o.delete(n),o.delete(t),C}function gc(n,t,e,r,s,o,a){switch(e){case b:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case E:return!(n.byteLength!=t.byteLength||!o(new vr(n),new vr(t)));case Dn:case Hn:case Ct:return Rt(+n,+t);case Tn:return n.name==t.name&&n.message==t.message;case ae:case le:return n==t+"";case Zn:var l=_i;case at:var h=r&j;if(l||(l=cr),n.size!=t.size&&!h)return!1;var m=a.get(n);if(m)return m==t;r|=on,a.set(n,t);var y=ro(l(n),l(t),r,s,o,a);return a.delete(n),y;case Se:if(Ze)return Ze.call(n)==Ze.call(t)}return!1}function pc(n,t,e,r,s,o){var a=e&j,l=$i(n),h=l.length,m=$i(t),y=m.length;if(h!=y&&!a)return!1;for(var S=h;S--;){var C=l[S];if(!(a?C in t:cn.call(t,C)))return!1}var R=o.get(n),B=o.get(t);if(R&&B)return R==t&&B==n;var X=!0;o.set(n,t),o.set(t,n);for(var W=a;++S<h;){C=l[S];var nn=n[C],rn=t[C];if(r)var pt=a?r(rn,nn,C,t,n,o):r(nn,rn,C,n,t,o);if(!(pt===i?nn===rn||s(nn,rn,e,r,o):pt)){X=!1;break}W||(W=C=="constructor")}if(X&&!W){var jn=n.constructor,dt=t.constructor;jn!=dt&&"constructor"in n&&"constructor"in t&&!(typeof jn=="function"&&jn instanceof jn&&typeof dt=="function"&&dt instanceof dt)&&(X=!1)}return o.delete(n),o.delete(t),X}function kt(n){return Yi(ao(n,i,wo),n+"")}function $i(n){return Su(n,Wn,zi)}function Gi(n){return Su(n,st,io)}var Hi=Sr?function(n){return Sr.get(n)}:fs;function Br(n){for(var t=n.name+"",e=Oe[t],r=cn.call(Oe,t)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==n)return s.name}return t}function Ue(n){var t=cn.call(u,"placeholder")?u:n;return t.placeholder}function F(){var n=u.iteratee||us;return n=n===us?Cu:n,arguments.length?n(arguments[0],arguments[1]):n}function Wr(n,t){var e=n.__data__;return Ac(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Zi(n){for(var t=Wn(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,oo(s)]}return t}function xe(n,t){var e=Ea(n,t);return Eu(e)?e:i}function dc(n){var t=cn.call(n,ge),e=n[ge];try{n[ge]=i;var r=!0}catch{}var s=dr.call(n);return r&&(t?n[ge]=e:delete n[ge]),s}var zi=xi?function(n){return n==null?[]:(n=dn(n),Yt(xi(n),function(t){return lu.call(n,t)}))}:as,io=xi?function(n){for(var t=[];n;)Xt(t,zi(n)),n=xr(n);return t}:as,qn=Jn;(wi&&qn(new wi(new ArrayBuffer(1)))!=b||$e&&qn(new $e)!=Zn||mi&&qn(mi.resolve())!=ir||Te&&qn(new Te)!=at||Ge&&qn(new Ge)!=ce)&&(qn=function(n){var t=Jn(n),e=t==tt?n.constructor:i,r=e?we(e):"";if(r)switch(r){case Ja:return b;case Qa:return Zn;case ja:return ir;case nl:return at;case tl:return ce}return t});function _c(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=zn(t,n+a);break;case"takeRight":n=Fn(n,t-a);break}}return{start:n,end:t}}function vc(n){var t=n.match(Sf);return t?t[1].split(If):[]}function so(n,t,e){t=te(t,n);for(var r=-1,s=t.length,o=!1;++r<s;){var a=Pt(t[r]);if(!(o=n!=null&&e(n,a)))break;n=n[a]}return o||++r!=s?o:(s=n==null?0:n.length,!!s&&zr(s)&&$t(a,s)&&(H(n)||me(n)))}function xc(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&cn.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function uo(n){return typeof n.constructor=="function"&&!Je(n)?De(xr(n)):{}}function wc(n,t,e){var r=n.constructor;switch(t){case E:return Wi(n);case Dn:case Hn:return new r(+n);case b:return ec(n,e);case D:case G:case tn:case K:case un:case yn:case En:case et:case Lt:return Gu(n,e);case Zn:return new r;case Ct:case le:return new r(n);case ae:return rc(n);case at:return new r;case Se:return ic(n)}}function mc(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(Af,`{
/* [wrapped with `+t+`] */
`)}function yc(n){return H(n)||me(n)||!!(cu&&n&&n[cu])}function $t(n,t){var e=typeof n;return t=t??Rn,!!t&&(e=="number"||e!="symbol"&&Df.test(n))&&n>-1&&n%1==0&&n<t}function Qn(n,t,e){if(!An(e))return!1;var r=typeof t;return(r=="number"?it(e)&&$t(t,e.length):r=="string"&&t in e)?Rt(e[t],n):!1}function qi(n,t){if(H(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||gt(n)?!0:xf.test(n)||!vf.test(n)||t!=null&&n in dn(t)}function Ac(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Ki(n){var t=Br(n),e=u[t];if(typeof e!="function"||!(t in en.prototype))return!1;if(n===e)return!0;var r=Hi(e);return!!r&&n===r[0]}function Sc(n){return!!ou&&ou in n}var Ic=gr?Gt:ls;function Je(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Re;return n===e}function oo(n){return n===n&&!An(n)}function fo(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==i||n in dn(e))}}function Ec(n){var t=Hr(n,function(r){return e.size===T&&e.clear(),r}),e=t.cache;return t}function Cc(n,t){var e=n[1],r=t[1],s=e|r,o=s<(q|Q|vn),a=r==vn&&e==hn||r==vn&&e==Mn&&n[7].length<=t[8]||r==(vn|Mn)&&t[7].length<=t[8]&&e==hn;if(!(o||a))return n;r&q&&(n[2]=t[2],s|=e&q?0:wn);var l=t[3];if(l){var h=n[3];n[3]=h?Zu(h,l,t[4]):l,n[4]=h?Jt(n[3],U):t[4]}return l=t[5],l&&(h=n[5],n[5]=h?zu(h,l,t[6]):l,n[6]=h?Jt(n[5],U):t[6]),l=t[7],l&&(n[7]=l),r&vn&&(n[8]=n[8]==null?t[8]:zn(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}function Lc(n){var t=[];if(n!=null)for(var e in dn(n))t.push(e);return t}function Mc(n){return dr.call(n)}function ao(n,t,e){return t=Fn(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=Fn(r.length-t,0),a=p(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=p(t+1);++s<t;)l[s]=r[s];return l[t]=e(a),lt(n,this,l)}}function lo(n,t){return t.length<2?n:ve(n,At(t,0,-1))}function bc(n,t){for(var e=n.length,r=zn(t.length,e),s=rt(n);r--;){var o=t[r];n[r]=$t(o,e)?s[o]:i}return n}function Vi(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var co=go(Pu),Qe=Za||function(n,t){return $n.setTimeout(n,t)},Yi=go(Ql);function ho(n,t,e){var r=t+"";return Yi(n,mc(r,Rc(vc(r),e)))}function go(n){var t=0,e=0;return function(){var r=Va(),s=pn-(r-e);if(e=r,s>0){if(++t>=an)return arguments[0]}else t=0;return n.apply(i,arguments)}}function Nr(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=Ti(e,s),a=n[o];n[o]=n[e],n[e]=a}return n.length=t,n}var po=Ec(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(wf,function(e,r,s,o){t.push(s?o.replace(Lf,"$1"):r||e)}),t});function Pt(n){if(typeof n=="string"||gt(n))return n;var t=n+"";return t=="0"&&1/n==-Xn?"-0":t}function we(n){if(n!=null){try{return pr.call(n)}catch{}try{return n+""}catch{}}return""}function Rc(n,t){return xt(Un,function(e){var r="_."+e[0];t&e[1]&&!ar(n,r)&&n.push(r)}),n.sort()}function _o(n){if(n instanceof en)return n.clone();var t=new mt(n.__wrapped__,n.__chain__);return t.__actions__=rt(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Tc(n,t,e){(e?Qn(n,t,e):t===i)?t=1:t=Fn(V(t),0);var r=n==null?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,a=p(yr(r/t));s<r;)a[o++]=At(n,s,s+=t);return a}function Oc(n){for(var t=-1,e=n==null?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s}function Dc(){var n=arguments.length;if(!n)return[];for(var t=p(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return Xt(H(e)?rt(e):[e],Gn(t,1))}var Pc=J(function(n,t){return Cn(n)?qe(n,Gn(t,1,Cn,!0)):[]}),Fc=J(function(n,t){var e=St(t);return Cn(e)&&(e=i),Cn(n)?qe(n,Gn(t,1,Cn,!0),F(e,2)):[]}),Uc=J(function(n,t){var e=St(t);return Cn(e)&&(e=i),Cn(n)?qe(n,Gn(t,1,Cn,!0),i,e):[]});function Bc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:V(t),At(n,t<0?0:t,r)):[]}function Wc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:V(t),t=r-t,At(n,0,t<0?0:t)):[]}function Nc(n,t){return n&&n.length?Tr(n,F(t,3),!0,!0):[]}function kc(n,t){return n&&n.length?Tr(n,F(t,3),!0):[]}function $c(n,t,e,r){var s=n==null?0:n.length;return s?(e&&typeof e!="number"&&Qn(n,t,e)&&(e=0,r=s),Dl(n,t,e,r)):[]}function vo(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:V(e);return s<0&&(s=Fn(r+s,0)),lr(n,F(t,3),s)}function xo(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=V(e),s=e<0?Fn(r+s,0):zn(s,r-1)),lr(n,F(t,3),s,!0)}function wo(n){var t=n==null?0:n.length;return t?Gn(n,1):[]}function Gc(n){var t=n==null?0:n.length;return t?Gn(n,Xn):[]}function Hc(n,t){var e=n==null?0:n.length;return e?(t=t===i?1:V(t),Gn(n,t)):[]}function Zc(n){for(var t=-1,e=n==null?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r}function mo(n){return n&&n.length?n[0]:i}function zc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:V(e);return s<0&&(s=Fn(r+s,0)),Ce(n,t,s)}function qc(n){var t=n==null?0:n.length;return t?At(n,0,-1):[]}var Kc=J(function(n){var t=mn(n,Ui);return t.length&&t[0]===n[0]?Ci(t):[]}),Vc=J(function(n){var t=St(n),e=mn(n,Ui);return t===St(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Ci(e,F(t,2)):[]}),Yc=J(function(n){var t=St(n),e=mn(n,Ui);return t=typeof t=="function"?t:i,t&&e.pop(),e.length&&e[0]===n[0]?Ci(e,i,t):[]});function Xc(n,t){return n==null?"":qa.call(n,t)}function St(n){var t=n==null?0:n.length;return t?n[t-1]:i}function Jc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=V(e),s=s<0?Fn(r+s,0):zn(s,r-1)),t===t?Ra(n,t,s):lr(n,js,s,!0)}function Qc(n,t){return n&&n.length?Ru(n,V(t)):i}var jc=J(yo);function yo(n,t){return n&&n.length&&t&&t.length?Ri(n,t):n}function nh(n,t,e){return n&&n.length&&t&&t.length?Ri(n,t,F(e,2)):n}function th(n,t,e){return n&&n.length&&t&&t.length?Ri(n,t,i,e):n}var eh=kt(function(n,t){var e=n==null?0:n.length,r=Ai(n,t);return Du(n,mn(t,function(s){return $t(s,e)?+s:s}).sort(Hu)),r});function rh(n,t){var e=[];if(!(n&&n.length))return e;var r=-1,s=[],o=n.length;for(t=F(t,3);++r<o;){var a=n[r];t(a,r,n)&&(e.push(a),s.push(r))}return Du(n,s),e}function Xi(n){return n==null?n:Xa.call(n)}function ih(n,t,e){var r=n==null?0:n.length;return r?(e&&typeof e!="number"&&Qn(n,t,e)?(t=0,e=r):(t=t==null?0:V(t),e=e===i?r:V(e)),At(n,t,e)):[]}function sh(n,t){return Rr(n,t)}function uh(n,t,e){return Di(n,t,F(e,2))}function oh(n,t){var e=n==null?0:n.length;if(e){var r=Rr(n,t);if(r<e&&Rt(n[r],t))return r}return-1}function fh(n,t){return Rr(n,t,!0)}function ah(n,t,e){return Di(n,t,F(e,2),!0)}function lh(n,t){var e=n==null?0:n.length;if(e){var r=Rr(n,t,!0)-1;if(Rt(n[r],t))return r}return-1}function ch(n){return n&&n.length?Fu(n):[]}function hh(n,t){return n&&n.length?Fu(n,F(t,2)):[]}function gh(n){var t=n==null?0:n.length;return t?At(n,1,t):[]}function ph(n,t,e){return n&&n.length?(t=e||t===i?1:V(t),At(n,0,t<0?0:t)):[]}function dh(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:V(t),t=r-t,At(n,t<0?0:t,r)):[]}function _h(n,t){return n&&n.length?Tr(n,F(t,3),!1,!0):[]}function vh(n,t){return n&&n.length?Tr(n,F(t,3)):[]}var xh=J(function(n){return ne(Gn(n,1,Cn,!0))}),wh=J(function(n){var t=St(n);return Cn(t)&&(t=i),ne(Gn(n,1,Cn,!0),F(t,2))}),mh=J(function(n){var t=St(n);return t=typeof t=="function"?t:i,ne(Gn(n,1,Cn,!0),i,t)});function yh(n){return n&&n.length?ne(n):[]}function Ah(n,t){return n&&n.length?ne(n,F(t,2)):[]}function Sh(n,t){return t=typeof t=="function"?t:i,n&&n.length?ne(n,i,t):[]}function Ji(n){if(!(n&&n.length))return[];var t=0;return n=Yt(n,function(e){if(Cn(e))return t=Fn(e.length,t),!0}),pi(t,function(e){return mn(n,ci(e))})}function Ao(n,t){if(!(n&&n.length))return[];var e=Ji(n);return t==null?e:mn(e,function(r){return lt(t,i,r)})}var Ih=J(function(n,t){return Cn(n)?qe(n,t):[]}),Eh=J(function(n){return Fi(Yt(n,Cn))}),Ch=J(function(n){var t=St(n);return Cn(t)&&(t=i),Fi(Yt(n,Cn),F(t,2))}),Lh=J(function(n){var t=St(n);return t=typeof t=="function"?t:i,Fi(Yt(n,Cn),i,t)}),Mh=J(Ji);function bh(n,t){return Nu(n||[],t||[],ze)}function Rh(n,t){return Nu(n||[],t||[],Ye)}var Th=J(function(n){var t=n.length,e=t>1?n[t-1]:i;return e=typeof e=="function"?(n.pop(),e):i,Ao(n,e)});function So(n){var t=u(n);return t.__chain__=!0,t}function Oh(n,t){return t(n),n}function kr(n,t){return t(n)}var Dh=kt(function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return Ai(o,n)};return t>1||this.__actions__.length||!(r instanceof en)||!$t(e)?this.thru(s):(r=r.slice(e,+e+(t?1:0)),r.__actions__.push({func:kr,args:[s],thisArg:i}),new mt(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(i),o}))});function Ph(){return So(this)}function Fh(){return new mt(this.value(),this.__chain__)}function Uh(){this.__values__===i&&(this.__values__=Bo(this.value()));var n=this.__index__>=this.__values__.length,t=n?i:this.__values__[this.__index__++];return{done:n,value:t}}function Bh(){return this}function Wh(n){for(var t,e=this;e instanceof Er;){var r=_o(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t}function Nh(){var n=this.__wrapped__;if(n instanceof en){var t=n;return this.__actions__.length&&(t=new en(this)),t=t.reverse(),t.__actions__.push({func:kr,args:[Xi],thisArg:i}),new mt(t,this.__chain__)}return this.thru(Xi)}function kh(){return Wu(this.__wrapped__,this.__actions__)}var $h=Or(function(n,t,e){cn.call(n,e)?++n[e]:Wt(n,e,1)});function Gh(n,t,e){var r=H(n)?Js:Ol;return e&&Qn(n,t,e)&&(t=i),r(n,F(t,3))}function Hh(n,t){var e=H(n)?Yt:yu;return e(n,F(t,3))}var Zh=Yu(vo),zh=Yu(xo);function qh(n,t){return Gn($r(n,t),1)}function Kh(n,t){return Gn($r(n,t),Xn)}function Vh(n,t,e){return e=e===i?1:V(e),Gn($r(n,t),e)}function Io(n,t){var e=H(n)?xt:jt;return e(n,F(t,3))}function Eo(n,t){var e=H(n)?ga:mu;return e(n,F(t,3))}var Yh=Or(function(n,t,e){cn.call(n,e)?n[e].push(t):Wt(n,e,[t])});function Xh(n,t,e,r){n=it(n)?n:We(n),e=e&&!r?V(e):0;var s=n.length;return e<0&&(e=Fn(s+e,0)),qr(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&Ce(n,t,e)>-1}var Jh=J(function(n,t,e){var r=-1,s=typeof t=="function",o=it(n)?p(n.length):[];return jt(n,function(a){o[++r]=s?lt(t,a,e):Ke(a,t,e)}),o}),Qh=Or(function(n,t,e){Wt(n,e,t)});function $r(n,t){var e=H(n)?mn:Lu;return e(n,F(t,3))}function jh(n,t,e,r){return n==null?[]:(H(t)||(t=t==null?[]:[t]),e=r?i:e,H(e)||(e=e==null?[]:[e]),Tu(n,t,e))}var ng=Or(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]});function tg(n,t,e){var r=H(n)?ai:tu,s=arguments.length<3;return r(n,F(t,4),e,s,jt)}function eg(n,t,e){var r=H(n)?pa:tu,s=arguments.length<3;return r(n,F(t,4),e,s,mu)}function rg(n,t){var e=H(n)?Yt:yu;return e(n,Zr(F(t,3)))}function ig(n){var t=H(n)?_u:Xl;return t(n)}function sg(n,t,e){(e?Qn(n,t,e):t===i)?t=1:t=V(t);var r=H(n)?Ll:Jl;return r(n,t)}function ug(n){var t=H(n)?Ml:jl;return t(n)}function og(n){if(n==null)return 0;if(it(n))return qr(n)?Me(n):n.length;var t=qn(n);return t==Zn||t==at?n.size:Mi(n).length}function fg(n,t,e){var r=H(n)?li:nc;return e&&Qn(n,t,e)&&(t=i),r(n,F(t,3))}var ag=J(function(n,t){if(n==null)return[];var e=t.length;return e>1&&Qn(n,t[0],t[1])?t=[]:e>2&&Qn(t[0],t[1],t[2])&&(t=[t[0]]),Tu(n,Gn(t,1),[])}),Gr=Ha||function(){return $n.Date.now()};function lg(n,t){if(typeof t!="function")throw new wt(v);return n=V(n),function(){if(--n<1)return t.apply(this,arguments)}}function Co(n,t,e){return t=e?i:t,t=n&&t==null?n.length:t,Nt(n,vn,i,i,i,i,t)}function Lo(n,t){var e;if(typeof t!="function")throw new wt(v);return n=V(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Qi=J(function(n,t,e){var r=q;if(e.length){var s=Jt(e,Ue(Qi));r|=Sn}return Nt(n,r,t,e,s)}),Mo=J(function(n,t,e){var r=q|Q;if(e.length){var s=Jt(e,Ue(Mo));r|=Sn}return Nt(t,r,n,e,s)});function bo(n,t,e){t=e?i:t;var r=Nt(n,hn,i,i,i,i,i,t);return r.placeholder=bo.placeholder,r}function Ro(n,t,e){t=e?i:t;var r=Nt(n,gn,i,i,i,i,i,t);return r.placeholder=Ro.placeholder,r}function To(n,t,e){var r,s,o,a,l,h,m=0,y=!1,S=!1,C=!0;if(typeof n!="function")throw new wt(v);t=It(t)||0,An(e)&&(y=!!e.leading,S="maxWait"in e,o=S?Fn(It(e.maxWait)||0,t):o,C="trailing"in e?!!e.trailing:C);function R(Ln){var Tt=r,Zt=s;return r=s=i,m=Ln,a=n.apply(Zt,Tt),a}function B(Ln){return m=Ln,l=Qe(nn,t),y?R(Ln):a}function X(Ln){var Tt=Ln-h,Zt=Ln-m,Xo=t-Tt;return S?zn(Xo,o-Zt):Xo}function W(Ln){var Tt=Ln-h,Zt=Ln-m;return h===i||Tt>=t||Tt<0||S&&Zt>=o}function nn(){var Ln=Gr();if(W(Ln))return rn(Ln);l=Qe(nn,X(Ln))}function rn(Ln){return l=i,C&&r?R(Ln):(r=s=i,a)}function pt(){l!==i&&ku(l),m=0,r=h=s=l=i}function jn(){return l===i?a:rn(Gr())}function dt(){var Ln=Gr(),Tt=W(Ln);if(r=arguments,s=this,h=Ln,Tt){if(l===i)return B(h);if(S)return ku(l),l=Qe(nn,t),R(h)}return l===i&&(l=Qe(nn,t)),a}return dt.cancel=pt,dt.flush=jn,dt}var cg=J(function(n,t){return wu(n,1,t)}),hg=J(function(n,t,e){return wu(n,It(t)||0,e)});function gg(n){return Nt(n,Kn)}function Hr(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new wt(v);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=n.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new(Hr.Cache||Bt),e}Hr.Cache=Bt;function Zr(n){if(typeof n!="function")throw new wt(v);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function pg(n){return Lo(2,n)}var dg=tc(function(n,t){t=t.length==1&&H(t[0])?mn(t[0],ct(F())):mn(Gn(t,1),ct(F()));var e=t.length;return J(function(r){for(var s=-1,o=zn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return lt(n,this,r)})}),ji=J(function(n,t){var e=Jt(t,Ue(ji));return Nt(n,Sn,i,t,e)}),Oo=J(function(n,t){var e=Jt(t,Ue(Oo));return Nt(n,On,i,t,e)}),_g=kt(function(n,t){return Nt(n,Mn,i,i,i,t)});function vg(n,t){if(typeof n!="function")throw new wt(v);return t=t===i?t:V(t),J(n,t)}function xg(n,t){if(typeof n!="function")throw new wt(v);return t=t==null?0:Fn(V(t),0),J(function(e){var r=e[t],s=ee(e,0,t);return r&&Xt(s,r),lt(n,this,s)})}function wg(n,t,e){var r=!0,s=!0;if(typeof n!="function")throw new wt(v);return An(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),To(n,t,{leading:r,maxWait:t,trailing:s})}function mg(n){return Co(n,1)}function yg(n,t){return ji(Bi(t),n)}function Ag(){if(!arguments.length)return[];var n=arguments[0];return H(n)?n:[n]}function Sg(n){return yt(n,Z)}function Ig(n,t){return t=typeof t=="function"?t:i,yt(n,Z,t)}function Eg(n){return yt(n,L|Z)}function Cg(n,t){return t=typeof t=="function"?t:i,yt(n,L|Z,t)}function Lg(n,t){return t==null||xu(n,t,Wn(t))}function Rt(n,t){return n===t||n!==n&&t!==t}var Mg=Ur(Ei),bg=Ur(function(n,t){return n>=t}),me=Iu(function(){return arguments}())?Iu:function(n){return In(n)&&cn.call(n,"callee")&&!lu.call(n,"callee")},H=p.isArray,Rg=zs?ct(zs):Wl;function it(n){return n!=null&&zr(n.length)&&!Gt(n)}function Cn(n){return In(n)&&it(n)}function Tg(n){return n===!0||n===!1||In(n)&&Jn(n)==Dn}var re=za||ls,Og=qs?ct(qs):Nl;function Dg(n){return In(n)&&n.nodeType===1&&!je(n)}function Pg(n){if(n==null)return!0;if(it(n)&&(H(n)||typeof n=="string"||typeof n.splice=="function"||re(n)||Be(n)||me(n)))return!n.length;var t=qn(n);if(t==Zn||t==at)return!n.size;if(Je(n))return!Mi(n).length;for(var e in n)if(cn.call(n,e))return!1;return!0}function Fg(n,t){return Ve(n,t)}function Ug(n,t,e){e=typeof e=="function"?e:i;var r=e?e(n,t):i;return r===i?Ve(n,t,i,e):!!r}function ns(n){if(!In(n))return!1;var t=Jn(n);return t==Tn||t==Et||typeof n.message=="string"&&typeof n.name=="string"&&!je(n)}function Bg(n){return typeof n=="number"&&hu(n)}function Gt(n){if(!An(n))return!1;var t=Jn(n);return t==ft||t==fe||t==N||t==Qr}function Do(n){return typeof n=="number"&&n==V(n)}function zr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Rn}function An(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function In(n){return n!=null&&typeof n=="object"}var Po=Ks?ct(Ks):$l;function Wg(n,t){return n===t||Li(n,t,Zi(t))}function Ng(n,t,e){return e=typeof e=="function"?e:i,Li(n,t,Zi(t),e)}function kg(n){return Fo(n)&&n!=+n}function $g(n){if(Ic(n))throw new k(w);return Eu(n)}function Gg(n){return n===null}function Hg(n){return n==null}function Fo(n){return typeof n=="number"||In(n)&&Jn(n)==Ct}function je(n){if(!In(n)||Jn(n)!=tt)return!1;var t=xr(n);if(t===null)return!0;var e=cn.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&pr.call(e)==Na}var ts=Vs?ct(Vs):Gl;function Zg(n){return Do(n)&&n>=-Rn&&n<=Rn}var Uo=Ys?ct(Ys):Hl;function qr(n){return typeof n=="string"||!H(n)&&In(n)&&Jn(n)==le}function gt(n){return typeof n=="symbol"||In(n)&&Jn(n)==Se}var Be=Xs?ct(Xs):Zl;function zg(n){return n===i}function qg(n){return In(n)&&qn(n)==ce}function Kg(n){return In(n)&&Jn(n)==A}var Vg=Ur(bi),Yg=Ur(function(n,t){return n<=t});function Bo(n){if(!n)return[];if(it(n))return qr(n)?Mt(n):rt(n);if(ke&&n[ke])return La(n[ke]());var t=qn(n),e=t==Zn?_i:t==at?cr:We;return e(n)}function Ht(n){if(!n)return n===0?n:0;if(n=It(n),n===Xn||n===-Xn){var t=n<0?-1:1;return t*oe}return n===n?n:0}function V(n){var t=Ht(n),e=t%1;return t===t?e?t-e:t:0}function Wo(n){return n?_e(V(n),0,kn):0}function It(n){if(typeof n=="number")return n;if(gt(n))return ot;if(An(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=An(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=eu(n);var e=Rf.test(n);return e||Of.test(n)?la(n.slice(2),e?2:8):bf.test(n)?ot:+n}function No(n){return Dt(n,st(n))}function Xg(n){return n?_e(V(n),-Rn,Rn):n===0?n:0}function ln(n){return n==null?"":ht(n)}var Jg=Pe(function(n,t){if(Je(t)||it(t)){Dt(t,Wn(t),n);return}for(var e in t)cn.call(t,e)&&ze(n,e,t[e])}),ko=Pe(function(n,t){Dt(t,st(t),n)}),Kr=Pe(function(n,t,e,r){Dt(t,st(t),n,r)}),Qg=Pe(function(n,t,e,r){Dt(t,Wn(t),n,r)}),jg=kt(Ai);function np(n,t){var e=De(n);return t==null?e:vu(e,t)}var tp=J(function(n,t){n=dn(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&Qn(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],a=st(o),l=-1,h=a.length;++l<h;){var m=a[l],y=n[m];(y===i||Rt(y,Re[m])&&!cn.call(n,m))&&(n[m]=o[m])}return n}),ep=J(function(n){return n.push(i,eo),lt($o,i,n)});function rp(n,t){return Qs(n,F(t,3),Ot)}function ip(n,t){return Qs(n,F(t,3),Ii)}function sp(n,t){return n==null?n:Si(n,F(t,3),st)}function up(n,t){return n==null?n:Au(n,F(t,3),st)}function op(n,t){return n&&Ot(n,F(t,3))}function fp(n,t){return n&&Ii(n,F(t,3))}function ap(n){return n==null?[]:Mr(n,Wn(n))}function lp(n){return n==null?[]:Mr(n,st(n))}function es(n,t,e){var r=n==null?i:ve(n,t);return r===i?e:r}function cp(n,t){return n!=null&&so(n,t,Pl)}function rs(n,t){return n!=null&&so(n,t,Fl)}var hp=Ju(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=dr.call(t)),n[t]=e},ss(ut)),gp=Ju(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=dr.call(t)),cn.call(n,t)?n[t].push(e):n[t]=[e]},F),pp=J(Ke);function Wn(n){return it(n)?du(n):Mi(n)}function st(n){return it(n)?du(n,!0):zl(n)}function dp(n,t){var e={};return t=F(t,3),Ot(n,function(r,s,o){Wt(e,t(r,s,o),r)}),e}function _p(n,t){var e={};return t=F(t,3),Ot(n,function(r,s,o){Wt(e,s,t(r,s,o))}),e}var vp=Pe(function(n,t,e){br(n,t,e)}),$o=Pe(function(n,t,e,r){br(n,t,e,r)}),xp=kt(function(n,t){var e={};if(n==null)return e;var r=!1;t=mn(t,function(o){return o=te(o,n),r||(r=o.length>1),o}),Dt(n,Gi(n),e),r&&(e=yt(e,L|z|Z,hc));for(var s=t.length;s--;)Pi(e,t[s]);return e});function wp(n,t){return Go(n,Zr(F(t)))}var mp=kt(function(n,t){return n==null?{}:Kl(n,t)});function Go(n,t){if(n==null)return{};var e=mn(Gi(n),function(r){return[r]});return t=F(t),Ou(n,e,function(r,s){return t(r,s[0])})}function yp(n,t,e){t=te(t,n);var r=-1,s=t.length;for(s||(s=1,n=i);++r<s;){var o=n==null?i:n[Pt(t[r])];o===i&&(r=s,o=e),n=Gt(o)?o.call(n):o}return n}function Ap(n,t,e){return n==null?n:Ye(n,t,e)}function Sp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Ye(n,t,e,r)}var Ho=no(Wn),Zo=no(st);function Ip(n,t,e){var r=H(n),s=r||re(n)||Be(n);if(t=F(t,4),e==null){var o=n&&n.constructor;s?e=r?new o:[]:An(n)?e=Gt(o)?De(xr(n)):{}:e={}}return(s?xt:Ot)(n,function(a,l,h){return t(e,a,l,h)}),e}function Ep(n,t){return n==null?!0:Pi(n,t)}function Cp(n,t,e){return n==null?n:Bu(n,t,Bi(e))}function Lp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Bu(n,t,Bi(e),r)}function We(n){return n==null?[]:di(n,Wn(n))}function Mp(n){return n==null?[]:di(n,st(n))}function bp(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=It(e),e=e===e?e:0),t!==i&&(t=It(t),t=t===t?t:0),_e(It(n),t,e)}function Rp(n,t,e){return t=Ht(t),e===i?(e=t,t=0):e=Ht(e),n=It(n),Ul(n,t,e)}function Tp(n,t,e){if(e&&typeof e!="boolean"&&Qn(n,t,e)&&(t=e=i),e===i&&(typeof t=="boolean"?(e=t,t=i):typeof n=="boolean"&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Ht(n),t===i?(t=n,n=0):t=Ht(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=gu();return zn(n+s*(t-n+aa("1e-"+((s+"").length-1))),t)}return Ti(n,t)}var Op=Fe(function(n,t,e){return t=t.toLowerCase(),n+(e?zo(t):t)});function zo(n){return is(ln(n).toLowerCase())}function qo(n){return n=ln(n),n&&n.replace(Pf,Aa).replace(jf,"")}function Dp(n,t,e){n=ln(n),t=ht(t);var r=n.length;e=e===i?r:_e(V(e),0,r);var s=e;return e-=t.length,e>=0&&n.slice(e,s)==t}function Pp(n){return n=ln(n),n&&pf.test(n)?n.replace(As,Sa):n}function Fp(n){return n=ln(n),n&&mf.test(n)?n.replace(jr,"\\$&"):n}var Up=Fe(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Bp=Fe(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),Wp=Vu("toLowerCase");function Np(n,t,e){n=ln(n),t=V(t);var r=t?Me(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return Fr(Ar(s),e)+n+Fr(yr(s),e)}function kp(n,t,e){n=ln(n),t=V(t);var r=t?Me(n):0;return t&&r<t?n+Fr(t-r,e):n}function $p(n,t,e){n=ln(n),t=V(t);var r=t?Me(n):0;return t&&r<t?Fr(t-r,e)+n:n}function Gp(n,t,e){return e||t==null?t=0:t&&(t=+t),Ya(ln(n).replace(ni,""),t||0)}function Hp(n,t,e){return(e?Qn(n,t,e):t===i)?t=1:t=V(t),Oi(ln(n),t)}function Zp(){var n=arguments,t=ln(n[0]);return n.length<3?t:t.replace(n[1],n[2])}var zp=Fe(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()});function qp(n,t,e){return e&&typeof e!="number"&&Qn(n,t,e)&&(t=e=i),e=e===i?kn:e>>>0,e?(n=ln(n),n&&(typeof t=="string"||t!=null&&!ts(t))&&(t=ht(t),!t&&Le(n))?ee(Mt(n),0,e):n.split(t,e)):[]}var Kp=Fe(function(n,t,e){return n+(e?" ":"")+is(t)});function Vp(n,t,e){return n=ln(n),e=e==null?0:_e(V(e),0,n.length),t=ht(t),n.slice(e,e+t.length)==t}function Yp(n,t,e){var r=u.templateSettings;e&&Qn(n,t,e)&&(t=i),n=ln(n),t=Kr({},t,r,to);var s=Kr({},t.imports,r.imports,to),o=Wn(s),a=di(s,o),l,h,m=0,y=t.interpolate||ur,S="__p += '",C=vi((t.escape||ur).source+"|"+y.source+"|"+(y===Ss?Mf:ur).source+"|"+(t.evaluate||ur).source+"|$","g"),R="//# sourceURL="+(cn.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ia+"]")+`
`;n.replace(C,function(W,nn,rn,pt,jn,dt){return rn||(rn=pt),S+=n.slice(m,dt).replace(Ff,Ia),nn&&(l=!0,S+=`' +
__e(`+nn+`) +
'`),jn&&(h=!0,S+=`';
`+jn+`;
__p += '`),rn&&(S+=`' +
((__t = (`+rn+`)) == null ? '' : __t) +
'`),m=dt+W.length,W}),S+=`';
`;var B=cn.call(t,"variable")&&t.variable;if(!B)S=`with (obj) {
`+S+`
}
`;else if(Cf.test(B))throw new k(O);S=(h?S.replace(Kt,""):S).replace(Ie,"$1").replace(Vt,"$1;"),S="function("+(B||"obj")+`) {
`+(B?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+S+`return __p
}`;var X=Vo(function(){return fn(o,R+"return "+S).apply(i,a)});if(X.source=S,ns(X))throw X;return X}function Xp(n){return ln(n).toLowerCase()}function Jp(n){return ln(n).toUpperCase()}function Qp(n,t,e){if(n=ln(n),n&&(e||t===i))return eu(n);if(!n||!(t=ht(t)))return n;var r=Mt(n),s=Mt(t),o=ru(r,s),a=iu(r,s)+1;return ee(r,o,a).join("")}function jp(n,t,e){if(n=ln(n),n&&(e||t===i))return n.slice(0,uu(n)+1);if(!n||!(t=ht(t)))return n;var r=Mt(n),s=iu(r,Mt(t))+1;return ee(r,0,s).join("")}function nd(n,t,e){if(n=ln(n),n&&(e||t===i))return n.replace(ni,"");if(!n||!(t=ht(t)))return n;var r=Mt(n),s=ru(r,Mt(t));return ee(r,s).join("")}function td(n,t){var e=Ft,r=qt;if(An(t)){var s="separator"in t?t.separator:s;e="length"in t?V(t.length):e,r="omission"in t?ht(t.omission):r}n=ln(n);var o=n.length;if(Le(n)){var a=Mt(n);o=a.length}if(e>=o)return n;var l=e-Me(r);if(l<1)return r;var h=a?ee(a,0,l).join(""):n.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),ts(s)){if(n.slice(l).search(s)){var m,y=h;for(s.global||(s=vi(s.source,ln(Is.exec(s))+"g")),s.lastIndex=0;m=s.exec(y);)var S=m.index;h=h.slice(0,S===i?l:S)}}else if(n.indexOf(ht(s),l)!=l){var C=h.lastIndexOf(s);C>-1&&(h=h.slice(0,C))}return h+r}function ed(n){return n=ln(n),n&&gf.test(n)?n.replace(ys,Ta):n}var rd=Fe(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),is=Vu("toUpperCase");function Ko(n,t,e){return n=ln(n),t=e?i:t,t===i?Ca(n)?Pa(n):va(n):n.match(t)||[]}var Vo=J(function(n,t){try{return lt(n,i,t)}catch(e){return ns(e)?e:new k(e)}}),id=kt(function(n,t){return xt(t,function(e){e=Pt(e),Wt(n,e,Qi(n[e],n))}),n});function sd(n){var t=n==null?0:n.length,e=F();return n=t?mn(n,function(r){if(typeof r[1]!="function")throw new wt(v);return[e(r[0]),r[1]]}):[],J(function(r){for(var s=-1;++s<t;){var o=n[s];if(lt(o[0],this,r))return lt(o[1],this,r)}})}function ud(n){return Tl(yt(n,L))}function ss(n){return function(){return n}}function od(n,t){return n==null||n!==n?t:n}var fd=Xu(),ad=Xu(!0);function ut(n){return n}function us(n){return Cu(typeof n=="function"?n:yt(n,L))}function ld(n){return Mu(yt(n,L))}function cd(n,t){return bu(n,yt(t,L))}var hd=J(function(n,t){return function(e){return Ke(e,n,t)}}),gd=J(function(n,t){return function(e){return Ke(n,e,t)}});function os(n,t,e){var r=Wn(t),s=Mr(t,r);e==null&&!(An(t)&&(s.length||!r.length))&&(e=t,t=n,n=this,s=Mr(t,Wn(t)));var o=!(An(e)&&"chain"in e)||!!e.chain,a=Gt(n);return xt(s,function(l){var h=t[l];n[l]=h,a&&(n.prototype[l]=function(){var m=this.__chain__;if(o||m){var y=n(this.__wrapped__),S=y.__actions__=rt(this.__actions__);return S.push({func:h,args:arguments,thisArg:n}),y.__chain__=m,y}return h.apply(n,Xt([this.value()],arguments))})}),n}function pd(){return $n._===this&&($n._=ka),this}function fs(){}function dd(n){return n=V(n),J(function(t){return Ru(t,n)})}var _d=Ni(mn),vd=Ni(Js),xd=Ni(li);function Yo(n){return qi(n)?ci(Pt(n)):Vl(n)}function wd(n){return function(t){return n==null?i:ve(n,t)}}var md=Qu(),yd=Qu(!0);function as(){return[]}function ls(){return!1}function Ad(){return{}}function Sd(){return""}function Id(){return!0}function Ed(n,t){if(n=V(n),n<1||n>Rn)return[];var e=kn,r=zn(n,kn);t=F(t),n-=kn;for(var s=pi(r,t);++e<n;)t(e);return s}function Cd(n){return H(n)?mn(n,Pt):gt(n)?[n]:rt(po(ln(n)))}function Ld(n){var t=++Wa;return ln(n)+t}var Md=Pr(function(n,t){return n+t},0),bd=ki("ceil"),Rd=Pr(function(n,t){return n/t},1),Td=ki("floor");function Od(n){return n&&n.length?Lr(n,ut,Ei):i}function Dd(n,t){return n&&n.length?Lr(n,F(t,2),Ei):i}function Pd(n){return nu(n,ut)}function Fd(n,t){return nu(n,F(t,2))}function Ud(n){return n&&n.length?Lr(n,ut,bi):i}function Bd(n,t){return n&&n.length?Lr(n,F(t,2),bi):i}var Wd=Pr(function(n,t){return n*t},1),Nd=ki("round"),kd=Pr(function(n,t){return n-t},0);function $d(n){return n&&n.length?gi(n,ut):0}function Gd(n,t){return n&&n.length?gi(n,F(t,2)):0}return u.after=lg,u.ary=Co,u.assign=Jg,u.assignIn=ko,u.assignInWith=Kr,u.assignWith=Qg,u.at=jg,u.before=Lo,u.bind=Qi,u.bindAll=id,u.bindKey=Mo,u.castArray=Ag,u.chain=So,u.chunk=Tc,u.compact=Oc,u.concat=Dc,u.cond=sd,u.conforms=ud,u.constant=ss,u.countBy=$h,u.create=np,u.curry=bo,u.curryRight=Ro,u.debounce=To,u.defaults=tp,u.defaultsDeep=ep,u.defer=cg,u.delay=hg,u.difference=Pc,u.differenceBy=Fc,u.differenceWith=Uc,u.drop=Bc,u.dropRight=Wc,u.dropRightWhile=Nc,u.dropWhile=kc,u.fill=$c,u.filter=Hh,u.flatMap=qh,u.flatMapDeep=Kh,u.flatMapDepth=Vh,u.flatten=wo,u.flattenDeep=Gc,u.flattenDepth=Hc,u.flip=gg,u.flow=fd,u.flowRight=ad,u.fromPairs=Zc,u.functions=ap,u.functionsIn=lp,u.groupBy=Yh,u.initial=qc,u.intersection=Kc,u.intersectionBy=Vc,u.intersectionWith=Yc,u.invert=hp,u.invertBy=gp,u.invokeMap=Jh,u.iteratee=us,u.keyBy=Qh,u.keys=Wn,u.keysIn=st,u.map=$r,u.mapKeys=dp,u.mapValues=_p,u.matches=ld,u.matchesProperty=cd,u.memoize=Hr,u.merge=vp,u.mergeWith=$o,u.method=hd,u.methodOf=gd,u.mixin=os,u.negate=Zr,u.nthArg=dd,u.omit=xp,u.omitBy=wp,u.once=pg,u.orderBy=jh,u.over=_d,u.overArgs=dg,u.overEvery=vd,u.overSome=xd,u.partial=ji,u.partialRight=Oo,u.partition=ng,u.pick=mp,u.pickBy=Go,u.property=Yo,u.propertyOf=wd,u.pull=jc,u.pullAll=yo,u.pullAllBy=nh,u.pullAllWith=th,u.pullAt=eh,u.range=md,u.rangeRight=yd,u.rearg=_g,u.reject=rg,u.remove=rh,u.rest=vg,u.reverse=Xi,u.sampleSize=sg,u.set=Ap,u.setWith=Sp,u.shuffle=ug,u.slice=ih,u.sortBy=ag,u.sortedUniq=ch,u.sortedUniqBy=hh,u.split=qp,u.spread=xg,u.tail=gh,u.take=ph,u.takeRight=dh,u.takeRightWhile=_h,u.takeWhile=vh,u.tap=Oh,u.throttle=wg,u.thru=kr,u.toArray=Bo,u.toPairs=Ho,u.toPairsIn=Zo,u.toPath=Cd,u.toPlainObject=No,u.transform=Ip,u.unary=mg,u.union=xh,u.unionBy=wh,u.unionWith=mh,u.uniq=yh,u.uniqBy=Ah,u.uniqWith=Sh,u.unset=Ep,u.unzip=Ji,u.unzipWith=Ao,u.update=Cp,u.updateWith=Lp,u.values=We,u.valuesIn=Mp,u.without=Ih,u.words=Ko,u.wrap=yg,u.xor=Eh,u.xorBy=Ch,u.xorWith=Lh,u.zip=Mh,u.zipObject=bh,u.zipObjectDeep=Rh,u.zipWith=Th,u.entries=Ho,u.entriesIn=Zo,u.extend=ko,u.extendWith=Kr,os(u,u),u.add=Md,u.attempt=Vo,u.camelCase=Op,u.capitalize=zo,u.ceil=bd,u.clamp=bp,u.clone=Sg,u.cloneDeep=Eg,u.cloneDeepWith=Cg,u.cloneWith=Ig,u.conformsTo=Lg,u.deburr=qo,u.defaultTo=od,u.divide=Rd,u.endsWith=Dp,u.eq=Rt,u.escape=Pp,u.escapeRegExp=Fp,u.every=Gh,u.find=Zh,u.findIndex=vo,u.findKey=rp,u.findLast=zh,u.findLastIndex=xo,u.findLastKey=ip,u.floor=Td,u.forEach=Io,u.forEachRight=Eo,u.forIn=sp,u.forInRight=up,u.forOwn=op,u.forOwnRight=fp,u.get=es,u.gt=Mg,u.gte=bg,u.has=cp,u.hasIn=rs,u.head=mo,u.identity=ut,u.includes=Xh,u.indexOf=zc,u.inRange=Rp,u.invoke=pp,u.isArguments=me,u.isArray=H,u.isArrayBuffer=Rg,u.isArrayLike=it,u.isArrayLikeObject=Cn,u.isBoolean=Tg,u.isBuffer=re,u.isDate=Og,u.isElement=Dg,u.isEmpty=Pg,u.isEqual=Fg,u.isEqualWith=Ug,u.isError=ns,u.isFinite=Bg,u.isFunction=Gt,u.isInteger=Do,u.isLength=zr,u.isMap=Po,u.isMatch=Wg,u.isMatchWith=Ng,u.isNaN=kg,u.isNative=$g,u.isNil=Hg,u.isNull=Gg,u.isNumber=Fo,u.isObject=An,u.isObjectLike=In,u.isPlainObject=je,u.isRegExp=ts,u.isSafeInteger=Zg,u.isSet=Uo,u.isString=qr,u.isSymbol=gt,u.isTypedArray=Be,u.isUndefined=zg,u.isWeakMap=qg,u.isWeakSet=Kg,u.join=Xc,u.kebabCase=Up,u.last=St,u.lastIndexOf=Jc,u.lowerCase=Bp,u.lowerFirst=Wp,u.lt=Vg,u.lte=Yg,u.max=Od,u.maxBy=Dd,u.mean=Pd,u.meanBy=Fd,u.min=Ud,u.minBy=Bd,u.stubArray=as,u.stubFalse=ls,u.stubObject=Ad,u.stubString=Sd,u.stubTrue=Id,u.multiply=Wd,u.nth=Qc,u.noConflict=pd,u.noop=fs,u.now=Gr,u.pad=Np,u.padEnd=kp,u.padStart=$p,u.parseInt=Gp,u.random=Tp,u.reduce=tg,u.reduceRight=eg,u.repeat=Hp,u.replace=Zp,u.result=yp,u.round=Nd,u.runInContext=c,u.sample=ig,u.size=og,u.snakeCase=zp,u.some=fg,u.sortedIndex=sh,u.sortedIndexBy=uh,u.sortedIndexOf=oh,u.sortedLastIndex=fh,u.sortedLastIndexBy=ah,u.sortedLastIndexOf=lh,u.startCase=Kp,u.startsWith=Vp,u.subtract=kd,u.sum=$d,u.sumBy=Gd,u.template=Yp,u.times=Ed,u.toFinite=Ht,u.toInteger=V,u.toLength=Wo,u.toLower=Xp,u.toNumber=It,u.toSafeInteger=Xg,u.toString=ln,u.toUpper=Jp,u.trim=Qp,u.trimEnd=jp,u.trimStart=nd,u.truncate=td,u.unescape=ed,u.uniqueId=Ld,u.upperCase=rd,u.upperFirst=is,u.each=Io,u.eachRight=Eo,u.first=mo,os(u,function(){var n={};return Ot(u,function(t,e){cn.call(u.prototype,e)||(n[e]=t)}),n}(),{chain:!1}),u.VERSION=g,xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){u[n].placeholder=u}),xt(["drop","take"],function(n,t){en.prototype[n]=function(e){e=e===i?1:Fn(V(e),0);var r=this.__filtered__&&!t?new en(this):this.clone();return r.__filtered__?r.__takeCount__=zn(e,r.__takeCount__):r.__views__.push({size:zn(e,kn),type:n+(r.__dir__<0?"Right":"")}),r},en.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),xt(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e==Vn||e==bn;en.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:F(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),xt(["head","last"],function(n,t){var e="take"+(t?"Right":"");en.prototype[n]=function(){return this[e](1).value()[0]}}),xt(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");en.prototype[n]=function(){return this.__filtered__?new en(this):this[e](1)}}),en.prototype.compact=function(){return this.filter(ut)},en.prototype.find=function(n){return this.filter(n).head()},en.prototype.findLast=function(n){return this.reverse().find(n)},en.prototype.invokeMap=J(function(n,t){return typeof n=="function"?new en(this):this.map(function(e){return Ke(e,n,t)})}),en.prototype.reject=function(n){return this.filter(Zr(F(n)))},en.prototype.slice=function(n,t){n=V(n);var e=this;return e.__filtered__&&(n>0||t<0)?new en(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(t=V(t),e=t<0?e.dropRight(-t):e.take(t-n)),e)},en.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},en.prototype.toArray=function(){return this.take(kn)},Ot(en.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=u[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);s&&(u.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof en,m=l[0],y=h||H(a),S=function(nn){var rn=s.apply(u,Xt([nn],l));return r&&C?rn[0]:rn};y&&e&&typeof m=="function"&&m.length!=1&&(h=y=!1);var C=this.__chain__,R=!!this.__actions__.length,B=o&&!C,X=h&&!R;if(!o&&y){a=X?a:new en(this);var W=n.apply(a,l);return W.__actions__.push({func:kr,args:[S],thisArg:i}),new mt(W,C)}return B&&X?n.apply(this,l):(W=this.thru(S),B?r?W.value()[0]:W.value():W)})}),xt(["pop","push","shift","sort","splice","unshift"],function(n){var t=hr[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);u.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(H(o)?o:[],s)}return this[e](function(a){return t.apply(H(a)?a:[],s)})}}),Ot(en.prototype,function(n,t){var e=u[t];if(e){var r=e.name+"";cn.call(Oe,r)||(Oe[r]=[]),Oe[r].push({name:t,func:e})}}),Oe[Dr(i,Q).name]=[{name:"wrapper",func:i}],en.prototype.clone=el,en.prototype.reverse=rl,en.prototype.value=il,u.prototype.at=Dh,u.prototype.chain=Ph,u.prototype.commit=Fh,u.prototype.next=Uh,u.prototype.plant=Wh,u.prototype.reverse=Nh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=kh,u.prototype.first=u.prototype.head,ke&&(u.prototype[ke]=Bh),u},be=Fa();he?((he.exports=be)._=be,ui._=be):$n._=be}).call(nr)})(Jr,Jr.exports);Jr.exports;const P0="/assets/top_view-4gr4hmiW.svg",F0="/assets/redTractor-Cl-uV8Ra.svg",U0="/assets/yellowTractor-DVC8ngGG.svg",B0="/assets/blackTractor-DklC2nUm.svg",W0="AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA";function N0({showCard:I,loadingVehicle:f,vehicleData:i}){const{center:g,selectedParameterList:x,selectedVehicle:w,vehicleList:v,zoom:O,icons:d,locationData:T,placesData:U,imeiNumbers:L,onlineVehicle:z,loading:Z,services_loading:j}=ue(A=>A.liveMap),{mode:on,styles:q,vehicles_details:Q}=ue(A=>A.dashboard),wn=Y.useRef(null),{collapsed:hn}=ue(A=>A.auth),[gn,Sn]=Y.useState(null),[On,vn]=Y.useState(""),[Mn,Kn]=Y.useState([]),[Ft,qt]=Y.useState(),[an,pn]=Y.useState(null);Y.useState("");const[Vn,Yn]=Y.useState(),[bn,Xn]=Y.useState(!1),[Rn,oe]=Y.useState(null),ot=ff(),kn={},$=Y.useRef([]),sn=Y.useRef(null),Un=Y.useRef({}),{isLoaded:Bn,loadError:nt}=o0({googleMapsApiKey:`${W0}`,loadingElement:P.jsx(e0,{})});Y.useEffect(()=>{Bn&&Sn(window.google.maps)},[Bn]),Y.useEffect(()=>{},[O]),Y.useEffect(()=>{var A,E,b,D;if(Object.keys(w).length>0){const tn=((Rn==null?void 0:Rn.length)>0?Rn:T).filter(K=>{var un;return((un=K==null?void 0:K.latestDocument)==null?void 0:un.imei)===(w==null?void 0:w.imei)});if(tn.length>0){Kn(tn);const K={lat:(E=(A=tn[0])==null?void 0:A.latestDocument)==null?void 0:E.lat,lng:(D=(b=tn[0])==null?void 0:b.latestDocument)==null?void 0:D.lng};ot(Xr(K))}}},[T,w]),Y.useEffect(()=>{if(!(Object.keys(w).length>0)){const A=T.filter(E=>i.some(b=>b.value===E.latestDocument.imei));Kn(A),oe(A)}},[T,w,i]),Y.useEffect(()=>{var A,E,b,D;if(Object.keys(w).length>0){const tn=((Rn==null?void 0:Rn.length)>0?Rn:T).filter(K=>{var un;return((un=K==null?void 0:K.latestDocument)==null?void 0:un.imei)===(w==null?void 0:w.imei)});if(tn.length>0){Kn(tn);const K={lat:(E=(A=tn[0])==null?void 0:A.latestDocument)==null?void 0:E.lat,lng:(D=(b=tn[0])==null?void 0:b.latestDocument)==null?void 0:D.lng};ot(Xr(K))}}else{const G=T.filter(tn=>i.some(K=>K.value===tn.latestDocument.imei));Kn(G),oe(G)}},[T,w]),Y.useEffect(()=>{qt(x)},[x]),Y.useEffect(()=>{ot(zd({})),Xn(!0)},[w]),Y.useEffect(()=>{if(console.log("before: ",Mn),!gn)return;const A=sn.current;let E=null;return(async()=>{console.log("after: ",Mn);const D=await N(Mn,A);E&&E.clearMarkers(),E=Ae(D,A),hs.on("locationinfo",G=>{console.log("locationinfo: ",G),ir(G,$),oe(tn=>{const K=Array.isArray(tn)?tn:[],un=K.findIndex(yn=>Number(yn.latestDocument.imei)===Number(G.imei));if(un!==-1){const yn=[...K];return yn[un]={...yn[un],latestDocument:{...yn[un].latestDocument,...G}},yn}else return[...K,{_id:G.imei,latestDocument:G}]})})})(),()=>{E&&E.clearMarkers(),Object.keys(Un.current).forEach(D=>cancelAnimationFrame(Un.current[D])),hs.off("locationinfo")}},[gn,Mn,hs,Ft,$,T]);const N=(A,E)=>A.map(b=>{const D=b.latestDocument.imei,G=$.current[D]||Dn(b,E);return $.current[D]&&Hn(b,G),G}),Dn=(A,E)=>{const b=A.latestDocument.imei,D=new gn.Marker({position:{lat:A.latestDocument.lat,lng:A.latestDocument.lng},map:E,icon:Et(A)});return D.addListener("click",()=>Zn(A,D,E)),$.current[b]=D,D},Hn=async(A,E)=>{var un;const b=E.getPosition(),D=((un=E.getIcon())==null?void 0:un.rotation)||0,G={lat:A.latestDocument.lat,lng:A.latestDocument.lng},tn=A.latestDocument.heading||0;Ct(E,b,G,D,tn);const K=await Et(A);E.setIcon(K)},Et=async A=>{var K,un,yn,En,et;const E=(K=A==null?void 0:A.latestDocument)==null?void 0:K.imei;Qr(E);const b=at(A==null?void 0:A.latestDocument),D=((un=A==null?void 0:A.latestDocument)==null?void 0:un.heading)||0;return Tn((yn=A==null?void 0:A.latestDocument)==null?void 0:yn.imei)&&ft((En=A==null?void 0:A.latestDocument)==null?void 0:En.imei),{url:await fe(b,D),fillOpacity:2,strokeWeight:1,scale:4.5,rotation:(et=A==null?void 0:A.latestDocument)==null?void 0:et.heading,size:new gn.Size(30,30),scaledSize:new gn.Size(30,30)}},Tn=A=>z.includes(Number(A)),ft=A=>T==null?void 0:T.some(E=>Number(E.latestDocument.imei)===Number(A)&&E.latestDocument.speed>0&&(E.latestDocument.ignition===!0||E.latestDocument.ignition===1)),fe=(A,E,b,D=80)=>{const G=`${A}-${E}-${D}-${b}`;if(kn[G])return Promise.resolve(kn[G]);const tn=document.createElement("canvas"),K=tn.getContext("2d");tn.width=D,tn.height=D;const un=new Image;return un.src=A,new Promise(yn=>{un.onload=()=>{if(K.clearRect(0,0,tn.width,tn.height),K.translate(D/2,D/2),K.rotate(E*Math.PI/180),K.translate(-D/2,-D/2),K.drawImage(un,0,0,D,D),b){const Lt=D-30-5,Kt=D-30-5;K.beginPath(),K.arc(Lt,Kt,30/2,0,Math.PI*2),K.fillStyle=b,K.fill()}const En=tn.toDataURL("image/png");kn[G]=En,yn(En)},un.onerror=En=>{console.error("Error loading image for rotation:",En),yn(A)}})},Zn=(A,E,b)=>{le(A.latestDocument._id,A,E,b),Se(A.latestDocument.imei)},Ct=(A,E,b,D,G)=>{const K=performance.now(),un=()=>{const yn=performance.now()-K,En=Math.min(yn/500,1),et=E.lat()+En*(b.lat-E.lat()),Lt=E.lng()+En*(b.lng-E.lng()),Kt=(G-D+360)%360-180,Ie=(D+Kt*En+360)%360;A.setPosition({lat:et,lng:Lt});const Vt=A.getIcon();Vt&&typeof Vt=="object"&&A.setIcon({...Vt,rotation:Ie}),En<1?Un.current[A.getPosition()]=requestAnimationFrame(un):(A.setPosition(b),Vt&&typeof Vt=="object"&&A.setIcon({...Vt,rotation:G}),delete Un.current[A.getPosition()])};Un.current[A.getPosition()]=requestAnimationFrame(un)},Ae=(A,E)=>new D0({map:E,markers:A,renderer:{render:({count:b,position:D})=>tt(b,D)}}),tt=(A,E)=>{const b=40+Math.min(A*2,40),D=30;let G;return A<10?G={start:"#76c7c0",end:"#34a853"}:A<50?G={start:"#fbbc05",end:"#f2994a"}:G={start:"#f45c42",end:"#d32f2f"},new gn.Marker({position:E,icon:{url:`data:image/svg+xml,${encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="${b}" height="${b}" viewBox="0 0 100 100">
            <defs>
              <radialGradient id="gradient" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="${G.start}" />
                <stop offset="100%" stop-color="${G.end}" />
              </radialGradient>
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.5)" />
              </filter>
            </defs>
            <!-- Outer Pulsating Ring -->
            <circle cx="50" cy="50" r="48" fill="url(#gradient)" filter="url(#shadow)" stroke="#ffffff" stroke-width="3" />
            <!-- Decorative Inner Ring -->
            <circle cx="50" cy="50" r="38" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 2" />
            <!-- Star Decoration -->
            <polygon points="50,15 54,38 70,38 57,50 62,68 50,57 38,68 43,50 30,38 46,38" fill="#ffffff" opacity="0.4" />
            <!-- Count Text -->
            <text x="50" y="55" font-size="${D}" fill="black" text-anchor="middle" font-family="'Courier New', monospace" font-weight="bold">
              ${A}
            </text>
          </svg>
        `)}`,scaledSize:new gn.Size(b,b)},label:null})},ir=async(A,E,b)=>{var tn;const D=A.imei,G=E.current[D];if(G){const K=G.getPosition(),un=((tn=G.getIcon())==null?void 0:tn.rotation)||0,yn={lat:A.lat,lng:A.lng},En=A.heading||0;Ct(G,K,yn,un,En);const et=await Et({latestDocument:A});G.setIcon(et)}},Qr=A=>{if(!A)return"motorBike";const E=ae(A);return E||console.error(`No vehicle type found for IMEI: ${A}, defaulting to motorBike`),E||"motorBike"},ae=A=>{if(!Q||Q.length===0)return console.error("vehicles_details is not available"),null;const E=Q.find(b=>(b==null?void 0:b.value)===A&&(b==null?void 0:b.vehilce_type));return E||console.error(`No vehicle found for IMEI: ${A}`),E?E.vehilce_type:null},at=A=>{let{speed:E,ignition:b,imei:D}=A;if(Tn(D)){if(!b)return F0;if(E>0&&b)return P0;if(E<=0&&b)return U0}else return B0},le=(A,E,b,D)=>{var yn,En,et;ot(qd(E.latestDocument.imei));const G={lat:(yn=E==null?void 0:E.latestDocument)==null?void 0:yn.lat,lng:(En=E==null?void 0:E.latestDocument)==null?void 0:En.lng};ot(Xr(G)),ot(Kd(15)),wn.current||(wn.current=new gn.InfoWindow);const tn=wn.current,un=`
      <div>
        <h3>Registration No: ${((et=v.find(Lt=>{var Kt,Ie;return((Kt=Lt==null?void 0:Lt.imei[0])==null?void 0:Kt.mac_id)===((Ie=E==null?void 0:E.latestDocument)==null?void 0:Ie.imei)}))==null?void 0:et.registration_id)||""}</h3>
      </div>
    `;an===A?(tn.close(),pn(null)):(tn.setContent(un),tn.open(D,b),pn(A))},Se=A=>{const E=Q&&(Q==null?void 0:Q.length)>0&&Q.find(b=>(b==null?void 0:b.value)===A&&b);Yn(E||null)},sr=()=>{Xn(!bn)};if(nt)return"Error loading maps";if(!Bn)return"Loading maps";if(!gn)return null;const ce={height:"93vh",width:"100%",transition:"transform 0.5s ease-in-out"};return P.jsxs(P.Fragment,{children:[P.jsx(Nn,{sx:{position:"absolute",top:"780px",left:hn?"74px":"250px",zIndex:1,background:uf.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:P.jsxs(of,{sx:{color:"white"},onClick:sr,children:[bn?"Hide":"Show"," Vehicle Info",P.jsx(l0,{})]})}),bn===!0&&P.jsx(w0,{handleVehicleInfo:sr,udpatedParams:Rn}),P.jsxs(f0,{id:"map",mapContainerStyle:ce,zoom:O,center:g,onLoad:A=>{sn.current=A},options:{styles:on?q:""},children:[Object.keys(w).length>0&&P.jsx(r0,{setPlace:vn,place:On}),j||f?P.jsx(Nn,{sx:{position:"absolute",top:"50%",left:"50%"},children:P.jsx(g0,{})}):U&&U.length>0&&U.map((A,E)=>{var b,D;return P.jsx(a0,{position:{lat:parseFloat((b=A==null?void 0:A.location)==null?void 0:b.lat),lng:parseFloat((D=A==null?void 0:A.location)==null?void 0:D.lng)},animation:window.google.maps.Animation.DROP,icon:{path:d[`${On}`],fillOpacity:2,strokeWeight:1,scale:1,fillColor:"orange"}},E)})]})]})}function l_(){const{locationData:I,selectedVehicle:f,selectedParameterList:i,onlineVehicle:g}=ue($=>$.liveMap),{mode:x,selectedVehicleGroup:w}=ue($=>$.dashboard),v=t0(x),[O,d]=Y.useState([]),[T,U]=Y.useState(""),[L,z]=Y.useState(""),[Z,j]=Y.useState(""),[on,q]=Y.useState(""),{w_customer_id:Q}=ue($=>$.auth),[wn,hn]=Y.useState(),[gn,Sn]=Y.useState(!1),[On,vn]=Y.useState(!1),[Mn,Kn]=Y.useState([]),[Ft,qt]=Y.useState(!0),[an,pn]=Y.useState(!1),[Vn,Yn]=Y.useState(!1);let bn=ff();Y.useEffect(()=>{bn(Vd({}))},[]),Y.useEffect(()=>{Xn()},[]),Y.useEffect(()=>{var $;if(Object.keys(f).length>0){const sn=(I==null?void 0:I.length)>0&&(I==null?void 0:I.filter(N=>Number(N.latestDocument.imei)===Number(f==null?void 0:f.imei)));if((sn==null?void 0:sn.length)<=0){cs.error("Data not available for this vehicle",{id:"clipboard"});return}const{lat:Un,lng:Bn}=(($=sn==null?void 0:sn[0])==null?void 0:$.latestDocument)??{},nt={lat:Un||Qo.lat,lng:Bn||Qo.lat};bn(Xr(nt))}},[f,I]),Y.useEffect(()=>{Kn([]),bn(Jo([{reg_id:"",imei:"",params:[]}]))},[f]);const Xn=async()=>{try{pn(!0);let $=[],sn=[];const Un=await bn(Yd({w_customer_id:Q}));if(Array.isArray(Un.payload)){Un.payload.forEach(N=>{var Dn,Hn,Et,Tn;Array.isArray(N.imei)&&N.imei.length>0&&((Dn=N.imei[0])!=null&&Dn.mac_id)?($.push({id:N.id,label:N.registration_id,value:(Hn=N.imei[0])==null?void 0:Hn.mac_id,vehilce_type:N==null?void 0:N.segment,chassis_no:N==null?void 0:N.chassis_no,engine_no:N==null?void 0:N.engine_no,workShop:N==null?void 0:N.workshop,registration_id:N==null?void 0:N.registration_id,sell_date:N==null?void 0:N.sell_date,customer_name:N==null?void 0:N.customer_name,vehicle_model:(Et=N==null?void 0:N.vehicle_model)==null?void 0:Et.name,vehicle_group:N==null?void 0:N.vehicle_group}),sn.push((Tn=N.imei[0])==null?void 0:Tn.mac_id)):console.error("IMEI data not found for item:",N)});const Bn="one",nt=sn;sn.length>0&&bn(Xd({type:Bn,imei:nt})),d($),bn(Jd($)),bn(Qd({w_customer_id:Q})),pn(!1)}else pn(!1),console.error("Unexpected data format:",Un),cs.error("Unexpected data format:")}catch($){console.error("Error fetching vehicle data:",$),cs.error(`Error fetching vehicle data: ${$}`)}},Rn=async $=>{const{label:sn,imei:Un,id:Bn,reg_id:nt,checked:N}=$;hn(Tn=>Tn.map(ft=>ft.id===Bn?{...ft,checked:!N}:ft));let Dn=[...Mn],Hn=[...Mn];if(!N)I.forEach(Tn=>{Tn.latestDocument.imei===Un&&(Dn.push({label:sn,value:Tn.latestDocument[sn==="maininputvoltage"?"mainInputVoltage":sn]}),Hn=Dn,Kn(Dn))});else{let Tn=Mn.filter(ft=>ft.label!==sn);Hn=Tn,Kn(Tn)}bn(Jo([{reg_id:nt,imei:Un,params:Hn}]))},oe=$=>I==null?void 0:I.some(sn=>Number(sn.latestDocument.imei)===Number($)&&sn.latestDocument.speed>0&&(sn.latestDocument.ignition===!0||sn.latestDocument.ignition===1)),ot=$=>I==null?void 0:I.some(sn=>Number(sn.latestDocument.imei)===Number($)&&sn.latestDocument.speed<=0&&(sn.latestDocument.ignition===!0||sn.latestDocument.ignition===1)),kn=O.filter($=>{var fe,Zn,Ct,Ae,tt;if(!(Object.keys(w).length===0||$.vehicle_group===w.id))return!1;const Un=(fe=$==null?void 0:$.label)==null?void 0:fe.toLowerCase().includes(T.toLowerCase()),Bn=on===""||((Zn=$==null?void 0:$.workShop)==null?void 0:Zn.region)===on,nt=Z===""||((Ae=(Ct=$==null?void 0:$.workShop)==null?void 0:Ct.state)==null?void 0:Ae.toLowerCase())===(((tt=Z==null?void 0:Z.toString())==null?void 0:tt.toLowerCase())||""),N=Number($.value),Dn=g.includes(N),Hn=!Dn,Et=Dn&&oe(N),Tn=Dn&&ot(N);return Un&&Bn&&nt&&(L==="online"?Dn:L==="offline"?Hn:L==="running"?Et:L==="idling"?Tn:!0)}).sort(($,sn)=>$.label.localeCompare(sn.label));return P.jsxs("div",{className:"app",children:[P.jsx(s0,{}),P.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[P.jsx(jd,{title:"Live Map",setShowVehicles:Sn,showVehicles:gn,showParameters:On,setShowParameters:vn,setShowCard:qt,showCard:Ft,setShowVehiclesGroup:Yn,showVehiclesGroup:Vn}),P.jsx(u0,{setShowVehiclesGroup:Yn,showVehiclesGroup:Vn,where:"livemap"}),P.jsxs(Nn,{style:{display:"flex",width:"100%",height:"95vh"},children:[P.jsx(Nn,{style:{width:gn||On?"80%":"100%"},children:P.jsx(N0,{showCard:Ft,loadingVehicle:an,vehicleData:kn})}),gn&&P.jsx(Nn,{style:{width:"20%",backgroundColor:v.grey[100]},children:P.jsx(n0,{vehicleData:kn,title:"Live Map",setParameterData:hn,loadingVehicle:an,setShowVehicles:Sn,showVehicles:gn,showParameters:On,setShowParameters:vn,setSearchedTerm:U,setOptions:z,setState:j,setRegion:q,searchTerm:T,options:L,state:Z,region:on})}),On&&P.jsx(Nn,{style:{width:"20%",backgroundColor:v.grey[100]},children:P.jsx(i0,{parametersData:wn,setParameterData:hn,handleParameterChange:Rn})})]})]})]})}export{l_ as default};
