import{W as Hd,j as N,k as Vt,r as j,t as sf,T as ge,B as uf,h as Zd,p as ze,i as of,v as ps,Q as Kd,X as qd,m as zd,w as as,Y as Xo,K as Vd,L as Yd,N as Xd,O as Jd,Z as Jo}from"./index-0cvF0TZ5.js";import{L as Qd}from"./LiveMapTopBar-DdNu84Ud.js";import{V as jd}from"./VehicleMenu-Ciy40kmD.js";import{L as n0,t as t0}from"./LeftSideBar2-BZ8oRg6H.js";import{F as e0}from"./Loader-BOd-LbjJ.js";import{L as r0}from"./LiveMapServices-z_BQ22RQ.js";import{s as ls}from"./Socket-0N_gnJcr.js";import{P as i0}from"./Parameters-B9k8fKm6.js";/* empty css           */import"./proj-XQwXs9DQ.js";import{V as s0}from"./VehicleGroups-Dvs_W8zZ.js";import{u as u0,G as o0,M as f0}from"./esm-BSKDImAp.js";import{d as a0}from"./Info-OmBF-LaR.js";import{d as l0}from"./Close-BhRpCUvv.js";import{r as c0}from"./createSvgIcon-D_8TQeNB.js";import{B as $n,C as h0}from"./menu2-Cqcb3HpA.js";import"./jcb-aCHXMCXy.js";import"./index-DrL1Xfq6.js";import"./TextField-BgK8cXS3.js";import"./useControlled-BJrywanZ.js";import"./index-CVMAIQ-5.js";import"./Card-DhFiIKzN.js";import"./CardContent-CB9gekcl.js";var vs={},g0=Hd;Object.defineProperty(vs,"__esModule",{value:!0});var ff=vs.default=void 0,p0=g0(c0()),d0=N;ff=vs.default=(0,p0.default)((0,d0.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"NorthEast");const _0=({label:I,value:f})=>N.jsxs($n,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[N.jsx(ge,{variant:"body2",color:"textSecondary",children:I}),N.jsx(ge,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:f||"N/A"})]}),v0=(I,f)=>(I==null?void 0:I.find(i=>{var g,v;return((v=(g=i.imei)==null?void 0:g[0])==null?void 0:v.mac_id)===f}))||{},Qo=({title:I,details:f})=>N.jsx($n,{sx:{width:"45%"},children:f.map(({label:i,value:g})=>N.jsx(_0,{label:i,value:g},i))});function w0({handleVehicleInfo:I,udpatedParams:f}){var on,F,rn,An,nn,On,mn,Wn,en,Dn;const{collapsed:i}=Vt(pn=>pn.auth),{vehicleList:g,selectedVehicle:v,selectedImei:x}=Vt(pn=>pn.liveMap),[w,O]=j.useState({});let[d,P]=j.useState(null);j.useEffect(()=>{let pn=f&&(f==null?void 0:f.length)>0&&(f==null?void 0:f.find(Pn=>{var an;return Number((an=Pn==null?void 0:Pn.latestDocument)==null?void 0:an.imei)===Number(x)}));P(pn)},[f,x]),j.useEffect(()=>{O(v0(g,x))},[g,x]);const W=(pn,Pn)=>{const an=`https://www.google.com/maps?q=${pn},${Pn}`;window.open(an,"_blank")},L=pn=>{var _n,Kn;let Pn=(_n=pn==null?void 0:pn.latestDocument)==null?void 0:_n.ignition,an=(Kn=pn==null?void 0:pn.latestDocument)==null?void 0:Kn.speed;return Pn===!0||Pn===1?an:0},q=[{label:"Vehicle No:",value:w==null?void 0:w.registration_id},{label:"Model:",value:(on=w==null?void 0:w.vehicle_model)==null?void 0:on.name},{label:"IMEI No:",value:(rn=(F=w==null?void 0:w.imei)==null?void 0:F[0])==null?void 0:rn.mac_id},{label:"Chassis No:",value:w==null?void 0:w.chassis_no},{label:"Engine No:",value:w==null?void 0:w.engine_no}],Z=[{label:"Customer Name:",value:(An=w==null?void 0:w.user)!=null&&An.us_user?`${w.user.us_user.first_name.charAt(0).toUpperCase()}${w.user.us_user.first_name.slice(1)} ${w.user.us_user.last_name.charAt(0).toUpperCase()}${w.user.us_user.last_name.slice(1)}`:null},{label:"Mobile: ",value:((nn=w==null?void 0:w.user)==null?void 0:nn.us_user)&&w.user.us_user.mobile},{label:"Date of Sell:",value:w==null?void 0:w.sell_date},{label:"Workshop Name:",value:(On=w==null?void 0:w.workshop)==null?void 0:On.name}];let J={border:"2px solid black",borderRadius:"5px",padding:"5px",color:"black"};return N.jsxs($n,{sx:{position:"absolute",top:"600px",left:i?"280px":"450px",zIndex:1,background:sf.bgShadow,p:2,borderRadius:2,color:"white",width:"72%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[N.jsx(ge,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),N.jsxs($n,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[N.jsxs($n,{sx:{display:"flex",justifyContent:"space-between",width:"65%",marginLeft:"10px"},children:[N.jsx($n,{sx:J,children:N.jsxs(ge,{children:["Ignition:"," ",((mn=d==null?void 0:d.latestDocument)==null?void 0:mn.ignition)===!0||((Wn=d==null?void 0:d.latestDocument)==null?void 0:Wn.ignition)===1?"On":"Off"]})}),N.jsx($n,{sx:J,children:N.jsxs(ge,{children:["Speed: ",L(d)," km/h"]})}),N.jsx($n,{sx:J,children:N.jsxs(ge,{children:["Main Voltage:"," ",d?`${(en=d==null?void 0:d.latestDocument)==null?void 0:en.mainInputVoltage} Voltage`:0]})}),N.jsx($n,{sx:J,children:N.jsxs(ge,{children:["Heading:"," ",d?`${(Dn=d==null?void 0:d.latestDocument)==null?void 0:Dn.heading} deg`:0]})}),N.jsxs(uf,{disabled:!d,onClick:()=>{var pn,Pn;W((pn=d==null?void 0:d.latestDocument)==null?void 0:pn.lat,(Pn=d==null?void 0:d.latestDocument)==null?void 0:Pn.lng)},children:["Navigate to map",N.jsx(ff,{})]})]}),N.jsx(l0,{sx:{cursor:"pointer",color:"black"},onClick:I})]}),N.jsxs($n,{sx:{display:"flex",justifyContent:"space-between"},children:[N.jsx(Qo,{title:"Vehicle Details",details:q}),N.jsx(Qo,{title:"Customer Details",details:Z})]})]})}var x0=function I(f,i){if(f===i)return!0;if(f&&i&&typeof f=="object"&&typeof i=="object"){if(f.constructor!==i.constructor)return!1;var g,v,x;if(Array.isArray(f)){if(g=f.length,g!=i.length)return!1;for(v=g;v--!==0;)if(!I(f[v],i[v]))return!1;return!0}if(f.constructor===RegExp)return f.source===i.source&&f.flags===i.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===i.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===i.toString();if(x=Object.keys(f),g=x.length,g!==Object.keys(i).length)return!1;for(v=g;v--!==0;)if(!Object.prototype.hasOwnProperty.call(i,x[v]))return!1;for(v=g;v--!==0;){var w=x[v];if(!I(f[w],i[w]))return!1}return!0}return f!==f&&i!==i};const jo=Zd(x0),nf=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],cs=1,Ve=8;class ws{static from(f){if(!(f instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,g]=new Uint8Array(f,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=g>>4;if(v!==cs)throw new Error(`Got v${v} data when expected v${cs}.`);const x=nf[g&15];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(f,2,1),[O]=new Uint32Array(f,4,1);return new ws(O,w,x,f)}constructor(f,i=64,g=Float64Array,v){if(isNaN(f)||f<0)throw new Error(`Unpexpected numItems value: ${f}.`);this.numItems=+f,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=g,this.IndexArrayType=f<65536?Uint16Array:Uint32Array;const x=nf.indexOf(this.ArrayType),w=f*2*this.ArrayType.BYTES_PER_ELEMENT,O=f*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-O%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${g}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,Ve,f),this.coords=new this.ArrayType(this.data,Ve+O+d,f*2),this._pos=f*2,this._finished=!0):(this.data=new ArrayBuffer(Ve+w+O+d),this.ids=new this.IndexArrayType(this.data,Ve,f),this.coords=new this.ArrayType(this.data,Ve+O+d,f*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(cs<<4)+x]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=f)}add(f,i){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=f,this.coords[this._pos++]=i,g}finish(){const f=this._pos>>1;if(f!==this.numItems)throw new Error(`Added ${f} items when expected ${this.numItems}.`);return ds(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(f,i,g,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:O}=this,d=[0,x.length-1,0],P=[];for(;d.length;){const W=d.pop()||0,L=d.pop()||0,q=d.pop()||0;if(L-q<=O){for(let F=q;F<=L;F++){const rn=w[2*F],An=w[2*F+1];rn>=f&&rn<=g&&An>=i&&An<=v&&P.push(x[F])}continue}const Z=q+L>>1,J=w[2*Z],on=w[2*Z+1];J>=f&&J<=g&&on>=i&&on<=v&&P.push(x[Z]),(W===0?f<=J:i<=on)&&(d.push(q),d.push(Z-1),d.push(1-W)),(W===0?g>=J:v>=on)&&(d.push(Z+1),d.push(L),d.push(1-W))}return P}within(f,i,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,O=[0,v.length-1,0],d=[],P=g*g;for(;O.length;){const W=O.pop()||0,L=O.pop()||0,q=O.pop()||0;if(L-q<=w){for(let F=q;F<=L;F++)tf(x[2*F],x[2*F+1],f,i)<=P&&d.push(v[F]);continue}const Z=q+L>>1,J=x[2*Z],on=x[2*Z+1];tf(J,on,f,i)<=P&&d.push(v[Z]),(W===0?f-g<=J:i-g<=on)&&(O.push(q),O.push(Z-1),O.push(1-W)),(W===0?f+g>=J:i+g>=on)&&(O.push(Z+1),O.push(L),O.push(1-W))}return d}}function ds(I,f,i,g,v,x){if(v-g<=i)return;const w=g+v>>1;af(I,f,w,g,v,x),ds(I,f,i,g,w-1,1-x),ds(I,f,i,w+1,v,1-x)}function af(I,f,i,g,v,x){for(;v>g;){if(v-g>600){const P=v-g+1,W=i-g+1,L=Math.log(P),q=.5*Math.exp(2*L/3),Z=.5*Math.sqrt(L*q*(P-q)/P)*(W-P/2<0?-1:1),J=Math.max(g,Math.floor(i-W*q/P+Z)),on=Math.min(v,Math.floor(i+(P-W)*q/P+Z));af(I,f,i,J,on,x)}const w=f[2*i+x];let O=g,d=v;for(Ye(I,f,g,i),f[2*v+x]>w&&Ye(I,f,g,v);O<d;){for(Ye(I,f,O,d),O++,d--;f[2*O+x]<w;)O++;for(;f[2*d+x]>w;)d--}f[2*g+x]===w?Ye(I,f,g,d):(d++,Ye(I,f,d,v)),d<=i&&(g=d+1),i<=d&&(v=d-1)}}function Ye(I,f,i,g){hs(I,i,g),hs(f,2*i,2*g),hs(f,2*i+1,2*g+1)}function hs(I,f,i){const g=I[f];I[f]=I[i],I[i]=g}function tf(I,f,i,g){const v=I-i,x=f-g;return v*v+x*x}const m0={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:I=>I},ef=Math.fround||(I=>f=>(I[0]=+f,I[0]))(new Float32Array(1)),he=2,zt=3,gs=4,qt=5,lf=6;class y0{constructor(f){this.options=Object.assign(Object.create(m0),f),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(f){const{log:i,minZoom:g,maxZoom:v}=this.options;i&&console.time("total time");const x=`prepare ${f.length} points`;i&&console.time(x),this.points=f;const w=[];for(let d=0;d<f.length;d++){const P=f[d];if(!P.geometry)continue;const[W,L]=P.geometry.coordinates,q=ef(Hr(W)),Z=ef(Zr(L));w.push(q,Z,1/0,d,-1,1),this.options.reduce&&w.push(0)}let O=this.trees[v+1]=this._createTree(w);i&&console.timeEnd(x);for(let d=v;d>=g;d--){const P=+Date.now();O=this.trees[d]=this._createTree(this._cluster(O,d)),i&&console.log("z%d: %d clusters in %dms",d,O.numItems,+Date.now()-P)}return i&&console.timeEnd("total time"),this}getClusters(f,i){let g=((f[0]+180)%360+360)%360-180;const v=Math.max(-90,Math.min(90,f[1]));let x=f[2]===180?180:((f[2]+180)%360+360)%360-180;const w=Math.max(-90,Math.min(90,f[3]));if(f[2]-f[0]>=360)g=-180,x=180;else if(g>x){const L=this.getClusters([g,v,180,w],i),q=this.getClusters([-180,v,x,w],i);return L.concat(q)}const O=this.trees[this._limitZoom(i)],d=O.range(Hr(g),Zr(w),Hr(x),Zr(v)),P=O.data,W=[];for(const L of d){const q=this.stride*L;W.push(P[q+qt]>1?rf(P,q,this.clusterProps):this.points[P[q+zt]])}return W}getChildren(f){const i=this._getOriginId(f),g=this._getOriginZoom(f),v="No cluster with the specified id.",x=this.trees[g];if(!x)throw new Error(v);const w=x.data;if(i*this.stride>=w.length)throw new Error(v);const O=this.options.radius/(this.options.extent*Math.pow(2,g-1)),d=w[i*this.stride],P=w[i*this.stride+1],W=x.within(d,P,O),L=[];for(const q of W){const Z=q*this.stride;w[Z+gs]===f&&L.push(w[Z+qt]>1?rf(w,Z,this.clusterProps):this.points[w[Z+zt]])}if(L.length===0)throw new Error(v);return L}getLeaves(f,i,g){i=i||10,g=g||0;const v=[];return this._appendLeaves(v,f,i,g,0),v}getTile(f,i,g){const v=this.trees[this._limitZoom(f)],x=Math.pow(2,f),{extent:w,radius:O}=this.options,d=O/w,P=(g-d)/x,W=(g+1+d)/x,L={features:[]};return this._addTileFeatures(v.range((i-d)/x,P,(i+1+d)/x,W),v.data,i,g,x,L),i===0&&this._addTileFeatures(v.range(1-d/x,P,1,W),v.data,x,g,x,L),i===x-1&&this._addTileFeatures(v.range(0,P,d/x,W),v.data,-1,g,x,L),L.features.length?L:null}getClusterExpansionZoom(f){let i=this._getOriginZoom(f)-1;for(;i<=this.options.maxZoom;){const g=this.getChildren(f);if(i++,g.length!==1)break;f=g[0].properties.cluster_id}return i}_appendLeaves(f,i,g,v,x){const w=this.getChildren(i);for(const O of w){const d=O.properties;if(d&&d.cluster?x+d.point_count<=v?x+=d.point_count:x=this._appendLeaves(f,d.cluster_id,g,v,x):x<v?x++:f.push(O),f.length===g)break}return x}_createTree(f){const i=new ws(f.length/this.stride|0,this.options.nodeSize,Float32Array);for(let g=0;g<f.length;g+=this.stride)i.add(f[g],f[g+1]);return i.finish(),i.data=f,i}_addTileFeatures(f,i,g,v,x,w){for(const O of f){const d=O*this.stride,P=i[d+qt]>1;let W,L,q;if(P)W=cf(i,d,this.clusterProps),L=i[d],q=i[d+1];else{const on=this.points[i[d+zt]];W=on.properties;const[F,rn]=on.geometry.coordinates;L=Hr(F),q=Zr(rn)}const Z={type:1,geometry:[[Math.round(this.options.extent*(L*x-g)),Math.round(this.options.extent*(q*x-v))]],tags:W};let J;P||this.options.generateId?J=i[d+zt]:J=this.points[i[d+zt]].id,J!==void 0&&(Z.id=J),w.features.push(Z)}}_limitZoom(f){return Math.max(this.options.minZoom,Math.min(Math.floor(+f),this.options.maxZoom+1))}_cluster(f,i){const{radius:g,extent:v,reduce:x,minPoints:w}=this.options,O=g/(v*Math.pow(2,i)),d=f.data,P=[],W=this.stride;for(let L=0;L<d.length;L+=W){if(d[L+he]<=i)continue;d[L+he]=i;const q=d[L],Z=d[L+1],J=f.within(d[L],d[L+1],O),on=d[L+qt];let F=on;for(const rn of J){const An=rn*W;d[An+he]>i&&(F+=d[An+qt])}if(F>on&&F>=w){let rn=q*on,An=Z*on,nn,On=-1;const mn=((L/W|0)<<5)+(i+1)+this.points.length;for(const Wn of J){const en=Wn*W;if(d[en+he]<=i)continue;d[en+he]=i;const Dn=d[en+qt];rn+=d[en]*Dn,An+=d[en+1]*Dn,d[en+gs]=mn,x&&(nn||(nn=this._map(d,L,!0),On=this.clusterProps.length,this.clusterProps.push(nn)),x(nn,this._map(d,en)))}d[L+gs]=mn,P.push(rn/F,An/F,1/0,mn,-1,F),x&&P.push(On)}else{for(let rn=0;rn<W;rn++)P.push(d[L+rn]);if(F>1)for(const rn of J){const An=rn*W;if(!(d[An+he]<=i)){d[An+he]=i;for(let nn=0;nn<W;nn++)P.push(d[An+nn])}}}}return P}_getOriginId(f){return f-this.points.length>>5}_getOriginZoom(f){return(f-this.points.length)%32}_map(f,i,g){if(f[i+qt]>1){const w=this.clusterProps[f[i+lf]];return g?Object.assign({},w):w}const v=this.points[f[i+zt]].properties,x=this.options.map(v);return g&&x===v?Object.assign({},x):x}}function rf(I,f,i){return{type:"Feature",id:I[f+zt],properties:cf(I,f,i),geometry:{type:"Point",coordinates:[A0(I[f]),S0(I[f+1])]}}}function cf(I,f,i){const g=I[f+qt],v=g>=1e4?`${Math.round(g/1e3)}k`:g>=1e3?`${Math.round(g/100)/10}k`:g,x=I[f+lf],w=x===-1?{}:Object.assign({},i[x]);return Object.assign(w,{cluster:!0,cluster_id:I[f+zt],point_count:g,point_count_abbreviated:v})}function Hr(I){return I/360+.5}function Zr(I){const f=Math.sin(I*Math.PI/180),i=.5-.25*Math.log((1+f)/(1-f))/Math.PI;return i<0?0:i>1?1:i}function A0(I){return(I-.5)*360}function S0(I){const f=(180-I*360)*Math.PI/180;return 360*Math.atan(Math.exp(f))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function I0(I,f){var i={};for(var g in I)Object.prototype.hasOwnProperty.call(I,g)&&f.indexOf(g)<0&&(i[g]=I[g]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,g=Object.getOwnPropertySymbols(I);v<g.length;v++)f.indexOf(g[v])<0&&Object.prototype.propertyIsEnumerable.call(I,g[v])&&(i[g[v]]=I[g[v]]);return i}class st{static isAdvancedMarkerAvailable(f){return google.maps.marker&&f.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(f){return google.maps.marker&&f instanceof google.maps.marker.AdvancedMarkerElement}static setMap(f,i){this.isAdvancedMarker(f)?f.map=i:f.setMap(i)}static getPosition(f){if(this.isAdvancedMarker(f)){if(f.position){if(f.position instanceof google.maps.LatLng)return f.position;if(f.position.lat&&f.position.lng)return new google.maps.LatLng(f.position.lat,f.position.lng)}return new google.maps.LatLng(null)}return f.getPosition()}static getVisible(f){return this.isAdvancedMarker(f)?!0:f.getVisible()}}class _s{constructor({markers:f,position:i}){this.markers=f,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(this.markers.length===0&&!this._position)return;const f=new google.maps.LatLngBounds(this._position,this._position);for(const i of this.markers)f.extend(st.getPosition(i));return f}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(f=>st.getVisible(f)).length}push(f){this.markers.push(f)}delete(){this.marker&&(st.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class E0{constructor({maxZoom:f=16}){this.maxZoom=f}noop({markers:f}){return C0(f)}}const C0=I=>I.map(i=>new _s({position:st.getPosition(i),markers:[i]}));class L0 extends E0{constructor(f){var{maxZoom:i,radius:g=60}=f,v=I0(f,["maxZoom","radius"]);super({maxZoom:i}),this.state={zoom:-1},this.superCluster=new y0(Object.assign({maxZoom:this.maxZoom,radius:g},v))}calculate(f){let i=!1;const g={zoom:f.map.getZoom()};if(!jo(f.markers,this.markers)){i=!0,this.markers=[...f.markers];const v=this.markers.map(x=>{const w=st.getPosition(x);return{type:"Feature",geometry:{type:"Point",coordinates:[w.lng(),w.lat()]},properties:{marker:x}}});this.superCluster.load(v)}return i||(this.state.zoom<=this.maxZoom||g.zoom<=this.maxZoom)&&(i=!jo(this.state,g)),this.state=g,i&&(this.clusters=this.cluster(f)),{clusters:this.clusters,changed:i}}cluster({map:f}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(f.getZoom())).map(i=>this.transformCluster(i))}transformCluster({geometry:{coordinates:[f,i]},properties:g}){if(g.cluster)return new _s({markers:this.superCluster.getLeaves(g.cluster_id,1/0).map(x=>x.properties.marker),position:{lat:i,lng:f}});const v=g.marker;return new _s({markers:[v],position:st.getPosition(v)})}}class M0{constructor(f,i){this.markers={sum:f.length};const g=i.map(x=>x.count),v=g.reduce((x,w)=>x+w,0);this.clusters={count:i.length,markers:{mean:v/i.length,sum:v,min:Math.min(...g),max:Math.max(...g)}}}}class R0{render({count:f,position:i},g,v){const w=`<svg fill="${f>Math.max(10,g.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${f}</text>
</svg>`,O=`Cluster of ${f} markers`,d=Number(google.maps.Marker.MAX_ZINDEX)+f;if(st.isAdvancedMarkerAvailable(v)){const L=new DOMParser().parseFromString(w,"image/svg+xml").documentElement;L.setAttribute("transform","translate(0 25)");const q={map:v,position:i,zIndex:d,title:O,content:L};return new google.maps.marker.AdvancedMarkerElement(q)}const P={position:i,zIndex:d,title:O,icon:{url:`data:image/svg+xml;base64,${btoa(w)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(P)}}function b0(I,f){for(let i in f.prototype)I.prototype[i]=f.prototype[i]}class xs{constructor(){b0(xs,google.maps.OverlayView)}}var Xe;(function(I){I.CLUSTERING_BEGIN="clusteringbegin",I.CLUSTERING_END="clusteringend",I.CLUSTER_CLICK="click"})(Xe||(Xe={}));const T0=(I,f,i)=>{i.fitBounds(f.bounds)};class O0 extends xs{constructor({map:f,markers:i=[],algorithmOptions:g={},algorithm:v=new L0(g),renderer:x=new R0,onClusterClick:w=T0}){super(),this.markers=[...i],this.clusters=[],this.algorithm=v,this.renderer=x,this.onClusterClick=w,f&&this.setMap(f)}addMarker(f,i){this.markers.includes(f)||(this.markers.push(f),i||this.render())}addMarkers(f,i){f.forEach(g=>{this.addMarker(g,!0)}),i||this.render()}removeMarker(f,i){const g=this.markers.indexOf(f);return g===-1?!1:(st.setMap(f,null),this.markers.splice(g,1),i||this.render(),!0)}removeMarkers(f,i){let g=!1;return f.forEach(v=>{g=this.removeMarker(v,!0)||g}),g&&!i&&this.render(),g}clearMarkers(f){this.markers.length=0,f||this.render()}render(){const f=this.getMap();if(f instanceof google.maps.Map&&f.getProjection()){google.maps.event.trigger(this,Xe.CLUSTERING_BEGIN,this);const{clusters:i,changed:g}=this.algorithm.calculate({markers:this.markers,map:f,mapCanvasProjection:this.getProjection()});if(g||g==null){const v=new Set;for(const w of i)w.markers.length==1&&v.add(w.markers[0]);const x=[];for(const w of this.clusters)w.marker!=null&&(w.markers.length==1?v.has(w.marker)||st.setMap(w.marker,null):x.push(w.marker));this.clusters=i,this.renderClusters(),requestAnimationFrame(()=>x.forEach(w=>st.setMap(w,null)))}google.maps.event.trigger(this,Xe.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(f=>st.setMap(f,null)),this.clusters.forEach(f=>f.delete()),this.clusters=[]}renderClusters(){const f=new M0(this.markers,this.clusters),i=this.getMap();this.clusters.forEach(g=>{g.markers.length===1?g.marker=g.markers[0]:(g.marker=this.renderer.render(g,f,i),g.markers.forEach(v=>st.setMap(v,null)),this.onClusterClick&&g.marker.addListener("click",v=>{google.maps.event.trigger(this,Xe.CLUSTER_CLICK,g),this.onClusterClick(v,g,i)})),st.setMap(g.marker,i)})}}var Kr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Kr.exports;(function(I,f){(function(){var i,g="4.17.21",v=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",w="Expected a function",O="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",P=500,W="__lodash_placeholder__",L=1,q=2,Z=4,J=1,on=2,F=1,rn=2,An=4,nn=8,On=16,mn=32,Wn=64,en=128,Dn=256,pn=512,Pn=30,an="...",_n=800,Kn=16,pt=1,dt=2,k=3,vn=1/0,Mn=9007199254740991,yt=17976931348623157e292,Rn=NaN,Sn=4294967295,Je=Sn-1,Yt=Sn>>>1,Te=[["ary",en],["bind",F],["bindKey",rn],["curry",nn],["curryRight",On],["flip",pn],["partial",mn],["partialRight",Wn],["rearg",Dn]],Ft="[object Arguments]",pe="[object Array]",qr="[object AsyncFunction]",Xt="[object Boolean]",Et="[object Date]",Qe="[object DOMException]",de="[object Error]",_e="[object Function]",je="[object GeneratorFunction]",qn="[object Map]",Jt="[object Number]",zr="[object Null]",_t="[object Object]",nr="[object Promise]",Vr="[object Proxy]",Qt="[object RegExp]",Qn="[object Set]",jt="[object String]",ne="[object Symbol]",Yr="[object Undefined]",A="[object WeakMap]",C="[object WeakSet]",R="[object ArrayBuffer]",T="[object DataView]",$="[object Float32Array]",sn="[object Float64Array]",K="[object Int8Array]",un="[object Int16Array]",wn="[object Int32Array]",En="[object Uint8Array]",zn="[object Uint8ClampedArray]",te="[object Uint16Array]",ee="[object Uint32Array]",Xr=/\b__p \+= '';/g,Ut=/\b(__p \+=) '' \+/g,hf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ms=/&(?:amp|lt|gt|quot|#39);/g,ys=/[&<>"']/g,gf=RegExp(ms.source),pf=RegExp(ys.source),df=/<%-([\s\S]+?)%>/g,_f=/<%([\s\S]+?)%>/g,As=/<%=([\s\S]+?)%>/g,vf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wf=/^\w*$/,xf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jr=/[\\^$.*+?()[\]{}|]/g,mf=RegExp(Jr.source),Qr=/^\s+/,yf=/\s/,Af=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sf=/\{\n\/\* \[wrapped with (.+)\] \*/,If=/,? & /,Ef=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cf=/[()=,{}\[\]\/\s]/,Lf=/\\(\\)?/g,Mf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ss=/\w*$/,Rf=/^[-+]0x[0-9a-f]+$/i,bf=/^0b[01]+$/i,Tf=/^\[object .+?Constructor\]$/,Of=/^0o[0-7]+$/i,Df=/^(?:0|[1-9]\d*)$/,Pf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tr=/($^)/,Ff=/['\n\r\u2028\u2029\\]/g,er="\\ud800-\\udfff",Uf="\\u0300-\\u036f",Bf="\\ufe20-\\ufe2f",Wf="\\u20d0-\\u20ff",Is=Uf+Bf+Wf,Es="\\u2700-\\u27bf",Cs="a-z\\xdf-\\xf6\\xf8-\\xff",Nf="\\xac\\xb1\\xd7\\xf7",kf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$f="\\u2000-\\u206f",Gf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ls="A-Z\\xc0-\\xd6\\xd8-\\xde",Ms="\\ufe0e\\ufe0f",Rs=Nf+kf+$f+Gf,jr="['’]",Hf="["+er+"]",bs="["+Rs+"]",rr="["+Is+"]",Ts="\\d+",Zf="["+Es+"]",Os="["+Cs+"]",Ds="[^"+er+Rs+Ts+Es+Cs+Ls+"]",ni="\\ud83c[\\udffb-\\udfff]",Kf="(?:"+rr+"|"+ni+")",Ps="[^"+er+"]",ti="(?:\\ud83c[\\udde6-\\uddff]){2}",ei="[\\ud800-\\udbff][\\udc00-\\udfff]",ve="["+Ls+"]",Fs="\\u200d",Us="(?:"+Os+"|"+Ds+")",qf="(?:"+ve+"|"+Ds+")",Bs="(?:"+jr+"(?:d|ll|m|re|s|t|ve))?",Ws="(?:"+jr+"(?:D|LL|M|RE|S|T|VE))?",Ns=Kf+"?",ks="["+Ms+"]?",zf="(?:"+Fs+"(?:"+[Ps,ti,ei].join("|")+")"+ks+Ns+")*",Vf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$s=ks+Ns+zf,Xf="(?:"+[Zf,ti,ei].join("|")+")"+$s,Jf="(?:"+[Ps+rr+"?",rr,ti,ei,Hf].join("|")+")",Qf=RegExp(jr,"g"),jf=RegExp(rr,"g"),ri=RegExp(ni+"(?="+ni+")|"+Jf+$s,"g"),na=RegExp([ve+"?"+Os+"+"+Bs+"(?="+[bs,ve,"$"].join("|")+")",qf+"+"+Ws+"(?="+[bs,ve+Us,"$"].join("|")+")",ve+"?"+Us+"+"+Bs,ve+"+"+Ws,Yf,Vf,Ts,Xf].join("|"),"g"),ta=RegExp("["+Fs+er+Is+Ms+"]"),ea=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ra=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ia=-1,dn={};dn[$]=dn[sn]=dn[K]=dn[un]=dn[wn]=dn[En]=dn[zn]=dn[te]=dn[ee]=!0,dn[Ft]=dn[pe]=dn[R]=dn[Xt]=dn[T]=dn[Et]=dn[de]=dn[_e]=dn[qn]=dn[Jt]=dn[_t]=dn[Qt]=dn[Qn]=dn[jt]=dn[A]=!1;var gn={};gn[Ft]=gn[pe]=gn[R]=gn[T]=gn[Xt]=gn[Et]=gn[$]=gn[sn]=gn[K]=gn[un]=gn[wn]=gn[qn]=gn[Jt]=gn[_t]=gn[Qt]=gn[Qn]=gn[jt]=gn[ne]=gn[En]=gn[zn]=gn[te]=gn[ee]=!0,gn[de]=gn[_e]=gn[A]=!1;var sa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aa=parseFloat,la=parseInt,Gs=typeof ze=="object"&&ze&&ze.Object===Object&&ze,ca=typeof self=="object"&&self&&self.Object===Object&&self,Un=Gs||ca||Function("return this")(),ii=f&&!f.nodeType&&f,re=ii&&!0&&I&&!I.nodeType&&I,Hs=re&&re.exports===ii,si=Hs&&Gs.process,ut=function(){try{var c=re&&re.require&&re.require("util").types;return c||si&&si.binding&&si.binding("util")}catch{}}(),Zs=ut&&ut.isArrayBuffer,Ks=ut&&ut.isDate,qs=ut&&ut.isMap,zs=ut&&ut.isRegExp,Vs=ut&&ut.isSet,Ys=ut&&ut.isTypedArray;function jn(c,_,p){switch(p.length){case 0:return c.call(_);case 1:return c.call(_,p[0]);case 2:return c.call(_,p[0],p[1]);case 3:return c.call(_,p[0],p[1],p[2])}return c.apply(_,p)}function ha(c,_,p,M){for(var G=-1,fn=c==null?0:c.length;++G<fn;){var bn=c[G];_(M,bn,p(bn),c)}return M}function ot(c,_){for(var p=-1,M=c==null?0:c.length;++p<M&&_(c[p],p,c)!==!1;);return c}function ga(c,_){for(var p=c==null?0:c.length;p--&&_(c[p],p,c)!==!1;);return c}function Xs(c,_){for(var p=-1,M=c==null?0:c.length;++p<M;)if(!_(c[p],p,c))return!1;return!0}function Bt(c,_){for(var p=-1,M=c==null?0:c.length,G=0,fn=[];++p<M;){var bn=c[p];_(bn,p,c)&&(fn[G++]=bn)}return fn}function ir(c,_){var p=c==null?0:c.length;return!!p&&we(c,_,0)>-1}function ui(c,_,p){for(var M=-1,G=c==null?0:c.length;++M<G;)if(p(_,c[M]))return!0;return!1}function xn(c,_){for(var p=-1,M=c==null?0:c.length,G=Array(M);++p<M;)G[p]=_(c[p],p,c);return G}function Wt(c,_){for(var p=-1,M=_.length,G=c.length;++p<M;)c[G+p]=_[p];return c}function oi(c,_,p,M){var G=-1,fn=c==null?0:c.length;for(M&&fn&&(p=c[++G]);++G<fn;)p=_(p,c[G],G,c);return p}function pa(c,_,p,M){var G=c==null?0:c.length;for(M&&G&&(p=c[--G]);G--;)p=_(p,c[G],G,c);return p}function fi(c,_){for(var p=-1,M=c==null?0:c.length;++p<M;)if(_(c[p],p,c))return!0;return!1}var da=ai("length");function _a(c){return c.split("")}function va(c){return c.match(Ef)||[]}function Js(c,_,p){var M;return p(c,function(G,fn,bn){if(_(G,fn,bn))return M=fn,!1}),M}function sr(c,_,p,M){for(var G=c.length,fn=p+(M?1:-1);M?fn--:++fn<G;)if(_(c[fn],fn,c))return fn;return-1}function we(c,_,p){return _===_?Ra(c,_,p):sr(c,Qs,p)}function wa(c,_,p,M){for(var G=p-1,fn=c.length;++G<fn;)if(M(c[G],_))return G;return-1}function Qs(c){return c!==c}function js(c,_){var p=c==null?0:c.length;return p?ci(c,_)/p:Rn}function ai(c){return function(_){return _==null?i:_[c]}}function li(c){return function(_){return c==null?i:c[_]}}function nu(c,_,p,M,G){return G(c,function(fn,bn,hn){p=M?(M=!1,fn):_(p,fn,bn,hn)}),p}function xa(c,_){var p=c.length;for(c.sort(_);p--;)c[p]=c[p].value;return c}function ci(c,_){for(var p,M=-1,G=c.length;++M<G;){var fn=_(c[M]);fn!==i&&(p=p===i?fn:p+fn)}return p}function hi(c,_){for(var p=-1,M=Array(c);++p<c;)M[p]=_(p);return M}function ma(c,_){return xn(_,function(p){return[p,c[p]]})}function tu(c){return c&&c.slice(0,su(c)+1).replace(Qr,"")}function nt(c){return function(_){return c(_)}}function gi(c,_){return xn(_,function(p){return c[p]})}function Oe(c,_){return c.has(_)}function eu(c,_){for(var p=-1,M=c.length;++p<M&&we(_,c[p],0)>-1;);return p}function ru(c,_){for(var p=c.length;p--&&we(_,c[p],0)>-1;);return p}function ya(c,_){for(var p=c.length,M=0;p--;)c[p]===_&&++M;return M}var Aa=li(sa),Sa=li(ua);function Ia(c){return"\\"+fa[c]}function Ea(c,_){return c==null?i:c[_]}function xe(c){return ta.test(c)}function Ca(c){return ea.test(c)}function La(c){for(var _,p=[];!(_=c.next()).done;)p.push(_.value);return p}function pi(c){var _=-1,p=Array(c.size);return c.forEach(function(M,G){p[++_]=[G,M]}),p}function iu(c,_){return function(p){return c(_(p))}}function Nt(c,_){for(var p=-1,M=c.length,G=0,fn=[];++p<M;){var bn=c[p];(bn===_||bn===W)&&(c[p]=W,fn[G++]=p)}return fn}function ur(c){var _=-1,p=Array(c.size);return c.forEach(function(M){p[++_]=M}),p}function Ma(c){var _=-1,p=Array(c.size);return c.forEach(function(M){p[++_]=[M,M]}),p}function Ra(c,_,p){for(var M=p-1,G=c.length;++M<G;)if(c[M]===_)return M;return-1}function ba(c,_,p){for(var M=p+1;M--;)if(c[M]===_)return M;return M}function me(c){return xe(c)?Oa(c):da(c)}function vt(c){return xe(c)?Da(c):_a(c)}function su(c){for(var _=c.length;_--&&yf.test(c.charAt(_)););return _}var Ta=li(oa);function Oa(c){for(var _=ri.lastIndex=0;ri.test(c);)++_;return _}function Da(c){return c.match(ri)||[]}function Pa(c){return c.match(na)||[]}var Fa=function c(_){_=_==null?Un:ye.defaults(Un.Object(),_,ye.pick(Un,ra));var p=_.Array,M=_.Date,G=_.Error,fn=_.Function,bn=_.Math,hn=_.Object,di=_.RegExp,Ua=_.String,ft=_.TypeError,or=p.prototype,Ba=fn.prototype,Ae=hn.prototype,fr=_["__core-js_shared__"],ar=Ba.toString,cn=Ae.hasOwnProperty,Wa=0,uu=function(){var n=/[^.]+$/.exec(fr&&fr.keys&&fr.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),lr=Ae.toString,Na=ar.call(hn),ka=Un._,$a=di("^"+ar.call(cn).replace(Jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cr=Hs?_.Buffer:i,kt=_.Symbol,hr=_.Uint8Array,ou=cr?cr.allocUnsafe:i,gr=iu(hn.getPrototypeOf,hn),fu=hn.create,au=Ae.propertyIsEnumerable,pr=or.splice,lu=kt?kt.isConcatSpreadable:i,De=kt?kt.iterator:i,ie=kt?kt.toStringTag:i,dr=function(){try{var n=ae(hn,"defineProperty");return n({},"",{}),n}catch{}}(),Ga=_.clearTimeout!==Un.clearTimeout&&_.clearTimeout,Ha=M&&M.now!==Un.Date.now&&M.now,Za=_.setTimeout!==Un.setTimeout&&_.setTimeout,_r=bn.ceil,vr=bn.floor,_i=hn.getOwnPropertySymbols,Ka=cr?cr.isBuffer:i,cu=_.isFinite,qa=or.join,za=iu(hn.keys,hn),Tn=bn.max,Nn=bn.min,Va=M.now,Ya=_.parseInt,hu=bn.random,Xa=or.reverse,vi=ae(_,"DataView"),Pe=ae(_,"Map"),wi=ae(_,"Promise"),Se=ae(_,"Set"),Fe=ae(_,"WeakMap"),Ue=ae(hn,"create"),wr=Fe&&new Fe,Ie={},Ja=le(vi),Qa=le(Pe),ja=le(wi),nl=le(Se),tl=le(Fe),xr=kt?kt.prototype:i,Be=xr?xr.valueOf:i,gu=xr?xr.toString:i;function u(n){if(In(n)&&!H(n)&&!(n instanceof Q)){if(n instanceof at)return n;if(cn.call(n,"__wrapped__"))return po(n)}return new at(n)}var Ee=function(){function n(){}return function(t){if(!yn(t))return{};if(fu)return fu(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function mr(){}function at(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}u.templateSettings={escape:df,evaluate:_f,interpolate:As,variable:"",imports:{_:u}},u.prototype=mr.prototype,u.prototype.constructor=u,at.prototype=Ee(mr.prototype),at.prototype.constructor=at;function Q(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Sn,this.__views__=[]}function el(){var n=new Q(this.__wrapped__);return n.__actions__=Vn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Vn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Vn(this.__views__),n}function rl(){if(this.__filtered__){var n=new Q(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function il(){var n=this.__wrapped__.value(),t=this.__dir__,e=H(n),r=t<0,s=e?n.length:0,o=_c(0,s,this.__views__),a=o.start,l=o.end,h=l-a,m=r?l:a-1,y=this.__iteratees__,S=y.length,E=0,b=Nn(h,this.__takeCount__);if(!e||!r&&s==h&&b==h)return Bu(n,this.__actions__);var U=[];n:for(;h--&&E<b;){m+=t;for(var V=-1,B=n[m];++V<S;){var X=y[V],tn=X.iteratee,rt=X.type,Zn=tn(B);if(rt==dt)B=Zn;else if(!Zn){if(rt==pt)continue n;break n}}U[E++]=B}return U}Q.prototype=Ee(mr.prototype),Q.prototype.constructor=Q;function se(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function sl(){this.__data__=Ue?Ue(null):{},this.size=0}function ul(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function ol(n){var t=this.__data__;if(Ue){var e=t[n];return e===d?i:e}return cn.call(t,n)?t[n]:i}function fl(n){var t=this.__data__;return Ue?t[n]!==i:cn.call(t,n)}function al(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ue&&t===i?d:t,this}se.prototype.clear=sl,se.prototype.delete=ul,se.prototype.get=ol,se.prototype.has=fl,se.prototype.set=al;function Ct(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function ll(){this.__data__=[],this.size=0}function cl(n){var t=this.__data__,e=yr(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():pr.call(t,e,1),--this.size,!0}function hl(n){var t=this.__data__,e=yr(t,n);return e<0?i:t[e][1]}function gl(n){return yr(this.__data__,n)>-1}function pl(n,t){var e=this.__data__,r=yr(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}Ct.prototype.clear=ll,Ct.prototype.delete=cl,Ct.prototype.get=hl,Ct.prototype.has=gl,Ct.prototype.set=pl;function Lt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function dl(){this.size=0,this.__data__={hash:new se,map:new(Pe||Ct),string:new se}}function _l(n){var t=Dr(this,n).delete(n);return this.size-=t?1:0,t}function vl(n){return Dr(this,n).get(n)}function wl(n){return Dr(this,n).has(n)}function xl(n,t){var e=Dr(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}Lt.prototype.clear=dl,Lt.prototype.delete=_l,Lt.prototype.get=vl,Lt.prototype.has=wl,Lt.prototype.set=xl;function ue(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Lt;++t<e;)this.add(n[t])}function ml(n){return this.__data__.set(n,d),this}function yl(n){return this.__data__.has(n)}ue.prototype.add=ue.prototype.push=ml,ue.prototype.has=yl;function wt(n){var t=this.__data__=new Ct(n);this.size=t.size}function Al(){this.__data__=new Ct,this.size=0}function Sl(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function Il(n){return this.__data__.get(n)}function El(n){return this.__data__.has(n)}function Cl(n,t){var e=this.__data__;if(e instanceof Ct){var r=e.__data__;if(!Pe||r.length<v-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Lt(r)}return e.set(n,t),this.size=e.size,this}wt.prototype.clear=Al,wt.prototype.delete=Sl,wt.prototype.get=Il,wt.prototype.has=El,wt.prototype.set=Cl;function pu(n,t){var e=H(n),r=!e&&ce(n),s=!e&&!r&&Kt(n),o=!e&&!r&&!s&&Re(n),a=e||r||s||o,l=a?hi(n.length,Ua):[],h=l.length;for(var m in n)(t||cn.call(n,m))&&!(a&&(m=="length"||s&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Tt(m,h)))&&l.push(m);return l}function du(n){var t=n.length;return t?n[Ri(0,t-1)]:i}function Ll(n,t){return Pr(Vn(n),oe(t,0,n.length))}function Ml(n){return Pr(Vn(n))}function xi(n,t,e){(e!==i&&!xt(n[t],e)||e===i&&!(t in n))&&Mt(n,t,e)}function We(n,t,e){var r=n[t];(!(cn.call(n,t)&&xt(r,e))||e===i&&!(t in n))&&Mt(n,t,e)}function yr(n,t){for(var e=n.length;e--;)if(xt(n[e][0],t))return e;return-1}function Rl(n,t,e,r){return $t(n,function(s,o,a){t(r,s,e(s),a)}),r}function _u(n,t){return n&&St(t,Fn(t),n)}function bl(n,t){return n&&St(t,Xn(t),n)}function Mt(n,t,e){t=="__proto__"&&dr?dr(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function mi(n,t){for(var e=-1,r=t.length,s=p(r),o=n==null;++e<r;)s[e]=o?i:ns(n,t[e]);return s}function oe(n,t,e){return n===n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function lt(n,t,e,r,s,o){var a,l=t&L,h=t&q,m=t&Z;if(e&&(a=s?e(n,r,s,o):e(n)),a!==i)return a;if(!yn(n))return n;var y=H(n);if(y){if(a=wc(n),!l)return Vn(n,a)}else{var S=kn(n),E=S==_e||S==je;if(Kt(n))return ku(n,l);if(S==_t||S==Ft||E&&!s){if(a=h||E?{}:so(n),!l)return h?oc(n,bl(a,n)):uc(n,_u(a,n))}else{if(!gn[S])return s?n:{};a=xc(n,S,l)}}o||(o=new wt);var b=o.get(n);if(b)return b;o.set(n,a),Fo(n)?n.forEach(function(B){a.add(lt(B,t,e,B,n,o))}):Do(n)&&n.forEach(function(B,X){a.set(X,lt(B,t,e,X,n,o))});var U=m?h?ki:Ni:h?Xn:Fn,V=y?i:U(n);return ot(V||n,function(B,X){V&&(X=B,B=n[X]),We(a,X,lt(B,t,e,X,n,o))}),a}function Tl(n){var t=Fn(n);return function(e){return vu(e,n,t)}}function vu(n,t,e){var r=e.length;if(n==null)return!r;for(n=hn(n);r--;){var s=e[r],o=t[s],a=n[s];if(a===i&&!(s in n)||!o(a))return!1}return!0}function wu(n,t,e){if(typeof n!="function")throw new ft(w);return Ke(function(){n.apply(i,e)},t)}function Ne(n,t,e,r){var s=-1,o=ir,a=!0,l=n.length,h=[],m=t.length;if(!l)return h;e&&(t=xn(t,nt(e))),r?(o=ui,a=!1):t.length>=v&&(o=Oe,a=!1,t=new ue(t));n:for(;++s<l;){var y=n[s],S=e==null?y:e(y);if(y=r||y!==0?y:0,a&&S===S){for(var E=m;E--;)if(t[E]===S)continue n;h.push(y)}else o(t,S,r)||h.push(y)}return h}var $t=Ku(At),xu=Ku(Ai,!0);function Ol(n,t){var e=!0;return $t(n,function(r,s,o){return e=!!t(r,s,o),e}),e}function Ar(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],a=t(o);if(a!=null&&(l===i?a===a&&!et(a):e(a,l)))var l=a,h=o}return h}function Dl(n,t,e,r){var s=n.length;for(e=z(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:z(r),r<0&&(r+=s),r=e>r?0:Bo(r);e<r;)n[e++]=t;return n}function mu(n,t){var e=[];return $t(n,function(r,s,o){t(r,s,o)&&e.push(r)}),e}function Bn(n,t,e,r,s){var o=-1,a=n.length;for(e||(e=yc),s||(s=[]);++o<a;){var l=n[o];t>0&&e(l)?t>1?Bn(l,t-1,e,r,s):Wt(s,l):r||(s[s.length]=l)}return s}var yi=qu(),yu=qu(!0);function At(n,t){return n&&yi(n,t,Fn)}function Ai(n,t){return n&&yu(n,t,Fn)}function Sr(n,t){return Bt(t,function(e){return Ot(n[e])})}function fe(n,t){t=Ht(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[It(t[e++])];return e&&e==r?n:i}function Au(n,t,e){var r=t(n);return H(n)?r:Wt(r,e(n))}function Gn(n){return n==null?n===i?Yr:zr:ie&&ie in hn(n)?dc(n):Mc(n)}function Si(n,t){return n>t}function Pl(n,t){return n!=null&&cn.call(n,t)}function Fl(n,t){return n!=null&&t in hn(n)}function Ul(n,t,e){return n>=Nn(t,e)&&n<Tn(t,e)}function Ii(n,t,e){for(var r=e?ui:ir,s=n[0].length,o=n.length,a=o,l=p(o),h=1/0,m=[];a--;){var y=n[a];a&&t&&(y=xn(y,nt(t))),h=Nn(y.length,h),l[a]=!e&&(t||s>=120&&y.length>=120)?new ue(a&&y):i}y=n[0];var S=-1,E=l[0];n:for(;++S<s&&m.length<h;){var b=y[S],U=t?t(b):b;if(b=e||b!==0?b:0,!(E?Oe(E,U):r(m,U,e))){for(a=o;--a;){var V=l[a];if(!(V?Oe(V,U):r(n[a],U,e)))continue n}E&&E.push(U),m.push(b)}}return m}function Bl(n,t,e,r){return At(n,function(s,o,a){t(r,e(s),o,a)}),r}function ke(n,t,e){t=Ht(t,n),n=ao(n,t);var r=n==null?n:n[It(ht(t))];return r==null?i:jn(r,n,e)}function Su(n){return In(n)&&Gn(n)==Ft}function Wl(n){return In(n)&&Gn(n)==R}function Nl(n){return In(n)&&Gn(n)==Et}function $e(n,t,e,r,s){return n===t?!0:n==null||t==null||!In(n)&&!In(t)?n!==n&&t!==t:kl(n,t,e,r,$e,s)}function kl(n,t,e,r,s,o){var a=H(n),l=H(t),h=a?pe:kn(n),m=l?pe:kn(t);h=h==Ft?_t:h,m=m==Ft?_t:m;var y=h==_t,S=m==_t,E=h==m;if(E&&Kt(n)){if(!Kt(t))return!1;a=!0,y=!1}if(E&&!y)return o||(o=new wt),a||Re(n)?eo(n,t,e,r,s,o):gc(n,t,h,e,r,s,o);if(!(e&J)){var b=y&&cn.call(n,"__wrapped__"),U=S&&cn.call(t,"__wrapped__");if(b||U){var V=b?n.value():n,B=U?t.value():t;return o||(o=new wt),s(V,B,e,r,o)}}return E?(o||(o=new wt),pc(n,t,e,r,s,o)):!1}function $l(n){return In(n)&&kn(n)==qn}function Ei(n,t,e,r){var s=e.length,o=s,a=!r;if(n==null)return!o;for(n=hn(n);s--;){var l=e[s];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<o;){l=e[s];var h=l[0],m=n[h],y=l[1];if(a&&l[2]){if(m===i&&!(h in n))return!1}else{var S=new wt;if(r)var E=r(m,y,h,n,t,S);if(!(E===i?$e(y,m,J|on,r,S):E))return!1}}return!0}function Iu(n){if(!yn(n)||Sc(n))return!1;var t=Ot(n)?$a:Tf;return t.test(le(n))}function Gl(n){return In(n)&&Gn(n)==Qt}function Hl(n){return In(n)&&kn(n)==Qn}function Zl(n){return In(n)&&kr(n.length)&&!!dn[Gn(n)]}function Eu(n){return typeof n=="function"?n:n==null?Jn:typeof n=="object"?H(n)?Mu(n[0],n[1]):Lu(n):Vo(n)}function Ci(n){if(!Ze(n))return za(n);var t=[];for(var e in hn(n))cn.call(n,e)&&e!="constructor"&&t.push(e);return t}function Kl(n){if(!yn(n))return Lc(n);var t=Ze(n),e=[];for(var r in n)r=="constructor"&&(t||!cn.call(n,r))||e.push(r);return e}function Li(n,t){return n<t}function Cu(n,t){var e=-1,r=Yn(n)?p(n.length):[];return $t(n,function(s,o,a){r[++e]=t(s,o,a)}),r}function Lu(n){var t=Gi(n);return t.length==1&&t[0][2]?oo(t[0][0],t[0][1]):function(e){return e===n||Ei(e,n,t)}}function Mu(n,t){return Zi(n)&&uo(t)?oo(It(n),t):function(e){var r=ns(e,n);return r===i&&r===t?ts(e,n):$e(t,r,J|on)}}function Ir(n,t,e,r,s){n!==t&&yi(t,function(o,a){if(s||(s=new wt),yn(o))ql(n,t,a,e,Ir,r,s);else{var l=r?r(qi(n,a),o,a+"",n,t,s):i;l===i&&(l=o),xi(n,a,l)}},Xn)}function ql(n,t,e,r,s,o,a){var l=qi(n,e),h=qi(t,e),m=a.get(h);if(m){xi(n,e,m);return}var y=o?o(l,h,e+"",n,t,a):i,S=y===i;if(S){var E=H(h),b=!E&&Kt(h),U=!E&&!b&&Re(h);y=h,E||b||U?H(l)?y=l:Cn(l)?y=Vn(l):b?(S=!1,y=ku(h,!0)):U?(S=!1,y=$u(h,!0)):y=[]:qe(h)||ce(h)?(y=l,ce(l)?y=Wo(l):(!yn(l)||Ot(l))&&(y=so(h))):S=!1}S&&(a.set(h,y),s(y,h,r,o,a),a.delete(h)),xi(n,e,y)}function Ru(n,t){var e=n.length;if(e)return t+=t<0?e:0,Tt(t,e)?n[t]:i}function bu(n,t,e){t.length?t=xn(t,function(o){return H(o)?function(a){return fe(a,o.length===1?o[0]:o)}:o}):t=[Jn];var r=-1;t=xn(t,nt(D()));var s=Cu(n,function(o,a,l){var h=xn(t,function(m){return m(o)});return{criteria:h,index:++r,value:o}});return xa(s,function(o,a){return sc(o,a,e)})}function zl(n,t){return Tu(n,t,function(e,r){return ts(n,r)})}function Tu(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var a=t[r],l=fe(n,a);e(l,a)&&Ge(o,Ht(a,n),l)}return o}function Vl(n){return function(t){return fe(t,n)}}function Mi(n,t,e,r){var s=r?wa:we,o=-1,a=t.length,l=n;for(n===t&&(t=Vn(t)),e&&(l=xn(n,nt(e)));++o<a;)for(var h=0,m=t[o],y=e?e(m):m;(h=s(l,y,h,r))>-1;)l!==n&&pr.call(l,h,1),pr.call(n,h,1);return n}function Ou(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;Tt(s)?pr.call(n,s,1):Oi(n,s)}}return n}function Ri(n,t){return n+vr(hu()*(t-n+1))}function Yl(n,t,e,r){for(var s=-1,o=Tn(_r((t-n)/(e||1)),0),a=p(o);o--;)a[r?o:++s]=n,n+=e;return a}function bi(n,t){var e="";if(!n||t<1||t>Mn)return e;do t%2&&(e+=n),t=vr(t/2),t&&(n+=n);while(t);return e}function Y(n,t){return zi(fo(n,t,Jn),n+"")}function Xl(n){return du(be(n))}function Jl(n,t){var e=be(n);return Pr(e,oe(t,0,e.length))}function Ge(n,t,e,r){if(!yn(n))return n;t=Ht(t,n);for(var s=-1,o=t.length,a=o-1,l=n;l!=null&&++s<o;){var h=It(t[s]),m=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(s!=a){var y=l[h];m=r?r(y,h,l):i,m===i&&(m=yn(y)?y:Tt(t[s+1])?[]:{})}We(l,h,m),l=l[h]}return n}var Du=wr?function(n,t){return wr.set(n,t),n}:Jn,Ql=dr?function(n,t){return dr(n,"toString",{configurable:!0,enumerable:!1,value:rs(t),writable:!0})}:Jn;function jl(n){return Pr(be(n))}function ct(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=p(s);++r<s;)o[r]=n[r+t];return o}function nc(n,t){var e;return $t(n,function(r,s,o){return e=t(r,s,o),!e}),!!e}function Er(n,t,e){var r=0,s=n==null?r:n.length;if(typeof t=="number"&&t===t&&s<=Yt){for(;r<s;){var o=r+s>>>1,a=n[o];a!==null&&!et(a)&&(e?a<=t:a<t)?r=o+1:s=o}return s}return Ti(n,t,Jn,e)}function Ti(n,t,e,r){var s=0,o=n==null?0:n.length;if(o===0)return 0;t=e(t);for(var a=t!==t,l=t===null,h=et(t),m=t===i;s<o;){var y=vr((s+o)/2),S=e(n[y]),E=S!==i,b=S===null,U=S===S,V=et(S);if(a)var B=r||U;else m?B=U&&(r||E):l?B=U&&E&&(r||!b):h?B=U&&E&&!b&&(r||!V):b||V?B=!1:B=r?S<=t:S<t;B?s=y+1:o=y}return Nn(o,Je)}function Pu(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!xt(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function Fu(n){return typeof n=="number"?n:et(n)?Rn:+n}function tt(n){if(typeof n=="string")return n;if(H(n))return xn(n,tt)+"";if(et(n))return gu?gu.call(n):"";var t=n+"";return t=="0"&&1/n==-vn?"-0":t}function Gt(n,t,e){var r=-1,s=ir,o=n.length,a=!0,l=[],h=l;if(e)a=!1,s=ui;else if(o>=v){var m=t?null:cc(n);if(m)return ur(m);a=!1,s=Oe,h=new ue}else h=t?[]:l;n:for(;++r<o;){var y=n[r],S=t?t(y):y;if(y=e||y!==0?y:0,a&&S===S){for(var E=h.length;E--;)if(h[E]===S)continue n;t&&h.push(S),l.push(y)}else s(h,S,e)||(h!==l&&h.push(S),l.push(y))}return l}function Oi(n,t){return t=Ht(t,n),n=ao(n,t),n==null||delete n[It(ht(t))]}function Uu(n,t,e,r){return Ge(n,t,e(fe(n,t)),r)}function Cr(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?ct(n,r?0:o,r?o+1:s):ct(n,r?o+1:0,r?s:o)}function Bu(n,t){var e=n;return e instanceof Q&&(e=e.value()),oi(t,function(r,s){return s.func.apply(s.thisArg,Wt([r],s.args))},e)}function Di(n,t,e){var r=n.length;if(r<2)return r?Gt(n[0]):[];for(var s=-1,o=p(r);++s<r;)for(var a=n[s],l=-1;++l<r;)l!=s&&(o[s]=Ne(o[s]||a,n[l],t,e));return Gt(Bn(o,1),t,e)}function Wu(n,t,e){for(var r=-1,s=n.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:i;e(a,n[r],l)}return a}function Pi(n){return Cn(n)?n:[]}function Fi(n){return typeof n=="function"?n:Jn}function Ht(n,t){return H(n)?n:Zi(n,t)?[n]:go(ln(n))}var tc=Y;function Zt(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:ct(n,t,e)}var Nu=Ga||function(n){return Un.clearTimeout(n)};function ku(n,t){if(t)return n.slice();var e=n.length,r=ou?ou(e):new n.constructor(e);return n.copy(r),r}function Ui(n){var t=new n.constructor(n.byteLength);return new hr(t).set(new hr(n)),t}function ec(n,t){var e=t?Ui(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}function rc(n){var t=new n.constructor(n.source,Ss.exec(n));return t.lastIndex=n.lastIndex,t}function ic(n){return Be?hn(Be.call(n)):{}}function $u(n,t){var e=t?Ui(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function Gu(n,t){if(n!==t){var e=n!==i,r=n===null,s=n===n,o=et(n),a=t!==i,l=t===null,h=t===t,m=et(t);if(!l&&!m&&!o&&n>t||o&&a&&h&&!l&&!m||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!m&&n<t||m&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function sc(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,a=s.length,l=e.length;++r<a;){var h=Gu(s[r],o[r]);if(h){if(r>=l)return h;var m=e[r];return h*(m=="desc"?-1:1)}}return n.index-t.index}function Hu(n,t,e,r){for(var s=-1,o=n.length,a=e.length,l=-1,h=t.length,m=Tn(o-a,0),y=p(h+m),S=!r;++l<h;)y[l]=t[l];for(;++s<a;)(S||s<o)&&(y[e[s]]=n[s]);for(;m--;)y[l++]=n[s++];return y}function Zu(n,t,e,r){for(var s=-1,o=n.length,a=-1,l=e.length,h=-1,m=t.length,y=Tn(o-l,0),S=p(y+m),E=!r;++s<y;)S[s]=n[s];for(var b=s;++h<m;)S[b+h]=t[h];for(;++a<l;)(E||s<o)&&(S[b+e[a]]=n[s++]);return S}function Vn(n,t){var e=-1,r=n.length;for(t||(t=p(r));++e<r;)t[e]=n[e];return t}function St(n,t,e,r){var s=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var l=t[o],h=r?r(e[l],n[l],l,e,n):i;h===i&&(h=n[l]),s?Mt(e,l,h):We(e,l,h)}return e}function uc(n,t){return St(n,Hi(n),t)}function oc(n,t){return St(n,ro(n),t)}function Lr(n,t){return function(e,r){var s=H(e)?ha:Rl,o=t?t():{};return s(e,n,D(r,2),o)}}function Ce(n){return Y(function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=n.length>3&&typeof o=="function"?(s--,o):i,a&&Hn(e[0],e[1],a)&&(o=s<3?i:o,s=1),t=hn(t);++r<s;){var l=e[r];l&&n(t,l,r,o)}return t})}function Ku(n,t){return function(e,r){if(e==null)return e;if(!Yn(e))return n(e,r);for(var s=e.length,o=t?s:-1,a=hn(e);(t?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function qu(n){return function(t,e,r){for(var s=-1,o=hn(t),a=r(t),l=a.length;l--;){var h=a[n?l:++s];if(e(o[h],h,o)===!1)break}return t}}function fc(n,t,e){var r=t&F,s=He(n);function o(){var a=this&&this!==Un&&this instanceof o?s:n;return a.apply(r?e:this,arguments)}return o}function zu(n){return function(t){t=ln(t);var e=xe(t)?vt(t):i,r=e?e[0]:t.charAt(0),s=e?Zt(e,1).join(""):t.slice(1);return r[n]()+s}}function Le(n){return function(t){return oi(qo(Ko(t).replace(Qf,"")),n,"")}}function He(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Ee(n.prototype),r=n.apply(e,t);return yn(r)?r:e}}function ac(n,t,e){var r=He(n);function s(){for(var o=arguments.length,a=p(o),l=o,h=Me(s);l--;)a[l]=arguments[l];var m=o<3&&a[0]!==h&&a[o-1]!==h?[]:Nt(a,h);if(o-=m.length,o<e)return Qu(n,t,Mr,s.placeholder,i,a,m,i,i,e-o);var y=this&&this!==Un&&this instanceof s?r:n;return jn(y,this,a)}return s}function Vu(n){return function(t,e,r){var s=hn(t);if(!Yn(t)){var o=D(e,3);t=Fn(t),e=function(l){return o(s[l],l,s)}}var a=n(t,e,r);return a>-1?s[o?t[a]:a]:i}}function Yu(n){return bt(function(t){var e=t.length,r=e,s=at.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new ft(w);if(s&&!a&&Or(o)=="wrapper")var a=new at([],!0)}for(r=a?r:e;++r<e;){o=t[r];var l=Or(o),h=l=="wrapper"?$i(o):i;h&&Ki(h[0])&&h[1]==(en|nn|mn|Dn)&&!h[4].length&&h[9]==1?a=a[Or(h[0])].apply(a,h[3]):a=o.length==1&&Ki(o)?a[l]():a.thru(o)}return function(){var m=arguments,y=m[0];if(a&&m.length==1&&H(y))return a.plant(y).value();for(var S=0,E=e?t[S].apply(this,m):y;++S<e;)E=t[S].call(this,E);return E}})}function Mr(n,t,e,r,s,o,a,l,h,m){var y=t&en,S=t&F,E=t&rn,b=t&(nn|On),U=t&pn,V=E?i:He(n);function B(){for(var X=arguments.length,tn=p(X),rt=X;rt--;)tn[rt]=arguments[rt];if(b)var Zn=Me(B),it=ya(tn,Zn);if(r&&(tn=Hu(tn,r,s,b)),o&&(tn=Zu(tn,o,a,b)),X-=it,b&&X<m){var Ln=Nt(tn,Zn);return Qu(n,t,Mr,B.placeholder,e,tn,Ln,l,h,m-X)}var mt=S?e:this,Pt=E?mt[n]:n;return X=tn.length,l?tn=Rc(tn,l):U&&X>1&&tn.reverse(),y&&h<X&&(tn.length=h),this&&this!==Un&&this instanceof B&&(Pt=V||He(Pt)),Pt.apply(mt,tn)}return B}function Xu(n,t){return function(e,r){return Bl(e,n,t(r),{})}}function Rr(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=tt(e),r=tt(r)):(e=Fu(e),r=Fu(r)),s=n(e,r)}return s}}function Bi(n){return bt(function(t){return t=xn(t,nt(D())),Y(function(e){var r=this;return n(t,function(s){return jn(s,r,e)})})})}function br(n,t){t=t===i?" ":tt(t);var e=t.length;if(e<2)return e?bi(t,n):t;var r=bi(t,_r(n/me(t)));return xe(t)?Zt(vt(r),0,n).join(""):r.slice(0,n)}function lc(n,t,e,r){var s=t&F,o=He(n);function a(){for(var l=-1,h=arguments.length,m=-1,y=r.length,S=p(y+h),E=this&&this!==Un&&this instanceof a?o:n;++m<y;)S[m]=r[m];for(;h--;)S[m++]=arguments[++l];return jn(E,s?e:this,S)}return a}function Ju(n){return function(t,e,r){return r&&typeof r!="number"&&Hn(t,e,r)&&(e=r=i),t=Dt(t),e===i?(e=t,t=0):e=Dt(e),r=r===i?t<e?1:-1:Dt(r),Yl(t,e,r,n)}}function Tr(n){return function(t,e){return typeof t=="string"&&typeof e=="string"||(t=gt(t),e=gt(e)),n(t,e)}}function Qu(n,t,e,r,s,o,a,l,h,m){var y=t&nn,S=y?a:i,E=y?i:a,b=y?o:i,U=y?i:o;t|=y?mn:Wn,t&=~(y?Wn:mn),t&An||(t&=~(F|rn));var V=[n,t,s,b,S,U,E,l,h,m],B=e.apply(i,V);return Ki(n)&&lo(B,V),B.placeholder=r,co(B,n,t)}function Wi(n){var t=bn[n];return function(e,r){if(e=gt(e),r=r==null?0:Nn(z(r),292),r&&cu(e)){var s=(ln(e)+"e").split("e"),o=t(s[0]+"e"+(+s[1]+r));return s=(ln(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return t(e)}}var cc=Se&&1/ur(new Se([,-0]))[1]==vn?function(n){return new Se(n)}:us;function ju(n){return function(t){var e=kn(t);return e==qn?pi(t):e==Qn?Ma(t):ma(t,n(t))}}function Rt(n,t,e,r,s,o,a,l){var h=t&rn;if(!h&&typeof n!="function")throw new ft(w);var m=r?r.length:0;if(m||(t&=~(mn|Wn),r=s=i),a=a===i?a:Tn(z(a),0),l=l===i?l:z(l),m-=s?s.length:0,t&Wn){var y=r,S=s;r=s=i}var E=h?i:$i(n),b=[n,t,e,r,s,y,S,o,a,l];if(E&&Cc(b,E),n=b[0],t=b[1],e=b[2],r=b[3],s=b[4],l=b[9]=b[9]===i?h?0:n.length:Tn(b[9]-m,0),!l&&t&(nn|On)&&(t&=~(nn|On)),!t||t==F)var U=fc(n,t,e);else t==nn||t==On?U=ac(n,t,l):(t==mn||t==(F|mn))&&!s.length?U=lc(n,t,e,r):U=Mr.apply(i,b);var V=E?Du:lo;return co(V(U,b),n,t)}function no(n,t,e,r){return n===i||xt(n,Ae[e])&&!cn.call(r,e)?t:n}function to(n,t,e,r,s,o){return yn(n)&&yn(t)&&(o.set(t,n),Ir(n,t,i,to,o),o.delete(t)),n}function hc(n){return qe(n)?i:n}function eo(n,t,e,r,s,o){var a=e&J,l=n.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var m=o.get(n),y=o.get(t);if(m&&y)return m==t&&y==n;var S=-1,E=!0,b=e&on?new ue:i;for(o.set(n,t),o.set(t,n);++S<l;){var U=n[S],V=t[S];if(r)var B=a?r(V,U,S,t,n,o):r(U,V,S,n,t,o);if(B!==i){if(B)continue;E=!1;break}if(b){if(!fi(t,function(X,tn){if(!Oe(b,tn)&&(U===X||s(U,X,e,r,o)))return b.push(tn)})){E=!1;break}}else if(!(U===V||s(U,V,e,r,o))){E=!1;break}}return o.delete(n),o.delete(t),E}function gc(n,t,e,r,s,o,a){switch(e){case T:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case R:return!(n.byteLength!=t.byteLength||!o(new hr(n),new hr(t)));case Xt:case Et:case Jt:return xt(+n,+t);case de:return n.name==t.name&&n.message==t.message;case Qt:case jt:return n==t+"";case qn:var l=pi;case Qn:var h=r&J;if(l||(l=ur),n.size!=t.size&&!h)return!1;var m=a.get(n);if(m)return m==t;r|=on,a.set(n,t);var y=eo(l(n),l(t),r,s,o,a);return a.delete(n),y;case ne:if(Be)return Be.call(n)==Be.call(t)}return!1}function pc(n,t,e,r,s,o){var a=e&J,l=Ni(n),h=l.length,m=Ni(t),y=m.length;if(h!=y&&!a)return!1;for(var S=h;S--;){var E=l[S];if(!(a?E in t:cn.call(t,E)))return!1}var b=o.get(n),U=o.get(t);if(b&&U)return b==t&&U==n;var V=!0;o.set(n,t),o.set(t,n);for(var B=a;++S<h;){E=l[S];var X=n[E],tn=t[E];if(r)var rt=a?r(tn,X,E,t,n,o):r(X,tn,E,n,t,o);if(!(rt===i?X===tn||s(X,tn,e,r,o):rt)){V=!1;break}B||(B=E=="constructor")}if(V&&!B){var Zn=n.constructor,it=t.constructor;Zn!=it&&"constructor"in n&&"constructor"in t&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof it=="function"&&it instanceof it)&&(V=!1)}return o.delete(n),o.delete(t),V}function bt(n){return zi(fo(n,i,wo),n+"")}function Ni(n){return Au(n,Fn,Hi)}function ki(n){return Au(n,Xn,ro)}var $i=wr?function(n){return wr.get(n)}:us;function Or(n){for(var t=n.name+"",e=Ie[t],r=cn.call(Ie,t)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==n)return s.name}return t}function Me(n){var t=cn.call(u,"placeholder")?u:n;return t.placeholder}function D(){var n=u.iteratee||is;return n=n===is?Eu:n,arguments.length?n(arguments[0],arguments[1]):n}function Dr(n,t){var e=n.__data__;return Ac(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Gi(n){for(var t=Fn(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,uo(s)]}return t}function ae(n,t){var e=Ea(n,t);return Iu(e)?e:i}function dc(n){var t=cn.call(n,ie),e=n[ie];try{n[ie]=i;var r=!0}catch{}var s=lr.call(n);return r&&(t?n[ie]=e:delete n[ie]),s}var Hi=_i?function(n){return n==null?[]:(n=hn(n),Bt(_i(n),function(t){return au.call(n,t)}))}:os,ro=_i?function(n){for(var t=[];n;)Wt(t,Hi(n)),n=gr(n);return t}:os,kn=Gn;(vi&&kn(new vi(new ArrayBuffer(1)))!=T||Pe&&kn(new Pe)!=qn||wi&&kn(wi.resolve())!=nr||Se&&kn(new Se)!=Qn||Fe&&kn(new Fe)!=A)&&(kn=function(n){var t=Gn(n),e=t==_t?n.constructor:i,r=e?le(e):"";if(r)switch(r){case Ja:return T;case Qa:return qn;case ja:return nr;case nl:return Qn;case tl:return A}return t});function _c(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=Nn(t,n+a);break;case"takeRight":n=Tn(n,t-a);break}}return{start:n,end:t}}function vc(n){var t=n.match(Sf);return t?t[1].split(If):[]}function io(n,t,e){t=Ht(t,n);for(var r=-1,s=t.length,o=!1;++r<s;){var a=It(t[r]);if(!(o=n!=null&&e(n,a)))break;n=n[a]}return o||++r!=s?o:(s=n==null?0:n.length,!!s&&kr(s)&&Tt(a,s)&&(H(n)||ce(n)))}function wc(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&cn.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function so(n){return typeof n.constructor=="function"&&!Ze(n)?Ee(gr(n)):{}}function xc(n,t,e){var r=n.constructor;switch(t){case R:return Ui(n);case Xt:case Et:return new r(+n);case T:return ec(n,e);case $:case sn:case K:case un:case wn:case En:case zn:case te:case ee:return $u(n,e);case qn:return new r;case Jt:case jt:return new r(n);case Qt:return rc(n);case Qn:return new r;case ne:return ic(n)}}function mc(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(Af,`{
/* [wrapped with `+t+`] */
`)}function yc(n){return H(n)||ce(n)||!!(lu&&n&&n[lu])}function Tt(n,t){var e=typeof n;return t=t??Mn,!!t&&(e=="number"||e!="symbol"&&Df.test(n))&&n>-1&&n%1==0&&n<t}function Hn(n,t,e){if(!yn(e))return!1;var r=typeof t;return(r=="number"?Yn(e)&&Tt(t,e.length):r=="string"&&t in e)?xt(e[t],n):!1}function Zi(n,t){if(H(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||et(n)?!0:wf.test(n)||!vf.test(n)||t!=null&&n in hn(t)}function Ac(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Ki(n){var t=Or(n),e=u[t];if(typeof e!="function"||!(t in Q.prototype))return!1;if(n===e)return!0;var r=$i(e);return!!r&&n===r[0]}function Sc(n){return!!uu&&uu in n}var Ic=fr?Ot:fs;function Ze(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Ae;return n===e}function uo(n){return n===n&&!yn(n)}function oo(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==i||n in hn(e))}}function Ec(n){var t=Wr(n,function(r){return e.size===P&&e.clear(),r}),e=t.cache;return t}function Cc(n,t){var e=n[1],r=t[1],s=e|r,o=s<(F|rn|en),a=r==en&&e==nn||r==en&&e==Dn&&n[7].length<=t[8]||r==(en|Dn)&&t[7].length<=t[8]&&e==nn;if(!(o||a))return n;r&F&&(n[2]=t[2],s|=e&F?0:An);var l=t[3];if(l){var h=n[3];n[3]=h?Hu(h,l,t[4]):l,n[4]=h?Nt(n[3],W):t[4]}return l=t[5],l&&(h=n[5],n[5]=h?Zu(h,l,t[6]):l,n[6]=h?Nt(n[5],W):t[6]),l=t[7],l&&(n[7]=l),r&en&&(n[8]=n[8]==null?t[8]:Nn(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}function Lc(n){var t=[];if(n!=null)for(var e in hn(n))t.push(e);return t}function Mc(n){return lr.call(n)}function fo(n,t,e){return t=Tn(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=Tn(r.length-t,0),a=p(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=p(t+1);++s<t;)l[s]=r[s];return l[t]=e(a),jn(n,this,l)}}function ao(n,t){return t.length<2?n:fe(n,ct(t,0,-1))}function Rc(n,t){for(var e=n.length,r=Nn(t.length,e),s=Vn(n);r--;){var o=t[r];n[r]=Tt(o,e)?s[o]:i}return n}function qi(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var lo=ho(Du),Ke=Za||function(n,t){return Un.setTimeout(n,t)},zi=ho(Ql);function co(n,t,e){var r=t+"";return zi(n,mc(r,bc(vc(r),e)))}function ho(n){var t=0,e=0;return function(){var r=Va(),s=Kn-(r-e);if(e=r,s>0){if(++t>=_n)return arguments[0]}else t=0;return n.apply(i,arguments)}}function Pr(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=Ri(e,s),a=n[o];n[o]=n[e],n[e]=a}return n.length=t,n}var go=Ec(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(xf,function(e,r,s,o){t.push(s?o.replace(Lf,"$1"):r||e)}),t});function It(n){if(typeof n=="string"||et(n))return n;var t=n+"";return t=="0"&&1/n==-vn?"-0":t}function le(n){if(n!=null){try{return ar.call(n)}catch{}try{return n+""}catch{}}return""}function bc(n,t){return ot(Te,function(e){var r="_."+e[0];t&e[1]&&!ir(n,r)&&n.push(r)}),n.sort()}function po(n){if(n instanceof Q)return n.clone();var t=new at(n.__wrapped__,n.__chain__);return t.__actions__=Vn(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Tc(n,t,e){(e?Hn(n,t,e):t===i)?t=1:t=Tn(z(t),0);var r=n==null?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,a=p(_r(r/t));s<r;)a[o++]=ct(n,s,s+=t);return a}function Oc(n){for(var t=-1,e=n==null?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s}function Dc(){var n=arguments.length;if(!n)return[];for(var t=p(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return Wt(H(e)?Vn(e):[e],Bn(t,1))}var Pc=Y(function(n,t){return Cn(n)?Ne(n,Bn(t,1,Cn,!0)):[]}),Fc=Y(function(n,t){var e=ht(t);return Cn(e)&&(e=i),Cn(n)?Ne(n,Bn(t,1,Cn,!0),D(e,2)):[]}),Uc=Y(function(n,t){var e=ht(t);return Cn(e)&&(e=i),Cn(n)?Ne(n,Bn(t,1,Cn,!0),i,e):[]});function Bc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:z(t),ct(n,t<0?0:t,r)):[]}function Wc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:z(t),t=r-t,ct(n,0,t<0?0:t)):[]}function Nc(n,t){return n&&n.length?Cr(n,D(t,3),!0,!0):[]}function kc(n,t){return n&&n.length?Cr(n,D(t,3),!0):[]}function $c(n,t,e,r){var s=n==null?0:n.length;return s?(e&&typeof e!="number"&&Hn(n,t,e)&&(e=0,r=s),Dl(n,t,e,r)):[]}function _o(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:z(e);return s<0&&(s=Tn(r+s,0)),sr(n,D(t,3),s)}function vo(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=z(e),s=e<0?Tn(r+s,0):Nn(s,r-1)),sr(n,D(t,3),s,!0)}function wo(n){var t=n==null?0:n.length;return t?Bn(n,1):[]}function Gc(n){var t=n==null?0:n.length;return t?Bn(n,vn):[]}function Hc(n,t){var e=n==null?0:n.length;return e?(t=t===i?1:z(t),Bn(n,t)):[]}function Zc(n){for(var t=-1,e=n==null?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r}function xo(n){return n&&n.length?n[0]:i}function Kc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:z(e);return s<0&&(s=Tn(r+s,0)),we(n,t,s)}function qc(n){var t=n==null?0:n.length;return t?ct(n,0,-1):[]}var zc=Y(function(n){var t=xn(n,Pi);return t.length&&t[0]===n[0]?Ii(t):[]}),Vc=Y(function(n){var t=ht(n),e=xn(n,Pi);return t===ht(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Ii(e,D(t,2)):[]}),Yc=Y(function(n){var t=ht(n),e=xn(n,Pi);return t=typeof t=="function"?t:i,t&&e.pop(),e.length&&e[0]===n[0]?Ii(e,i,t):[]});function Xc(n,t){return n==null?"":qa.call(n,t)}function ht(n){var t=n==null?0:n.length;return t?n[t-1]:i}function Jc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=z(e),s=s<0?Tn(r+s,0):Nn(s,r-1)),t===t?ba(n,t,s):sr(n,Qs,s,!0)}function Qc(n,t){return n&&n.length?Ru(n,z(t)):i}var jc=Y(mo);function mo(n,t){return n&&n.length&&t&&t.length?Mi(n,t):n}function nh(n,t,e){return n&&n.length&&t&&t.length?Mi(n,t,D(e,2)):n}function th(n,t,e){return n&&n.length&&t&&t.length?Mi(n,t,i,e):n}var eh=bt(function(n,t){var e=n==null?0:n.length,r=mi(n,t);return Ou(n,xn(t,function(s){return Tt(s,e)?+s:s}).sort(Gu)),r});function rh(n,t){var e=[];if(!(n&&n.length))return e;var r=-1,s=[],o=n.length;for(t=D(t,3);++r<o;){var a=n[r];t(a,r,n)&&(e.push(a),s.push(r))}return Ou(n,s),e}function Vi(n){return n==null?n:Xa.call(n)}function ih(n,t,e){var r=n==null?0:n.length;return r?(e&&typeof e!="number"&&Hn(n,t,e)?(t=0,e=r):(t=t==null?0:z(t),e=e===i?r:z(e)),ct(n,t,e)):[]}function sh(n,t){return Er(n,t)}function uh(n,t,e){return Ti(n,t,D(e,2))}function oh(n,t){var e=n==null?0:n.length;if(e){var r=Er(n,t);if(r<e&&xt(n[r],t))return r}return-1}function fh(n,t){return Er(n,t,!0)}function ah(n,t,e){return Ti(n,t,D(e,2),!0)}function lh(n,t){var e=n==null?0:n.length;if(e){var r=Er(n,t,!0)-1;if(xt(n[r],t))return r}return-1}function ch(n){return n&&n.length?Pu(n):[]}function hh(n,t){return n&&n.length?Pu(n,D(t,2)):[]}function gh(n){var t=n==null?0:n.length;return t?ct(n,1,t):[]}function ph(n,t,e){return n&&n.length?(t=e||t===i?1:z(t),ct(n,0,t<0?0:t)):[]}function dh(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:z(t),t=r-t,ct(n,t<0?0:t,r)):[]}function _h(n,t){return n&&n.length?Cr(n,D(t,3),!1,!0):[]}function vh(n,t){return n&&n.length?Cr(n,D(t,3)):[]}var wh=Y(function(n){return Gt(Bn(n,1,Cn,!0))}),xh=Y(function(n){var t=ht(n);return Cn(t)&&(t=i),Gt(Bn(n,1,Cn,!0),D(t,2))}),mh=Y(function(n){var t=ht(n);return t=typeof t=="function"?t:i,Gt(Bn(n,1,Cn,!0),i,t)});function yh(n){return n&&n.length?Gt(n):[]}function Ah(n,t){return n&&n.length?Gt(n,D(t,2)):[]}function Sh(n,t){return t=typeof t=="function"?t:i,n&&n.length?Gt(n,i,t):[]}function Yi(n){if(!(n&&n.length))return[];var t=0;return n=Bt(n,function(e){if(Cn(e))return t=Tn(e.length,t),!0}),hi(t,function(e){return xn(n,ai(e))})}function yo(n,t){if(!(n&&n.length))return[];var e=Yi(n);return t==null?e:xn(e,function(r){return jn(t,i,r)})}var Ih=Y(function(n,t){return Cn(n)?Ne(n,t):[]}),Eh=Y(function(n){return Di(Bt(n,Cn))}),Ch=Y(function(n){var t=ht(n);return Cn(t)&&(t=i),Di(Bt(n,Cn),D(t,2))}),Lh=Y(function(n){var t=ht(n);return t=typeof t=="function"?t:i,Di(Bt(n,Cn),i,t)}),Mh=Y(Yi);function Rh(n,t){return Wu(n||[],t||[],We)}function bh(n,t){return Wu(n||[],t||[],Ge)}var Th=Y(function(n){var t=n.length,e=t>1?n[t-1]:i;return e=typeof e=="function"?(n.pop(),e):i,yo(n,e)});function Ao(n){var t=u(n);return t.__chain__=!0,t}function Oh(n,t){return t(n),n}function Fr(n,t){return t(n)}var Dh=bt(function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return mi(o,n)};return t>1||this.__actions__.length||!(r instanceof Q)||!Tt(e)?this.thru(s):(r=r.slice(e,+e+(t?1:0)),r.__actions__.push({func:Fr,args:[s],thisArg:i}),new at(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(i),o}))});function Ph(){return Ao(this)}function Fh(){return new at(this.value(),this.__chain__)}function Uh(){this.__values__===i&&(this.__values__=Uo(this.value()));var n=this.__index__>=this.__values__.length,t=n?i:this.__values__[this.__index__++];return{done:n,value:t}}function Bh(){return this}function Wh(n){for(var t,e=this;e instanceof mr;){var r=po(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t}function Nh(){var n=this.__wrapped__;if(n instanceof Q){var t=n;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:Fr,args:[Vi],thisArg:i}),new at(t,this.__chain__)}return this.thru(Vi)}function kh(){return Bu(this.__wrapped__,this.__actions__)}var $h=Lr(function(n,t,e){cn.call(n,e)?++n[e]:Mt(n,e,1)});function Gh(n,t,e){var r=H(n)?Xs:Ol;return e&&Hn(n,t,e)&&(t=i),r(n,D(t,3))}function Hh(n,t){var e=H(n)?Bt:mu;return e(n,D(t,3))}var Zh=Vu(_o),Kh=Vu(vo);function qh(n,t){return Bn(Ur(n,t),1)}function zh(n,t){return Bn(Ur(n,t),vn)}function Vh(n,t,e){return e=e===i?1:z(e),Bn(Ur(n,t),e)}function So(n,t){var e=H(n)?ot:$t;return e(n,D(t,3))}function Io(n,t){var e=H(n)?ga:xu;return e(n,D(t,3))}var Yh=Lr(function(n,t,e){cn.call(n,e)?n[e].push(t):Mt(n,e,[t])});function Xh(n,t,e,r){n=Yn(n)?n:be(n),e=e&&!r?z(e):0;var s=n.length;return e<0&&(e=Tn(s+e,0)),$r(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&we(n,t,e)>-1}var Jh=Y(function(n,t,e){var r=-1,s=typeof t=="function",o=Yn(n)?p(n.length):[];return $t(n,function(a){o[++r]=s?jn(t,a,e):ke(a,t,e)}),o}),Qh=Lr(function(n,t,e){Mt(n,e,t)});function Ur(n,t){var e=H(n)?xn:Cu;return e(n,D(t,3))}function jh(n,t,e,r){return n==null?[]:(H(t)||(t=t==null?[]:[t]),e=r?i:e,H(e)||(e=e==null?[]:[e]),bu(n,t,e))}var ng=Lr(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]});function tg(n,t,e){var r=H(n)?oi:nu,s=arguments.length<3;return r(n,D(t,4),e,s,$t)}function eg(n,t,e){var r=H(n)?pa:nu,s=arguments.length<3;return r(n,D(t,4),e,s,xu)}function rg(n,t){var e=H(n)?Bt:mu;return e(n,Nr(D(t,3)))}function ig(n){var t=H(n)?du:Xl;return t(n)}function sg(n,t,e){(e?Hn(n,t,e):t===i)?t=1:t=z(t);var r=H(n)?Ll:Jl;return r(n,t)}function ug(n){var t=H(n)?Ml:jl;return t(n)}function og(n){if(n==null)return 0;if(Yn(n))return $r(n)?me(n):n.length;var t=kn(n);return t==qn||t==Qn?n.size:Ci(n).length}function fg(n,t,e){var r=H(n)?fi:nc;return e&&Hn(n,t,e)&&(t=i),r(n,D(t,3))}var ag=Y(function(n,t){if(n==null)return[];var e=t.length;return e>1&&Hn(n,t[0],t[1])?t=[]:e>2&&Hn(t[0],t[1],t[2])&&(t=[t[0]]),bu(n,Bn(t,1),[])}),Br=Ha||function(){return Un.Date.now()};function lg(n,t){if(typeof t!="function")throw new ft(w);return n=z(n),function(){if(--n<1)return t.apply(this,arguments)}}function Eo(n,t,e){return t=e?i:t,t=n&&t==null?n.length:t,Rt(n,en,i,i,i,i,t)}function Co(n,t){var e;if(typeof t!="function")throw new ft(w);return n=z(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Xi=Y(function(n,t,e){var r=F;if(e.length){var s=Nt(e,Me(Xi));r|=mn}return Rt(n,r,t,e,s)}),Lo=Y(function(n,t,e){var r=F|rn;if(e.length){var s=Nt(e,Me(Lo));r|=mn}return Rt(t,r,n,e,s)});function Mo(n,t,e){t=e?i:t;var r=Rt(n,nn,i,i,i,i,i,t);return r.placeholder=Mo.placeholder,r}function Ro(n,t,e){t=e?i:t;var r=Rt(n,On,i,i,i,i,i,t);return r.placeholder=Ro.placeholder,r}function bo(n,t,e){var r,s,o,a,l,h,m=0,y=!1,S=!1,E=!0;if(typeof n!="function")throw new ft(w);t=gt(t)||0,yn(e)&&(y=!!e.leading,S="maxWait"in e,o=S?Tn(gt(e.maxWait)||0,t):o,E="trailing"in e?!!e.trailing:E);function b(Ln){var mt=r,Pt=s;return r=s=i,m=Ln,a=n.apply(Pt,mt),a}function U(Ln){return m=Ln,l=Ke(X,t),y?b(Ln):a}function V(Ln){var mt=Ln-h,Pt=Ln-m,Yo=t-mt;return S?Nn(Yo,o-Pt):Yo}function B(Ln){var mt=Ln-h,Pt=Ln-m;return h===i||mt>=t||mt<0||S&&Pt>=o}function X(){var Ln=Br();if(B(Ln))return tn(Ln);l=Ke(X,V(Ln))}function tn(Ln){return l=i,E&&r?b(Ln):(r=s=i,a)}function rt(){l!==i&&Nu(l),m=0,r=h=s=l=i}function Zn(){return l===i?a:tn(Br())}function it(){var Ln=Br(),mt=B(Ln);if(r=arguments,s=this,h=Ln,mt){if(l===i)return U(h);if(S)return Nu(l),l=Ke(X,t),b(h)}return l===i&&(l=Ke(X,t)),a}return it.cancel=rt,it.flush=Zn,it}var cg=Y(function(n,t){return wu(n,1,t)}),hg=Y(function(n,t,e){return wu(n,gt(t)||0,e)});function gg(n){return Rt(n,pn)}function Wr(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new ft(w);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=n.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new(Wr.Cache||Lt),e}Wr.Cache=Lt;function Nr(n){if(typeof n!="function")throw new ft(w);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function pg(n){return Co(2,n)}var dg=tc(function(n,t){t=t.length==1&&H(t[0])?xn(t[0],nt(D())):xn(Bn(t,1),nt(D()));var e=t.length;return Y(function(r){for(var s=-1,o=Nn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return jn(n,this,r)})}),Ji=Y(function(n,t){var e=Nt(t,Me(Ji));return Rt(n,mn,i,t,e)}),To=Y(function(n,t){var e=Nt(t,Me(To));return Rt(n,Wn,i,t,e)}),_g=bt(function(n,t){return Rt(n,Dn,i,i,i,t)});function vg(n,t){if(typeof n!="function")throw new ft(w);return t=t===i?t:z(t),Y(n,t)}function wg(n,t){if(typeof n!="function")throw new ft(w);return t=t==null?0:Tn(z(t),0),Y(function(e){var r=e[t],s=Zt(e,0,t);return r&&Wt(s,r),jn(n,this,s)})}function xg(n,t,e){var r=!0,s=!0;if(typeof n!="function")throw new ft(w);return yn(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),bo(n,t,{leading:r,maxWait:t,trailing:s})}function mg(n){return Eo(n,1)}function yg(n,t){return Ji(Fi(t),n)}function Ag(){if(!arguments.length)return[];var n=arguments[0];return H(n)?n:[n]}function Sg(n){return lt(n,Z)}function Ig(n,t){return t=typeof t=="function"?t:i,lt(n,Z,t)}function Eg(n){return lt(n,L|Z)}function Cg(n,t){return t=typeof t=="function"?t:i,lt(n,L|Z,t)}function Lg(n,t){return t==null||vu(n,t,Fn(t))}function xt(n,t){return n===t||n!==n&&t!==t}var Mg=Tr(Si),Rg=Tr(function(n,t){return n>=t}),ce=Su(function(){return arguments}())?Su:function(n){return In(n)&&cn.call(n,"callee")&&!au.call(n,"callee")},H=p.isArray,bg=Zs?nt(Zs):Wl;function Yn(n){return n!=null&&kr(n.length)&&!Ot(n)}function Cn(n){return In(n)&&Yn(n)}function Tg(n){return n===!0||n===!1||In(n)&&Gn(n)==Xt}var Kt=Ka||fs,Og=Ks?nt(Ks):Nl;function Dg(n){return In(n)&&n.nodeType===1&&!qe(n)}function Pg(n){if(n==null)return!0;if(Yn(n)&&(H(n)||typeof n=="string"||typeof n.splice=="function"||Kt(n)||Re(n)||ce(n)))return!n.length;var t=kn(n);if(t==qn||t==Qn)return!n.size;if(Ze(n))return!Ci(n).length;for(var e in n)if(cn.call(n,e))return!1;return!0}function Fg(n,t){return $e(n,t)}function Ug(n,t,e){e=typeof e=="function"?e:i;var r=e?e(n,t):i;return r===i?$e(n,t,i,e):!!r}function Qi(n){if(!In(n))return!1;var t=Gn(n);return t==de||t==Qe||typeof n.message=="string"&&typeof n.name=="string"&&!qe(n)}function Bg(n){return typeof n=="number"&&cu(n)}function Ot(n){if(!yn(n))return!1;var t=Gn(n);return t==_e||t==je||t==qr||t==Vr}function Oo(n){return typeof n=="number"&&n==z(n)}function kr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Mn}function yn(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function In(n){return n!=null&&typeof n=="object"}var Do=qs?nt(qs):$l;function Wg(n,t){return n===t||Ei(n,t,Gi(t))}function Ng(n,t,e){return e=typeof e=="function"?e:i,Ei(n,t,Gi(t),e)}function kg(n){return Po(n)&&n!=+n}function $g(n){if(Ic(n))throw new G(x);return Iu(n)}function Gg(n){return n===null}function Hg(n){return n==null}function Po(n){return typeof n=="number"||In(n)&&Gn(n)==Jt}function qe(n){if(!In(n)||Gn(n)!=_t)return!1;var t=gr(n);if(t===null)return!0;var e=cn.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&ar.call(e)==Na}var ji=zs?nt(zs):Gl;function Zg(n){return Oo(n)&&n>=-Mn&&n<=Mn}var Fo=Vs?nt(Vs):Hl;function $r(n){return typeof n=="string"||!H(n)&&In(n)&&Gn(n)==jt}function et(n){return typeof n=="symbol"||In(n)&&Gn(n)==ne}var Re=Ys?nt(Ys):Zl;function Kg(n){return n===i}function qg(n){return In(n)&&kn(n)==A}function zg(n){return In(n)&&Gn(n)==C}var Vg=Tr(Li),Yg=Tr(function(n,t){return n<=t});function Uo(n){if(!n)return[];if(Yn(n))return $r(n)?vt(n):Vn(n);if(De&&n[De])return La(n[De]());var t=kn(n),e=t==qn?pi:t==Qn?ur:be;return e(n)}function Dt(n){if(!n)return n===0?n:0;if(n=gt(n),n===vn||n===-vn){var t=n<0?-1:1;return t*yt}return n===n?n:0}function z(n){var t=Dt(n),e=t%1;return t===t?e?t-e:t:0}function Bo(n){return n?oe(z(n),0,Sn):0}function gt(n){if(typeof n=="number")return n;if(et(n))return Rn;if(yn(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=yn(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=tu(n);var e=bf.test(n);return e||Of.test(n)?la(n.slice(2),e?2:8):Rf.test(n)?Rn:+n}function Wo(n){return St(n,Xn(n))}function Xg(n){return n?oe(z(n),-Mn,Mn):n===0?n:0}function ln(n){return n==null?"":tt(n)}var Jg=Ce(function(n,t){if(Ze(t)||Yn(t)){St(t,Fn(t),n);return}for(var e in t)cn.call(t,e)&&We(n,e,t[e])}),No=Ce(function(n,t){St(t,Xn(t),n)}),Gr=Ce(function(n,t,e,r){St(t,Xn(t),n,r)}),Qg=Ce(function(n,t,e,r){St(t,Fn(t),n,r)}),jg=bt(mi);function np(n,t){var e=Ee(n);return t==null?e:_u(e,t)}var tp=Y(function(n,t){n=hn(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&Hn(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],a=Xn(o),l=-1,h=a.length;++l<h;){var m=a[l],y=n[m];(y===i||xt(y,Ae[m])&&!cn.call(n,m))&&(n[m]=o[m])}return n}),ep=Y(function(n){return n.push(i,to),jn(ko,i,n)});function rp(n,t){return Js(n,D(t,3),At)}function ip(n,t){return Js(n,D(t,3),Ai)}function sp(n,t){return n==null?n:yi(n,D(t,3),Xn)}function up(n,t){return n==null?n:yu(n,D(t,3),Xn)}function op(n,t){return n&&At(n,D(t,3))}function fp(n,t){return n&&Ai(n,D(t,3))}function ap(n){return n==null?[]:Sr(n,Fn(n))}function lp(n){return n==null?[]:Sr(n,Xn(n))}function ns(n,t,e){var r=n==null?i:fe(n,t);return r===i?e:r}function cp(n,t){return n!=null&&io(n,t,Pl)}function ts(n,t){return n!=null&&io(n,t,Fl)}var hp=Xu(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=lr.call(t)),n[t]=e},rs(Jn)),gp=Xu(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=lr.call(t)),cn.call(n,t)?n[t].push(e):n[t]=[e]},D),pp=Y(ke);function Fn(n){return Yn(n)?pu(n):Ci(n)}function Xn(n){return Yn(n)?pu(n,!0):Kl(n)}function dp(n,t){var e={};return t=D(t,3),At(n,function(r,s,o){Mt(e,t(r,s,o),r)}),e}function _p(n,t){var e={};return t=D(t,3),At(n,function(r,s,o){Mt(e,s,t(r,s,o))}),e}var vp=Ce(function(n,t,e){Ir(n,t,e)}),ko=Ce(function(n,t,e,r){Ir(n,t,e,r)}),wp=bt(function(n,t){var e={};if(n==null)return e;var r=!1;t=xn(t,function(o){return o=Ht(o,n),r||(r=o.length>1),o}),St(n,ki(n),e),r&&(e=lt(e,L|q|Z,hc));for(var s=t.length;s--;)Oi(e,t[s]);return e});function xp(n,t){return $o(n,Nr(D(t)))}var mp=bt(function(n,t){return n==null?{}:zl(n,t)});function $o(n,t){if(n==null)return{};var e=xn(ki(n),function(r){return[r]});return t=D(t),Tu(n,e,function(r,s){return t(r,s[0])})}function yp(n,t,e){t=Ht(t,n);var r=-1,s=t.length;for(s||(s=1,n=i);++r<s;){var o=n==null?i:n[It(t[r])];o===i&&(r=s,o=e),n=Ot(o)?o.call(n):o}return n}function Ap(n,t,e){return n==null?n:Ge(n,t,e)}function Sp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Ge(n,t,e,r)}var Go=ju(Fn),Ho=ju(Xn);function Ip(n,t,e){var r=H(n),s=r||Kt(n)||Re(n);if(t=D(t,4),e==null){var o=n&&n.constructor;s?e=r?new o:[]:yn(n)?e=Ot(o)?Ee(gr(n)):{}:e={}}return(s?ot:At)(n,function(a,l,h){return t(e,a,l,h)}),e}function Ep(n,t){return n==null?!0:Oi(n,t)}function Cp(n,t,e){return n==null?n:Uu(n,t,Fi(e))}function Lp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Uu(n,t,Fi(e),r)}function be(n){return n==null?[]:gi(n,Fn(n))}function Mp(n){return n==null?[]:gi(n,Xn(n))}function Rp(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=gt(e),e=e===e?e:0),t!==i&&(t=gt(t),t=t===t?t:0),oe(gt(n),t,e)}function bp(n,t,e){return t=Dt(t),e===i?(e=t,t=0):e=Dt(e),n=gt(n),Ul(n,t,e)}function Tp(n,t,e){if(e&&typeof e!="boolean"&&Hn(n,t,e)&&(t=e=i),e===i&&(typeof t=="boolean"?(e=t,t=i):typeof n=="boolean"&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Dt(n),t===i?(t=n,n=0):t=Dt(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=hu();return Nn(n+s*(t-n+aa("1e-"+((s+"").length-1))),t)}return Ri(n,t)}var Op=Le(function(n,t,e){return t=t.toLowerCase(),n+(e?Zo(t):t)});function Zo(n){return es(ln(n).toLowerCase())}function Ko(n){return n=ln(n),n&&n.replace(Pf,Aa).replace(jf,"")}function Dp(n,t,e){n=ln(n),t=tt(t);var r=n.length;e=e===i?r:oe(z(e),0,r);var s=e;return e-=t.length,e>=0&&n.slice(e,s)==t}function Pp(n){return n=ln(n),n&&pf.test(n)?n.replace(ys,Sa):n}function Fp(n){return n=ln(n),n&&mf.test(n)?n.replace(Jr,"\\$&"):n}var Up=Le(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Bp=Le(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),Wp=zu("toLowerCase");function Np(n,t,e){n=ln(n),t=z(t);var r=t?me(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return br(vr(s),e)+n+br(_r(s),e)}function kp(n,t,e){n=ln(n),t=z(t);var r=t?me(n):0;return t&&r<t?n+br(t-r,e):n}function $p(n,t,e){n=ln(n),t=z(t);var r=t?me(n):0;return t&&r<t?br(t-r,e)+n:n}function Gp(n,t,e){return e||t==null?t=0:t&&(t=+t),Ya(ln(n).replace(Qr,""),t||0)}function Hp(n,t,e){return(e?Hn(n,t,e):t===i)?t=1:t=z(t),bi(ln(n),t)}function Zp(){var n=arguments,t=ln(n[0]);return n.length<3?t:t.replace(n[1],n[2])}var Kp=Le(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()});function qp(n,t,e){return e&&typeof e!="number"&&Hn(n,t,e)&&(t=e=i),e=e===i?Sn:e>>>0,e?(n=ln(n),n&&(typeof t=="string"||t!=null&&!ji(t))&&(t=tt(t),!t&&xe(n))?Zt(vt(n),0,e):n.split(t,e)):[]}var zp=Le(function(n,t,e){return n+(e?" ":"")+es(t)});function Vp(n,t,e){return n=ln(n),e=e==null?0:oe(z(e),0,n.length),t=tt(t),n.slice(e,e+t.length)==t}function Yp(n,t,e){var r=u.templateSettings;e&&Hn(n,t,e)&&(t=i),n=ln(n),t=Gr({},t,r,no);var s=Gr({},t.imports,r.imports,no),o=Fn(s),a=gi(s,o),l,h,m=0,y=t.interpolate||tr,S="__p += '",E=di((t.escape||tr).source+"|"+y.source+"|"+(y===As?Mf:tr).source+"|"+(t.evaluate||tr).source+"|$","g"),b="//# sourceURL="+(cn.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ia+"]")+`
`;n.replace(E,function(B,X,tn,rt,Zn,it){return tn||(tn=rt),S+=n.slice(m,it).replace(Ff,Ia),X&&(l=!0,S+=`' +
__e(`+X+`) +
'`),Zn&&(h=!0,S+=`';
`+Zn+`;
__p += '`),tn&&(S+=`' +
((__t = (`+tn+`)) == null ? '' : __t) +
'`),m=it+B.length,B}),S+=`';
`;var U=cn.call(t,"variable")&&t.variable;if(!U)S=`with (obj) {
`+S+`
}
`;else if(Cf.test(U))throw new G(O);S=(h?S.replace(Xr,""):S).replace(Ut,"$1").replace(hf,"$1;"),S="function("+(U||"obj")+`) {
`+(U?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+S+`return __p
}`;var V=zo(function(){return fn(o,b+"return "+S).apply(i,a)});if(V.source=S,Qi(V))throw V;return V}function Xp(n){return ln(n).toLowerCase()}function Jp(n){return ln(n).toUpperCase()}function Qp(n,t,e){if(n=ln(n),n&&(e||t===i))return tu(n);if(!n||!(t=tt(t)))return n;var r=vt(n),s=vt(t),o=eu(r,s),a=ru(r,s)+1;return Zt(r,o,a).join("")}function jp(n,t,e){if(n=ln(n),n&&(e||t===i))return n.slice(0,su(n)+1);if(!n||!(t=tt(t)))return n;var r=vt(n),s=ru(r,vt(t))+1;return Zt(r,0,s).join("")}function nd(n,t,e){if(n=ln(n),n&&(e||t===i))return n.replace(Qr,"");if(!n||!(t=tt(t)))return n;var r=vt(n),s=eu(r,vt(t));return Zt(r,s).join("")}function td(n,t){var e=Pn,r=an;if(yn(t)){var s="separator"in t?t.separator:s;e="length"in t?z(t.length):e,r="omission"in t?tt(t.omission):r}n=ln(n);var o=n.length;if(xe(n)){var a=vt(n);o=a.length}if(e>=o)return n;var l=e-me(r);if(l<1)return r;var h=a?Zt(a,0,l).join(""):n.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),ji(s)){if(n.slice(l).search(s)){var m,y=h;for(s.global||(s=di(s.source,ln(Ss.exec(s))+"g")),s.lastIndex=0;m=s.exec(y);)var S=m.index;h=h.slice(0,S===i?l:S)}}else if(n.indexOf(tt(s),l)!=l){var E=h.lastIndexOf(s);E>-1&&(h=h.slice(0,E))}return h+r}function ed(n){return n=ln(n),n&&gf.test(n)?n.replace(ms,Ta):n}var rd=Le(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),es=zu("toUpperCase");function qo(n,t,e){return n=ln(n),t=e?i:t,t===i?Ca(n)?Pa(n):va(n):n.match(t)||[]}var zo=Y(function(n,t){try{return jn(n,i,t)}catch(e){return Qi(e)?e:new G(e)}}),id=bt(function(n,t){return ot(t,function(e){e=It(e),Mt(n,e,Xi(n[e],n))}),n});function sd(n){var t=n==null?0:n.length,e=D();return n=t?xn(n,function(r){if(typeof r[1]!="function")throw new ft(w);return[e(r[0]),r[1]]}):[],Y(function(r){for(var s=-1;++s<t;){var o=n[s];if(jn(o[0],this,r))return jn(o[1],this,r)}})}function ud(n){return Tl(lt(n,L))}function rs(n){return function(){return n}}function od(n,t){return n==null||n!==n?t:n}var fd=Yu(),ad=Yu(!0);function Jn(n){return n}function is(n){return Eu(typeof n=="function"?n:lt(n,L))}function ld(n){return Lu(lt(n,L))}function cd(n,t){return Mu(n,lt(t,L))}var hd=Y(function(n,t){return function(e){return ke(e,n,t)}}),gd=Y(function(n,t){return function(e){return ke(n,e,t)}});function ss(n,t,e){var r=Fn(t),s=Sr(t,r);e==null&&!(yn(t)&&(s.length||!r.length))&&(e=t,t=n,n=this,s=Sr(t,Fn(t)));var o=!(yn(e)&&"chain"in e)||!!e.chain,a=Ot(n);return ot(s,function(l){var h=t[l];n[l]=h,a&&(n.prototype[l]=function(){var m=this.__chain__;if(o||m){var y=n(this.__wrapped__),S=y.__actions__=Vn(this.__actions__);return S.push({func:h,args:arguments,thisArg:n}),y.__chain__=m,y}return h.apply(n,Wt([this.value()],arguments))})}),n}function pd(){return Un._===this&&(Un._=ka),this}function us(){}function dd(n){return n=z(n),Y(function(t){return Ru(t,n)})}var _d=Bi(xn),vd=Bi(Xs),wd=Bi(fi);function Vo(n){return Zi(n)?ai(It(n)):Vl(n)}function xd(n){return function(t){return n==null?i:fe(n,t)}}var md=Ju(),yd=Ju(!0);function os(){return[]}function fs(){return!1}function Ad(){return{}}function Sd(){return""}function Id(){return!0}function Ed(n,t){if(n=z(n),n<1||n>Mn)return[];var e=Sn,r=Nn(n,Sn);t=D(t),n-=Sn;for(var s=hi(r,t);++e<n;)t(e);return s}function Cd(n){return H(n)?xn(n,It):et(n)?[n]:Vn(go(ln(n)))}function Ld(n){var t=++Wa;return ln(n)+t}var Md=Rr(function(n,t){return n+t},0),Rd=Wi("ceil"),bd=Rr(function(n,t){return n/t},1),Td=Wi("floor");function Od(n){return n&&n.length?Ar(n,Jn,Si):i}function Dd(n,t){return n&&n.length?Ar(n,D(t,2),Si):i}function Pd(n){return js(n,Jn)}function Fd(n,t){return js(n,D(t,2))}function Ud(n){return n&&n.length?Ar(n,Jn,Li):i}function Bd(n,t){return n&&n.length?Ar(n,D(t,2),Li):i}var Wd=Rr(function(n,t){return n*t},1),Nd=Wi("round"),kd=Rr(function(n,t){return n-t},0);function $d(n){return n&&n.length?ci(n,Jn):0}function Gd(n,t){return n&&n.length?ci(n,D(t,2)):0}return u.after=lg,u.ary=Eo,u.assign=Jg,u.assignIn=No,u.assignInWith=Gr,u.assignWith=Qg,u.at=jg,u.before=Co,u.bind=Xi,u.bindAll=id,u.bindKey=Lo,u.castArray=Ag,u.chain=Ao,u.chunk=Tc,u.compact=Oc,u.concat=Dc,u.cond=sd,u.conforms=ud,u.constant=rs,u.countBy=$h,u.create=np,u.curry=Mo,u.curryRight=Ro,u.debounce=bo,u.defaults=tp,u.defaultsDeep=ep,u.defer=cg,u.delay=hg,u.difference=Pc,u.differenceBy=Fc,u.differenceWith=Uc,u.drop=Bc,u.dropRight=Wc,u.dropRightWhile=Nc,u.dropWhile=kc,u.fill=$c,u.filter=Hh,u.flatMap=qh,u.flatMapDeep=zh,u.flatMapDepth=Vh,u.flatten=wo,u.flattenDeep=Gc,u.flattenDepth=Hc,u.flip=gg,u.flow=fd,u.flowRight=ad,u.fromPairs=Zc,u.functions=ap,u.functionsIn=lp,u.groupBy=Yh,u.initial=qc,u.intersection=zc,u.intersectionBy=Vc,u.intersectionWith=Yc,u.invert=hp,u.invertBy=gp,u.invokeMap=Jh,u.iteratee=is,u.keyBy=Qh,u.keys=Fn,u.keysIn=Xn,u.map=Ur,u.mapKeys=dp,u.mapValues=_p,u.matches=ld,u.matchesProperty=cd,u.memoize=Wr,u.merge=vp,u.mergeWith=ko,u.method=hd,u.methodOf=gd,u.mixin=ss,u.negate=Nr,u.nthArg=dd,u.omit=wp,u.omitBy=xp,u.once=pg,u.orderBy=jh,u.over=_d,u.overArgs=dg,u.overEvery=vd,u.overSome=wd,u.partial=Ji,u.partialRight=To,u.partition=ng,u.pick=mp,u.pickBy=$o,u.property=Vo,u.propertyOf=xd,u.pull=jc,u.pullAll=mo,u.pullAllBy=nh,u.pullAllWith=th,u.pullAt=eh,u.range=md,u.rangeRight=yd,u.rearg=_g,u.reject=rg,u.remove=rh,u.rest=vg,u.reverse=Vi,u.sampleSize=sg,u.set=Ap,u.setWith=Sp,u.shuffle=ug,u.slice=ih,u.sortBy=ag,u.sortedUniq=ch,u.sortedUniqBy=hh,u.split=qp,u.spread=wg,u.tail=gh,u.take=ph,u.takeRight=dh,u.takeRightWhile=_h,u.takeWhile=vh,u.tap=Oh,u.throttle=xg,u.thru=Fr,u.toArray=Uo,u.toPairs=Go,u.toPairsIn=Ho,u.toPath=Cd,u.toPlainObject=Wo,u.transform=Ip,u.unary=mg,u.union=wh,u.unionBy=xh,u.unionWith=mh,u.uniq=yh,u.uniqBy=Ah,u.uniqWith=Sh,u.unset=Ep,u.unzip=Yi,u.unzipWith=yo,u.update=Cp,u.updateWith=Lp,u.values=be,u.valuesIn=Mp,u.without=Ih,u.words=qo,u.wrap=yg,u.xor=Eh,u.xorBy=Ch,u.xorWith=Lh,u.zip=Mh,u.zipObject=Rh,u.zipObjectDeep=bh,u.zipWith=Th,u.entries=Go,u.entriesIn=Ho,u.extend=No,u.extendWith=Gr,ss(u,u),u.add=Md,u.attempt=zo,u.camelCase=Op,u.capitalize=Zo,u.ceil=Rd,u.clamp=Rp,u.clone=Sg,u.cloneDeep=Eg,u.cloneDeepWith=Cg,u.cloneWith=Ig,u.conformsTo=Lg,u.deburr=Ko,u.defaultTo=od,u.divide=bd,u.endsWith=Dp,u.eq=xt,u.escape=Pp,u.escapeRegExp=Fp,u.every=Gh,u.find=Zh,u.findIndex=_o,u.findKey=rp,u.findLast=Kh,u.findLastIndex=vo,u.findLastKey=ip,u.floor=Td,u.forEach=So,u.forEachRight=Io,u.forIn=sp,u.forInRight=up,u.forOwn=op,u.forOwnRight=fp,u.get=ns,u.gt=Mg,u.gte=Rg,u.has=cp,u.hasIn=ts,u.head=xo,u.identity=Jn,u.includes=Xh,u.indexOf=Kc,u.inRange=bp,u.invoke=pp,u.isArguments=ce,u.isArray=H,u.isArrayBuffer=bg,u.isArrayLike=Yn,u.isArrayLikeObject=Cn,u.isBoolean=Tg,u.isBuffer=Kt,u.isDate=Og,u.isElement=Dg,u.isEmpty=Pg,u.isEqual=Fg,u.isEqualWith=Ug,u.isError=Qi,u.isFinite=Bg,u.isFunction=Ot,u.isInteger=Oo,u.isLength=kr,u.isMap=Do,u.isMatch=Wg,u.isMatchWith=Ng,u.isNaN=kg,u.isNative=$g,u.isNil=Hg,u.isNull=Gg,u.isNumber=Po,u.isObject=yn,u.isObjectLike=In,u.isPlainObject=qe,u.isRegExp=ji,u.isSafeInteger=Zg,u.isSet=Fo,u.isString=$r,u.isSymbol=et,u.isTypedArray=Re,u.isUndefined=Kg,u.isWeakMap=qg,u.isWeakSet=zg,u.join=Xc,u.kebabCase=Up,u.last=ht,u.lastIndexOf=Jc,u.lowerCase=Bp,u.lowerFirst=Wp,u.lt=Vg,u.lte=Yg,u.max=Od,u.maxBy=Dd,u.mean=Pd,u.meanBy=Fd,u.min=Ud,u.minBy=Bd,u.stubArray=os,u.stubFalse=fs,u.stubObject=Ad,u.stubString=Sd,u.stubTrue=Id,u.multiply=Wd,u.nth=Qc,u.noConflict=pd,u.noop=us,u.now=Br,u.pad=Np,u.padEnd=kp,u.padStart=$p,u.parseInt=Gp,u.random=Tp,u.reduce=tg,u.reduceRight=eg,u.repeat=Hp,u.replace=Zp,u.result=yp,u.round=Nd,u.runInContext=c,u.sample=ig,u.size=og,u.snakeCase=Kp,u.some=fg,u.sortedIndex=sh,u.sortedIndexBy=uh,u.sortedIndexOf=oh,u.sortedLastIndex=fh,u.sortedLastIndexBy=ah,u.sortedLastIndexOf=lh,u.startCase=zp,u.startsWith=Vp,u.subtract=kd,u.sum=$d,u.sumBy=Gd,u.template=Yp,u.times=Ed,u.toFinite=Dt,u.toInteger=z,u.toLength=Bo,u.toLower=Xp,u.toNumber=gt,u.toSafeInteger=Xg,u.toString=ln,u.toUpper=Jp,u.trim=Qp,u.trimEnd=jp,u.trimStart=nd,u.truncate=td,u.unescape=ed,u.uniqueId=Ld,u.upperCase=rd,u.upperFirst=es,u.each=So,u.eachRight=Io,u.first=xo,ss(u,function(){var n={};return At(u,function(t,e){cn.call(u.prototype,e)||(n[e]=t)}),n}(),{chain:!1}),u.VERSION=g,ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){u[n].placeholder=u}),ot(["drop","take"],function(n,t){Q.prototype[n]=function(e){e=e===i?1:Tn(z(e),0);var r=this.__filtered__&&!t?new Q(this):this.clone();return r.__filtered__?r.__takeCount__=Nn(e,r.__takeCount__):r.__views__.push({size:Nn(e,Sn),type:n+(r.__dir__<0?"Right":"")}),r},Q.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),ot(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e==pt||e==k;Q.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:D(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),ot(["head","last"],function(n,t){var e="take"+(t?"Right":"");Q.prototype[n]=function(){return this[e](1).value()[0]}}),ot(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");Q.prototype[n]=function(){return this.__filtered__?new Q(this):this[e](1)}}),Q.prototype.compact=function(){return this.filter(Jn)},Q.prototype.find=function(n){return this.filter(n).head()},Q.prototype.findLast=function(n){return this.reverse().find(n)},Q.prototype.invokeMap=Y(function(n,t){return typeof n=="function"?new Q(this):this.map(function(e){return ke(e,n,t)})}),Q.prototype.reject=function(n){return this.filter(Nr(D(n)))},Q.prototype.slice=function(n,t){n=z(n);var e=this;return e.__filtered__&&(n>0||t<0)?new Q(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(t=z(t),e=t<0?e.dropRight(-t):e.take(t-n)),e)},Q.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Q.prototype.toArray=function(){return this.take(Sn)},At(Q.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=u[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);s&&(u.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof Q,m=l[0],y=h||H(a),S=function(X){var tn=s.apply(u,Wt([X],l));return r&&E?tn[0]:tn};y&&e&&typeof m=="function"&&m.length!=1&&(h=y=!1);var E=this.__chain__,b=!!this.__actions__.length,U=o&&!E,V=h&&!b;if(!o&&y){a=V?a:new Q(this);var B=n.apply(a,l);return B.__actions__.push({func:Fr,args:[S],thisArg:i}),new at(B,E)}return U&&V?n.apply(this,l):(B=this.thru(S),U?r?B.value()[0]:B.value():B)})}),ot(["pop","push","shift","sort","splice","unshift"],function(n){var t=or[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);u.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(H(o)?o:[],s)}return this[e](function(a){return t.apply(H(a)?a:[],s)})}}),At(Q.prototype,function(n,t){var e=u[t];if(e){var r=e.name+"";cn.call(Ie,r)||(Ie[r]=[]),Ie[r].push({name:t,func:e})}}),Ie[Mr(i,rn).name]=[{name:"wrapper",func:i}],Q.prototype.clone=el,Q.prototype.reverse=rl,Q.prototype.value=il,u.prototype.at=Dh,u.prototype.chain=Ph,u.prototype.commit=Fh,u.prototype.next=Uh,u.prototype.plant=Wh,u.prototype.reverse=Nh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=kh,u.prototype.first=u.prototype.head,De&&(u.prototype[De]=Bh),u},ye=Fa();re?((re.exports=ye)._=ye,ii._=ye):Un._=ye}).call(ze)})(Kr,Kr.exports);Kr.exports;const D0="/assets/top_view-4gr4hmiW.svg",P0="/assets/redTractor-Cl-uV8Ra.svg",F0="/assets/yellowTractor-DVC8ngGG.svg",U0="/assets/blackTractor-DklC2nUm.svg",B0="AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA";function W0({showCard:I,loadingVehicle:f,vehicleData:i}){const{center:g,selectedParameterList:v,selectedVehicle:x,vehicleList:w,icons:O,locationData:d,placesData:P,imeiNumbers:W,onlineVehicle:L,loading:q,services_loading:Z}=Vt(A=>A.liveMap),{mode:J,styles:on,vehicles_details:F}=Vt(A=>A.dashboard),rn=j.useRef(null),{collapsed:An}=Vt(A=>A.auth),[nn,On]=j.useState(null),[mn,Wn]=j.useState(""),[en,Dn]=j.useState([]),[pn,Pn]=j.useState(),[an,_n]=j.useState(null);j.useState("");const[Kn,pt]=j.useState(),[dt,k]=j.useState(!1),[vn,Mn]=j.useState(null),yt=of(),Rn={},Sn=j.useRef([]),Je=j.useRef(null),Yt=j.useRef({}),{isLoaded:Te,loadError:Ft}=u0({googleMapsApiKey:`${B0}`,loadingElement:N.jsx(e0,{})});j.useEffect(()=>{Te&&On(window.google.maps)},[Te]),j.useEffect(()=>{var A,C,R,T;if(Object.keys(x).length>0){const sn=((vn==null?void 0:vn.length)>0?vn:d).filter(K=>{var un;return((un=K==null?void 0:K.latestDocument)==null?void 0:un.imei)===(x==null?void 0:x.imei)});if(sn.length>0){Dn(sn);const K={lat:(C=(A=sn[0])==null?void 0:A.latestDocument)==null?void 0:C.lat,lng:(T=(R=sn[0])==null?void 0:R.latestDocument)==null?void 0:T.lng};yt(ps(K))}}},[d,x]),j.useEffect(()=>{if(!(Object.keys(x).length>0)){const A=d.filter(C=>i.some(R=>R.value===C.latestDocument.imei));Dn(A),Mn(A)}},[d,x,i]),j.useEffect(()=>{var A,C,R,T;if(Object.keys(x).length>0){const sn=((vn==null?void 0:vn.length)>0?vn:d).filter(K=>{var un;return((un=K==null?void 0:K.latestDocument)==null?void 0:un.imei)===(x==null?void 0:x.imei)});if(sn.length>0){Dn(sn);const K={lat:(C=(A=sn[0])==null?void 0:A.latestDocument)==null?void 0:C.lat,lng:(T=(R=sn[0])==null?void 0:R.latestDocument)==null?void 0:T.lng};yt(ps(K))}}else{const $=d.filter(sn=>i.some(K=>K.value===sn.latestDocument.imei));Dn($),Mn($)}},[d,x]),j.useEffect(()=>{Pn(v)},[v]),j.useEffect(()=>{yt(Kd({})),k(!0)},[x]),j.useEffect(()=>{if(console.log("before: ",en),!nn)return;const A=Je.current;let C=null;return(async()=>{console.log("after: ",en);const T=await pe(en,A);C&&C.clearMarkers(),C=Jt(T,A),ls.on("locationinfo",$=>{console.log("locationinfo: ",$),_t($,Sn),Mn(sn=>{const K=Array.isArray(sn)?sn:[],un=K.findIndex(wn=>Number(wn.latestDocument.imei)===Number($.imei));if(un!==-1){const wn=[...K];return wn[un]={...wn[un],latestDocument:{...wn[un].latestDocument,...$}},wn}else return[...K,{_id:$.imei,latestDocument:$}]})})})(),()=>{C&&C.clearMarkers(),Object.keys(Yt.current).forEach(T=>cancelAnimationFrame(Yt.current[T])),ls.off("locationinfo")}},[nn,en,ls,pn,Sn,d]);const pe=(A,C)=>A.map(R=>{const T=R.latestDocument.imei,$=Sn.current[T]||qr(R,C);return Sn.current[T]&&Xt(R,$),$}),qr=(A,C)=>{const R=A.latestDocument.imei,T=new nn.Marker({position:{lat:A.latestDocument.lat,lng:A.latestDocument.lng},map:C,icon:Et(A)});return T.addListener("click",()=>je(A,T,C)),Sn.current[R]=T,T},Xt=async(A,C)=>{var un;const R=C.getPosition(),T=((un=C.getIcon())==null?void 0:un.rotation)||0,$={lat:A.latestDocument.lat,lng:A.latestDocument.lng},sn=A.latestDocument.heading||0;qn(C,R,$,T,sn);const K=await Et(A);C.setIcon(K)},Et=async A=>{var K,un,wn,En,zn;const C=(K=A==null?void 0:A.latestDocument)==null?void 0:K.imei;nr(C);const R=Qt(A==null?void 0:A.latestDocument),T=((un=A==null?void 0:A.latestDocument)==null?void 0:un.heading)||0;return Qe((wn=A==null?void 0:A.latestDocument)==null?void 0:wn.imei)&&de((En=A==null?void 0:A.latestDocument)==null?void 0:En.imei),{url:await _e(R,T),fillOpacity:2,strokeWeight:1,scale:4.5,rotation:(zn=A==null?void 0:A.latestDocument)==null?void 0:zn.heading,size:new nn.Size(30,30),scaledSize:new nn.Size(30,30)}},Qe=A=>L.includes(Number(A)),de=A=>d==null?void 0:d.some(C=>Number(C.latestDocument.imei)===Number(A)&&C.latestDocument.speed>0&&(C.latestDocument.ignition===!0||C.latestDocument.ignition===1)),_e=(A,C,R,T=80)=>{const $=`${A}-${C}-${T}-${R}`;if(Rn[$])return Promise.resolve(Rn[$]);const sn=document.createElement("canvas"),K=sn.getContext("2d");sn.width=T,sn.height=T;const un=new Image;return un.src=A,new Promise(wn=>{un.onload=()=>{if(K.clearRect(0,0,sn.width,sn.height),K.translate(T/2,T/2),K.rotate(C*Math.PI/180),K.translate(-T/2,-T/2),K.drawImage(un,0,0,T,T),R){const te=T-30-5,ee=T-30-5;K.beginPath(),K.arc(te,ee,30/2,0,Math.PI*2),K.fillStyle=R,K.fill()}const En=sn.toDataURL("image/png");Rn[$]=En,wn(En)},un.onerror=En=>{console.error("Error loading image for rotation:",En),wn(A)}})},je=(A,C,R)=>{Qn(A.latestDocument._id,A,C,R),jt(A.latestDocument.imei)},qn=(A,C,R,T,$)=>{const K=performance.now(),un=()=>{const wn=performance.now()-K,En=Math.min(wn/500,1),zn=C.lat()+En*(R.lat-C.lat()),te=C.lng()+En*(R.lng-C.lng()),ee=($-T+360)%360-180,Xr=(T+ee*En+360)%360;A.setPosition({lat:zn,lng:te});const Ut=A.getIcon();Ut&&typeof Ut=="object"&&A.setIcon({...Ut,rotation:Xr}),En<1?Yt.current[A.getPosition()]=requestAnimationFrame(un):(A.setPosition(R),Ut&&typeof Ut=="object"&&A.setIcon({...Ut,rotation:$}),delete Yt.current[A.getPosition()])};Yt.current[A.getPosition()]=requestAnimationFrame(un)},Jt=(A,C)=>new O0({map:C,markers:A,renderer:{render:({count:R,position:T})=>zr(R,T)}}),zr=(A,C)=>{const R=40+Math.min(A*2,40),T=30;let $;return A<10?$={start:"#76c7c0",end:"#34a853"}:A<50?$={start:"#fbbc05",end:"#f2994a"}:$={start:"#f45c42",end:"#d32f2f"},new nn.Marker({position:C,icon:{url:`data:image/svg+xml,${encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="${R}" height="${R}" viewBox="0 0 100 100">
            <defs>
              <radialGradient id="gradient" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="${$.start}" />
                <stop offset="100%" stop-color="${$.end}" />
              </radialGradient>
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.5)" />
              </filter>
            </defs>
            <!-- Outer Pulsating Ring -->
            <circle cx="50" cy="50" r="48" fill="url(#gradient)" filter="url(#shadow)" stroke="#ffffff" stroke-width="3" />
            <!-- Decorative Inner Ring -->
            <circle cx="50" cy="50" r="38" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 2" />
            <!-- Star Decoration -->
            <polygon points="50,15 54,38 70,38 57,50 62,68 50,57 38,68 43,50 30,38 46,38" fill="#ffffff" opacity="0.4" />
            <!-- Count Text -->
            <text x="50" y="55" font-size="${T}" fill="black" text-anchor="middle" font-family="'Courier New', monospace" font-weight="bold">
              ${A}
            </text>
          </svg>
        `)}`,scaledSize:new nn.Size(R,R)},label:null})},_t=async(A,C,R)=>{var sn;const T=A.imei,$=C.current[T];if($){const K=$.getPosition(),un=((sn=$.getIcon())==null?void 0:sn.rotation)||0,wn={lat:A.lat,lng:A.lng},En=A.heading||0;qn($,K,wn,un,En);const zn=await Et({latestDocument:A});$.setIcon(zn)}},nr=A=>{if(!A)return"motorBike";const C=Vr(A);return C||console.error(`No vehicle type found for IMEI: ${A}, defaulting to motorBike`),C||"motorBike"},Vr=A=>{if(!F||F.length===0)return console.error("vehicles_details is not available"),null;const C=F.find(R=>(R==null?void 0:R.value)===A&&(R==null?void 0:R.vehilce_type));return C||console.error(`No vehicle found for IMEI: ${A}`),C?C.vehilce_type:null},Qt=A=>{let{speed:C,ignition:R,imei:T}=A;if(Qe(T)){if(!R)return P0;if(C>0&&R)return D0;if(C<=0&&R)return F0}else return U0},Qn=(A,C,R,T)=>{var un;yt(qd(C.latestDocument.imei)),rn.current||(rn.current=new nn.InfoWindow);const $=rn.current,K=`
      <div>
        <h3>Registration No: ${((un=w.find(wn=>{var En,zn;return((En=wn==null?void 0:wn.imei[0])==null?void 0:En.mac_id)===((zn=C==null?void 0:C.latestDocument)==null?void 0:zn.imei)}))==null?void 0:un.registration_id)||""}</h3>
      </div>
    `;an===A?($.close(),_n(null)):($.setContent(K),$.open(T,R),_n(A))},jt=A=>{const C=F&&(F==null?void 0:F.length)>0&&F.find(R=>(R==null?void 0:R.value)===A&&R);pt(C||null)},ne=()=>{k(!dt)};if(Ft)return"Error loading maps";if(!Te)return"Loading maps";if(!nn)return null;const Yr={height:"93vh",width:"100%",transition:"transform 0.5s ease-in-out"};return N.jsxs(N.Fragment,{children:[N.jsx($n,{sx:{position:"absolute",top:"780px",left:An?"74px":"250px",zIndex:1,background:sf.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:N.jsxs(uf,{sx:{color:"white"},onClick:ne,children:[dt?"Hide":"Show"," Vehicle Info",N.jsx(a0,{})]})}),dt===!0&&N.jsx(w0,{handleVehicleInfo:ne,udpatedParams:vn}),N.jsxs(o0,{id:"map",mapContainerStyle:Yr,zoom:Object.keys(x).length>0?15:5.8,center:g,onLoad:A=>{Je.current=A},options:{styles:J?on:""},children:[Object.keys(x).length>0&&N.jsx(r0,{setPlace:Wn,place:mn}),Z||f?N.jsx($n,{sx:{position:"absolute",top:"50%",left:"50%"},children:N.jsx(h0,{})}):P&&P.length>0&&P.map((A,C)=>{var R,T;return N.jsx(f0,{position:{lat:parseFloat((R=A==null?void 0:A.location)==null?void 0:R.lat),lng:parseFloat((T=A==null?void 0:A.location)==null?void 0:T.lng)},animation:window.google.maps.Animation.DROP,icon:{path:O[`${mn}`],fillOpacity:2,strokeWeight:1,scale:1,fillColor:"orange"}},C)})]})]})}function f_(){const{locationData:I,selectedVehicle:f,selectedParameterList:i}=Vt(an=>an.liveMap),{mode:g,selectedVehicleGroup:v}=Vt(an=>an.dashboard),x=t0(g),[w,O]=j.useState([]),{w_customer_id:d}=Vt(an=>an.auth),[P,W]=j.useState(),[L,q]=j.useState(!1),[Z,J]=j.useState(!1),[on,F]=j.useState([]),[rn,An]=j.useState(!0),[nn,On]=j.useState(!1),[mn,Wn]=j.useState(!1);let en=of();j.useEffect(()=>{en(zd({}))},[]),j.useEffect(()=>{Dn()},[]),j.useEffect(()=>{var an;if(Object.keys(f).length>0){const _n=(I==null?void 0:I.length)>0&&(I==null?void 0:I.filter(k=>Number(k.latestDocument.imei)===Number(f==null?void 0:f.imei)));if((_n==null?void 0:_n.length)<=0){as.error("Data not available for this vehicle",{id:"clipboard"});return}const{lat:Kn,lng:pt}=((an=_n==null?void 0:_n[0])==null?void 0:an.latestDocument)??{},dt={lat:Kn||Jo.lat,lng:pt||Jo.lat};en(ps(dt))}},[f,I]),j.useEffect(()=>{F([]),en(Xo([{reg_id:"",imei:"",params:[]}]))},[f]);const Dn=async()=>{try{On(!0);let an=[],_n=[];const Kn=await en(Vd({w_customer_id:d}));if(Array.isArray(Kn.payload)){Kn.payload.forEach(k=>{var vn,Mn,yt,Rn;Array.isArray(k.imei)&&k.imei.length>0&&((vn=k.imei[0])!=null&&vn.mac_id)?(an.push({id:k.id,label:k.registration_id,value:(Mn=k.imei[0])==null?void 0:Mn.mac_id,vehilce_type:k==null?void 0:k.segment,chassis_no:k==null?void 0:k.chassis_no,engine_no:k==null?void 0:k.engine_no,workShop:k==null?void 0:k.workshop,registration_id:k==null?void 0:k.registration_id,sell_date:k==null?void 0:k.sell_date,customer_name:k==null?void 0:k.customer_name,vehicle_model:(yt=k==null?void 0:k.vehicle_model)==null?void 0:yt.name,vehicle_group:k==null?void 0:k.vehicle_group}),_n.push((Rn=k.imei[0])==null?void 0:Rn.mac_id)):console.error("IMEI data not found for item:",k)});const pt="one",dt=_n;_n.length>0&&en(Yd({type:pt,imei:dt})),O(an),en(Xd(an)),en(Jd({w_customer_id:d})),On(!1)}else On(!1),console.error("Unexpected data format:",Kn),as.error("Unexpected data format:")}catch(an){console.error("Error fetching vehicle data:",an),as.error(`Error fetching vehicle data: ${an}`)}},pn=async an=>{const{label:_n,imei:Kn,id:pt,reg_id:dt,checked:k}=an;W(Rn=>Rn.map(Sn=>Sn.id===pt?{...Sn,checked:!k}:Sn));let vn=[...on],Mn=[...on];if(!k)I.forEach(Rn=>{Rn.latestDocument.imei===Kn&&(vn.push({label:_n,value:Rn.latestDocument[_n==="maininputvoltage"?"mainInputVoltage":_n]}),Mn=vn,F(vn))});else{let Rn=on.filter(Sn=>Sn.label!==_n);Mn=Rn,F(Rn)}console.log("tempParamList",Mn),en(Xo([{reg_id:dt,imei:Kn,params:Mn}]))},Pn=w.filter(an=>Object.keys(v).length===0||an.vehicle_group===v.id);return N.jsxs("div",{className:"app",children:[N.jsx(n0,{}),N.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[N.jsx(Qd,{title:"Live Map",setShowVehicles:q,showVehicles:L,showParameters:Z,setShowParameters:J,setShowCard:An,showCard:rn,setShowVehiclesGroup:Wn,showVehiclesGroup:mn}),N.jsx(s0,{setShowVehiclesGroup:Wn,showVehiclesGroup:mn,where:"livemap"}),N.jsxs($n,{style:{display:"flex",width:"100%",height:"95vh"},children:[N.jsx($n,{style:{width:L||Z?"80%":"100%"},children:N.jsx(W0,{showCard:rn,loadingVehicle:nn,vehicleData:Pn})}),L&&N.jsx($n,{style:{width:"20%",backgroundColor:x.grey[100]},children:N.jsx(jd,{vehicleData:Pn,title:"Live Map",setParameterData:W,loadingVehicle:nn,setShowVehicles:q,showVehicles:L,showParameters:Z,setShowParameters:J})}),Z&&N.jsx($n,{style:{width:"20%",backgroundColor:x.grey[100]},children:N.jsx(i0,{parametersData:P,setParameterData:W,handleParameterChange:pn})})]})]})]})}export{f_ as default};
