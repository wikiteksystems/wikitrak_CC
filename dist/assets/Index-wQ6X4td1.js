import{c as hn,s as gn,_ as K,h as dt,r as Ze,a as mn,d as xn,m as yn,b as y,e as vn,f as Ye,j as i,g as le,u as bn,i as ft,k as We,l as Ge,n as jn,o as st,p as ce,q as ze,t as kn,v as Ft,T as U,R as I,w as at,I as Nt,x as Te,y as ue,z as Y,A as pt,B as Sn,C as de,D as Mt,E as et,F as Vt,G as re,H as An,J as Pn,K as ye,L as Xe,M as _e,P as Bt,N as ve,O as ht,Q as Yt,S as gt,U as Wt,V as wn,W as On,X as Cn,Y as Tn,Z as _n,$ as Rn,a0 as Dn,a1 as In,a2 as En,a3 as Ln,a4 as $n,a5 as Fn,a6 as Nn}from"./index-pD_d63wZ.js";import{s as Pe}from"./Socket-DLjvxrzW.js";import{t as Gt}from"./SearchTab-BKGpJaKY.js";import{V as Mn}from"./VehicleMenu-D7xGJO7n.js";import{f as G,_ as zt,a as Kt,b as Vn,c as Bn,i as he,T as lt,p as te,L as Q,d as ct,e as Ht,D as Yn,G as Wn,u as Gn,C as zn,g as be,h as fe,S as Kn,A as Hn,j as Un,k as mt,l as qn,m as ge,n as Zn,o as Xn,q as Ut,r as Jn,s as Re,w as xt,t as Ie,v as Qn,x as er,R as qt,B as tr,y as nr,X as rr,Y as or,z as Zt,E as ir,F as sr}from"./TopBar-Cevd1nvk.js";import"./proj-XQwXs9DQ.js";import{d as ar,T as Ee,L as lr}from"./LeftSideBar2-BFrjLZIK.js";import{u as cr,G as ur,M as dr}from"./esm-BiePtVgf.js";import{B as R}from"./CircularProgress-Chb3pEA7.js";import{u as Xt,f as Jt,I as fr,F as yt,a as vt,S as bt,M as De}from"./menu2-BR6KNEdu.js";import{f as pr}from"./TripMap-Be8gbzmQ.js";import{S as hr}from"./Switch-QAN5EdHv.js";import{V as gr}from"./VehicleGroups-DHAumTcx.js";import{d as mr}from"./Close-Dd_nqzBG.js";import{N as xr}from"./NewLoader-2N10PELv.js";import{T as Qt,a as en,b as tn,c as Fe,d as V,e as nn}from"./TableRow-C6YbXvJG.js";import{C as Ne}from"./Checkbox-C-hwEssR.js";import{T as rn,a as yr}from"./TablePagination-D-r2mCRv.js";import{D as ut,a as vr,b as on,c as sn}from"./DialogTitle-DgCSgCxR.js";import{T as br,a as jt}from"./Tabs-B_fK1pG7.js";import"./index-D16cUTl3.js";import"./NotificationsNone-BMnqhHeH.js";import"./createSvgIcon-CG4pyggZ.js";import"./useControlled-WjluQWOt.js";import"./usePreviousProps-9BKdXeaS.js";import"./redTractor-NXgVJyvR.js";import"./TripGraph-BKDrTxcu.js";import"./Info-sGst6J4b.js";const jr=["component","direction","spacing","divider","children","className","useFlexGap"],kr=hn(),Sr=gn("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Ar(e){return bn({props:e,name:"MuiStack",defaultTheme:kr})}function Pr(e,t){const r=y.Children.toArray(e).filter(Boolean);return r.reduce((n,o,s)=>(n.push(o),s<r.length-1&&n.push(y.cloneElement(t,{key:`separator-${s}`})),n),[])}const wr=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Or=({ownerState:e,theme:t})=>{let r=K({display:"flex",flexDirection:"column"},dt({theme:t},Ze({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=mn(t),o=Object.keys(t.breakpoints.values).reduce((c,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(c[l]=!0),c),{}),s=Ze({values:e.direction,base:o}),a=Ze({values:e.spacing,base:o});typeof s=="object"&&Object.keys(s).forEach((c,l,h)=>{if(!s[c]){const j=l>0?s[h[l-1]]:"column";s[c]=j}}),r=xn(r,dt({theme:t},a,(c,l)=>e.useFlexGap?{gap:ft(n,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${wr(l?s[l]:e.direction)}`]:ft(n,c)}}))}return r=yn(t.breakpoints,r),r};function Cr(e={}){const{createStyledComponent:t=Sr,useThemeProps:r=Ar,componentName:n="MuiStack"}=e,o=()=>We({root:["root"]},c=>Ge(n,c),{}),s=t(Or);return y.forwardRef(function(c,l){const h=r(c),v=vn(h),{component:j="div",direction:w="column",spacing:x=0,divider:f,children:k,className:A,useFlexGap:_=!1}=v,D=Ye(v,jr),m={direction:w,spacing:x,useFlexGap:_},O=o();return i.jsx(s,K({as:j,ownerState:m,ref:l,className:le(O.root,A)},D,{children:f?Pr(k,f):k}))})}const Tr=jn(i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function _r(e){return Ge("MuiAvatar",e)}st("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Rr=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Dr=e=>{const{classes:t,variant:r,colorDefault:n}=e;return We({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},_r,t)},Ir=ce("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:K({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:K({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Er=ce("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Lr=ce(Tr,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function $r({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[o,s]=y.useState(!1);return y.useEffect(()=>{if(!r&&!n)return;s(!1);let a=!0;const u=new Image;return u.onload=()=>{a&&s("loaded")},u.onerror=()=>{a&&s("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=r,n&&(u.srcset=n),()=>{a=!1}},[e,t,r,n]),o}const Fr=y.forwardRef(function(t,r){const n=ze({props:t,name:"MuiAvatar"}),{alt:o,children:s,className:a,component:u="div",slots:c={},slotProps:l={},imgProps:h,sizes:v,src:j,srcSet:w,variant:x="circular"}=n,f=Ye(n,Rr);let k=null;const A=$r(K({},h,{src:j,srcSet:w})),_=j||w,D=_&&A!=="error",m=K({},n,{colorDefault:!D,component:u,variant:x}),O=Dr(m),[C,E]=kn("img",{className:O.img,elementType:Er,externalForwardedProps:{slots:c,slotProps:{img:K({},h,l.img)}},additionalProps:{alt:o,src:j,srcSet:w,sizes:v},ownerState:m});return D?k=i.jsx(C,K({},E)):s||s===0?k=s:_&&o?k=o[0]:k=i.jsx(Lr,{ownerState:m,className:O.fallback}),i.jsx(Ir,K({as:u,ownerState:m,className:le(O.root,a),ref:r},f,{children:k}))}),an=Fr,Nr=Cr({createStyledComponent:ce("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ze({props:e,name:"MuiStack"})}),Mr=Nr;function Vr(e){return Ge("MuiFormControlLabel",e)}const Br=st("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),we=Br,Yr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Wr=e=>{const{classes:t,disabled:r,labelPlacement:n,error:o,required:s}=e,a={root:["root",r&&"disabled",`labelPlacement${Ft(n)}`,o&&"error",s&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]};return We(a,Vr,t)},Gr=ce("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${we.label}`]:t.label},t.root,t[`labelPlacement${Ft(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>K({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${we.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${we.label}`]:{[`&.${we.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),zr=ce("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${we.error}`]:{color:(e.vars||e).palette.error.main}})),Kr=y.forwardRef(function(t,r){var n,o;const s=ze({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:u={},control:c,disabled:l,disableTypography:h,label:v,labelPlacement:j="end",required:w,slotProps:x={}}=s,f=Ye(s,Yr),k=Xt(),A=(n=l??c.props.disabled)!=null?n:k==null?void 0:k.disabled,_=w??c.props.required,D={disabled:A,required:_};["checked","name","onChange","value","inputRef"].forEach(M=>{typeof c.props[M]>"u"&&typeof s[M]<"u"&&(D[M]=s[M])});const m=Jt({props:s,muiFormControl:k,states:["error"]}),O=K({},s,{disabled:A,labelPlacement:j,required:_,error:m.error}),C=Wr(O),E=(o=x.typography)!=null?o:u.typography;let T=v;return T!=null&&T.type!==U&&!h&&(T=i.jsx(U,K({component:"span"},E,{className:le(C.label,E==null?void 0:E.className),children:T}))),i.jsxs(Gr,K({className:le(C.root,a),ownerState:O,ref:r},f,{children:[y.cloneElement(c,D),_?i.jsxs(Mr,{display:"block",children:[T,i.jsxs(zr,{ownerState:O,"aria-hidden":!0,className:C.asterisk,children:["â€‰","*"]})]}):T]}))}),Hr=Kr;function Ur(e){return Ge("MuiFormGroup",e)}st("MuiFormGroup",["root","row","error"]);const qr=["className","row"],Zr=e=>{const{classes:t,row:r,error:n}=e;return We({root:["root",r&&"row",n&&"error"]},Ur,t)},Xr=ce("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>K({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Jr=y.forwardRef(function(t,r){const n=ze({props:t,name:"MuiFormGroup"}),{className:o,row:s=!1}=n,a=Ye(n,qr),u=Xt(),c=Jt({props:n,muiFormControl:u,states:["error"]}),l=K({},n,{row:s,error:c.error}),h=Zr(l);return i.jsx(Xr,K({className:le(h.root,o),ownerState:l,ref:r},a))}),Qr=Jr;var eo=["points","className","baseLinePoints","connectNulls"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},me.apply(this,arguments)}function to(e,t){if(e==null)return{};var r=no(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function no(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function kt(e){return so(e)||io(e)||oo(e)||ro()}function ro(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oo(e,t){if(e){if(typeof e=="string")return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}}function io(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function so(e){if(Array.isArray(e))return tt(e)}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var St=function(t){return t&&t.x===+t.x&&t.y===+t.y},ao=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){St(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),St(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Oe=function(t,r){var n=ao(t);r&&(n=[n.reduce(function(s,a){return[].concat(kt(s),kt(a))},[])]);var o=n.map(function(s){return s.reduce(function(a,u,c){return"".concat(a).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return n.length===1?"".concat(o,"Z"):o},lo=function(t,r,n){var o=Oe(t,n);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(Oe(r.reverse(),n).slice(1))},co=function(t){var r=t.points,n=t.className,o=t.baseLinePoints,s=t.connectNulls,a=to(t,eo);if(!r||!r.length)return null;var u=le("recharts-polygon",n);if(o&&o.length){var c=a.stroke&&a.stroke!=="none",l=lo(r,o,s);return I.createElement("g",{className:u},I.createElement("path",me({},G(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),c?I.createElement("path",me({},G(a,!0),{fill:"none",d:Oe(r,s)})):null,c?I.createElement("path",me({},G(a,!0),{fill:"none",d:Oe(o,s)})):null)}var h=Oe(r,s);return I.createElement("path",me({},G(a,!0),{fill:h.slice(-1)==="Z"?a.fill:"none",className:u,d:h}))},uo=zt,fo=Vn,po=Kt;function ho(e,t){return e&&e.length?uo(e,po(t),fo):void 0}var go=ho;const mo=at(go);var xo=zt,yo=Kt,vo=Bn;function bo(e,t){return e&&e.length?xo(e,yo(t),vo):void 0}var jo=bo;const ko=at(jo);var So=["cx","cy","angle","ticks","axisLine"],Ao=["ticks","tick","angle","tickFormatter","stroke"];function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(e)}function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ce.apply(this,arguments)}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?At(Object(r),!0).forEach(function(n){Ke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pt(e,t){if(e==null)return{};var r=Po(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Po(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cn(n.key),n)}}function Oo(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Co(e,t,r){return t=Me(t),To(e,ln()?Reflect.construct(t,r||[],Me(e).constructor):t.apply(e,r))}function To(e,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _o(e)}function _o(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ln=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Me(e)}function Ro(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},nt(e,t)}function Ke(e,t,r){return t=cn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cn(e){var t=Do(e,"string");return je(t)=="symbol"?t:String(t)}function Do(e,t){if(je(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(je(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var He=function(e){Ro(t,e);function t(){return wo(this,t),Co(this,t,arguments)}return Oo(t,[{key:"getTickValueCoord",value:function(n){var o=n.coordinate,s=this.props,a=s.angle,u=s.cx,c=s.cy;return te(u,c,o,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,o;switch(n){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=mo(u,function(h){return h.coordinate||0}),l=ko(u,function(h){return h.coordinate||0});return{cx:o,cy:s,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=n.axisLine,l=Pt(n,So),h=u.reduce(function(x,f){return[Math.min(x[0],f.coordinate),Math.max(x[1],f.coordinate)]},[1/0,-1/0]),v=te(o,s,h[0],a),j=te(o,s,h[1],a),w=ie(ie(ie({},G(l,!1)),{},{fill:"none"},G(c,!1)),{},{x1:v.x,y1:v.y,x2:j.x,y2:j.y});return I.createElement("line",Ce({className:"recharts-polar-radius-axis-line"},w))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.angle,c=o.tickFormatter,l=o.stroke,h=Pt(o,Ao),v=this.getTickTextAnchor(),j=G(h,!1),w=G(a,!1),x=s.map(function(f,k){var A=n.getTickValueCoord(f),_=ie(ie(ie(ie({textAnchor:v,transform:"rotate(".concat(90-u,", ").concat(A.x,", ").concat(A.y,")")},j),{},{stroke:"none",fill:l},w),{},{index:k},A),{},{payload:f});return I.createElement(Q,Ce({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(f.coordinate)},ct(n.props,f,k)),t.renderTickItem(a,_,c?c(f.value,k):f.value))});return I.createElement(Q,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.axisLine,a=n.tick;return!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),a&&this.renderTicks(),Ht.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):he(n)?a=n(o):a=I.createElement(lt,Ce({},o,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}]),t}(y.PureComponent);Ke(He,"displayName","PolarRadiusAxis");Ke(He,"axisType","radiusAxis");Ke(He,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ae.apply(this,arguments)}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(r),!0).forEach(function(n){Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dn(n.key),n)}}function Eo(e,t,r){return t&&Ct(e.prototype,t),r&&Ct(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lo(e,t,r){return t=Ve(t),$o(e,un()?Reflect.construct(t,r||[],Ve(e).constructor):t.apply(e,r))}function $o(e,t){if(t&&(ke(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fo(e)}function Fo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(un=function(){return!!e})()}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ve(e)}function No(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},rt(e,t)}function Ue(e,t,r){return t=dn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dn(e){var t=Mo(e,"string");return ke(t)=="symbol"?t:String(t)}function Mo(e,t){if(ke(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ke(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vo=Math.PI/180,Tt=1e-5,qe=function(e){No(t,e);function t(){return Io(this,t),Lo(this,t,arguments)}return Eo(t,[{key:"getTickLineCoord",value:function(n){var o=this.props,s=o.cx,a=o.cy,u=o.radius,c=o.orientation,l=o.tickSize,h=l||8,v=te(s,a,u,n.coordinate),j=te(s,a,u+(c==="inner"?-1:1)*h,n.coordinate);return{x1:v.x,y1:v.y,x2:j.x,y2:j.y}}},{key:"getTickTextAnchor",value:function(n){var o=this.props.orientation,s=Math.cos(-n.coordinate*Vo),a;return s>Tt?a=o==="outer"?"start":"end":s<-Tt?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.radius,u=n.axisLine,c=n.axisLineType,l=se(se({},G(this.props,!1)),{},{fill:"none"},G(u,!1));if(c==="circle")return I.createElement(Yn,ae({className:"recharts-polar-angle-axis-line"},l,{cx:o,cy:s,r:a}));var h=this.props.ticks,v=h.map(function(j){return te(o,s,a,j.coordinate)});return I.createElement(co,ae({className:"recharts-polar-angle-axis-line"},l,{points:v}))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.tickLine,c=o.tickFormatter,l=o.stroke,h=G(this.props,!1),v=G(a,!1),j=se(se({},h),{},{fill:"none"},G(u,!1)),w=s.map(function(x,f){var k=n.getTickLineCoord(x),A=n.getTickTextAnchor(x),_=se(se(se({textAnchor:A},h),{},{stroke:"none",fill:l},v),{},{index:f,payload:x,x:k.x2,y:k.y2});return I.createElement(Q,ae({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(x.coordinate)},ct(n.props,x,f)),u&&I.createElement("line",ae({className:"recharts-polar-angle-axis-tick-line"},j,k)),a&&t.renderTickItem(a,_,c?c(x.value,f):x.value))});return I.createElement(Q,{className:"recharts-polar-angle-axis-ticks"},w)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!o||!o.length?null:I.createElement(Q,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,o,s){var a;return I.isValidElement(n)?a=I.cloneElement(n,o):he(n)?a=n(o):a=I.createElement(lt,ae({},o,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}]),t}(y.PureComponent);Ue(qe,"displayName","PolarAngleAxis");Ue(qe,"axisType","angleAxis");Ue(qe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Le;function Se(e){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(e)}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xe.apply(this,arguments)}function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_t(Object(r),!0).forEach(function(n){J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pn(n.key),n)}}function Yo(e,t,r){return t&&Rt(e.prototype,t),r&&Rt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wo(e,t,r){return t=Be(t),Go(e,fn()?Reflect.construct(t,r||[],Be(e).constructor):t.apply(e,r))}function Go(e,t){if(t&&(Se(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(e)}function fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fn=function(){return!!e})()}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(e)}function pe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},ot(e,t)}function J(e,t,r){return t=pn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pn(e){var t=Ko(e,"string");return Se(t)=="symbol"?t:String(t)}function Ko(e,t){if(Se(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Se(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ne=function(e){zo(t,e);function t(r){var n;return Bo(this,t),n=Wo(this,t,[r]),J(pe(n),"pieRef",null),J(pe(n),"sectorRefs",[]),J(pe(n),"id",Gn("recharts-pie-")),J(pe(n),"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),he(o)&&o()}),J(pe(n),"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),he(o)&&o()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Yo(t,[{key:"isActiveIndex",value:function(n){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(n)!==-1:n===o}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,u=s.labelLine,c=s.dataKey,l=s.valueKey,h=G(this.props,!1),v=G(a,!1),j=G(u,!1),w=a&&a.offsetRadius||20,x=n.map(function(f,k){var A=(f.startAngle+f.endAngle)/2,_=te(f.cx,f.cy,f.outerRadius+w,A),D=N(N(N(N({},h),f),{},{stroke:"none"},v),{},{index:k,textAnchor:t.getTextAnchor(_.x,f.cx)},_),m=N(N(N(N({},h),f),{},{fill:"none",stroke:f.fill},j),{},{index:k,points:[te(f.cx,f.cy,f.outerRadius,A),_],key:"line"}),O=c;return be(c)&&be(l)?O="value":be(c)&&(O=l),I.createElement(Q,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(k)},u&&t.renderLabelLineItem(u,m),t.renderLabelItem(a,D,fe(f,O)))});return I.createElement(Q,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var o=this,s=this.props,a=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return n.map(function(l,h){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var v=o.isActiveIndex(h),j=c&&o.hasActiveIndex()?c:null,w=v?a:j,x=N(N({},l),{},{stroke:u?l.fill:l.stroke,tabIndex:-1});return I.createElement(Q,xe({ref:function(k){k&&!o.sectorRefs.includes(k)&&o.sectorRefs.push(k)},tabIndex:-1,className:"recharts-pie-sector"},ct(o.props,l,h),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(h)}),I.createElement(Kn,xe({option:w,isActive:v,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,o=this.props,s=o.sectors,a=o.isAnimationActive,u=o.animationBegin,c=o.animationDuration,l=o.animationEasing,h=o.animationId,v=this.state,j=v.prevSectors,w=v.prevIsAnimationActive;return I.createElement(Hn,{begin:u,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(w),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var f=x.t,k=[],A=s&&s[0],_=A.startAngle;return s.forEach(function(D,m){var O=j&&j[m],C=m>0?Un(D,"paddingAngle",0):0;if(O){var E=mt(O.endAngle-O.startAngle,D.endAngle-D.startAngle),T=N(N({},D),{},{startAngle:_+C,endAngle:_+E(f)+C});k.push(T),_=T.endAngle}else{var M=D.endAngle,B=D.startAngle,q=mt(0,M-B),d=q(f),L=N(N({},D),{},{startAngle:_+C,endAngle:_+d+C});k.push(L),_=L.endAngle}}),I.createElement(Q,null,n.renderSectorsStatically(k))})}},{key:"attachKeyboardHandlers",value:function(n){var o=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var u=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[u].focus(),o.setState({sectorToFocus:u});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,o=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&o&&o.length&&(!a||!qn(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,o=this.props,s=o.hide,a=o.sectors,u=o.className,c=o.label,l=o.cx,h=o.cy,v=o.innerRadius,j=o.outerRadius,w=o.isAnimationActive,x=this.state.isAnimationFinished;if(s||!a||!a.length||!ge(l)||!ge(h)||!ge(v)||!ge(j))return null;var f=le("recharts-pie",u);return I.createElement(Q,{tabIndex:this.props.rootTabIndex,className:f,ref:function(A){n.pieRef=A}},this.renderSectors(),c&&this.renderLabels(a),Ht.renderCallByParent(this.props,null,!1),(!w||x)&&Zn.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return o.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:n.sectors!==o.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,o){return n>o?"start":n<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,o){return I.isValidElement(n)?I.cloneElement(n,o):he(n)?n(o):I.createElement(zn,xe({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,o,s){if(I.isValidElement(n))return I.cloneElement(n,o);var a=s;return he(n)&&(a=n(o),I.isValidElement(a))?a:I.createElement(lt,xe({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(y.PureComponent);Le=ne;J(ne,"displayName","Pie");J(ne,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Wn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});J(ne,"parseDeltaAngle",function(e,t){var r=Ie(t-e),n=Math.min(Math.abs(t-e),360);return r*n});J(ne,"getRealPieData",function(e){var t=e.props,r=t.data,n=t.children,o=G(e.props,!1),s=Xn(n,Ut);return r&&r.length?r.map(function(a,u){return N(N(N({payload:a},o),a),s&&s[u]&&s[u].props)}):s&&s.length?s.map(function(a){return N(N({},o),a.props)}):[]});J(ne,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,o=t.width,s=t.height,a=Jn(o,s),u=n+Re(e.props.cx,o,o/2),c=r+Re(e.props.cy,s,s/2),l=Re(e.props.innerRadius,a,0),h=Re(e.props.outerRadius,a,a*.8),v=e.props.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:u,cy:c,innerRadius:l,outerRadius:h,maxRadius:v}});J(ne,"getComposedData",function(e){var t=e.item,r=e.offset,n=Le.getRealPieData(t);if(!n||!n.length)return null;var o=t.props,s=o.cornerRadius,a=o.startAngle,u=o.endAngle,c=o.paddingAngle,l=o.dataKey,h=o.nameKey,v=o.valueKey,j=o.tooltipType,w=Math.abs(t.props.minAngle),x=Le.parseCoordinateOfPie(t,r),f=Le.parseDeltaAngle(a,u),k=Math.abs(f),A=l;be(l)&&be(v)?(xt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A="value"):be(l)&&(xt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A=v);var _=n.filter(function(T){return fe(T,A,0)!==0}).length,D=(k>=360?_:_-1)*c,m=k-_*w-D,O=n.reduce(function(T,M){var B=fe(M,A,0);return T+(ge(B)?B:0)},0),C;if(O>0){var E;C=n.map(function(T,M){var B=fe(T,A,0),q=fe(T,h,M),d=(ge(B)?B:0)/O,L;M?L=E.endAngle+Ie(f)*c*(B!==0?1:0):L=a;var z=L+Ie(f)*((B!==0?w:0)+d*m),ee=(L+z)/2,$=(x.innerRadius+x.outerRadius)/2,p=[{name:q,value:B,payload:T,dataKey:A,type:j}],P=te(x.cx,x.cy,$,ee);return E=N(N(N({percent:d,cornerRadius:s,name:q,tooltipPayload:p,midAngle:ee,middleRadius:$,tooltipPosition:P},T),x),{},{value:fe(T,A),startAngle:L,endAngle:z,payload:T,paddingAngle:Ie(f)*c}),E})}return N(N({},x),{},{sectors:C,data:n})});var Ho=Qn({chartName:"PieChart",GraphicalChild:ne,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qe},{axisType:"radiusAxis",AxisComp:He}],formatAxisMap:er,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Uo=({data:e})=>i.jsx(qt,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:i.jsxs(tr,{data:e,children:[i.jsx(nr,{strokeDasharray:"3 3"}),i.jsx(rr,{dataKey:"name"}),i.jsx(or,{}),i.jsx(Zt,{}),i.jsx(ir,{dataKey:"value",fill:"#82ca9d"})]})});function qo({searchQuery:e,setSearchQuery:t,map:r}){const n=async o=>{if(o.preventDefault(),e.trim()==="")return;const s={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(r).findPlaceFromQuery(s,(u,c)=>{if(c===window.google.maps.places.PlacesServiceStatus.OK&&u){const l=u[0];r.setCenter(l.geometry.location),r.setZoom(14)}})};return i.jsxs(R,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[i.jsx(fr,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),i.jsx(Nt,{type:"submit",sx:{p:1},children:i.jsx(ar,{})})]})}var Zo="Expected a function",Dt=NaN,Xo="[object Symbol]",Jo=/^\s+|\s+$/g,Qo=/^[-+]0x[0-9a-f]+$/i,ei=/^0b[01]+$/i,ti=/^0o[0-7]+$/i,ni=parseInt,ri=typeof Te=="object"&&Te&&Te.Object===Object&&Te,oi=typeof self=="object"&&self&&self.Object===Object&&self,ii=ri||oi||Function("return this")(),si=Object.prototype,ai=si.toString,li=Math.max,ci=Math.min,Je=function(){return ii.Date.now()};function ui(e,t,r){var n,o,s,a,u,c,l=0,h=!1,v=!1,j=!0;if(typeof e!="function")throw new TypeError(Zo);t=It(t)||0,it(r)&&(h=!!r.leading,v="maxWait"in r,s=v?li(It(r.maxWait)||0,t):s,j="trailing"in r?!!r.trailing:j);function w(C){var E=n,T=o;return n=o=void 0,l=C,a=e.apply(T,E),a}function x(C){return l=C,u=setTimeout(A,t),h?w(C):a}function f(C){var E=C-c,T=C-l,M=t-E;return v?ci(M,s-T):M}function k(C){var E=C-c,T=C-l;return c===void 0||E>=t||E<0||v&&T>=s}function A(){var C=Je();if(k(C))return _(C);u=setTimeout(A,f(C))}function _(C){return u=void 0,j&&n?w(C):(n=o=void 0,a)}function D(){u!==void 0&&clearTimeout(u),l=0,n=c=o=u=void 0}function m(){return u===void 0?a:_(Je())}function O(){var C=Je(),E=k(C);if(n=arguments,o=this,c=C,E){if(u===void 0)return x(c);if(v)return u=setTimeout(A,t),w(c)}return u===void 0&&(u=setTimeout(A,t)),a}return O.cancel=D,O.flush=m,O}function it(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function di(e){return!!e&&typeof e=="object"}function fi(e){return typeof e=="symbol"||di(e)&&ai.call(e)==Xo}function It(e){if(typeof e=="number")return e;if(fi(e))return Dt;if(it(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=it(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Jo,"");var r=ei.test(e);return r||ti.test(e)?ni(e.slice(2),r?2:8):Qo.test(e)?Dt:+e}var pi=ui;const hi=at(pi),gi=({setLoading:e})=>{const t=ue(),{center:r,selectedParameterList:n,selectedVehicle:o,vehicleList:s,tractorIcon:a,icons:u,locationData:c,ivnPid:l,placesData:h}=Y($=>$.liveMap),{mode:v,AreaCoveredTrips:j}=Y($=>$.dashboard),{isLoaded:w,loadError:x}=cr({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[f,k]=y.useState(null),[A,_]=y.useState(!0),[D,m]=y.useState(5),[O,C]=y.useState(),[E,T]=y.useState(""),M=y.useRef(null),B=Gt(v),q=y.useCallback($=>{M.current=$},[]),d=hi($=>{if(!$||$.length===0)return;const p=10;let P=0;const g=F=>{$.slice(F,F+p).forEach(b=>{var W;((W=b==null?void 0:b.data)==null?void 0:W.length)>0&&(P+=pr(b==null?void 0:b.data,t))}),F+p<$.length?setTimeout(()=>g(F+p),0):(console.log("calculated acreage: ",P),t(pt(P.toFixed(2))),e(!1))};g(0)},300);y.useEffect(()=>(j&&j.length>0?(e(!0),d(j)):(e(!1),t(pt(0))),()=>{d.cancel(),e(!1)}),[j,t]),y.useEffect(()=>{if(A)C(c);else{let $=c==null?void 0:c.filter(p=>(p==null?void 0:p._id)===(o==null?void 0:o.imei));C($)}},[c,o,A]);const L=()=>{if(!A)t(Sn({lat:21,lng:78})),m(4),_(p=>!p);else{const $=c.find(p=>p.latestDocument.imei===o.imei);$?(console.log($.latestDocument,"getCenter"),$.latestDocument,_(p=>!p)):de.error("Data is not available for selected vehicle")}};if(y.useEffect(()=>{w&&k(window.google.maps)},[w,c]),x)return"Error loading maps";if(!w)return"Loading maps";const z={height:"100vh",borderRadius:"8px"},ee=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return f?i.jsxs("div",{children:[i.jsxs(R,{style:{fontSize:"20px",color:B.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[i.jsx(U,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),i.jsxs(R,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(qo,{searchQuery:E,setSearchQuery:T,map:M.current}),i.jsx(Qr,{sx:{marginLeft:0,paddingTop:0,color:B.grey[400]},children:i.jsx(Hr,{control:i.jsx(hr,{checked:A,onChange:L}),label:A?"Group":"Individual"})})]})]}),i.jsx(ur,{mapContainerStyle:z,zoom:D,center:r,onLoad:q,options:{mapTypeControl:!1,styles:v?ee:""},children:O&&O.length>0&&O.map(($,p)=>i.jsx(dr,{position:{lat:$.latestDocument.lat,lng:$.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},p))})]}):null};function mi(){const{vehicles_details:e}=Y(n=>n.dashboard),[t,r]=y.useState([]);return y.useEffect(()=>{const n=e.reduce((s,a)=>{const u=a.sell_date?Mt(a.sell_date):null,c=u&&u.isValid()?u.format("MMM YYYY"):"N/A";return s[c]=(s[c]||0)+1,s},{}),o=Object.keys(n).map(s=>({name:s,value:n[s]}));r(o)},[e]),i.jsxs(R,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[i.jsx(Ee,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),i.jsxs(R,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[i.jsx(R,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:i.jsx(Ee,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),i.jsx(Uo,{data:t})]}),i.jsx(Ee,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const Et=Math.PI/180,xi=({cx:e,cy:t,midAngle:r,innerRadius:n,outerRadius:o,percent:s,index:a})=>{const u=n+(o-n)*.5,c=e+u*Math.cos(-r*Et),l=t+u*Math.sin(-r*Et);return i.jsx("text",{x:c,y:l,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(s*100).toFixed(0)}%`})},yi=({data:e,COLORS:t})=>{y.useEffect(()=>{},[e]);const r=e.every(n=>n.value===0);return i.jsx(R,{sx:{width:"100%",height:"100%"},children:r?i.jsx(R,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:i.jsx(U,{sx:{textAlign:"center"},children:"No data available to display."})}):i.jsx(qt,{width:"100%",height:"100%",children:i.jsxs(Ho,{children:[i.jsx(ne,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:xi,fill:"#8884d8",dataKey:"value",children:e.map((n,o)=>i.jsx(Ut,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),i.jsx(Zt,{})]})})})},$e=({title:e})=>i.jsx(U,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),Qe=({label:e,count:t,color:r,type:n,title:o})=>{let s=ue(),{vehicleZone:a}=Y(l=>l.dashboard),u=Vt();const c=(l,h)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",h),s(An(h)),s(Pn(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",h),h){case"Open":s(ye("Open"));break;case"Overdue":s(ye("overdue"));break;case"Closed":s(ye("Close"));break}u("/breakdown")}};return i.jsxs(R,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[i.jsxs(R,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(R,{sx:{width:"12px",height:"12px",bgcolor:r,borderRadius:"50%",marginRight:"8px"}}),i.jsx(re,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{c(o,e)},children:e})]}),i.jsx(R,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?i.jsx(U,{color:r,children:t}):i.jsx(an,{sx:{bgcolor:r,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},vi=({data:e,colors:t})=>{const{loading:r,isDriverBehaviorLoading:n}=Y(o=>o.dashboard);return i.jsxs(R,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[i.jsxs(R,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[i.jsx(U,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),i.jsx(R,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,s)=>i.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[i.jsx(U,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),i.jsx(an,{sx:{bgcolor:t[s],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},s))})]}),i.jsx(R,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?i.jsx(U,{sx:{fontSize:"14px"},children:"Loading..."}):i.jsx(yi,{data:e,COLORS:t})})]})},Lt=({statuses:e,title:t})=>{let r=ue(),n=Vt();const o=s=>{if(t==="Inspection Approvals"){switch(console.log("status: ",s),s.label){case"Rejected":r(ye("Rejected"));break;case"Pending":r(ye("Open"));break;case"Approved":r(ye("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(s.label){case"Overdue":r(Xe("Overdue"));break;case"Due soon":r(Xe("Due soon"));break;case"Serviced":r(Xe("Serviced"));break}n("/service")}};return i.jsxs(R,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:t}),i.jsx(R,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((s,a)=>i.jsxs(R,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(s)},children:[i.jsx(U,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:s.color,margin:"30px 0"},"aria-label":"color",children:s.count}),i.jsx(U,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:s.label})]},a))})]})},$t={total:0,online:0,offline:0,running:0};function bi({vehicleReport:e,imeiNo:t,loading:r,isloadingReport:n}){var z,ee,$,p,P,g,F;const{vehicleList:o,onlineVehicle:s,locationData:a}=Y(S=>S.liveMap);Y(S=>S.dashboard);const{breakdownStatusCount:u}=Y(S=>S.breakdown),{inspectionStatusCount:c}=Y(S=>S.inspection),{vehicleStatesData:l}=Y(S=>S.report),{report:h,driver_behavior:v,overdueCount:j,completedCount:w,serviceSoonCount:x,selectedVehicleGroup:f,areaCovered:k}=Y(S=>S.dashboard),[A,_]=y.useState(0),[D,m]=y.useState($t);y.useEffect(()=>{if((o==null?void 0:o.length)>0){let S={...$t};if(f){const b=C(f==null?void 0:f.id);console.log("result",b);const W=o.filter(Z=>Z.vehicle_group===f.id);S.total=W.length,S.online=b.onlineCount,S.running=b.runningCount,S.offline=S.total-S.online}console.log("Updated Vehicle Count:",S),m(S)}console.log("vehicleList",o)},[f]),y.useEffect(()=>{if((o==null?void 0:o.length)>0){let S=0;o==null||o.map(b=>{var W;((W=b==null?void 0:b.imei)==null?void 0:W.length)>0&&S++}),_(S)}},[o]),y.useEffect(()=>{},[j,w,x]);const O=()=>{let S=0,b=0,W=0;return s.length>0&&s.forEach(Z=>{t.includes(String(Z))&&(S++,a==null||a.forEach(H=>{var oe,X;String((oe=H==null?void 0:H.latestDocument)==null?void 0:oe.imei)===String(Z)&&H.latestDocument.speed>0&&(H.latestDocument.ignition===!0||H.latestDocument.ignition===1)&&b++,String((X=H==null?void 0:H.latestDocument)==null?void 0:X.imei)===String(Z)&&H.latestDocument.speed<=0&&(H.latestDocument.ignition===!0||H.latestDocument.ignition===1)&&W++}))}),{onlineCount:S,runningCount:b,idelingCount:W}},C=S=>{let b=0,W=0;return s.forEach(Z=>{if(t.includes(String(Z))){const H=a==null?void 0:a.find(oe=>{var X;return String((X=oe==null?void 0:oe.latestDocument)==null?void 0:X.imei)===String(Z)});if(H&&o.some(X=>{var Ae;return X.vehicle_group===S&&((Ae=X==null?void 0:X.imei[0])==null?void 0:Ae.mac_id)===String(Z)})){b++;const{speed:X,ignition:Ae}=H.latestDocument;X>0&&(Ae===!0||Ae===1)&&W++}}}),{onlineCount:b,runningCount:W}};y.useEffect(()=>{},[l]);const E=[{name:"Overspeed O",value:((z=l==null?void 0:l.totals)==null?void 0:z.total_overSpeedTimeSec)||0},{name:"Economy E",value:((ee=l==null?void 0:l.totals)==null?void 0:ee.total_economyTimeSec)||0},{name:"Steady S",value:(($=l==null?void 0:l.totals)==null?void 0:$.total_idleTimeSec)||0}],T=["#0088FE","#00C49F","#FFBB28","#FF8042"],M=[{label:"Rejected",count:c.rejected||0,color:"#FF0202"},{label:"Pending",count:c.open||0,color:"black"},{label:"Approved",count:c.close||0,color:"green"}],B=[{label:"Overdue",count:j,color:"#FF0202"},{label:"Due soon",count:x,color:"black"},{label:"Serviced",count:w,color:"green"}],q=[{name:"Total Vehicles",count:Object.keys(f).length>0?D.total:A,color:"grey"},{name:"Online",count:Object.keys(f).length>0?D.online:O().onlineCount,color:"red"},{name:"Offline",count:Object.keys(f).length>0?D.offline:A-O().onlineCount,color:"grey"},{name:"Running",count:Object.keys(f).length>0?D.running:O().runningCount,color:"green"},{name:"Idling",count:Object.keys(f).length>0?D.online-D.running:O().idelingCount,color:"yellow"}],d=[{name:"Distance Covered",count:((p=l==null?void 0:l.totals)==null?void 0:p.totalDistance)||0,color:"grey"},{name:"Running time",count:((P=l==null?void 0:l.totals)==null?void 0:P.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((g=l==null?void 0:l.totals)==null?void 0:g.total_idleTime)||0,color:et.bgColor},{name:"Engine Hrs",count:((F=l==null?void 0:l.totals)==null?void 0:F.total_engineHours)||0,color:et.bgColor}],L=[{name:"Open",count:u.open,color:"grey"},{name:"Overdue",count:u.overDue,color:"red"},{name:"Closed",count:u.close,color:"green"}];return i.jsxs(i.Fragment,{children:[i.jsx(vi,{data:E,colors:T}),i.jsxs(R,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[i.jsx($e,{title:"Vehicles Status"}),i.jsx(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:q.map((S,b)=>i.jsx(Qe,{label:S.name,count:S.count,color:S.color,title:"Vehicle Status"},b+1))})]}),i.jsx(Lt,{statuses:B,title:"Service Remainder"}),i.jsxs(R,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Assigned Vehicles"}),i.jsx(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:d.map((S,b)=>i.jsx(Qe,{type:"assignVehicle",label:S.name,count:S.count,color:S.color}))})]}),i.jsxs(R,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx($e,{title:"Breakdown Resolved"}),i.jsx(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:L.map((S,b)=>i.jsx(Qe,{label:S.name,count:S.count,color:S.color,title:"Breakdown"}))})]}),i.jsx(Lt,{statuses:M,title:"Inspection Approvals"})]})}const ji=()=>{var q;const{allAlerts:e,loading:t}=Y(d=>d.geofence),{vehicleList:r}=Y(d=>d.liveMap),n=ue(),[o,s]=y.useState(0),[a,u]=y.useState(10),[c,l]=y.useState([]),[h,v]=y.useState(""),[j,w]=y.useState(""),[x,f]=y.useState(!1);y.useEffect(()=>{console.log("allalert",e.filter(d=>d._id==="67fde2c226ec73328f071edd"))},[e]),y.useEffect(()=>{console.log("vehicleList",r)},[r]);let k=d=>r.find(L=>{var z;return((z=L==null?void 0:L.imei[0])==null?void 0:z.mac_id)==d||""});const A=(d,L)=>s(L),_=d=>{u(parseInt(d.target.value,10)),s(0)},D=d=>{l(L=>L.includes(d)?L.filter(z=>z!==d):[...L,d])},m=d=>c.includes(d),O=d=>{if(d.target.checked){const L=T==null?void 0:T.slice(o*a,o*a+a).map(z=>z._id);l(L)}else l([])},C=()=>{console.log("vhehicle list",B);let d={imeiList:B,startDate:ve(new Date).format("MM-DD-YYYY"),endDate:ve(new Date).format("MM-DD-YYYY")};n(Yt(d))},E=async()=>{try{if(c.length===0)return;const d=await n(ht({ids:c}));ht.fulfilled.match(d)?(l([]),C()):console.error("Delete failed:",d==null?void 0:d.payload)}catch(d){console.error("Delete error:",d)}},T=(q=e==null?void 0:e.filter(d=>h?d.type===h:!0))==null?void 0:q.filter(d=>j?d.imei===j:!0),M=[...new Set(e==null?void 0:e.map(d=>d.type))],B=[...new Set(e==null?void 0:e.map(d=>d.imei))];return i.jsxs(R,{children:[t&&i.jsx(xr,{}),i.jsxs(_e,{container:!0,spacing:2,sx:{mb:2},children:[i.jsx(_e,{item:!0,xs:6,md:3,children:i.jsxs(yt,{fullWidth:!0,children:[i.jsx(vt,{children:"Alert Type"}),i.jsxs(bt,{value:h,label:"Alert Type",onChange:d=>{v(d.target.value),s(0)},children:[i.jsx(De,{value:"",children:"All"}),M.map(d=>i.jsx(De,{value:d,children:d},d))]})]})}),i.jsx(_e,{item:!0,xs:6,md:3,children:i.jsxs(yt,{fullWidth:!0,children:[i.jsx(vt,{children:"Vehicle"}),i.jsxs(bt,{value:j,label:"Vehicle",onChange:d=>{w(d.target.value),s(0)},children:[i.jsx(De,{value:"",children:"All"}),B.map(d=>{var L;return i.jsx(De,{value:d,children:(L=k(d))==null?void 0:L.registration_id},d)})]})]})}),i.jsx(_e,{item:!0,xs:12,md:3,display:"flex",alignItems:"center",children:i.jsx(re,{variant:"contained",color:"error",disabled:c.length===0,onClick:()=>f(!0),children:"Delete Selected"})})]}),i.jsxs(Qt,{component:Bt,sx:{maxHeight:700},children:[i.jsxs(en,{stickyHeader:!0,children:[i.jsx(tn,{children:i.jsxs(Fe,{children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Ne,{checked:(T==null?void 0:T.slice(o*a,o*a+a).every(d=>c.includes(d._id)))&&(T==null?void 0:T.length)>0,onChange:O})}),i.jsx(V,{children:"Sr no"}),i.jsx(V,{children:"Vehicle"}),i.jsx(V,{children:"Alert type"}),i.jsx(V,{children:"Message"}),i.jsx(V,{children:"Created Time"})]})}),i.jsx(nn,{children:T==null?void 0:T.slice(o*a,o*a+a).map((d,L)=>i.jsxs(Fe,{hover:!0,selected:m(d._id),onClick:()=>D(d._id),sx:{cursor:"pointer"},children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Ne,{checked:m(d._id)})}),i.jsx(V,{children:o*a+L+1}),i.jsx(V,{children:k(d==null?void 0:d.imei).registration_id}),i.jsx(V,{children:d==null?void 0:d.type}),i.jsx(V,{children:d==null?void 0:d.msg}),i.jsx(V,{children:ve(new Date(d==null?void 0:d.createdAt)).format("DD-MM-YYYY HH:mm")})]},d==null?void 0:d._id))})]}),i.jsx(rn,{rowsPerPageOptions:[12],component:"div",count:T.length,rowsPerPage:a,page:o,onPageChange:A,onRowsPerPageChange:_})]}),i.jsx(ut,{open:x,onClose:()=>f(!1),children:i.jsxs(R,{p:3,children:[i.jsx(U,{variant:"h6",children:"Confirm Deletion"}),i.jsxs(U,{sx:{my:2},children:["Are you sure you want to delete ",c.length," selected notifications?"]}),i.jsxs(R,{display:"flex",justifyContent:"flex-end",gap:2,children:[i.jsx(re,{onClick:()=>f(!1),variant:"outlined",children:"Cancel"}),i.jsx(re,{onClick:async()=>{await E(),f(!1)},color:"error",variant:"contained",children:"Confirm Delete"})]})]})})]})},ki=()=>{const{allNotification:e}=Y(m=>m.geofence),t=ue(),[r,n]=y.useState(0),[o,s]=y.useState(10),[a,u]=y.useState([]),[c,l]=y.useState(!1),[h,v]=y.useState(!1),j=(m,O)=>n(O),w=m=>{s(parseInt(m.target.value,10)),n(0)},x=m=>{u(O=>O.includes(m)?O.filter(C=>C!==m):[...O,m])},f=m=>a.includes(m),k=e||[],A=k.slice(r*o,r*o+o),_=m=>{const O=m.target.checked;if(l(O),O){const C=A.map(E=>E.id);u(C)}else u([])},D=async()=>{try{console.log("Deleting rows:",a);const m=await t(gt({ids:a}));gt.fulfilled.match(m)?(u([]),t(Wt())):console.error("Delete failed:",m==null?void 0:m.payload),v(!1)}catch(m){console.error("Delete failed:",m)}};return i.jsxs(R,{children:[i.jsx(yr,{sx:{justifyContent:"flex-end"},children:i.jsx(re,{color:"error",variant:"contained",disabled:a.length===0,onClick:()=>v(!0),children:"Delete Selected"})}),i.jsxs(Qt,{component:Bt,sx:{maxHeight:500},children:[i.jsxs(en,{stickyHeader:!0,children:[i.jsx(tn,{children:i.jsxs(Fe,{children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Ne,{checked:c,indeterminate:a.length>0&&a.length<A.length,onChange:_})}),i.jsx(V,{children:"Sr no"}),i.jsx(V,{children:"Inspection Id"}),i.jsx(V,{children:"Message"}),i.jsx(V,{children:"Date Time"})]})}),i.jsx(nn,{children:A.map((m,O)=>i.jsxs(Fe,{hover:!0,selected:f(m.id),onClick:()=>x(m.id),sx:{cursor:"pointer"},children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Ne,{checked:f(m.id)})}),i.jsx(V,{children:r*o+O+1}),i.jsx(V,{children:m==null?void 0:m.record_id}),i.jsx(V,{children:m==null?void 0:m.message}),i.jsx(V,{children:ve(new Date(m==null?void 0:m.created)).format("DD-MM-YYYY HH:mm")})]},m==null?void 0:m.id))})]}),i.jsx(rn,{rowsPerPageOptions:[10],component:"div",count:k.length,rowsPerPage:o,page:r,onPageChange:j,onRowsPerPageChange:w})]}),i.jsxs(ut,{open:h,onClose:()=>v(!1),children:[i.jsx(vr,{children:"Confirm Deletion"}),i.jsx(on,{children:i.jsxs(U,{children:["Are you sure you want to delete ",a.length," selected",a.length>1?" items":" item","?"]})}),i.jsxs(sn,{children:[i.jsx(re,{onClick:()=>v(!1),children:"Cancel"}),i.jsx(re,{color:"error",onClick:D,children:"Delete"})]})]})]})};function Si({showNotification:e,setShowNotification:t}){ue(),Y(s=>s.liveMap);const[r,n]=y.useState("one"),o=(s,a)=>{n(a)};return i.jsx(i.Fragment,{children:i.jsxs(ut,{open:e,onClose:()=>t(!1),fullWidth:!0,maxWidth:"xxl",sx:{"& .MuiDialog-paper":{height:"90vh"}},children:[i.jsx(Nt,{sx:{position:"absolute",right:2,top:8},onClick:()=>t(!1),children:i.jsx(mr,{})}),i.jsxs(on,{dividers:!0,sx:{minHeight:"100px"},children:["  ",i.jsxs(R,{sx:{width:"100%"},children:[i.jsxs(br,{value:r,onChange:o,textColor:"inherit",indicatorColor:"secondary",sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #ccc"},children:[i.jsx(jt,{value:"one",label:"Inbox",sx:{color:"black",fontWeight:"bold"}}),i.jsx(jt,{value:"two",label:"Alert",sx:{color:"black",fontWeight:"bold"}})]}),i.jsxs(R,{sx:{p:2},children:[r==="one"&&i.jsx(R,{children:i.jsx(ki,{})}),r==="two"&&i.jsx(R,{children:i.jsx(ji,{})})]})]})]}),i.jsx(sn,{children:i.jsx(re,{onClick:()=>t(!1),children:"Close"})})]})})}const Ji=()=>{const{w_customer_id:e,collapsed:t}=Y(p=>p.auth),{mode:r,selectedTripData:n,selectedVehicleGroup:o,showVehicles:s,vehicleZone:a}=Y(p=>p.dashboard),{breakdowns:u}=Y(p=>p.breakdown);Y(p=>p.inspection);const[c,l]=y.useState(()=>{const p=sessionStorage.getItem("imeiNo");return p?JSON.parse(p):[]}),{selectedVehicle:h,vehicleList:v,onlineVehicle:j,locationData:w}=Y(p=>p.liveMap),x=ue(),f=Gt(r),[k,A]=y.useState([]),[_,D]=y.useState(!1),[m,O]=y.useState({}),[C,E]=y.useState(!1),[T,M]=y.useState(!1),[B,q]=y.useState(!1);y.useEffect(()=>{(async()=>{await L()})(),x(wn())},[]);const d=p=>{let P=v.find(g=>{var F;return((F=g==null?void 0:g.imei[0])==null?void 0:F.mac_id)==p});return(P==null?void 0:P.registration_id)||p};y.useEffect(()=>{if(console.log(u,"inspection history"),u.length>0){let p={open:0,rejected:0,close:0};u.map(P=>{P.status==="Open"&&p.open++,P.status==="Close"&&p.close++,P.status==="Rejected"&&p.rejected++}),x(On(p))}},[u]),y.useEffect(()=>{if(u.length>0){let p={open:0,overDue:0,close:0};u.map(P=>{if(P.status==="Open"&&p.open++,P.status==="Close"&&p.close++,P.submission_date){const g=new Date(P.submission_date),F=new Date;F.setHours(0,0,0,0),g.setHours(0,0,0,0),g<F&&P.status=="Open"&&p.overDue++}}),x(Cn(p))}},[u]),y.useEffect(()=>{x(Tn())},[]),y.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(c))},[c]),y.useEffect(()=>{var p,P,g;Object.keys(h).length===0&&v.length>0&&x(_n({imei:(P=(p=v[0])==null?void 0:p.imei[0])==null?void 0:P.mac_id,reg_id:(g=v[0])==null?void 0:g.registration_id}))},[h,v]),y.useEffect(()=>{let p=v.map(g=>{var F;return((F=g==null?void 0:g.imei[0])==null?void 0:F.mac_id)||null}).filter(g=>g),P={imeiList:p,startDate:ve(new Date).format("MM-DD-YYYY"),endDate:ve(new Date).format("MM-DD-YYYY")};p&&p.length>0&&x(Yt(P)),x(Wt())},[v]),y.useEffect(()=>{(async()=>{if(h!=null&&h.imei){const P=Mt(),g=P.startOf("day").format("MM/DD/YYYY HH:mm:ss"),F=P.endOf("day").format("MM/DD/YYYY HH:mm:ss"),S={imei:h.imei,startTime:g,endTime:F};try{x(Rn(S))}catch(b){console.error("Error fetching report:",b)}}})()},[h,x]),y.useEffect(()=>{const p=g=>{(g==null?void 0:g.imei)!==null&&c.find(b=>parseInt(b)===(g==null?void 0:g.imei))&&de.error(`Type: ${g==null?void 0:g.type} ${g==null?void 0:g.msg} ${d(g==null?void 0:g.imei)}`,{id:"geofence",autoClose:5e3})},P=g=>{(g==null?void 0:g.imei)!==null&&c.find(b=>parseInt(b)===(g==null?void 0:g.imei))&&de.error(`${g==null?void 0:g.msg} ${d(g==null?void 0:g.imei)}`,{id:"speed",autoClose:5e3})};return Pe.on("geofenceAlert",p),Pe.on("speedAlert",P),()=>{Pe.off("geofenceAlert",p),Pe.off("speedAlert",P)}},[c,Pe]);const L=async()=>{try{let p=[],P=[];const g=await x(Dn({w_customer_id:e}));if(Array.isArray(g.payload)){g.payload.forEach(b=>{var W,Z;Array.isArray(b.imei)&&b.imei.length>0?(p.push({id:b.id,label:b.registration_id,value:(W=b==null?void 0:b.imei[0])==null?void 0:W.mac_id,vehilce_type:b==null?void 0:b.segment,sell_date:b==null?void 0:b.sell_date,workShop:b==null?void 0:b.workshop,vehicle_group:b==null?void 0:b.vehicle_group}),P.push((Z=b.imei[0])==null?void 0:Z.mac_id),b.registration_id):(console.error("IMEI data not found for item:",b),de.error(`IMEI Number not found for the vehicle: ${b==null?void 0:b.registration_id}`,{duration:2e3}))}),l(P);const F="one",S=P;P.length>0&&(x(In({type:F,imei:S})),x(En(S))),A(p),x(Ln(p)),x($n({w_customer_id:e})),x(Fn(e)),x(Nn({}))}else console.error("Unexpected data format:",g),de.error("Unexpected data format:")}catch(p){console.error("Error fetching vehicle data:",p),de.error(`Error fetching vehicle data: ${p}`)}},z=p=>w==null?void 0:w.some(P=>Number(P.latestDocument.imei)===Number(p)&&P.latestDocument.speed>0&&(P.latestDocument.ignition===!0||P.latestDocument.ignition===1)),ee=p=>w==null?void 0:w.some(P=>Number(P.latestDocument.imei)===Number(p)&&P.latestDocument.speed<=0&&(P.latestDocument.ignition===!0||P.latestDocument.ignition===1)),$=k.filter(p=>{if(!(Object.keys(o).length===0||p.vehicle_group===o.id))return!1;const g=Number(p.value),F=j.includes(g),S=!j.includes(g),b=j.includes(g)&&z(g),W=j.includes(g)&&ee(g);switch(a){case"Total Vehicles":return!0;case"Online":return F;case"Running":return b;case"Offline":return S;case"Idling":return W;default:return!0}});return i.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[i.jsx(lr,{}),i.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[i.jsx(sr,{title:"Dashboard",setShowNotification:D,showNotification:_,setShowVehiclesGroup:E,showVehiclesGroup:C}),i.jsx(gr,{setShowVehiclesGroup:E,showVehiclesGroup:C}),i.jsxs(R,{sx:{height:"92vh",backgroundColor:f.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[s&&i.jsx(R,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:f.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:i.jsx(Mn,{vehicleData:$,showVehicles:s})}),i.jsx(Ee,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),i.jsxs(R,{sx:{display:"flex",gap:"30px",background:et.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[i.jsxs(R,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[_&&i.jsx(Si,{showNotification:_,setShowNotification:D}),"              ",i.jsx(mi,{}),i.jsx(R,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:i.jsx(gi,{setLoading:M})})]}),i.jsx(R,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:i.jsx(bi,{vehicleReport:m,imeiNo:c,loading:T,isloadingReport:B})})]})]})]})]})};export{Ji as default};
