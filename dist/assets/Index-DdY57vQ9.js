import{c as xn,s as yn,_ as z,h as ht,r as Je,a as vn,d as bn,m as jn,b as y,e as kn,f as ce,j as i,g as de,u as Sn,i as mt,k as Ge,l as Ke,n as An,o as lt,p as pe,q as He,t as Bt,T as q,R as D,v as ct,w as De,x as fe,y as W,z as gt,A as Pn,B as ae,C as Yt,D as nt,E as ut,F as oe,G as On,H as Cn,I as ue,J as Qe,K as Ie,L as je,M as xt,N as Wt,O as yt,P as zt,Q as wn,S as vt,U as Tn,V as _n,W as Rn,X as Dn,Y as In,Z as En,$ as Ln,a0 as Fn,a1 as $n,a2 as Nn,a3 as Mn,a4 as Vn,a5 as Bn}from"./index-Cjcv2yiw.js";import{s as we}from"./Socket-CFpJY01f.js";import{d as Yn,t as Gt}from"./Search-wFQ36W0J.js";import{V as Wn}from"./VehicleMenu-Cj5WUY_F.js";import"./DateTimePicker-vL8-TirC.js";import{f as K,_ as Kt,a as Ht,b as zn,c as Gn,i as xe,T as dt,p as te,L as Q,d as pt,e as Ut,D as Kn,G as Hn,u as Un,C as qn,g as ke,h as me,S as Zn,A as Xn,j as Jn,k as bt,l as Qn,m as ye,n as er,o as tr,q as qt,r as nr,s as Ee,w as jt,t as Fe,v as rr,x as or,R as Zt,B as ir,y as sr,X as ar,Y as lr,z as Xt,E as cr,F as ur}from"./TopBar-BvV9m6MI.js";import"./proj-XQwXs9DQ.js";import{L as dr}from"./LeftSideBar2-BLzV6rCI.js";import{u as pr,G as fr,M as hr}from"./esm-BjLC-CwO.js";import{B as _}from"./CircularProgress-Cn0algju.js";import{r as mr,m as gr,a as xr,u as Jt,f as Qt,I as yr,F as kt,b as St}from"./OutlinedInput-BE-FtkV-.js";import{c as vr,I as en}from"./IconButton-B7ebUwQR.js";import{f as br}from"./TripMap-CkiLDUdA.js";import{S as jr}from"./Switch-DF6Tlo4w.js";import{T as $e}from"./index-D7n_34d4.js";import{V as kr}from"./VehicleGroups-ujb7RQ97.js";import{d as Sr}from"./Close-Bbe5XJTL.js";import{N as Ar}from"./NewLoader-CNewrlCe.js";import{S as At}from"./Select-C2O_k6ln.js";import{M as Le}from"./MenuItem-B01abXCo.js";import{T as tn,a as nn,b as rn,c as Ve,d as V,e as on}from"./TableRow-CU74lMp-.js";import{P as sn}from"./Paper-0bDLGP_t.js";import{C as Be}from"./Checkbox-w7iy9Smp.js";import{T as an,a as Pr}from"./TablePagination-BWnyw0m5.js";import{D as ft,a as Or,b as ln,c as cn}from"./DialogTitle-D8a1u6PL.js";import{T as Cr,a as Pt}from"./Tabs-OZqB44-2.js";import"./createSvgIcon-8aK18HEv.js";import"./RegionSelector-CHsRpA3J.js";import"./SearchTab-Blzx4UAv.js";import"./InputAdornment-FeX10cGW.js";import"./TripGraph-CexIFumy.js";import"./useIcons-BzLeYLD6.js";import"./SearchOutlined-BslY-QJ9.js";import"./button-CZkZ6ZGA.js";import"./roundedArrow-DwzcAo8c.js";import"./index-H3vNewaO.js";import"./NotificationsNone-DEkiz4rH.js";import"./Tooltip-C6d_MvKh.js";import"./usePreviousProps-6n5ImV6D.js";import"./menu2-BCDBIrTl.js";import"./redTractor-NXgVJyvR.js";import"./Info-CKUZoL12.js";import"./TextArea-CUxITgO_.js";const wr=["component","direction","spacing","divider","children","className","useFlexGap"],Tr=xn(),_r=yn("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Rr(e){return Sn({props:e,name:"MuiStack",defaultTheme:Tr})}function Dr(e,t){const r=y.Children.toArray(e).filter(Boolean);return r.reduce((n,o,s)=>(n.push(o),s<r.length-1&&n.push(y.cloneElement(t,{key:`separator-${s}`})),n),[])}const Ir=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Er=({ownerState:e,theme:t})=>{let r=z({display:"flex",flexDirection:"column"},ht({theme:t},Je({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=vn(t),o=Object.keys(t.breakpoints.values).reduce((c,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(c[l]=!0),c),{}),s=Je({values:e.direction,base:o}),a=Je({values:e.spacing,base:o});typeof s=="object"&&Object.keys(s).forEach((c,l,m)=>{if(!s[c]){const x=l>0?s[m[l-1]]:"column";s[c]=x}}),r=bn(r,ht({theme:t},a,(c,l)=>e.useFlexGap?{gap:mt(n,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Ir(l?s[l]:e.direction)}`]:mt(n,c)}}))}return r=jn(t.breakpoints,r),r};function Lr(e={}){const{createStyledComponent:t=_r,useThemeProps:r=Rr,componentName:n="MuiStack"}=e,o=()=>Ge({root:["root"]},c=>Ke(n,c),{}),s=t(Er);return y.forwardRef(function(c,l){const m=r(c),b=kn(m),{component:x="div",direction:P="column",spacing:j=0,divider:p,children:k,className:S,useFlexGap:w=!1}=b,T=ce(b,wr),I={direction:P,spacing:j,useFlexGap:w},R=o();return i.jsx(s,z({as:x,ownerState:I,ref:l,className:de(R.root,S)},T,{children:p?Dr(k,p):k}))})}const Fr=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],$r=["component","slots","slotProps"],Nr=["component"];function Mr(e,t){const{className:r,elementType:n,ownerState:o,externalForwardedProps:s,getSlotOwnerState:a,internalForwardedProps:u}=t,c=ce(t,Fr),{component:l,slots:m={[e]:void 0},slotProps:b={[e]:void 0}}=s,x=ce(s,$r),P=m[e]||n,j=mr(b[e],o),p=gr(z({className:r},c,{externalForwardedProps:e==="root"?x:void 0,externalSlotProps:j})),{props:{component:k},internalRef:S}=p,w=ce(p.props,Nr),T=An(S,j==null?void 0:j.ref,t.ref),I=a?a(w):{},R=z({},o,I),d=e==="root"?k||l:k,O=xr(P,z({},e==="root"&&!l&&!m[e]&&u,e!=="root"&&!m[e]&&u,w,d&&{as:d},{ref:T}),R);return Object.keys(I).forEach(A=>{delete O[A]}),[P,O]}const Vr=vr(i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Br(e){return Ke("MuiAvatar",e)}lt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Yr=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],Wr=e=>{const{classes:t,variant:r,colorDefault:n}=e;return Ge({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Br,t)},zr=pe("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:z({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:z({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Gr=pe("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Kr=pe(Vr,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Hr({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[o,s]=y.useState(!1);return y.useEffect(()=>{if(!r&&!n)return;s(!1);let a=!0;const u=new Image;return u.onload=()=>{a&&s("loaded")},u.onerror=()=>{a&&s("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=r,n&&(u.srcset=n),()=>{a=!1}},[e,t,r,n]),o}const Ur=y.forwardRef(function(t,r){const n=He({props:t,name:"MuiAvatar"}),{alt:o,children:s,className:a,component:u="div",slots:c={},slotProps:l={},imgProps:m,sizes:b,src:x,srcSet:P,variant:j="circular"}=n,p=ce(n,Yr);let k=null;const S=Hr(z({},m,{src:x,srcSet:P})),w=x||P,T=w&&S!=="error",I=z({},n,{colorDefault:!T,component:u,variant:j}),R=Wr(I),[d,O]=Mr("img",{className:R.img,elementType:Gr,externalForwardedProps:{slots:c,slotProps:{img:z({},m,l.img)}},additionalProps:{alt:o,src:x,srcSet:P,sizes:b},ownerState:I});return T?k=i.jsx(d,z({},O)):s||s===0?k=s:w&&o?k=o[0]:k=i.jsx(Kr,{ownerState:I,className:R.fallback}),i.jsx(zr,z({as:u,ownerState:I,className:de(R.root,a),ref:r},p,{children:k}))}),un=Ur,qr=Lr({createStyledComponent:pe("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>He({props:e,name:"MuiStack"})}),Zr=qr;function Xr(e){return Ke("MuiFormControlLabel",e)}const Jr=lt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Te=Jr,Qr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],eo=e=>{const{classes:t,disabled:r,labelPlacement:n,error:o,required:s}=e,a={root:["root",r&&"disabled",`labelPlacement${Bt(n)}`,o&&"error",s&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]};return Ge(a,Xr,t)},to=pe("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Te.label}`]:t.label},t.root,t[`labelPlacement${Bt(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>z({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Te.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Te.label}`]:{[`&.${Te.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),no=pe("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Te.error}`]:{color:(e.vars||e).palette.error.main}})),ro=y.forwardRef(function(t,r){var n,o;const s=He({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:u={},control:c,disabled:l,disableTypography:m,label:b,labelPlacement:x="end",required:P,slotProps:j={}}=s,p=ce(s,Qr),k=Jt(),S=(n=l??c.props.disabled)!=null?n:k==null?void 0:k.disabled,w=P??c.props.required,T={disabled:S,required:w};["checked","name","onChange","value","inputRef"].forEach($=>{typeof c.props[$]>"u"&&typeof s[$]<"u"&&(T[$]=s[$])});const I=Qt({props:s,muiFormControl:k,states:["error"]}),R=z({},s,{disabled:S,labelPlacement:x,required:w,error:I.error}),d=eo(R),O=(o=j.typography)!=null?o:u.typography;let A=b;return A!=null&&A.type!==q&&!m&&(A=i.jsx(q,z({component:"span"},O,{className:de(d.label,O==null?void 0:O.className),children:A}))),i.jsxs(to,z({className:de(d.root,a),ownerState:R,ref:r},p,{children:[y.cloneElement(c,T),w?i.jsxs(Zr,{display:"block",children:[A,i.jsxs(no,{ownerState:R,"aria-hidden":!0,className:d.asterisk,children:[" ","*"]})]}):A]}))}),oo=ro;function io(e){return Ke("MuiFormGroup",e)}lt("MuiFormGroup",["root","row","error"]);const so=["className","row"],ao=e=>{const{classes:t,row:r,error:n}=e;return Ge({root:["root",r&&"row",n&&"error"]},io,t)},lo=pe("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>z({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),co=y.forwardRef(function(t,r){const n=He({props:t,name:"MuiFormGroup"}),{className:o,row:s=!1}=n,a=ce(n,so),u=Jt(),c=Qt({props:n,muiFormControl:u,states:["error"]}),l=z({},n,{row:s,error:c.error}),m=ao(l);return i.jsx(lo,z({className:de(m.root,o),ownerState:l,ref:r},a))}),uo=co;var po=["points","className","baseLinePoints","connectNulls"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ve.apply(this,arguments)}function fo(e,t){if(e==null)return{};var r=ho(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ho(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Ot(e){return yo(e)||xo(e)||go(e)||mo()}function mo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function go(e,t){if(e){if(typeof e=="string")return rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rt(e,t)}}function xo(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yo(e){if(Array.isArray(e))return rt(e)}function rt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ct=function(t){return t&&t.x===+t.x&&t.y===+t.y},vo=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Ct(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Ct(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},_e=function(t,r){var n=vo(t);r&&(n=[n.reduce(function(s,a){return[].concat(Ot(s),Ot(a))},[])]);var o=n.map(function(s){return s.reduce(function(a,u,c){return"".concat(a).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return n.length===1?"".concat(o,"Z"):o},bo=function(t,r,n){var o=_e(t,n);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(_e(r.reverse(),n).slice(1))},jo=function(t){var r=t.points,n=t.className,o=t.baseLinePoints,s=t.connectNulls,a=fo(t,po);if(!r||!r.length)return null;var u=de("recharts-polygon",n);if(o&&o.length){var c=a.stroke&&a.stroke!=="none",l=bo(r,o,s);return D.createElement("g",{className:u},D.createElement("path",ve({},K(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),c?D.createElement("path",ve({},K(a,!0),{fill:"none",d:_e(r,s)})):null,c?D.createElement("path",ve({},K(a,!0),{fill:"none",d:_e(o,s)})):null)}var m=_e(r,s);return D.createElement("path",ve({},K(a,!0),{fill:m.slice(-1)==="Z"?a.fill:"none",className:u,d:m}))},ko=Kt,So=zn,Ao=Ht;function Po(e,t){return e&&e.length?ko(e,Ao(t),So):void 0}var Oo=Po;const Co=ct(Oo);var wo=Kt,To=Ht,_o=Gn;function Ro(e,t){return e&&e.length?wo(e,To(t),_o):void 0}var Do=Ro;const Io=ct(Do);var Eo=["cx","cy","angle","ticks","axisLine"],Lo=["ticks","tick","angle","tickFormatter","stroke"];function Se(e){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(e)}function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Re.apply(this,arguments)}function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wt(Object(r),!0).forEach(function(n){Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tt(e,t){if(e==null)return{};var r=Fo(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fo(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function $o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pn(n.key),n)}}function No(e,t,r){return t&&_t(e.prototype,t),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mo(e,t,r){return t=Ye(t),Vo(e,dn()?Reflect.construct(t,r||[],Ye(e).constructor):t.apply(e,r))}function Vo(e,t){if(t&&(Se(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bo(e)}function Bo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dn=function(){return!!e})()}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ye(e)}function Yo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},ot(e,t)}function Ue(e,t,r){return t=pn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pn(e){var t=Wo(e,"string");return Se(t)=="symbol"?t:String(t)}function Wo(e,t){if(Se(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Se(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qe=function(e){Yo(t,e);function t(){return $o(this,t),Mo(this,t,arguments)}return No(t,[{key:"getTickValueCoord",value:function(n){var o=n.coordinate,s=this.props,a=s.angle,u=s.cx,c=s.cy;return te(u,c,o,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,o;switch(n){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=Co(u,function(m){return m.coordinate||0}),l=Io(u,function(m){return m.coordinate||0});return{cx:o,cy:s,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.angle,u=n.ticks,c=n.axisLine,l=Tt(n,Eo),m=u.reduce(function(j,p){return[Math.min(j[0],p.coordinate),Math.max(j[1],p.coordinate)]},[1/0,-1/0]),b=te(o,s,m[0],a),x=te(o,s,m[1],a),P=ie(ie(ie({},K(l,!1)),{},{fill:"none"},K(c,!1)),{},{x1:b.x,y1:b.y,x2:x.x,y2:x.y});return D.createElement("line",Re({className:"recharts-polar-radius-axis-line"},P))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.angle,c=o.tickFormatter,l=o.stroke,m=Tt(o,Lo),b=this.getTickTextAnchor(),x=K(m,!1),P=K(a,!1),j=s.map(function(p,k){var S=n.getTickValueCoord(p),w=ie(ie(ie(ie({textAnchor:b,transform:"rotate(".concat(90-u,", ").concat(S.x,", ").concat(S.y,")")},x),{},{stroke:"none",fill:l},P),{},{index:k},S),{},{payload:p});return D.createElement(Q,Re({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(p.coordinate)},pt(n.props,p,k)),t.renderTickItem(a,w,c?c(p.value,k):p.value))});return D.createElement(Q,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.axisLine,a=n.tick;return!o||!o.length?null:D.createElement(Q,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),a&&this.renderTicks(),Ut.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,o,s){var a;return D.isValidElement(n)?a=D.cloneElement(n,o):xe(n)?a=n(o):a=D.createElement(dt,Re({},o,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}]),t}(y.PureComponent);Ue(qe,"displayName","PolarRadiusAxis");Ue(qe,"axisType","radiusAxis");Ue(qe,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(r),!0).forEach(function(n){Ze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hn(n.key),n)}}function Go(e,t,r){return t&&Dt(e.prototype,t),r&&Dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ko(e,t,r){return t=We(t),Ho(e,fn()?Reflect.construct(t,r||[],We(e).constructor):t.apply(e,r))}function Ho(e,t){if(t&&(Ae(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uo(e)}function Uo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fn=function(){return!!e})()}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},We(e)}function qo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},it(e,t)}function Ze(e,t,r){return t=hn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){var t=Zo(e,"string");return Ae(t)=="symbol"?t:String(t)}function Zo(e,t){if(Ae(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ae(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xo=Math.PI/180,It=1e-5,Xe=function(e){qo(t,e);function t(){return zo(this,t),Ko(this,t,arguments)}return Go(t,[{key:"getTickLineCoord",value:function(n){var o=this.props,s=o.cx,a=o.cy,u=o.radius,c=o.orientation,l=o.tickSize,m=l||8,b=te(s,a,u,n.coordinate),x=te(s,a,u+(c==="inner"?-1:1)*m,n.coordinate);return{x1:b.x,y1:b.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var o=this.props.orientation,s=Math.cos(-n.coordinate*Xo),a;return s>It?a=o==="outer"?"start":"end":s<-It?a=o==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,o=n.cx,s=n.cy,a=n.radius,u=n.axisLine,c=n.axisLineType,l=se(se({},K(this.props,!1)),{},{fill:"none"},K(u,!1));if(c==="circle")return D.createElement(Kn,le({className:"recharts-polar-angle-axis-line"},l,{cx:o,cy:s,r:a}));var m=this.props.ticks,b=m.map(function(x){return te(o,s,a,x.coordinate)});return D.createElement(jo,le({className:"recharts-polar-angle-axis-line"},l,{points:b}))}},{key:"renderTicks",value:function(){var n=this,o=this.props,s=o.ticks,a=o.tick,u=o.tickLine,c=o.tickFormatter,l=o.stroke,m=K(this.props,!1),b=K(a,!1),x=se(se({},m),{},{fill:"none"},K(u,!1)),P=s.map(function(j,p){var k=n.getTickLineCoord(j),S=n.getTickTextAnchor(j),w=se(se(se({textAnchor:S},m),{},{stroke:"none",fill:l},b),{},{index:p,payload:j,x:k.x2,y:k.y2});return D.createElement(Q,le({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(j.coordinate)},pt(n.props,j,p)),u&&D.createElement("line",le({className:"recharts-polar-angle-axis-tick-line"},x,k)),a&&t.renderTickItem(a,w,c?c(j.value,p):j.value))});return D.createElement(Q,{className:"recharts-polar-angle-axis-ticks"},P)}},{key:"render",value:function(){var n=this.props,o=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!o||!o.length?null:D.createElement(Q,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,o,s){var a;return D.isValidElement(n)?a=D.cloneElement(n,o):xe(n)?a=n(o):a=D.createElement(dt,le({},o,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}]),t}(y.PureComponent);Ze(Xe,"displayName","PolarAngleAxis");Ze(Xe,"axisType","angleAxis");Ze(Xe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Ne;function Pe(e){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(e)}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},be.apply(this,arguments)}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Et(Object(r),!0).forEach(function(n){J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gn(n.key),n)}}function Qo(e,t,r){return t&&Lt(e.prototype,t),r&&Lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ei(e,t,r){return t=ze(t),ti(e,mn()?Reflect.construct(t,r||[],ze(e).constructor):t.apply(e,r))}function ti(e,t){if(t&&(Pe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ge(e)}function mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mn=function(){return!!e})()}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ze(e)}function ge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ni(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},st(e,t)}function J(e,t,r){return t=gn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gn(e){var t=ri(e,"string");return Pe(t)=="symbol"?t:String(t)}function ri(e,t){if(Pe(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ne=function(e){ni(t,e);function t(r){var n;return Jo(this,t),n=ei(this,t,[r]),J(ge(n),"pieRef",null),J(ge(n),"sectorRefs",[]),J(ge(n),"id",Un("recharts-pie-")),J(ge(n),"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xe(o)&&o()}),J(ge(n),"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xe(o)&&o()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Qo(t,[{key:"isActiveIndex",value:function(n){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(n)!==-1:n===o}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,u=s.labelLine,c=s.dataKey,l=s.valueKey,m=K(this.props,!1),b=K(a,!1),x=K(u,!1),P=a&&a.offsetRadius||20,j=n.map(function(p,k){var S=(p.startAngle+p.endAngle)/2,w=te(p.cx,p.cy,p.outerRadius+P,S),T=N(N(N(N({},m),p),{},{stroke:"none"},b),{},{index:k,textAnchor:t.getTextAnchor(w.x,p.cx)},w),I=N(N(N(N({},m),p),{},{fill:"none",stroke:p.fill},x),{},{index:k,points:[te(p.cx,p.cy,p.outerRadius,S),w],key:"line"}),R=c;return ke(c)&&ke(l)?R="value":ke(c)&&(R=l),D.createElement(Q,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(k)},u&&t.renderLabelLineItem(u,I),t.renderLabelItem(a,T,me(p,R)))});return D.createElement(Q,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(n){var o=this,s=this.props,a=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return n.map(function(l,m){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var b=o.isActiveIndex(m),x=c&&o.hasActiveIndex()?c:null,P=b?a:x,j=N(N({},l),{},{stroke:u?l.fill:l.stroke,tabIndex:-1});return D.createElement(Q,be({ref:function(k){k&&!o.sectorRefs.includes(k)&&o.sectorRefs.push(k)},tabIndex:-1,className:"recharts-pie-sector"},pt(o.props,l,m),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(m)}),D.createElement(Zn,be({option:P,isActive:b,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,o=this.props,s=o.sectors,a=o.isAnimationActive,u=o.animationBegin,c=o.animationDuration,l=o.animationEasing,m=o.animationId,b=this.state,x=b.prevSectors,P=b.prevIsAnimationActive;return D.createElement(Xn,{begin:u,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(P),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var p=j.t,k=[],S=s&&s[0],w=S.startAngle;return s.forEach(function(T,I){var R=x&&x[I],d=I>0?Jn(T,"paddingAngle",0):0;if(R){var O=bt(R.endAngle-R.startAngle,T.endAngle-T.startAngle),A=N(N({},T),{},{startAngle:w+d,endAngle:w+O(p)+d});k.push(A),w=A.endAngle}else{var $=T.endAngle,B=T.startAngle,Z=bt(0,$-B),h=Z(p),E=N(N({},T),{},{startAngle:w+d,endAngle:w+h+d});k.push(E),w=E.endAngle}}),D.createElement(Q,null,n.renderSectorsStatically(k))})}},{key:"attachKeyboardHandlers",value:function(n){var o=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"ArrowRight":{var u=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[u].focus(),o.setState({sectorToFocus:u});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,o=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&o&&o.length&&(!a||!Qn(a,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,o=this.props,s=o.hide,a=o.sectors,u=o.className,c=o.label,l=o.cx,m=o.cy,b=o.innerRadius,x=o.outerRadius,P=o.isAnimationActive,j=this.state.isAnimationFinished;if(s||!a||!a.length||!ye(l)||!ye(m)||!ye(b)||!ye(x))return null;var p=de("recharts-pie",u);return D.createElement(Q,{tabIndex:this.props.rootTabIndex,className:p,ref:function(S){n.pieRef=S}},this.renderSectors(),c&&this.renderLabels(a),Ut.renderCallByParent(this.props,null,!1),(!P||j)&&er.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return o.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:n.sectors!==o.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,o){return n>o?"start":n<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,o){return D.isValidElement(n)?D.cloneElement(n,o):xe(n)?n(o):D.createElement(qn,be({},o,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(n,o,s){if(D.isValidElement(n))return D.cloneElement(n,o);var a=s;return xe(n)&&(a=n(o),D.isValidElement(a))?a:D.createElement(dt,be({},o,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}}]),t}(y.PureComponent);Ne=ne;J(ne,"displayName","Pie");J(ne,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Hn.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});J(ne,"parseDeltaAngle",function(e,t){var r=Fe(t-e),n=Math.min(Math.abs(t-e),360);return r*n});J(ne,"getRealPieData",function(e){var t=e.props,r=t.data,n=t.children,o=K(e.props,!1),s=tr(n,qt);return r&&r.length?r.map(function(a,u){return N(N(N({payload:a},o),a),s&&s[u]&&s[u].props)}):s&&s.length?s.map(function(a){return N(N({},o),a.props)}):[]});J(ne,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,o=t.width,s=t.height,a=nr(o,s),u=n+Ee(e.props.cx,o,o/2),c=r+Ee(e.props.cy,s,s/2),l=Ee(e.props.innerRadius,a,0),m=Ee(e.props.outerRadius,a,a*.8),b=e.props.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:u,cy:c,innerRadius:l,outerRadius:m,maxRadius:b}});J(ne,"getComposedData",function(e){var t=e.item,r=e.offset,n=Ne.getRealPieData(t);if(!n||!n.length)return null;var o=t.props,s=o.cornerRadius,a=o.startAngle,u=o.endAngle,c=o.paddingAngle,l=o.dataKey,m=o.nameKey,b=o.valueKey,x=o.tooltipType,P=Math.abs(t.props.minAngle),j=Ne.parseCoordinateOfPie(t,r),p=Ne.parseDeltaAngle(a,u),k=Math.abs(p),S=l;ke(l)&&ke(b)?(jt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):ke(l)&&(jt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=b);var w=n.filter(function(A){return me(A,S,0)!==0}).length,T=(k>=360?w:w-1)*c,I=k-w*P-T,R=n.reduce(function(A,$){var B=me($,S,0);return A+(ye(B)?B:0)},0),d;if(R>0){var O;d=n.map(function(A,$){var B=me(A,S,0),Z=me(A,m,$),h=(ye(B)?B:0)/R,E;$?E=O.endAngle+Fe(p)*c*(B!==0?1:0):E=a;var H=E+Fe(p)*((B!==0?P:0)+h*I),re=(E+H)/2,F=(j.innerRadius+j.outerRadius)/2,M=[{name:Z,value:B,payload:A,dataKey:S,type:x}],v=te(j.cx,j.cy,F,re);return O=N(N(N({percent:h,cornerRadius:s,name:Z,tooltipPayload:M,midAngle:re,middleRadius:F,tooltipPosition:v},A),j),{},{value:me(A,S),startAngle:E,endAngle:H,payload:A,paddingAngle:Fe(p)*c}),O})}return N(N({},j),{},{sectors:d,data:n})});var oi=rr({chartName:"PieChart",GraphicalChild:ne,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Xe},{axisType:"radiusAxis",AxisComp:qe}],formatAxisMap:or,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ii=({data:e})=>i.jsx(Zt,{width:"100%",height:280,margin:{top:10,right:20,bottom:0,left:0},style:{marginLeft:"10px"},children:i.jsxs(ir,{data:e,children:[i.jsx(sr,{strokeDasharray:"3 3"}),i.jsx(ar,{dataKey:"name"}),i.jsx(lr,{}),i.jsx(Xt,{}),i.jsx(cr,{dataKey:"value",fill:"#82ca9d"})]})});function si({searchQuery:e,setSearchQuery:t,map:r}){const n=async o=>{if(o.preventDefault(),e.trim()==="")return;const s={query:e,fields:["name","geometry"]};new window.google.maps.places.PlacesService(r).findPlaceFromQuery(s,(u,c)=>{if(c===window.google.maps.places.PlacesServiceStatus.OK&&u){const l=u[0];r.setCenter(l.geometry.location),r.setZoom(14)}})};return i.jsxs(_,{component:"form",onSubmit:n,sx:{display:"flex",alignItems:"center",border:"1px solid #000000",backgroundColor:"white",borderRadius:"20px",opacity:.75,m:1,width:{xs:"90%",sm:"80%",md:"60%"},maxWidth:"400px",justifyContent:"space-between"},children:[i.jsx(yr,{sx:{flexGrow:1,my:.5,mx:1,fontSize:{xs:"14px",sm:"16px",md:"18px"}},placeholder:"Search locations...",value:e,onChange:o=>t(o.target.value)}),i.jsx(en,{type:"submit",sx:{p:1},children:i.jsx(Yn,{})})]})}var ai="Expected a function",Ft=NaN,li="[object Symbol]",ci=/^\s+|\s+$/g,ui=/^[-+]0x[0-9a-f]+$/i,di=/^0b[01]+$/i,pi=/^0o[0-7]+$/i,fi=parseInt,hi=typeof De=="object"&&De&&De.Object===Object&&De,mi=typeof self=="object"&&self&&self.Object===Object&&self,gi=hi||mi||Function("return this")(),xi=Object.prototype,yi=xi.toString,vi=Math.max,bi=Math.min,et=function(){return gi.Date.now()};function ji(e,t,r){var n,o,s,a,u,c,l=0,m=!1,b=!1,x=!0;if(typeof e!="function")throw new TypeError(ai);t=$t(t)||0,at(r)&&(m=!!r.leading,b="maxWait"in r,s=b?vi($t(r.maxWait)||0,t):s,x="trailing"in r?!!r.trailing:x);function P(d){var O=n,A=o;return n=o=void 0,l=d,a=e.apply(A,O),a}function j(d){return l=d,u=setTimeout(S,t),m?P(d):a}function p(d){var O=d-c,A=d-l,$=t-O;return b?bi($,s-A):$}function k(d){var O=d-c,A=d-l;return c===void 0||O>=t||O<0||b&&A>=s}function S(){var d=et();if(k(d))return w(d);u=setTimeout(S,p(d))}function w(d){return u=void 0,x&&n?P(d):(n=o=void 0,a)}function T(){u!==void 0&&clearTimeout(u),l=0,n=c=o=u=void 0}function I(){return u===void 0?a:w(et())}function R(){var d=et(),O=k(d);if(n=arguments,o=this,c=d,O){if(u===void 0)return j(c);if(b)return u=setTimeout(S,t),P(c)}return u===void 0&&(u=setTimeout(S,t)),a}return R.cancel=T,R.flush=I,R}function at(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ki(e){return!!e&&typeof e=="object"}function Si(e){return typeof e=="symbol"||ki(e)&&yi.call(e)==li}function $t(e){if(typeof e=="number")return e;if(Si(e))return Ft;if(at(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=at(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ci,"");var r=di.test(e);return r||pi.test(e)?fi(e.slice(2),r?2:8):ui.test(e)?Ft:+e}var Ai=ji;const Pi=ct(Ai),Oi=({setLoading:e})=>{const t=fe(),{center:r,selectedParameterList:n,selectedVehicle:o,vehicleList:s,tractorIcon:a,icons:u,locationData:c,ivnPid:l,placesData:m}=W(F=>F.liveMap),{mode:b,AreaCoveredTrips:x}=W(F=>F.dashboard),{isLoaded:P,loadError:j}=pr({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:["geometry","places"]}),[p,k]=y.useState(null),[S,w]=y.useState(!0),[T,I]=y.useState(5),[R,d]=y.useState(),[O,A]=y.useState(""),$=y.useRef(null),B=Gt(b),Z=y.useCallback(F=>{$.current=F},[]),h=Pi(F=>{if(!F||F.length===0)return;const M=10;let v=0;const C=g=>{F.slice(g,g+M).forEach(G=>{var f;((f=G==null?void 0:G.data)==null?void 0:f.length)>0&&(v+=br(G==null?void 0:G.data,t))}),g+M<F.length?setTimeout(()=>C(g+M),0):(console.log("calculated acreage: ",v),t(gt(v.toFixed(2))),e(!1))};C(0)},300);y.useEffect(()=>(x&&x.length>0?(e(!0),h(x)):(e(!1),t(gt(0))),()=>{h.cancel(),e(!1)}),[x,t]),y.useEffect(()=>{if(S)d(c);else{let F=c==null?void 0:c.filter(M=>(M==null?void 0:M._id)===(o==null?void 0:o.imei));d(F)}},[c,o,S]);const E=()=>{if(!S)t(Pn({lat:21,lng:78})),I(4),w(M=>!M);else{const F=c.find(M=>M.latestDocument.imei===o.imei);F?(console.log(F.latestDocument,"getCenter"),F.latestDocument,w(M=>!M)):ae.error("Data is not available for selected vehicle")}};if(y.useEffect(()=>{P&&k(window.google.maps)},[P,c]),j)return"Error loading maps";if(!P)return"Loading maps";const H={height:"100vh",borderRadius:"8px"},re=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];return p?i.jsxs("div",{children:[i.jsxs(_,{style:{fontSize:"20px",color:B.grey[400],bgcolor:"white",display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:"8px",md:"10px"}},children:[i.jsx(q,{sx:{fontSize:{xs:"16px",md:"20px"},fontWeight:"700",lineHeight:"43px",color:"black",paddingLeft:"10px"},children:"Live Map"}),i.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(si,{searchQuery:O,setSearchQuery:A,map:$.current}),i.jsx(uo,{sx:{marginLeft:0,paddingTop:0,color:B.grey[400]},children:i.jsx(oo,{control:i.jsx(jr,{checked:S,onChange:E}),label:S?"Group":"Individual"})})]})]}),i.jsx(fr,{mapContainerStyle:H,zoom:T,center:r,onLoad:Z,options:{mapTypeControl:!1,styles:b?re:""},children:R&&R.length>0&&R.map((F,M)=>i.jsx(hr,{position:{lat:F.latestDocument.lat,lng:F.latestDocument.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(32,32),fillColor:"red",fillOpacity:2,strokeWeight:1,scale:2}},M))})]}):null};function Ci(){const{vehicles_details:e}=W(n=>n.dashboard),[t,r]=y.useState([]);return y.useEffect(()=>{const n=e.reduce((s,a)=>{const u=a.sell_date?Yt(a.sell_date):null,c=u&&u.isValid()?u.format("MMM YYYY"):"N/A";return s[c]=(s[c]||0)+1,s},{}),o=Object.keys(n).map(s=>({name:s,value:n[s]}));r(o)},[e]),i.jsxs(_,{sx:{background:"white",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[i.jsx($e,{variant:"h2",style:{fontSize:"24px",fontWeight:"700",lineHeight:"46px",fontFamily:"Ubuntu",paddingLeft:"20px"},children:"Vehicles Onboard"}),i.jsxs(_,{sx:{flex:1,overflow:"hidden",position:"relative"},children:[i.jsx(_,{sx:{position:"absolute",top:"50%",left:"-25px",transform:"translateY(-50%)",transformOrigin:"center center",display:"inline-block"},children:i.jsx($e,{style:{transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"No. of Vehicles"})}),i.jsx(ii,{data:t})]}),i.jsx($e,{style:{textAlign:"center",fontSize:"14px",fontFamily:"Ubuntu",fontWeight:"500"},children:"Month & Year"})]})}const Nt=Math.PI/180,wi=({cx:e,cy:t,midAngle:r,innerRadius:n,outerRadius:o,percent:s,index:a})=>{const u=n+(o-n)*.5,c=e+u*Math.cos(-r*Nt),l=t+u*Math.sin(-r*Nt);return i.jsx("text",{x:c,y:l,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",fontSize:14,children:`${(s*100).toFixed(0)}%`})},Ti=({data:e,COLORS:t})=>{y.useEffect(()=>{},[e]);const r=e.every(n=>n.value===0);return i.jsx(_,{sx:{width:"100%",height:"100%"},children:r?i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:i.jsx(q,{sx:{textAlign:"center"},children:"No data available to display."})}):i.jsx(Zt,{width:"100%",height:"100%",children:i.jsxs(oi,{children:[i.jsx(ne,{data:e,cx:"50%",cy:"50%",outerRadius:"80%",labelLine:!1,label:wi,fill:"#8884d8",dataKey:"value",children:e.map((n,o)=>i.jsx(qt,{fill:t[o%t.length],fontSize:"18px"},`cell-${o}`))}),i.jsx(Xt,{})]})})})},Me=({title:e})=>i.jsx(q,{sx:{fontFamily:"Ubuntu",fontSize:"18px",fontWeight:"700",lineHeight:"25px",padding:"6px"},children:e}),tt=({label:e,count:t,color:r,type:n,title:o})=>{let s=fe(),{vehicleZone:a}=W(l=>l.dashboard),u=ut();const c=(l,m)=>{if(l==="Vehicle Status")console.log("Vehicle label: ",m),s(On(m)),s(Cn(!0));else if(l==="Breakdown"){switch(console.log("breakdown label: ",m),m){case"Open":s(ue("Open"));break;case"Overdue":s(ue("overdue"));break;case"Closed":s(ue("Close"));break}u("/breakdown")}};return i.jsxs(_,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",width:"80%"},children:[i.jsxs(_,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(_,{sx:{width:"12px",height:"12px",bgcolor:r,borderRadius:"50%",marginRight:"8px"}}),i.jsx(oe,{sx:{color:"black",bgcolor:o==="Vehicle Status"?a===e?"green":"white":"transparent"},onClick:()=>{c(o,e)},children:e})]}),i.jsx(_,{sx:{display:"flex",gap:"25px"},children:n==="assignVehicle"?i.jsx(q,{color:r,children:t}):i.jsx(un,{sx:{bgcolor:r,width:"30px",height:"30px",fontSize:"1rem",fontWeight:"bold",color:"black"},"aria-label":"color",children:t})})]})},_i=({data:e,colors:t})=>{const{loading:r,isDriverBehaviorLoading:n}=W(o=>o.dashboard);return i.jsxs(_,{sx:{background:"white",height:{xs:"250px",sm:"200px"},width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",padding:{xs:"10px",md:"5px"},gap:"10px",flexDirection:{xs:"column",md:"row"}},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"5px",height:"90%",gap:"30px"},children:[i.jsx(q,{sx:{fontSize:{xs:"15px",md:"17px"},fontWeight:"500"},children:"Driver Behavior"}),i.jsx(_,{sx:{display:"flex",gap:"4px",flexDirection:"column"},children:e.map((o,s)=>i.jsxs(_,{sx:{display:"flex",justifyContent:"space-between",gap:"30px"},children:[i.jsx(q,{fontSize:{xs:"12px",md:"15px"},children:o.name.split(" ")[0]}),i.jsx(un,{sx:{bgcolor:t[s],width:24,height:24,fontSize:"0.75rem"},"aria-label":"color",children:o.name.split(" ").slice(1).join(" ")})]},s))})]}),i.jsx(_,{sx:{width:{xs:"100%",md:"55%"},height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n?i.jsx(q,{sx:{fontSize:"14px"},children:"Loading..."}):i.jsx(Ti,{data:e,COLORS:t})})]})},Mt=({statuses:e,title:t})=>{let r=fe(),n=ut();const o=s=>{if(t==="Inspection Approvals"){switch(console.log("status: ",s),s.label){case"Rejected":r(ue("Rejected"));break;case"Pending":r(ue("Open"));break;case"Approved":r(ue("Close"));break}n("/inspections")}else if(t==="Service Remainder"){switch(s.label){case"Overdue":r(Qe("Overdue"));break;case"Due soon":r(Qe("Due soon"));break;case"Serviced":r(Qe("Serviced"));break}n("/service")}};return i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx(Me,{title:t}),i.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"70px",md:"40px"},textAlign:"center"},children:e.map((s,a)=>i.jsxs(_,{sx:{padding:"8px",cursor:"pointer","&:hover":{background:"#f5f5f5",borderRadius:"8px"}},onClick:()=>{o(s)},children:[i.jsx(q,{sx:{fontSize:"52px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"57px",color:s.color,margin:"30px 0"},"aria-label":"color",children:s.count}),i.jsx(q,{sx:{fontSize:"18px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"18px",color:"black"},children:s.label})]},a))})]})},Vt={total:0,online:0,offline:0,running:0};function Ri({vehicleReport:e,imeiNo:t,loading:r,isloadingReport:n}){var F,M,v,C,g,Y,G;const{vehicleList:o,onlineVehicle:s,locationData:a}=W(f=>f.liveMap);W(f=>f.dashboard);const{breakdownStatusCount:u}=W(f=>f.breakdown),{inspectionStatusCount:c}=W(f=>f.inspection),{vehicleStatesData:l}=W(f=>f.report),{report:m,driver_behavior:b,overdueCount:x,completedCount:P,serviceSoonCount:j,selectedVehicleGroup:p,areaCovered:k}=W(f=>f.dashboard),[S,w]=y.useState(0),[T,I]=y.useState(Vt);y.useEffect(()=>{if((o==null?void 0:o.length)>0){let f={...Vt};if(p){const L=A(p==null?void 0:p.id);console.log("result",L);const U=o.filter(ee=>ee.vehicle_group===p.id);f.total=U.length,f.online=L.onlineCount,f.running=L.runningCount,f.offline=f.total-f.online}console.log("Updated Vehicle Count:",f),I(f)}console.log("vehicleList",o)},[p]),y.useEffect(()=>{if((o==null?void 0:o.length)>0){let f=0;o==null||o.map(L=>{var U;((U=L==null?void 0:L.imei)==null?void 0:U.length)>0&&f++}),w(f)}},[o]),y.useEffect(()=>{},[x,P,j]);const R=f=>{if(!f)return!1;const L=String(f).toLowerCase();return s.some(U=>String(U).toLowerCase()===L)},d=f=>a==null?void 0:a.some(L=>String(L.latestDocument.imei)===String(f)&&L.latestDocument.speed>0&&(L.latestDocument.ignition===!0||L.latestDocument.ignition===1)),O=()=>{let f=0,L=0,U=0;return o&&o.length>0&&o.map(ee=>{var X;let Oe=(X=ee==null?void 0:ee.imei[0])==null?void 0:X.mac_id,he=R(Oe);d(Oe),he&&f++}),{onlineCount:f,runningCount:L,idelingCount:U}},A=f=>{let L=0,U=0;return s.forEach(ee=>{if(t.includes(String(ee))){const Oe=a==null?void 0:a.find(he=>{var X;return String((X=he==null?void 0:he.latestDocument)==null?void 0:X.imei)===String(ee)});if(Oe&&o.some(X=>{var Ce;return X.vehicle_group===f&&((Ce=X==null?void 0:X.imei[0])==null?void 0:Ce.mac_id)===String(ee)})){L++;const{speed:X,ignition:Ce}=Oe.latestDocument;X>0&&(Ce===!0||Ce===1)&&U++}}}),{onlineCount:L,runningCount:U}};y.useEffect(()=>{},[l]);const $=[{name:"Overspeed O",value:((F=l==null?void 0:l.totals)==null?void 0:F.total_overSpeedTimeSec)||0},{name:"Economy E",value:((M=l==null?void 0:l.totals)==null?void 0:M.total_economyTimeSec)||0},{name:"Steady S",value:((v=l==null?void 0:l.totals)==null?void 0:v.total_idleTimeSec)||0}],B=["#0088FE","#00C49F","#FFBB28","#FF8042"],Z=[{label:"Rejected",count:c.rejected||0,color:"#FF0202"},{label:"Pending",count:c.open||0,color:"black"},{label:"Approved",count:c.close||0,color:"green"}],h=[{label:"Overdue",count:x,color:"#FF0202"},{label:"Due soon",count:j,color:"black"},{label:"Serviced",count:P,color:"green"}],E=[{name:"Total Vehicles",count:Object.keys(p).length>0?T.total:S,color:"grey"},{name:"Online",count:Object.keys(p).length>0?T.online:O().onlineCount,color:"red"},{name:"Offline",count:Object.keys(p).length>0?T.offline:S-O().onlineCount,color:"grey"},{name:"Running",count:Object.keys(p).length>0?T.running:O().runningCount,color:"green"},{name:"Idling",count:Object.keys(p).length>0?T.online-T.running:O().idelingCount,color:"yellow"}],H=[{name:"Distance Covered",count:((C=l==null?void 0:l.totals)==null?void 0:C.totalDistance)||0,color:"grey"},{name:"Running time",count:((g=l==null?void 0:l.totals)==null?void 0:g.total_runningTime)||0,color:"red"},{name:"Idling Time",count:((Y=l==null?void 0:l.totals)==null?void 0:Y.total_idleTime)||0,color:nt.bgColor},{name:"Engine Hrs",count:((G=l==null?void 0:l.totals)==null?void 0:G.total_engineHours)||0,color:nt.bgColor}],re=[{name:"Open",count:u.open,color:"grey"},{name:"Overdue",count:u.overDue,color:"red"},{name:"Closed",count:u.close,color:"green"}];return i.jsxs(i.Fragment,{children:[i.jsx(_i,{data:$,colors:B}),i.jsxs(_,{sx:{background:"white",height:{xs:"150px",md:"200px"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflowX:"hidden"},children:[i.jsx(Me,{title:"Vehicles Status"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:E.map((f,L)=>i.jsx(tt,{label:f.name,count:f.count,color:f.color,title:"Vehicle Status"},L+1))})]}),i.jsx(Mt,{statuses:h,title:"Service Remainder"}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx(Me,{title:"Assigned Vehicles"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center"},children:H.map((f,L)=>i.jsx(tt,{type:"assignVehicle",label:f.name,count:f.count,color:f.color},L+1))})]}),i.jsxs(_,{sx:{background:"white",height:"200px",borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"},children:[i.jsx(Me,{title:"Breakdown Resolved"}),i.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",alignContent:"center",gap:"10px",paddingTop:"10px"},children:re.map((f,L)=>i.jsx(tt,{label:f.name,count:f.count,color:f.color,title:"Breakdown"}))})]}),i.jsx(Mt,{statuses:Z,title:"Inspection Approvals"})]})}const Di=()=>{var Z;const{allAlerts:e,loading:t}=W(h=>h.geofence),{vehicleList:r}=W(h=>h.liveMap),n=fe(),[o,s]=y.useState(0),[a,u]=y.useState(10),[c,l]=y.useState([]),[m,b]=y.useState(""),[x,P]=y.useState(""),[j,p]=y.useState(!1);y.useEffect(()=>{console.log("allalert",e.filter(h=>h._id==="67fde2c226ec73328f071edd"))},[e]),y.useEffect(()=>{console.log("vehicleList",r)},[r]);let k=h=>r.find(E=>{var H;return((H=E==null?void 0:E.imei[0])==null?void 0:H.mac_id)==h||""});const S=(h,E)=>s(E),w=h=>{u(parseInt(h.target.value,10)),s(0)},T=h=>{l(E=>E.includes(h)?E.filter(H=>H!==h):[...E,h])},I=h=>c.includes(h),R=h=>{if(h.target.checked){const E=A==null?void 0:A.map(H=>H._id);l(E)}else l([])},d=()=>{console.log("vhehicle list",B);let h={imeiList:B,startDate:je(new Date).format("MM-DD-YYYY"),endDate:je(new Date).format("MM-DD-YYYY")};n(Wt(h))},O=async()=>{try{if(c.length===0)return;const h=await n(xt({ids:c}));xt.fulfilled.match(h)?(l([]),d()):console.error("Delete failed:",h==null?void 0:h.payload)}catch(h){console.error("Delete error:",h)}},A=(Z=e==null?void 0:e.filter(h=>m?h.type===m:!0))==null?void 0:Z.filter(h=>x?h.imei===x:!0),$=[...new Set(e==null?void 0:e.map(h=>h.type))],B=[...new Set(e==null?void 0:e.map(h=>h.imei))];return i.jsxs(_,{children:[t&&i.jsx(Ar,{}),i.jsxs(Ie,{container:!0,spacing:2,sx:{mb:2},children:[i.jsx(Ie,{item:!0,xs:6,md:3,children:i.jsxs(kt,{fullWidth:!0,children:[i.jsx(St,{children:"Alert Type"}),i.jsxs(At,{value:m,label:"Alert Type",onChange:h=>{b(h.target.value),s(0)},children:[i.jsx(Le,{value:"",children:"All"}),$.map(h=>i.jsx(Le,{value:h,children:h},h))]})]})}),i.jsx(Ie,{item:!0,xs:6,md:3,children:i.jsxs(kt,{fullWidth:!0,children:[i.jsx(St,{children:"Vehicle"}),i.jsxs(At,{value:x,label:"Vehicle",onChange:h=>{P(h.target.value),s(0)},children:[i.jsx(Le,{value:"",children:"All"}),B.map(h=>{var E;return i.jsx(Le,{value:h,children:(E=k(h))==null?void 0:E.registration_id},h)})]})]})}),i.jsx(Ie,{item:!0,xs:12,md:3,display:"flex",alignItems:"center",children:i.jsx(oe,{variant:"contained",color:"error",disabled:c.length===0,onClick:()=>p(!0),children:"Delete Selected"})})]}),i.jsxs(tn,{component:sn,sx:{maxHeight:700},children:[i.jsxs(nn,{stickyHeader:!0,children:[i.jsx(rn,{children:i.jsxs(Ve,{children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Be,{checked:A.length>0&&c.length===A.length,indeterminate:c.length>0&&c.length<A.length,onChange:R})}),i.jsx(V,{children:"Sr no"}),i.jsx(V,{children:"Vehicle"}),i.jsx(V,{children:"Alert type"}),i.jsx(V,{children:"Message"}),i.jsx(V,{children:"Created Time"})]})}),i.jsx(on,{children:A==null?void 0:A.slice(o*a,o*a+a).map((h,E)=>i.jsxs(Ve,{hover:!0,selected:I(h._id),onClick:()=>T(h._id),sx:{cursor:"pointer"},children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Be,{checked:I(h._id)})}),i.jsx(V,{children:o*a+E+1}),i.jsx(V,{children:k(h==null?void 0:h.imei).registration_id}),i.jsx(V,{children:h==null?void 0:h.type}),i.jsx(V,{children:h==null?void 0:h.msg}),i.jsx(V,{children:je(new Date(h==null?void 0:h.createdAt)).format("DD-MM-YYYY HH:mm")})]},h==null?void 0:h._id))})]}),i.jsx(an,{rowsPerPageOptions:[12],component:"div",count:A.length,rowsPerPage:a,page:o,onPageChange:S,onRowsPerPageChange:w})]}),i.jsx(ft,{open:j,onClose:()=>p(!1),children:i.jsxs(_,{p:3,children:[i.jsx(q,{variant:"h6",children:"Confirm Deletion"}),i.jsxs(q,{sx:{my:2},children:["Are you sure you want to delete ",c.length," selected notifications?"]}),i.jsxs(_,{display:"flex",justifyContent:"flex-end",gap:2,children:[i.jsx(oe,{onClick:()=>p(!1),variant:"outlined",children:"Cancel"}),i.jsx(oe,{onClick:async()=>{await O(),p(!1)},color:"error",variant:"contained",children:"Confirm Delete"})]})]})})]})},Ii=()=>{const{allNotification:e}=W(d=>d.geofence),t=fe(),r=ut(),[n,o]=y.useState(0),[s,a]=y.useState(10),[u,c]=y.useState([]),[l,m]=y.useState(!1),[b,x]=y.useState(!1),P=(d,O)=>o(O),j=d=>{a(parseInt(d.target.value,10)),o(0)},p=d=>{c(O=>O.includes(d)?O.filter(A=>A!==d):[...O,d])},k=d=>u.includes(d),S=e||[],w=S.slice(n*s,n*s+s),T=d=>{const O=d.target.checked;if(m(O),O){const A=S.map($=>$.id);c(A)}else c([])},I=async()=>{try{console.log("Deleting rows:",u);const d=await t(yt({ids:u}));yt.fulfilled.match(d)?(c([]),t(zt())):console.error("Delete failed:",d==null?void 0:d.payload),x(!1)}catch(d){console.error("Delete failed:",d)}},R=d=>{console.log("row",d),t(ue((d==null?void 0:d.record_id)||""));let O={id:d==null?void 0:d.id,status:"Seen"};switch(t(wn(O)),d==null?void 0:d.goes_to){case"BI":t(vt(0)),r("/inspections");break;case"IB":r("/breakdown?tab=1");break;case"SI":t(vt(1)),r("/inspections");break;case"IS":r("/service?tab=1");break;case"SS":r("/service?tab=0");break;case"BB":r("/breakdown?tab=0");break;default:ae.error("Page location not found");break}};return i.jsxs(_,{children:[i.jsx(Pr,{sx:{justifyContent:"flex-end"},children:i.jsx(oe,{color:"error",variant:"contained",disabled:u.length===0,onClick:()=>x(!0),children:"Delete Selected"})}),i.jsxs(tn,{component:sn,sx:{maxHeight:500},children:[i.jsxs(nn,{stickyHeader:!0,children:[i.jsx(rn,{children:i.jsxs(Ve,{children:[i.jsx(V,{padding:"checkbox",children:i.jsx(Be,{checked:l,indeterminate:u.length>0&&u.length<w.length,onChange:T})}),i.jsx(V,{children:"Sr no"}),i.jsx(V,{children:"Inspection Id"}),i.jsx(V,{children:"Message"}),i.jsx(V,{children:"Date Time"})]})}),i.jsx(on,{children:w.map((d,O)=>i.jsxs(Ve,{hover:!0,selected:k(d.id),sx:{cursor:"pointer"},children:[i.jsx(V,{padding:"checkbox",onClick:()=>p(d.id),children:i.jsx(Be,{checked:k(d.id)})}),i.jsx(V,{children:n*s+O+1}),i.jsx(V,{children:d==null?void 0:d.record_id}),i.jsx(V,{onClick:()=>R(d),sx:{color:d.status==="Seen"?"#7d88c7":"blue",textDecoration:"underline",cursor:"pointer"},title:"View Breakdown",children:d==null?void 0:d.message}),i.jsx(V,{children:je(new Date(d==null?void 0:d.created)).format("DD-MM-YYYY HH:mm")})]},d==null?void 0:d.id))})]}),i.jsx(an,{rowsPerPageOptions:[10],component:"div",count:S.length,rowsPerPage:s,page:n,onPageChange:P,onRowsPerPageChange:j})]}),i.jsxs(ft,{open:b,onClose:()=>x(!1),children:[i.jsx(Or,{children:"Confirm Deletion"}),i.jsx(ln,{children:i.jsxs(q,{children:["Are you sure you want to delete ",u.length," selected",u.length>1?" items":" item","?"]})}),i.jsxs(cn,{children:[i.jsx(oe,{onClick:()=>x(!1),children:"Cancel"}),i.jsx(oe,{color:"error",onClick:I,children:"Delete"})]})]})]})};function Ei({showNotification:e,setShowNotification:t}){fe(),W(s=>s.liveMap);const[r,n]=y.useState("one"),o=(s,a)=>{n(a)};return i.jsx(i.Fragment,{children:i.jsxs(ft,{open:e,onClose:()=>t(!1),fullWidth:!0,maxWidth:"xxl",sx:{"& .MuiDialog-paper":{height:"90vh"}},children:[i.jsx(en,{sx:{position:"absolute",right:2,top:8},onClick:()=>t(!1),children:i.jsx(Sr,{})}),i.jsxs(ln,{dividers:!0,sx:{minHeight:"100px"},children:["  ",i.jsxs(_,{sx:{width:"100%"},children:[i.jsxs(Cr,{value:r,onChange:o,textColor:"inherit",indicatorColor:"secondary",sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #ccc"},children:[i.jsx(Pt,{value:"one",label:"Inbox",sx:{color:"black",fontWeight:"bold"}}),i.jsx(Pt,{value:"two",label:"Alert",sx:{color:"black",fontWeight:"bold"}})]}),i.jsxs(_,{sx:{p:2},children:[r==="one"&&i.jsx(_,{children:i.jsx(Ii,{})}),r==="two"&&i.jsx(_,{children:i.jsx(Di,{})})]})]})]}),i.jsx(cn,{children:i.jsx(oe,{onClick:()=>t(!1),children:"Close"})})]})})}const As=()=>{const{w_customer_id:e,collapsed:t}=W(v=>v.auth),{mode:r,selectedTripData:n,selectedVehicleGroup:o,showVehicles:s,vehicleZone:a}=W(v=>v.dashboard),{breakdowns:u}=W(v=>v.breakdown),{inspectionHistory:c}=W(v=>v.inspection),[l,m]=y.useState(()=>{const v=sessionStorage.getItem("imeiNo");return v?JSON.parse(v):[]}),{selectedVehicle:b,vehicleList:x,onlineVehicle:P,locationData:j}=W(v=>v.liveMap),p=fe(),k=Gt(r),[S,w]=y.useState([]),[T,I]=y.useState(!1),[R,d]=y.useState({}),[O,A]=y.useState(!1),[$,B]=y.useState(!1),[Z,h]=y.useState(!1);y.useEffect(()=>{(async()=>{await H()})(),p(Tn())},[]);const E=v=>{let C=x.find(g=>{var Y;return((Y=g==null?void 0:g.imei[0])==null?void 0:Y.mac_id)==v});return(C==null?void 0:C.registration_id)||v};y.useEffect(()=>{if(c.length>0){let v={open:0,rejected:0,close:0};c.map(C=>{C.status==="Open"&&v.open++,C.status==="Close"&&v.close++,C.status==="Rejected"&&v.rejected++}),p(_n(v))}},[u]),y.useEffect(()=>{if(u.length>0){let v={open:0,overDue:0,close:0};u.map(C=>{if(C.status==="Open"&&v.open++,C.status==="Close"&&v.close++,C.submission_date){const g=new Date(C.submission_date),Y=new Date;Y.setHours(0,0,0,0),g.setHours(0,0,0,0),g<Y&&C.status=="Open"&&v.overDue++}}),p(Rn(v))}},[u]),y.useEffect(()=>{p(Dn())},[]),y.useEffect(()=>{sessionStorage.setItem("imeiNo",JSON.stringify(l))},[l]),y.useEffect(()=>{var v,C,g;Object.keys(b).length===0&&x.length>0&&p(In({imei:(C=(v=x[0])==null?void 0:v.imei[0])==null?void 0:C.mac_id,reg_id:(g=x[0])==null?void 0:g.registration_id}))},[b,x]),y.useEffect(()=>{let v=x.map(g=>{var Y;return((Y=g==null?void 0:g.imei[0])==null?void 0:Y.mac_id)||null}).filter(g=>g),C={imeiList:v,startDate:je(new Date).format("MM-DD-YYYY"),endDate:je(new Date).format("MM-DD-YYYY")};v&&v.length>0&&p(Wt(C)),p(zt())},[x]),y.useEffect(()=>{(async()=>{if(b!=null&&b.imei){const C=Yt(),g=C.startOf("day").format("MM/DD/YYYY HH:mm:ss"),Y=C.endOf("day").format("MM/DD/YYYY HH:mm:ss"),G={imei:b.imei,startTime:g,endTime:Y};try{p(En(G))}catch(f){console.error("Error fetching report:",f)}}})()},[b,p]),y.useEffect(()=>{const v=g=>{(g==null?void 0:g.imei)!==null&&l.find(f=>parseInt(f)===(g==null?void 0:g.imei))&&ae.error(`Type: ${g==null?void 0:g.type} ${g==null?void 0:g.msg} ${E(g==null?void 0:g.imei)}`,{id:"geofence",autoClose:5e3})},C=g=>{(g==null?void 0:g.imei)!==null&&l.find(f=>parseInt(f)===(g==null?void 0:g.imei))&&ae.error(`${g==null?void 0:g.msg} ${E(g==null?void 0:g.imei)}`,{id:"speed",autoClose:5e3})};return we.on("geofenceAlert",v),we.on("speedAlert",C),()=>{we.off("geofenceAlert",v),we.off("speedAlert",C)}},[l,we]);const H=async()=>{try{let v=[],C=[];const g=await p(Ln({w_customer_id:e}));if(Array.isArray(g.payload)){g.payload.forEach(f=>{var L,U;Array.isArray(f.imei)&&f.imei.length>0?(v.push({id:f.id,label:f.registration_id,value:(L=f==null?void 0:f.imei[0])==null?void 0:L.mac_id,vehilce_type:f==null?void 0:f.segment,sell_date:f==null?void 0:f.sell_date,workShop:f==null?void 0:f.workshop,vehicle_group:f==null?void 0:f.vehicle_group}),C.push((U=f.imei[0])==null?void 0:U.mac_id),f.registration_id):(console.error("IMEI data not found for item:",f),ae.error(`IMEI Number not found for the vehicle: ${f==null?void 0:f.registration_id}`,{duration:2e3}))}),m(C);const Y="one",G=C;C.length>0&&(p(Fn({type:Y,imei:G})),p($n(G))),w(v),p(Nn(v)),p(Mn({w_customer_id:e})),p(Vn(e)),p(Bn({}))}else console.error("Unexpected data format:",g),ae.error("Unexpected data format:")}catch(v){console.error("Error fetching vehicle data:",v),ae.error(`Error fetching vehicle data: ${v}`)}},re=v=>j==null?void 0:j.some(C=>String(C.latestDocument.imei)===String(v)&&C.latestDocument.speed>0&&(C.latestDocument.ignition===!0||C.latestDocument.ignition===1)),F=v=>j==null?void 0:j.some(C=>String(C.latestDocument.imei)===String(v)&&C.latestDocument.speed<=0&&(C.latestDocument.ignition===!0||C.latestDocument.ignition===1)),M=S.filter(v=>{if(!(Object.keys(o).length===0||v.vehicle_group===o.id))return!1;const g=v.value,Y=P.includes(g),G=!P.includes(g),f=P.includes(g)&&re(g),L=P.includes(g)&&F(g);switch(a){case"Total Vehicles":return!0;case"Online":return Y;case"Running":return f;case"Offline":return G;case"Idling":return L;default:return!0}});return i.jsxs("div",{className:"app",style:{overflowX:"hidden",maxWidth:"100vw"},children:[i.jsx(dr,{}),i.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626",overflowX:"hidden",overflowY:"hidden"},children:[i.jsx(ur,{title:"Dashboard",setShowNotification:I,showNotification:T,setShowVehiclesGroup:A,showVehiclesGroup:O}),i.jsx(kr,{setShowVehiclesGroup:A,showVehiclesGroup:O}),i.jsxs(_,{sx:{height:"92vh",backgroundColor:k.grey[100],margin:"0",overflowX:"hidden",overflowY:{xs:"auto",md:"hidden"}},children:[s&&i.jsx(_,{sx:{position:"fixed",width:{xs:"100%",md:"18%"},right:{xs:0,md:"0px"},height:{xs:"auto",md:"90vh"},zIndex:9999,backgroundColor:k.grey[100],overflowY:"auto",scrollBehavior:"smooth",scrollbarWidth:"thin",maxWidth:"100vw"},children:i.jsx(Wn,{vehicleData:M,showVehicles:s})}),i.jsx($e,{style:{height:"67px",backgroundColor:"white",paddingLeft:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"700",fontFamily:"Ubuntu",lineHeight:"43px",textAlign:"center"},children:"My Dashboard"}),i.jsxs(_,{sx:{display:"flex",gap:"30px",background:nt.bgShadow,height:{xs:"auto",md:"78vh"},padding:{xs:"15px",md:"30px"},flexDirection:{xs:"column",md:"row"},overflowY:"auto",overflowX:"hidden",flexWrap:{xs:"wrap",md:"nowrap"},maxWidth:"100vw",width:"96%"},children:[i.jsxs(_,{sx:{width:{xs:"100%",md:"45%"},display:"flex",flexDirection:"column",gap:t?"30px":"12px",height:"fit-content"},children:[T&&i.jsx(Ei,{showNotification:T,setShowNotification:I}),"              ",i.jsx(Ci,{}),i.jsx(_,{sx:{background:"white",height:{xs:"40vh",sm:"35vh",md:"37vh"},borderRadius:"8px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",overflow:"hidden"},children:i.jsx(Oi,{setLoading:B})})]}),i.jsx(_,{sx:{width:"55%",display:"grid",gridTemplateColumns:{lg:"1fr 1fr",md:"1fr",sm:"1fr"},gap:t?"27px":"7px",overflowX:"hidden",justifyContent:"center",alignContent:"center",alignItems:"center",height:"fit-content"},children:i.jsx(Ri,{vehicleReport:R,imeiNo:l,loading:$,isloadingReport:Z})})]})]})]})]})};export{As as default};
