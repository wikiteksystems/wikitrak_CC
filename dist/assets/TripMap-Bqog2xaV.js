import{e as l,j as t,w as V,v as Re,H as dt,aD as pt,B as O,G as z,J as X,aE as ht,az as $,C as G,T as A,ag as ut,aF as xt,aG as ft,ah as bt,V as Me,aH as wt,aI as mt,D as St,aJ as Ct,aK as jt}from"./index-BlU2rE_E.js";import{P as ie,O as Ae,u as yt,G as kt,D as Pt,a as le,I as re,b as Y}from"./esm-B9Is4sZV.js";import{r as Et}from"./redTractor-NXgVJyvR.js";import{d as Ft}from"./Info-D9FV1h0Y.js";function Oe({trip:s,tripPlay:n,onTripEnd:h,setSpeed:u}){const[r,S]=l.useState([]),[c,f]=l.useState([]),[b,C]=l.useState(0),w=l.useRef(null),T=1e4,[a,W]=l.useState(0),[U,k]=l.useState(0);l.useEffect(()=>{if(Array.isArray(s)&&s.length>0){const y=s.filter(p=>(p==null?void 0:p.lat)&&(p==null?void 0:p.lng)).map(p=>({lat:parseFloat(p.lat),lng:parseFloat(p.lng),heading:p.heading||0,speed:p.speed||0}));S(y.length>0?y:[])}else S([])},[s]),l.useEffect(()=>{if(n&&r.length>1){C(0),f([]);const y=performance.now(),p=F=>{const j=F-y,E=Math.min(j/T,1);C(E),E<1?w.current=requestAnimationFrame(p):(f([...r]),h())};return w.current=requestAnimationFrame(p),()=>cancelAnimationFrame(w.current)}},[n,r]);const m=l.useMemo(()=>{var I,R;if(r.length<2||b===0)return r[0]||{lat:0,lng:0};const y=r.length-1,p=Math.floor(b*y),F=Math.min(p+1,y),j=b*y%1,E=r[p]||{lat:0,lng:0},q=r[F]||{lat:0,lng:0},v={lat:E.lat+(q.lat-E.lat)*j,lng:E.lng+(q.lng-E.lng)*j},K=((I=r[p])==null?void 0:I.heading)||0,L=((R=r[p])==null?void 0:R.speed)||0;return W(K),k(L),u(L),b>0&&n&&f(_=>[..._,v]),v},[r,b,n]);return t.jsxs(t.Fragment,{children:[r.length>1&&t.jsx(ie,{path:r,options:{strokeColor:"red",strokeOpacity:1,strokeWeight:4,geodesic:!1}}),n&&c.length>1&&t.jsx(ie,{path:c,options:{strokeColor:"green",strokeOpacity:1,strokeWeight:5,zIndex:1e3,geodesic:!1}}),n&&m.lat!==0&&m.lng!==0&&t.jsx(Ae,{position:m,mapPaneName:Ae.OVERLAY_MOUSE_TARGET,children:t.jsx("div",{style:{transform:`rotate(${a}deg)`,transition:"transform 0.2s linear",width:"30px",height:"30px",transformOrigin:"center center",position:"absolute",left:"50%",top:"50%",translate:"-50% -50%"},children:t.jsx("img",{src:Et,alt:"Tractor",style:{width:"100%",height:"100%"}})})})]})}function It({tripPlay:s,speed:n,totalDistance:h,Acreage:u,filterCoordinates:r,acreageTrips:S,handleTrip:c,showGraph:f,handleShowGraph:b,drawing:C,setDrawing:w,setPaths:T,setCurrentPath:a,setMousePos:W,setAreaInfo:U,setCalculatedAcreageTrips:k}){var K,L;const{selectedTripData:m}=V(I=>I.dashboard);let y=Re(),p=dt();const[F]=pt(),j=F.get("source"),E=()=>{var I,R,_;if(console.log("selected trip data",(I=m[0])==null?void 0:I.venderId,S),m.length>0)if(((R=m[0])==null?void 0:R.venderId)==="VT200"||((_=m[0])==null?void 0:_.venderId)==="wtkpltf001"){let D={};if(Object.keys(S).length>0){let N=0;Object.keys(S).map((Z,B)=>{let M=ht(S[Z]);D[B]=(M==null?void 0:M.points)||[],N+=(M==null?void 0:M.area)||0}),k(D),y($(N))}else G.error("No acreage trip found")}else r(m,y)},q=()=>{p("/reports")},v=m&&m.length>0?!(((K=m[0])==null?void 0:K.venderId)==="VT200"||((L=m[0])==null?void 0:L.venderId)==="wtkpltf001"):!0;return t.jsxs(O,{sx:{bgcolor:z.bgColor,position:"relative",color:"white",display:"flex",alignItems:"center",overflowX:"hidden",flexWrap:"wrap",border:"1px solid white",gap:"5px",paddingLeft:"5px",padding:"10px 10px"},children:[t.jsxs(X,{sx:{background:"white",border:"1px solid white",borderRadius:"5px",padding:"5px 20px",color:"black"},onClick:E,disabled:v,children:[" ","Calculate Acerage"]}),t.jsxs(X,{sx:{background:s?"transparent":"white",border:"1px solid white",borderRadius:"5px",height:"38px",padding:"5px 20px",color:s?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{c()},children:[s?"Pause":"Play","-Trip"]}),t.jsxs(X,{style:{height:"38px",padding:"5px 20px"},sx:{background:f?"transparent":"white",border:"1px solid white",borderRadius:"5px",color:f?"white":"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{b()},children:[f?"Hide":"Show","-Graph"]}),j==="TripDetail"&&t.jsx(X,{style:{height:"38px",padding:"5px 20px"},sx:{background:"white",border:"1px solid white",borderRadius:"5px",color:"black","&:hover":{background:"transparent",color:"white"}},onClick:()=>{q()},children:"Go back"})]})}const vt=({label:s,value:n})=>t.jsxs(O,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[t.jsx(A,{variant:"body2",color:"textSecondary",children:s}),t.jsx(A,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:n||"N/A"})]}),Mt=(s,n)=>(s==null?void 0:s.find(h=>{var u,r;return((r=(u=h.imei)==null?void 0:u[0])==null?void 0:r.mac_id)===n.imei}))||{},Te=({title:s,details:n})=>t.jsx(O,{sx:{width:"45%"},children:n.map(({label:h,value:u})=>t.jsx(vt,{label:h,value:u},h))});function At({handleVehicleInfo:s,vehicleReport:n,speed:h,totalDistance:u,Acreage:r,tripPlay:S,whereToUse:c}){var U,k,m;const{collapsed:f}=V(y=>y.auth),{vehicleList:b,selectedVehicle:C}=V(y=>y.liveMap),[w,T]=l.useState({});l.useEffect(()=>{T(Mt(b,C))},[b,C]),l.useEffect(()=>{},[n]);const a=[{label:"Vehicle No:",value:w==null?void 0:w.registration_id},{label:"Model:",value:(U=w==null?void 0:w.vehicle_model)==null?void 0:U.name},{label:"IMEI No:",value:(m=(k=w==null?void 0:w.imei)==null?void 0:k[0])==null?void 0:m.mac_id},{label:"Chassis No:",value:w==null?void 0:w.chassis_no},{label:"Engine No:",value:w==null?void 0:w.engine_no}],W=[{label:"Equipment:",value:"N/A"},{label:"Avg Speed:",value:(n==null?void 0:n.averageSpeed)||"N/A"},{label:"Total Distance:",value:(n==null?void 0:n.totalDistance)||"N/A"},{label:"Avg trips/day:",value:(n==null?void 0:n.avgTrip)||"N/A"}];return t.jsxs(O,{sx:{position:"absolute",top:"570px",left:f?"280px":"450px",zIndex:1,background:z.bgShadow,p:2,borderRadius:2,color:"white",width:"58%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[t.jsxs(O,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[t.jsx(A,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),t.jsx(ut,{sx:{cursor:"pointer",color:"black"},onClick:s})]}),c==="TripMonitor"&&t.jsxs(O,{sx:{display:"flex",justifyContent:"flex-start",gap:"10px",paddingBottom:"20px"},children:[t.jsxs(O,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px",width:"150px",display:"flex",justifyContent:"space-evenly",background:z.bgColor},children:[t.jsx(A,{children:"Speed"}),t.jsxs(A,{children:[S?h:0," KM/H"]})]}),t.jsxs(A,{sx:{padding:"5px 5px",border:"1px solid white",borderRadius:"5px",background:z.bgColor},children:["Total-Distance ",u," KM"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:z.bgColor},children:[parseFloat(parseFloat(r).toFixed(2)*43560).toFixed()," Sqft"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:z.bgColor},children:[parseFloat(r).toFixed(2)*8," Kanal"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:z.bgColor},children:[parseFloat(parseFloat(r).toFixed(2)*8/5).toFixed(2)," Bigha"]}),t.jsxs(A,{sx:{padding:"5px 15px",border:"1px solid white",borderRadius:"5px",background:z.bgColor},children:[parseFloat(r).toFixed(2)," acre"]})]}),t.jsxs(O,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Te,{title:"Vehicle Details",details:a}),t.jsx(Te,{title:"Trip Details",details:W})]})]})}const Ot="/assets/endTrip-CEqIwvWS.png",Le="/assets/endTrip_-BsrUUtoJ.png",De="/assets/startTrip-CGKteKGr.png",Tt=(s,n)=>{const r=[];s.length>0&&s.forEach(c=>{let f={latitude:c.lat,longitude:c.lng},b=[];s.forEach(C=>{const w={latitude:C.lat,longitude:C.lng};if(w.latitude&&w.longitude&&w.latitude!==f.latitude&&w.longitude!==f.longitude){const T=Dt(c.lat,c.lng,C.lat,C.lng);T<20&&T>10&&b.push(C)}}),b.length>10&&r.push(c)});const S=s.filter(c=>c.lat!==void 0&&c.lng!==void 0).map(c=>({lat:parseFloat(c.lat),lng:parseFloat(c.lng)}));if(S.length>0){n(mt(r));try{const c=Lt(S),f=zt(c),b=new window.google.maps.Polygon({paths:f});return Rt(b,n)}catch(c){return console.error("Error calculating convex hull or area:",c),n($(0)),0}}else return n($(0)),0},Lt=s=>{const n=(c,f,b)=>{const C=(f.lat-c.lat)*(b.lng-f.lng)-(f.lng-c.lng)*(b.lat-f.lat);return C===0?0:C>0?1:2},h=s.reduce((c,f)=>f.lng<c.lng?f:c);let u=[],r=h,S;do{u.push(r),S=s[0]===r?s[1]:s[0];for(let c=0;c<s.length;c++)n(r,S,s[c])===2&&(S=s[c]);r=S}while(r!==h);return u};function Dt(s,n,h,u){const S=s*Math.PI/180,c=h*Math.PI/180,f=(h-s)*Math.PI/180,b=(u-n)*Math.PI/180,C=Math.sin(f/2)*Math.sin(f/2)+Math.cos(S)*Math.cos(c)*Math.sin(b/2)*Math.sin(b/2);return 6371e3*(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)))}const zt=s=>{s.sort((u,r)=>u.lng-r.lng||u.lat-r.lat);const n=[],h=[];for(const u of s){for(;n.length>=2&&ze(n[n.length-2],n[n.length-1],u)<=0;)n.pop();n.push(u)}for(let u=s.length-1;u>=0;u--){const r=s[u];for(;h.length>=2&&ze(h[h.length-2],h[h.length-1],r)<=0;)h.pop();h.push(r)}return[...n.slice(0,-1),...h.slice(0,-1)]},Rt=(s,n)=>{if(!window.google||!window.google.maps.geometry){console.log("not loaded");return}const u=window.google.maps.geometry.spherical.computeArea(s.getPath())/4046.86;return n($(u)),u},ze=(s,n,h)=>(n.lat-s.lat)*(h.lng-s.lng)-(n.lng-s.lng)*(h.lat-s.lat),Nt=["drawing","geometry"],Kt=({selectedTrip:s,center:n,showCard:h})=>{var Se,Ce,je,ye,ke,Pe,Ee,Fe,Ie,ve;const u=Re(),r=xt(),{isLoaded:S,loadError:c}=yt({googleMapsApiKey:"AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA",libraries:Nt}),{Acreage:f}=V(e=>e.tripMonitor),{selectedVehicle:b}=V(e=>e.liveMap),{singleTrip_Data:C,tripLoading:w,cords:T}=V(e=>e.tripMonitor),{selectedTripData:a,mode:W,styles:U,allTripList:k,activeIndex:m}=V(e=>e.dashboard),{collapsed:y}=V(e=>e.auth),[p,F]=l.useState(null),[j,E]=l.useState(null),q=l.useRef(null),[v,K]=l.useState(null),[L,I]=l.useState(null),[R,_]=l.useState([]);l.useState([]);const[D,N]=l.useState(!1),[Z,B]=l.useState(0),[M,Ne]=l.useState(!1),[ce,Ve]=l.useState(0);l.useState([]),l.useState([]);const[Q,ge]=l.useState(!1),[_e,Be]=l.useState({}),[J,de]=l.useState([]),[He,pe]=l.useState(null),[Ye,he]=l.useState(null),[Ge,We]=l.useState({}),[ae,ue]=l.useState({}),[oe,Ue]=l.useState([]),[xe,ne]=l.useState(0),[qe,se]=l.useState([]),[Ke,Vt]=l.useState(!1),[fe,_t]=l.useState([]),[ee,Bt]=l.useState([]),[Je,Ht]=l.useState([]),[be,Yt]=l.useState(null);l.useEffect(()=>{(async()=>{if(b!=null&&b.imei){const o=St(),i=o.startOf("day").format("MM/DD/YYYY HH:mm:ss"),d=o.endOf("day").format("MM/DD/YYYY HH:mm:ss"),x={imei:[b.imei],startDate:i,endDate:d};try{const P=await Ct(x);Be(P.data[0].data)}catch(P){console.error("Error fetching report:",P)}}})(),ge(!1)},[b,u]),l.useEffect(()=>{v&&L&&v.fitBounds(L)},[v,L,a]);let $e=e=>{let o=jt(e);Ue(o),console.log("acerage trip start end position",o);let i={};o.map((d,x)=>{let P=e.slice(d.start,d.end+1);i[x]=P}),We(i)};l.useEffect(()=>{if(console.log("selectedTripData",a),ue({}),(a==null?void 0:a.length)>0){let e=a.map(i=>({lat:i.lat,lng:i.lng}));console.log("selected trip coordinate ",e);const o=Xe({selectedTripData:a});Ve(o),$e(a)}},[a]);const Xe=({selectedTripData:e})=>{const o=e.reduce((i,d,x)=>{if(x===0)return i;const P=e[x-1],H=ft(P.lat,P.lng,d.lat,d.lng);return i+H},0);return o==null?void 0:o.toFixed(2)};l.useEffect(()=>{var e,o,i,d,x;if(a&&(a==null?void 0:a.length)>0){const P=new window.google.maps.LatLngBounds,H=new window.google.maps.LatLng(parseFloat((e=a[0])==null?void 0:e.lat),parseFloat((o=a[0])==null?void 0:o.lng)),gt=new window.google.maps.LatLng(parseFloat((i=a[(a==null?void 0:a.length)-1])==null?void 0:i.lat),parseFloat((d=a[(a==null?void 0:a.length)-1])==null?void 0:d.lng));P.extend(H),P.extend(gt),B((x=a[0])==null?void 0:x.speed),I(P)}else I(null);N(!1),Ze()},[a]),l.useEffect(()=>{if(m==="all"&&k.length>0){const e=new window.google.maps.LatLngBounds;k.forEach(o=>{o.data.forEach(i=>{i.lat&&i.lng&&e.extend(new window.google.maps.LatLng(i.lat,i.lng))})}),I(e)}},[m,k]);const Ze=()=>{if(a&&a.length>0){const e=(d,x)=>{const H=new Date(d.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return{Date:d.createdAt.substring(0,10),Time:H,value:d[x]}},i=["speed","mainInputVoltage","ignition"].map(d=>({label:d==="speed"?"Speed":d==="mainInputVoltage"?"MainInputVoltage":"Ignition",randomColor:Qe(),data:a.map(x=>e(x,d))}));_(i)}else _([])},Qe=()=>"#"+Math.floor(Math.random()*16777215).toString(16),et=()=>{var e;if(m==="all")k&&k.length>0?(N(!D),B(0),ne(0),se([])):G.error("No trips found");else if((a==null?void 0:a.length)>0)N(!D),B(0),ne(0),se([]);else return((e=Object.keys(a))==null?void 0:e.length)===0?G.error("Please Select Vehicle",{id:"vehicle"}):G.error("Please Select Trip",{id:"trip error"})},tt=()=>{m==="all"&&xe<k.length-1?ne(e=>e+1):N(!1)},at=()=>{var e;if((a==null?void 0:a.length)>0)Ne(!M);else return((e=Object.keys(a))==null?void 0:e.length)===0?G.error("Please Select Vehicle",{id:"vehicle"}):G.error("Please Select Trip",{id:"trip error"})},we=()=>{Object.keys(b).length>0||Q?ge(!Q):G.error("Please select any vehicle")};if(c)return"Error loading maps";if(!S)return"Loading maps";const ot={width:"100%",height:h?"87vh":"93vh"},nt=e=>{if(e.type==="polygon"){const o=e.overlay;o.setEditable(!0);const i=new google.maps.InfoWindow({content:"Calculating...",position:te(o)});i.open(v),de(x=>[...x,{polygon:o,infoWindow:i}]),pe(o),google.maps.event.clearListeners(o.getPath(),"set_at"),google.maps.event.clearListeners(o.getPath(),"insert_at"),google.maps.event.clearListeners(o.getPath(),"remove_at");const d=()=>{const x=me(o,i);i.setContent(`Area: ${x} acres`),i.setPosition(te(o))};google.maps.event.addListener(o.getPath(),"set_at",d),google.maps.event.addListener(o.getPath(),"insert_at",d),google.maps.event.addListener(o.getPath(),"remove_at",d),google.maps.event.addListener(o,"click",()=>{J.forEach(({infoWindow:x})=>x.close()),i.open(v),i.setPosition(te(o))}),d()}},me=(e=null,o=null)=>{let i=0;if(e){const x=e.getPath().getArray();i=google.maps.geometry.spherical.computeArea(x)/4046.86}else J.forEach(({polygon:x})=>{const P=x.getPath().getArray(),H=google.maps.geometry.spherical.computeArea(P);i+=H/4046.86});const d=i.toFixed(2);return he(d),u($(d)),o&&(o.setContent(`Area: ${d} acres`),o.setPosition(te(e))),d},te=e=>{const o=e.getPath().getArray();let i=0,d=0;return o.forEach(x=>{i+=x.lat(),d+=x.lng()}),new google.maps.LatLng(i/o.length,d/o.length)},st=()=>{J.forEach(({polygon:e,infoWindow:o})=>{e.setMap(null),o.close()}),de([]),he(0),pe(null),u($(0))},lt=()=>{J.forEach(e=>e.setEditable(!0))},rt=()=>{J.forEach(e=>e.setEditable(!1))},it=()=>{He?me():alert("No shape is selected. Please draw or select a shape.")};let g=k&&k.length>0?[...k].reverse():[];const ct=r.pathname;return t.jsxs(t.Fragment,{children:[w&&t.jsx(O,{sx:{position:"absolute",top:"50vh",left:"50%",zIndex:"1000"},children:t.jsx(bt,{})}),h&&t.jsx(It,{tripPlay:D,speed:Z,totalDistance:ce,Acreage:f,filterCoordinates:Tt,acreageTrips:Ge,handleTrip:et,showGraph:M,handleShowGraph:at,setCalculatedAcreageTrips:ue}),t.jsx(O,{sx:{position:"absolute",top:"14%",left:y?"15%":"25%",zIndex:1,background:z.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:t.jsxs(X,{sx:{color:"white"},onClick:we,children:[Q?"Hide":"Show"," Vehicle Info",t.jsx(Ft,{})]})}),Q===!0&&t.jsx(At,{handleVehicleInfo:we,vehicleReport:_e,tripPlay:D,speed:Z,totalDistance:ce,Acreage:f,whereToUse:"TripMonitor"}),t.jsxs(kt,{ref:q,mapContainerStyle:ot,zoom:10,center:n,onLoad:e=>K(e),options:{disableDoubleClickZoom:!0,styles:W?U:""},children:[t.jsx(Pt,{onOverlayComplete:nt,options:{drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:["polygon"]}}}),Ke&&ee.length>0&&be&&t.jsx(ie,{path:[...ee,be],options:{strokeColor:"black",strokeOpacity:.8,strokeWeight:4,clickable:!1}}),ee.length>1&&t.jsx(le,{path:ee,options:{fillColor:"#00FF00",fillOpacity:.4,strokeColor:"#000",strokeWeight:2,clickable:!1,editable:!1}}),fe.map((e,o)=>t.jsx(le,{path:e,options:{fillColor:"#FF0000",fillOpacity:.4,strokeColor:"#000",strokeWeight:2,clickable:!1,editable:!1}},o)),fe.length>0&&Je.map((e,o)=>t.jsx(re,{position:e.position,children:t.jsxs("div",{children:[t.jsx("strong",{children:"Area:"})," ",e.area.toFixed(2)," acres"]})},o)),t.jsxs("div",{style:{position:"absolute",bottom:30,left:20,background:"white",padding:"10px",borderRadius:"8px",boxShadow:"0 0 6px rgba(0,0,0,0.2)",zIndex:100,width:"auto"},children:[t.jsxs("p",{children:["Area: ",Ye||0," acres"]}),J.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:lt,style:{marginTop:"10px",marginRight:"10px"},children:"Enable Editing"}),t.jsx("button",{onClick:rt,style:{marginTop:"10px",marginRight:"10px"},children:"Disable Editing"}),t.jsx("button",{onClick:it,style:{marginTop:"10px",marginRight:"10px"},children:"Calculate Area"}),t.jsx("button",{onClick:st,style:{marginTop:"10px"},children:"Clear All Shapes"})]})]}),oe&&oe.length>0&&oe.map(e=>{var o,i,d,x;return t.jsxs(t.Fragment,{children:[t.jsx(Y,{onClick:()=>E((e==null?void 0:e.startCoordinates)||null),position:{lat:parseFloat((o=e==null?void 0:e.startCoordinates)==null?void 0:o.lat),lng:parseFloat((i=e==null?void 0:e.startCoordinates)==null?void 0:i.lng)},animation:"BOUNCE",icon:{url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",scaledSize:new google.maps.Size(40,40)}}),t.jsx(Y,{onClick:()=>{console.log("item",e==null?void 0:e.endCoordinates),E((e==null?void 0:e.endCoordinates)||null)},position:{lat:parseFloat((d=e.endCoordinates)==null?void 0:d.lat),lng:parseFloat((x=e.endCoordinates)==null?void 0:x.lng)},animation:"BOUNCE",icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new google.maps.Size(40,40)}})]})}),Object.keys(ae).length>0&&Object.keys(ae).map((e,o)=>t.jsx(le,{paths:ae[e],options:{fillColor:"#00FF00",fillOpacity:.5,strokeColor:"#000",strokeOpacity:0,strokeWeight:2}},o)),m==="all"&&g&&g.length>0&&t.jsx(Y,{onClick:()=>F(g[0].data[0]),position:{lat:parseFloat((Se=g[0].data[0])==null?void 0:Se.lat)+1e-6,lng:parseFloat((Ce=g[0].data[0])==null?void 0:Ce.lng)+1e-6},animation:"BOUNCE",icon:{url:De,scaledSize:new google.maps.Size(60,60)}}),m==="all"&&g&&g.length>0&&t.jsx(Y,{onClick:()=>F(g[(g==null?void 0:g.length)-1].data[g[(g==null?void 0:g.length)-1].data.length-1]),position:{lat:parseFloat(((je=g[(g==null?void 0:g.length)-1].data[g[(g==null?void 0:g.length)-1].data.length-1])==null?void 0:je.lat)+1e-6),lng:parseFloat(((ye=g[(g==null?void 0:g.length)-1].data[g[(g==null?void 0:g.length)-1].data.length-1])==null?void 0:ye.lng)+1e-6)},animation:"BOUNCE",icon:{url:Le,scaledSize:new google.maps.Size(60,60)}}),a&&(a==null?void 0:a.length)>0&&t.jsx(Y,{onClick:()=>F(a[0]),position:{lat:parseFloat((ke=a[0])==null?void 0:ke.lat)+1e-6,lng:parseFloat((Pe=a[0])==null?void 0:Pe.lng)+1e-6},animation:"BOUNCE",icon:{url:De,scaledSize:new google.maps.Size(60,60)}}),a&&(a==null?void 0:a.length)>0&&t.jsx(Y,{onClick:()=>F(a[(a==null?void 0:a.length)-1]),position:{lat:parseFloat(((Ee=a[(a==null?void 0:a.length)-1])==null?void 0:Ee.lat)+1e-5),lng:parseFloat(((Fe=a[(a==null?void 0:a.length)-1])==null?void 0:Fe.lng)+1e-6)},animation:"BOUNCE",icon:{url:Le,scaledSize:new google.maps.Size(60,60)}}),m==="all"&&g&&g.length>0&&g.map((e,o)=>{var i,d;return t.jsx(Y,{position:{lat:parseFloat((i=e==null?void 0:e.data[(e==null?void 0:e.data.length)-1])==null?void 0:i.lat),lng:parseFloat((d=e==null?void 0:e.data[(e==null?void 0:e.data.length)-1])==null?void 0:d.lng)},onClick:()=>F(e==null?void 0:e.data[(e==null?void 0:e.data.length)-1]),label:{text:(o+1).toString(),color:"white",fontWeight:"bold",fontSize:"14px"},animation:"BOUNCE",icon:{url:Ot,scaledSize:new google.maps.Size(40,40)}},o)}),p&&t.jsx(re,{position:{lat:parseFloat(p==null?void 0:p.lat),lng:parseFloat(p==null?void 0:p.lng)},onCloseClick:()=>F(null),children:t.jsxs("div",{children:["Date-time:",p!=null&&p.Date?Me(new Date(p==null?void 0:p.Date)).format("DD-MM-YYYY HH:mm"):""]})}),j&&t.jsx(re,{position:{lat:parseFloat(j==null?void 0:j.lat),lng:parseFloat(j==null?void 0:j.lng)},onCloseClick:()=>E(null),children:t.jsxs("div",{children:["Date-time:",j!=null&&j.Date?Me(new Date(j==null?void 0:j.Date)).format("DD-MM-YYYY HH:mm"):""]})}),a&&a.length>0&&t.jsx(Oe,{trip:a,tripPlay:D,setSpeed:B,onTripEnd:()=>N(!1)}),m==="all"&&g&&g.length>0&&g.map((e,o)=>t.jsx(Oe,{trip:e==null?void 0:e.data,tripPlay:o===xe?D:!1,setSpeed:B,onTripEnd:tt,globalMarkerPath:qe,setGlobalMarkerPath:se},e==null?void 0:e.id)),t.jsx("div",{style:{position:"relative",top:200,left:12,color:"green"},children:((ve=(Ie=R[0])==null?void 0:Ie.data)==null?void 0:ve.length)>0&&M&&t.jsx(wt,{item:R})})]},ct)]})};export{Kt as T,Tt as f};
