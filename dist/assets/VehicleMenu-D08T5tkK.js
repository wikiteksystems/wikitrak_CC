import{y as k,z as E,b as o,j as r,G as x,E as A,J as B,$ as G,D as v,aF as M,aG as C}from"./index-B0iMrQEg.js";import{S as I,R as L,t as F}from"./SearchTab-D4Mao1HF.js";import{B as a,C as N}from"./CircularProgress-XdsXXIks.js";import{T as $}from"./LeftSideBar2-ILkFk4yT.js";const z=({vehicleData:f})=>{const w=["Engine RPM","Engine coolant temperature","Battery Potential"],n=k(),{selectedVehicle:g,loading:y}=E(e=>e.liveMap),{startDate:J,endDate:O,mode:D,selectedVehicleGroup:m,showVehicles:S}=E(e=>e.dashboard),[j,R]=o.useState(""),[c,T]=o.useState(""),i=F(D),s=o.useRef(null),u=o.useRef(0),d=f.length>0&&f.filter(e=>{var t,l;return((t=e==null?void 0:e.label)==null?void 0:t.toLowerCase().includes(j.toLowerCase()))&&(c===""||((l=e==null?void 0:e.workShop)==null?void 0:l.region)===c)}).sort((e,t)=>e.label.localeCompare(t.label)),V=async e=>{var b;s.current&&(u.current=s.current.scrollTop),n(B(!S)),n(G({imei:e.value,reg_id:e.label})),e.value,v().subtract(5,"day"),v();let t=e.label;const l=await n(M({registration_id:t}));let p=[];if(l&&l.payload.length>0&&((b=l.payload)==null||b.map(h=>{h.ivn_parameter.length>0&&p.push(h.ivn_parameter[0])})),p.length>0){let h=p.filter(P=>w.includes(P.pid_description));n(C(h))}else n(C([]));setTimeout(()=>{s.current&&(s.current.scrollTop=u.current)},0)};o.useEffect(()=>{s.current&&(s.current.scrollTop=u.current)},[y,d,g]);const _=e=>{console.log("clicked btn region",e),T(e)};return r.jsx(r.Fragment,{children:y?r.jsx("div",{children:r.jsx(a,{sx:{display:"flex",justifyContent:"center",height:"88vh",alignItems:"center"},children:r.jsx(N,{})})}):r.jsxs("div",{ref:s,style:{overflowY:"auto",height:"90vh"},children:[r.jsx(I,{searchTerm:j,setSearchedTerm:R}),r.jsx(L,{region:c,handleRegion:_}),Object.keys(m).length>0&&r.jsx(a,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsxs(x,{variant:"outlined",sx:{width:"90%",color:i.grey[400],"&:hover":{color:"#DAE0EE"}},children:["VGroup: ",m.group_name]})}),r.jsx(a,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsxs(x,{variant:"outlined",sx:{width:"90%",color:i.grey[400],"&:hover":{color:"#DAE0EE"}},children:["Total Vehicle: ",d.length]})}),d.length>0?d.map((e,t)=>r.jsx(a,{sx:{align:"center",my:"8px",ml:"20px"},children:r.jsx(x,{variant:"outlined",onClick:()=>V(e),sx:{width:"90%",bgcolor:e.label===g.reg_id?A.bgColor:"undefined",color:e.label===g.reg_id?"#DAE0EE":i.grey[400]},children:e.label})},t)):r.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:r.jsxs($,{style:{textAlign:"center",color:i.grey[400]},children:["Sorry! No vehicles in"," ",r.jsx("span",{style:{fontWeight:"bold"},children:c})," region"]})})]})})},K=z;export{K as V};
