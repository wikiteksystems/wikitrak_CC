import{W as Hd,j as W,k as Vt,r as en,t as tf,T as he,B as ef,h as Zd,p as ze,i as rf,v as sf,Q as Kd,w as Hr,m as qd,X as zo,K as zd,L as Vd,N as Yd,O as Xd,Y as Vo}from"./index-vZ6Lu-BL.js";import{L as Jd}from"./LiveMapTopBar-Dz-cvQwi.js";import{V as Qd}from"./VehicleMenu-BDqZP7Wo.js";import{L as jd,t as n0}from"./LeftSideBar2-BcfTc_8d.js";import{F as t0}from"./Loader-B_RsAK1j.js";import{L as e0}from"./LiveMapServices-CrdHpU1x.js";import{s as fs}from"./Socket-0N_gnJcr.js";import{P as r0}from"./Parameters-BlLFo7-Y.js";/* empty css           */import"./proj-XQwXs9DQ.js";import{V as i0}from"./VehicleGroups-DXXTduss.js";import{u as s0,G as u0,M as o0}from"./esm-CjhgzMjj.js";import{d as f0}from"./Info-CX6-gqWx.js";import{d as a0}from"./Close-CfU1cK4c.js";import{r as l0}from"./createSvgIcon-CsTdMeIj.js";import{B as kn,C as c0}from"./menu2-BcTwduzB.js";import"./jcb-aCHXMCXy.js";import"./index-DidOi-xO.js";import"./TextField-CFz5EczF.js";import"./useControlled-BviZOeYw.js";import"./index-B20ADOiA.js";import"./Card-D8jBRhC7.js";import"./CardContent-BlsHzYIK.js";var ps={},h0=Hd;Object.defineProperty(ps,"__esModule",{value:!0});var uf=ps.default=void 0,g0=h0(l0()),p0=W;uf=ps.default=(0,g0.default)((0,p0.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"NorthEast");const d0=({label:S,value:f})=>W.jsxs(kn,{sx:{display:"flex",justifyContent:"space-between",py:.5},children:[W.jsx(he,{variant:"body2",color:"textSecondary",children:S}),W.jsx(he,{variant:"body2",color:"textPrimary",fontWeight:"medium",children:f||"N/A"})]}),_0=(S,f)=>(S==null?void 0:S.find(i=>{var g,d;return((d=(g=i.imei)==null?void 0:g[0])==null?void 0:d.mac_id)===f.imei}))||{},Yo=({title:S,details:f})=>W.jsx(kn,{sx:{width:"45%"},children:f.map(({label:i,value:g})=>W.jsx(d0,{label:i,value:g},i))});function v0({handleVehicleInfo:S,udpatedParams:f}){var nn,V,H,Y,mn,ln,Tn,pn,bn,sn;const{collapsed:i}=Vt(on=>on.auth),{vehicleList:g,selectedVehicle:d}=Vt(on=>on.liveMap),[_,I]=en.useState({});let[E,m]=en.useState(null);en.useEffect(()=>{let on=f&&(f==null?void 0:f.length)>0&&(f==null?void 0:f.find(Ln=>{var Xn;return Number((Xn=Ln==null?void 0:Ln.latestDocument)==null?void 0:Xn.imei)===Number(d.imei)}));m(on)},[f,d]),en.useEffect(()=>{I(_0(g,d))},[g,d]);const N=(on,Ln)=>{const Xn=`https://www.google.com/maps?q=${on},${Ln}`;window.open(Xn,"_blank")},P=on=>{var dn,vn;let Ln=(dn=on==null?void 0:on.latestDocument)==null?void 0:dn.ignition,Xn=(vn=on==null?void 0:on.latestDocument)==null?void 0:vn.speed;return Ln===!0||Ln===1?Xn:0},M=[{label:"Vehicle No:",value:_==null?void 0:_.registration_id},{label:"Model:",value:(nn=_==null?void 0:_.vehicle_model)==null?void 0:nn.name},{label:"IMEI No:",value:(H=(V=_==null?void 0:_.imei)==null?void 0:V[0])==null?void 0:H.mac_id},{label:"Chassis No:",value:_==null?void 0:_.chassis_no},{label:"Engine No:",value:_==null?void 0:_.engine_no}],K=[{label:"Customer Name:",value:(Y=_==null?void 0:_.user)!=null&&Y.us_user?`${_.user.us_user.first_name.charAt(0).toUpperCase()}${_.user.us_user.first_name.slice(1)} ${_.user.us_user.last_name.charAt(0).toUpperCase()}${_.user.us_user.last_name.slice(1)}`:null},{label:"Mobile: ",value:((mn=_==null?void 0:_.user)==null?void 0:mn.us_user)&&_.user.us_user.mobile},{label:"Date of Sell:",value:_==null?void 0:_.sell_date},{label:"Workshop Name:",value:(ln=_==null?void 0:_.workshop)==null?void 0:ln.name}];let k={border:"2px solid black",borderRadius:"5px",padding:"5px",color:"black"};return W.jsxs(kn,{sx:{position:"absolute",top:"600px",left:i?"280px":"450px",zIndex:1,background:tf.bgShadow,p:2,borderRadius:2,color:"white",width:"72%",boxShadow:"0px 4px 12px rgba(0,0,0,0.4)"},children:[W.jsx(he,{variant:"h5",sx:{fontWeight:"bold",color:"black"},children:"Vehicle Information"}),W.jsxs(kn,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[W.jsxs(kn,{sx:{display:"flex",justifyContent:"space-between",width:"65%",marginLeft:"10px"},children:[W.jsx(kn,{sx:k,children:W.jsxs(he,{children:["Ignition:"," ",((Tn=E==null?void 0:E.latestDocument)==null?void 0:Tn.ignition)===!0||((pn=E==null?void 0:E.latestDocument)==null?void 0:pn.ignition)===1?"On":"Off"]})}),W.jsx(kn,{sx:k,children:W.jsxs(he,{children:["Speed: ",P(E)," km/h"]})}),W.jsx(kn,{sx:k,children:W.jsxs(he,{children:["Main Voltage:"," ",E?`${(bn=E==null?void 0:E.latestDocument)==null?void 0:bn.mainInputVoltage} Voltage`:0]})}),W.jsx(kn,{sx:k,children:W.jsxs(he,{children:["Heading:"," ",E?`${(sn=E==null?void 0:E.latestDocument)==null?void 0:sn.heading} deg`:0]})}),W.jsxs(ef,{disabled:!E,onClick:()=>{var on,Ln;N((on=E==null?void 0:E.latestDocument)==null?void 0:on.lat,(Ln=E==null?void 0:E.latestDocument)==null?void 0:Ln.lng)},children:["Navigate to map",W.jsx(uf,{})]})]}),W.jsx(a0,{sx:{cursor:"pointer",color:"black"},onClick:S})]}),W.jsxs(kn,{sx:{display:"flex",justifyContent:"space-between"},children:[W.jsx(Yo,{title:"Vehicle Details",details:M}),W.jsx(Yo,{title:"Customer Details",details:K})]})]})}var w0=function S(f,i){if(f===i)return!0;if(f&&i&&typeof f=="object"&&typeof i=="object"){if(f.constructor!==i.constructor)return!1;var g,d,_;if(Array.isArray(f)){if(g=f.length,g!=i.length)return!1;for(d=g;d--!==0;)if(!S(f[d],i[d]))return!1;return!0}if(f.constructor===RegExp)return f.source===i.source&&f.flags===i.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===i.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===i.toString();if(_=Object.keys(f),g=_.length,g!==Object.keys(i).length)return!1;for(d=g;d--!==0;)if(!Object.prototype.hasOwnProperty.call(i,_[d]))return!1;for(d=g;d--!==0;){var I=_[d];if(!S(f[I],i[I]))return!1}return!0}return f!==f&&i!==i};const Xo=Zd(w0),Jo=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],as=1,Ve=8;class ds{static from(f){if(!(f instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,g]=new Uint8Array(f,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=g>>4;if(d!==as)throw new Error(`Got v${d} data when expected v${as}.`);const _=Jo[g&15];if(!_)throw new Error("Unrecognized array type.");const[I]=new Uint16Array(f,2,1),[E]=new Uint32Array(f,4,1);return new ds(E,I,_,f)}constructor(f,i=64,g=Float64Array,d){if(isNaN(f)||f<0)throw new Error(`Unpexpected numItems value: ${f}.`);this.numItems=+f,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=g,this.IndexArrayType=f<65536?Uint16Array:Uint32Array;const _=Jo.indexOf(this.ArrayType),I=f*2*this.ArrayType.BYTES_PER_ELEMENT,E=f*this.IndexArrayType.BYTES_PER_ELEMENT,m=(8-E%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${g}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,Ve,f),this.coords=new this.ArrayType(this.data,Ve+E+m,f*2),this._pos=f*2,this._finished=!0):(this.data=new ArrayBuffer(Ve+I+E+m),this.ids=new this.IndexArrayType(this.data,Ve,f),this.coords=new this.ArrayType(this.data,Ve+E+m,f*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(as<<4)+_]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=f)}add(f,i){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=f,this.coords[this._pos++]=i,g}finish(){const f=this._pos>>1;if(f!==this.numItems)throw new Error(`Added ${f} items when expected ${this.numItems}.`);return hs(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(f,i,g,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:I,nodeSize:E}=this,m=[0,_.length-1,0],N=[];for(;m.length;){const P=m.pop()||0,M=m.pop()||0,K=m.pop()||0;if(M-K<=E){for(let H=K;H<=M;H++){const Y=I[2*H],mn=I[2*H+1];Y>=f&&Y<=g&&mn>=i&&mn<=d&&N.push(_[H])}continue}const k=K+M>>1,nn=I[2*k],V=I[2*k+1];nn>=f&&nn<=g&&V>=i&&V<=d&&N.push(_[k]),(P===0?f<=nn:i<=V)&&(m.push(K),m.push(k-1),m.push(1-P)),(P===0?g>=nn:d>=V)&&(m.push(k+1),m.push(M),m.push(1-P))}return N}within(f,i,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:_,nodeSize:I}=this,E=[0,d.length-1,0],m=[],N=g*g;for(;E.length;){const P=E.pop()||0,M=E.pop()||0,K=E.pop()||0;if(M-K<=I){for(let H=K;H<=M;H++)Qo(_[2*H],_[2*H+1],f,i)<=N&&m.push(d[H]);continue}const k=K+M>>1,nn=_[2*k],V=_[2*k+1];Qo(nn,V,f,i)<=N&&m.push(d[k]),(P===0?f-g<=nn:i-g<=V)&&(E.push(K),E.push(k-1),E.push(1-P)),(P===0?f+g>=nn:i+g>=V)&&(E.push(k+1),E.push(M),E.push(1-P))}return m}}function hs(S,f,i,g,d,_){if(d-g<=i)return;const I=g+d>>1;of(S,f,I,g,d,_),hs(S,f,i,g,I-1,1-_),hs(S,f,i,I+1,d,1-_)}function of(S,f,i,g,d,_){for(;d>g;){if(d-g>600){const N=d-g+1,P=i-g+1,M=Math.log(N),K=.5*Math.exp(2*M/3),k=.5*Math.sqrt(M*K*(N-K)/N)*(P-N/2<0?-1:1),nn=Math.max(g,Math.floor(i-P*K/N+k)),V=Math.min(d,Math.floor(i+(N-P)*K/N+k));of(S,f,i,nn,V,_)}const I=f[2*i+_];let E=g,m=d;for(Ye(S,f,g,i),f[2*d+_]>I&&Ye(S,f,g,d);E<m;){for(Ye(S,f,E,m),E++,m--;f[2*E+_]<I;)E++;for(;f[2*m+_]>I;)m--}f[2*g+_]===I?Ye(S,f,g,m):(m++,Ye(S,f,m,d)),m<=i&&(g=m+1),i<=m&&(d=m-1)}}function Ye(S,f,i,g){ls(S,i,g),ls(f,2*i,2*g),ls(f,2*i+1,2*g+1)}function ls(S,f,i){const g=S[f];S[f]=S[i],S[i]=g}function Qo(S,f,i,g){const d=S-i,_=f-g;return d*d+_*_}const x0={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:S=>S},jo=Math.fround||(S=>f=>(S[0]=+f,S[0]))(new Float32Array(1)),ce=2,zt=3,cs=4,qt=5,ff=6;class m0{constructor(f){this.options=Object.assign(Object.create(x0),f),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(f){const{log:i,minZoom:g,maxZoom:d}=this.options;i&&console.time("total time");const _=`prepare ${f.length} points`;i&&console.time(_),this.points=f;const I=[];for(let m=0;m<f.length;m++){const N=f[m];if(!N.geometry)continue;const[P,M]=N.geometry.coordinates,K=jo($r(P)),k=jo(Gr(M));I.push(K,k,1/0,m,-1,1),this.options.reduce&&I.push(0)}let E=this.trees[d+1]=this._createTree(I);i&&console.timeEnd(_);for(let m=d;m>=g;m--){const N=+Date.now();E=this.trees[m]=this._createTree(this._cluster(E,m)),i&&console.log("z%d: %d clusters in %dms",m,E.numItems,+Date.now()-N)}return i&&console.timeEnd("total time"),this}getClusters(f,i){let g=((f[0]+180)%360+360)%360-180;const d=Math.max(-90,Math.min(90,f[1]));let _=f[2]===180?180:((f[2]+180)%360+360)%360-180;const I=Math.max(-90,Math.min(90,f[3]));if(f[2]-f[0]>=360)g=-180,_=180;else if(g>_){const M=this.getClusters([g,d,180,I],i),K=this.getClusters([-180,d,_,I],i);return M.concat(K)}const E=this.trees[this._limitZoom(i)],m=E.range($r(g),Gr(I),$r(_),Gr(d)),N=E.data,P=[];for(const M of m){const K=this.stride*M;P.push(N[K+qt]>1?nf(N,K,this.clusterProps):this.points[N[K+zt]])}return P}getChildren(f){const i=this._getOriginId(f),g=this._getOriginZoom(f),d="No cluster with the specified id.",_=this.trees[g];if(!_)throw new Error(d);const I=_.data;if(i*this.stride>=I.length)throw new Error(d);const E=this.options.radius/(this.options.extent*Math.pow(2,g-1)),m=I[i*this.stride],N=I[i*this.stride+1],P=_.within(m,N,E),M=[];for(const K of P){const k=K*this.stride;I[k+cs]===f&&M.push(I[k+qt]>1?nf(I,k,this.clusterProps):this.points[I[k+zt]])}if(M.length===0)throw new Error(d);return M}getLeaves(f,i,g){i=i||10,g=g||0;const d=[];return this._appendLeaves(d,f,i,g,0),d}getTile(f,i,g){const d=this.trees[this._limitZoom(f)],_=Math.pow(2,f),{extent:I,radius:E}=this.options,m=E/I,N=(g-m)/_,P=(g+1+m)/_,M={features:[]};return this._addTileFeatures(d.range((i-m)/_,N,(i+1+m)/_,P),d.data,i,g,_,M),i===0&&this._addTileFeatures(d.range(1-m/_,N,1,P),d.data,_,g,_,M),i===_-1&&this._addTileFeatures(d.range(0,N,m/_,P),d.data,-1,g,_,M),M.features.length?M:null}getClusterExpansionZoom(f){let i=this._getOriginZoom(f)-1;for(;i<=this.options.maxZoom;){const g=this.getChildren(f);if(i++,g.length!==1)break;f=g[0].properties.cluster_id}return i}_appendLeaves(f,i,g,d,_){const I=this.getChildren(i);for(const E of I){const m=E.properties;if(m&&m.cluster?_+m.point_count<=d?_+=m.point_count:_=this._appendLeaves(f,m.cluster_id,g,d,_):_<d?_++:f.push(E),f.length===g)break}return _}_createTree(f){const i=new ds(f.length/this.stride|0,this.options.nodeSize,Float32Array);for(let g=0;g<f.length;g+=this.stride)i.add(f[g],f[g+1]);return i.finish(),i.data=f,i}_addTileFeatures(f,i,g,d,_,I){for(const E of f){const m=E*this.stride,N=i[m+qt]>1;let P,M,K;if(N)P=af(i,m,this.clusterProps),M=i[m],K=i[m+1];else{const V=this.points[i[m+zt]];P=V.properties;const[H,Y]=V.geometry.coordinates;M=$r(H),K=Gr(Y)}const k={type:1,geometry:[[Math.round(this.options.extent*(M*_-g)),Math.round(this.options.extent*(K*_-d))]],tags:P};let nn;N||this.options.generateId?nn=i[m+zt]:nn=this.points[i[m+zt]].id,nn!==void 0&&(k.id=nn),I.features.push(k)}}_limitZoom(f){return Math.max(this.options.minZoom,Math.min(Math.floor(+f),this.options.maxZoom+1))}_cluster(f,i){const{radius:g,extent:d,reduce:_,minPoints:I}=this.options,E=g/(d*Math.pow(2,i)),m=f.data,N=[],P=this.stride;for(let M=0;M<m.length;M+=P){if(m[M+ce]<=i)continue;m[M+ce]=i;const K=m[M],k=m[M+1],nn=f.within(m[M],m[M+1],E),V=m[M+qt];let H=V;for(const Y of nn){const mn=Y*P;m[mn+ce]>i&&(H+=m[mn+qt])}if(H>V&&H>=I){let Y=K*V,mn=k*V,ln,Tn=-1;const pn=((M/P|0)<<5)+(i+1)+this.points.length;for(const bn of nn){const sn=bn*P;if(m[sn+ce]<=i)continue;m[sn+ce]=i;const on=m[sn+qt];Y+=m[sn]*on,mn+=m[sn+1]*on,m[sn+cs]=pn,_&&(ln||(ln=this._map(m,M,!0),Tn=this.clusterProps.length,this.clusterProps.push(ln)),_(ln,this._map(m,sn)))}m[M+cs]=pn,N.push(Y/H,mn/H,1/0,pn,-1,H),_&&N.push(Tn)}else{for(let Y=0;Y<P;Y++)N.push(m[M+Y]);if(H>1)for(const Y of nn){const mn=Y*P;if(!(m[mn+ce]<=i)){m[mn+ce]=i;for(let ln=0;ln<P;ln++)N.push(m[mn+ln])}}}}return N}_getOriginId(f){return f-this.points.length>>5}_getOriginZoom(f){return(f-this.points.length)%32}_map(f,i,g){if(f[i+qt]>1){const I=this.clusterProps[f[i+ff]];return g?Object.assign({},I):I}const d=this.points[f[i+zt]].properties,_=this.options.map(d);return g&&_===d?Object.assign({},_):_}}function nf(S,f,i){return{type:"Feature",id:S[f+zt],properties:af(S,f,i),geometry:{type:"Point",coordinates:[y0(S[f]),A0(S[f+1])]}}}function af(S,f,i){const g=S[f+qt],d=g>=1e4?`${Math.round(g/1e3)}k`:g>=1e3?`${Math.round(g/100)/10}k`:g,_=S[f+ff],I=_===-1?{}:Object.assign({},i[_]);return Object.assign(I,{cluster:!0,cluster_id:S[f+zt],point_count:g,point_count_abbreviated:d})}function $r(S){return S/360+.5}function Gr(S){const f=Math.sin(S*Math.PI/180),i=.5-.25*Math.log((1+f)/(1-f))/Math.PI;return i<0?0:i>1?1:i}function y0(S){return(S-.5)*360}function A0(S){const f=(180-S*360)*Math.PI/180;return 360*Math.atan(Math.exp(f))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function S0(S,f){var i={};for(var g in S)Object.prototype.hasOwnProperty.call(S,g)&&f.indexOf(g)<0&&(i[g]=S[g]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,g=Object.getOwnPropertySymbols(S);d<g.length;d++)f.indexOf(g[d])<0&&Object.prototype.propertyIsEnumerable.call(S,g[d])&&(i[g[d]]=S[g[d]]);return i}class st{static isAdvancedMarkerAvailable(f){return google.maps.marker&&f.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(f){return google.maps.marker&&f instanceof google.maps.marker.AdvancedMarkerElement}static setMap(f,i){this.isAdvancedMarker(f)?f.map=i:f.setMap(i)}static getPosition(f){if(this.isAdvancedMarker(f)){if(f.position){if(f.position instanceof google.maps.LatLng)return f.position;if(f.position.lat&&f.position.lng)return new google.maps.LatLng(f.position.lat,f.position.lng)}return new google.maps.LatLng(null)}return f.getPosition()}static getVisible(f){return this.isAdvancedMarker(f)?!0:f.getVisible()}}class gs{constructor({markers:f,position:i}){this.markers=f,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(this.markers.length===0&&!this._position)return;const f=new google.maps.LatLngBounds(this._position,this._position);for(const i of this.markers)f.extend(st.getPosition(i));return f}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(f=>st.getVisible(f)).length}push(f){this.markers.push(f)}delete(){this.marker&&(st.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class I0{constructor({maxZoom:f=16}){this.maxZoom=f}noop({markers:f}){return E0(f)}}const E0=S=>S.map(i=>new gs({position:st.getPosition(i),markers:[i]}));class C0 extends I0{constructor(f){var{maxZoom:i,radius:g=60}=f,d=S0(f,["maxZoom","radius"]);super({maxZoom:i}),this.state={zoom:-1},this.superCluster=new m0(Object.assign({maxZoom:this.maxZoom,radius:g},d))}calculate(f){let i=!1;const g={zoom:f.map.getZoom()};if(!Xo(f.markers,this.markers)){i=!0,this.markers=[...f.markers];const d=this.markers.map(_=>{const I=st.getPosition(_);return{type:"Feature",geometry:{type:"Point",coordinates:[I.lng(),I.lat()]},properties:{marker:_}}});this.superCluster.load(d)}return i||(this.state.zoom<=this.maxZoom||g.zoom<=this.maxZoom)&&(i=!Xo(this.state,g)),this.state=g,i&&(this.clusters=this.cluster(f)),{clusters:this.clusters,changed:i}}cluster({map:f}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(f.getZoom())).map(i=>this.transformCluster(i))}transformCluster({geometry:{coordinates:[f,i]},properties:g}){if(g.cluster)return new gs({markers:this.superCluster.getLeaves(g.cluster_id,1/0).map(_=>_.properties.marker),position:{lat:i,lng:f}});const d=g.marker;return new gs({markers:[d],position:st.getPosition(d)})}}class L0{constructor(f,i){this.markers={sum:f.length};const g=i.map(_=>_.count),d=g.reduce((_,I)=>_+I,0);this.clusters={count:i.length,markers:{mean:d/i.length,sum:d,min:Math.min(...g),max:Math.max(...g)}}}}class M0{render({count:f,position:i},g,d){const I=`<svg fill="${f>Math.max(10,g.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${f}</text>
</svg>`,E=`Cluster of ${f} markers`,m=Number(google.maps.Marker.MAX_ZINDEX)+f;if(st.isAdvancedMarkerAvailable(d)){const M=new DOMParser().parseFromString(I,"image/svg+xml").documentElement;M.setAttribute("transform","translate(0 25)");const K={map:d,position:i,zIndex:m,title:E,content:M};return new google.maps.marker.AdvancedMarkerElement(K)}const N={position:i,zIndex:m,title:E,icon:{url:`data:image/svg+xml;base64,${btoa(I)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(N)}}function R0(S,f){for(let i in f.prototype)S.prototype[i]=f.prototype[i]}class _s{constructor(){R0(_s,google.maps.OverlayView)}}var Xe;(function(S){S.CLUSTERING_BEGIN="clusteringbegin",S.CLUSTERING_END="clusteringend",S.CLUSTER_CLICK="click"})(Xe||(Xe={}));const T0=(S,f,i)=>{i.fitBounds(f.bounds)};class b0 extends _s{constructor({map:f,markers:i=[],algorithmOptions:g={},algorithm:d=new C0(g),renderer:_=new M0,onClusterClick:I=T0}){super(),this.markers=[...i],this.clusters=[],this.algorithm=d,this.renderer=_,this.onClusterClick=I,f&&this.setMap(f)}addMarker(f,i){this.markers.includes(f)||(this.markers.push(f),i||this.render())}addMarkers(f,i){f.forEach(g=>{this.addMarker(g,!0)}),i||this.render()}removeMarker(f,i){const g=this.markers.indexOf(f);return g===-1?!1:(st.setMap(f,null),this.markers.splice(g,1),i||this.render(),!0)}removeMarkers(f,i){let g=!1;return f.forEach(d=>{g=this.removeMarker(d,!0)||g}),g&&!i&&this.render(),g}clearMarkers(f){this.markers.length=0,f||this.render()}render(){const f=this.getMap();if(f instanceof google.maps.Map&&f.getProjection()){google.maps.event.trigger(this,Xe.CLUSTERING_BEGIN,this);const{clusters:i,changed:g}=this.algorithm.calculate({markers:this.markers,map:f,mapCanvasProjection:this.getProjection()});if(g||g==null){const d=new Set;for(const I of i)I.markers.length==1&&d.add(I.markers[0]);const _=[];for(const I of this.clusters)I.marker!=null&&(I.markers.length==1?d.has(I.marker)||st.setMap(I.marker,null):_.push(I.marker));this.clusters=i,this.renderClusters(),requestAnimationFrame(()=>_.forEach(I=>st.setMap(I,null)))}google.maps.event.trigger(this,Xe.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(f=>st.setMap(f,null)),this.clusters.forEach(f=>f.delete()),this.clusters=[]}renderClusters(){const f=new L0(this.markers,this.clusters),i=this.getMap();this.clusters.forEach(g=>{g.markers.length===1?g.marker=g.markers[0]:(g.marker=this.renderer.render(g,f,i),g.markers.forEach(d=>st.setMap(d,null)),this.onClusterClick&&g.marker.addListener("click",d=>{google.maps.event.trigger(this,Xe.CLUSTER_CLICK,g),this.onClusterClick(d,g,i)})),st.setMap(g.marker,i)})}}var Zr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Zr.exports;(function(S,f){(function(){var i,g="4.17.21",d=200,_="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",I="Expected a function",E="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",N=500,P="__lodash_placeholder__",M=1,K=2,k=4,nn=1,V=2,H=1,Y=2,mn=4,ln=8,Tn=16,pn=32,bn=64,sn=128,on=256,Ln=512,Xn=30,dn="...",vn=800,$n=16,pt=1,Jn=2,$=3,Fn=1/0,En=9007199254740991,dt=17976931348623157e292,On=NaN,yn=4294967295,Re=yn-1,Kr=yn>>>1,qr=[["ary",sn],["bind",H],["bindKey",Y],["curry",ln],["curryRight",Tn],["flip",Ln],["partial",pn],["partialRight",bn],["rearg",on]],Ft="[object Arguments]",ge="[object Array]",Te="[object AsyncFunction]",Ut="[object Boolean]",Yt="[object Date]",zr="[object DOMException]",pe="[object Error]",Xt="[object Function]",Je="[object GeneratorFunction]",Qn="[object Map]",Jt="[object Number]",Vr="[object Null]",_t="[object Object]",Qe="[object Promise]",Yr="[object Proxy]",Qt="[object RegExp]",Kn="[object Set]",jt="[object String]",y="[object Symbol]",R="[object Undefined]",b="[object WeakMap]",U="[object WeakSet]",B="[object ArrayBuffer]",rn="[object DataView]",tn="[object Float32Array]",cn="[object Float64Array]",Cn="[object Int8Array]",Pn="[object Int16Array]",vt="[object Int32Array]",ne="[object Uint8Array]",te="[object Uint8ClampedArray]",be="[object Uint16Array]",At="[object Uint32Array]",lf=/\b__p \+= '';/g,cf=/\b(__p \+=) '' \+/g,hf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vs=/&(?:amp|lt|gt|quot|#39);/g,ws=/[&<>"']/g,gf=RegExp(vs.source),pf=RegExp(ws.source),df=/<%-([\s\S]+?)%>/g,_f=/<%([\s\S]+?)%>/g,xs=/<%=([\s\S]+?)%>/g,vf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wf=/^\w*$/,xf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xr=/[\\^$.*+?()[\]{}|]/g,mf=RegExp(Xr.source),Jr=/^\s+/,yf=/\s/,Af=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sf=/\{\n\/\* \[wrapped with (.+)\] \*/,If=/,? & /,Ef=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cf=/[()=,{}\[\]\/\s]/,Lf=/\\(\\)?/g,Mf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ms=/\w*$/,Rf=/^[-+]0x[0-9a-f]+$/i,Tf=/^0b[01]+$/i,bf=/^\[object .+?Constructor\]$/,Of=/^0o[0-7]+$/i,Pf=/^(?:0|[1-9]\d*)$/,Df=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,Ff=/['\n\r\u2028\u2029\\]/g,nr="\\ud800-\\udfff",Uf="\\u0300-\\u036f",Bf="\\ufe20-\\ufe2f",Wf="\\u20d0-\\u20ff",ys=Uf+Bf+Wf,As="\\u2700-\\u27bf",Ss="a-z\\xdf-\\xf6\\xf8-\\xff",Nf="\\xac\\xb1\\xd7\\xf7",kf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$f="\\u2000-\\u206f",Gf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Is="A-Z\\xc0-\\xd6\\xd8-\\xde",Es="\\ufe0e\\ufe0f",Cs=Nf+kf+$f+Gf,Qr="['’]",Hf="["+nr+"]",Ls="["+Cs+"]",tr="["+ys+"]",Ms="\\d+",Zf="["+As+"]",Rs="["+Ss+"]",Ts="[^"+nr+Cs+Ms+As+Ss+Is+"]",jr="\\ud83c[\\udffb-\\udfff]",Kf="(?:"+tr+"|"+jr+")",bs="[^"+nr+"]",ni="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",de="["+Is+"]",Os="\\u200d",Ps="(?:"+Rs+"|"+Ts+")",qf="(?:"+de+"|"+Ts+")",Ds="(?:"+Qr+"(?:d|ll|m|re|s|t|ve))?",Fs="(?:"+Qr+"(?:D|LL|M|RE|S|T|VE))?",Us=Kf+"?",Bs="["+Es+"]?",zf="(?:"+Os+"(?:"+[bs,ni,ti].join("|")+")"+Bs+Us+")*",Vf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ws=Bs+Us+zf,Xf="(?:"+[Zf,ni,ti].join("|")+")"+Ws,Jf="(?:"+[bs+tr+"?",tr,ni,ti,Hf].join("|")+")",Qf=RegExp(Qr,"g"),jf=RegExp(tr,"g"),ei=RegExp(jr+"(?="+jr+")|"+Jf+Ws,"g"),na=RegExp([de+"?"+Rs+"+"+Ds+"(?="+[Ls,de,"$"].join("|")+")",qf+"+"+Fs+"(?="+[Ls,de+Ps,"$"].join("|")+")",de+"?"+Ps+"+"+Ds,de+"+"+Fs,Yf,Vf,Ms,Xf].join("|"),"g"),ta=RegExp("["+Os+nr+ys+Es+"]"),ea=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ra=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ia=-1,_n={};_n[tn]=_n[cn]=_n[Cn]=_n[Pn]=_n[vt]=_n[ne]=_n[te]=_n[be]=_n[At]=!0,_n[Ft]=_n[ge]=_n[B]=_n[Ut]=_n[rn]=_n[Yt]=_n[pe]=_n[Xt]=_n[Qn]=_n[Jt]=_n[_t]=_n[Qt]=_n[Kn]=_n[jt]=_n[b]=!1;var gn={};gn[Ft]=gn[ge]=gn[B]=gn[rn]=gn[Ut]=gn[Yt]=gn[tn]=gn[cn]=gn[Cn]=gn[Pn]=gn[vt]=gn[Qn]=gn[Jt]=gn[_t]=gn[Qt]=gn[Kn]=gn[jt]=gn[y]=gn[ne]=gn[te]=gn[be]=gn[At]=!0,gn[pe]=gn[Xt]=gn[b]=!1;var sa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aa=parseFloat,la=parseInt,Ns=typeof ze=="object"&&ze&&ze.Object===Object&&ze,ca=typeof self=="object"&&self&&self.Object===Object&&self,Un=Ns||ca||Function("return this")(),ri=f&&!f.nodeType&&f,ee=ri&&!0&&S&&!S.nodeType&&S,ks=ee&&ee.exports===ri,ii=ks&&Ns.process,ut=function(){try{var c=ee&&ee.require&&ee.require("util").types;return c||ii&&ii.binding&&ii.binding("util")}catch{}}(),$s=ut&&ut.isArrayBuffer,Gs=ut&&ut.isDate,Hs=ut&&ut.isMap,Zs=ut&&ut.isRegExp,Ks=ut&&ut.isSet,qs=ut&&ut.isTypedArray;function jn(c,v,p){switch(p.length){case 0:return c.call(v);case 1:return c.call(v,p[0]);case 2:return c.call(v,p[0],p[1]);case 3:return c.call(v,p[0],p[1],p[2])}return c.apply(v,p)}function ha(c,v,p,L){for(var G=-1,un=c==null?0:c.length;++G<un;){var Mn=c[G];v(L,Mn,p(Mn),c)}return L}function ot(c,v){for(var p=-1,L=c==null?0:c.length;++p<L&&v(c[p],p,c)!==!1;);return c}function ga(c,v){for(var p=c==null?0:c.length;p--&&v(c[p],p,c)!==!1;);return c}function zs(c,v){for(var p=-1,L=c==null?0:c.length;++p<L;)if(!v(c[p],p,c))return!1;return!0}function Bt(c,v){for(var p=-1,L=c==null?0:c.length,G=0,un=[];++p<L;){var Mn=c[p];v(Mn,p,c)&&(un[G++]=Mn)}return un}function er(c,v){var p=c==null?0:c.length;return!!p&&_e(c,v,0)>-1}function si(c,v,p){for(var L=-1,G=c==null?0:c.length;++L<G;)if(p(v,c[L]))return!0;return!1}function wn(c,v){for(var p=-1,L=c==null?0:c.length,G=Array(L);++p<L;)G[p]=v(c[p],p,c);return G}function Wt(c,v){for(var p=-1,L=v.length,G=c.length;++p<L;)c[G+p]=v[p];return c}function ui(c,v,p,L){var G=-1,un=c==null?0:c.length;for(L&&un&&(p=c[++G]);++G<un;)p=v(p,c[G],G,c);return p}function pa(c,v,p,L){var G=c==null?0:c.length;for(L&&G&&(p=c[--G]);G--;)p=v(p,c[G],G,c);return p}function oi(c,v){for(var p=-1,L=c==null?0:c.length;++p<L;)if(v(c[p],p,c))return!0;return!1}var da=fi("length");function _a(c){return c.split("")}function va(c){return c.match(Ef)||[]}function Vs(c,v,p){var L;return p(c,function(G,un,Mn){if(v(G,un,Mn))return L=un,!1}),L}function rr(c,v,p,L){for(var G=c.length,un=p+(L?1:-1);L?un--:++un<G;)if(v(c[un],un,c))return un;return-1}function _e(c,v,p){return v===v?Ra(c,v,p):rr(c,Ys,p)}function wa(c,v,p,L){for(var G=p-1,un=c.length;++G<un;)if(L(c[G],v))return G;return-1}function Ys(c){return c!==c}function Xs(c,v){var p=c==null?0:c.length;return p?li(c,v)/p:On}function fi(c){return function(v){return v==null?i:v[c]}}function ai(c){return function(v){return c==null?i:c[v]}}function Js(c,v,p,L,G){return G(c,function(un,Mn,hn){p=L?(L=!1,un):v(p,un,Mn,hn)}),p}function xa(c,v){var p=c.length;for(c.sort(v);p--;)c[p]=c[p].value;return c}function li(c,v){for(var p,L=-1,G=c.length;++L<G;){var un=v(c[L]);un!==i&&(p=p===i?un:p+un)}return p}function ci(c,v){for(var p=-1,L=Array(c);++p<c;)L[p]=v(p);return L}function ma(c,v){return wn(v,function(p){return[p,c[p]]})}function Qs(c){return c&&c.slice(0,eu(c)+1).replace(Jr,"")}function nt(c){return function(v){return c(v)}}function hi(c,v){return wn(v,function(p){return c[p]})}function Oe(c,v){return c.has(v)}function js(c,v){for(var p=-1,L=c.length;++p<L&&_e(v,c[p],0)>-1;);return p}function nu(c,v){for(var p=c.length;p--&&_e(v,c[p],0)>-1;);return p}function ya(c,v){for(var p=c.length,L=0;p--;)c[p]===v&&++L;return L}var Aa=ai(sa),Sa=ai(ua);function Ia(c){return"\\"+fa[c]}function Ea(c,v){return c==null?i:c[v]}function ve(c){return ta.test(c)}function Ca(c){return ea.test(c)}function La(c){for(var v,p=[];!(v=c.next()).done;)p.push(v.value);return p}function gi(c){var v=-1,p=Array(c.size);return c.forEach(function(L,G){p[++v]=[G,L]}),p}function tu(c,v){return function(p){return c(v(p))}}function Nt(c,v){for(var p=-1,L=c.length,G=0,un=[];++p<L;){var Mn=c[p];(Mn===v||Mn===P)&&(c[p]=P,un[G++]=p)}return un}function ir(c){var v=-1,p=Array(c.size);return c.forEach(function(L){p[++v]=L}),p}function Ma(c){var v=-1,p=Array(c.size);return c.forEach(function(L){p[++v]=[L,L]}),p}function Ra(c,v,p){for(var L=p-1,G=c.length;++L<G;)if(c[L]===v)return L;return-1}function Ta(c,v,p){for(var L=p+1;L--;)if(c[L]===v)return L;return L}function we(c){return ve(c)?Oa(c):da(c)}function wt(c){return ve(c)?Pa(c):_a(c)}function eu(c){for(var v=c.length;v--&&yf.test(c.charAt(v)););return v}var ba=ai(oa);function Oa(c){for(var v=ei.lastIndex=0;ei.test(c);)++v;return v}function Pa(c){return c.match(ei)||[]}function Da(c){return c.match(na)||[]}var Fa=function c(v){v=v==null?Un:xe.defaults(Un.Object(),v,xe.pick(Un,ra));var p=v.Array,L=v.Date,G=v.Error,un=v.Function,Mn=v.Math,hn=v.Object,pi=v.RegExp,Ua=v.String,ft=v.TypeError,sr=p.prototype,Ba=un.prototype,me=hn.prototype,ur=v["__core-js_shared__"],or=Ba.toString,an=me.hasOwnProperty,Wa=0,ru=function(){var n=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),fr=me.toString,Na=or.call(hn),ka=Un._,$a=pi("^"+or.call(an).replace(Xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=ks?v.Buffer:i,kt=v.Symbol,lr=v.Uint8Array,iu=ar?ar.allocUnsafe:i,cr=tu(hn.getPrototypeOf,hn),su=hn.create,uu=me.propertyIsEnumerable,hr=sr.splice,ou=kt?kt.isConcatSpreadable:i,Pe=kt?kt.iterator:i,re=kt?kt.toStringTag:i,gr=function(){try{var n=fe(hn,"defineProperty");return n({},"",{}),n}catch{}}(),Ga=v.clearTimeout!==Un.clearTimeout&&v.clearTimeout,Ha=L&&L.now!==Un.Date.now&&L.now,Za=v.setTimeout!==Un.setTimeout&&v.setTimeout,pr=Mn.ceil,dr=Mn.floor,di=hn.getOwnPropertySymbols,Ka=ar?ar.isBuffer:i,fu=v.isFinite,qa=sr.join,za=tu(hn.keys,hn),Rn=Mn.max,Wn=Mn.min,Va=L.now,Ya=v.parseInt,au=Mn.random,Xa=sr.reverse,_i=fe(v,"DataView"),De=fe(v,"Map"),vi=fe(v,"Promise"),ye=fe(v,"Set"),Fe=fe(v,"WeakMap"),Ue=fe(hn,"create"),_r=Fe&&new Fe,Ae={},Ja=ae(_i),Qa=ae(De),ja=ae(vi),nl=ae(ye),tl=ae(Fe),vr=kt?kt.prototype:i,Be=vr?vr.valueOf:i,lu=vr?vr.toString:i;function u(n){if(An(n)&&!Z(n)&&!(n instanceof Q)){if(n instanceof at)return n;if(an.call(n,"__wrapped__"))return co(n)}return new at(n)}var Se=function(){function n(){}return function(t){if(!xn(t))return{};if(su)return su(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function wr(){}function at(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}u.templateSettings={escape:df,evaluate:_f,interpolate:xs,variable:"",imports:{_:u}},u.prototype=wr.prototype,u.prototype.constructor=u,at.prototype=Se(wr.prototype),at.prototype.constructor=at;function Q(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yn,this.__views__=[]}function el(){var n=new Q(this.__wrapped__);return n.__actions__=qn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=qn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=qn(this.__views__),n}function rl(){if(this.__filtered__){var n=new Q(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function il(){var n=this.__wrapped__.value(),t=this.__dir__,e=Z(n),r=t<0,s=e?n.length:0,o=_c(0,s,this.__views__),a=o.start,l=o.end,h=l-a,w=r?l:a-1,x=this.__iteratees__,A=x.length,C=0,T=Wn(h,this.__takeCount__);if(!e||!r&&s==h&&T==h)return Du(n,this.__actions__);var D=[];n:for(;h--&&C<T;){w+=t;for(var z=-1,F=n[w];++z<A;){var J=x[z],j=J.iteratee,rt=J.type,Zn=j(F);if(rt==Jn)F=Zn;else if(!Zn){if(rt==pt)continue n;break n}}D[C++]=F}return D}Q.prototype=Se(wr.prototype),Q.prototype.constructor=Q;function ie(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function sl(){this.__data__=Ue?Ue(null):{},this.size=0}function ul(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function ol(n){var t=this.__data__;if(Ue){var e=t[n];return e===m?i:e}return an.call(t,n)?t[n]:i}function fl(n){var t=this.__data__;return Ue?t[n]!==i:an.call(t,n)}function al(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ue&&t===i?m:t,this}ie.prototype.clear=sl,ie.prototype.delete=ul,ie.prototype.get=ol,ie.prototype.has=fl,ie.prototype.set=al;function Ct(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function ll(){this.__data__=[],this.size=0}function cl(n){var t=this.__data__,e=xr(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():hr.call(t,e,1),--this.size,!0}function hl(n){var t=this.__data__,e=xr(t,n);return e<0?i:t[e][1]}function gl(n){return xr(this.__data__,n)>-1}function pl(n,t){var e=this.__data__,r=xr(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}Ct.prototype.clear=ll,Ct.prototype.delete=cl,Ct.prototype.get=hl,Ct.prototype.has=gl,Ct.prototype.set=pl;function Lt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function dl(){this.size=0,this.__data__={hash:new ie,map:new(De||Ct),string:new ie}}function _l(n){var t=br(this,n).delete(n);return this.size-=t?1:0,t}function vl(n){return br(this,n).get(n)}function wl(n){return br(this,n).has(n)}function xl(n,t){var e=br(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}Lt.prototype.clear=dl,Lt.prototype.delete=_l,Lt.prototype.get=vl,Lt.prototype.has=wl,Lt.prototype.set=xl;function se(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Lt;++t<e;)this.add(n[t])}function ml(n){return this.__data__.set(n,m),this}function yl(n){return this.__data__.has(n)}se.prototype.add=se.prototype.push=ml,se.prototype.has=yl;function xt(n){var t=this.__data__=new Ct(n);this.size=t.size}function Al(){this.__data__=new Ct,this.size=0}function Sl(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function Il(n){return this.__data__.get(n)}function El(n){return this.__data__.has(n)}function Cl(n,t){var e=this.__data__;if(e instanceof Ct){var r=e.__data__;if(!De||r.length<d-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Lt(r)}return e.set(n,t),this.size=e.size,this}xt.prototype.clear=Al,xt.prototype.delete=Sl,xt.prototype.get=Il,xt.prototype.has=El,xt.prototype.set=Cl;function cu(n,t){var e=Z(n),r=!e&&le(n),s=!e&&!r&&Kt(n),o=!e&&!r&&!s&&Le(n),a=e||r||s||o,l=a?ci(n.length,Ua):[],h=l.length;for(var w in n)(t||an.call(n,w))&&!(a&&(w=="length"||s&&(w=="offset"||w=="parent")||o&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||bt(w,h)))&&l.push(w);return l}function hu(n){var t=n.length;return t?n[Mi(0,t-1)]:i}function Ll(n,t){return Or(qn(n),ue(t,0,n.length))}function Ml(n){return Or(qn(n))}function wi(n,t,e){(e!==i&&!mt(n[t],e)||e===i&&!(t in n))&&Mt(n,t,e)}function We(n,t,e){var r=n[t];(!(an.call(n,t)&&mt(r,e))||e===i&&!(t in n))&&Mt(n,t,e)}function xr(n,t){for(var e=n.length;e--;)if(mt(n[e][0],t))return e;return-1}function Rl(n,t,e,r){return $t(n,function(s,o,a){t(r,s,e(s),a)}),r}function gu(n,t){return n&&It(t,Dn(t),n)}function Tl(n,t){return n&&It(t,Vn(t),n)}function Mt(n,t,e){t=="__proto__"&&gr?gr(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function xi(n,t){for(var e=-1,r=t.length,s=p(r),o=n==null;++e<r;)s[e]=o?i:ji(n,t[e]);return s}function ue(n,t,e){return n===n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function lt(n,t,e,r,s,o){var a,l=t&M,h=t&K,w=t&k;if(e&&(a=s?e(n,r,s,o):e(n)),a!==i)return a;if(!xn(n))return n;var x=Z(n);if(x){if(a=wc(n),!l)return qn(n,a)}else{var A=Nn(n),C=A==Xt||A==Je;if(Kt(n))return Bu(n,l);if(A==_t||A==Ft||C&&!s){if(a=h||C?{}:eo(n),!l)return h?oc(n,Tl(a,n)):uc(n,gu(a,n))}else{if(!gn[A])return s?n:{};a=xc(n,A,l)}}o||(o=new xt);var T=o.get(n);if(T)return T;o.set(n,a),Oo(n)?n.forEach(function(F){a.add(lt(F,t,e,F,n,o))}):To(n)&&n.forEach(function(F,J){a.set(J,lt(F,t,e,J,n,o))});var D=w?h?Ni:Wi:h?Vn:Dn,z=x?i:D(n);return ot(z||n,function(F,J){z&&(J=F,F=n[J]),We(a,J,lt(F,t,e,J,n,o))}),a}function bl(n){var t=Dn(n);return function(e){return pu(e,n,t)}}function pu(n,t,e){var r=e.length;if(n==null)return!r;for(n=hn(n);r--;){var s=e[r],o=t[s],a=n[s];if(a===i&&!(s in n)||!o(a))return!1}return!0}function du(n,t,e){if(typeof n!="function")throw new ft(I);return Ke(function(){n.apply(i,e)},t)}function Ne(n,t,e,r){var s=-1,o=er,a=!0,l=n.length,h=[],w=t.length;if(!l)return h;e&&(t=wn(t,nt(e))),r?(o=si,a=!1):t.length>=d&&(o=Oe,a=!1,t=new se(t));n:for(;++s<l;){var x=n[s],A=e==null?x:e(x);if(x=r||x!==0?x:0,a&&A===A){for(var C=w;C--;)if(t[C]===A)continue n;h.push(x)}else o(t,A,r)||h.push(x)}return h}var $t=Gu(St),_u=Gu(yi,!0);function Ol(n,t){var e=!0;return $t(n,function(r,s,o){return e=!!t(r,s,o),e}),e}function mr(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],a=t(o);if(a!=null&&(l===i?a===a&&!et(a):e(a,l)))var l=a,h=o}return h}function Pl(n,t,e,r){var s=n.length;for(e=q(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:q(r),r<0&&(r+=s),r=e>r?0:Do(r);e<r;)n[e++]=t;return n}function vu(n,t){var e=[];return $t(n,function(r,s,o){t(r,s,o)&&e.push(r)}),e}function Bn(n,t,e,r,s){var o=-1,a=n.length;for(e||(e=yc),s||(s=[]);++o<a;){var l=n[o];t>0&&e(l)?t>1?Bn(l,t-1,e,r,s):Wt(s,l):r||(s[s.length]=l)}return s}var mi=Hu(),wu=Hu(!0);function St(n,t){return n&&mi(n,t,Dn)}function yi(n,t){return n&&wu(n,t,Dn)}function yr(n,t){return Bt(t,function(e){return Ot(n[e])})}function oe(n,t){t=Ht(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[Et(t[e++])];return e&&e==r?n:i}function xu(n,t,e){var r=t(n);return Z(n)?r:Wt(r,e(n))}function Gn(n){return n==null?n===i?R:Vr:re&&re in hn(n)?dc(n):Mc(n)}function Ai(n,t){return n>t}function Dl(n,t){return n!=null&&an.call(n,t)}function Fl(n,t){return n!=null&&t in hn(n)}function Ul(n,t,e){return n>=Wn(t,e)&&n<Rn(t,e)}function Si(n,t,e){for(var r=e?si:er,s=n[0].length,o=n.length,a=o,l=p(o),h=1/0,w=[];a--;){var x=n[a];a&&t&&(x=wn(x,nt(t))),h=Wn(x.length,h),l[a]=!e&&(t||s>=120&&x.length>=120)?new se(a&&x):i}x=n[0];var A=-1,C=l[0];n:for(;++A<s&&w.length<h;){var T=x[A],D=t?t(T):T;if(T=e||T!==0?T:0,!(C?Oe(C,D):r(w,D,e))){for(a=o;--a;){var z=l[a];if(!(z?Oe(z,D):r(n[a],D,e)))continue n}C&&C.push(D),w.push(T)}}return w}function Bl(n,t,e,r){return St(n,function(s,o,a){t(r,e(s),o,a)}),r}function ke(n,t,e){t=Ht(t,n),n=uo(n,t);var r=n==null?n:n[Et(ht(t))];return r==null?i:jn(r,n,e)}function mu(n){return An(n)&&Gn(n)==Ft}function Wl(n){return An(n)&&Gn(n)==B}function Nl(n){return An(n)&&Gn(n)==Yt}function $e(n,t,e,r,s){return n===t?!0:n==null||t==null||!An(n)&&!An(t)?n!==n&&t!==t:kl(n,t,e,r,$e,s)}function kl(n,t,e,r,s,o){var a=Z(n),l=Z(t),h=a?ge:Nn(n),w=l?ge:Nn(t);h=h==Ft?_t:h,w=w==Ft?_t:w;var x=h==_t,A=w==_t,C=h==w;if(C&&Kt(n)){if(!Kt(t))return!1;a=!0,x=!1}if(C&&!x)return o||(o=new xt),a||Le(n)?ju(n,t,e,r,s,o):gc(n,t,h,e,r,s,o);if(!(e&nn)){var T=x&&an.call(n,"__wrapped__"),D=A&&an.call(t,"__wrapped__");if(T||D){var z=T?n.value():n,F=D?t.value():t;return o||(o=new xt),s(z,F,e,r,o)}}return C?(o||(o=new xt),pc(n,t,e,r,s,o)):!1}function $l(n){return An(n)&&Nn(n)==Qn}function Ii(n,t,e,r){var s=e.length,o=s,a=!r;if(n==null)return!o;for(n=hn(n);s--;){var l=e[s];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<o;){l=e[s];var h=l[0],w=n[h],x=l[1];if(a&&l[2]){if(w===i&&!(h in n))return!1}else{var A=new xt;if(r)var C=r(w,x,h,n,t,A);if(!(C===i?$e(x,w,nn|V,r,A):C))return!1}}return!0}function yu(n){if(!xn(n)||Sc(n))return!1;var t=Ot(n)?$a:bf;return t.test(ae(n))}function Gl(n){return An(n)&&Gn(n)==Qt}function Hl(n){return An(n)&&Nn(n)==Kn}function Zl(n){return An(n)&&Wr(n.length)&&!!_n[Gn(n)]}function Au(n){return typeof n=="function"?n:n==null?Yn:typeof n=="object"?Z(n)?Eu(n[0],n[1]):Iu(n):Ko(n)}function Ei(n){if(!Ze(n))return za(n);var t=[];for(var e in hn(n))an.call(n,e)&&e!="constructor"&&t.push(e);return t}function Kl(n){if(!xn(n))return Lc(n);var t=Ze(n),e=[];for(var r in n)r=="constructor"&&(t||!an.call(n,r))||e.push(r);return e}function Ci(n,t){return n<t}function Su(n,t){var e=-1,r=zn(n)?p(n.length):[];return $t(n,function(s,o,a){r[++e]=t(s,o,a)}),r}function Iu(n){var t=$i(n);return t.length==1&&t[0][2]?io(t[0][0],t[0][1]):function(e){return e===n||Ii(e,n,t)}}function Eu(n,t){return Hi(n)&&ro(t)?io(Et(n),t):function(e){var r=ji(e,n);return r===i&&r===t?ns(e,n):$e(t,r,nn|V)}}function Ar(n,t,e,r,s){n!==t&&mi(t,function(o,a){if(s||(s=new xt),xn(o))ql(n,t,a,e,Ar,r,s);else{var l=r?r(Ki(n,a),o,a+"",n,t,s):i;l===i&&(l=o),wi(n,a,l)}},Vn)}function ql(n,t,e,r,s,o,a){var l=Ki(n,e),h=Ki(t,e),w=a.get(h);if(w){wi(n,e,w);return}var x=o?o(l,h,e+"",n,t,a):i,A=x===i;if(A){var C=Z(h),T=!C&&Kt(h),D=!C&&!T&&Le(h);x=h,C||T||D?Z(l)?x=l:Sn(l)?x=qn(l):T?(A=!1,x=Bu(h,!0)):D?(A=!1,x=Wu(h,!0)):x=[]:qe(h)||le(h)?(x=l,le(l)?x=Fo(l):(!xn(l)||Ot(l))&&(x=eo(h))):A=!1}A&&(a.set(h,x),s(x,h,r,o,a),a.delete(h)),wi(n,e,x)}function Cu(n,t){var e=n.length;if(e)return t+=t<0?e:0,bt(t,e)?n[t]:i}function Lu(n,t,e){t.length?t=wn(t,function(o){return Z(o)?function(a){return oe(a,o.length===1?o[0]:o)}:o}):t=[Yn];var r=-1;t=wn(t,nt(O()));var s=Su(n,function(o,a,l){var h=wn(t,function(w){return w(o)});return{criteria:h,index:++r,value:o}});return xa(s,function(o,a){return sc(o,a,e)})}function zl(n,t){return Mu(n,t,function(e,r){return ns(n,r)})}function Mu(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var a=t[r],l=oe(n,a);e(l,a)&&Ge(o,Ht(a,n),l)}return o}function Vl(n){return function(t){return oe(t,n)}}function Li(n,t,e,r){var s=r?wa:_e,o=-1,a=t.length,l=n;for(n===t&&(t=qn(t)),e&&(l=wn(n,nt(e)));++o<a;)for(var h=0,w=t[o],x=e?e(w):w;(h=s(l,x,h,r))>-1;)l!==n&&hr.call(l,h,1),hr.call(n,h,1);return n}function Ru(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;bt(s)?hr.call(n,s,1):bi(n,s)}}return n}function Mi(n,t){return n+dr(au()*(t-n+1))}function Yl(n,t,e,r){for(var s=-1,o=Rn(pr((t-n)/(e||1)),0),a=p(o);o--;)a[r?o:++s]=n,n+=e;return a}function Ri(n,t){var e="";if(!n||t<1||t>En)return e;do t%2&&(e+=n),t=dr(t/2),t&&(n+=n);while(t);return e}function X(n,t){return qi(so(n,t,Yn),n+"")}function Xl(n){return hu(Me(n))}function Jl(n,t){var e=Me(n);return Or(e,ue(t,0,e.length))}function Ge(n,t,e,r){if(!xn(n))return n;t=Ht(t,n);for(var s=-1,o=t.length,a=o-1,l=n;l!=null&&++s<o;){var h=Et(t[s]),w=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(s!=a){var x=l[h];w=r?r(x,h,l):i,w===i&&(w=xn(x)?x:bt(t[s+1])?[]:{})}We(l,h,w),l=l[h]}return n}var Tu=_r?function(n,t){return _r.set(n,t),n}:Yn,Ql=gr?function(n,t){return gr(n,"toString",{configurable:!0,enumerable:!1,value:es(t),writable:!0})}:Yn;function jl(n){return Or(Me(n))}function ct(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=p(s);++r<s;)o[r]=n[r+t];return o}function nc(n,t){var e;return $t(n,function(r,s,o){return e=t(r,s,o),!e}),!!e}function Sr(n,t,e){var r=0,s=n==null?r:n.length;if(typeof t=="number"&&t===t&&s<=Kr){for(;r<s;){var o=r+s>>>1,a=n[o];a!==null&&!et(a)&&(e?a<=t:a<t)?r=o+1:s=o}return s}return Ti(n,t,Yn,e)}function Ti(n,t,e,r){var s=0,o=n==null?0:n.length;if(o===0)return 0;t=e(t);for(var a=t!==t,l=t===null,h=et(t),w=t===i;s<o;){var x=dr((s+o)/2),A=e(n[x]),C=A!==i,T=A===null,D=A===A,z=et(A);if(a)var F=r||D;else w?F=D&&(r||C):l?F=D&&C&&(r||!T):h?F=D&&C&&!T&&(r||!z):T||z?F=!1:F=r?A<=t:A<t;F?s=x+1:o=x}return Wn(o,Re)}function bu(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!mt(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function Ou(n){return typeof n=="number"?n:et(n)?On:+n}function tt(n){if(typeof n=="string")return n;if(Z(n))return wn(n,tt)+"";if(et(n))return lu?lu.call(n):"";var t=n+"";return t=="0"&&1/n==-Fn?"-0":t}function Gt(n,t,e){var r=-1,s=er,o=n.length,a=!0,l=[],h=l;if(e)a=!1,s=si;else if(o>=d){var w=t?null:cc(n);if(w)return ir(w);a=!1,s=Oe,h=new se}else h=t?[]:l;n:for(;++r<o;){var x=n[r],A=t?t(x):x;if(x=e||x!==0?x:0,a&&A===A){for(var C=h.length;C--;)if(h[C]===A)continue n;t&&h.push(A),l.push(x)}else s(h,A,e)||(h!==l&&h.push(A),l.push(x))}return l}function bi(n,t){return t=Ht(t,n),n=uo(n,t),n==null||delete n[Et(ht(t))]}function Pu(n,t,e,r){return Ge(n,t,e(oe(n,t)),r)}function Ir(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?ct(n,r?0:o,r?o+1:s):ct(n,r?o+1:0,r?s:o)}function Du(n,t){var e=n;return e instanceof Q&&(e=e.value()),ui(t,function(r,s){return s.func.apply(s.thisArg,Wt([r],s.args))},e)}function Oi(n,t,e){var r=n.length;if(r<2)return r?Gt(n[0]):[];for(var s=-1,o=p(r);++s<r;)for(var a=n[s],l=-1;++l<r;)l!=s&&(o[s]=Ne(o[s]||a,n[l],t,e));return Gt(Bn(o,1),t,e)}function Fu(n,t,e){for(var r=-1,s=n.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:i;e(a,n[r],l)}return a}function Pi(n){return Sn(n)?n:[]}function Di(n){return typeof n=="function"?n:Yn}function Ht(n,t){return Z(n)?n:Hi(n,t)?[n]:lo(fn(n))}var tc=X;function Zt(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:ct(n,t,e)}var Uu=Ga||function(n){return Un.clearTimeout(n)};function Bu(n,t){if(t)return n.slice();var e=n.length,r=iu?iu(e):new n.constructor(e);return n.copy(r),r}function Fi(n){var t=new n.constructor(n.byteLength);return new lr(t).set(new lr(n)),t}function ec(n,t){var e=t?Fi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}function rc(n){var t=new n.constructor(n.source,ms.exec(n));return t.lastIndex=n.lastIndex,t}function ic(n){return Be?hn(Be.call(n)):{}}function Wu(n,t){var e=t?Fi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function Nu(n,t){if(n!==t){var e=n!==i,r=n===null,s=n===n,o=et(n),a=t!==i,l=t===null,h=t===t,w=et(t);if(!l&&!w&&!o&&n>t||o&&a&&h&&!l&&!w||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!w&&n<t||w&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function sc(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,a=s.length,l=e.length;++r<a;){var h=Nu(s[r],o[r]);if(h){if(r>=l)return h;var w=e[r];return h*(w=="desc"?-1:1)}}return n.index-t.index}function ku(n,t,e,r){for(var s=-1,o=n.length,a=e.length,l=-1,h=t.length,w=Rn(o-a,0),x=p(h+w),A=!r;++l<h;)x[l]=t[l];for(;++s<a;)(A||s<o)&&(x[e[s]]=n[s]);for(;w--;)x[l++]=n[s++];return x}function $u(n,t,e,r){for(var s=-1,o=n.length,a=-1,l=e.length,h=-1,w=t.length,x=Rn(o-l,0),A=p(x+w),C=!r;++s<x;)A[s]=n[s];for(var T=s;++h<w;)A[T+h]=t[h];for(;++a<l;)(C||s<o)&&(A[T+e[a]]=n[s++]);return A}function qn(n,t){var e=-1,r=n.length;for(t||(t=p(r));++e<r;)t[e]=n[e];return t}function It(n,t,e,r){var s=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var l=t[o],h=r?r(e[l],n[l],l,e,n):i;h===i&&(h=n[l]),s?Mt(e,l,h):We(e,l,h)}return e}function uc(n,t){return It(n,Gi(n),t)}function oc(n,t){return It(n,no(n),t)}function Er(n,t){return function(e,r){var s=Z(e)?ha:Rl,o=t?t():{};return s(e,n,O(r,2),o)}}function Ie(n){return X(function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=n.length>3&&typeof o=="function"?(s--,o):i,a&&Hn(e[0],e[1],a)&&(o=s<3?i:o,s=1),t=hn(t);++r<s;){var l=e[r];l&&n(t,l,r,o)}return t})}function Gu(n,t){return function(e,r){if(e==null)return e;if(!zn(e))return n(e,r);for(var s=e.length,o=t?s:-1,a=hn(e);(t?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function Hu(n){return function(t,e,r){for(var s=-1,o=hn(t),a=r(t),l=a.length;l--;){var h=a[n?l:++s];if(e(o[h],h,o)===!1)break}return t}}function fc(n,t,e){var r=t&H,s=He(n);function o(){var a=this&&this!==Un&&this instanceof o?s:n;return a.apply(r?e:this,arguments)}return o}function Zu(n){return function(t){t=fn(t);var e=ve(t)?wt(t):i,r=e?e[0]:t.charAt(0),s=e?Zt(e,1).join(""):t.slice(1);return r[n]()+s}}function Ee(n){return function(t){return ui(Ho(Go(t).replace(Qf,"")),n,"")}}function He(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Se(n.prototype),r=n.apply(e,t);return xn(r)?r:e}}function ac(n,t,e){var r=He(n);function s(){for(var o=arguments.length,a=p(o),l=o,h=Ce(s);l--;)a[l]=arguments[l];var w=o<3&&a[0]!==h&&a[o-1]!==h?[]:Nt(a,h);if(o-=w.length,o<e)return Yu(n,t,Cr,s.placeholder,i,a,w,i,i,e-o);var x=this&&this!==Un&&this instanceof s?r:n;return jn(x,this,a)}return s}function Ku(n){return function(t,e,r){var s=hn(t);if(!zn(t)){var o=O(e,3);t=Dn(t),e=function(l){return o(s[l],l,s)}}var a=n(t,e,r);return a>-1?s[o?t[a]:a]:i}}function qu(n){return Tt(function(t){var e=t.length,r=e,s=at.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if(typeof o!="function")throw new ft(I);if(s&&!a&&Tr(o)=="wrapper")var a=new at([],!0)}for(r=a?r:e;++r<e;){o=t[r];var l=Tr(o),h=l=="wrapper"?ki(o):i;h&&Zi(h[0])&&h[1]==(sn|ln|pn|on)&&!h[4].length&&h[9]==1?a=a[Tr(h[0])].apply(a,h[3]):a=o.length==1&&Zi(o)?a[l]():a.thru(o)}return function(){var w=arguments,x=w[0];if(a&&w.length==1&&Z(x))return a.plant(x).value();for(var A=0,C=e?t[A].apply(this,w):x;++A<e;)C=t[A].call(this,C);return C}})}function Cr(n,t,e,r,s,o,a,l,h,w){var x=t&sn,A=t&H,C=t&Y,T=t&(ln|Tn),D=t&Ln,z=C?i:He(n);function F(){for(var J=arguments.length,j=p(J),rt=J;rt--;)j[rt]=arguments[rt];if(T)var Zn=Ce(F),it=ya(j,Zn);if(r&&(j=ku(j,r,s,T)),o&&(j=$u(j,o,a,T)),J-=it,T&&J<w){var In=Nt(j,Zn);return Yu(n,t,Cr,F.placeholder,e,j,In,l,h,w-J)}var yt=A?e:this,Dt=C?yt[n]:n;return J=j.length,l?j=Rc(j,l):D&&J>1&&j.reverse(),x&&h<J&&(j.length=h),this&&this!==Un&&this instanceof F&&(Dt=z||He(Dt)),Dt.apply(yt,j)}return F}function zu(n,t){return function(e,r){return Bl(e,n,t(r),{})}}function Lr(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=tt(e),r=tt(r)):(e=Ou(e),r=Ou(r)),s=n(e,r)}return s}}function Ui(n){return Tt(function(t){return t=wn(t,nt(O())),X(function(e){var r=this;return n(t,function(s){return jn(s,r,e)})})})}function Mr(n,t){t=t===i?" ":tt(t);var e=t.length;if(e<2)return e?Ri(t,n):t;var r=Ri(t,pr(n/we(t)));return ve(t)?Zt(wt(r),0,n).join(""):r.slice(0,n)}function lc(n,t,e,r){var s=t&H,o=He(n);function a(){for(var l=-1,h=arguments.length,w=-1,x=r.length,A=p(x+h),C=this&&this!==Un&&this instanceof a?o:n;++w<x;)A[w]=r[w];for(;h--;)A[w++]=arguments[++l];return jn(C,s?e:this,A)}return a}function Vu(n){return function(t,e,r){return r&&typeof r!="number"&&Hn(t,e,r)&&(e=r=i),t=Pt(t),e===i?(e=t,t=0):e=Pt(e),r=r===i?t<e?1:-1:Pt(r),Yl(t,e,r,n)}}function Rr(n){return function(t,e){return typeof t=="string"&&typeof e=="string"||(t=gt(t),e=gt(e)),n(t,e)}}function Yu(n,t,e,r,s,o,a,l,h,w){var x=t&ln,A=x?a:i,C=x?i:a,T=x?o:i,D=x?i:o;t|=x?pn:bn,t&=~(x?bn:pn),t&mn||(t&=~(H|Y));var z=[n,t,s,T,A,D,C,l,h,w],F=e.apply(i,z);return Zi(n)&&oo(F,z),F.placeholder=r,fo(F,n,t)}function Bi(n){var t=Mn[n];return function(e,r){if(e=gt(e),r=r==null?0:Wn(q(r),292),r&&fu(e)){var s=(fn(e)+"e").split("e"),o=t(s[0]+"e"+(+s[1]+r));return s=(fn(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return t(e)}}var cc=ye&&1/ir(new ye([,-0]))[1]==Fn?function(n){return new ye(n)}:ss;function Xu(n){return function(t){var e=Nn(t);return e==Qn?gi(t):e==Kn?Ma(t):ma(t,n(t))}}function Rt(n,t,e,r,s,o,a,l){var h=t&Y;if(!h&&typeof n!="function")throw new ft(I);var w=r?r.length:0;if(w||(t&=~(pn|bn),r=s=i),a=a===i?a:Rn(q(a),0),l=l===i?l:q(l),w-=s?s.length:0,t&bn){var x=r,A=s;r=s=i}var C=h?i:ki(n),T=[n,t,e,r,s,x,A,o,a,l];if(C&&Cc(T,C),n=T[0],t=T[1],e=T[2],r=T[3],s=T[4],l=T[9]=T[9]===i?h?0:n.length:Rn(T[9]-w,0),!l&&t&(ln|Tn)&&(t&=~(ln|Tn)),!t||t==H)var D=fc(n,t,e);else t==ln||t==Tn?D=ac(n,t,l):(t==pn||t==(H|pn))&&!s.length?D=lc(n,t,e,r):D=Cr.apply(i,T);var z=C?Tu:oo;return fo(z(D,T),n,t)}function Ju(n,t,e,r){return n===i||mt(n,me[e])&&!an.call(r,e)?t:n}function Qu(n,t,e,r,s,o){return xn(n)&&xn(t)&&(o.set(t,n),Ar(n,t,i,Qu,o),o.delete(t)),n}function hc(n){return qe(n)?i:n}function ju(n,t,e,r,s,o){var a=e&nn,l=n.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var w=o.get(n),x=o.get(t);if(w&&x)return w==t&&x==n;var A=-1,C=!0,T=e&V?new se:i;for(o.set(n,t),o.set(t,n);++A<l;){var D=n[A],z=t[A];if(r)var F=a?r(z,D,A,t,n,o):r(D,z,A,n,t,o);if(F!==i){if(F)continue;C=!1;break}if(T){if(!oi(t,function(J,j){if(!Oe(T,j)&&(D===J||s(D,J,e,r,o)))return T.push(j)})){C=!1;break}}else if(!(D===z||s(D,z,e,r,o))){C=!1;break}}return o.delete(n),o.delete(t),C}function gc(n,t,e,r,s,o,a){switch(e){case rn:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case B:return!(n.byteLength!=t.byteLength||!o(new lr(n),new lr(t)));case Ut:case Yt:case Jt:return mt(+n,+t);case pe:return n.name==t.name&&n.message==t.message;case Qt:case jt:return n==t+"";case Qn:var l=gi;case Kn:var h=r&nn;if(l||(l=ir),n.size!=t.size&&!h)return!1;var w=a.get(n);if(w)return w==t;r|=V,a.set(n,t);var x=ju(l(n),l(t),r,s,o,a);return a.delete(n),x;case y:if(Be)return Be.call(n)==Be.call(t)}return!1}function pc(n,t,e,r,s,o){var a=e&nn,l=Wi(n),h=l.length,w=Wi(t),x=w.length;if(h!=x&&!a)return!1;for(var A=h;A--;){var C=l[A];if(!(a?C in t:an.call(t,C)))return!1}var T=o.get(n),D=o.get(t);if(T&&D)return T==t&&D==n;var z=!0;o.set(n,t),o.set(t,n);for(var F=a;++A<h;){C=l[A];var J=n[C],j=t[C];if(r)var rt=a?r(j,J,C,t,n,o):r(J,j,C,n,t,o);if(!(rt===i?J===j||s(J,j,e,r,o):rt)){z=!1;break}F||(F=C=="constructor")}if(z&&!F){var Zn=n.constructor,it=t.constructor;Zn!=it&&"constructor"in n&&"constructor"in t&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof it=="function"&&it instanceof it)&&(z=!1)}return o.delete(n),o.delete(t),z}function Tt(n){return qi(so(n,i,po),n+"")}function Wi(n){return xu(n,Dn,Gi)}function Ni(n){return xu(n,Vn,no)}var ki=_r?function(n){return _r.get(n)}:ss;function Tr(n){for(var t=n.name+"",e=Ae[t],r=an.call(Ae,t)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==n)return s.name}return t}function Ce(n){var t=an.call(u,"placeholder")?u:n;return t.placeholder}function O(){var n=u.iteratee||rs;return n=n===rs?Au:n,arguments.length?n(arguments[0],arguments[1]):n}function br(n,t){var e=n.__data__;return Ac(t)?e[typeof t=="string"?"string":"hash"]:e.map}function $i(n){for(var t=Dn(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,ro(s)]}return t}function fe(n,t){var e=Ea(n,t);return yu(e)?e:i}function dc(n){var t=an.call(n,re),e=n[re];try{n[re]=i;var r=!0}catch{}var s=fr.call(n);return r&&(t?n[re]=e:delete n[re]),s}var Gi=di?function(n){return n==null?[]:(n=hn(n),Bt(di(n),function(t){return uu.call(n,t)}))}:us,no=di?function(n){for(var t=[];n;)Wt(t,Gi(n)),n=cr(n);return t}:us,Nn=Gn;(_i&&Nn(new _i(new ArrayBuffer(1)))!=rn||De&&Nn(new De)!=Qn||vi&&Nn(vi.resolve())!=Qe||ye&&Nn(new ye)!=Kn||Fe&&Nn(new Fe)!=b)&&(Nn=function(n){var t=Gn(n),e=t==_t?n.constructor:i,r=e?ae(e):"";if(r)switch(r){case Ja:return rn;case Qa:return Qn;case ja:return Qe;case nl:return Kn;case tl:return b}return t});function _c(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=Wn(t,n+a);break;case"takeRight":n=Rn(n,t-a);break}}return{start:n,end:t}}function vc(n){var t=n.match(Sf);return t?t[1].split(If):[]}function to(n,t,e){t=Ht(t,n);for(var r=-1,s=t.length,o=!1;++r<s;){var a=Et(t[r]);if(!(o=n!=null&&e(n,a)))break;n=n[a]}return o||++r!=s?o:(s=n==null?0:n.length,!!s&&Wr(s)&&bt(a,s)&&(Z(n)||le(n)))}function wc(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&an.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function eo(n){return typeof n.constructor=="function"&&!Ze(n)?Se(cr(n)):{}}function xc(n,t,e){var r=n.constructor;switch(t){case B:return Fi(n);case Ut:case Yt:return new r(+n);case rn:return ec(n,e);case tn:case cn:case Cn:case Pn:case vt:case ne:case te:case be:case At:return Wu(n,e);case Qn:return new r;case Jt:case jt:return new r(n);case Qt:return rc(n);case Kn:return new r;case y:return ic(n)}}function mc(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(Af,`{
/* [wrapped with `+t+`] */
`)}function yc(n){return Z(n)||le(n)||!!(ou&&n&&n[ou])}function bt(n,t){var e=typeof n;return t=t??En,!!t&&(e=="number"||e!="symbol"&&Pf.test(n))&&n>-1&&n%1==0&&n<t}function Hn(n,t,e){if(!xn(e))return!1;var r=typeof t;return(r=="number"?zn(e)&&bt(t,e.length):r=="string"&&t in e)?mt(e[t],n):!1}function Hi(n,t){if(Z(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||et(n)?!0:wf.test(n)||!vf.test(n)||t!=null&&n in hn(t)}function Ac(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Zi(n){var t=Tr(n),e=u[t];if(typeof e!="function"||!(t in Q.prototype))return!1;if(n===e)return!0;var r=ki(e);return!!r&&n===r[0]}function Sc(n){return!!ru&&ru in n}var Ic=ur?Ot:os;function Ze(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||me;return n===e}function ro(n){return n===n&&!xn(n)}function io(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==i||n in hn(e))}}function Ec(n){var t=Ur(n,function(r){return e.size===N&&e.clear(),r}),e=t.cache;return t}function Cc(n,t){var e=n[1],r=t[1],s=e|r,o=s<(H|Y|sn),a=r==sn&&e==ln||r==sn&&e==on&&n[7].length<=t[8]||r==(sn|on)&&t[7].length<=t[8]&&e==ln;if(!(o||a))return n;r&H&&(n[2]=t[2],s|=e&H?0:mn);var l=t[3];if(l){var h=n[3];n[3]=h?ku(h,l,t[4]):l,n[4]=h?Nt(n[3],P):t[4]}return l=t[5],l&&(h=n[5],n[5]=h?$u(h,l,t[6]):l,n[6]=h?Nt(n[5],P):t[6]),l=t[7],l&&(n[7]=l),r&sn&&(n[8]=n[8]==null?t[8]:Wn(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}function Lc(n){var t=[];if(n!=null)for(var e in hn(n))t.push(e);return t}function Mc(n){return fr.call(n)}function so(n,t,e){return t=Rn(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=Rn(r.length-t,0),a=p(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=p(t+1);++s<t;)l[s]=r[s];return l[t]=e(a),jn(n,this,l)}}function uo(n,t){return t.length<2?n:oe(n,ct(t,0,-1))}function Rc(n,t){for(var e=n.length,r=Wn(t.length,e),s=qn(n);r--;){var o=t[r];n[r]=bt(o,e)?s[o]:i}return n}function Ki(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var oo=ao(Tu),Ke=Za||function(n,t){return Un.setTimeout(n,t)},qi=ao(Ql);function fo(n,t,e){var r=t+"";return qi(n,mc(r,Tc(vc(r),e)))}function ao(n){var t=0,e=0;return function(){var r=Va(),s=$n-(r-e);if(e=r,s>0){if(++t>=vn)return arguments[0]}else t=0;return n.apply(i,arguments)}}function Or(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=Mi(e,s),a=n[o];n[o]=n[e],n[e]=a}return n.length=t,n}var lo=Ec(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(xf,function(e,r,s,o){t.push(s?o.replace(Lf,"$1"):r||e)}),t});function Et(n){if(typeof n=="string"||et(n))return n;var t=n+"";return t=="0"&&1/n==-Fn?"-0":t}function ae(n){if(n!=null){try{return or.call(n)}catch{}try{return n+""}catch{}}return""}function Tc(n,t){return ot(qr,function(e){var r="_."+e[0];t&e[1]&&!er(n,r)&&n.push(r)}),n.sort()}function co(n){if(n instanceof Q)return n.clone();var t=new at(n.__wrapped__,n.__chain__);return t.__actions__=qn(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function bc(n,t,e){(e?Hn(n,t,e):t===i)?t=1:t=Rn(q(t),0);var r=n==null?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,a=p(pr(r/t));s<r;)a[o++]=ct(n,s,s+=t);return a}function Oc(n){for(var t=-1,e=n==null?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s}function Pc(){var n=arguments.length;if(!n)return[];for(var t=p(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return Wt(Z(e)?qn(e):[e],Bn(t,1))}var Dc=X(function(n,t){return Sn(n)?Ne(n,Bn(t,1,Sn,!0)):[]}),Fc=X(function(n,t){var e=ht(t);return Sn(e)&&(e=i),Sn(n)?Ne(n,Bn(t,1,Sn,!0),O(e,2)):[]}),Uc=X(function(n,t){var e=ht(t);return Sn(e)&&(e=i),Sn(n)?Ne(n,Bn(t,1,Sn,!0),i,e):[]});function Bc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:q(t),ct(n,t<0?0:t,r)):[]}function Wc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:q(t),t=r-t,ct(n,0,t<0?0:t)):[]}function Nc(n,t){return n&&n.length?Ir(n,O(t,3),!0,!0):[]}function kc(n,t){return n&&n.length?Ir(n,O(t,3),!0):[]}function $c(n,t,e,r){var s=n==null?0:n.length;return s?(e&&typeof e!="number"&&Hn(n,t,e)&&(e=0,r=s),Pl(n,t,e,r)):[]}function ho(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:q(e);return s<0&&(s=Rn(r+s,0)),rr(n,O(t,3),s)}function go(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=q(e),s=e<0?Rn(r+s,0):Wn(s,r-1)),rr(n,O(t,3),s,!0)}function po(n){var t=n==null?0:n.length;return t?Bn(n,1):[]}function Gc(n){var t=n==null?0:n.length;return t?Bn(n,Fn):[]}function Hc(n,t){var e=n==null?0:n.length;return e?(t=t===i?1:q(t),Bn(n,t)):[]}function Zc(n){for(var t=-1,e=n==null?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r}function _o(n){return n&&n.length?n[0]:i}function Kc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=e==null?0:q(e);return s<0&&(s=Rn(r+s,0)),_e(n,t,s)}function qc(n){var t=n==null?0:n.length;return t?ct(n,0,-1):[]}var zc=X(function(n){var t=wn(n,Pi);return t.length&&t[0]===n[0]?Si(t):[]}),Vc=X(function(n){var t=ht(n),e=wn(n,Pi);return t===ht(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Si(e,O(t,2)):[]}),Yc=X(function(n){var t=ht(n),e=wn(n,Pi);return t=typeof t=="function"?t:i,t&&e.pop(),e.length&&e[0]===n[0]?Si(e,i,t):[]});function Xc(n,t){return n==null?"":qa.call(n,t)}function ht(n){var t=n==null?0:n.length;return t?n[t-1]:i}function Jc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=q(e),s=s<0?Rn(r+s,0):Wn(s,r-1)),t===t?Ta(n,t,s):rr(n,Ys,s,!0)}function Qc(n,t){return n&&n.length?Cu(n,q(t)):i}var jc=X(vo);function vo(n,t){return n&&n.length&&t&&t.length?Li(n,t):n}function nh(n,t,e){return n&&n.length&&t&&t.length?Li(n,t,O(e,2)):n}function th(n,t,e){return n&&n.length&&t&&t.length?Li(n,t,i,e):n}var eh=Tt(function(n,t){var e=n==null?0:n.length,r=xi(n,t);return Ru(n,wn(t,function(s){return bt(s,e)?+s:s}).sort(Nu)),r});function rh(n,t){var e=[];if(!(n&&n.length))return e;var r=-1,s=[],o=n.length;for(t=O(t,3);++r<o;){var a=n[r];t(a,r,n)&&(e.push(a),s.push(r))}return Ru(n,s),e}function zi(n){return n==null?n:Xa.call(n)}function ih(n,t,e){var r=n==null?0:n.length;return r?(e&&typeof e!="number"&&Hn(n,t,e)?(t=0,e=r):(t=t==null?0:q(t),e=e===i?r:q(e)),ct(n,t,e)):[]}function sh(n,t){return Sr(n,t)}function uh(n,t,e){return Ti(n,t,O(e,2))}function oh(n,t){var e=n==null?0:n.length;if(e){var r=Sr(n,t);if(r<e&&mt(n[r],t))return r}return-1}function fh(n,t){return Sr(n,t,!0)}function ah(n,t,e){return Ti(n,t,O(e,2),!0)}function lh(n,t){var e=n==null?0:n.length;if(e){var r=Sr(n,t,!0)-1;if(mt(n[r],t))return r}return-1}function ch(n){return n&&n.length?bu(n):[]}function hh(n,t){return n&&n.length?bu(n,O(t,2)):[]}function gh(n){var t=n==null?0:n.length;return t?ct(n,1,t):[]}function ph(n,t,e){return n&&n.length?(t=e||t===i?1:q(t),ct(n,0,t<0?0:t)):[]}function dh(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:q(t),t=r-t,ct(n,t<0?0:t,r)):[]}function _h(n,t){return n&&n.length?Ir(n,O(t,3),!1,!0):[]}function vh(n,t){return n&&n.length?Ir(n,O(t,3)):[]}var wh=X(function(n){return Gt(Bn(n,1,Sn,!0))}),xh=X(function(n){var t=ht(n);return Sn(t)&&(t=i),Gt(Bn(n,1,Sn,!0),O(t,2))}),mh=X(function(n){var t=ht(n);return t=typeof t=="function"?t:i,Gt(Bn(n,1,Sn,!0),i,t)});function yh(n){return n&&n.length?Gt(n):[]}function Ah(n,t){return n&&n.length?Gt(n,O(t,2)):[]}function Sh(n,t){return t=typeof t=="function"?t:i,n&&n.length?Gt(n,i,t):[]}function Vi(n){if(!(n&&n.length))return[];var t=0;return n=Bt(n,function(e){if(Sn(e))return t=Rn(e.length,t),!0}),ci(t,function(e){return wn(n,fi(e))})}function wo(n,t){if(!(n&&n.length))return[];var e=Vi(n);return t==null?e:wn(e,function(r){return jn(t,i,r)})}var Ih=X(function(n,t){return Sn(n)?Ne(n,t):[]}),Eh=X(function(n){return Oi(Bt(n,Sn))}),Ch=X(function(n){var t=ht(n);return Sn(t)&&(t=i),Oi(Bt(n,Sn),O(t,2))}),Lh=X(function(n){var t=ht(n);return t=typeof t=="function"?t:i,Oi(Bt(n,Sn),i,t)}),Mh=X(Vi);function Rh(n,t){return Fu(n||[],t||[],We)}function Th(n,t){return Fu(n||[],t||[],Ge)}var bh=X(function(n){var t=n.length,e=t>1?n[t-1]:i;return e=typeof e=="function"?(n.pop(),e):i,wo(n,e)});function xo(n){var t=u(n);return t.__chain__=!0,t}function Oh(n,t){return t(n),n}function Pr(n,t){return t(n)}var Ph=Tt(function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return xi(o,n)};return t>1||this.__actions__.length||!(r instanceof Q)||!bt(e)?this.thru(s):(r=r.slice(e,+e+(t?1:0)),r.__actions__.push({func:Pr,args:[s],thisArg:i}),new at(r,this.__chain__).thru(function(o){return t&&!o.length&&o.push(i),o}))});function Dh(){return xo(this)}function Fh(){return new at(this.value(),this.__chain__)}function Uh(){this.__values__===i&&(this.__values__=Po(this.value()));var n=this.__index__>=this.__values__.length,t=n?i:this.__values__[this.__index__++];return{done:n,value:t}}function Bh(){return this}function Wh(n){for(var t,e=this;e instanceof wr;){var r=co(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t}function Nh(){var n=this.__wrapped__;if(n instanceof Q){var t=n;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:Pr,args:[zi],thisArg:i}),new at(t,this.__chain__)}return this.thru(zi)}function kh(){return Du(this.__wrapped__,this.__actions__)}var $h=Er(function(n,t,e){an.call(n,e)?++n[e]:Mt(n,e,1)});function Gh(n,t,e){var r=Z(n)?zs:Ol;return e&&Hn(n,t,e)&&(t=i),r(n,O(t,3))}function Hh(n,t){var e=Z(n)?Bt:vu;return e(n,O(t,3))}var Zh=Ku(ho),Kh=Ku(go);function qh(n,t){return Bn(Dr(n,t),1)}function zh(n,t){return Bn(Dr(n,t),Fn)}function Vh(n,t,e){return e=e===i?1:q(e),Bn(Dr(n,t),e)}function mo(n,t){var e=Z(n)?ot:$t;return e(n,O(t,3))}function yo(n,t){var e=Z(n)?ga:_u;return e(n,O(t,3))}var Yh=Er(function(n,t,e){an.call(n,e)?n[e].push(t):Mt(n,e,[t])});function Xh(n,t,e,r){n=zn(n)?n:Me(n),e=e&&!r?q(e):0;var s=n.length;return e<0&&(e=Rn(s+e,0)),Nr(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&_e(n,t,e)>-1}var Jh=X(function(n,t,e){var r=-1,s=typeof t=="function",o=zn(n)?p(n.length):[];return $t(n,function(a){o[++r]=s?jn(t,a,e):ke(a,t,e)}),o}),Qh=Er(function(n,t,e){Mt(n,e,t)});function Dr(n,t){var e=Z(n)?wn:Su;return e(n,O(t,3))}function jh(n,t,e,r){return n==null?[]:(Z(t)||(t=t==null?[]:[t]),e=r?i:e,Z(e)||(e=e==null?[]:[e]),Lu(n,t,e))}var ng=Er(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]});function tg(n,t,e){var r=Z(n)?ui:Js,s=arguments.length<3;return r(n,O(t,4),e,s,$t)}function eg(n,t,e){var r=Z(n)?pa:Js,s=arguments.length<3;return r(n,O(t,4),e,s,_u)}function rg(n,t){var e=Z(n)?Bt:vu;return e(n,Br(O(t,3)))}function ig(n){var t=Z(n)?hu:Xl;return t(n)}function sg(n,t,e){(e?Hn(n,t,e):t===i)?t=1:t=q(t);var r=Z(n)?Ll:Jl;return r(n,t)}function ug(n){var t=Z(n)?Ml:jl;return t(n)}function og(n){if(n==null)return 0;if(zn(n))return Nr(n)?we(n):n.length;var t=Nn(n);return t==Qn||t==Kn?n.size:Ei(n).length}function fg(n,t,e){var r=Z(n)?oi:nc;return e&&Hn(n,t,e)&&(t=i),r(n,O(t,3))}var ag=X(function(n,t){if(n==null)return[];var e=t.length;return e>1&&Hn(n,t[0],t[1])?t=[]:e>2&&Hn(t[0],t[1],t[2])&&(t=[t[0]]),Lu(n,Bn(t,1),[])}),Fr=Ha||function(){return Un.Date.now()};function lg(n,t){if(typeof t!="function")throw new ft(I);return n=q(n),function(){if(--n<1)return t.apply(this,arguments)}}function Ao(n,t,e){return t=e?i:t,t=n&&t==null?n.length:t,Rt(n,sn,i,i,i,i,t)}function So(n,t){var e;if(typeof t!="function")throw new ft(I);return n=q(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Yi=X(function(n,t,e){var r=H;if(e.length){var s=Nt(e,Ce(Yi));r|=pn}return Rt(n,r,t,e,s)}),Io=X(function(n,t,e){var r=H|Y;if(e.length){var s=Nt(e,Ce(Io));r|=pn}return Rt(t,r,n,e,s)});function Eo(n,t,e){t=e?i:t;var r=Rt(n,ln,i,i,i,i,i,t);return r.placeholder=Eo.placeholder,r}function Co(n,t,e){t=e?i:t;var r=Rt(n,Tn,i,i,i,i,i,t);return r.placeholder=Co.placeholder,r}function Lo(n,t,e){var r,s,o,a,l,h,w=0,x=!1,A=!1,C=!0;if(typeof n!="function")throw new ft(I);t=gt(t)||0,xn(e)&&(x=!!e.leading,A="maxWait"in e,o=A?Rn(gt(e.maxWait)||0,t):o,C="trailing"in e?!!e.trailing:C);function T(In){var yt=r,Dt=s;return r=s=i,w=In,a=n.apply(Dt,yt),a}function D(In){return w=In,l=Ke(J,t),x?T(In):a}function z(In){var yt=In-h,Dt=In-w,qo=t-yt;return A?Wn(qo,o-Dt):qo}function F(In){var yt=In-h,Dt=In-w;return h===i||yt>=t||yt<0||A&&Dt>=o}function J(){var In=Fr();if(F(In))return j(In);l=Ke(J,z(In))}function j(In){return l=i,C&&r?T(In):(r=s=i,a)}function rt(){l!==i&&Uu(l),w=0,r=h=s=l=i}function Zn(){return l===i?a:j(Fr())}function it(){var In=Fr(),yt=F(In);if(r=arguments,s=this,h=In,yt){if(l===i)return D(h);if(A)return Uu(l),l=Ke(J,t),T(h)}return l===i&&(l=Ke(J,t)),a}return it.cancel=rt,it.flush=Zn,it}var cg=X(function(n,t){return du(n,1,t)}),hg=X(function(n,t,e){return du(n,gt(t)||0,e)});function gg(n){return Rt(n,Ln)}function Ur(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new ft(I);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=n.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new(Ur.Cache||Lt),e}Ur.Cache=Lt;function Br(n){if(typeof n!="function")throw new ft(I);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function pg(n){return So(2,n)}var dg=tc(function(n,t){t=t.length==1&&Z(t[0])?wn(t[0],nt(O())):wn(Bn(t,1),nt(O()));var e=t.length;return X(function(r){for(var s=-1,o=Wn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return jn(n,this,r)})}),Xi=X(function(n,t){var e=Nt(t,Ce(Xi));return Rt(n,pn,i,t,e)}),Mo=X(function(n,t){var e=Nt(t,Ce(Mo));return Rt(n,bn,i,t,e)}),_g=Tt(function(n,t){return Rt(n,on,i,i,i,t)});function vg(n,t){if(typeof n!="function")throw new ft(I);return t=t===i?t:q(t),X(n,t)}function wg(n,t){if(typeof n!="function")throw new ft(I);return t=t==null?0:Rn(q(t),0),X(function(e){var r=e[t],s=Zt(e,0,t);return r&&Wt(s,r),jn(n,this,s)})}function xg(n,t,e){var r=!0,s=!0;if(typeof n!="function")throw new ft(I);return xn(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),Lo(n,t,{leading:r,maxWait:t,trailing:s})}function mg(n){return Ao(n,1)}function yg(n,t){return Xi(Di(t),n)}function Ag(){if(!arguments.length)return[];var n=arguments[0];return Z(n)?n:[n]}function Sg(n){return lt(n,k)}function Ig(n,t){return t=typeof t=="function"?t:i,lt(n,k,t)}function Eg(n){return lt(n,M|k)}function Cg(n,t){return t=typeof t=="function"?t:i,lt(n,M|k,t)}function Lg(n,t){return t==null||pu(n,t,Dn(t))}function mt(n,t){return n===t||n!==n&&t!==t}var Mg=Rr(Ai),Rg=Rr(function(n,t){return n>=t}),le=mu(function(){return arguments}())?mu:function(n){return An(n)&&an.call(n,"callee")&&!uu.call(n,"callee")},Z=p.isArray,Tg=$s?nt($s):Wl;function zn(n){return n!=null&&Wr(n.length)&&!Ot(n)}function Sn(n){return An(n)&&zn(n)}function bg(n){return n===!0||n===!1||An(n)&&Gn(n)==Ut}var Kt=Ka||os,Og=Gs?nt(Gs):Nl;function Pg(n){return An(n)&&n.nodeType===1&&!qe(n)}function Dg(n){if(n==null)return!0;if(zn(n)&&(Z(n)||typeof n=="string"||typeof n.splice=="function"||Kt(n)||Le(n)||le(n)))return!n.length;var t=Nn(n);if(t==Qn||t==Kn)return!n.size;if(Ze(n))return!Ei(n).length;for(var e in n)if(an.call(n,e))return!1;return!0}function Fg(n,t){return $e(n,t)}function Ug(n,t,e){e=typeof e=="function"?e:i;var r=e?e(n,t):i;return r===i?$e(n,t,i,e):!!r}function Ji(n){if(!An(n))return!1;var t=Gn(n);return t==pe||t==zr||typeof n.message=="string"&&typeof n.name=="string"&&!qe(n)}function Bg(n){return typeof n=="number"&&fu(n)}function Ot(n){if(!xn(n))return!1;var t=Gn(n);return t==Xt||t==Je||t==Te||t==Yr}function Ro(n){return typeof n=="number"&&n==q(n)}function Wr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=En}function xn(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function An(n){return n!=null&&typeof n=="object"}var To=Hs?nt(Hs):$l;function Wg(n,t){return n===t||Ii(n,t,$i(t))}function Ng(n,t,e){return e=typeof e=="function"?e:i,Ii(n,t,$i(t),e)}function kg(n){return bo(n)&&n!=+n}function $g(n){if(Ic(n))throw new G(_);return yu(n)}function Gg(n){return n===null}function Hg(n){return n==null}function bo(n){return typeof n=="number"||An(n)&&Gn(n)==Jt}function qe(n){if(!An(n)||Gn(n)!=_t)return!1;var t=cr(n);if(t===null)return!0;var e=an.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&or.call(e)==Na}var Qi=Zs?nt(Zs):Gl;function Zg(n){return Ro(n)&&n>=-En&&n<=En}var Oo=Ks?nt(Ks):Hl;function Nr(n){return typeof n=="string"||!Z(n)&&An(n)&&Gn(n)==jt}function et(n){return typeof n=="symbol"||An(n)&&Gn(n)==y}var Le=qs?nt(qs):Zl;function Kg(n){return n===i}function qg(n){return An(n)&&Nn(n)==b}function zg(n){return An(n)&&Gn(n)==U}var Vg=Rr(Ci),Yg=Rr(function(n,t){return n<=t});function Po(n){if(!n)return[];if(zn(n))return Nr(n)?wt(n):qn(n);if(Pe&&n[Pe])return La(n[Pe]());var t=Nn(n),e=t==Qn?gi:t==Kn?ir:Me;return e(n)}function Pt(n){if(!n)return n===0?n:0;if(n=gt(n),n===Fn||n===-Fn){var t=n<0?-1:1;return t*dt}return n===n?n:0}function q(n){var t=Pt(n),e=t%1;return t===t?e?t-e:t:0}function Do(n){return n?ue(q(n),0,yn):0}function gt(n){if(typeof n=="number")return n;if(et(n))return On;if(xn(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=xn(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=Qs(n);var e=Tf.test(n);return e||Of.test(n)?la(n.slice(2),e?2:8):Rf.test(n)?On:+n}function Fo(n){return It(n,Vn(n))}function Xg(n){return n?ue(q(n),-En,En):n===0?n:0}function fn(n){return n==null?"":tt(n)}var Jg=Ie(function(n,t){if(Ze(t)||zn(t)){It(t,Dn(t),n);return}for(var e in t)an.call(t,e)&&We(n,e,t[e])}),Uo=Ie(function(n,t){It(t,Vn(t),n)}),kr=Ie(function(n,t,e,r){It(t,Vn(t),n,r)}),Qg=Ie(function(n,t,e,r){It(t,Dn(t),n,r)}),jg=Tt(xi);function np(n,t){var e=Se(n);return t==null?e:gu(e,t)}var tp=X(function(n,t){n=hn(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&Hn(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],a=Vn(o),l=-1,h=a.length;++l<h;){var w=a[l],x=n[w];(x===i||mt(x,me[w])&&!an.call(n,w))&&(n[w]=o[w])}return n}),ep=X(function(n){return n.push(i,Qu),jn(Bo,i,n)});function rp(n,t){return Vs(n,O(t,3),St)}function ip(n,t){return Vs(n,O(t,3),yi)}function sp(n,t){return n==null?n:mi(n,O(t,3),Vn)}function up(n,t){return n==null?n:wu(n,O(t,3),Vn)}function op(n,t){return n&&St(n,O(t,3))}function fp(n,t){return n&&yi(n,O(t,3))}function ap(n){return n==null?[]:yr(n,Dn(n))}function lp(n){return n==null?[]:yr(n,Vn(n))}function ji(n,t,e){var r=n==null?i:oe(n,t);return r===i?e:r}function cp(n,t){return n!=null&&to(n,t,Dl)}function ns(n,t){return n!=null&&to(n,t,Fl)}var hp=zu(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=fr.call(t)),n[t]=e},es(Yn)),gp=zu(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=fr.call(t)),an.call(n,t)?n[t].push(e):n[t]=[e]},O),pp=X(ke);function Dn(n){return zn(n)?cu(n):Ei(n)}function Vn(n){return zn(n)?cu(n,!0):Kl(n)}function dp(n,t){var e={};return t=O(t,3),St(n,function(r,s,o){Mt(e,t(r,s,o),r)}),e}function _p(n,t){var e={};return t=O(t,3),St(n,function(r,s,o){Mt(e,s,t(r,s,o))}),e}var vp=Ie(function(n,t,e){Ar(n,t,e)}),Bo=Ie(function(n,t,e,r){Ar(n,t,e,r)}),wp=Tt(function(n,t){var e={};if(n==null)return e;var r=!1;t=wn(t,function(o){return o=Ht(o,n),r||(r=o.length>1),o}),It(n,Ni(n),e),r&&(e=lt(e,M|K|k,hc));for(var s=t.length;s--;)bi(e,t[s]);return e});function xp(n,t){return Wo(n,Br(O(t)))}var mp=Tt(function(n,t){return n==null?{}:zl(n,t)});function Wo(n,t){if(n==null)return{};var e=wn(Ni(n),function(r){return[r]});return t=O(t),Mu(n,e,function(r,s){return t(r,s[0])})}function yp(n,t,e){t=Ht(t,n);var r=-1,s=t.length;for(s||(s=1,n=i);++r<s;){var o=n==null?i:n[Et(t[r])];o===i&&(r=s,o=e),n=Ot(o)?o.call(n):o}return n}function Ap(n,t,e){return n==null?n:Ge(n,t,e)}function Sp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Ge(n,t,e,r)}var No=Xu(Dn),ko=Xu(Vn);function Ip(n,t,e){var r=Z(n),s=r||Kt(n)||Le(n);if(t=O(t,4),e==null){var o=n&&n.constructor;s?e=r?new o:[]:xn(n)?e=Ot(o)?Se(cr(n)):{}:e={}}return(s?ot:St)(n,function(a,l,h){return t(e,a,l,h)}),e}function Ep(n,t){return n==null?!0:bi(n,t)}function Cp(n,t,e){return n==null?n:Pu(n,t,Di(e))}function Lp(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Pu(n,t,Di(e),r)}function Me(n){return n==null?[]:hi(n,Dn(n))}function Mp(n){return n==null?[]:hi(n,Vn(n))}function Rp(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=gt(e),e=e===e?e:0),t!==i&&(t=gt(t),t=t===t?t:0),ue(gt(n),t,e)}function Tp(n,t,e){return t=Pt(t),e===i?(e=t,t=0):e=Pt(e),n=gt(n),Ul(n,t,e)}function bp(n,t,e){if(e&&typeof e!="boolean"&&Hn(n,t,e)&&(t=e=i),e===i&&(typeof t=="boolean"?(e=t,t=i):typeof n=="boolean"&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Pt(n),t===i?(t=n,n=0):t=Pt(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=au();return Wn(n+s*(t-n+aa("1e-"+((s+"").length-1))),t)}return Mi(n,t)}var Op=Ee(function(n,t,e){return t=t.toLowerCase(),n+(e?$o(t):t)});function $o(n){return ts(fn(n).toLowerCase())}function Go(n){return n=fn(n),n&&n.replace(Df,Aa).replace(jf,"")}function Pp(n,t,e){n=fn(n),t=tt(t);var r=n.length;e=e===i?r:ue(q(e),0,r);var s=e;return e-=t.length,e>=0&&n.slice(e,s)==t}function Dp(n){return n=fn(n),n&&pf.test(n)?n.replace(ws,Sa):n}function Fp(n){return n=fn(n),n&&mf.test(n)?n.replace(Xr,"\\$&"):n}var Up=Ee(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Bp=Ee(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),Wp=Zu("toLowerCase");function Np(n,t,e){n=fn(n),t=q(t);var r=t?we(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return Mr(dr(s),e)+n+Mr(pr(s),e)}function kp(n,t,e){n=fn(n),t=q(t);var r=t?we(n):0;return t&&r<t?n+Mr(t-r,e):n}function $p(n,t,e){n=fn(n),t=q(t);var r=t?we(n):0;return t&&r<t?Mr(t-r,e)+n:n}function Gp(n,t,e){return e||t==null?t=0:t&&(t=+t),Ya(fn(n).replace(Jr,""),t||0)}function Hp(n,t,e){return(e?Hn(n,t,e):t===i)?t=1:t=q(t),Ri(fn(n),t)}function Zp(){var n=arguments,t=fn(n[0]);return n.length<3?t:t.replace(n[1],n[2])}var Kp=Ee(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()});function qp(n,t,e){return e&&typeof e!="number"&&Hn(n,t,e)&&(t=e=i),e=e===i?yn:e>>>0,e?(n=fn(n),n&&(typeof t=="string"||t!=null&&!Qi(t))&&(t=tt(t),!t&&ve(n))?Zt(wt(n),0,e):n.split(t,e)):[]}var zp=Ee(function(n,t,e){return n+(e?" ":"")+ts(t)});function Vp(n,t,e){return n=fn(n),e=e==null?0:ue(q(e),0,n.length),t=tt(t),n.slice(e,e+t.length)==t}function Yp(n,t,e){var r=u.templateSettings;e&&Hn(n,t,e)&&(t=i),n=fn(n),t=kr({},t,r,Ju);var s=kr({},t.imports,r.imports,Ju),o=Dn(s),a=hi(s,o),l,h,w=0,x=t.interpolate||je,A="__p += '",C=pi((t.escape||je).source+"|"+x.source+"|"+(x===xs?Mf:je).source+"|"+(t.evaluate||je).source+"|$","g"),T="//# sourceURL="+(an.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ia+"]")+`
`;n.replace(C,function(F,J,j,rt,Zn,it){return j||(j=rt),A+=n.slice(w,it).replace(Ff,Ia),J&&(l=!0,A+=`' +
__e(`+J+`) +
'`),Zn&&(h=!0,A+=`';
`+Zn+`;
__p += '`),j&&(A+=`' +
((__t = (`+j+`)) == null ? '' : __t) +
'`),w=it+F.length,F}),A+=`';
`;var D=an.call(t,"variable")&&t.variable;if(!D)A=`with (obj) {
`+A+`
}
`;else if(Cf.test(D))throw new G(E);A=(h?A.replace(lf,""):A).replace(cf,"$1").replace(hf,"$1;"),A="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+A+`return __p
}`;var z=Zo(function(){return un(o,T+"return "+A).apply(i,a)});if(z.source=A,Ji(z))throw z;return z}function Xp(n){return fn(n).toLowerCase()}function Jp(n){return fn(n).toUpperCase()}function Qp(n,t,e){if(n=fn(n),n&&(e||t===i))return Qs(n);if(!n||!(t=tt(t)))return n;var r=wt(n),s=wt(t),o=js(r,s),a=nu(r,s)+1;return Zt(r,o,a).join("")}function jp(n,t,e){if(n=fn(n),n&&(e||t===i))return n.slice(0,eu(n)+1);if(!n||!(t=tt(t)))return n;var r=wt(n),s=nu(r,wt(t))+1;return Zt(r,0,s).join("")}function nd(n,t,e){if(n=fn(n),n&&(e||t===i))return n.replace(Jr,"");if(!n||!(t=tt(t)))return n;var r=wt(n),s=js(r,wt(t));return Zt(r,s).join("")}function td(n,t){var e=Xn,r=dn;if(xn(t)){var s="separator"in t?t.separator:s;e="length"in t?q(t.length):e,r="omission"in t?tt(t.omission):r}n=fn(n);var o=n.length;if(ve(n)){var a=wt(n);o=a.length}if(e>=o)return n;var l=e-we(r);if(l<1)return r;var h=a?Zt(a,0,l).join(""):n.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),Qi(s)){if(n.slice(l).search(s)){var w,x=h;for(s.global||(s=pi(s.source,fn(ms.exec(s))+"g")),s.lastIndex=0;w=s.exec(x);)var A=w.index;h=h.slice(0,A===i?l:A)}}else if(n.indexOf(tt(s),l)!=l){var C=h.lastIndexOf(s);C>-1&&(h=h.slice(0,C))}return h+r}function ed(n){return n=fn(n),n&&gf.test(n)?n.replace(vs,ba):n}var rd=Ee(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),ts=Zu("toUpperCase");function Ho(n,t,e){return n=fn(n),t=e?i:t,t===i?Ca(n)?Da(n):va(n):n.match(t)||[]}var Zo=X(function(n,t){try{return jn(n,i,t)}catch(e){return Ji(e)?e:new G(e)}}),id=Tt(function(n,t){return ot(t,function(e){e=Et(e),Mt(n,e,Yi(n[e],n))}),n});function sd(n){var t=n==null?0:n.length,e=O();return n=t?wn(n,function(r){if(typeof r[1]!="function")throw new ft(I);return[e(r[0]),r[1]]}):[],X(function(r){for(var s=-1;++s<t;){var o=n[s];if(jn(o[0],this,r))return jn(o[1],this,r)}})}function ud(n){return bl(lt(n,M))}function es(n){return function(){return n}}function od(n,t){return n==null||n!==n?t:n}var fd=qu(),ad=qu(!0);function Yn(n){return n}function rs(n){return Au(typeof n=="function"?n:lt(n,M))}function ld(n){return Iu(lt(n,M))}function cd(n,t){return Eu(n,lt(t,M))}var hd=X(function(n,t){return function(e){return ke(e,n,t)}}),gd=X(function(n,t){return function(e){return ke(n,e,t)}});function is(n,t,e){var r=Dn(t),s=yr(t,r);e==null&&!(xn(t)&&(s.length||!r.length))&&(e=t,t=n,n=this,s=yr(t,Dn(t)));var o=!(xn(e)&&"chain"in e)||!!e.chain,a=Ot(n);return ot(s,function(l){var h=t[l];n[l]=h,a&&(n.prototype[l]=function(){var w=this.__chain__;if(o||w){var x=n(this.__wrapped__),A=x.__actions__=qn(this.__actions__);return A.push({func:h,args:arguments,thisArg:n}),x.__chain__=w,x}return h.apply(n,Wt([this.value()],arguments))})}),n}function pd(){return Un._===this&&(Un._=ka),this}function ss(){}function dd(n){return n=q(n),X(function(t){return Cu(t,n)})}var _d=Ui(wn),vd=Ui(zs),wd=Ui(oi);function Ko(n){return Hi(n)?fi(Et(n)):Vl(n)}function xd(n){return function(t){return n==null?i:oe(n,t)}}var md=Vu(),yd=Vu(!0);function us(){return[]}function os(){return!1}function Ad(){return{}}function Sd(){return""}function Id(){return!0}function Ed(n,t){if(n=q(n),n<1||n>En)return[];var e=yn,r=Wn(n,yn);t=O(t),n-=yn;for(var s=ci(r,t);++e<n;)t(e);return s}function Cd(n){return Z(n)?wn(n,Et):et(n)?[n]:qn(lo(fn(n)))}function Ld(n){var t=++Wa;return fn(n)+t}var Md=Lr(function(n,t){return n+t},0),Rd=Bi("ceil"),Td=Lr(function(n,t){return n/t},1),bd=Bi("floor");function Od(n){return n&&n.length?mr(n,Yn,Ai):i}function Pd(n,t){return n&&n.length?mr(n,O(t,2),Ai):i}function Dd(n){return Xs(n,Yn)}function Fd(n,t){return Xs(n,O(t,2))}function Ud(n){return n&&n.length?mr(n,Yn,Ci):i}function Bd(n,t){return n&&n.length?mr(n,O(t,2),Ci):i}var Wd=Lr(function(n,t){return n*t},1),Nd=Bi("round"),kd=Lr(function(n,t){return n-t},0);function $d(n){return n&&n.length?li(n,Yn):0}function Gd(n,t){return n&&n.length?li(n,O(t,2)):0}return u.after=lg,u.ary=Ao,u.assign=Jg,u.assignIn=Uo,u.assignInWith=kr,u.assignWith=Qg,u.at=jg,u.before=So,u.bind=Yi,u.bindAll=id,u.bindKey=Io,u.castArray=Ag,u.chain=xo,u.chunk=bc,u.compact=Oc,u.concat=Pc,u.cond=sd,u.conforms=ud,u.constant=es,u.countBy=$h,u.create=np,u.curry=Eo,u.curryRight=Co,u.debounce=Lo,u.defaults=tp,u.defaultsDeep=ep,u.defer=cg,u.delay=hg,u.difference=Dc,u.differenceBy=Fc,u.differenceWith=Uc,u.drop=Bc,u.dropRight=Wc,u.dropRightWhile=Nc,u.dropWhile=kc,u.fill=$c,u.filter=Hh,u.flatMap=qh,u.flatMapDeep=zh,u.flatMapDepth=Vh,u.flatten=po,u.flattenDeep=Gc,u.flattenDepth=Hc,u.flip=gg,u.flow=fd,u.flowRight=ad,u.fromPairs=Zc,u.functions=ap,u.functionsIn=lp,u.groupBy=Yh,u.initial=qc,u.intersection=zc,u.intersectionBy=Vc,u.intersectionWith=Yc,u.invert=hp,u.invertBy=gp,u.invokeMap=Jh,u.iteratee=rs,u.keyBy=Qh,u.keys=Dn,u.keysIn=Vn,u.map=Dr,u.mapKeys=dp,u.mapValues=_p,u.matches=ld,u.matchesProperty=cd,u.memoize=Ur,u.merge=vp,u.mergeWith=Bo,u.method=hd,u.methodOf=gd,u.mixin=is,u.negate=Br,u.nthArg=dd,u.omit=wp,u.omitBy=xp,u.once=pg,u.orderBy=jh,u.over=_d,u.overArgs=dg,u.overEvery=vd,u.overSome=wd,u.partial=Xi,u.partialRight=Mo,u.partition=ng,u.pick=mp,u.pickBy=Wo,u.property=Ko,u.propertyOf=xd,u.pull=jc,u.pullAll=vo,u.pullAllBy=nh,u.pullAllWith=th,u.pullAt=eh,u.range=md,u.rangeRight=yd,u.rearg=_g,u.reject=rg,u.remove=rh,u.rest=vg,u.reverse=zi,u.sampleSize=sg,u.set=Ap,u.setWith=Sp,u.shuffle=ug,u.slice=ih,u.sortBy=ag,u.sortedUniq=ch,u.sortedUniqBy=hh,u.split=qp,u.spread=wg,u.tail=gh,u.take=ph,u.takeRight=dh,u.takeRightWhile=_h,u.takeWhile=vh,u.tap=Oh,u.throttle=xg,u.thru=Pr,u.toArray=Po,u.toPairs=No,u.toPairsIn=ko,u.toPath=Cd,u.toPlainObject=Fo,u.transform=Ip,u.unary=mg,u.union=wh,u.unionBy=xh,u.unionWith=mh,u.uniq=yh,u.uniqBy=Ah,u.uniqWith=Sh,u.unset=Ep,u.unzip=Vi,u.unzipWith=wo,u.update=Cp,u.updateWith=Lp,u.values=Me,u.valuesIn=Mp,u.without=Ih,u.words=Ho,u.wrap=yg,u.xor=Eh,u.xorBy=Ch,u.xorWith=Lh,u.zip=Mh,u.zipObject=Rh,u.zipObjectDeep=Th,u.zipWith=bh,u.entries=No,u.entriesIn=ko,u.extend=Uo,u.extendWith=kr,is(u,u),u.add=Md,u.attempt=Zo,u.camelCase=Op,u.capitalize=$o,u.ceil=Rd,u.clamp=Rp,u.clone=Sg,u.cloneDeep=Eg,u.cloneDeepWith=Cg,u.cloneWith=Ig,u.conformsTo=Lg,u.deburr=Go,u.defaultTo=od,u.divide=Td,u.endsWith=Pp,u.eq=mt,u.escape=Dp,u.escapeRegExp=Fp,u.every=Gh,u.find=Zh,u.findIndex=ho,u.findKey=rp,u.findLast=Kh,u.findLastIndex=go,u.findLastKey=ip,u.floor=bd,u.forEach=mo,u.forEachRight=yo,u.forIn=sp,u.forInRight=up,u.forOwn=op,u.forOwnRight=fp,u.get=ji,u.gt=Mg,u.gte=Rg,u.has=cp,u.hasIn=ns,u.head=_o,u.identity=Yn,u.includes=Xh,u.indexOf=Kc,u.inRange=Tp,u.invoke=pp,u.isArguments=le,u.isArray=Z,u.isArrayBuffer=Tg,u.isArrayLike=zn,u.isArrayLikeObject=Sn,u.isBoolean=bg,u.isBuffer=Kt,u.isDate=Og,u.isElement=Pg,u.isEmpty=Dg,u.isEqual=Fg,u.isEqualWith=Ug,u.isError=Ji,u.isFinite=Bg,u.isFunction=Ot,u.isInteger=Ro,u.isLength=Wr,u.isMap=To,u.isMatch=Wg,u.isMatchWith=Ng,u.isNaN=kg,u.isNative=$g,u.isNil=Hg,u.isNull=Gg,u.isNumber=bo,u.isObject=xn,u.isObjectLike=An,u.isPlainObject=qe,u.isRegExp=Qi,u.isSafeInteger=Zg,u.isSet=Oo,u.isString=Nr,u.isSymbol=et,u.isTypedArray=Le,u.isUndefined=Kg,u.isWeakMap=qg,u.isWeakSet=zg,u.join=Xc,u.kebabCase=Up,u.last=ht,u.lastIndexOf=Jc,u.lowerCase=Bp,u.lowerFirst=Wp,u.lt=Vg,u.lte=Yg,u.max=Od,u.maxBy=Pd,u.mean=Dd,u.meanBy=Fd,u.min=Ud,u.minBy=Bd,u.stubArray=us,u.stubFalse=os,u.stubObject=Ad,u.stubString=Sd,u.stubTrue=Id,u.multiply=Wd,u.nth=Qc,u.noConflict=pd,u.noop=ss,u.now=Fr,u.pad=Np,u.padEnd=kp,u.padStart=$p,u.parseInt=Gp,u.random=bp,u.reduce=tg,u.reduceRight=eg,u.repeat=Hp,u.replace=Zp,u.result=yp,u.round=Nd,u.runInContext=c,u.sample=ig,u.size=og,u.snakeCase=Kp,u.some=fg,u.sortedIndex=sh,u.sortedIndexBy=uh,u.sortedIndexOf=oh,u.sortedLastIndex=fh,u.sortedLastIndexBy=ah,u.sortedLastIndexOf=lh,u.startCase=zp,u.startsWith=Vp,u.subtract=kd,u.sum=$d,u.sumBy=Gd,u.template=Yp,u.times=Ed,u.toFinite=Pt,u.toInteger=q,u.toLength=Do,u.toLower=Xp,u.toNumber=gt,u.toSafeInteger=Xg,u.toString=fn,u.toUpper=Jp,u.trim=Qp,u.trimEnd=jp,u.trimStart=nd,u.truncate=td,u.unescape=ed,u.uniqueId=Ld,u.upperCase=rd,u.upperFirst=ts,u.each=mo,u.eachRight=yo,u.first=_o,is(u,function(){var n={};return St(u,function(t,e){an.call(u.prototype,e)||(n[e]=t)}),n}(),{chain:!1}),u.VERSION=g,ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){u[n].placeholder=u}),ot(["drop","take"],function(n,t){Q.prototype[n]=function(e){e=e===i?1:Rn(q(e),0);var r=this.__filtered__&&!t?new Q(this):this.clone();return r.__filtered__?r.__takeCount__=Wn(e,r.__takeCount__):r.__views__.push({size:Wn(e,yn),type:n+(r.__dir__<0?"Right":"")}),r},Q.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),ot(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e==pt||e==$;Q.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:O(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),ot(["head","last"],function(n,t){var e="take"+(t?"Right":"");Q.prototype[n]=function(){return this[e](1).value()[0]}}),ot(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");Q.prototype[n]=function(){return this.__filtered__?new Q(this):this[e](1)}}),Q.prototype.compact=function(){return this.filter(Yn)},Q.prototype.find=function(n){return this.filter(n).head()},Q.prototype.findLast=function(n){return this.reverse().find(n)},Q.prototype.invokeMap=X(function(n,t){return typeof n=="function"?new Q(this):this.map(function(e){return ke(e,n,t)})}),Q.prototype.reject=function(n){return this.filter(Br(O(n)))},Q.prototype.slice=function(n,t){n=q(n);var e=this;return e.__filtered__&&(n>0||t<0)?new Q(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(t=q(t),e=t<0?e.dropRight(-t):e.take(t-n)),e)},Q.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Q.prototype.toArray=function(){return this.take(yn)},St(Q.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=u[r?"take"+(t=="last"?"Right":""):t],o=r||/^find/.test(t);s&&(u.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof Q,w=l[0],x=h||Z(a),A=function(J){var j=s.apply(u,Wt([J],l));return r&&C?j[0]:j};x&&e&&typeof w=="function"&&w.length!=1&&(h=x=!1);var C=this.__chain__,T=!!this.__actions__.length,D=o&&!C,z=h&&!T;if(!o&&x){a=z?a:new Q(this);var F=n.apply(a,l);return F.__actions__.push({func:Pr,args:[A],thisArg:i}),new at(F,C)}return D&&z?n.apply(this,l):(F=this.thru(A),D?r?F.value()[0]:F.value():F)})}),ot(["pop","push","shift","sort","splice","unshift"],function(n){var t=sr[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);u.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Z(o)?o:[],s)}return this[e](function(a){return t.apply(Z(a)?a:[],s)})}}),St(Q.prototype,function(n,t){var e=u[t];if(e){var r=e.name+"";an.call(Ae,r)||(Ae[r]=[]),Ae[r].push({name:t,func:e})}}),Ae[Cr(i,Y).name]=[{name:"wrapper",func:i}],Q.prototype.clone=el,Q.prototype.reverse=rl,Q.prototype.value=il,u.prototype.at=Ph,u.prototype.chain=Dh,u.prototype.commit=Fh,u.prototype.next=Uh,u.prototype.plant=Wh,u.prototype.reverse=Nh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=kh,u.prototype.first=u.prototype.head,Pe&&(u.prototype[Pe]=Bh),u},xe=Fa();ee?((ee.exports=xe)._=xe,ri._=xe):Un._=xe}).call(ze)})(Zr,Zr.exports);Zr.exports;const O0="/assets/top_view-4gr4hmiW.svg",P0="/assets/redTractor-Cl-uV8Ra.svg",D0="/assets/yellowTractor-DVC8ngGG.svg",F0="/assets/blackTractor-DklC2nUm.svg",U0="AIzaSyD8TrUWS9FRTu-MRP339mJF_iWlORvEGUA";function B0({showCard:S,loadingVehicle:f}){const{center:i,selectedParameterList:g,selectedVehicle:d,vehicleList:_,icons:I,locationData:E,placesData:m,imeiNumbers:N,onlineVehicle:P,loading:M,services_loading:K}=Vt(y=>y.liveMap),{mode:k,styles:nn,vehicles_details:V}=Vt(y=>y.dashboard),{collapsed:H}=Vt(y=>y.auth),[Y,mn]=en.useState(null),[ln,Tn]=en.useState(""),[pn,bn]=en.useState(),[sn,on]=en.useState(),[Ln,Xn]=en.useState(null);en.useState("");const[dn,vn]=en.useState(),[$n,pt]=en.useState(!1),[Jn,$]=en.useState(null),Fn=rf(),En={},dt=en.useRef([]),On=en.useRef(null),yn=en.useRef({}),{isLoaded:Re,loadError:Kr}=s0({googleMapsApiKey:`${U0}`,loadingElement:W.jsx(t0,{})});en.useEffect(()=>{Re&&mn(window.google.maps)},[Re]),en.useEffect(()=>{var y,R,b,U;if(Object.keys(d).length>0)if(Jn){const B=Jn==null?void 0:Jn.filter(tn=>{var cn;return((cn=tn==null?void 0:tn.latestDocument)==null?void 0:cn.imei)==(d==null?void 0:d.imei)});bn(B);let rn={lat:(R=(y=B[0])==null?void 0:y.latestDocument)==null?void 0:R.lat,lng:(U=(b=B[0])==null?void 0:b.latestDocument)==null?void 0:U.lng};console.log("center: ",rn),Fn(sf(rn))}else{const B=E==null?void 0:E.filter(rn=>{var tn;return((tn=rn==null?void 0:rn.latestDocument)==null?void 0:tn.imei)==(d==null?void 0:d.imei)});bn(B)}else bn(E),$(E)},[E,d]),en.useEffect(()=>{on(g)},[g]),en.useEffect(()=>{Fn(Kd({})),pt(!0)},[d]),en.useEffect(()=>{if(console.log("before: ",pn),!Y)return;const y=On.current;let R=null;return(async()=>{console.log("after: ",pn);const U=await qr(pn,y);R&&R.clearMarkers(),R=Je(U,y),fs.on("locationinfo",B=>{console.log("locationinfo: ",B),Jt(B,dt),$(rn=>{const tn=Array.isArray(rn)?rn:[],cn=tn.findIndex(Cn=>Number(Cn.latestDocument.imei)===Number(B.imei));if(cn!==-1){const Cn=[...tn];return Cn[cn]={...Cn[cn],latestDocument:{...Cn[cn].latestDocument,...B}},Cn}else return[...tn,{_id:B.imei,latestDocument:B}]})})})(),()=>{R&&R.clearMarkers(),Object.keys(yn.current).forEach(U=>cancelAnimationFrame(yn.current[U])),fs.off("locationinfo")}},[Y,pn,fs,sn,dt,E]);const qr=(y,R)=>y.map(b=>{const U=b.latestDocument.imei,B=dt.current[U]||Ft(b,R);return dt.current[U]&&ge(b,B),B}),Ft=(y,R)=>{const b=y.latestDocument.imei,U=new Y.Marker({position:{lat:y.latestDocument.lat,lng:y.latestDocument.lng},map:R,icon:Te(y)});return U.addListener("click",()=>pe(y,U,R)),dt.current[b]=U,U},ge=async(y,R)=>{var cn;const b=R.getPosition(),U=((cn=R.getIcon())==null?void 0:cn.rotation)||0,B={lat:y.latestDocument.lat,lng:y.latestDocument.lng},rn=y.latestDocument.heading||0;Xt(R,b,B,U,rn);const tn=await Te(y);R.setIcon(tn)},Te=async y=>{var tn,cn,Cn,Pn,vt;const R=(tn=y==null?void 0:y.latestDocument)==null?void 0:tn.imei;Vr(R);const b=Qe(y==null?void 0:y.latestDocument),U=((cn=y==null?void 0:y.latestDocument)==null?void 0:cn.heading)||0;return Ut((Cn=y==null?void 0:y.latestDocument)==null?void 0:Cn.imei)&&Yt((Pn=y==null?void 0:y.latestDocument)==null?void 0:Pn.imei),{url:await zr(b,U),fillOpacity:2,strokeWeight:1,scale:4.5,rotation:(vt=y==null?void 0:y.latestDocument)==null?void 0:vt.heading,size:new Y.Size(30,30),scaledSize:new Y.Size(30,30)}},Ut=y=>P.includes(Number(y)),Yt=y=>E==null?void 0:E.some(R=>Number(R.latestDocument.imei)===Number(y)&&R.latestDocument.speed>0&&(R.latestDocument.ignition===!0||R.latestDocument.ignition===1)),zr=(y,R,b,U=80)=>{const B=`${y}-${R}-${U}-${b}`;if(En[B])return Promise.resolve(En[B]);const rn=document.createElement("canvas"),tn=rn.getContext("2d");rn.width=U,rn.height=U;const cn=new Image;return cn.src=y,new Promise(Cn=>{cn.onload=()=>{if(tn.clearRect(0,0,rn.width,rn.height),tn.translate(U/2,U/2),tn.rotate(R*Math.PI/180),tn.translate(-U/2,-U/2),tn.drawImage(cn,0,0,U,U),b){const ne=U-30-5,te=U-30-5;tn.beginPath(),tn.arc(ne,te,30/2,0,Math.PI*2),tn.fillStyle=b,tn.fill()}const Pn=rn.toDataURL("image/png");En[B]=Pn,Cn(Pn)},cn.onerror=Pn=>{console.error("Error loading image for rotation:",Pn),Cn(y)}})},pe=(y,R,b)=>{Yr(y.latestDocument._id,y,R,b),Qt(y.latestDocument.imei)},Xt=(y,R,b,U,B)=>{const tn=performance.now(),cn=()=>{const Cn=performance.now()-tn,Pn=Math.min(Cn/500,1),vt=R.lat()+Pn*(b.lat-R.lat()),ne=R.lng()+Pn*(b.lng-R.lng()),te=(B-U+360)%360-180,be=(U+te*Pn+360)%360;y.setPosition({lat:vt,lng:ne});const At=y.getIcon();At&&typeof At=="object"&&y.setIcon({...At,rotation:be}),Pn<1?yn.current[y.getPosition()]=requestAnimationFrame(cn):(y.setPosition(b),At&&typeof At=="object"&&y.setIcon({...At,rotation:B}),delete yn.current[y.getPosition()])};yn.current[y.getPosition()]=requestAnimationFrame(cn)},Je=(y,R)=>new b0({map:R,markers:y,renderer:{render:({count:b,position:U})=>Qn(b,U)}}),Qn=(y,R)=>{const b=40+Math.min(y*2,40),U=30;let B;return y<10?B={start:"#76c7c0",end:"#34a853"}:y<50?B={start:"#fbbc05",end:"#f2994a"}:B={start:"#f45c42",end:"#d32f2f"},new Y.Marker({position:R,icon:{url:`data:image/svg+xml,${encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="${b}" height="${b}" viewBox="0 0 100 100">
            <defs>
              <radialGradient id="gradient" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="${B.start}" />
                <stop offset="100%" stop-color="${B.end}" />
              </radialGradient>
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.5)" />
              </filter>
            </defs>
            <!-- Outer Pulsating Ring -->
            <circle cx="50" cy="50" r="48" fill="url(#gradient)" filter="url(#shadow)" stroke="#ffffff" stroke-width="3" />
            <!-- Decorative Inner Ring -->
            <circle cx="50" cy="50" r="38" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="4 2" />
            <!-- Star Decoration -->
            <polygon points="50,15 54,38 70,38 57,50 62,68 50,57 38,68 43,50 30,38 46,38" fill="#ffffff" opacity="0.4" />
            <!-- Count Text -->
            <text x="50" y="55" font-size="${U}" fill="black" text-anchor="middle" font-family="'Courier New', monospace" font-weight="bold">
              ${y}
            </text>
          </svg>
        `)}`,scaledSize:new Y.Size(b,b)},label:null})},Jt=async(y,R,b)=>{var rn;const U=y.imei,B=R.current[U];if(B){const tn=B.getPosition(),cn=((rn=B.getIcon())==null?void 0:rn.rotation)||0,Cn={lat:y.lat,lng:y.lng},Pn=y.heading||0;Xt(B,tn,Cn,cn,Pn);const vt=await Te({latestDocument:y});B.setIcon(vt)}},Vr=y=>{if(!y)return"motorBike";const R=_t(y);return R||console.error(`No vehicle type found for IMEI: ${y}, defaulting to motorBike`),R||"motorBike"},_t=y=>{if(!V||V.length===0)return console.error("vehicles_details is not available"),null;const R=V.find(b=>(b==null?void 0:b.value)===y&&(b==null?void 0:b.vehilce_type));return R||console.error(`No vehicle found for IMEI: ${y}`),R?R.vehilce_type:null},Qe=y=>{let{speed:R,ignition:b,imei:U}=y;if(Ut(U)){if(!b)return P0;if(R>0&&b)return O0;if(R<=0&&b)return D0}else return F0},Yr=(y,R,b,U)=>{const B=new Y.InfoWindow,rn=`
      <div>
        <h3>Vehicle IMEI: ${R.latestDocument.imei}</h3>
         
      </div>
    `;Ln===y?(B.close(),Xn(null)):(B.setContent(rn),B.open(U,b),Xn(y))},Qt=y=>{const R=V&&(V==null?void 0:V.length)>0&&V.find(b=>(b==null?void 0:b.value)===y&&b);vn(R||null)},Kn=()=>{Object.keys(d).length>0||$n?pt(!$n):Hr.error("Please select any vehicle")};if(Kr)return"Error loading maps";if(!Re)return"Loading maps";if(!Y)return null;const jt={height:"93vh",width:"100%",transition:"transform 0.5s ease-in-out"};return W.jsxs(W.Fragment,{children:[W.jsx(kn,{sx:{position:"absolute",top:"780px",left:H?"74px":"250px",zIndex:1,background:tf.bgColor,padding:"5px",borderRadius:"10px",color:"white"},children:W.jsxs(ef,{sx:{color:"white"},onClick:Kn,children:[$n?"Hide":"Show"," Vehicle Info",W.jsx(f0,{})]})}),$n===!0&&W.jsx(v0,{handleVehicleInfo:Kn,udpatedParams:Jn}),W.jsxs(u0,{id:"map",mapContainerStyle:jt,zoom:Object.keys(d).length>0?15:5.8,center:i,onLoad:y=>{On.current=y},options:{styles:k?nn:""},children:[Object.keys(d).length>0&&W.jsx(e0,{setPlace:Tn,place:ln}),K||f?W.jsx(kn,{sx:{position:"absolute",top:"50%",left:"50%"},children:W.jsx(c0,{})}):m&&m.length>0&&m.map((y,R)=>{var b,U;return W.jsx(o0,{position:{lat:parseFloat((b=y==null?void 0:y.location)==null?void 0:b.lat),lng:parseFloat((U=y==null?void 0:y.location)==null?void 0:U.lng)},animation:window.google.maps.Animation.DROP,icon:{path:I[`${ln}`],fillOpacity:2,strokeWeight:1,scale:1,fillColor:"orange"}},R)})]})]})}function o_(){const{locationData:S,selectedVehicle:f,selectedParameterList:i}=Vt(dn=>dn.liveMap),{mode:g,selectedVehicleGroup:d}=Vt(dn=>dn.dashboard),_=n0(g),[I,E]=en.useState([]),{w_customer_id:m}=Vt(dn=>dn.auth),[N,P]=en.useState(),[M,K]=en.useState(!1),[k,nn]=en.useState(!1),[V,H]=en.useState([]),[Y,mn]=en.useState(!0),[ln,Tn]=en.useState(!1),[pn,bn]=en.useState(!1);let sn=rf();en.useEffect(()=>{sn(qd({}))},[]),en.useEffect(()=>{on()},[]),en.useEffect(()=>{var dn;if(Object.keys(f).length>0){const vn=(S==null?void 0:S.length)>0&&(S==null?void 0:S.filter($=>Number($.latestDocument.imei)===Number(f==null?void 0:f.imei)));if((vn==null?void 0:vn.length)<=0){Hr.error("Data not available for this vehicle",{id:"clipboard"});return}const{lat:$n,lng:pt}=((dn=vn==null?void 0:vn[0])==null?void 0:dn.latestDocument)??{},Jn={lat:$n||Vo.lat,lng:pt||Vo.lat};sn(sf(Jn))}},[f,S]),en.useEffect(()=>{H([]),sn(zo([{reg_id:"",imei:"",params:[]}]))},[f]);const on=async()=>{try{Tn(!0);let dn=[],vn=[];const $n=await sn(zd({w_customer_id:m}));if(Array.isArray($n.payload)){$n.payload.forEach($=>{var Fn,En,dt,On;Array.isArray($.imei)&&$.imei.length>0&&((Fn=$.imei[0])!=null&&Fn.mac_id)?(dn.push({id:$.id,label:$.registration_id,value:(En=$.imei[0])==null?void 0:En.mac_id,vehilce_type:$==null?void 0:$.segment,chassis_no:$==null?void 0:$.chassis_no,engine_no:$==null?void 0:$.engine_no,workShop:$==null?void 0:$.workshop,registration_id:$==null?void 0:$.registration_id,sell_date:$==null?void 0:$.sell_date,customer_name:$==null?void 0:$.customer_name,vehicle_model:(dt=$==null?void 0:$.vehicle_model)==null?void 0:dt.name,vehicle_group:$==null?void 0:$.vehicle_group}),vn.push((On=$.imei[0])==null?void 0:On.mac_id)):console.error("IMEI data not found for item:",$)});const pt="one",Jn=vn;vn.length>0&&sn(Vd({type:pt,imei:Jn})),E(dn),sn(Yd(dn)),sn(Xd({w_customer_id:m})),Tn(!1)}else Tn(!1),console.error("Unexpected data format:",$n),Hr.error("Unexpected data format:")}catch(dn){console.error("Error fetching vehicle data:",dn),Hr.error(`Error fetching vehicle data: ${dn}`)}},Ln=async dn=>{const{label:vn,imei:$n,id:pt,reg_id:Jn,checked:$}=dn;P(On=>On.map(yn=>yn.id===pt?{...yn,checked:!$}:yn));let Fn=[...V],En=[...V];if(!$)S.forEach(On=>{On.latestDocument.imei===$n&&(Fn.push({label:vn,value:On.latestDocument[vn==="maininputvoltage"?"mainInputVoltage":vn]}),En=Fn,H(Fn))});else{let On=V.filter(yn=>yn.label!==vn);En=On,H(On)}console.log("tempParamList",En),sn(zo([{reg_id:Jn,imei:$n,params:En}]))},Xn=I.filter(dn=>Object.keys(d).length===0||dn.vehicle_group===d.id);return W.jsxs("div",{className:"app",children:[W.jsx(jd,{}),W.jsxs("main",{className:"content",style:{width:"100%",background:"#dad6d626"},children:[W.jsx(Jd,{title:"Live Map",setShowVehicles:K,showVehicles:M,showParameters:k,setShowParameters:nn,setShowCard:mn,showCard:Y,setShowVehiclesGroup:bn,showVehiclesGroup:pn}),W.jsx(i0,{setShowVehiclesGroup:bn,showVehiclesGroup:pn,where:"livemap"}),W.jsxs(kn,{style:{display:"flex",width:"100%",height:"95vh"},children:[W.jsx(kn,{style:{width:M||k?"80%":"100%"},children:W.jsx(B0,{showCard:Y,loadingVehicle:ln})}),M&&W.jsx(kn,{style:{width:"20%",backgroundColor:_.grey[100]},children:W.jsx(Qd,{vehicleData:Xn,title:"Live Map",setParameterData:P,loadingVehicle:ln,setShowVehicles:K,showVehicles:M,showParameters:k,setShowParameters:nn})}),k&&W.jsx(kn,{style:{width:"20%",backgroundColor:_.grey[100]},children:W.jsx(r0,{parametersData:N,setParameterData:P,handleParameterChange:Ln})})]})]})]})}export{o_ as default};
